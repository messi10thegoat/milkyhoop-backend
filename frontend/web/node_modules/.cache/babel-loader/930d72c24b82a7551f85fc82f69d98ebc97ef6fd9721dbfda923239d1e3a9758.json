{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{getToken}from'../utils/auth';import QRScanner from'./QRScanner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DeviceManagement=_ref=>{let{isOpen,onClose}=_ref;const[devices,setDevices]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const[showScanner,setShowScanner]=useState(false);const[actionLoading,setActionLoading]=useState(null);// Fetch devices\nconst fetchDevices=useCallback(async()=>{setIsLoading(true);setError(null);try{const token=getToken();const response=await fetch('/api/devices',{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok){throw new Error('Failed to fetch devices');}const data=await response.json();if(data.success){setDevices(data.devices);}else{throw new Error(data.detail||'Failed to fetch devices');}}catch(err){console.error('Fetch devices error:',err);setError(err.message||'Gagal memuat daftar perangkat');}finally{setIsLoading(false);}},[]);// Logout specific device\nconst handleLogoutDevice=async deviceId=>{if(!confirm('Logout perangkat ini?'))return;setActionLoading(deviceId);try{const token=getToken();const response=await fetch(\"/api/devices/\".concat(deviceId),{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(token)}});if(response.ok){// Refresh device list\nawait fetchDevices();}else{const data=await response.json();alert(data.detail||'Gagal logout perangkat');}}catch(err){console.error('Logout device error:',err);alert('Terjadi kesalahan');}finally{setActionLoading(null);}};// Logout all web devices\nconst handleLogoutAllWeb=async()=>{if(!confirm('Logout semua perangkat web? Semua sesi desktop akan diakhiri.'))return;setActionLoading('all-web');try{const token=getToken();const response=await fetch('/api/devices/logout-all-web',{method:'POST',headers:{'Authorization':\"Bearer \".concat(token)}});const data=await response.json();if(response.ok&&data.success){await fetchDevices();alert(\"\".concat(data.count,\" perangkat web berhasil di-logout\"));}else{alert(data.detail||'Gagal logout perangkat web');}}catch(err){console.error('Logout all web error:',err);alert('Terjadi kesalahan');}finally{setActionLoading(null);}};// Format relative time\nconst formatRelativeTime=dateString=>{const date=new Date(dateString);const now=new Date();const diffMs=now.getTime()-date.getTime();const diffMins=Math.floor(diffMs/60000);const diffHours=Math.floor(diffMs/3600000);const diffDays=Math.floor(diffMs/86400000);if(diffMins<1)return'Baru saja';if(diffMins<60)return\"\".concat(diffMins,\" menit lalu\");if(diffHours<24)return\"\".concat(diffHours,\" jam lalu\");if(diffDays<7)return\"\".concat(diffDays,\" hari lalu\");return date.toLocaleDateString('id-ID');};// Fetch devices on open\nuseEffect(()=>{if(isOpen){fetchDevices();}},[isOpen,fetchDevices]);if(!isOpen)return null;const mobileDevices=devices.filter(d=>d.device_type==='mobile');const webDevices=devices.filter(d=>d.device_type==='web');return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 z-40 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border-b flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold text-gray-900\",children:\"Perangkat Terhubung\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"p-2 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-4\",children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin w-8 h-8 border-4 border-purple-200 border-t-purple-600 rounded-full\"})}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 mb-4\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchDevices,className:\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\",children:\"Coba Lagi\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowScanner(true),className:\"w-full flex items-center justify-center gap-2 p-4 bg-purple-50 text-purple-600 rounded-xl hover:bg-purple-100 transition-colors mb-6\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 4v16m8-8H4\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Hubungkan Perangkat Baru\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3\",children:\"Perangkat Utama\"}),mobileDevices.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm py-4 text-center\",children:\"Tidak ada perangkat mobile\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:mobileDevices.map(device=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-purple-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[device.device_name||'Mobile',device.is_current&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full\",children:\"Perangkat ini\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Aktif \",formatRelativeTime(device.last_active_at)]})]})]}),device.is_primary&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-purple-600 bg-purple-50 px-2 py-1 rounded\",children:\"Primary\"})]},device.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-medium text-gray-500 uppercase tracking-wide\",children:[\"Perangkat Web (\",webDevices.length,\")\"]}),webDevices.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:handleLogoutAllWeb,disabled:actionLoading==='all-web',className:\"text-sm text-red-600 hover:text-red-700 font-medium disabled:opacity-50\",children:actionLoading==='all-web'?'Loading...':'Logout Semua'})]}),webDevices.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:\"Tidak ada sesi web aktif\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs mt-1\",children:\"Scan QR di desktop untuk menghubungkan\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:webDevices.map(device=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-blue-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:device.device_name||'Web Browser'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Aktif \",formatRelativeTime(device.last_active_at)]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleLogoutDevice(device.id),disabled:actionLoading===device.id,className:\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50\",children:actionLoading===device.id?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin w-5 h-5 border-2 border-red-200 border-t-red-600 rounded-full\"}):/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"})})})]},device.id))})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t bg-gray-50 flex-shrink-0\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 text-center\",children:\"Perangkat web akan otomatis logout setelah 30 hari tidak aktif\"})})]})}),/*#__PURE__*/_jsx(QRScanner,{isOpen:showScanner,onClose:()=>setShowScanner(false),onScanSuccess:()=>{setShowScanner(false);fetchDevices();}})]});};export default DeviceManagement;","map":{"version":3,"names":["React","useState","useEffect","useCallback","getToken","QRScanner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DeviceManagement","_ref","isOpen","onClose","devices","setDevices","isLoading","setIsLoading","error","setError","showScanner","setShowScanner","actionLoading","setActionLoading","fetchDevices","token","response","fetch","headers","concat","ok","Error","data","json","success","detail","err","console","message","handleLogoutDevice","deviceId","confirm","method","alert","handleLogoutAllWeb","count","formatRelativeTime","dateString","date","Date","now","diffMs","getTime","diffMins","Math","floor","diffHours","diffDays","toLocaleDateString","mobileDevices","filter","d","device_type","webDevices","children","className","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","length","map","device","device_name","is_current","last_active_at","is_primary","id","disabled","onScanSuccess"],"sources":["/root/milkyhoop-dev/frontend/web/src/components/DeviceManagement.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { getToken } from '../utils/auth';\nimport QRScanner from './QRScanner';\n\ninterface Device {\n  id: string;\n  device_type: 'mobile' | 'web';\n  device_name: string | null;\n  is_active: boolean;\n  is_primary: boolean;\n  is_current: boolean;\n  last_active_at: string;\n  created_at: string;\n}\n\ninterface DeviceManagementProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst DeviceManagement: React.FC<DeviceManagementProps> = ({ isOpen, onClose }) => {\n  const [devices, setDevices] = useState<Device[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [showScanner, setShowScanner] = useState(false);\n  const [actionLoading, setActionLoading] = useState<string | null>(null);\n\n  // Fetch devices\n  const fetchDevices = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const token = getToken();\n      const response = await fetch('/api/devices', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch devices');\n      }\n\n      const data = await response.json();\n      if (data.success) {\n        setDevices(data.devices);\n      } else {\n        throw new Error(data.detail || 'Failed to fetch devices');\n      }\n    } catch (err: any) {\n      console.error('Fetch devices error:', err);\n      setError(err.message || 'Gagal memuat daftar perangkat');\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  // Logout specific device\n  const handleLogoutDevice = async (deviceId: string) => {\n    if (!confirm('Logout perangkat ini?')) return;\n\n    setActionLoading(deviceId);\n\n    try {\n      const token = getToken();\n      const response = await fetch(`/api/devices/${deviceId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        // Refresh device list\n        await fetchDevices();\n      } else {\n        const data = await response.json();\n        alert(data.detail || 'Gagal logout perangkat');\n      }\n    } catch (err) {\n      console.error('Logout device error:', err);\n      alert('Terjadi kesalahan');\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  // Logout all web devices\n  const handleLogoutAllWeb = async () => {\n    if (!confirm('Logout semua perangkat web? Semua sesi desktop akan diakhiri.')) return;\n\n    setActionLoading('all-web');\n\n    try {\n      const token = getToken();\n      const response = await fetch('/api/devices/logout-all-web', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        await fetchDevices();\n        alert(`${data.count} perangkat web berhasil di-logout`);\n      } else {\n        alert(data.detail || 'Gagal logout perangkat web');\n      }\n    } catch (err) {\n      console.error('Logout all web error:', err);\n      alert('Terjadi kesalahan');\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  // Format relative time\n  const formatRelativeTime = (dateString: string): string => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMins < 1) return 'Baru saja';\n    if (diffMins < 60) return `${diffMins} menit lalu`;\n    if (diffHours < 24) return `${diffHours} jam lalu`;\n    if (diffDays < 7) return `${diffDays} hari lalu`;\n    return date.toLocaleDateString('id-ID');\n  };\n\n  // Fetch devices on open\n  useEffect(() => {\n    if (isOpen) {\n      fetchDevices();\n    }\n  }, [isOpen, fetchDevices]);\n\n  if (!isOpen) return null;\n\n  const mobileDevices = devices.filter(d => d.device_type === 'mobile');\n  const webDevices = devices.filter(d => d.device_type === 'web');\n\n  return (\n    <>\n      <div className=\"fixed inset-0 bg-black/50 z-40 flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden flex flex-col\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b flex-shrink-0\">\n            <h2 className=\"text-lg font-bold text-gray-900\">Perangkat Terhubung</h2>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-4\">\n            {isLoading ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <div className=\"animate-spin w-8 h-8 border-4 border-purple-200 border-t-purple-600 rounded-full\" />\n              </div>\n            ) : error ? (\n              <div className=\"text-center py-8\">\n                <p className=\"text-red-600 mb-4\">{error}</p>\n                <button\n                  onClick={fetchDevices}\n                  className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700\"\n                >\n                  Coba Lagi\n                </button>\n              </div>\n            ) : (\n              <>\n                {/* Link new device button */}\n                <button\n                  onClick={() => setShowScanner(true)}\n                  className=\"w-full flex items-center justify-center gap-2 p-4 bg-purple-50 text-purple-600 rounded-xl hover:bg-purple-100 transition-colors mb-6\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                  </svg>\n                  <span className=\"font-medium\">Hubungkan Perangkat Baru</span>\n                </button>\n\n                {/* Mobile devices */}\n                <div className=\"mb-6\">\n                  <h3 className=\"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3\">\n                    Perangkat Utama\n                  </h3>\n                  {mobileDevices.length === 0 ? (\n                    <p className=\"text-gray-500 text-sm py-4 text-center\">Tidak ada perangkat mobile</p>\n                  ) : (\n                    <div className=\"space-y-2\">\n                      {mobileDevices.map(device => (\n                        <div\n                          key={device.id}\n                          className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\"\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center\">\n                              <svg className=\"w-5 h-5 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z\" />\n                              </svg>\n                            </div>\n                            <div>\n                              <p className=\"font-medium text-gray-900\">\n                                {device.device_name || 'Mobile'}\n                                {device.is_current && (\n                                  <span className=\"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full\">\n                                    Perangkat ini\n                                  </span>\n                                )}\n                              </p>\n                              <p className=\"text-sm text-gray-500\">\n                                Aktif {formatRelativeTime(device.last_active_at)}\n                              </p>\n                            </div>\n                          </div>\n                          {device.is_primary && (\n                            <span className=\"text-xs text-purple-600 bg-purple-50 px-2 py-1 rounded\">\n                              Primary\n                            </span>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n\n                {/* Web devices */}\n                <div>\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className=\"text-sm font-medium text-gray-500 uppercase tracking-wide\">\n                      Perangkat Web ({webDevices.length})\n                    </h3>\n                    {webDevices.length > 0 && (\n                      <button\n                        onClick={handleLogoutAllWeb}\n                        disabled={actionLoading === 'all-web'}\n                        className=\"text-sm text-red-600 hover:text-red-700 font-medium disabled:opacity-50\"\n                      >\n                        {actionLoading === 'all-web' ? 'Loading...' : 'Logout Semua'}\n                      </button>\n                    )}\n                  </div>\n\n                  {webDevices.length === 0 ? (\n                    <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n                      <div className=\"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-3\">\n                        <svg className=\"w-6 h-6 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                        </svg>\n                      </div>\n                      <p className=\"text-gray-500 text-sm\">Tidak ada sesi web aktif</p>\n                      <p className=\"text-gray-400 text-xs mt-1\">\n                        Scan QR di desktop untuk menghubungkan\n                      </p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-2\">\n                      {webDevices.map(device => (\n                        <div\n                          key={device.id}\n                          className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\"\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center\">\n                              <svg className=\"w-5 h-5 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                              </svg>\n                            </div>\n                            <div>\n                              <p className=\"font-medium text-gray-900\">\n                                {device.device_name || 'Web Browser'}\n                              </p>\n                              <p className=\"text-sm text-gray-500\">\n                                Aktif {formatRelativeTime(device.last_active_at)}\n                              </p>\n                            </div>\n                          </div>\n                          <button\n                            onClick={() => handleLogoutDevice(device.id)}\n                            disabled={actionLoading === device.id}\n                            className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50\"\n                          >\n                            {actionLoading === device.id ? (\n                              <div className=\"animate-spin w-5 h-5 border-2 border-red-200 border-t-red-600 rounded-full\" />\n                            ) : (\n                              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n                              </svg>\n                            )}\n                          </button>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"p-4 border-t bg-gray-50 flex-shrink-0\">\n            <p className=\"text-xs text-gray-500 text-center\">\n              Perangkat web akan otomatis logout setelah 30 hari tidak aktif\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* QR Scanner Modal */}\n      <QRScanner\n        isOpen={showScanner}\n        onClose={() => setShowScanner(false)}\n        onScanSuccess={() => {\n          setShowScanner(false);\n          fetchDevices();\n        }}\n      />\n    </>\n  );\n};\n\nexport default DeviceManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
