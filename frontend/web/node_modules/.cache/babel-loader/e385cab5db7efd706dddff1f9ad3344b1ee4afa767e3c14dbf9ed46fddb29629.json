{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import HomePage from'./components/HomePage';import SetupModeChat from'./components/SetupModeChat';import BCALanding from'./components/BCALanding';import BCAChat from'./components/BCAChat';import KonsultanPsikologiLanding from'./components/KonsultanPsikologiLanding';import KonsultanPsikologiChat from'./components/KonsultanPsikologiChat';import GenericTenantLanding from'./components/GenericTenantLanding';import GenericTenantChat from'./components/GenericTenantChat';import QRLoginPage from'./components/QRLoginPage';import{isDesktopBrowser}from'./utils/device';import{isAuthenticated}from'./utils/auth';import'./App.css';// Desktop login guard - redirects desktop users to QR login if not authenticated\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const DesktopLoginGuard=_ref=>{let{children}=_ref;// Only enforce QR login for desktop browsers\nif(isDesktopBrowser()&&!isAuthenticated()){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}return/*#__PURE__*/_jsx(_Fragment,{children:children});};// Login page guard - redirects authenticated users away from login\nconst LoginPageGuard=_ref2=>{let{children}=_ref2;// If already authenticated, redirect to main app\nif(isAuthenticated()){return/*#__PURE__*/_jsx(Navigate,{to:\"/chat\",replace:true});}// Only show QR login on desktop\nif(!isDesktopBrowser()){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}return/*#__PURE__*/_jsx(_Fragment,{children:children});};function App(){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginPageGuard,{children:/*#__PURE__*/_jsx(QRLoginPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/chat\",element:/*#__PURE__*/_jsx(DesktopLoginGuard,{children:/*#__PURE__*/_jsx(SetupModeChat,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/bca\",element:/*#__PURE__*/_jsx(BCALanding,{})}),/*#__PURE__*/_jsx(Route,{path:\"/bca/chat\",element:/*#__PURE__*/_jsx(BCAChat,{})}),/*#__PURE__*/_jsx(Route,{path:\"/konsultanpsikologi\",element:/*#__PURE__*/_jsx(KonsultanPsikologiLanding,{})}),/*#__PURE__*/_jsx(Route,{path:\"/konsultanpsikologi/chat\",element:/*#__PURE__*/_jsx(KonsultanPsikologiChat,{})}),/*#__PURE__*/_jsx(Route,{path:\"/:tenantId\",element:/*#__PURE__*/_jsx(GenericTenantLanding,{})}),/*#__PURE__*/_jsx(Route,{path:\"/:tenantId/chat\",element:/*#__PURE__*/_jsx(GenericTenantChat,{})})]})})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","HomePage","SetupModeChat","BCALanding","BCAChat","KonsultanPsikologiLanding","KonsultanPsikologiChat","GenericTenantLanding","GenericTenantChat","QRLoginPage","isDesktopBrowser","isAuthenticated","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DesktopLoginGuard","_ref","children","to","replace","LoginPageGuard","_ref2","App","className","path","element"],"sources":["/root/milkyhoop-dev/frontend/web/src/App.tsx"],"sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport HomePage from './components/HomePage';\nimport SetupModeChat from './components/SetupModeChat';\nimport BCALanding from './components/BCALanding';\nimport BCAChat from './components/BCAChat';\nimport KonsultanPsikologiLanding from './components/KonsultanPsikologiLanding';\nimport KonsultanPsikologiChat from './components/KonsultanPsikologiChat';\nimport GenericTenantLanding from './components/GenericTenantLanding';\nimport GenericTenantChat from './components/GenericTenantChat';\nimport QRLoginPage from './components/QRLoginPage';\nimport { isDesktopBrowser } from './utils/device';\nimport { isAuthenticated } from './utils/auth';\nimport './App.css';\n\n// Desktop login guard - redirects desktop users to QR login if not authenticated\nconst DesktopLoginGuard: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  // Only enforce QR login for desktop browsers\n  if (isDesktopBrowser() && !isAuthenticated()) {\n    return <Navigate to=\"/login\" replace />;\n  }\n  return <>{children}</>;\n};\n\n// Login page guard - redirects authenticated users away from login\nconst LoginPageGuard: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  // If already authenticated, redirect to main app\n  if (isAuthenticated()) {\n    return <Navigate to=\"/chat\" replace />;\n  }\n  // Only show QR login on desktop\n  if (!isDesktopBrowser()) {\n    return <Navigate to=\"/\" replace />;\n  }\n  return <>{children}</>;\n};\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"App\">\n        <Routes>\n          {/* QR Login Page (desktop only) */}\n          <Route path=\"/login\" element={\n            <LoginPageGuard>\n              <QRLoginPage />\n            </LoginPageGuard>\n          } />\n\n          {/* Home & Setup Mode */}\n          <Route path=\"/\" element={<HomePage />} />\n          <Route path=\"/chat\" element={\n            <DesktopLoginGuard>\n              <SetupModeChat />\n            </DesktopLoginGuard>\n          } />\n\n          {/* Specific tenants (priority routes) */}\n          <Route path=\"/bca\" element={<BCALanding />} />\n          <Route path=\"/bca/chat\" element={<BCAChat />} />\n          <Route path=\"/konsultanpsikologi\" element={<KonsultanPsikologiLanding />} />\n          <Route path=\"/konsultanpsikologi/chat\" element={<KonsultanPsikologiChat />} />\n\n          {/* Generic tenant routes (wildcard - must be last) */}\n          <Route path=\"/:tenantId\" element={<GenericTenantLanding />} />\n          <Route path=\"/:tenantId/chat\" element={<GenericTenantChat />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
