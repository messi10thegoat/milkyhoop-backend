/*! For license information please see main.5b9eafb4.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:d,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=x.prototype;var b=v.prototype=new y;b.constructor=v,m(b,x.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,C={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,o)&&!j.hasOwnProperty(o)&&(a[o]=t[o]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===a[o]&&(a[o]=l[o]);return{$$typeof:n,type:e,key:i,ref:s,props:a,_owner:C.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,o,a,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===a?"."+E(l,0):a,w(i)?(o="",null!=e&&(o=e.replace(S,"$&/")+"/"),A(i,t,o,"",function(e){return e})):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var d=a+E(s=e[c],c);l+=A(s,t,o,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(s=e.next()).done;)l+=A(s=s.value,t,o,d=a+E(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],o=0;return A(e,r,"","",function(e){return t.call(n,e,o++)}),r}function B(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},T={transition:null},M={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:T,ReactCurrentOwner:C};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=o,t.Profiler=i,t.PureComponent=v,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=C.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!j.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];o.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:B}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,l=e[s],c=s+1,d=e[c];if(0>a(l,n))c<o&&0>a(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>a(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)o(d);else{if(!(t.startTime<=e))break;o(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,T(k);else{var t=r(d);null!==t&&M(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,y(N),N=-1),f=!0;var a=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var s=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&o(c),b(n)}else o(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&M(w,u.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,j=!1,_=null,N=-1,S=5,E=-1;function A(){return!(t.unstable_now()-E<S)}function P(){if(null!==_){var e=t.unstable_now();E=e;var n=!0;try{n=_(!0,e)}finally{n?C():(j=!1,_=null)}}else j=!1}if("function"===typeof v)C=function(){v(P)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,I=B.port2;B.port1.onmessage=P,C=function(){I.postMessage(null)}}else C=function(){x(P,0)};function T(e){_=e,j||(j=!0,C())}function M(e,n){N=x(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,T(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:u++,callback:o,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>i?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(g?(y(N),N=-1):g=!0,M(w,a-i))):(e.sortIndex=s,n(c,e),m||f||(m=!0,T(k))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},361:function(e){var t;"undefined"!==typeof self&&self,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.width=t,this.height=e.length/t,this.data=e}return e.createEmpty=function(t,n){return new e(new Uint8ClampedArray(t*n),t)},e.prototype.get=function(e,t){return!(e<0||e>=this.width||t<0||t>=this.height)&&!!this.data[t*this.width+e]},e.prototype.set=function(e,t,n){this.data[t*this.width+e]=n?1:0},e.prototype.setRegion=function(e,t,n,r,o){for(var a=t;a<t+r;a++)for(var i=e;i<e+n;i++)this.set(i,a,!!o)},e}();t.BitMatrix=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.addOrSubtractGF=function(e,t){return e^t};var o=function(){function e(e,t,n){this.primitive=e,this.size=t,this.generatorBase=n,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var o=1,a=0;a<this.size;a++)this.expTable[a]=o,(o*=2)>=this.size&&(o=(o^this.primitive)&this.size-1);for(a=0;a<this.size-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new r.default(this,Uint8ClampedArray.from([0])),this.one=new r.default(this,Uint8ClampedArray.from([1]))}return e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.inverse=function(e){if(0===e)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(e<0)throw new Error("Invalid monomial degree less than 0");if(0===t)return this.zero;var n=new Uint8ClampedArray(e+1);return n[0]=t,new r.default(this,n)},e.prototype.log=function(e){if(0===e)throw new Error("Can't take log(0)");return this.logTable[e]},e.prototype.exp=function(e){return this.expTable[e]},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){function e(e,t){if(0===t.length)throw new Error("No coefficients.");this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;if(r===n)this.coefficients=e.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(n-r);for(var o=0;o<this.coefficients.length;o++)this.coefficients[o]=t[r+o]}}else this.coefficients=t}return e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.addOrSubtract=function(t){var n;if(this.isZero())return t;if(t.isZero())return this;var o=this.coefficients,a=t.coefficients;o.length>a.length&&(o=(n=[a,o])[0],a=n[1]);for(var i=new Uint8ClampedArray(a.length),s=a.length-o.length,l=0;l<s;l++)i[l]=a[l];for(l=s;l<a.length;l++)i[l]=r.addOrSubtractGF(o[l-s],a[l]);return new e(this.field,i)},e.prototype.multiply=function(t){if(0===t)return this.field.zero;if(1===t)return this;for(var n=this.coefficients.length,r=new Uint8ClampedArray(n),o=0;o<n;o++)r[o]=this.field.multiply(this.coefficients[o],t);return new e(this.field,r)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var n=this.coefficients,o=n.length,a=t.coefficients,i=a.length,s=new Uint8ClampedArray(o+i-1),l=0;l<o;l++)for(var c=n[l],d=0;d<i;d++)s[l+d]=r.addOrSubtractGF(s[l+d],this.field.multiply(c,a[d]));return new e(this.field,s)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new Error("Invalid degree less than 0");if(0===n)return this.field.zero;for(var r=this.coefficients.length,o=new Uint8ClampedArray(r+t),a=0;a<r;a++)o[a]=this.field.multiply(this.coefficients[a],n);return new e(this.field,o)},e.prototype.evaluateAt=function(e){var t=0;if(0===e)return this.getCoefficient(0);var n=this.coefficients.length;if(1===e)return this.coefficients.forEach(function(e){t=r.addOrSubtractGF(t,e)}),t;t=this.coefficients[0];for(var o=1;o<n;o++)t=r.addOrSubtractGF(this.field.multiply(e,t),this.coefficients[o]);return t},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(5),a=n(11),i=n(12);function s(e){var t=i.locate(e);if(!t)return null;for(var n=0,r=t;n<r.length;n++){var s=r[n],l=a.extract(e,s),c=o.decode(l.matrix);if(c)return{binaryData:c.bytes,data:c.text,chunks:c.chunks,version:c.version,location:{topRightCorner:l.mappingFunction(s.dimension,0),topLeftCorner:l.mappingFunction(0,0),bottomRightCorner:l.mappingFunction(s.dimension,s.dimension),bottomLeftCorner:l.mappingFunction(0,s.dimension),topRightFinderPattern:s.topRight,topLeftFinderPattern:s.topLeft,bottomLeftFinderPattern:s.bottomLeft,bottomRightAlignmentPattern:s.alignmentPattern}}}return null}var l={inversionAttempts:"attemptBoth"};function c(e,t,n,o){void 0===o&&(o={});var a=l;Object.keys(a||{}).forEach(function(e){a[e]=o[e]||a[e]});var i="attemptBoth"===a.inversionAttempts||"invertFirst"===a.inversionAttempts,c="onlyInvert"===a.inversionAttempts||"invertFirst"===a.inversionAttempts,d=r.binarize(e,t,n,i),u=d.binarized,h=d.inverted,p=s(c?h:u);return p||"attemptBoth"!==a.inversionAttempts&&"invertFirst"!==a.inversionAttempts||(p=s(c?u:h)),p}c.default=c,t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function o(e,t,n){return e<t?t:e>n?n:e}var a=function(){function e(e,t){this.width=e,this.data=new Uint8ClampedArray(e*t)}return e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,n){this.data[t*this.width+e]=n},e}();t.binarize=function(e,t,n,i){if(e.length!==t*n*4)throw new Error("Malformed data passed to binarizer.");for(var s=new a(t,n),l=0;l<t;l++)for(var c=0;c<n;c++){var d=e[4*(c*t+l)+0],u=e[4*(c*t+l)+1],h=e[4*(c*t+l)+2];s.set(l,c,.2126*d+.7152*u+.0722*h)}for(var p=Math.ceil(t/8),f=Math.ceil(n/8),m=new a(p,f),g=0;g<f;g++)for(var x=0;x<p;x++){var y=0,v=1/0,b=0;for(c=0;c<8;c++)for(l=0;l<8;l++){var w=s.get(8*x+l,8*g+c);y+=w,v=Math.min(v,w),b=Math.max(b,w)}var k=y/Math.pow(8,2);if(b-v<=24&&(k=v/2,g>0&&x>0)){var C=(m.get(x,g-1)+2*m.get(x-1,g)+m.get(x-1,g-1))/4;v<C&&(k=C)}m.set(x,g,k)}var j=r.BitMatrix.createEmpty(t,n),_=null;for(i&&(_=r.BitMatrix.createEmpty(t,n)),g=0;g<f;g++)for(x=0;x<p;x++){for(var N=o(x,2,p-3),S=o(g,2,f-3),E=(y=0,-2);E<=2;E++)for(var A=-2;A<=2;A++)y+=m.get(N+E,S+A);var P=y/25;for(E=0;E<8;E++)for(A=0;A<8;A++){l=8*x+E,c=8*g+A;var B=s.get(l,c);j.set(l,c,B<=P),i&&_.set(l,c,!(B<=P))}}return i?{binarized:j,inverted:_}:{binarized:j}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(6),a=n(9),i=n(10);function s(e,t){for(var n=e^t,r=0;n;)r++,n&=n-1;return r}function l(e,t){return t<<1|e}var c=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],d=[function(e){return(e.y+e.x)%2===0},function(e){return e.y%2===0},function(e){return e.x%3===0},function(e){return(e.y+e.x)%3===0},function(e){return(Math.floor(e.y/2)+Math.floor(e.x/3))%2===0},function(e){return e.x*e.y%2+e.x*e.y%3===0},function(e){return(e.y*e.x%2+e.y*e.x%3)%2===0},function(e){return((e.y+e.x)%2+e.y*e.x%3)%2===0}];function u(e,t,n){for(var o=d[n.dataMask],a=e.height,i=function(e){var t=17+4*e.versionNumber,n=r.BitMatrix.createEmpty(t,t);n.setRegion(0,0,9,9,!0),n.setRegion(t-8,0,8,9,!0),n.setRegion(0,t-8,9,8,!0);for(var o=0,a=e.alignmentPatternCenters;o<a.length;o++)for(var i=a[o],s=0,l=e.alignmentPatternCenters;s<l.length;s++){var c=l[s];6===i&&6===c||6===i&&c===t-7||i===t-7&&6===c||n.setRegion(i-2,c-2,5,5,!0)}return n.setRegion(6,9,1,t-17,!0),n.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(n.setRegion(t-11,0,3,6,!0),n.setRegion(0,t-11,6,3,!0)),n}(t),s=[],c=0,u=0,h=!0,p=a-1;p>0;p-=2){6===p&&p--;for(var f=0;f<a;f++)for(var m=h?a-1-f:f,g=0;g<2;g++){var x=p-g;if(!i.get(x,m)){u++;var y=e.get(x,m);o({y:m,x:x})&&(y=!y),c=l(y,c),8===u&&(s.push(c),u=0,c=0)}}h=!h}return s}function h(e){var t=function(e){var t=e.height,n=Math.floor((t-17)/4);if(n<=6)return i.VERSIONS[n-1];for(var r=0,o=5;o>=0;o--)for(var a=t-9;a>=t-11;a--)r=l(e.get(a,o),r);var c=0;for(a=5;a>=0;a--)for(o=t-9;o>=t-11;o--)c=l(e.get(a,o),c);for(var d,u=1/0,h=0,p=i.VERSIONS;h<p.length;h++){var f=p[h];if(f.infoBits===r||f.infoBits===c)return f;var m=s(r,f.infoBits);m<u&&(d=f,u=m),(m=s(c,f.infoBits))<u&&(d=f,u=m)}return u<=3?d:void 0}(e);if(!t)return null;var n=function(e){for(var t=0,n=0;n<=8;n++)6!==n&&(t=l(e.get(n,8),t));for(var r=7;r>=0;r--)6!==r&&(t=l(e.get(8,r),t));var o=e.height,a=0;for(r=o-1;r>=o-7;r--)a=l(e.get(8,r),a);for(n=o-8;n<o;n++)a=l(e.get(n,8),a);for(var i=1/0,d=null,u=0,h=c;u<h.length;u++){var p=h[u],f=p.bits,m=p.formatInfo;if(f===t||f===a)return m;var g=s(t,f);g<i&&(d=m,i=g),t!==a&&(g=s(a,f))<i&&(d=m,i=g)}return i<=3?d:null}(e);if(!n)return null;var r=function(e,t,n){var r=t.errorCorrectionLevels[n],o=[],a=0;if(r.ecBlocks.forEach(function(e){for(var t=0;t<e.numBlocks;t++)o.push({numDataCodewords:e.dataCodewordsPerBlock,codewords:[]}),a+=e.dataCodewordsPerBlock+r.ecCodewordsPerBlock}),e.length<a)return null;e=e.slice(0,a);for(var i=r.ecBlocks[0].dataCodewordsPerBlock,s=0;s<i;s++)for(var l=0,c=o;l<c.length;l++)c[l].codewords.push(e.shift());if(r.ecBlocks.length>1){var d=r.ecBlocks[0].numBlocks,u=r.ecBlocks[1].numBlocks;for(s=0;s<u;s++)o[d+s].codewords.push(e.shift())}for(;e.length>0;)for(var h=0,p=o;h<p.length;h++)p[h].codewords.push(e.shift());return o}(u(e,t,n),t,n.errorCorrectionLevel);if(!r)return null;for(var d=r.reduce(function(e,t){return e+t.numDataCodewords},0),h=new Uint8ClampedArray(d),p=0,f=0,m=r;f<m.length;f++){var g=m[f],x=a.decode(g.codewords,g.codewords.length-g.numDataCodewords);if(!x)return null;for(var y=0;y<g.numDataCodewords;y++)h[p++]=x[y]}try{return o.decode(h,t.versionNumber)}catch(v){return null}}t.decode=function(e){if(null==e)return null;var t=h(e);if(t)return t;for(var n=0;n<e.width;n++)for(var r=n+1;r<e.height;r++)e.get(n,r)!==e.get(r,n)&&(e.set(n,r,!e.get(n,r)),e.set(r,n,!e.get(r,n)));return h(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=n(7),i=n(8);function s(e,t){for(var n=[],r="",o=[10,12,14][t],a=e.readBits(o);a>=3;){if((c=e.readBits(10))>=1e3)throw new Error("Invalid numeric value above 999");var i=Math.floor(c/100),s=Math.floor(c/10)%10,l=c%10;n.push(48+i,48+s,48+l),r+=i.toString()+s.toString()+l.toString(),a-=3}if(2===a){if((c=e.readBits(7))>=100)throw new Error("Invalid numeric value above 99");i=Math.floor(c/10),s=c%10,n.push(48+i,48+s),r+=i.toString()+s.toString()}else if(1===a){var c;if((c=e.readBits(4))>=10)throw new Error("Invalid numeric value above 9");n.push(48+c),r+=c.toString()}return{bytes:n,text:r}}!function(e){e.Numeric="numeric",e.Alphanumeric="alphanumeric",e.Byte="byte",e.Kanji="kanji",e.ECI="eci"}(r=t.Mode||(t.Mode={})),function(e){e[e.Terminator=0]="Terminator",e[e.Numeric=1]="Numeric",e[e.Alphanumeric=2]="Alphanumeric",e[e.Byte=4]="Byte",e[e.Kanji=8]="Kanji",e[e.ECI=7]="ECI"}(o||(o={}));var l=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function c(e,t){for(var n=[],r="",o=[9,11,13][t],a=e.readBits(o);a>=2;){var i=e.readBits(11),s=Math.floor(i/45),c=i%45;n.push(l[s].charCodeAt(0),l[c].charCodeAt(0)),r+=l[s]+l[c],a-=2}return 1===a&&(s=e.readBits(6),n.push(l[s].charCodeAt(0)),r+=l[s]),{bytes:n,text:r}}function d(e,t){for(var n=[],r="",o=[8,16,16][t],a=e.readBits(o),i=0;i<a;i++){var s=e.readBits(8);n.push(s)}try{r+=decodeURIComponent(n.map(function(e){return"%"+("0"+e.toString(16)).substr(-2)}).join(""))}catch(l){}return{bytes:n,text:r}}function u(e,t){for(var n=[],r="",o=[8,10,12][t],a=e.readBits(o),s=0;s<a;s++){var l=e.readBits(13),c=Math.floor(l/192)<<8|l%192;c+=c<7936?33088:49472,n.push(c>>8,255&c),r+=String.fromCharCode(i.shiftJISTable[c])}return{bytes:n,text:r}}t.decode=function(e,t){for(var n,i,l,h,p=new a.BitStream(e),f=t<=9?0:t<=26?1:2,m={text:"",bytes:[],chunks:[],version:t};p.available()>=4;){var g=p.readBits(4);if(g===o.Terminator)return m;if(g===o.ECI)0===p.readBits(1)?m.chunks.push({type:r.ECI,assignmentNumber:p.readBits(7)}):0===p.readBits(1)?m.chunks.push({type:r.ECI,assignmentNumber:p.readBits(14)}):0===p.readBits(1)?m.chunks.push({type:r.ECI,assignmentNumber:p.readBits(21)}):m.chunks.push({type:r.ECI,assignmentNumber:-1});else if(g===o.Numeric){var x=s(p,f);m.text+=x.text,(n=m.bytes).push.apply(n,x.bytes),m.chunks.push({type:r.Numeric,text:x.text})}else if(g===o.Alphanumeric){var y=c(p,f);m.text+=y.text,(i=m.bytes).push.apply(i,y.bytes),m.chunks.push({type:r.Alphanumeric,text:y.text})}else if(g===o.Byte){var v=d(p,f);m.text+=v.text,(l=m.bytes).push.apply(l,v.bytes),m.chunks.push({type:r.Byte,bytes:v.bytes,text:v.text})}else if(g===o.Kanji){var b=u(p,f);m.text+=b.text,(h=m.bytes).push.apply(h,b.bytes),m.chunks.push({type:r.Kanji,bytes:b.bytes,text:b.text})}}if(0===p.available()||0===p.readBits(p.available()))return m}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Error("Cannot read "+e.toString()+" bits");var t=0;if(this.bitOffset>0){var n=8-this.bitOffset,r=e<n?e:n,o=255>>8-r<<(a=n-r);t=(this.bytes[this.byteOffset]&o)>>a,e-=r,this.bitOffset+=r,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|255&this.bytes[this.byteOffset],this.byteOffset++,e-=8;var a;if(e>0)o=255>>(a=8-e)<<a,t=t<<e|(this.bytes[this.byteOffset]&o)>>a,this.bitOffset+=e}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();t.BitStream=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(2);t.decode=function(e,t){var n=new Uint8ClampedArray(e.length);n.set(e);for(var a=new r.default(285,256,0),i=new o.default(a,n),s=new Uint8ClampedArray(t),l=!1,c=0;c<t;c++){var d=i.evaluateAt(a.exp(c+a.generatorBase));s[s.length-1-c]=d,0!==d&&(l=!0)}if(!l)return n;var u=new o.default(a,s),h=function(e,t,n,r){var o;t.degree()<n.degree()&&(t=(o=[n,t])[0],n=o[1]);for(var a=t,i=n,s=e.zero,l=e.one;i.degree()>=r/2;){var c=a,d=s;if(s=l,(a=i).isZero())return null;i=c;for(var u=e.zero,h=a.getCoefficient(a.degree()),p=e.inverse(h);i.degree()>=a.degree()&&!i.isZero();){var f=i.degree()-a.degree(),m=e.multiply(i.getCoefficient(i.degree()),p);u=u.addOrSubtract(e.buildMonomial(f,m)),i=i.addOrSubtract(a.multiplyByMonomial(f,m))}if(l=u.multiplyPoly(s).addOrSubtract(d),i.degree()>=a.degree())return null}var g=l.getCoefficient(0);if(0===g)return null;var x=e.inverse(g);return[l.multiply(x),i.multiply(x)]}(a,a.buildMonomial(t,1),u,t);if(null===h)return null;var p=function(e,t){var n=t.degree();if(1===n)return[t.getCoefficient(1)];for(var r=new Array(n),o=0,a=1;a<e.size&&o<n;a++)0===t.evaluateAt(a)&&(r[o]=e.inverse(a),o++);return o!==n?null:r}(a,h[0]);if(null==p)return null;for(var f=function(e,t,n){for(var o=n.length,a=new Array(o),i=0;i<o;i++){for(var s=e.inverse(n[i]),l=1,c=0;c<o;c++)i!==c&&(l=e.multiply(l,r.addOrSubtractGF(1,e.multiply(n[c],s))));a[i]=e.multiply(t.evaluateAt(s),e.inverse(l)),0!==e.generatorBase&&(a[i]=e.multiply(a[i],s))}return a}(a,h[1],p),m=0;m<p.length;m++){var g=n.length-1-a.log(p[m]);if(g<0)return null;n[g]=r.addOrSubtractGF(n[g],f[m])}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function o(e,t,n,r){var o=e.x-t.x+n.x-r.x,a=e.y-t.y+n.y-r.y;if(0===o&&0===a)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:n.x-t.x,a22:n.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};var i=t.x-n.x,s=r.x-n.x,l=t.y-n.y,c=r.y-n.y,d=i*c-s*l,u=(o*c-s*a)/d,h=(i*a-o*l)/d;return{a11:t.x-e.x+u*t.x,a12:t.y-e.y+u*t.y,a13:u,a21:r.x-e.x+h*r.x,a22:r.y-e.y+h*r.y,a23:h,a31:e.x,a32:e.y,a33:1}}t.extract=function(e,t){for(var n,a,i=function(e,t,n,r){var a=o(e,t,n,r);return{a11:a.a22*a.a33-a.a23*a.a32,a12:a.a13*a.a32-a.a12*a.a33,a13:a.a12*a.a23-a.a13*a.a22,a21:a.a23*a.a31-a.a21*a.a33,a22:a.a11*a.a33-a.a13*a.a31,a23:a.a13*a.a21-a.a11*a.a23,a31:a.a21*a.a32-a.a22*a.a31,a32:a.a12*a.a31-a.a11*a.a32,a33:a.a11*a.a22-a.a12*a.a21}}({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),s=o(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft),l=(a=i,{a11:(n=s).a11*a.a11+n.a21*a.a12+n.a31*a.a13,a12:n.a12*a.a11+n.a22*a.a12+n.a32*a.a13,a13:n.a13*a.a11+n.a23*a.a12+n.a33*a.a13,a21:n.a11*a.a21+n.a21*a.a22+n.a31*a.a23,a22:n.a12*a.a21+n.a22*a.a22+n.a32*a.a23,a23:n.a13*a.a21+n.a23*a.a22+n.a33*a.a23,a31:n.a11*a.a31+n.a21*a.a32+n.a31*a.a33,a32:n.a12*a.a31+n.a22*a.a32+n.a32*a.a33,a33:n.a13*a.a31+n.a23*a.a32+n.a33*a.a33}),c=r.BitMatrix.createEmpty(t.dimension,t.dimension),d=function(e,t){var n=l.a13*e+l.a23*t+l.a33;return{x:(l.a11*e+l.a21*t+l.a31)/n,y:(l.a12*e+l.a22*t+l.a32)/n}},u=0;u<t.dimension;u++)for(var h=0;h<t.dimension;h++){var p=d(h+.5,u+.5);c.set(h,u,e.get(Math.floor(p.x),Math.floor(p.y)))}return{matrix:c,mappingFunction:d}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function o(e){return e.reduce(function(e,t){return e+t})}function a(e,t,n,o){var a,i,s,l,c=[{x:Math.floor(e.x),y:Math.floor(e.y)}],d=Math.abs(t.y-e.y)>Math.abs(t.x-e.x);d?(a=Math.floor(e.y),i=Math.floor(e.x),s=Math.floor(t.y),l=Math.floor(t.x)):(a=Math.floor(e.x),i=Math.floor(e.y),s=Math.floor(t.x),l=Math.floor(t.y));for(var u=Math.abs(s-a),h=Math.abs(l-i),p=Math.floor(-u/2),f=a<s?1:-1,m=i<l?1:-1,g=!0,x=a,y=i;x!==s+f;x+=f){var v=d?y:x,b=d?x:y;if(n.get(v,b)!==g&&(g=!g,c.push({x:v,y:b}),c.length===o+1))break;if((p+=h)>0){if(y===l)break;y+=m,p-=u}}for(var w=[],k=0;k<o;k++)c[k]&&c[k+1]?w.push(r(c[k],c[k+1])):w.push(0);return w}function i(e,t,n,r){var o,i=t.y-e.y,s=t.x-e.x,l=a(e,t,n,Math.ceil(r/2)),c=a(e,{x:e.x-s,y:e.y-i},n,Math.ceil(r/2)),d=l.shift()+c.shift()-1;return(o=c.concat(d)).concat.apply(o,l)}function s(e,t){var n=o(e)/o(t),r=0;return t.forEach(function(t,o){r+=Math.pow(e[o]-t*n,2)}),{averageSize:n,error:r}}function l(e,t,n){try{var r=i(e,{x:-1,y:e.y},n,t.length),o=i(e,{x:e.x,y:-1},n,t.length),a=i(e,{x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},n,t.length),l=i(e,{x:Math.min(n.width,e.x+e.y)+1,y:Math.min(n.height,e.y+e.x)+1},n,t.length),c=s(r,t),d=s(o,t),u=s(a,t),h=s(l,t),p=Math.sqrt(c.error*c.error+d.error*d.error+u.error*u.error+h.error*h.error),f=(c.averageSize+d.averageSize+u.averageSize+h.averageSize)/4;return p+(Math.pow(c.averageSize-f,2)+Math.pow(d.averageSize-f,2)+Math.pow(u.averageSize-f,2)+Math.pow(h.averageSize-f,2))/f}catch(m){return 1/0}}function c(e,t){for(var n=Math.round(t.x);e.get(n,Math.round(t.y));)n--;for(var r=Math.round(t.x);e.get(r,Math.round(t.y));)r++;for(var o=(n+r)/2,a=Math.round(t.y);e.get(Math.round(o),a);)a--;for(var i=Math.round(t.y);e.get(Math.round(o),i);)i++;return{x:o,y:(a+i)/2}}function d(e,t,n,a,s){var c,d,u;try{c=function(e,t,n,a){var s=(o(i(e,n,a,5))/7+o(i(e,t,a,5))/7+o(i(n,e,a,5))/7+o(i(t,e,a,5))/7)/4;if(s<1)throw new Error("Invalid module size");var l=Math.round(r(e,t)/s),c=Math.round(r(e,n)/s),d=Math.floor((l+c)/2)+7;switch(d%4){case 0:d++;break;case 2:d--}return{dimension:d,moduleSize:s}}(a,n,s,e),d=c.dimension,u=c.moduleSize}catch(y){return null}var h=n.x-a.x+s.x,p=n.y-a.y+s.y,f=(r(a,s)+r(a,n))/2/u,m=1-3/f,g={x:a.x+m*(h-a.x),y:a.y+m*(p-a.y)},x=t.map(function(t){var n=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,a=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.floor(n),Math.floor(a))){var i=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1];return o(i),{x:n,y:a,score:l({x:Math.floor(n),y:Math.floor(a)},[1,1,1],e)+r({x:n,y:a},g)}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});return{alignmentPattern:f>=15&&x.length?x[0]:g,dimension:d}}t.locate=function(e){for(var t=[],n=[],a=[],i=[],s=function(r){for(var s=0,l=!1,c=[0,0,0,0,0],d=function(t){var a=e.get(t,r);if(a===l)s++;else{c=[c[1],c[2],c[3],c[4],s],s=1,l=a;var d=o(c)/7,u=Math.abs(c[0]-d)<d&&Math.abs(c[1]-d)<d&&Math.abs(c[2]-3*d)<3*d&&Math.abs(c[3]-d)<d&&Math.abs(c[4]-d)<d&&!a,h=o(c.slice(-3))/3,p=Math.abs(c[2]-h)<h&&Math.abs(c[3]-h)<h&&Math.abs(c[4]-h)<h&&a;if(u){var f=t-c[3]-c[4],m=f-c[2],g={startX:m,endX:f,y:r};(x=n.filter(function(e){return m>=e.bottom.startX&&m<=e.bottom.endX||f>=e.bottom.startX&&m<=e.bottom.endX||m<=e.bottom.startX&&f>=e.bottom.endX&&c[2]/(e.bottom.endX-e.bottom.startX)<1.5&&c[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?x[0].bottom=g:n.push({top:g,bottom:g})}if(p){var x,y=t-c[4],v=y-c[3];g={startX:v,y:r,endX:y},(x=i.filter(function(e){return v>=e.bottom.startX&&v<=e.bottom.endX||y>=e.bottom.startX&&v<=e.bottom.endX||v<=e.bottom.startX&&y>=e.bottom.endX&&c[2]/(e.bottom.endX-e.bottom.startX)<1.5&&c[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?x[0].bottom=g:i.push({top:g,bottom:g})}}},u=-1;u<=e.width;u++)d(u);t.push.apply(t,n.filter(function(e){return e.bottom.y!==r&&e.bottom.y-e.top.y>=2})),n=n.filter(function(e){return e.bottom.y===r}),a.push.apply(a,i.filter(function(e){return e.bottom.y!==r})),i=i.filter(function(e){return e.bottom.y===r})},u=0;u<=e.height;u++)s(u);t.push.apply(t,n.filter(function(e){return e.bottom.y-e.top.y>=2})),a.push.apply(a,i);var h=t.filter(function(e){return e.bottom.y-e.top.y>=2}).map(function(t){var n=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,r=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.round(n),Math.round(r))){var a=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1],i=o(a)/a.length;return{score:l({x:Math.round(n),y:Math.round(r)},[1,1,3,1,1],e),x:n,y:r,size:i}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score}).map(function(e,t,n){if(t>4)return null;var r=n.filter(function(e,n){return t!==n}).map(function(t){return{x:t.x,y:t.y,score:t.score+Math.pow(t.size-e.size,2)/e.size,size:t.size}}).sort(function(e,t){return e.score-t.score});if(r.length<2)return null;var o=e.score+r[0].score+r[1].score;return{points:[e].concat(r.slice(0,2)),score:o}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});if(0===h.length)return null;var p=function(e,t,n){var o,a,i,s,l,c,d,u=r(e,t),h=r(t,n),p=r(e,n);return h>=u&&h>=p?(l=(o=[t,e,n])[0],c=o[1],d=o[2]):p>=h&&p>=u?(l=(a=[e,t,n])[0],c=a[1],d=a[2]):(l=(i=[e,n,t])[0],c=i[1],d=i[2]),(d.x-c.x)*(l.y-c.y)-(d.y-c.y)*(l.x-c.x)<0&&(l=(s=[d,l])[0],d=s[1]),{bottomLeft:l,topLeft:c,topRight:d}}(h[0].points[0],h[0].points[1],h[0].points[2]),f=p.topRight,m=p.topLeft,g=p.bottomLeft,x=d(e,a,f,m,g),y=[];x&&y.push({alignmentPattern:{x:x.alignmentPattern.x,y:x.alignmentPattern.y},bottomLeft:{x:g.x,y:g.y},dimension:x.dimension,topLeft:{x:m.x,y:m.y},topRight:{x:f.x,y:f.y}});var v=c(e,f),b=c(e,m),w=c(e,g),k=d(e,a,v,b,w);return k&&y.push({alignmentPattern:{x:k.alignmentPattern.x,y:k.alignmentPattern.y},bottomLeft:{x:w.x,y:w.y},topLeft:{x:b.x,y:b.y},topRight:{x:v.x,y:v.y},dimension:k.dimension}),0===y.length?null:y}}]).default},e.exports=t()},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),o=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var T=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var R,O=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var L=!1;function z(e,t){if(!e||L)return"";L=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(1!==i||1!==s)do{if(i--,0>--s||o[i]!==a[s]){var l="\n"+o[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=s);break}}}finally{L=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function W(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case k:return"Portal";case _:return"Profiler";case j:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case B:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var xe=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ce=null,je=null;function _e(e){if(e=bo(e)){if("function"!==typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=ko(t),ke(e.stateNode,e.type,t))}}function Ne(e){Ce?je?je.push(e):je=[e]:Ce=e}function Se(){if(Ce){var e=Ce,t=je;if(je=Ce=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ee(e,t){return e(t)}function Ae(){}var Pe=!1;function Be(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ee(e,t,n)}finally{Pe=!1,(null!==Ce||null!==je)&&(Ae(),Se())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Te=!1;if(d)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Te=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(de){Te=!1}function De(e,t,n,r,o,a,i,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Re=!1,Oe=null,Fe=!1,Le=null,ze={onError:function(e){Re=!0,Oe=e}};function We(e,t,n,r,o,a,i,s,l){Re=!1,Oe=null,De.apply(ze,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return He(o),e;if(i===r)return He(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=o.unstable_scheduleCallback,Ye=o.unstable_cancelCallback,qe=o.unstable_shouldYield,Ze=o.unstable_requestPaint,Je=o.unstable_now,Qe=o.unstable_getCurrentPriorityLevel,$e=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~o;0!==s?r=ut(s):0!==(a&=i)&&(r=ut(a))}else 0!==(i=n&~o)?r=ut(i):0!==a&&(r=ut(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-it(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,Ct,jt,_t,Nt=!1,St=[],Et=null,At=null,Pt=null,Bt=new Map,It=new Map,Tt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Bt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Rt(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Ot(e){var t=vo(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void _t(e.priority,function(){Ct(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Lt(e,t,n){Ft(e)&&n.delete(t)}function zt(){Nt=!1,null!==Et&&Ft(Et)&&(Et=null),null!==At&&Ft(At)&&(At=null),null!==Pt&&Ft(Pt)&&(Pt=null),Bt.forEach(Lt),It.forEach(Lt)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,zt)))}function Vt(e){function t(t){return Wt(t,e)}if(0<St.length){Wt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Wt(Et,e),null!==At&&Wt(At,e),null!==Pt&&Wt(Pt,e),Bt.forEach(t),It.forEach(t),n=0;n<Tt.length;n++)(r=Tt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Tt.length&&null===(n=Tt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Tt.shift()}var Ut=b.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var o=vt,a=Ut.transition;Ut.transition=null;try{vt=1,Kt(e,t,n,r)}finally{vt=o,Ut.transition=a}}function Xt(e,t,n,r){var o=vt,a=Ut.transition;Ut.transition=null;try{vt=4,Kt(e,t,n,r)}finally{vt=o,Ut.transition=a}}function Kt(e,t,n,r){if(Ht){var o=qt(e,t,n,r);if(null===o)Hr(e,t,r,Yt,n),Dt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Et=Rt(Et,e,t,n,r,o),!0;case"dragenter":return At=Rt(At,e,t,n,r,o),!0;case"mouseover":return Pt=Rt(Pt,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Bt.set(a,Rt(Bt.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,It.set(a,Rt(It.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==o;){var a=bo(o);if(null!==a&&wt(a),null===(a=qt(e,t,n,r))&&Hr(e,t,r,Yt,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function qt(e,t,n,r){if(Yt=null,null!==(e=vo(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,r=n.length,o="value"in Jt?Jt.value:Jt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return $t=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=on(cn),un=O({},cn,{view:0,detail:0}),hn=on(un),pn=O({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),mn=on(O({},pn,{dataTransfer:0})),gn=on(O({},un,{relatedTarget:0})),xn=on(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=on(yn),bn=on(O({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function _n(){return jn}var Nn=O({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=on(Nn),En=on(O({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(O({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Pn=on(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bn=O({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=on(Bn),Tn=[9,13,27,32],Mn=d&&"CompositionEvent"in window,Dn=null;d&&"documentMode"in document&&(Dn=document.documentMode);var Rn=d&&"TextEvent"in window&&!Dn,On=d&&(!Mn||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Ln=!1;function zn(e,t){switch(e){case"keyup":return-1!==Tn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,r){Ne(r),0<(t=Xr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Kn=null;function Yn(e){Fr(e,0)}function qn(e){if(K(wo(e)))return e}function Zn(e,t){if("change"===e)return t}var Jn=!1;if(d){var Qn;if(d){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Qn=$n}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Xn&&(Xn.detachEvent("onpropertychange",nr),Kn=Xn=null)}function nr(e){if("value"===e.propertyName&&qn(Kn)){var t=[];Gn(t,Kn,e,we(e)),Be(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Xn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Kn)}function ar(e,t){if("click"===e)return qn(t)}function ir(e,t){if("input"===e||"change"===e)return qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!u.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=dr(n,a);var i=dr(n,r);o&&i&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,xr=null,yr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Xr(xr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Cr={},jr={};function _r(e){if(Cr[e])return Cr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return Cr[e]=n[t];return e}d&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Nr=_r("animationend"),Sr=_r("animationiteration"),Er=_r("animationstart"),Ar=_r("transitionend"),Pr=new Map,Br="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Pr.set(e,t),l(t,[e])}for(var Tr=0;Tr<Br.length;Tr++){var Mr=Br[Tr];Ir(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Ir(Nr,"onAnimationEnd"),Ir(Sr,"onAnimationIteration"),Ir(Er,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,s,l,c){if(We.apply(this,arguments),Re){if(!Re)throw Error(a(198));var d=Oe;Re=!1,Oe=null,Fe||(Fe=!0,Le=d)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&o.isPropagationStopped())break e;Or(o,s,c),a=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,c=s.currentTarget,s=s.listener,l!==a&&o.isPropagationStopped())break e;Or(o,s,c),a=l}}}if(Fe)throw e=Le,Fe=!1,Le=null,e}function Lr(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Wr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Wr]){e[Wr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Rr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wr]||(t[Wr]=!0,zr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Zt(t)){case 1:var o=Gt;break;case 4:o=Xt;break;default:o=Kt}n=o.bind(null,t,n,e),o=void 0,!Te||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;i=i.return}for(;null!==s;){if(null===(i=vo(s)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}s=s.parentNode}}r=r.return}Be(function(){var r=a,o=we(n),i=[];e:{var s=Pr.get(e);if(void 0!==s){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Nr:case Sr:case Er:l=xn;break;case Ar:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==s?s+"Capture":null:s;d=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Ie(f,h))&&d.push(Gr(f,m,p)))),u)break;f=f.return}0<d.length&&(s=new l(s,c,null,n,o),i.push({event:s,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vo(c)&&!c[mo])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vo(c):null)&&(c!==(u=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=En,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?s:wo(l),p=null==c?s:wo(c),(s=new d(m,f+"leave",l,n,o)).target=u,s.relatedTarget=p,m=null,vo(o)===r&&((d=new d(h,f+"enter",c,n,o)).target=p,d.relatedTarget=u,m=d),u=m,l&&c)e:{for(h=c,f=0,p=d=l;p;p=Kr(p))f++;for(p=0,m=h;m;m=Kr(m))p++;for(;0<f-p;)d=Kr(d),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Kr(d),h=Kr(h)}d=null}else d=null;null!==l&&Yr(i,s,l,d,!1),null!==c&&null!==u&&Yr(i,u,c,d,!0)}if("select"===(l=(s=r?wo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Zn;else if(Hn(s))if(Jn)g=ir;else{g=or;var x=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Gn(i,g,n,o):(x&&x(e,s,r),"focusout"===e&&(x=s._wrapperState)&&x.controlled&&"number"===s.type&&ee(s,"number",s.value)),x=r?wo(r):window,e){case"focusin":(Hn(x)||"true"===x.contentEditable)&&(gr=x,xr=r,yr=null);break;case"focusout":yr=xr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(i,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(i,n,o)}var y;if(Mn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Vn?zn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(On&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Vn&&(y=en()):(Qt="value"in(Jt=o)?Jt.value:Jt.textContent,Vn=!0)),0<(x=Xr(r,v)).length&&(v=new bn(v,e,null,n,o),i.push({event:v,listeners:x}),y?v.data=y:null!==(y=Wn(n))&&(v.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Ln=!0,Fn);case"textInput":return(e=t.data)===Fn&&Ln?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Mn&&zn(e,t)?(e=en(),$t=Qt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Xr(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=y))}Fr(i,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Ie(e,n))&&r.unshift(Gr(e,a,o)),null!=(a=Ie(e,t))&&r.push(Gr(e,a,o))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Ie(n,a))&&i.unshift(Gr(n,l,s)):o||null!=(l=Ie(n,a))&&i.push(Gr(n,l,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var qr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(qr,"\n").replace(Zr,"")}function Qr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function $r(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,ao="function"===typeof Promise?Promise:void 0,io="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ao?function(e){return ao.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Vt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),po="__reactFiber$"+ho,fo="__reactProps$"+ho,mo="__reactContainer$"+ho,go="__reactEvents$"+ho,xo="__reactListeners$"+ho,yo="__reactHandles$"+ho;function vo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[po])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[po]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ko(e){return e[fo]||null}var Co=[],jo=-1;function _o(e){return{current:e}}function No(e){0>jo||(e.current=Co[jo],Co[jo]=null,jo--)}function So(e,t){jo++,Co[jo]=e.current,e.current=t}var Eo={},Ao=_o(Eo),Po=_o(!1),Bo=Eo;function Io(e,t){var n=e.type.contextTypes;if(!n)return Eo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function To(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mo(){No(Po),No(Ao)}function Do(e,t,n){if(Ao.current!==Eo)throw Error(a(168));So(Ao,t),So(Po,n)}function Ro(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,U(e)||"Unknown",o));return O({},n,r)}function Oo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Eo,Bo=Ao.current,So(Ao,e),So(Po,Po.current),!0}function Fo(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ro(e,t,Bo),r.__reactInternalMemoizedMergedChildContext=e,No(Po),No(Ao),So(Ao,e)):No(Po),So(Po,n)}var Lo=null,zo=!1,Wo=!1;function Vo(e){null===Lo?Lo=[e]:Lo.push(e)}function Uo(){if(!Wo&&null!==Lo){Wo=!0;var e=0,t=vt;try{var n=Lo;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Lo=null,zo=!1}catch(o){throw null!==Lo&&(Lo=Lo.slice(e+1)),Ke($e,Uo),o}finally{vt=t,Wo=!1}}return null}var Ho=[],Go=0,Xo=null,Ko=0,Yo=[],qo=0,Zo=null,Jo=1,Qo="";function $o(e,t){Ho[Go++]=Ko,Ho[Go++]=Xo,Xo=e,Ko=t}function ea(e,t,n){Yo[qo++]=Jo,Yo[qo++]=Qo,Yo[qo++]=Zo,Zo=e;var r=Jo;e=Qo;var o=32-it(r)-1;r&=~(1<<o),n+=1;var a=32-it(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Jo=1<<32-it(t)+o|n<<o|r,Qo=a+e}else Jo=1<<a|n<<o|r,Qo=e}function ta(e){null!==e.return&&($o(e,1),ea(e,1,0))}function na(e){for(;e===Xo;)Xo=Ho[--Go],Ho[Go]=null,Ko=Ho[--Go],Ho[Go]=null;for(;e===Zo;)Zo=Yo[--qo],Yo[qo]=null,Qo=Yo[--qo],Yo[qo]=null,Jo=Yo[--qo],Yo[qo]=null}var ra=null,oa=null,aa=!1,ia=null;function sa(e,t){var n=Bc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,oa=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zo?{id:Jo,overflow:Qo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Bc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,oa=null,!0);default:return!1}}function ca(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function da(e){if(aa){var t=oa;if(t){var n=t;if(!la(e,t)){if(ca(e))throw Error(a(418));t=co(n.nextSibling);var r=ra;t&&la(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ca(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ha(e){if(e!==ra)return!1;if(!aa)return ua(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oa)){if(ca(e))throw pa(),Error(a(418));for(;t;)sa(e,t),t=co(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ra?co(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=oa;e;)e=co(e.nextSibling)}function fa(){oa=ra=null,aa=!1}function ma(e){null===ia?ia=[e]:ia.push(e)}var ga=b.ReactCurrentBatchConfig;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Tc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Oc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===C?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===I&&va(a)===t.type)?((r=o(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function u(e,t,n,r,a){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case k:return(t=Fc(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case k:return n.key===o?d(e,t,n,r):null;case I:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||D(n))return null!==o?null:u(e,t,n,r,null);ya(e,n)}return null}function f(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return d(t,e=e.get(null===r.key?n:r.key)||null,r,o);case I:return f(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||D(r))return u(t,e=e.get(n)||null,r,o,null);ya(t,r)}return null}function m(o,a,s,l){for(var c=null,d=null,u=a,m=a=0,g=null;null!==u&&m<s.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var x=p(o,u,s[m],l);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(o,u),a=i(x,a,m),null===d?c=x:d.sibling=x,d=x,u=g}if(m===s.length)return n(o,u),aa&&$o(o,m),c;if(null===u){for(;m<s.length;m++)null!==(u=h(o,s[m],l))&&(a=i(u,a,m),null===d?c=u:d.sibling=u,d=u);return aa&&$o(o,m),c}for(u=r(o,u);m<s.length;m++)null!==(g=f(u,o,m,s[m],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),a=i(g,a,m),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(o,e)}),aa&&$o(o,m),c}function g(o,s,l,c){var d=D(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,m=s,g=s=0,x=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(x=m,m=null):x=m.sibling;var v=p(o,m,y.value,c);if(null===v){null===m&&(m=x);break}e&&m&&null===v.alternate&&t(o,m),s=i(v,s,g),null===u?d=v:u.sibling=v,u=v,m=x}if(y.done)return n(o,m),aa&&$o(o,g),d;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(o,y.value,c))&&(s=i(y,s,g),null===u?d=y:u.sibling=y,u=y);return aa&&$o(o,g),d}for(m=r(o,m);!y.done;g++,y=l.next())null!==(y=f(m,o,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=i(y,s,g),null===u?d=y:u.sibling=y,u=y);return e&&m.forEach(function(e){return t(o,e)}),aa&&$o(o,g),d}return function e(r,a,i,l){if("object"===typeof i&&null!==i&&i.type===C&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===C){if(7===d.tag){n(r,d.sibling),(a=o(d,i.props.children)).return=r,r=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&va(c)===d.type){n(r,d.sibling),(a=o(d,i.props)).ref=xa(r,d,i),a.return=r,r=a;break e}n(r,d);break}t(r,d),d=d.sibling}i.type===C?((a=Dc(i.props.children,r.mode,l,i.key)).return=r,r=a):((l=Mc(i.type,i.key,i.props,null,r.mode,l)).ref=xa(r,a,i),l.return=r,r=l)}return s(r);case k:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=o(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(i,r.mode,l)).return=r,r=a}return s(r);case I:return e(r,a,(d=i._init)(i._payload),l)}if(te(i))return m(r,a,i,l);if(D(i))return g(r,a,i,l);ya(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,i)).return=r,r=a):(n(r,a),(a=Oc(i,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var wa=ba(!0),ka=ba(!1),Ca=_o(null),ja=null,_a=null,Na=null;function Sa(){Na=_a=ja=null}function Ea(e){var t=Ca.current;No(Ca),e._currentValue=t}function Aa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pa(e,t){ja=e,Na=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vs=!0),e.firstContext=null)}function Ba(e){var t=e._currentValue;if(Na!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===ja)throw Error(a(308));_a=e,ja.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ma(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Ta(t)):(n.next=o.next,o.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function La(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function za(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Da(e,n)}return null===(o=r.interleaved)?(t.next=t,Ta(r)):(t.next=o.next,o.next=t),r.interleaved=t,Da(e,n)}function Wa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Va(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,r){var o=e.updateQueue;Ra=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((s=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===s?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=o.baseState;for(i=0,d=c=l=null,s=a;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=O({},u,h);break e;case 2:Ra=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,i|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===d&&(l=u),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=d,null!==(t=o.shared.interleaved)){o=t;do{i|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);Rl|=i,e.lanes=i,e.memoizedState=u}}function Ha(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var Ga={},Xa=_o(Ga),Ka=_o(Ga),Ya=_o(Ga);function qa(e){if(e===Ga)throw Error(a(174));return e}function Za(e,t){switch(So(Ya,t),So(Ka,e),So(Xa,Ga),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}No(Xa),So(Xa,t)}function Ja(){No(Xa),No(Ka),No(Ya)}function Qa(e){qa(Ya.current);var t=qa(Xa.current),n=le(t,e.type);t!==n&&(So(Ka,e),So(Xa,n))}function $a(e){Ka.current===e&&(No(Xa),No(Ka))}var ei=_o(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var oi=b.ReactCurrentDispatcher,ai=b.ReactCurrentBatchConfig,ii=0,si=null,li=null,ci=null,di=!1,ui=!1,hi=0,pi=0;function fi(){throw Error(a(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,o,i){if(ii=i,si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oi.current=null===e||null===e.memoizedState?$i:es,e=n(r,o),ui){i=0;do{if(ui=!1,hi=0,25<=i)throw Error(a(301));i+=1,ci=li=null,t.updateQueue=null,oi.current=ts,e=n(r,o)}while(ui)}if(oi.current=Qi,t=null!==li&&null!==li.next,ii=0,ci=li=si=null,di=!1,t)throw Error(a(300));return e}function xi(){var e=0!==hi;return hi=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?si.memoizedState=ci=e:ci=ci.next=e,ci}function vi(){if(null===li){var e=si.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?si.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(a(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?si.memoizedState=ci=e:ci=ci.next=e}return ci}function bi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=li,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var l=s=null,c=null,d=i;do{var u=d.lane;if((ii&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,si.lanes|=u,Rl|=u}d=d.next}while(null!==d&&d!==i);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(vs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,si.lanes|=i,Rl|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ki(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);sr(i,t.memoizedState)||(vs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ci(){}function ji(e,t){var n=si,r=vi(),o=t(),i=!sr(r.memoizedState,o);if(i&&(r.memoizedState=o,vs=!0),r=r.queue,Ri(Si.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,Bi(9,Ni.bind(null,n,r,o,t),void 0,null),null===Al)throw Error(a(349));0!==(30&ii)||_i(n,t,o)}return o}function _i(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ni(e,t,n,r){t.value=n,t.getSnapshot=r,Ei(t)&&Ai(e)}function Si(e,t,n){return n(function(){Ei(t)&&Ai(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ai(e){var t=Da(e,1);null!==t&&nc(t,e,1,-1)}function Pi(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,si,e),[t.memoizedState,e]}function Bi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ii(){return vi().memoizedState}function Ti(e,t,n,r){var o=yi();si.flags|=e,o.memoizedState=Bi(1|t,n,void 0,void 0===r?null:r)}function Mi(e,t,n,r){var o=vi();r=void 0===r?null:r;var a=void 0;if(null!==li){var i=li.memoizedState;if(a=i.destroy,null!==r&&mi(r,i.deps))return void(o.memoizedState=Bi(t,n,a,r))}si.flags|=e,o.memoizedState=Bi(1|t,n,a,r)}function Di(e,t){return Ti(8390656,8,e,t)}function Ri(e,t){return Mi(2048,8,e,t)}function Oi(e,t){return Mi(4,2,e,t)}function Fi(e,t){return Mi(4,4,e,t)}function Li(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mi(4,4,Li.bind(null,t,e),n)}function Wi(){}function Vi(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ui(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,vs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),si.lanes|=n,Rl|=n,e.baseState=!0),t)}function Gi(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{vt=n,ai.transition=r}}function Xi(){return vi().memoizedState}function Ki(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qi(e))Zi(t,n);else if(null!==(n=Ma(e,t,n,r))){nc(n,e,r,ec()),Ji(n,t,r)}}function Yi(e,t,n){var r=tc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qi(e))Zi(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=a(i,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,i)){var l=t.interleaved;return null===l?(o.next=o,Ta(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Ma(e,t,o,r))&&(nc(n,e,r,o=ec()),Ji(n,t,r))}}function qi(e){var t=e.alternate;return e===si||null!==t&&t===si}function Zi(e,t){ui=di=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ji(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Qi={readContext:Ba,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},$i={readContext:Ba,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Ba,useEffect:Di,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ti(4194308,4,Li.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ti(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ti(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ki.bind(null,si,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Pi,useDebugValue:Wi,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Gi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=si,o=yi();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Al)throw Error(a(349));0!==(30&ii)||_i(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Di(Si.bind(null,r,i,e),[e]),r.flags|=2048,Bi(9,Ni.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Al.identifierPrefix;if(aa){var n=Qo;t=":"+t+"R"+(n=(Jo&~(1<<32-it(Jo)-1)).toString(32)+n),0<(n=hi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ba,useCallback:Vi,useContext:Ba,useEffect:Ri,useImperativeHandle:zi,useInsertionEffect:Oi,useLayoutEffect:Fi,useMemo:Ui,useReducer:wi,useRef:Ii,useState:function(){return wi(bi)},useDebugValue:Wi,useDeferredValue:function(e){return Hi(vi(),li.memoizedState,e)},useTransition:function(){return[wi(bi)[0],vi().memoizedState]},useMutableSource:Ci,useSyncExternalStore:ji,useId:Xi,unstable_isNewReconciler:!1},ts={readContext:Ba,useCallback:Vi,useContext:Ba,useEffect:Ri,useImperativeHandle:zi,useInsertionEffect:Oi,useLayoutEffect:Fi,useMemo:Ui,useReducer:ki,useRef:Ii,useState:function(){return ki(bi)},useDebugValue:Wi,useDeferredValue:function(e){var t=vi();return null===li?t.memoizedState=e:Hi(t,li.memoizedState,e)},useTransition:function(){return[ki(bi)[0],vi().memoizedState]},useMutableSource:Ci,useSyncExternalStore:ji,useId:Xi,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),a=La(r,o);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,o))&&(nc(t,e,o,r),Wa(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),a=La(r,o);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,o))&&(nc(t,e,o,r),Wa(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),o=La(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=za(e,o,r))&&(nc(t,e,r,n),Wa(t,e,r))}};function as(e,t,n,r,o,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,a))}function is(e,t,n){var r=!1,o=Eo,a=t.contextType;return"object"===typeof a&&null!==a?a=Ba(a):(o=To(t)?Bo:Ao.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Io(e,o):Eo),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?o.context=Ba(a):(a=To(t)?Bo:Ao.current,o.context=Io(e,a)),o.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),Ua(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var o=n}catch(a){o="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:o,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function us(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=La(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),us(0,t)},n}function fs(e,t,n){(n=La(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){us(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){us(0,t),"function"!==typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=La(-1,1)).tag=2,za(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ys=b.ReactCurrentOwner,vs=!1;function bs(e,t,n,r){t.child=null===e?ka(t,null,n,r):wa(t,e.child,n,r)}function ws(e,t,n,r,o){n=n.render;var a=t.ref;return Pa(t,o),r=gi(e,t,n,r,a,o),n=xi(),null===e||vs?(aa&&n&&ta(t),t.flags|=1,bs(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function ks(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Ic(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Cs(e,t,a,r,o))}if(a=e.child,0===(e.lanes&o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Hs(e,t,o)}return t.flags|=1,(e=Tc(a,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(vs=!1,t.pendingProps=r=a,0===(e.lanes&o))return t.lanes=e.lanes,Hs(e,t,o);0!==(131072&e.flags)&&(vs=!0)}}return Ns(e,t,n,r,o)}function js(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},So(Tl,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,So(Tl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,So(Tl,Il),Il|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,So(Tl,Il),Il|=r;return bs(e,t,o,n),t.child}function _s(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,r,o){var a=To(n)?Bo:Ao.current;return a=Io(t,a),Pa(t,o),n=gi(e,t,n,r,a,o),r=xi(),null===e||vs?(aa&&r&&ta(t),t.flags|=1,bs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function Ss(e,t,n,r,o){if(To(n)){var a=!0;Oo(t)}else a=!1;if(Pa(t,o),null===t.stateNode)Us(e,t),is(t,n,r),ls(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ba(c):c=Io(t,c=To(n)?Bo:Ao.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,i,r,c),Ra=!1;var h=t.memoizedState;i.state=h,Ua(t,r,i,o),l=t.memoizedState,s!==r||h!==l||Po.current||Ra?("function"===typeof d&&(rs(t,n,d,r),l=t.memoizedState),(s=Ra||as(t,n,s,r,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Fa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ba(l):l=Io(t,l=To(n)?Bo:Ao.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==u||h!==l)&&ss(t,i,r,l),Ra=!1,h=t.memoizedState,i.state=h,Ua(t,r,i,o);var f=t.memoizedState;s!==u||h!==f||Po.current||Ra?("function"===typeof p&&(rs(t,n,p,r),f=t.memoizedState),(c=Ra||as(t,n,c,r,h,f,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Es(e,t,n,r,a,o)}function Es(e,t,n,r,o,a){_s(e,t);var i=0!==(128&t.flags);if(!r&&!i)return o&&Fo(t,n,!1),Hs(e,t,a);r=t.stateNode,ys.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=wa(t,e.child,null,a),t.child=wa(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,o&&Fo(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Do(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Do(0,t.context,!1),Za(e,t.containerInfo)}function Ps(e,t,n,r,o){return fa(),ma(o),t.flags|=256,bs(e,t,n,r),t.child}var Bs,Is,Ts,Ms,Ds={dehydrated:null,treeContext:null,retryLane:0};function Rs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Os(e,t,n){var r,o=t.pendingProps,i=ei.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),So(ei,1&i),null===e)return da(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Rc(l,o,0,null),e=Dc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Rs(n),t.memoizedState=Ds,e):Fs(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,s){if(n)return 256&t.flags?(t.flags&=-257,Ls(e,t,s,r=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Rc({mode:"visible",children:r.children},o,0,null),(i=Dc(i,o,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&wa(t,e.child,null,s),t.child.memoizedState=Rs(s),t.memoizedState=Ds,i);if(0===(1&t.mode))return Ls(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Ls(e,t,s,r=ds(i=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),vs||l){if(null!==(r=Al)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==i.retryLane&&(i.retryLane=o,Da(e,o),nc(r,e,o,-1))}return mc(),Ls(e,t,s,r=ds(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,oa=co(o.nextSibling),ra=t,aa=!0,ia=null,null!==e&&(Yo[qo++]=Jo,Yo[qo++]=Qo,Yo[qo++]=Zo,Jo=e.id,Qo=e.overflow,Zo=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,i,n);if(s){s=o.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==i?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Tc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Tc(r,s):(s=Dc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Rs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ds,o}return e=(s=e.child).sibling,o=Tc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Fs(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ls(e,t,n,r){return null!==r&&ma(r),wa(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Aa(e.return,t,n)}function Ws(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Vs(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=ei.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(So(ei,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ws(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ti(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ws(t,!0,n,null,a);break;case"together":Ws(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Us(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Tc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Tc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:case 17:return To(t.type)&&Mo(),Xs(t),null;case 3:return r=t.stateNode,Ja(),No(Po),No(Ao),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ia&&(ic(ia),ia=null))),Is(e,t),Xs(t),null;case 5:$a(t);var o=qa(Ya.current);if(n=t.type,null!==e&&null!=t.stateNode)Ts(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Xs(t),null}if(e=qa(Xa.current),ha(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[po]=t,r[fo]=i,e=0!==(1&t.mode),n){case"dialog":Lr("cancel",r),Lr("close",r);break;case"iframe":case"object":case"embed":Lr("load",r);break;case"video":case"audio":for(o=0;o<Dr.length;o++)Lr(Dr[o],r);break;case"source":Lr("error",r);break;case"img":case"image":case"link":Lr("error",r),Lr("load",r);break;case"details":Lr("toggle",r);break;case"input":Z(r,i),Lr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Lr("invalid",r);break;case"textarea":oe(r,i),Lr("invalid",r)}for(var l in ye(n,i),o=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Lr("scroll",r)}switch(n){case"input":X(r),$(r,i,!0);break;case"textarea":X(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=$r)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[po]=t,e[fo]=r,Bs(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Lr("cancel",e),Lr("close",e),o=r;break;case"iframe":case"object":case"embed":Lr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Dr.length;o++)Lr(Dr[o],e);o=r;break;case"source":Lr("error",e),o=r;break;case"img":case"image":case"link":Lr("error",e),Lr("load",e),o=r;break;case"details":Lr("toggle",e),o=r;break;case"input":Z(e,r),o=q(e,r),Lr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=O({},r,{value:void 0}),Lr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Lr("invalid",e)}for(i in ye(n,o),c=o)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Lr("scroll",e):null!=d&&v(e,i,d,l))}switch(n){case"input":X(e),$(e,r,!1);break;case"textarea":X(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=qa(Ya.current),qa(Xa.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(i=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return Xs(t),null;case 13:if(No(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&0!==(1&t.mode)&&0===(128&t.flags))pa(),fa(),t.flags|=98560,i=!1;else if(i=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[po]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xs(t),i=!1}else null!==ia&&(ic(ia),ia=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),Xs(t),null);case 4:return Ja(),Is(e,t),null===e&&Vr(t.stateNode.containerInfo),Xs(t),null;case 10:return Ea(t.type._context),Xs(t),null;case 19:if(No(ei),null===(i=t.memoizedState))return Xs(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Gs(i,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,Gs(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return So(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Vl&&(t.flags|=128,r=!0,Gs(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!aa)return Xs(t),null}else 2*Je()-i.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Gs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=ei.current,So(ei,r?1&n|2:1&n),t):(Xs(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Xs(t),6&t.subtreeFlags&&(t.flags|=8192)):Xs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(na(t),t.tag){case 1:return To(t.type)&&Mo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),No(Po),No(Ao),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $a(t),null;case 13:if(No(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return No(ei),null;case 4:return Ja(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Bs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Is=function(){},Ts=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,qa(Xa.current);var a,i=null;switch(n){case"input":o=q(e,o),r=q(e,r),i=[];break;case"select":o=O({},o,{value:void 0}),r=O({},r,{value:void 0}),i=[];break;case"textarea":o=re(e,o),r=re(e,r),i=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(d in ye(n,r),n=null,o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var l=o[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(s.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=o?o[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(s.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Lr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var qs=!1,Zs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Qs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){jc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&el(t,n,a)}o=o.next}while(o!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[fo],delete t[go],delete t[xo],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Zs||$s(n,t);case 6:var r=dl,o=ul;dl=null,hl(e,t,n),ul=o,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Vt(e)):lo(dl,n.stateNode));break;case 4:r=dl,o=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=o;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(n,t,i),o=o.next}while(o!==r)}hl(e,t,n);break;case 1:if(!Zs&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){jc(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Zs=(r=Zs)||null!==n.memoizedState,hl(e,t,n),Zs=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach(function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));pl(i,s,o),dl=null,ul=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(d){jc(o,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),xl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){jc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){jc(e,e.return,g)}}break;case 1:ml(t,e),xl(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(ml(t,e),xl(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(g){jc(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&J(o,i),ve(l,s);var d=ve(l,i);for(s=0;s<c.length;s+=2){var u=c[s],h=c[s+1];"style"===u?ge(o,h):"dangerouslySetInnerHTML"===u?ue(o,h):"children"===u?he(o,h):v(o,u,h,d)}switch(l){case"input":Q(o,i);break;case"textarea":ae(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ne(o,!!i.multiple,f,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(o,!!i.multiple,i.defaultValue,!0):ne(o,!!i.multiple,i.multiple?[]:"",!1))}o[fo]=i}catch(g){jc(e,e.return,g)}}break;case 6:if(ml(t,e),xl(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(g){jc(e,e.return,g)}}break;case 3:if(ml(t,e),xl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){jc(e,e.return,g)}break;case 4:default:ml(t,e),xl(e);break;case 13:ml(t,e),xl(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(Wl=Je())),4&r&&fl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(d=Zs)||u,ml(t,e),Zs=d):ml(t,e),xl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qs=e,u=e.child;null!==u;){for(h=Qs=u;null!==Qs;){switch(f=(p=Qs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:$s(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){jc(r,n,g)}}break;case 5:$s(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Qs=f):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{o=h.stateNode,d?"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){jc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){jc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),xl(e),4&r&&fl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),cl(e,sl(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,sl(e),i);break;default:throw Error(a(161))}}catch(s){jc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Qs=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var o=Qs,a=o.child;if(22===o.tag&&r){var i=null!==o.memoizedState||qs;if(!i){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Zs;s=qs;var c=Zs;if(qs=i,(Zs=l)&&!c)for(Qs=o;null!==Qs;)l=(i=Qs).child,22===i.tag&&null!==i.memoizedState?kl(o):null!==l?(l.return=i,Qs=l):kl(o);for(;null!==a;)Qs=a,vl(a,t,n),a=a.sibling;Qs=o,qs=s,Zs=c}bl(e)}else 0!==(8772&o.subtreeFlags)&&null!==a?(a.return=o,Qs=a):bl(e)}}function bl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zs)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ha(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ha(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(a(163))}Zs||512&t.flags&&ol(t)}catch(p){jc(t,t.return,p)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function kl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){jc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){jc(t,o,l)}}var a=t.return;try{ol(t)}catch(l){jc(t,a,l)}break;case 5:var i=t.return;try{ol(t)}catch(l){jc(t,i,l)}}}catch(l){jc(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var Cl,jl=Math.ceil,_l=b.ReactCurrentDispatcher,Nl=b.ReactCurrentOwner,Sl=b.ReactCurrentBatchConfig,El=0,Al=null,Pl=null,Bl=0,Il=0,Tl=_o(0),Ml=0,Dl=null,Rl=0,Ol=0,Fl=0,Ll=null,zl=null,Wl=0,Vl=1/0,Ul=null,Hl=!1,Gl=null,Xl=null,Kl=!1,Yl=null,ql=0,Zl=0,Jl=null,Ql=-1,$l=0;function ec(){return 0!==(6&El)?Je():-1!==Ql?Ql:Ql=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Bl?Bl&-Bl:null!==ga.transition?(0===$l&&($l=mt()),$l):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nc(e,t,n,r){if(50<Zl)throw Zl=0,Jl=null,Error(a(185));xt(e,n,r),0!==(2&El)&&e===Al||(e===Al&&(0===(2&El)&&(Ol|=n),4===Ml&&sc(e,Bl)),rc(e,r),1===n&&0===El&&0===(1&t.mode)&&(Vl=Je()+500,zo&&Uo()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),s=1<<i,l=o[i];-1===l?0!==(s&n)&&0===(s&r)||(o[i]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Al?Bl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){zo=!0,Vo(e)}(lc.bind(null,e)):Vo(lc.bind(null,e)),io(function(){0===(6&El)&&Uo()}),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Ql=-1,$l=0,0!==(6&El))throw Error(a(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Al?Bl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var o=El;El|=2;var i=fc();for(Al===e&&Bl===t||(Ul=null,Vl=Je()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Sa(),_l.current=i,El=o,null!==Pl?t=0:(Al=null,Bl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(r=o,t=ac(e,o))),1===t)throw n=Dl,hc(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!sr(a(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gc(e,r))&&(0!==(i=ft(e))&&(r=i,t=ac(e,i))),1===t))throw n=Dl,hc(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,zl,Ul);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Wl+500-Je())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(wc.bind(null,e,zl,Ul),t);break}wc(e,zl,Ul);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>o&&(o=s),r&=~i}if(r=o,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jl(r/1960))-r)){e.timeoutHandle=ro(wc.bind(null,e,zl,Ul),r);break}wc(e,zl,Ul);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=Ll;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=n,null!==t&&ic(t)),e}function ic(e){null===zl?zl=e:zl.push.apply(zl,e)}function sc(e,t){for(t&=~Fl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&El))throw Error(a(327));kc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Dl,hc(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,Ul),rc(e,Je()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Vl=Je()+500,zo&&Uo())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&El)&&kc();var t=El;El|=1;var n=Sl.transition,r=vt;try{if(Sl.transition=null,vt=1,e)return e()}finally{vt=r,Sl.transition=n,0===(6&(El=t))&&Uo()}}function uc(){Il=Tl.current,No(Tl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mo();break;case 3:Ja(),No(Po),No(Ao),ri();break;case 5:$a(r);break;case 4:Ja();break;case 13:case 19:No(ei);break;case 10:Ea(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Al=e,Pl=e=Tc(e.current,null),Bl=Il=t,Ml=0,Dl=null,Fl=Ol=Rl=0,zl=Ll=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=o,r.next=i}n.pending=r}Ia=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(Sa(),oi.current=Qi,di){for(var r=si.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}di=!1}if(ii=0,ci=li=si=null,ui=!1,hi=0,Nl.current=null,null===n||null===n.return){Ml=1,Dl=t,Pl=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=Bl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,xs(f,s,l,0,t),1&f.mode&&ms(i,d,t),c=d;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(i,d,t),mc();break e}c=Error(a(426))}else if(aa&&1&l.mode){var x=gs(s);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xs(x,s,l,0,t),ma(cs(c,l));break e}}i=c=cs(c,l),4!==Ml&&(Ml=2),null===Ll?Ll=[i]:Ll.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Va(i,ps(0,c,t));break e;case 1:l=c;var y=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Xl||!Xl.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Va(i,fs(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function fc(){var e=_l.current;return _l.current=Qi,null===e?Qi:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Al||0===(268435455&Rl)&&0===(268435455&Ol)||sc(Al,Bl)}function gc(e,t){var n=El;El|=2;var r=fc();for(Al===e&&Bl===t||(Ul=null,hc(e,t));;)try{xc();break}catch(o){pc(e,o)}if(Sa(),El=n,_l.current=r,null!==Pl)throw Error(a(261));return Al=null,Bl=0,Ml}function xc(){for(;null!==Pl;)vc(Pl)}function yc(){for(;null!==Pl&&!qe();)vc(Pl)}function vc(e){var t=Cl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Nl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Il)))return void(Pl=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ml=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ml&&(Ml=5)}function wc(e,t,n){var r=vt,o=Sl.transition;try{Sl.transition=null,vt=1,function(e,t,n,r){do{kc()}while(null!==Yl);if(0!==(6&El))throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-it(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,i),e===Al&&(Pl=Al=null,Bl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ac(tt,function(){return kc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Sl.transition,Sl.transition=null;var s=vt;vt=1;var l=El;El|=4,Nl.current=null,function(e,t){if(eo=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==o&&3!==h.nodeType||(l=s+o),h!==i||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++d===o&&(l=s),p===i&&++u===r&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ht=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,x=m.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){jc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(to),Ht=!!eo,to=eo=null,e.current=n,yl(n,e,o),Ze(),El=l,vt=s,Sl.transition=i}else e.current=n;if(Kl&&(Kl=!1,Yl=e,ql=o),i=e.pendingLanes,0===i&&(Xl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Hl)throw Hl=!1,e=Gl,Gl=null,e;0!==(1&ql)&&0!==e.tag&&kc(),i=e.pendingLanes,0!==(1&i)?e===Jl?Zl++:(Zl=0,Jl=e):Zl=0,Uo()}(e,t,n,r)}finally{Sl.transition=o,vt=r}return null}function kc(){if(null!==Yl){var e=bt(ql),t=Sl.transition,n=vt;try{if(Sl.transition=null,vt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,ql=0,0!==(6&El))throw Error(a(331));var o=El;for(El|=4,Qs=e.current;null!==Qs;){var i=Qs,s=i.child;if(0!==(16&Qs.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qs=d;null!==Qs;){var u=Qs;switch(u.tag){case 0:case 11:case 15:nl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Qs=h;else for(;null!==Qs;){var p=(u=Qs).sibling,f=u.return;if(al(u),u===d){Qs=null;break}if(null!==p){p.return=f,Qs=p;break}Qs=f}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Qs=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(i=Qs).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Qs=y;break e}Qs=i.return}}var v=e.current;for(Qs=v;null!==Qs;){var b=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Qs=b;else e:for(s=v;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){jc(l,l.return,k)}if(l===s){Qs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qs=w;break e}Qs=l.return}}if(El=o,Uo(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(k){}r=!0}return r}finally{vt=n,Sl.transition=t}}return!1}function Cc(e,t,n){e=za(e,t=ps(0,t=cs(n,t),1),1),t=ec(),null!==e&&(xt(e,1,t),rc(e,t))}function jc(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){t=za(t,e=fs(t,e=cs(n,e),1),1),e=ec(),null!==t&&(xt(t,1,e),rc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Bl&n)===n&&(4===Ml||3===Ml&&(130023424&Bl)===Bl&&500>Je()-Wl?hc(e,0):Fl|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Da(e,t))&&(xt(e,t,n),rc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Nc(e,n)}function Ac(e,t){return Ke(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bc(e,t,n,r){return new Pc(e,t,n,r)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Tc(e,t){var n=e.alternate;return null===n?((n=Bc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,o,i){var s=2;if(r=e,"function"===typeof e)Ic(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case C:return Dc(n.children,o,i,t);case j:s=8,o|=8;break;case _:return(e=Bc(12,n,t,2|o)).elementType=_,e.lanes=i,e;case A:return(e=Bc(13,n,t,o)).elementType=A,e.lanes=i,e;case P:return(e=Bc(19,n,t,o)).elementType=P,e.lanes=i,e;case T:return Rc(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:s=10;break e;case S:s=9;break e;case E:s=11;break e;case B:s=14;break e;case I:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Bc(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Dc(e,t,n,r){return(e=Bc(7,e,r,t)).lanes=n,e}function Rc(e,t,n,r){return(e=Bc(22,e,r,t)).elementType=T,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Bc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Bc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,o,a,i,s,l){return e=new Lc(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Bc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function Wc(e){if(!e)return Eo;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(To(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(To(n))return Ro(e,n,t)}return t}function Vc(e,t,n,r,o,a,i,s,l){return(e=zc(n,r,!0,e,0,a,0,s,l)).context=Wc(null),n=e.current,(a=La(r=ec(),o=tc(n))).callback=void 0!==t&&null!==t?t:null,za(n,a,o),e.current.lanes=o,xt(e,o,r),rc(e,r),e}function Uc(e,t,n,r){var o=t.current,a=ec(),i=tc(o);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=La(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=za(o,t,i))&&(nc(e,o,i,a),Wa(e,o,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Po.current)vs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vs=!1,function(e,t,n){switch(t.tag){case 3:As(t),fa();break;case 5:Qa(t);break;case 1:To(t.type)&&Oo(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;So(Ca,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(So(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Os(e,t,n):(So(ei,1&ei.current),null!==(e=Hs(e,t,n))?e.sibling:null);So(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),So(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,js(e,t,n)}return Hs(e,t,n)}(e,t,n);vs=0!==(131072&e.flags)}else vs=!1,aa&&0!==(1048576&t.flags)&&ea(t,Ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Us(e,t),e=t.pendingProps;var o=Io(t,Ao.current);Pa(t,n),o=gi(null,t,r,e,o,n);var i=xi();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,To(r)?(i=!0,Oo(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Oa(t),o.updater=os,t.stateNode=o,o._reactInternals=t,ls(t,r,e,n),t=Es(null,t,r,!0,i,n)):(t.tag=0,aa&&i&&ta(t),bs(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Us(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===B)return 14}return 2}(r),e=ns(r,e),o){case 0:t=Ns(null,t,r,e,n);break e;case 1:t=Ss(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ns(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,Ss(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,o=(i=t.memoizedState).element,Fa(e,t),Ua(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ps(e,t,r,n,o=cs(Error(a(423)),t));break e}if(r!==o){t=Ps(e,t,r,n,o=cs(Error(a(424)),t));break e}for(oa=co(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,ia=null,n=ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===o){t=Hs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return Qa(t),null===e&&da(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==i&&no(r,i)&&(t.flags|=32),_s(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&da(t),null;case 13:return Os(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wa(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,ws(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,So(Ca,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===o.children&&!Po.current){t=Hs(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){s=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=La(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Aa(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Aa(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}bs(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Pa(t,n),r=r(o=Ba(o)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),ks(e,t,r,o=ns(r.type,o),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),Us(e,t),t.tag=1,To(r)?(e=!0,Oo(t)):e=!1,Pa(t,n),is(t,r,o),ls(t,r,o,n),Es(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return js(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function qc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function $c(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof o){var s=o;o=function(){var e=Hc(i);s.call(e)}}Uc(t,i,e,o)}else i=function(e,t,n,r,o){if(o){if("function"===typeof r){var a=r;r=function(){var e=Hc(i);a.call(e)}}var i=Vc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=i,e[mo]=i.current,Vr(8===e.nodeType?e.parentNode:e),dc(),i}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[mo]=l.current,Vr(8===e.nodeType?e.parentNode:e),dc(function(){Uc(t,l,n,r)}),l}(n,t,e,o,r);return Hc(i)}qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Uc(e,t,null,null)},qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Uc(null,e,null,null)}),t[mo]=null}},qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tt.length&&0!==t&&t<Tt[n].priority;n++);Tt.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Je()),0===(6&El)&&(Vl=Je()+500,Uo()))}break;case 13:dc(function(){var t=Da(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Xc(e,1)}},kt=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)nc(t,e,134217728,ec());Xc(e,134217728)}},Ct=function(e){if(13===e.tag){var t=tc(e),n=Da(e,t);if(null!==n)nc(n,e,t,ec());Xc(e,t)}},jt=function(){return vt},_t=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},ke=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ko(r);if(!o)throw Error(a(90));K(r),Q(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Ae=dc;var ed={usingClientEntryPoint:!1,Events:[bo,wo,ko,Ne,Se,cc]},td={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{ot=rd.inject(nd),at=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(a(299));var n=!1,r="",o=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",s=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,o,0,i,s),e[mo]=t.current,Vr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[mo]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t=n(43),r=n.t(t,2),o=n(391);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const i="popstate";function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(t,n,r,o){void 0===o&&(o={});let{window:l=document.defaultView,v5Compat:h=!1}=o,p=l.history,f=e.Pop,m=null,g=x();function x(){return(p.state||{idx:null}).idx}function y(){f=e.Pop;let t=x(),n=null==t?null:t-g;g=t,m&&m({action:f,location:b.location,delta:n})}function v(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:u(e);return n=n.replace(/ $/,"%20"),s(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,p.replaceState(a({},p.state,{idx:g}),""));let b={get action(){return f},get location(){return t(l,p)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(i,y),m=e,()=>{l.removeEventListener(i,y),m=null}},createHref:e=>n(l,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;let o=d(b.location,t,n);r&&r(o,t),g=x()+1;let a=c(o,g),i=b.createHref(o);try{p.pushState(a,"",i)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;l.location.assign(i)}h&&m&&m({action:f,location:b.location,delta:1})},replace:function(t,n){f=e.Replace;let o=d(b.location,t,n);r&&r(o,t),g=x();let a=c(o,g),i=b.createHref(o);p.replaceState(a,"",i),h&&m&&m({action:f,location:b.location,delta:0})},go:e=>p.go(e)};return b}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let o=P(("string"===typeof t?h(t):t).pathname||"/",n);if(null==o)return null;let a=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let s=0;null==i&&s<a.length;++s){let e=A(o);i=S(a[s],e,r)}return i}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let o=(e,o,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};i.relativePath.startsWith("/")&&(s(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let l=D([r,i.relativePath]),c=n.concat(i);e.children&&e.children.length>0&&(s(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),x(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:N(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))o(e,t,r);else o(e,t)}),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return o?[a,""]:[a];let i=y(r.join("/")),s=[];return s.push(...i.map(e=>""===e?a:[a,e].join("/"))),o&&s.push(...i),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const v=/^:[\w-]+$/,b=3,w=2,k=1,C=10,j=-2,_=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(_)&&(r+=j),t&&(r+=w),n.filter(e=>!_(e)).reduce((e,t)=>e+(v.test(t)?b:""===t?k:C),r)}function S(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,o={},a="/",i=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===a?t:t.slice(a.length)||"/",d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(o,d.params),i.push({params:o,pathname:D([a,d.pathname]),pathnameBase:R(D([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=D([a,d.pathnameBase]))}return i}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let a=new RegExp(o,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1),c=r.reduce((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=s[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:c,pathname:a,pathnameBase:i,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function B(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function I(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function T(e,t){let n=I(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function M(e,t,n,r){let o;void 0===r&&(r=!1),"string"===typeof e?o=h(e):(o=a({},e),s(!o.pathname||!o.pathname.includes("?"),B("?","pathname","search",o)),s(!o.pathname||!o.pathname.includes("#"),B("#","pathname","hash",o)),s(!o.search||!o.search.includes("#"),B("#","search","hash",o)));let i,l=""===e||""===o.pathname,c=l?"/":o.pathname;if(null==c)i=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:o=""}="string"===typeof e?h(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:O(r),hash:F(o)}}(o,i),u=c&&"/"!==c&&c.endsWith("/"),p=(l||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!p||(d.pathname+="/"),d}const D=e=>e.join("/").replace(/\/\/+/g,"/"),R=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),O=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function L(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],W=(new Set(z),["get",...z]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const U=t.createContext(null);const H=t.createContext(null);const G=t.createContext(null);const X=t.createContext(null);const K=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=t.createContext(null);function q(){return null!=t.useContext(X)}function Z(){return q()||s(!1),t.useContext(X).location}function J(e){t.useContext(G).static||t.useLayoutEffect(e)}function Q(){let{isDataRoute:e}=t.useContext(K);return e?function(){let{router:e}=se(ae.UseNavigateStable),n=ce(ie.UseNavigateStable),r=t.useRef(!1);J(()=>{r.current=!0});let o=t.useCallback(function(t,o){void 0===o&&(o={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,V({fromRouteId:n},o)))},[e,n]);return o}():function(){q()||s(!1);let e=t.useContext(U),{basename:n,future:r,navigator:o}=t.useContext(G),{matches:a}=t.useContext(K),{pathname:i}=Z(),l=JSON.stringify(T(a,r.v7_relativeSplatPath)),c=t.useRef(!1);return J(()=>{c.current=!0}),t.useCallback(function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void o.go(t);let a=M(t,JSON.parse(l),i,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:D([n,a.pathname])),(r.replace?o.replace:o.push)(a,r.state,r)},[n,o,l,i,e])}()}function $(n,r,o,a){q()||s(!1);let{navigator:i}=t.useContext(G),{matches:l}=t.useContext(K),c=l[l.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let p,f=Z();if(r){var g;let e="string"===typeof r?h(r):r;"/"===u||(null==(g=e.pathname)?void 0:g.startsWith(u))||s(!1),p=e}else p=f;let x=p.pathname||"/",y=x;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=m(n,{pathname:y});let b=oe(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:D([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,o,a);return r&&b?t.createElement(X.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:e.Pop}},b):b}function ee(){let e=function(){var e;let n=t.useContext(Y),r=le(ie.UseRouteError),o=ce(ie.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[o]}(),n=L(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}const te=t.createElement(ee,null);class ne extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(K.Provider,{value:this.props.routeContext},t.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function re(e){let{routeContext:n,match:r,children:o}=e,a=t.useContext(U);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(K.Provider,{value:n},o)}function oe(e,n,r,o){var a;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===o&&(o=null),null==e){var i;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(i=o)&&i.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let l=e,c=null==(a=r)?void 0:a.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||s(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(r&&o&&o.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:n}=r,o=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||o){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,o,a)=>{let i,s=!1,h=null,p=null;var f;r&&(i=c&&o.route.id?c[o.route.id]:void 0,h=o.route.errorElement||te,d&&(u<0&&0===a?(f="route-fallback",!1||de[f]||(de[f]=!0),s=!0,p=null):u===a&&(s=!0,p=o.route.hydrateFallbackElement||null)));let m=n.concat(l.slice(0,a+1)),g=()=>{let n;return n=i?h:s?p:o.route.Component?t.createElement(o.route.Component,null):o.route.element?o.route.element:e,t.createElement(re,{match:o,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===a)?t.createElement(ne,{location:r.location,revalidation:r.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),ie=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ie||{});function se(e){let n=t.useContext(U);return n||s(!1),n}function le(e){let n=t.useContext(H);return n||s(!1),n}function ce(e){let n=function(){let e=t.useContext(K);return e||s(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||s(!1),r.route.id}const de={};function ue(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function he(e){let{to:n,replace:r,state:o,relative:a}=e;q()||s(!1);let{future:i,static:l}=t.useContext(G),{matches:c}=t.useContext(K),{pathname:d}=Z(),u=Q(),h=M(n,T(c,i.v7_relativeSplatPath),d,"path"===a),p=JSON.stringify(h);return t.useEffect(()=>u(JSON.parse(p),{replace:r,state:o,relative:a}),[u,p,a,r,o]),null}function pe(e){s(!1)}function fe(n){let{basename:r="/",children:o=null,location:a,navigationType:i=e.Pop,navigator:l,static:c=!1,future:d}=n;q()&&s(!1);let u=r.replace(/^\/*/,"/"),p=t.useMemo(()=>({basename:u,navigator:l,static:c,future:V({v7_relativeSplatPath:!1},d)}),[u,d,l,c]);"string"===typeof a&&(a=h(a));let{pathname:f="/",search:m="",hash:g="",state:x=null,key:y="default"}=a,v=t.useMemo(()=>{let e=P(f,u);return null==e?null:{location:{pathname:e,search:m,hash:g,state:x,key:y},navigationType:i}},[u,f,m,g,x,y,i]);return null==v?null:t.createElement(G.Provider,{value:p},t.createElement(X.Provider,{children:o,value:v}))}function me(e){let{children:t,location:n}=e;return $(ge(t),n)}new Promise(()=>{});t.Component;function ge(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,o)=>{if(!t.isValidElement(e))return;let a=[...n,o];if(e.type===t.Fragment)return void r.push.apply(r,ge(e.props.children,a));e.type!==pe&&s(!1),e.props.index&&e.props.children&&s(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ge(e.props.children,a)),r.push(i)}),r}var xe=n(950),ye=n.t(xe,2);function ve(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(iN){}new Map;const be=r.startTransition;ye.flushSync,r.useId;function we(e){let{basename:n,children:r,future:o,window:a}=e,i=t.useRef();var s;null==i.current&&(i.current=(void 0===(s={window:a,v5Compat:!0})&&(s={}),p(function(e,t){let{pathname:n,search:r,hash:o}=e.location;return d("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:u(t)},null,s)));let l=i.current,[c,h]=t.useState({action:l.action,location:l.location}),{v7_startTransition:f}=o||{},m=t.useCallback(e=>{f&&be?be(()=>h(e)):h(e)},[h,f]);return t.useLayoutEffect(()=>l.listen(m),[l,m]),t.useEffect(()=>ue(o),[o]),t.createElement(fe,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:o})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ke,Ce;function je(e){let n=t.useRef(ve(e)),r=t.useRef(!1),o=Z(),a=t.useMemo(()=>function(e,t){let n=ve(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(o.search,r.current?null:n.current),[o.search]),i=Q(),s=t.useCallback((e,t)=>{const n=ve("function"===typeof e?e(a):e);r.current=!0,i("?"+n,t)},[i,a]);return[a,s]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ce||(Ce={}));const _e=()=>{if("undefined"===typeof window)return!0;const e=navigator.userAgent.toLowerCase(),t=["android","webos","iphone","ipad","ipod","blackberry","iemobile","opera mini","mobile","tablet"].some(t=>e.includes(t)),n=window.innerWidth<768;return!t&&!n},Ne=()=>{var e;if("undefined"===typeof window)return"unknown";const t=[navigator.userAgent,navigator.language,window.screen.colorDepth.toString(),"".concat(window.screen.width,"x").concat(window.screen.height),(new Date).getTimezoneOffset().toString(),(null===(e=navigator.hardwareConcurrency)||void 0===e?void 0:e.toString())||"unknown"].join("|");let n=0;for(let r=0;r<t.length;r++){n=(n<<5)-n+t.charCodeAt(r),n&=n}return Math.abs(n).toString(36)},Se=()=>{if("undefined"===typeof window)return"ssr-default";const e="milkyhoop_browser_id";let t=localStorage.getItem(e);return t||(t="undefined"!==typeof crypto&&crypto.randomUUID?crypto.randomUUID():"browser_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,15)),localStorage.setItem(e,t),console.log("[Device] Created new browser_id:",t)),t},Ee=()=>{if("undefined"===typeof window)return"ssr-default";const e="milkyhoop_tab_id";let t=sessionStorage.getItem(e);return t||(t="tab_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9)),sessionStorage.setItem(e,t),console.log("[Device] Created new tab_id:",t)),t},Ae=()=>localStorage.getItem("access_token"),Pe=()=>localStorage.getItem("refresh_token"),Be=(e,t)=>{localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t),localStorage.setItem("token_timestamp",Date.now().toString())},Ie=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=[1e3,2e3,4e3],n=Pe();if(!n)return De("no_refresh_token"),!1;try{const r=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:n})});if(401===r.status||403===r.status)return console.error("[refreshAccessToken] Token invalid/expired, logging out"),De("token_expired"),!1;if(!r.ok){if(e<3){const n=t[e];return console.warn("[refreshAccessToken] Server error (".concat(r.status,"), retrying in ").concat(n,"ms... (").concat(e+1,"/").concat(3,")")),await new Promise(e=>setTimeout(e,n)),Ie(e+1)}return console.error("[refreshAccessToken] Max retries reached, logging out"),De("refresh_failed"),!1}const o=await r.json();return o.success&&o.data.access_token?(Be(o.data.access_token,o.data.refresh_token),console.log("[refreshAccessToken] Token refreshed successfully"),!0):(console.error("[refreshAccessToken] Unexpected response format"),De("refresh_failed"),!1)}catch(r){if(e<3){const n=t[e];return console.warn("[refreshAccessToken] Network error, retrying in ".concat(n,"ms... (").concat(e+1,"/").concat(3,")"),r),await new Promise(e=>setTimeout(e,n)),Ie(e+1)}return console.error("[refreshAccessToken] Max retries reached after network errors, logging out"),De("network_error"),!1}},Te=()=>{const e=Ae();if(!e)return null;try{return JSON.parse(atob(e.split(".")[1])).user_id||null}catch(t){return null}},Me=()=>!!Ae(),De=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"manual";const t=Pe(),n=Ae();if(t&&n&&"manual"===e)try{const e=JSON.parse(atob(n.split(".")[1])).user_id;await fetch("/api/auth/logout?user_id=".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:t,logout_all_devices:!1})})}catch(r){console.error("[logout] Backend logout API call failed:",r)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_timestamp"),localStorage.removeItem("device_id"),window.dispatchEvent(new CustomEvent("logout",{detail:{reason:e}})),console.log("[logout] User logged out, reason: ".concat(e))},Re=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"manual";const t=Ae();if(!t)return!1;try{console.log("[verifySession] Checking session (".concat(e,")..."));const n=await fetch("/api/auth/verify",{headers:{Authorization:"Bearer ".concat(t)},cache:"no-store"});if(204===n.status)return console.log("[verifySession] Session valid"),!0;if(401===n.status){const t=(await n.json().catch(()=>({}))).code||"session_invalid";return console.warn("[verifySession] Session invalid: ".concat(t)),window.dispatchEvent(new CustomEvent("session_replaced",{detail:{reason:t,source:e}})),await De(t),!1}return console.warn("[verifySession] Unexpected status: ".concat(n.status)),!0}catch(n){return console.warn("[verifySession] Network error:",n),!0}};let Oe=null;var Fe=n(579);const Le=e=>{let{isOpen:n,onClose:r,onLoginSuccess:o}=e;const[a,i]=(0,t.useState)(""),[s,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)("");if(!n)return null;return(0,Fe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Fe.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Fe.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Login"}),(0,Fe.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Fe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Fe.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0),h("");try{const e=Se(),n=Ne(),i=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:s,browser_id:e,device_fingerprint:n})}),l=await i.json();l.success&&l.data.access_token?(Be(l.data.access_token,l.data.refresh_token),l.data.device_id&&(t=l.data.device_id,localStorage.setItem("device_id",t),console.log("[LoginModal] Device ID stored:",l.data.device_id.substring(0,8))),o(l.data.access_token),r()):h(l.message||"Login gagal")}catch(n){h("Terjadi kesalahan. Silakan coba lagi.")}finally{d(!1)}var t},className:"space-y-4",children:[u&&(0,Fe.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:u}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,Fe.jsx)("input",{type:"email",value:a,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"nama@email.com",required:!0})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Fe.jsx)("input",{type:"password",value:s,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0})]}),(0,Fe.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400 transition-colors",children:c?"Loading...":"Login"})]}),(0,Fe.jsx)("p",{className:"mt-4 text-sm text-gray-500 text-center",children:"Login untuk mengakses dashboard dan kelola tenant Anda"})]})})},ze=()=>{const e=Q(),[n,r]=(0,t.useState)(""),[o,a]=(0,t.useState)(!1),i=()=>{n.trim()&&a(!0)};return(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"min-h-screen bg-white flex flex-col",children:[(0,Fe.jsxs)("header",{className:"w-full py-5 px-6 flex items-center justify-between",children:[(0,Fe.jsx)("h1",{className:"text-2xl font-medium text-gray-900",children:"milkyhoop"}),(0,Fe.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Fe.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),(0,Fe.jsx)("main",{className:"flex-1 flex items-center justify-center px-4 py-8",children:(0,Fe.jsxs)("div",{className:"w-full max-w-sm",children:[(0,Fe.jsxs)("div",{className:"mb-10 text-center",children:[(0,Fe.jsxs)("h2",{className:"text-5xl sm:text-6xl font-semibold text-gray-900 mb-3 leading-tight",children:["Financial",(0,Fe.jsx)("br",{}),"Automation Tools"]}),(0,Fe.jsx)("p",{className:"text-lg text-gray-600 font-light",children:"No Pain Still Gain"})]}),(0,Fe.jsxs)("div",{className:"space-y-2.5 mx-auto",style:{maxWidth:"70%"},children:[(0,Fe.jsxs)("button",{onClick:()=>{console.log("Google login clicked")},className:"w-full flex items-center justify-center gap-2.5 px-4 py-2 bg-white border border-gray-300 rounded-lg text-[15px] text-gray-900 font-normal hover:bg-gray-50 transition-colors duration-200",children:[(0,Fe.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Fe.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Fe.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Fe.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,Fe.jsx)("span",{children:"Continue with Google"})]}),(0,Fe.jsxs)("div",{className:"flex items-center gap-3 my-3",children:[(0,Fe.jsx)("div",{className:"flex-1 h-px bg-gray-200"}),(0,Fe.jsx)("span",{className:"text-sm text-gray-500 font-normal",children:"OR"}),(0,Fe.jsx)("div",{className:"flex-1 h-px bg-gray-200"})]}),(0,Fe.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),i())},placeholder:"Enter your email",className:"w-full px-3.5 py-2 bg-white border border-gray-300 rounded-lg text-[15px] text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 focus:ring-1 focus:ring-gray-400 transition-all duration-200"}),(0,Fe.jsx)("button",{onClick:i,disabled:!n.trim(),className:"w-full px-4 py-2 bg-gray-900 hover:bg-black disabled:bg-gray-300 disabled:cursor-not-allowed text-white text-[15px] font-normal rounded-lg transition-all duration-200",children:"Continue with email"}),(0,Fe.jsxs)("p",{className:"text-xs text-gray-500 text-center mt-2.5 leading-relaxed",children:["By continuing, you acknowledge",(0,Fe.jsx)("br",{}),"MilkyHoop's Privacy Policy."]})]})]})}),(0,Fe.jsx)("footer",{className:"w-full py-4 text-center",children:(0,Fe.jsx)("p",{className:"text-xs text-gray-400",children:"\xa9 2025 MilkyHoop. Financial Automation Tools."})})]}),(0,Fe.jsx)(Le,{isOpen:o,onClose:()=>a(!1),onLoginSuccess:t=>{console.log("Login successful, redirecting to dashboard..."),e("/"),window.location.reload()}})]})},We=(0,t.createContext)({});function Ve(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}const Ue="undefined"!==typeof window,He=Ue?t.useLayoutEffect:t.useEffect;function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Xe(e){var t=function(e,t){if("object"!=Ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ge(t)?t:t+""}function Ke(e,t,n){return(t=Xe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach(function(t){Ke(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Ze=(0,t.createContext)(null);function Je(e){return"object"===typeof e&&null!==e}function Qe(e){return Je(e)&&"offsetHeight"in e}const $e=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function et(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function tt(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map(t=>{const r=et(t,e);return n||"function"!==typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"===typeof n?n():et(t[e],null)}}}}(...n),n)}class nt extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=Qe(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function rt(e){let{children:n,isPresent:r,anchorX:o,root:a}=e;const i=(0,t.useId)(),s=(0,t.useRef)(null),l=(0,t.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,t.useContext)($e),d=tt(s,null===n||void 0===n?void 0:n.ref);return(0,t.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:d,right:u}=l.current;if(r||!s.current||!e||!t)return;const h="left"===o?"left: ".concat(d):"right: ".concat(u);s.current.dataset.motionPopId=i;const p=document.createElement("style");c&&(p.nonce=c);const f=null!==a&&void 0!==a?a:document.head;return f.appendChild(p),p.sheet&&p.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(h,"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{f.contains(p)&&f.removeChild(p)}},[r]),(0,Fe.jsx)(nt,{isPresent:r,childRef:s,sizeRef:l,children:t.cloneElement(n,{ref:d})})}const ot=e=>{let{children:n,initial:r,isPresent:o,onExitComplete:a,custom:i,presenceAffectsLayout:s,mode:l,anchorX:c,root:d}=e;const u=Ve(at),h=(0,t.useId)();let p=!0,f=(0,t.useMemo)(()=>(p=!1,{id:h,initial:r,isPresent:o,custom:i,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))}),[o,u,a]);return s&&p&&(f=qe({},f)),(0,t.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[o]),t.useEffect(()=>{!o&&!u.size&&a&&a()},[o]),"popLayout"===l&&(n=(0,Fe.jsx)(rt,{isPresent:o,anchorX:c,root:d,children:n})),(0,Fe.jsx)(Ze.Provider,{value:f,children:n})};function at(){return new Map}function it(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=(0,t.useContext)(Ze);if(null===n)return[!0,null];const{isPresent:r,onExitComplete:o,register:a}=n,i=(0,t.useId)();(0,t.useEffect)(()=>{if(e)return a(i)},[e]);const s=(0,t.useCallback)(()=>e&&o&&o(i),[i,o,e]);return!r&&o?[!1,s]:[!0]}const st=e=>e.key||"";function lt(e){const n=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&n.push(e)}),n}const ct=e=>{let{children:n,custom:r,initial:o=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:s="sync",propagate:l=!1,anchorX:c="left",root:d}=e;const[u,h]=it(l),p=(0,t.useMemo)(()=>lt(n),[n]),f=l&&!u?[]:p.map(st),m=(0,t.useRef)(!0),g=(0,t.useRef)(p),x=Ve(()=>new Map),[y,v]=(0,t.useState)(p),[b,w]=(0,t.useState)(p);He(()=>{m.current=!1,g.current=p;for(let e=0;e<b.length;e++){const t=st(b[e]);f.includes(t)?x.delete(t):!0!==x.get(t)&&x.set(t,!1)}},[b,f.length,f.join("-")]);const k=[];if(p!==y){let e=[...p];for(let t=0;t<b.length;t++){const n=b[t],r=st(n);f.includes(r)||(e.splice(t,0,n),k.push(n))}return"wait"===s&&k.length&&(e=k),w(lt(e)),v(p),null}const{forceRender:C}=(0,t.useContext)(We);return(0,Fe.jsx)(Fe.Fragment,{children:b.map(e=>{const t=st(e),n=!(l&&!u)&&(p===b||f.includes(t));return(0,Fe.jsx)(ot,{isPresent:n,initial:!(m.current&&!o)&&void 0,custom:r,presenceAffectsLayout:i,mode:s,root:d,onExitComplete:n?void 0:()=>{if(!x.has(t))return;x.set(t,!0);let e=!0;x.forEach(t=>{t||(e=!1)}),e&&(null===C||void 0===C||C(),w(g.current),l&&(null===h||void 0===h||h()),a&&a())},anchorX:c,children:e},t)})})},dt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ut=(()=>new Set(dt))(),ht=e=>180*e/Math.PI,pt=e=>{const t=ht(Math.atan2(e[1],e[0]));return mt(t)},ft={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:pt,rotateZ:pt,skewX:e=>ht(Math.atan(e[1])),skewY:e=>ht(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},mt=e=>((e%=360)<0&&(e+=360),e),gt=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),xt=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),yt={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gt,scaleY:xt,scale:e=>(gt(e)+xt(e))/2,rotateX:e=>mt(ht(Math.atan2(e[6],e[5]))),rotateY:e=>mt(ht(Math.atan2(-e[2],e[0]))),rotateZ:pt,rotate:pt,skewX:e=>ht(Math.atan(e[4])),skewY:e=>ht(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function vt(e){return e.includes("scale")?1:0}function bt(e,t){if(!e||"none"===e)return vt(t);const n=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let r,o;if(n)r=yt,o=n;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);r=ft,o=t}if(!o)return vt(t);const a=r[t],i=o[1].split(",").map(wt);return"function"===typeof a?a(i):i[a]}function wt(e){return parseFloat(e.trim())}const kt=e=>t=>"string"===typeof t&&t.startsWith(e),Ct=kt("--"),jt=kt("var(--"),_t=e=>!!jt(e)&&Nt.test(e.split("/*")[0].trim()),Nt=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i;function St(e){let{top:t,left:n,right:r,bottom:o}=e;return{x:{min:n,max:r},y:{min:t,max:o}}}const Et=(e,t,n)=>e+(t-e)*n;function At(e){return void 0===e||1===e}function Pt(e){let{scale:t,scaleX:n,scaleY:r}=e;return!At(t)||!At(n)||!At(r)}function Bt(e){return Pt(e)||It(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function It(e){return Tt(e.x)||Tt(e.y)}function Tt(e){return e&&"0%"!==e}function Mt(e,t,n){return n+t*(e-n)}function Dt(e,t,n,r,o){return void 0!==o&&(e=Mt(e,o,r)),Mt(e,n,r)+t}function Rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;e.min=Dt(e.min,t,n,r,o),e.max=Dt(e.max,t,n,r,o)}function Ot(e,t){let{x:n,y:r}=t;Rt(e.x,n.translate,n.scale,n.originPoint),Rt(e.y,r.translate,r.scale,r.originPoint)}const Ft=.999999999999,Lt=1.0000000000001;function zt(e,t){e.min=e.min+t,e.max=e.max+t}function Wt(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Rt(e,t,n,Et(e.min,e.max,o),r)}function Vt(e,t){Wt(e.x,t.x,t.scaleX,t.scale,t.originX),Wt(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ut(e,t){return St(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Ht=new Set(["width","height","top","left","right","bottom",...dt]),Gt=(e,t,n)=>n>t?t:n<e?e:n,Xt={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Kt=qe(qe({},Xt),{},{transform:e=>Gt(0,1,e)}),Yt=qe(qe({},Xt),{},{default:1}),qt=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Zt=qt("deg"),Jt=qt("%"),Qt=qt("px"),$t=qt("vh"),en=qt("vw"),tn=(()=>qe(qe({},Jt),{},{parse:e=>Jt.parse(e)/100,transform:e=>Jt.transform(100*e)}))(),nn=e=>t=>t.test(e),rn=[Xt,Qt,Jt,Zt,en,$t,{test:e=>"auto"===e,parse:e=>e}],on=e=>rn.find(nn(e));let an=()=>{};const sn=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),ln=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function cn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[r,o]=function(e){const t=ln.exec(e);if(!t)return[,];const[,n,r,o]=t;return["--".concat(null!==n&&void 0!==n?n:r),o]}(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const e=a.trim();return sn(e)?parseFloat(e):e}return _t(o)?cn(o,t,n+1):o}const dn=e=>e===Xt||e===Qt,un=new Set(["x","y","z"]),hn=dt.filter(e=>!un.has(e));const pn={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:o="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(o)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:o="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(o)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return bt(n,"x")},y:(e,t)=>{let{transform:n}=t;return bt(n,"y")}};pn.translateX=pn.x,pn.translateY=pn.y;const fn=e=>e,mn={},gn=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],xn={value:null,addProjectionMetrics:null};function yn(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=gn.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,o=!1,a=!1;const i=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1},l=0;function c(t){i.has(t)&&(d.schedule(t),e()),l++,t(s)}const d={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&o?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),i.delete(e)},process:e=>{s=e,o?a=!0:(o=!0,[n,r]=[r,n],n.forEach(c),t&&xn.value&&xn.value.frameloop[t].push(l),l=0,n.clear(),o=!1,a&&(a=!1,d.process(e)))}};return d}(a,t?n:void 0),e),{}),{setup:s,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:p,postRender:f}=i,m=()=>{const a=mn.useManualTiming?o.timestamp:performance.now();n=!1,mn.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(a-o.timestamp,40),1)),o.timestamp=a,o.isProcessing=!0,s.process(o),l.process(o),c.process(o),d.process(o),u.process(o),h.process(o),p.process(o),f.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(m))},g=gn.reduce((t,a)=>{const s=i[a];return t[a]=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,o.isProcessing||e(m)),s.schedule(t,a,i)},t},{});return{schedule:g,cancel:e=>{for(let t=0;t<gn.length;t++)i[gn[t]].cancel(e)},state:o,steps:i}}const{schedule:vn,cancel:bn,state:wn,steps:kn}=yn("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:fn,!0),Cn=new Set;let jn=!1,_n=!1,Nn=!1;function Sn(){if(_n){const e=Array.from(Cn).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return hn.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{var n;let[r,o]=t;null===(n=e.getValue(r))||void 0===n||n.set(o)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}_n=!1,jn=!1,Cn.forEach(e=>e.complete(Nn)),Cn.clear()}function En(){Cn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(_n=!0)})}class An{constructor(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Cn.add(this),jn||(jn=!0,vn.read(En),vn.resolveKeyframes(Sn))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const o=null===r||void 0===r?void 0:r.get(),a=e[e.length-1];if(void 0!==o)e[0]=o;else if(n&&t){const r=n.readValue(t,a);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=a),r&&void 0===o&&r.set(e[0])}!function(e){for(let n=1;n<e.length;n++){var t;null!==(t=e[n])&&void 0!==t||(e[n]=e[n-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Cn.delete(this)}cancel(){"scheduled"===this.state&&(Cn.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Pn=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function Bn(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||Pn(e))}const In=e=>Math.round(1e5*e)/1e5,Tn=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const Mn=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,Dn=(e,t)=>n=>Boolean("string"===typeof n&&Mn.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),Rn=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[o,a,i,s]=r.match(Tn);return{[e]:parseFloat(o),[t]:parseFloat(a),[n]:parseFloat(i),alpha:void 0!==s?parseFloat(s):1}},On=qe(qe({},Xt),{},{transform:e=>Math.round((e=>Gt(0,255,e))(e))}),Fn={test:Dn("rgb","red"),parse:Rn("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:o=1}=e;return"rgba("+On.transform(t)+", "+On.transform(n)+", "+On.transform(r)+", "+In(Kt.transform(o))+")"}};const Ln={test:Dn("#"),parse:function(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}},transform:Fn.transform},zn={test:Dn("hsl","hue"),parse:Rn("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:o=1}=e;return"hsla("+Math.round(t)+", "+Jt.transform(In(n))+", "+Jt.transform(In(r))+", "+In(Kt.transform(o))+")"}},Wn={test:e=>Fn.test(e)||Ln.test(e)||zn.test(e),parse:e=>Fn.test(e)?Fn.parse(e):zn.test(e)?zn.parse(e):Ln.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?Fn.transform(e):zn.transform(e),getAnimatableNone:e=>{const t=Wn.parse(e);return t.alpha=0,Wn.transform(t)}},Vn=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const Un="number",Hn="color",Gn=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function Xn(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let a=0;const i=t.replace(Gn,e=>(Wn.test(e)?(r.color.push(a),o.push(Hn),n.push(Wn.parse(e))):e.startsWith("var(")?(r.var.push(a),o.push("var"),n.push(e)):(r.number.push(a),o.push(Un),n.push(parseFloat(e))),++a,"${}")).split("${}");return{values:n,split:i,indexes:r,types:o}}function Kn(e){return Xn(e).values}function Yn(e){const{split:t,types:n}=Xn(e),r=t.length;return e=>{let o="";for(let a=0;a<r;a++)if(o+=t[a],void 0!==e[a]){const t=n[a];o+=t===Un?In(e[a]):t===Hn?Wn.transform(e[a]):e[a]}return o}}const qn=e=>"number"===typeof e?0:Wn.test(e)?Wn.getAnimatableNone(e):e;const Zn={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(Tn))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Vn))||void 0===n?void 0:n.length)||0)>0},parse:Kn,createTransformer:Yn,getAnimatableNone:function(e){const t=Kn(e);return Yn(e)(t.map(qn))}},Jn=new Set(["brightness","contrast","saturate","opacity"]);function Qn(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Tn)||[];if(!r)return e;const o=n.replace(r,"");let a=Jn.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+o+")"}const $n=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,er=qe(qe({},Zn),{},{getAnimatableNone:e=>{const t=e.match($n);return t?t.map(Qn).join(" "):e}}),tr=qe(qe({},Xt),{},{transform:Math.round}),nr=qe(qe({borderWidth:Qt,borderTopWidth:Qt,borderRightWidth:Qt,borderBottomWidth:Qt,borderLeftWidth:Qt,borderRadius:Qt,radius:Qt,borderTopLeftRadius:Qt,borderTopRightRadius:Qt,borderBottomRightRadius:Qt,borderBottomLeftRadius:Qt,width:Qt,maxWidth:Qt,height:Qt,maxHeight:Qt,top:Qt,right:Qt,bottom:Qt,left:Qt,padding:Qt,paddingTop:Qt,paddingRight:Qt,paddingBottom:Qt,paddingLeft:Qt,margin:Qt,marginTop:Qt,marginRight:Qt,marginBottom:Qt,marginLeft:Qt,backgroundPositionX:Qt,backgroundPositionY:Qt},{rotate:Zt,rotateX:Zt,rotateY:Zt,rotateZ:Zt,scale:Yt,scaleX:Yt,scaleY:Yt,scaleZ:Yt,skew:Zt,skewX:Zt,skewY:Zt,distance:Qt,translateX:Qt,translateY:Qt,translateZ:Qt,x:Qt,y:Qt,z:Qt,perspective:Qt,transformPerspective:Qt,opacity:Kt,originX:tn,originY:tn,originZ:Qt}),{},{zIndex:tr,fillOpacity:Kt,strokeOpacity:Kt,numOctaves:tr}),rr=qe(qe({},nr),{},{color:Wn,backgroundColor:Wn,outlineColor:Wn,fill:Wn,stroke:Wn,borderColor:Wn,borderTopColor:Wn,borderRightColor:Wn,borderBottomColor:Wn,borderLeftColor:Wn,filter:er,WebkitFilter:er}),or=e=>rr[e];function ar(e,t){let n=or(e);return n!==er&&(n=Zn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const ir=new Set(["auto","none","0"]);class sr extends An{constructor(e,t,n,r,o){super(e,t,n,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let s=0;s<e.length;s++){let n=e[s];if("string"===typeof n&&(n=n.trim(),_t(n))){const r=cn(n,t.current);void 0!==r&&(e[s]=r),s===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Ht.has(n)||2!==e.length)return;const[r,o]=e,a=on(r),i=on(o);if(a!==i)if(dn(a)&&dn(i))for(let s=0;s<e.length;s++){const t=e[s];"string"===typeof t&&(e[s]=parseFloat(t))}else pn[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||Bn(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,o=0;for(;o<e.length&&!r;){const t=e[o];"string"===typeof t&&!ir.has(t)&&Xn(t).values.length&&(r=e[o]),o++}if(r&&n)for(const a of t)e[a]=ar(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pn[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,i=r[a];r[a]=pn[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach(e=>{let[n,r]=e;t.getValue(n).set(r)}),this.resolveNoneKeyframes()}}const lr=e=>Boolean(e&&e.getVelocity);function cr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}let dr;function ur(){dr=void 0}const hr={now:()=>(void 0===dr&&hr.set(wn.isProcessing||mn.useManualTiming?wn.timestamp:performance.now()),dr),set:e=>{dr=e,queueMicrotask(ur)}};function pr(e,t){-1===e.indexOf(t)&&e.push(t)}function fr(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class mr{constructor(){this.subscriptions=[]}add(e){return pr(this.subscriptions,e),()=>fr(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let o=0;o<r;o++){const r=this.subscriptions[o];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function gr(e,t){return t?e*(1e3/t):0}const xr={current:void 0};class yr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{const t=hr.now();var n;if((this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev)&&(null===(n=this.events.change)||void 0===n||n.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=hr.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new mr);const n=this.events[e].add(t);return"change"===e?()=>{n(),vn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return xr.current&&xr.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=hr.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return gr(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vr(e,t){return new yr(e,t)}const br=[...rn,Wn,Zn],{schedule:wr,cancel:kr}=yn(queueMicrotask,!1),Cr={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jr={};for(const n in Cr)jr[n]={isEnabled:e=>Cr[n].some(t=>!!e[t])};const _r=()=>({x:{min:0,max:0},y:{min:0,max:0}}),Nr={current:null},Sr={current:!1};const Er=new WeakMap;function Ar(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function Pr(e){return"string"===typeof e||Array.isArray(e)}const Br=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ir=["initial",...Br];function Tr(e){return Ar(e.animate)||Ir.some(t=>Pr(e[t]))}function Mr(e){return Boolean(Tr(e)||e.variants)}function Dr(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function Rr(e,t,n,r){if("function"===typeof t){const[o,a]=Dr(r);t=t(void 0!==n?n:e.custom,o,a)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[o,a]=Dr(r);t=t(void 0!==n?n:e.custom,o,a)}return t}const Or=["willChange"],Fr=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Lr{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:a,visualState:i}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=An,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=hr.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,vn.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget=qe({},l),this.initialValues=n.initial?qe({},l):{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=s,this.blockInitialAnimation=Boolean(a),this.isControllingVariants=Tr(n),this.isVariantNode=Mr(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const d=this.scrapeMotionValuesFromProps(n,{},this),{willChange:u}=d,h=cr(d,Or);for(const p in h){const e=h[p];void 0!==l[p]&&lr(e)&&e.set(l[p])}}mount(e){var t;this.current=e,Er.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Sr.current||function(){if(Sr.current=!0,Ue)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Nr.current=e.matches;e.addEventListener("change",t),t()}else Nr.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Nr.current),null===(t=this.parent)||void 0===t||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),bn(this.notifyUpdate),bn(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null===(e=this.parent)||void 0===e||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){var t;this.children.add(e),null!==(t=this.enteringChildren)&&void 0!==t||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=ut.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&vn.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in jr){const t=jr[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Fr.length;n++){const t=Fr[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const o=t[r],a=n[r];if(lr(o))e.addValue(r,o);else if(lr(a))e.addValue(r,vr(o,{owner:e}));else if(a!==o)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(o):t.hasAnimated||t.set(o)}else{const t=e.getStaticValue(r);e.addValue(r,vr(void 0!==t?t:o,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=vr(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var o;return void 0!==r&&null!==r&&("string"===typeof r&&(sn(r)||Pn(r))?r=parseFloat(r):(o=r,!br.find(nn(o))&&Zn.test(t)&&(r=ar(e,t))),this.setBaseTarget(e,lr(r)?r.get():r)),lr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){var r;const o=Rr(this.props,t,null===(r=this.presenceContext)||void 0===r?void 0:r.custom);o&&(n=o[e])}if(t&&void 0!==n)return n;const o=this.getBaseTargetFromProps(this.props,e);return void 0===o||lr(o)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:o}on(e,t){return this.events[e]||(this.events[e]=new mr),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}scheduleRenderMicrotask(){wr.render(this.render)}}class zr extends Lr{constructor(){super(...arguments),this.KeyframeResolver=sr}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;lr(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}}const Wr=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Vr={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ur=dt.length;function Hr(e,t,n){const{style:r,vars:o,transformOrigin:a}=e;let i=!1,s=!1;for(const l in t){const e=t[l];if(ut.has(l))i=!0;else if(Ct(l))o[l]=e;else{const t=Wr(e,nr[l]);l.startsWith("origin")?(s=!0,a[l]=t):r[l]=t}}if(t.transform||(i||n?r.transform=function(e,t,n){let r="",o=!0;for(let a=0;a<Ur;a++){const i=dt[a],s=e[i];if(void 0===s)continue;let l=!0;if(l="number"===typeof s?s===(i.startsWith("scale")?1:0):0===parseFloat(s),!l||n){const e=Wr(s,nr[i]);l||(o=!1,r+="".concat(Vr[i]||i,"(").concat(e,") ")),n&&(t[i]=e)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),s){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}function Gr(e,t,n,r){let{style:o,vars:a}=t;const i=e.style;let s;for(s in o)i[s]=o[s];for(s in null===r||void 0===r||r.applyProjectionStyles(i,n),a)i.setProperty(s,a[s])}const Xr={};function Kr(e,t){let{layout:n,layoutId:r}=t;return ut.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!Xr[e]||"opacity"===e)}function Yr(e,t,n){const{style:r}=e,o={};for(const i in r){var a;(lr(r[i])||t.style&&lr(t.style[i])||Kr(i,e)||void 0!==(null===n||void 0===n||null===(a=n.getValue(i))||void 0===a?void 0:a.liveStyle))&&(o[i]=r[i])}return o}class qr extends zr{constructor(){super(...arguments),this.type="html",this.renderInstance=Gr}readValueFromInstance(e,t){var n,r;if(ut.has(t))return null!==(n=this.projection)&&void 0!==n&&n.isProjecting?vt(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return bt(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),o=(Ct(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof o?o.trim():o}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Ut(e,n)}build(e,t,n){Hr(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Yr(e,t,n)}}const Zr=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Jr={offset:"stroke-dashoffset",array:"stroke-dasharray"},Qr={offset:"strokeDashoffset",array:"strokeDasharray"};const $r=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"];function eo(e,t,n,r,o){let{attrX:a,attrY:i,attrScale:s,pathLength:l,pathSpacing:c=1,pathOffset:d=0}=t;if(Hr(e,cr(t,$r),r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:h}=e;var p,f;(u.transform&&(h.transform=u.transform,delete u.transform),h.transform||u.transformOrigin)&&(h.transformOrigin=null!==(p=u.transformOrigin)&&void 0!==p?p:"50% 50%",delete u.transformOrigin);h.transform&&(h.transformBox=null!==(f=null===o||void 0===o?void 0:o.transformBox)&&void 0!==f?f:"fill-box",delete u.transformBox);void 0!==a&&(u.x=a),void 0!==i&&(u.y=i),void 0!==s&&(u.scale=s),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const a=o?Jr:Qr;e[a.offset]=Qt.transform(-r);const i=Qt.transform(t),s=Qt.transform(n);e[a.array]="".concat(i," ").concat(s)}(u,l,c,d,!1)}const to=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),no=e=>"string"===typeof e&&"svg"===e.toLowerCase();function ro(e,t,n){const r=Yr(e,t,n);for(const o in e)if(lr(e[o])||lr(t[o])){r[-1!==dt.indexOf(o)?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o]=e[o]}return r}class oo extends zr{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_r}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ut.has(t)){const e=or(t);return e&&e.default||0}return t=to.has(t)?t:Zr(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return ro(e,t,n)}build(e,t,n){eo(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){Gr(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(to.has(o)?o:Zr(o),t.attrs[o])}(e,t,0,r)}mount(e){this.isSVGTag=no(e.tagName),super.mount(e)}}const ao=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function io(e){return"string"===typeof e&&!e.includes("-")&&!!(ao.indexOf(e)>-1||/[A-Z]/.test(e))}const so=(e,n)=>io(e)?new oo(n):new qr(n,{allowProjection:e!==t.Fragment}),lo=(0,t.createContext)({strict:!1}),co=(0,t.createContext)({});function uo(e){const{initial:n,animate:r}=function(e,t){if(Tr(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Pr(t)?t:void 0,animate:Pr(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(co));return(0,t.useMemo)(()=>({initial:n,animate:r}),[ho(n),ho(r)])}function ho(e){return Array.isArray(e)?e.join(" "):e}const po=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fo(e,t,n){for(const r in t)lr(t[r])||Kr(r,n)||(e[r]=t[r])}function mo(e,n){const r={};return fo(r,e.style||{},e),Object.assign(r,function(e,n){let{transformTemplate:r}=e;return(0,t.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Hr(e,n,r),Object.assign({},e.vars,e.style)},[n])}(e,n)),r}function go(e,t){const n={},r=mo(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const xo=()=>qe(qe({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}});function yo(e,n,r,o){const a=(0,t.useMemo)(()=>{const t=xo();return eo(t,n,no(o),e.transformTemplate,e.style),qe(qe({},t.attrs),{},{style:qe({},t.style)})},[n]);if(e.style){const t={};fo(t,e.style,e),a.style=qe(qe({},t),a.style)}return a}const vo=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bo(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||vo.has(e)}let wo=e=>!bo(e);try{"function"===typeof(ko=require("@emotion/is-prop-valid").default)&&(wo=e=>e.startsWith("on")?!bo(e):ko(e))}catch(sN){}var ko;function Co(e,n,r,o,a){let{latestValues:i}=o,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const l=(io(e)?yo:go)(n,i,a,e),c=function(e,t,n){const r={};for(const o in e)"values"===o&&"object"===typeof e.values||(wo(o)||!0===n&&bo(o)||!t&&!bo(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}(n,"string"===typeof e,s),d=e!==t.Fragment?qe(qe(qe({},c),l),{},{ref:r}):{},{children:u}=n,h=(0,t.useMemo)(()=>lr(u)?u.get():u,[u]);return(0,t.createElement)(e,qe(qe({},d),{},{children:h}))}function jo(e){return lr(e)?e.get():e}const _o=["transitionEnd","transition"];function No(e,t,n,r){const o={},a=r(e,{});for(const h in a)o[h]=jo(a[h]);let{initial:i,animate:s}=e;const l=Tr(e),c=Mr(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===s&&(s=t.animate));let d=!!n&&!1===n.initial;d=d||!1===i;const u=d?s:i;if(u&&"boolean"!==typeof u&&!Ar(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const r=Rr(e,t[n]);if(r){const{transitionEnd:e,transition:t}=r,n=cr(r,_o);for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(o[r]=e)}for(const r in e)o[r]=e[r]}}}return o}const So=e=>(n,r)=>{const o=(0,t.useContext)(co),a=(0,t.useContext)(Ze),i=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:o,createRenderState:a}=e;return{latestValues:No(t,n,r,o),renderState:a()}}(e,n,o,a);return r?i():Ve(i)},Eo=So({scrapeMotionValuesFromProps:Yr,createRenderState:po}),Ao=So({scrapeMotionValuesFromProps:ro,createRenderState:xo});const Po=Symbol.for("motionComponentSymbol");function Bo(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Io(e,n,r){return(0,t.useCallback)(t=>{t&&e.onMount&&e.onMount(t),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):Bo(r)&&(r.current=t))},[n])}const To="data-"+Zr("framerAppearId"),Mo=(0,t.createContext)({});function Do(e,n,r,o,a){var i,s,l,c;const{visualElement:d}=(0,t.useContext)(co),u=(0,t.useContext)(lo),h=(0,t.useContext)(Ze),p=(0,t.useContext)($e).reducedMotion,f=(0,t.useRef)(null);o=o||u.renderer,!f.current&&o&&(f.current=o(e,{visualState:n,parent:d,props:r,presenceContext:h,blockInitialAnimation:!!h&&!1===h.initial,reducedMotionConfig:p}));const m=f.current,g=(0,t.useContext)(Mo);!m||m.projection||!a||"html"!==m.type&&"svg"!==m.type||function(e,t,n,r){const{layoutId:o,layout:a,drag:i,dragConstraints:s,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Ro(e.parent)),e.projection.setOptions({layoutId:o,layout:a,alwaysMeasureLayout:Boolean(i)||s&&Bo(s),visualElement:e,animationType:"string"===typeof a?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}(f.current,r,a,g);const x=(0,t.useRef)(!1);(0,t.useInsertionEffect)(()=>{m&&x.current&&m.update(r,h)});const y=r[To],v=(0,t.useRef)(Boolean(y)&&!(null!==(i=(s=window).MotionHandoffIsComplete)&&void 0!==i&&i.call(s,y))&&(null===(l=(c=window).MotionHasOptimisedAnimation)||void 0===l?void 0:l.call(c,y)));return He(()=>{m&&(x.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),v.current&&m.animationState&&m.animationState.animateChanges())}),(0,t.useEffect)(()=>{m&&(!v.current&&m.animationState&&m.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,y)}),v.current=!1),m.enteringChildren=void 0)}),m}function Ro(e){if(e)return!1!==e.options.allowProjection?e.projection:Ro(e.parent)}function Oo(e){var n,r;let{forwardMotionProps:o=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;a&&function(e){for(const t in e)jr[t]=qe(qe({},jr[t]),e[t])}(a);const s=io(e)?Ao:Eo;function l(n,r){let a;const l=qe(qe(qe({},(0,t.useContext)($e)),n),{},{layoutId:Fo(n)}),{isStatic:c}=l,d=uo(n),u=s(n,c);if(!c&&Ue){!function(){(0,t.useContext)(lo).strict;0}();const n=function(e){const{drag:t,layout:n}=jr;if(!t&&!n)return{};const r=qe(qe({},t),n);return{MeasureLayout:null!==t&&void 0!==t&&t.isEnabled(e)||null!==n&&void 0!==n&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);a=n.MeasureLayout,d.visualElement=Do(e,u,l,i,n.ProjectionNode)}return(0,Fe.jsxs)(co.Provider,{value:d,children:[a&&d.visualElement?(0,Fe.jsx)(a,qe({visualElement:d.visualElement},l)):null,Co(e,n,Io(u,d.visualElement,r),u,c,o)]})}l.displayName="motion.".concat("string"===typeof e?e:"create(".concat(null!==(n=null!==(r=e.displayName)&&void 0!==r?r:e.name)&&void 0!==n?n:"",")"));const c=(0,t.forwardRef)(l);return c[Po]=e,c}function Fo(e){let{layoutId:n}=e;const r=(0,t.useContext)(We).id;return r&&void 0!==n?r+"-"+n:n}function Lo(e,t){if("undefined"===typeof Proxy)return Oo;const n=new Map,r=(n,r)=>Oo(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(o,a)=>"create"===a?r:(n.has(a)||n.set(a,Oo(a,void 0,e,t)),n.get(a))})}function zo(e,t,n){const r=e.getProps();return Rr(r,t,void 0!==n?n:r.custom,e)}function Wo(e,t){var n,r;return null!==(n=null!==(r=null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null===e||void 0===e?void 0:e.default)&&void 0!==n?n:e}const Vo=e=>Array.isArray(e),Uo=["transitionEnd","transition"];function Ho(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,vr(n))}function Go(e){return Vo(e)?e[e.length-1]||0:e}function Xo(e,t){const n=e.getValue("willChange");if(r=n,Boolean(lr(r)&&r.add))return n.add(t);if(!n&&mn.WillChange){const n=new mn.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function Ko(e){return e.props[To]}function Yo(e){e.duration=0,e.type="keyframes"}const qo=(e,t)=>n=>t(e(n)),Zo=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(qo)},Jo=e=>1e3*e,Qo=e=>e/1e3,$o={layout:0,mainThread:0,waapi:0};function ea(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ta(e,t){return n=>n>0?t:e}const na=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},ra=[Ln,Fn,zn];function oa(e){const t=(n=e,ra.find(e=>e.test(n)));var n;if(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),!Boolean(t))return!1;let r=t.parse(e);return t===zn&&(r=function(e){let{hue:t,saturation:n,lightness:r,alpha:o}=e;t/=360,n/=100,r/=100;let a=0,i=0,s=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,o=2*r-e;a=ea(o,e,t+1/3),i=ea(o,e,t),s=ea(o,e,t-1/3)}else a=i=s=r;return{red:Math.round(255*a),green:Math.round(255*i),blue:Math.round(255*s),alpha:o}}(r)),r}const aa=(e,t)=>{const n=oa(e),r=oa(t);if(!n||!r)return ta(e,t);const o=qe({},n);return e=>(o.red=na(n.red,r.red,e),o.green=na(n.green,r.green,e),o.blue=na(n.blue,r.blue,e),o.alpha=Et(n.alpha,r.alpha,e),Fn.transform(o))},ia=new Set(["none","hidden"]);function sa(e,t){return n=>Et(e,t,n)}function la(e){return"number"===typeof e?sa:"string"===typeof e?_t(e)?ta:Wn.test(e)?aa:ua:Array.isArray(e)?ca:"object"===typeof e?Wn.test(e)?aa:da:ta}function ca(e,t){const n=[...e],r=n.length,o=e.map((e,n)=>la(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=o[t](e);return n}}function da(e,t){const n=qe(qe({},e),t),r={};for(const o in n)void 0!==e[o]&&void 0!==t[o]&&(r[o]=la(e[o])(e[o],t[o]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const ua=(e,t)=>{const n=Zn.createTransformer(t),r=Xn(e),o=Xn(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?ia.has(e)&&!o.values.length||ia.has(t)&&!r.values.length?function(e,t){return ia.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Zo(ca(function(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){var o;const i=t.types[a],s=e.indexes[i][r[i]],l=null!==(o=e.values[s])&&void 0!==o?o:0;n[a]=l,r[i]++}return n}(r,o),o.values),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),ta(e,t))};function ha(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return Et(e,t,n);return la(e)(e,t)}const pa=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return vn.update(t,e)},stop:()=>bn(t),now:()=>wn.isProcessing?wn.timestamp:hr.now()}},fa=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const o=Math.max(Math.round(t/n),2);for(let a=0;a<o;a++)r+=Math.round(1e4*e(a/(o-1)))/1e4+", ";return"linear(".concat(r.substring(0,r.length-2),")")},ma=2e4;function ga(e){let t=0;let n=e.next(t);for(;!n.done&&t<ma;)t+=50,n=e.next(t);return t>=ma?1/0:t}function xa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)(qe(qe({},e),{},{keyframes:[0,t]})),r=Math.min(ga(n),ma);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:Qo(r)}}function ya(e,t,n){const r=Math.max(t-5,0);return gr(n-e(r),t-r)}const va={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ba=.001;function wa(e){let t,n,{duration:r=va.duration,bounce:o=va.bounce,velocity:a=va.velocity,mass:i=va.mass}=e;Jo(va.maxDuration);let s=1-o;s=Gt(va.minDamping,va.maxDamping,s),r=Gt(va.minDuration,va.maxDuration,Qo(r)),s<1?(t=e=>{const t=e*s,n=t*r,o=t-a,i=Ca(e,s),l=Math.exp(-n);return ba-o/i*l},n=e=>{const n=e*s*r,o=n*a+a,i=Math.pow(s,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=Ca(Math.pow(e,2),s);return(-t(e)+ba>0?-1:1)*((o-i)*l)/c}):(t=e=>Math.exp(-e*r)*((e-a)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(a-e)));const l=function(e,t,n){let r=n;for(let o=1;o<ka;o++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=Jo(r),isNaN(l))return{stiffness:va.stiffness,damping:va.damping,duration:r};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*s*Math.sqrt(i*e),duration:r}}}const ka=12;function Ca(e,t){return e*Math.sqrt(1-t*t)}const ja=["duration","bounce"],_a=["stiffness","damping","mass"];function Na(e,t){return t.some(t=>void 0!==e[t])}function Sa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:va.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:va.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],s={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:p}=function(e){let t=qe({velocity:va.velocity,stiffness:va.stiffness,damping:va.damping,mass:va.mass,isResolvedFromDuration:!1},e);if(!Na(e,_a)&&Na(e,ja))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),o=r*r,a=2*Gt(.05,1,1-(e.bounce||0))*Math.sqrt(o);t=qe(qe({},t),{},{mass:va.mass,stiffness:o,damping:a})}else{const n=wa(e);t=qe(qe(qe({},t),n),{},{mass:va.mass}),t.isResolvedFromDuration=!0}return t}(qe(qe({},n),{},{velocity:-Qo(n.velocity||0)})),f=h||0,m=c/(2*Math.sqrt(l*d)),g=i-a,x=Qo(Math.sqrt(l/d)),y=Math.abs(g)<5;let v;if(r||(r=y?va.restSpeed.granular:va.restSpeed.default),o||(o=y?va.restDelta.granular:va.restDelta.default),m<1){const e=Ca(x,m);v=t=>{const n=Math.exp(-m*x*t);return i-n*((f+m*x*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)v=e=>i-Math.exp(-x*e)*(g+(f+x*g)*e);else{const e=x*Math.sqrt(m*m-1);v=t=>{const n=Math.exp(-m*x*t),r=Math.min(e*t,300);return i-n*((f+m*x*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const b={calculatedDuration:p&&u||null,next:e=>{const t=v(e);if(p)s.done=e>=u;else{let n=0===e?f:0;m<1&&(n=0===e?Jo(f):ya(v,e,t));const a=Math.abs(n)<=r,l=Math.abs(i-t)<=o;s.done=a&&l}return s.value=s.done?i:t,s},toString:()=>{const e=Math.min(ga(b),ma),t=fa(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function Ea(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:o=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:s,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],p={done:!1,value:h},f=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=h+m,x=void 0===s?g:s(g);x!==g&&(m=x-h);const y=e=>-m*Math.exp(-e/o),v=e=>x+y(e),b=e=>{const t=y(e),n=v(e);p.done=Math.abs(t)<=d,p.value=p.done?x:n};let w,k;const C=e=>{var t;(t=p.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(w=e,k=Sa({keyframes:[p.value,f(p.value)],velocity:ya(v,e,p.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return C(0),{calculatedDuration:null,next:e=>{let t=!1;return k||void 0!==w||(t=!0,b(e),C(e)),void 0!==w&&e>=w?k.next(e-w):(!t&&b(e),p)}}}Sa.applyToOptions=e=>{const t=xa(e,100,Sa);return e.ease=t.ease,e.duration=Jo(t.duration),e.type="keyframes",e};const Aa=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Pa(e,t,n,r){if(e===t&&n===r)return fn;const o=t=>function(e,t,n,r,o){let a,i,s=0;do{i=t+(n-t)/2,a=Aa(i,r,o)-e,a>0?n=i:t=i}while(Math.abs(a)>1e-7&&++s<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:Aa(o(e),t,r)}const Ba=Pa(.42,0,1,1),Ia=Pa(0,0,.58,1),Ta=Pa(.42,0,.58,1),Ma=e=>Array.isArray(e)&&"number"!==typeof e[0],Da=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ra=e=>t=>1-e(1-t),Oa=Pa(.33,1.53,.69,.99),Fa=Ra(Oa),La=Da(Fa),za=e=>(e*=2)<1?.5*Fa(e):.5*(2-Math.pow(2,-10*(e-1))),Wa=e=>1-Math.sin(Math.acos(e)),Va=Ra(Wa),Ua=Da(Wa),Ha=e=>Array.isArray(e)&&"number"===typeof e[0],Ga={linear:fn,easeIn:Ba,easeInOut:Ta,easeOut:Ia,circIn:Wa,circInOut:Ua,circOut:Va,backIn:Fa,backInOut:La,backOut:Oa,anticipate:za},Xa=e=>{if(Ha(e)){e.length;const[t,n,r,o]=e;return Pa(t,n,r,o)}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),Ga[e]):e},Ka=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function Ya(e,t){let{clamp:n=!0,ease:r,mixer:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=function(e,t,n){const r=[],o=n||mn.mix||ha,a=e.length-1;for(let i=0;i<a;i++){let n=o(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||fn:t;n=Zo(e,n)}r.push(n)}return r}(t,r,o),l=s.length,c=n=>{if(i&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const o=Ka(e[r],e[r+1],n);return s[r](o)};return n?t=>c(Gt(e[0],e[a-1],t)):c}function qa(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=Ka(0,t,r);e.push(Et(n,1,o))}}function Za(e){const t=[0];return qa(t,e.length-1),t}function Ja(e){let{duration:t=300,keyframes:n,times:r,ease:o="easeInOut"}=e;const a=Ma(o)?o.map(Xa):Xa(o),i={done:!1,value:n[0]},s=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:Za(n),t),l=Ya(s,n,{ease:Array.isArray(a)?a:(c=n,d=a,c.map(()=>d||Ta).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}const Qa=e=>null!==e;function $a(e,t,n){let{repeat:r,repeatType:o="loop"}=t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=e.filter(Qa),s=a<0||r&&"loop"!==o&&r%2===1?0:i.length-1;return s&&void 0!==n?n:i[s]}const ei={decay:Ea,inertia:Ea,tween:Ja,keyframes:Ja,spring:Sa};function ti(e){"string"===typeof e.type&&(e.type=ei[e.type])}class ni{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const ri=e=>e/100;class oi extends ni{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==hr.now()&&this.tick(hr.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},$o.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;ti(e);const{type:t=Ja,repeat:n=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=e;let{keyframes:i}=e;const s=t||Ja;s!==Ja&&"number"!==typeof i[0]&&(this.mixKeyframes=Zo(ri,ha(i[0],i[1])),i=[0,100]);const l=s(qe(qe({},e),{},{keyframes:i}));"mirror"===o&&(this.mirroredGenerator=s(qe(qe({},e),{},{keyframes:[...i].reverse(),velocity:-a}))),null===l.calculatedDuration&&(l.calculatedDuration=ga(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:s}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:p,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let y=this.currentTime,v=n;if(d){const e=Math.min(this.currentTime,r)/i;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(n=1-n,h&&(n-=h/i)):"mirror"===u&&(v=a)),y=Gt(0,1,n)*i}const b=x?{done:!1,value:c[0]}:v.next(y);o&&(b.value=o(b.value));let{done:w}=b;x||null===s||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&p!==Ea&&(b.value=$a(c,this.options,m,this.speed)),f&&f(b.value),k&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return Qo(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qo(e)}get time(){return Qo(this.currentTime)}set time(e){var t;e=Jo(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(hr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Qo(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=pa,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const o=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=o):null!==this.holdTime?this.startTime=o-this.holdTime:this.startTime||(this.startTime=null!==r&&void 0!==r?r:o),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hr.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,$o.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}function ai(e){let t;return()=>(void 0===t&&(t=e()),t)}const ii=ai(()=>void 0!==window.ScrollTimeline),si={};function li(e,t){const n=ai(e);return()=>{var e;return null!==(e=si[t])&&void 0!==e?e:n()}}const ci=li(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(iN){return!1}return!0},"linearEasing"),di=e=>{let[t,n,r,o]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(o,")")},ui={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:di([0,.65,.55,1]),circOut:di([.55,0,1,.45]),backIn:di([.31,.01,.66,-.59]),backOut:di([.33,1.53,.69,.99])};function hi(e,t){return e?"function"===typeof e?ci()?fa(e,t):"ease-out":Ha(e)?di(e):Array.isArray(e)?e.map(e=>hi(e,t)||ui.easeOut):ui[e]:void 0}function pi(e,t,n){let{delay:r=0,duration:o=300,repeat:a=0,repeatType:i="loop",ease:s="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d={[t]:n};l&&(d.offset=l);const u=hi(s,o);Array.isArray(u)&&(d.easing=u),xn.value&&$o.waapi++;const h={delay:r,duration:o,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};c&&(h.pseudoElement=c);const p=e.animate(d,h);return xn.value&&p.finished.finally(()=>{$o.waapi--}),p}function fi(e){return"function"===typeof e&&"applyToOptions"in e}const mi=["type"];class gi extends ni{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:i,onComplete:s}=e;this.isPseudoElement=Boolean(o),this.allowFlatten=a,this.options=e,e.type;const l=function(e){let{type:t}=e,n=cr(e,mi);return fi(t)&&ci()?t.applyToOptions(n):(null!==(r=n.duration)&&void 0!==r||(n.duration=300),null!==(o=n.ease)&&void 0!==o||(n.ease="easeOut"),n);var r,o}(e);this.animation=pi(t,n,r,l,o),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const e=$a(r,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null===s||void 0===s||s(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(iN){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const n=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return Qo(Number(n))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qo(e)}get time(){return Qo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Jo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;var r;this.allowFlatten&&(null===(r=this.animation.effect)||void 0===r||r.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&ii()?(this.animation.timeline=t,fn):n(this)}}const xi={anticipate:za,backInOut:La,circInOut:Ua};function yi(e){"string"===typeof e.ease&&e.ease in xi&&(e.ease=xi[e.ease])}const vi=["motionValue","onUpdate","onComplete","element"];class bi extends gi{constructor(e){yi(e),ti(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const n=this.options,{motionValue:r,onUpdate:o,onComplete:a,element:i}=n,s=cr(n,vi);if(!r)return;if(void 0!==e)return void r.set(e);const l=new oi(qe(qe({},s),{},{autoplay:!1})),c=Jo(null!==(t=this.finishedTime)&&void 0!==t?t:this.time);r.setWithVelocity(l.sample(c-10).value,l.sample(c).value,10),l.stop()}}const wi=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Zn.test(e)&&"0"!==e||e.startsWith("url(")));const ki=new Set(["opacity","clipPath","filter","transform"]),Ci=ai(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const ji=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class _i extends ni{constructor(e){var t;let{autoplay:n=!0,delay:r=0,type:o="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:s="loop",keyframes:l,name:c,motionValue:d,element:u}=e,h=cr(e,ji);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=hr.now();const p=qe({autoplay:n,delay:r,type:o,repeat:a,repeatDelay:i,repeatType:s,name:c,motionValue:d,element:u},h),f=(null===u||void 0===u?void 0:u.KeyframeResolver)||An;this.keyframeResolver=new f(l,(e,t,n)=>this.onKeyframesResolved(e,t,p,!n),c,d,u),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:o,type:a,velocity:i,delay:s,isHandoff:l,onUpdate:c}=n;this.resolvedAt=hr.now(),function(e,t,n,r){const o=e[0];if(null===o)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=wi(o,t),s=wi(a,t);return"You are trying to animate ".concat(t,' from "').concat(o,'" to "').concat(a,'". "').concat(i?a:o,'" is not an animatable value.'),!(!i||!s)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||fi(n))&&r)}(e,o,a,i)||(!mn.instantAnimations&&s||null===c||void 0===c||c($a(e,n,t)),e[0]=e[e.length-1],Yo(n),n.repeat=0);const d=qe(qe({startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},n),{},{keyframes:e}),u=!l&&function(e){var t;const{motionValue:n,name:r,repeatDelay:o,repeatType:a,damping:i,type:s}=e;if(!((null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Ci()&&r&&ki.has(r)&&("transform"!==r||!c)&&!l&&!o&&"mirror"!==a&&0!==i&&"inertia"!==s}(d)?new bi(qe(qe({},d),{},{element:d.motionValue.owner.current})):new oi(d);u.finished.then(()=>this.notifyFinished()).catch(fn),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),Nn=!0,En(),Sn(),Nn=!1);return this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const Ni=e=>null!==e;const Si={type:"spring",stiffness:500,damping:25,restSpeed:10},Ei={type:"keyframes",duration:.8},Ai={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Pi=(e,t)=>{let{keyframes:n}=t;return n.length>2?Ei:ut.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Si:Ai},Bi=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const Ii=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return i=>{const s=Wo(r,e)||{},l=s.delay||r.delay||0;let{elapsed:c=0}=r;c-=Jo(l);const d=qe(qe({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},s),{},{delay:-c,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{i(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:a?void 0:o});(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:o,staggerDirection:a,repeat:i,repeatType:s,repeatDelay:l,from:c,elapsed:d}=e,u=cr(e,Bi);return!!Object.keys(u).length})(s)||Object.assign(d,Pi(e,d)),d.duration&&(d.duration=Jo(d.duration)),d.repeatDelay&&(d.repeatDelay=Jo(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(Yo(d),0===d.delay&&(u=!0)),(mn.instantAnimations||mn.skipAnimations)&&(u=!0,Yo(d),d.delay=0),d.allowFlatten=!s.type&&!s.ease,u&&!a&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:o="loop"}=t;const a=e.filter(Ni),i=r&&"loop"!==o&&r%2===1?0:a.length-1;return i&&void 0!==n?n:a[i]}(d.keyframes,s);if(void 0!==e)return void vn.update(()=>{d.onUpdate(e),d.onComplete()})}return s.isSync?new oi(d):new _i(d)}},Ti=["transition","transitionEnd"];function Mi(e,t){let{protectedKeys:n,needsAnimating:r}=e;const o=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,o}function Di(e,t){let{delay:n=0,transitionOverride:r,type:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:a=e.getDefaultTransition(),transitionEnd:i}=t,s=cr(t,Ti);r&&(a=r);const l=[],c=o&&e.animationState&&e.animationState.getState()[o];for(const u in s){var d;const t=e.getValue(u,null!==(d=e.latestValues[u])&&void 0!==d?d:null),r=s[u];if(void 0===r||c&&Mi(c,u))continue;const o=qe({delay:n},Wo(a||{},u)),i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(r)&&r===i&&!o.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){const t=Ko(e);if(t){const e=window.MotionHandoffAnimation(t,u,vn);null!==e&&(o.startTime=e,h=!0)}}Xo(e,u),t.start(Ii(u,t,r,e.shouldReduceMotion&&Ht.has(u)?{type:!1}:o,e,h));const p=t.animation;p&&l.push(p)}return i&&Promise.all(l).then(()=>{vn.update(()=>{i&&function(e,t){let n=zo(e,t)||{},{transitionEnd:r={},transition:o={}}=n,a=cr(n,Uo);a=qe(qe({},a),r);for(const i in a)Ho(e,i,Go(a[i]))}(e,i)})}),l}function Ri(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),i=e.size,s=(i-1)*r;return"function"===typeof n?n(a,i):1===o?a*r:s-a*r}function Oi(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=zo(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=o||{};r.transitionOverride&&(a=r.transitionOverride);const i=o?()=>Promise.all(Di(e,o,r)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:o=0,staggerChildren:i,staggerDirection:s}=a;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0;const s=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),s.push(Oi(l,t,qe(qe({},i),{},{delay:n+("function"===typeof r?0:r)+Ri(e.variantChildren,l,r,o,a)})).then(()=>l.notify("AnimationComplete",t)));return Promise.all(s)}(e,t,n,o,i,s,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,t]="beforeChildren"===l?[i,s]:[s,i];return e().then(()=>t())}return Promise.all([i(),s(r.delay)])}function Fi(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Li=Ir.length;function zi(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&zi(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Li;n++){const r=Ir[n],o=e.props[r];(Pr(o)||!1===o)&&(t[r]=o)}return t}const Wi=["transition","transitionEnd"],Vi=[...Br].reverse(),Ui=Br.length;function Hi(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const o=t.map(t=>Oi(e,t,r));n=Promise.all(o)}else if("string"===typeof t)n=Oi(e,t,r);else{const o="function"===typeof t?zo(e,t,r.custom):t;n=Promise.all(Di(e,o,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,r)}))}function Gi(e){let t=Hi(e),n=Yi(),r=!0;const o=t=>(n,r)=>{var o;const a=zo(e,r,"exit"===t?null===(o=e.presenceContext)||void 0===o?void 0:o.custom:void 0);if(a){const{transition:e,transitionEnd:t}=a,r=cr(a,Wi);n=qe(qe(qe({},n),r),t)}return n};function a(a){const{props:i}=e,s=zi(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<Ui;t++){const h=Vi[t],p=n[h],f=void 0!==i[h]?i[h]:s[h],m=Pr(f),g=h===a?p.isActive:null;!1===g&&(u=t);let x=f===s[h]&&f!==i[h]&&m;if(x&&r&&e.manuallyAnimateOnMount&&(x=!1),p.protectedKeys=qe({},d),!p.isActive&&null===g||!f&&!p.prevProp||Ar(f)||"boolean"===typeof f)continue;const y=Xi(p.prevProp,f);let v=y||h===a&&p.isActive&&!x&&m||t>u&&m,b=!1;const w=Array.isArray(f)?f:[f];let k=w.reduce(o(h),{});!1===g&&(k={});const{prevResolvedValues:C={}}=p,j=qe(qe({},C),k),_=t=>{v=!0,c.has(t)&&(b=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in j){const t=k[e],n=C[e];if(d.hasOwnProperty(e))continue;let r=!1;r=Vo(t)&&Vo(n)?!Fi(t,n):t!==n,r?void 0!==t&&null!==t?_(e):c.add(e):void 0!==t&&c.has(e)?_(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=k,p.isActive&&(d=qe(qe({},d),k)),r&&e.blockInitialAnimation&&(v=!1);const N=x&&y;v&&(!N||b)&&l.push(...w.map(t=>{const n={type:h};if("string"===typeof t&&r&&!N&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,o=zo(r,t);if(r.enteringChildren&&o){const{delayChildren:t}=o.transition||{};n.delay=Ri(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!==typeof i.initial){const n=zo(e,Array.isArray(i.initial)?i.initial[0]:i.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const r=e.getBaseTarget(n),o=e.getValue(n);o&&(o.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null}),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,r){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const i=a(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Yi()}}}function Xi(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Fi(t,e)}function Ki(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Yi(){return{animate:Ki(!0),whileInView:Ki(),whileHover:Ki(),whileTap:Ki(),whileDrag:Ki(),whileFocus:Ki(),exit:Ki()}}class qi{constructor(e){this.isMounted=!1,this.node=e}update(){}}let Zi=0;const Ji={animation:{Feature:class extends qi{constructor(e){super(e),e.animationState||(e.animationState=Gi(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ar(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends qi{constructor(){super(...arguments),this.id=Zi++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},Qi={x:!1,y:!1};function $i(){return Qi.x||Qi.y}function es(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const ts=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function ns(e){return{point:{x:e.pageX,y:e.pageY}}}function rs(e,t,n,r){return es(e,t,(e=>t=>ts(t)&&e(t,ns(t)))(n),r)}function os(e){return e.max-e.min}function as(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Et(t.min,t.max,e.origin),e.scale=os(n)/os(t),e.translate=Et(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function is(e,t,n,r){as(e.x,t.x,n.x,r?r.originX:void 0),as(e.y,t.y,n.y,r?r.originY:void 0)}function ss(e,t,n){e.min=n.min+t.min,e.max=e.min+os(t)}function ls(e,t,n){e.min=t.min-n.min,e.max=e.min+os(t)}function cs(e,t,n){ls(e.x,t.x,n.x),ls(e.y,t.y,n.y)}function ds(e){return[e("x"),e("y")]}const us=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},hs=(e,t)=>Math.abs(e-t);class ps{constructor(e,t){let{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=gs(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=hs(e.x,t.x),r=hs(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:o}=wn;this.history.push(qe(qe({},r),{},{timestamp:o}));const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=fs(t,this.transformPagePoint),vn.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:o}=this.handlers;if(this.dragSnapToOrigin&&o&&o(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=gs("pointercancel"===e.type?this.lastMoveEventInfo:fs(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!ts(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=r||window;const i=fs(ns(e),this.transformPagePoint),{point:s}=i,{timestamp:l}=wn;this.history=[qe(qe({},s),{},{timestamp:l})];const{onSessionStart:c}=t;c&&c(e,gs(i,this.history)),this.removeListeners=Zo(rs(this.contextWindow,"pointermove",this.handlePointerMove),rs(this.contextWindow,"pointerup",this.handlePointerUp),rs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),bn(this.updatePoint)}}function fs(e,t){return t?{point:t(e.point)}:e}function ms(e,t){return{x:e.x-t.x,y:e.y-t.y}}function gs(e,t){let{point:n}=e;return{point:n,delta:ms(n,ys(t)),offset:ms(n,xs(t)),velocity:vs(t,.1)}}function xs(e){return e[0]}function ys(e){return e[e.length-1]}function vs(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=ys(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>Jo(t)));)n--;if(!r)return{x:0,y:0};const a=Qo(o.timestamp-r.timestamp);if(0===a)return{x:0,y:0};const i={x:(o.x-r.x)/a,y:(o.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function bs(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function ws(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const ks=.35;function Cs(e,t,n){return{min:js(e,t),max:js(e,n)}}function js(e,t){return"number"===typeof e?e:e[t]||0}const _s=new WeakMap;class Ns{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:o}=this.getProps();this.panSession=new ps(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ns(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:o}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=n)||"y"===a?Qi[a]?null:(Qi[a]=!0,()=>{Qi[a]=!1}):Qi.x||Qi.y?null:(Qi.x=Qi.y=!0,()=>{Qi.x=Qi.y=!1}),!this.openDragLock))return;var a;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ds(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Jt.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=os(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),o&&vn.postRender(()=>o(e,t)),Xo(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:o,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&o&&o(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>ds(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:o,distanceThreshold:n,contextWindow:us(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!r||!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&vn.postRender(()=>i(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Ss(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){let{min:r,max:o}=t;return void 0!==r&&e<r?e=n?Et(r,e,n.min):Math.max(e,r):void 0!==o&&e>o&&(e=n?Et(o,e,n.max):Math.min(e,o)),e}(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,o=this.constraints;t&&Bo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:o,right:a}=t;return{x:bs(e.x,r,a),y:bs(e.y,n,o)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ks;return!1===e?e=0:!0===e&&(e=ks),{x:Cs(e,"left","right"),y:Cs(e,"top","bottom")}}(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ds(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Bo(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=function(e,t,n){const r=Ut(e,n),{scroll:o}=t;return o&&(zt(r.x,o.offset.x),zt(r.y,o.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:ws(e.x,t.x),y:ws(e.y,t.y)}}(r.layout.layoutBox,o);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=St(e))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),s=this.constraints||{},l=ds(i=>{if(!Ss(i,t,this.currentDirection))return;let l=s&&s[i]||{};a&&(l={min:0,max:0});const c=r?200:1e6,d=r?40:1e7,u=qe(qe({type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},o),l);return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Xo(this.visualElement,e),n.start(Ii(e,n,0,t,this.visualElement,!1))}stopAnimation(){ds(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ds(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ds(t=>{const{drag:n}=this.getProps();if(!Ss(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:a}=r.layout.layoutBox[t];o.set(e[t]-Et(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Bo(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};ds(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=os(e),o=os(t);return o>r?n=Ka(t.min,t.max-r,e.min):r>o&&(n=Ka(e.min,e.max-o,t.min)),Gt(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ds(t=>{if(!Ss(t,e,null))return;const n=this.getAxisMotionValue(t),{min:o,max:a}=this.constraints[t];n.set(Et(o,a,r[t]))})}addListeners(){if(!this.visualElement.current)return;_s.set(this.visualElement,this);const e=rs(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Bo(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),vn.read(t);const o=es(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(ds(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{o(),e(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=ks,dragMomentum:i=!0}=e;return qe(qe({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:i})}}function Ss(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Es=e=>(t,n)=>{e&&vn.postRender(()=>e(t,n))};const As={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ps(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Bs={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Qt.test(e))return e;e=parseFloat(e)}const n=Ps(e,t.target.x),r=Ps(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Is={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const o=e,a=Zn.parse(e);if(a.length>5)return o;const i=Zn.createTransformer(e),s="number"!==typeof a[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;a[0+s]/=l,a[1+s]/=c;const d=Et(l,c,.5);return"number"===typeof a[2+s]&&(a[2+s]/=d),"number"===typeof a[3+s]&&(a[3+s]/=d),i(a)}};let Ts=!1;class Ms extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:o}=e;!function(e){for(const t in e)Xr[t]=e[t],Ct(t)&&(Xr[t].isCSSVariable=!0)}(Rs),o&&(t.group&&t.group.add(o),n&&n.register&&r&&n.register(o),Ts&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions(qe(qe({},o.options),{},{onExitComplete:()=>this.safeToRemove()}))),As.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:o}=this.props,{projection:a}=n;return a?(a.isPresent=o,Ts=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||vn.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wr.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;Ts=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ds(e){const[n,r]=it(),o=(0,t.useContext)(We);return(0,Fe.jsx)(Ms,qe(qe({},e),{},{layoutGroup:o,switchLayoutGroup:(0,t.useContext)(Mo),isPresent:n,safeToRemove:r}))}const Rs={borderRadius:qe(qe({},Bs),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Bs,borderTopRightRadius:Bs,borderBottomLeftRadius:Bs,borderBottomRightRadius:Bs,boxShadow:Is};function Os(e){return Je(e)&&"ownerSVGElement"in e}function Fs(e){return Os(e)&&"svg"===e.tagName}function Ls(e,t,n){const r=lr(e)?e:vr(e);return r.start(Ii("",r,t,n)),r.animation}const zs=(e,t)=>e.depth-t.depth;class Ws{constructor(){this.children=[],this.isDirty=!1}add(e){pr(this.children,e),this.isDirty=!0}remove(e){fr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zs),this.isDirty=!1,this.children.forEach(e)}}function Vs(e,t){const n=hr.now(),r=o=>{let{timestamp:a}=o;const i=a-n;i>=t&&(bn(r),e(i-t))};return vn.setup(r,!0),()=>bn(r)}const Us=["TopLeft","TopRight","BottomLeft","BottomRight"],Hs=Us.length,Gs=e=>"string"===typeof e?parseFloat(e):e,Xs=e=>"number"===typeof e||Qt.test(e);function Ks(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Ys=Zs(0,.5,Va),qs=Zs(.5,.95,fn);function Zs(e,t,n){return r=>r<e?0:r>t?1:n(Ka(e,t,r))}function Js(e,t){e.min=t.min,e.max=t.max}function Qs(e,t){Js(e.x,t.x),Js(e.y,t.y)}function $s(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function el(e,t,n,r,o){return e=Mt(e-=t,1/n,r),void 0!==o&&(e=Mt(e,1/o,r)),e}function tl(e,t,n,r,o){let[a,i,s]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Jt.test(t)&&(t=parseFloat(t),t=Et(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let s=Et(a.min,a.max,r);e===a&&(s-=t),e.min=el(e.min,t,n,s,o),e.max=el(e.max,t,n,s,o)}(e,t[a],t[i],t[s],t.scale,r,o)}const nl=["x","scaleX","originX"],rl=["y","scaleY","originY"];function ol(e,t,n,r){tl(e.x,t,nl,n?n.x:void 0,r?r.x:void 0),tl(e.y,t,rl,n?n.y:void 0,r?r.y:void 0)}function al(e){return 0===e.translate&&1===e.scale}function il(e){return al(e.x)&&al(e.y)}function sl(e,t){return e.min===t.min&&e.max===t.max}function ll(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function cl(e,t){return ll(e.x,t.x)&&ll(e.y,t.y)}function dl(e){return os(e.x)/os(e.y)}function ul(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class hl{constructor(){this.members=[]}add(e){pr(this.members,e),e.scheduleRender()}remove(e){if(fr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const pl={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},fl=["","X","Y","Z"];let ml=0;function gl(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function xl(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Ko(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",vn,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&xl(r)}function yl(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:o,resetTransform:a}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=ml++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,xn.value&&(pl.nodes=pl.calculatedTargetDeltas=pl.calculatedProjections=0),this.nodes.forEach(wl),this.nodes.forEach(El),this.nodes.forEach(Al),this.nodes.forEach(kl),xn.addProjectionMetrics&&xn.addProjectionMetrics(pl)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ws)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new mr),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;this.isSVG=Os(e)&&!Fs(e),this.instance=e;const{layoutId:n,layout:r,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||n)&&(this.isLayoutDirty=!0),t){let n,r=0;const o=()=>this.root.updateBlockedByResize=!1;vn.read(()=>{r=window.innerWidth}),t(e,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=Vs(o,250),As.hasAnimatedSinceResize&&(As.hasAnimatedSinceResize=!1,this.nodes.forEach(Sl)))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&o&&(n||r)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:a}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||o.getDefaultTransition()||Dl,{onLayoutAnimationStart:s,onLayoutAnimationComplete:l}=o.getProps(),c=!this.targetLayout||!cl(this.targetLayout,a),d=!n&&r;if(this.options.layoutRoot||this.resumeFrom||d||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=qe(qe({},Wo(i,"layout")),{},{onPlay:s,onComplete:l});(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,d)}else n||Sl(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=a})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),bn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Pl),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xl(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let o=0;o<this.path.length;o++){const e=this.path[o];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(jl);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(_l);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Nl),this.nodes.forEach(vl),this.nodes.forEach(bl)):this.nodes.forEach(_l),this.clearAllSnapshots();const e=hr.now();wn.delta=Gt(0,1e3/60,e-wn.timestamp),wn.timestamp=e,wn.isProcessing=!0,kn.update.process(wn),kn.preRender.process(wn),kn.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wr.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Cl),this.sharedNodes.forEach(Bl)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||os(this.snapshot.measuredBox.x)||os(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=o(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!il(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,o=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||Bt(this.latestValues)||o)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),Fl((r=n).x),Fl(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(zl))){const{scroll:e}=this.root;e&&(zt(n.x,e.offset.x),zt(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Qs(n,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:o,options:a}=t;t!==this.root&&o&&a.layoutScroll&&(o.wasRoot&&Qs(n,e),zt(n.x,o.offset.x),zt(n.y,o.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Qs(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Vt(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Bt(e.latestValues)&&Vt(n,e.latestValues)}return Bt(this.latestValues)&&Vt(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Qs(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Bt(e.latestValues))continue;Pt(e.latestValues)&&e.updateSnapshot();const r=_r();Qs(r,e.measurePageBox()),ol(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Bt(this.latestValues)&&ol(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=qe(qe(qe({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:o,layoutId:a}=this.options;if(!this.layout||!o&&!a)return;this.resolvedRelativeTargetAt=wn.timestamp;const i=this.getClosestProjectingParent();var s,l,c;(i&&this.linkedParentVersion!==i.layoutVersion&&!i.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(i&&i.layout?this.createRelativeTarget(i,this.layout.layoutBox,i.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,l=this.relativeTarget,c=this.relativeParent.target,ss(s.x,l.x,c.x),ss(s.y,l.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Qs(this.target,this.layout.layoutBox),Ot(this.target,this.targetDelta)):Qs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,i&&Boolean(i.resumingFrom)===Boolean(this.resumingFrom)&&!i.options.layoutScroll&&i.target&&1!==this.animationProgress?this.createRelativeTarget(i,this.target,i.target):this.relativeParent=this.relativeTarget=void 0),xn.value&&pl.calculatedTargetDeltas++)}getClosestProjectingParent(){if(this.parent&&!Pt(this.parent.latestValues)&&!It(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,n){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},cs(this.relativeTargetOrigin,t,n),Qs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(r=!1),r)return;const{layout:o,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!o&&!a)return;Qs(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,s=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=n.length;if(!o)return;let a,i;t.x=t.y=1;for(let s=0;s<o;s++){a=n[s],i=a.projectionDelta;const{visualElement:o}=a.options;o&&o.props.style&&"contents"===o.props.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Vt(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Ot(e,i)),r&&Bt(a.latestValues)&&Vt(e,a.latestValues))}t.x<Lt&&t.x>Ft&&(t.x=1),t.y<Lt&&t.y>Ft&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?($s(this.prevProjectionDelta.x,this.projectionDelta.x),$s(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),is(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===s&&ul(this.projectionDelta.x,this.prevProjectionDelta.x)&&ul(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),xn.value&&pl.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},o=qe({},this.latestValues),a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},s=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(s&&!c&&!0===this.options.crossfade&&!this.path.some(Ml));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,p,f,m,g;Il(a.x,e.x,n),Il(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cs(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,m=i,g=n,Tl(p.x,f.x,m.x,g),Tl(p.y,f.y,m.y,g),u&&(l=this.relativeTarget,h=u,sl(l.x,h.x)&&sl(l.y,h.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),Qs(u,this.relativeTarget)),s&&(this.animationValues=o,function(e,t,n,r,o,a){var i,s;if(o)e.opacity=Et(0,null!==(i=n.opacity)&&void 0!==i?i:1,Ys(r)),e.opacityExit=Et(null!==(s=t.opacity)&&void 0!==s?s:1,0,qs(r));else if(a){var l,c;e.opacity=Et(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,r)}for(let d=0;d<Hs;d++){const o="border".concat(Us[d],"Radius");let a=Ks(t,o),i=Ks(n,o);void 0===a&&void 0===i||(a||(a=0),i||(i=0),0===a||0===i||Xs(a)===Xs(i)?(e[o]=Math.max(Et(Gs(a),Gs(i),r),0),(Jt.test(i)||Jt.test(a))&&(e[o]+="%")):e[o]=i)}(t.rotate||n.rotate)&&(e.rotate=Et(t.rotate||0,n.rotate||0,r))}(o,r,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(n=this.resumingFrom)||void 0===n||null===(n=n.currentAnimation)||void 0===n||n.stop(),this.pendingAnimation&&(bn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vn.update(()=>{As.hasAnimatedSinceResize=!0,$o.layout++,this.motionValue||(this.motionValue=vr(0)),this.currentAnimation=Ls(this.motionValue,[0,1e3],qe(qe({},e),{},{velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{$o.layout--},onComplete:()=>{$o.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:o}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Ll(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=os(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=os(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Qs(t,n),Vt(t,o),is(this.projectionDeltaWithTransform,this.layoutCorrected,t,o)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new hl);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&gl("z",e,r,this.animationValues);for(let o=0;o<fl.length;o++)gl("rotate".concat(fl[o]),e,r,this.animationValues),gl("skew".concat(fl[o]),e,r,this.animationValues);e.render();for(const o in r)e.setStaticValue(o,r[o]),this.animationValues&&(this.animationValues[o]=r[o]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=jo(null===t||void 0===t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=jo(null===t||void 0===t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!Bt(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const o=r.animationValues||r.latestValues;this.applyTransformsToTarget();let a=function(e,t,n){let r="";const o=e.x.translate/t.x,a=e.y.translate/t.y,i=(null===n||void 0===n?void 0:n.z)||0;if((o||a||i)&&(r="translate3d(".concat(o,"px, ").concat(a,"px, ").concat(i,"px) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:o,rotateY:a,skewX:i,skewY:s}=n;e&&(r="perspective(".concat(e,"px) ").concat(r)),t&&(r+="rotate(".concat(t,"deg) ")),o&&(r+="rotateX(".concat(o,"deg) ")),a&&(r+="rotateY(".concat(a,"deg) ")),i&&(r+="skewX(".concat(i,"deg) ")),s&&(r+="skewY(".concat(s,"deg) "))}const s=e.x.scale*t.x,l=e.y.scale*t.y;return 1===s&&1===l||(r+="scale(".concat(s,", ").concat(l,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,o);n&&(a=n(o,a)),e.transform=a;const{x:i,y:s}=this.projectionDelta;var l,c;(e.transformOrigin="".concat(100*i.origin,"% ").concat(100*s.origin,"% 0"),r.animationValues)?e.opacity=r===this?null!==(l=null!==(c=o.opacity)&&void 0!==c?c:this.latestValues.opacity)&&void 0!==l?l:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:e.opacity=r===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const d in Xr){if(void 0===o[d])continue;const{correct:t,applyTo:n,isCSSVariable:i}=Xr[d],s="none"===a?o[d]:t(o[d],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=s}else i?this.options.visualElement.renderState.vars[d]=s:e[d]=s}this.options.layoutId&&(e.pointerEvents=r===this?jo(null===t||void 0===t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(jl),this.root.sharedNodes.clear()}}}function vl(e){e.updateLayout()}function bl(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:o}=e.options,a=n.source!==e.layout.source;"size"===o?ds(e=>{const r=a?n.measuredBox[e]:n.layoutBox[e],o=os(r);r.min=t[e].min,r.max=r.min+o}):Ll(o,n.layoutBox,t)&&ds(r=>{const o=a?n.measuredBox[r]:n.layoutBox[r],i=os(t[r]);o.max=o.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};is(i,t,n.layoutBox);const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?is(s,e.applyTransform(r,!0),n.measuredBox):is(s,t,n.layoutBox);const l=!il(i);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:o,layout:a}=r;if(o&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};cs(i,n.layoutBox,o.layoutBox);const s={x:{min:0,max:0},y:{min:0,max:0}};cs(s,t,a.layoutBox),cl(i,s)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:s,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function wl(e){xn.value&&pl.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function kl(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Cl(e){e.clearSnapshot()}function jl(e){e.clearMeasurements()}function _l(e){e.isLayoutDirty=!1}function Nl(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Sl(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function El(e){e.resolveTargetDelta()}function Al(e){e.calcProjection()}function Pl(e){e.resetSkewAndRotation()}function Bl(e){e.removeLeadSnapshot()}function Il(e,t,n){e.translate=Et(t.translate,0,n),e.scale=Et(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Tl(e,t,n,r){e.min=Et(t.min,n.min,r),e.max=Et(t.max,n.max,r)}function Ml(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Dl={duration:.45,ease:[.4,0,.1,1]},Rl=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ol=Rl("applewebkit/")&&!Rl("chrome/")?Math.round:fn;function Fl(e){e.min=Ol(e.min),e.max=Ol(e.max)}function Ll(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=dl(t),o=dl(n),a=.2,!(Math.abs(r-o)<=a));var r,o,a}function zl(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Wl=yl({attachResizeListener:(e,t)=>es(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vl={current:void 0},Ul=yl({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Vl.current){const e=new Wl({});e.mount(window),e.setOptions({layoutScroll:!0}),Vl.current=e}return Vl.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Hl={pan:{Feature:class extends qi{constructor(){super(...arguments),this.removePointerDownListener=fn}onPointerDown(e){this.session=new ps(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:us(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Es(e),onStart:Es(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&vn.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=rs(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends qi{constructor(e){super(e),this.removeGroupControls=fn,this.removeListeners=fn,this.controls=new Ns(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fn}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Ul,MeasureLayout:Ds}};function Gl(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){var r;let o=document;t&&(o=t.current);const a=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:o.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function Xl(e,t){const n=Gl(e),r=new AbortController;return[n,qe(qe({passive:!0},t),{},{signal:r.signal}),()=>r.abort()]}function Kl(e){return!("touch"===e.pointerType||$i())}function Yl(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const o=r["onHover"+n];o&&vn.postRender(()=>o(t,ns(t)))}const ql=(e,t)=>!!t&&(e===t||ql(e,t.parentElement)),Zl=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const Jl=new WeakSet;function Ql(e){return t=>{"Enter"===t.key&&e(t)}}function $l(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function ec(e){return ts(e)&&!$i()}function tc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,o,a]=Xl(e,n),i=e=>{const r=e.currentTarget;if(!ec(e))return;Jl.add(r);const a=t(r,e),i=(e,t)=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",l),Jl.has(r)&&Jl.delete(r),ec(e)&&"function"===typeof a&&a(e,{success:t})},s=e=>{i(e,r===window||r===document||n.useGlobalTarget||ql(r,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",s,o),window.addEventListener("pointercancel",l,o)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",i,o),Qe(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=Ql(()=>{if(Jl.has(n))return;$l(n,"down");const e=Ql(()=>{$l(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>$l(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,o)),t=e,Zl.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),a}function nc(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const o=r["onTap"+("End"===n?"":n)];o&&vn.postRender(()=>o(t,ns(t)))}const rc=["root"],oc=new WeakMap,ac=new WeakMap,ic=e=>{const t=oc.get(e.target);t&&t(e)},sc=e=>{e.forEach(ic)};function lc(e,t,n){const r=function(e){let{root:t}=e,n=cr(e,rc);const r=t||document;ac.has(r)||ac.set(r,{});const o=ac.get(r),a=JSON.stringify(n);return o[a]||(o[a]=new IntersectionObserver(sc,qe({root:t},n))),o[a]}(t);return oc.set(e,n),r.observe(e),()=>{oc.delete(e),r.unobserve(e)}}const cc={some:0,all:1};const dc={inView:{Feature:class extends qi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:o}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:cc[r]};return lc(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,o&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends qi{mount(){const{current:e}=this.node;e&&(this.unmount=tc(e,(e,t)=>(nc(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return nc(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends qi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(iN){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zo(es(this.node.current,"focus",()=>this.onFocus()),es(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends qi{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,o,a]=Xl(e,n),i=e=>{if(!Kl(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const a=e=>{Kl(e)&&(r(e),n.removeEventListener("pointerleave",a))};n.addEventListener("pointerleave",a,o)};return r.forEach(e=>{e.addEventListener("pointerenter",i,o)}),a}(e,(e,t)=>(Yl(this.node,t,"Start"),e=>Yl(this.node,e,"End"))))}unmount(){}}}},uc={layout:{ProjectionNode:Ul,MeasureLayout:Ds}},hc=Lo(qe(qe(qe(qe({},Ji),dc),Hl),uc),so),pc="#E5E5E5",fc="#737373",mc=("1px solid ".concat(pc),()=>(0,Fe.jsxs)("div",{className:"flex flex-col items-center py-6 w-full h-full border-r",style:{backgroundColor:pc,borderColor:pc},children:[(0,Fe.jsx)("button",{className:"p-3 mb-6 rounded-lg bg-gray-200 hover:bg-gray-400 transition-colors",children:(0,Fe.jsx)("svg",{className:"w-6 h-6 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,Fe.jsx)("div",{className:"flex-1"}),(0,Fe.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-medium hover:bg-gray-400 transition-colors",children:(0,Fe.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})),gc={bg:["#E5E7EB","#FECACA","#FED7AA","#FEF08A","#BBF7D0","#99F6E4","#BAE6FD","#BFDBFE","#DDD6FE","#FBCFE8"],text:["#4B5563","#DC2626","#EA580C","#CA8A04","#16A34A","#0D9488","#0284C7","#2563EB","#7C3AED","#DB2777"]},xc=e=>{let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);const n=Math.abs(t)%gc.bg.length;return{bg:gc.bg[n],text:gc.text[n]}},yc=[{id:"evlogia",name:"Evlogia Apparel",role:"Owner",avatarColor:"#6B7280"},{id:"apotik-sawangan",name:"Apotik Sawangan",role:"Collaborator",avatarColor:"#22C55E"},{id:"toko-garuda",name:"Toko Garuda",role:"Collaborator",avatarColor:"#EAB308"},{id:"dnd",name:"DnD",role:"Collaborator",avatarColor:"#EF4444"},{id:"personal-finance",name:"Personal Finance",role:"Main Account",avatarColor:"#3B82F6"},{id:"dummy-1",name:"Dummy 1",role:"Collaborator",avatarColor:"#14B8A6"},{id:"dummy-2",name:"Dummy 2",role:"Collaborator",avatarColor:"#0EA5E9"},{id:"dummy-3",name:"Dummy 3",role:"Collaborator",avatarColor:"#8B5CF6"},{id:"dummy-4",name:"Dummy 4",role:"Collaborator",avatarColor:"#EC4899"},{id:"dummy-5",name:"Dummy 5",role:"Collaborator",avatarColor:"#F97316"}],vc=e=>{let{tenants:n,activeTenant:r,onSelectTenant:o,isLoading:a=!1}=e;const[i,s]=(0,t.useState)(""),[l,c]=(0,t.useState)("all"),[d,u]=(0,t.useState)(!1),h=(0,t.useRef)(null),p=(0,t.useMemo)(()=>yc.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())),[i]);return(0,Fe.jsxs)("div",{className:"w-full h-full bg-neutral-200",children:[(0,Fe.jsxs)("div",{className:"md:hidden",style:{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100dvh",width:"100vw",backgroundColor:"#F5F5F5",overflow:"hidden",zIndex:40},children:[(0,Fe.jsx)("div",{className:"bg-white/65 backdrop-blur-md",style:{position:"fixed",top:0,left:0,right:0,zIndex:50,paddingTop:"env(safe-area-inset-top)"},children:(0,Fe.jsxs)("header",{className:"flex items-center justify-between px-4 h-14",style:{borderBottom:d?"1px solid rgba(0,0,0,0.1)":"none"},children:[(0,Fe.jsx)("button",{className:"w-10 h-10 flex items-center justify-center text-gray-700",children:(0,Fe.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Fe.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,Fe.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,Fe.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),(0,Fe.jsx)("h1",{className:"text-xl font-semibold text-gray-900 transition-opacity duration-200",style:{opacity:d?1:0},children:"Workspace"}),(0,Fe.jsx)("button",{className:"w-10 h-10 flex items-center justify-center text-gray-700",children:(0,Fe.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Fe.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,Fe.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})}),(0,Fe.jsxs)("div",{ref:h,onScroll:e=>{const t=e.currentTarget.scrollTop;u(t>100)},style:{position:"absolute",top:0,bottom:0,left:0,right:0,paddingTop:"calc(56px + env(safe-area-inset-top))",paddingBottom:"calc(80px + env(safe-area-inset-bottom))",overflowY:"auto",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:[(0,Fe.jsx)("div",{className:"px-4 pt-2 pb-3",children:(0,Fe.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Workspace"})}),(0,Fe.jsx)("div",{className:"px-4 pb-3",children:(0,Fe.jsx)("div",{className:"relative",children:(0,Fe.jsx)("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"Search",className:"w-full pl-4 pr-3 py-3 text-sm bg-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 transition-all",style:{border:"none"}})})}),(0,Fe.jsxs)("div",{className:"px-4 pb-3 flex gap-2",children:[(0,Fe.jsx)("button",{onClick:()=>c("all"),className:"px-4 py-1.5 text-sm font-medium rounded-full transition-colors ".concat("all"===l?"bg-neutral-800 text-white":"bg-white text-neutral-600 border border-neutral-300 hover:bg-neutral-50 active:bg-neutral-200"),children:"all chat"}),(0,Fe.jsx)("button",{onClick:()=>c("unread"),className:"px-4 py-1.5 text-sm font-medium rounded-full transition-colors ".concat("unread"===l?"bg-neutral-800 text-white":"bg-white text-neutral-600 border border-neutral-300 hover:bg-neutral-50 active:bg-neutral-200"),children:"unread"}),(0,Fe.jsx)("button",{onClick:()=>c("favourite"),className:"px-4 py-1.5 text-sm font-medium rounded-full transition-colors ".concat("favourite"===l?"bg-neutral-800 text-white":"bg-white text-neutral-600 border border-neutral-300 hover:bg-neutral-50 active:bg-neutral-200"),children:"favourite"})]}),a&&(0,Fe.jsx)("div",{className:"px-6 py-4 text-center text-gray-500 text-sm",children:"Loading tenants..."}),p.map(e=>(0,Fe.jsxs)("div",{onClick:()=>o(e.id),className:"px-4 pt-3 cursor-pointer transition-colors ".concat((null===r||void 0===r?void 0:r.id)===e.id?"bg-gray-100":"hover:bg-gray-50 active:bg-neutral-200"),children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(()=>{const t=xc(e.name);return(0,Fe.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-semibold flex-shrink-0 text-lg",style:{backgroundColor:t.bg,color:t.text},children:e.avatar||e.name.charAt(0).toUpperCase()})})(),(0,Fe.jsxs)("div",{className:"flex-1 min-w-0 text-left",children:[(0,Fe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),(0,Fe.jsx)("p",{className:"text-base text-gray-500 truncate",children:e.role||"Member"})]})]}),(0,Fe.jsx)("div",{className:"ml-[60px] border-b border-gray-300 mt-3"})]},e.id)),0===p.length&&i&&(0,Fe.jsxs)("div",{className:"px-4 py-8 text-center text-gray-500 text-sm",children:['No tenants found for "',i,'"']})]})]}),(0,Fe.jsxs)("div",{className:"hidden md:flex md:flex-col md:h-full",children:[(0,Fe.jsxs)("div",{className:"px-4 py-4 border-b border-gray-200 bg-white",children:[(0,Fe.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Milkyhoop"}),(0,Fe.jsx)("div",{className:"relative mb-3",children:(0,Fe.jsx)("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"Search",className:"w-full pl-4 pr-3 py-2.5 text-sm bg-gray-100 rounded-lg focus:outline-none focus:bg-gray-200 transition-colors"})}),(0,Fe.jsxs)("div",{className:"flex gap-2",children:[(0,Fe.jsx)("button",{onClick:()=>c("all"),className:"px-3 py-1.5 text-sm font-medium rounded-lg transition-colors",style:{backgroundColor:"all"===l?"#262626":"transparent",color:"all"===l?"#ffffff":"#525252"},onMouseEnter:e=>{"all"!==l&&(e.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:e=>{"all"!==l&&(e.currentTarget.style.backgroundColor="transparent")},children:"All"}),(0,Fe.jsx)("button",{onClick:()=>c("unread"),className:"px-3 py-1.5 text-sm font-medium rounded-lg transition-colors",style:{backgroundColor:"unread"===l?"#262626":"transparent",color:"unread"===l?"#ffffff":"#525252"},onMouseEnter:e=>{"unread"!==l&&(e.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:e=>{"unread"!==l&&(e.currentTarget.style.backgroundColor="transparent")},children:"Unread"})]})]}),(0,Fe.jsxs)("div",{className:"flex-1 overflow-y-auto bg-white",children:[a&&(0,Fe.jsx)("div",{className:"px-6 py-4 text-center text-gray-500 text-sm",children:"Loading tenants..."}),p.map(e=>(0,Fe.jsxs)("div",{onClick:()=>o(e.id),className:"px-4 pt-3 cursor-pointer transition-colors ".concat((null===r||void 0===r?void 0:r.id)===e.id?"bg-gray-100":"hover:bg-gray-50 active:bg-neutral-200"),children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(()=>{const t=xc(e.name);return(0,Fe.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-semibold flex-shrink-0 text-lg",style:{backgroundColor:t.bg,color:t.text},children:e.avatar||e.name.charAt(0).toUpperCase()})})(),(0,Fe.jsxs)("div",{className:"flex-1 min-w-0 text-left",children:[(0,Fe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),(0,Fe.jsx)("p",{className:"text-base text-gray-500 truncate",children:e.role||"Member"})]})]}),(0,Fe.jsx)("div",{className:"ml-[60px] border-b border-gray-300 mt-3"})]},e.id)),0===p.length&&i&&(0,Fe.jsxs)("div",{className:"px-4 py-8 text-center text-gray-500 text-sm",children:['No tenants found for "',i,'"']})]})]})]})},bc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"",wc=e=>e.startsWith("http")?e:bc?"".concat(bc).concat(e):e,kc=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((()=>{const e=Ae();if(!e)return!0;try{const t=1e3*JSON.parse(atob(e.split(".")[1])).exp;return t-Date.now()<3e5}catch(sN){return!0}})()){console.log("[fetchWithAuth] Token expiring soon, refreshing...");if(!await Ie())throw new Error("Token refresh failed - user logged out")}const r=Ae(),o=wc(e),a=await fetch(o,qe(qe({},t),{},{headers:qe(qe({},t.headers),r&&{Authorization:"Bearer ".concat(r)})}));if(401===a.status){if(n<2){console.log("[fetchWithAuth] Got 401, attempting token refresh (retry ".concat(n+1,"/").concat(2,")..."));if(await Ie()){const n=Ae(),r=wc(e);return fetch(r,qe(qe({},t),{},{headers:qe(qe({},t.headers),n&&{Authorization:"Bearer ".concat(n)})}))}throw new Error("Authentication failed - please login again")}throw console.error("[fetchWithAuth] Max retries reached for 401"),new Error("Authentication failed after retries")}return a},Cc=async()=>{const e=(()=>{const e=Ae();if(!e)return null;try{return JSON.parse(atob(e.split(".")[1])).tenant_id||null}catch(sN){return null}})();if(!e)return[];try{const t=await(async e=>{const t="/api/tenant/".concat(e,"/info"),n=wc(t),r=await fetch(n);if(!r.ok)throw new Error("Failed to fetch tenant info: ".concat(r.status));return r.json()})(e);return[{id:e,name:t.display_name||t.name||e.charAt(0).toUpperCase()+e.slice(1),avatar:t.avatar||"\ud83c\udfea",status:"online",lastMessage:"",lastMessageTime:"Now",role:"Owner",isPrivate:!0}]}catch(t){return[{id:e,name:e.charAt(0).toUpperCase()+e.slice(1),avatar:"\ud83c\udfea",status:"online",lastMessage:"",lastMessageTime:"Now",role:"Owner",isPrivate:!0}]}},jc=[{id:"sales_product",label:"POS",icon:"/icons/POS.png",disabled:!1},{id:"purchase_goods",label:"Pembelian",icon:"/icons/PEMBELIAN.png",disabled:!1},{id:"expense",label:"Beban",icon:"/icons/BEBAN.png",disabled:!1},{id:"inventory_update",label:"Inventory",icon:"/icons/INVENTORY.png",disabled:!1},{id:"cash_bank",label:"Kas & Bank",icon:"/icons/KASBANK.png",disabled:!1},{id:"debt_receivable",label:"Hutang/\nPiutang",icon:"/icons/HUTANGPIUTANG.png",disabled:!1},{id:"customer",label:"Pelanggan",icon:"/icons/PELANGGAN.png",disabled:!1},{id:"insight",label:"Insight",icon:"/icons/INSIGHT.png",disabled:!1}],_c=e=>{let{isMobile:n=!1,onMenuItemClick:r,isOpen:o,onOpenChange:a}=e;const[i,s]=(0,t.useState)(!1),l=(0,t.useRef)(null),c=void 0!==o?o:i,d=e=>{a&&a(e),void 0===o&&s(e)};(0,t.useEffect)(()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&d(!1)};return c&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[c]);const u=e=>{console.log("[ActionMenuButton] Menu item clicked:",e),d(!1),null===r||void 0===r||r(e)};return(0,Fe.jsxs)("div",{ref:l,className:"relative",children:[(0,Fe.jsx)("button",{onClick:()=>d(!c),className:"w-5 h-5 flex items-center justify-center bg-transparent hover:opacity-80 rounded-full transition-all flex-shrink-0","aria-label":"Open action menu",children:(0,Fe.jsx)("img",{src:"/icons/plusbutton.png",alt:"Add",className:"w-full h-full object-contain"})}),c&&(0,Fe.jsx)(Fe.Fragment,{children:n?(0,Fe.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end",children:[(0,Fe.jsx)("div",{className:"absolute inset-0 bg-black/20",onClick:()=>d(!1)}),(0,Fe.jsxs)("div",{className:"relative w-full bg-white rounded-t-2xl shadow-2xl animate-slide-up",style:{maxHeight:"70vh",paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[(0,Fe.jsx)("div",{className:"flex justify-center pt-3 pb-2",children:(0,Fe.jsx)("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),(0,Fe.jsx)("div",{className:"px-4 pb-6 pt-2",children:(0,Fe.jsx)("div",{className:"grid grid-cols-4 gap-3",children:jc.map(e=>(0,Fe.jsxs)("button",{onClick:()=>u(e.id),disabled:e.disabled,className:"flex flex-col items-center justify-start text-center disabled:opacity-40 disabled:cursor-not-allowed",style:{minHeight:"80px"},children:[(0,Fe.jsx)("div",{className:"w-12 h-12 mb-2 flex items-center justify-center",children:(0,Fe.jsx)("img",{src:e.icon,alt:e.label,className:"w-full h-full object-contain"})}),(0,Fe.jsx)("div",{className:"text-xs font-normal text-gray-800 leading-tight px-1 whitespace-pre-line",children:e.label})]},e.id))})})]})]}):(0,Fe.jsx)("div",{className:"absolute bottom-full left-0 mb-2 bg-white rounded-2xl py-1 z-50 animate-popup-slide",style:{minWidth:"220px",maxWidth:"220px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15)"},children:jc.map((e,t)=>(0,Fe.jsxs)("button",{onClick:()=>u(e.id),disabled:e.disabled,className:"w-full flex items-center gap-3 px-5 py-3 hover:bg-gray-50 transition-colors text-left disabled:opacity-40 disabled:cursor-not-allowed ".concat(0===t?"rounded-t-2xl":""," ").concat(t===jc.length-1?"rounded-b-2xl":""),children:[(0,Fe.jsx)("div",{className:"w-6 h-6 flex-shrink-0",children:(0,Fe.jsx)("img",{src:e.icon,alt:e.label,className:"w-full h-full object-contain"})}),(0,Fe.jsx)("span",{className:"text-[15px] font-normal text-gray-800",children:e.label})]},e.id))})})]})};function Nc(){let{edgeThreshold:e=30,swipeThreshold:n=50,verticalTolerance:r=30,onSwipe:o,enabled:a=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=(0,t.useRef)(null);return{handleTouchStart:(0,t.useCallback)(t=>{if(!a)return;const n=t.touches[0],r=window.innerWidth-n.clientX;i.current=r<=e?{startX:n.clientX,startY:n.clientY,isValidStart:!0}:null},[a,e]),handleTouchMove:(0,t.useCallback)(e=>{var t;if(!a||null===(t=i.current)||void 0===t||!t.isValidStart)return;const n=e.touches[0];Math.abs(n.clientY-i.current.startY)>r&&(i.current.isValidStart=!1)},[a,r]),handleTouchEnd:(0,t.useCallback)(e=>{var t;if(!a||null===(t=i.current)||void 0===t||!t.isValidStart)return void(i.current=null);const s=e.changedTouches[0],l=i.current.startX-s.clientX,c=Math.abs(s.clientY-i.current.startY);l>n&&c<=r&&(null===o||void 0===o||o()),i.current=null},[a,n,r,o])}}function Sc(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var Ec=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ac=function(e){function t(t,n){var r=this.constructor,o=e.call(this,t,n)||this;return Object.defineProperty(o,"name",{value:r.name,enumerable:!1,configurable:!0}),function(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}(o,r.prototype),Sc(o),o}return Ec(t,e),t}(Error);var Pc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Bc=function(e){function t(t){void 0===t&&(t=void 0);var n=e.call(this,t)||this;return n.message=t,n}return Pc(t,e),t.prototype.getKind=function(){return this.constructor.kind},t.kind="Exception",t}(Ac);var Ic=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Tc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ic(t,e),t.kind="ArgumentException",t}(Bc);var Mc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Dc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mc(t,e),t.kind="IllegalArgumentException",t}(Bc);const Rc=function(){function e(e){if(this.binarizer=e,null===e)throw new Dc("Binarizer must be non-null.")}return e.prototype.getWidth=function(){return this.binarizer.getWidth()},e.prototype.getHeight=function(){return this.binarizer.getHeight()},e.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},e.prototype.getBlackMatrix=function(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},e.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},e.prototype.crop=function(t,n,r,o){var a=this.binarizer.getLuminanceSource().crop(t,n,r,o);return new e(this.binarizer.createBinarizer(a))},e.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},e.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new e(this.binarizer.createBinarizer(t))},e.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new e(this.binarizer.createBinarizer(t))},e.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(iN){return""}},e}();var Oc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Fc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oc(t,e),t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(Bc);const Lc=function(){function e(e){this.source=e}return e.prototype.getLuminanceSource=function(){return this.source},e.prototype.getWidth=function(){return this.source.getWidth()},e.prototype.getHeight=function(){return this.source.getHeight()},e}();var zc=function(){function e(){}return e.arraycopy=function(e,t,n,r,o){for(;o--;)n[r++]=e[t++]},e.currentTimeMillis=function(){return Date.now()},e}();const Wc=zc;var Vc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Uc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vc(t,e),t.kind="IndexOutOfBoundsException",t}(Bc);var Hc=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Gc=function(e){function t(t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0);var r=e.call(this,n)||this;return r.index=t,r.message=n,r}return Hc(t,e),t.kind="ArrayIndexOutOfBoundsException",t}(Uc);var Xc=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kc=function(){function e(){}return e.fill=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n]=t},e.fillWithin=function(t,n,r,o){e.rangeCheck(t.length,n,r);for(var a=n;a<r;a++)t[a]=o},e.rangeCheck=function(e,t,n){if(t>n)throw new Dc("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new Gc(t);if(n>e)throw new Gc(n)},e.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},e.create=function(e,t,n){return Array.from({length:e}).map(function(e){return Array.from({length:t}).fill(n)})},e.createInt32Array=function(e,t,n){return Array.from({length:e}).map(function(e){return Int32Array.from({length:t}).fill(n)})},e.equals=function(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},e.hashCode=function(e){var t,n;if(null===e)return 0;var r=1;try{for(var o=Xc(e),a=o.next();!a.done;a=o.next()){r=31*r+a.value}}catch(i){t={error:i}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},e.copyOf=function(e,t){return e.slice(0,t)},e.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},e.copyOfRange=function(e,t,n){var r=n-t,o=new Int32Array(r);return Wc.arraycopy(e,t,o,0,r),o},e.binarySearch=function(t,n,r){void 0===r&&(r=e.numberComparator);for(var o=0,a=t.length-1;o<=a;){var i=a+o>>1,s=r(n,t[i]);if(s>0)o=i+1;else{if(!(s<0))return i;a=i-1}}return-o-1},e.numberComparator=function(e,t){return e-t},e}();const Yc=Kc;const qc=function(){function e(){}return e.numberOfTrailingZeros=function(e){var t;if(0===e)return 32;var n=31;return 0!==(t=e<<16)&&(n-=16,e=t),0!==(t=e<<8)&&(n-=8,e=t),0!==(t=e<<4)&&(n-=4,e=t),0!==(t=e<<2)&&(n-=2,e=t),n-(e<<1>>>31)},e.numberOfLeadingZeros=function(e){if(0===e)return 32;var t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31},e.toHexString=function(e){return e.toString(16)},e.toBinaryString=function(e){return String(parseInt(String(e),2))},e.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)},e.truncDivision=function(e,t){return Math.trunc(e/t)},e.parseInt=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e.MIN_VALUE_32_BITS=-2147483648,e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}();const Zc=function(){function e(t,n){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=void 0===n||null===n?e.makeArray(t):n)}return e.prototype.getSize=function(){return this.size},e.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},e.prototype.ensureCapacity=function(t){if(t>32*this.bits.length){var n=e.makeArray(t);Wc.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},e.prototype.get=function(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))},e.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},e.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},e.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),o=n[r];o&=~((1<<(31&e))-1);for(var a=n.length;0===o;){if(++r===a)return t;o=n[r]}var i=32*r+qc.numberOfTrailingZeros(o);return i>t?t:i},e.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),o=~n[r];o&=~((1<<(31&e))-1);for(var a=n.length;0===o;){if(++r===a)return t;o=~n[r]}var i=32*r+qc.numberOfTrailingZeros(o);return i>t?t:i},e.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},e.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Dc;if(t!==e){t--;for(var n=Math.floor(e/32),r=Math.floor(t/32),o=this.bits,a=n;a<=r;a++){var i=(2<<(a<r?31:31&t))-(1<<(a>n?0:31&e));o[a]|=i}}},e.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},e.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new Dc;if(t===e)return!0;t--;for(var r=Math.floor(e/32),o=Math.floor(t/32),a=this.bits,i=r;i<=o;i++){var s=(2<<(i<o?31:31&t))-(1<<(i>r?0:31&e))&4294967295;if((a[i]&s)!==(n?s:0))return!1}return!0},e.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},e.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Dc("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))},e.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},e.prototype.xor=function(e){if(this.size!==e.size)throw new Dc("Sizes don't match");for(var t=this.bits,n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]},e.prototype.toBytes=function(e,t,n,r){for(var o=0;o<r;o++){for(var a=0,i=0;i<8;i++)this.get(e)&&(a|=1<<7-i),e++;t[n+o]=a}},e.prototype.getBitArray=function(){return this.bits},e.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits,o=0;o<n;o++){var a=r[o];a=(a=(a=(a=(a=a>>1&1431655765|(1431655765&a)<<1)>>2&858993459|(858993459&a)<<2)>>4&252645135|(252645135&a)<<4)>>8&16711935|(16711935&a)<<8)>>16&65535|(65535&a)<<16,e[t-o]=a}if(this.size!==32*n){var i=32*n-this.size,s=e[0]>>>i;for(o=1;o<n;o++){var l=e[o];s|=l<<32-i,e[o-1]=s,s=l>>>i}e[n-1]=s}this.bits=e},e.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.size===n.size&&Yc.equals(this.bits,n.bits)},e.prototype.hashCode=function(){return 31*this.size+Yc.hashCode(this.bits)},e.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e},e.prototype.clone=function(){return new e(this.size,this.bits.slice())},e.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},e}();var Jc;!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",e[e.ASSUME_GS1=8]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"}(Jc||(Jc={}));const Qc=Jc;var $c=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const ed=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $c(t,e),t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(Bc);var td,nd=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(td||(td={}));var rd=function(){function e(t,n,r){for(var o,a,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];this.valueIdentifier=t,this.name=r,this.values="number"===typeof n?Int32Array.from([n]):n,this.otherEncodingNames=i,e.VALUE_IDENTIFIER_TO_ECI.set(t,this),e.NAME_TO_ECI.set(r,this);for(var l=this.values,c=0,d=l.length;c!==d;c++){var u=l[c];e.VALUES_TO_ECI.set(u,this)}try{for(var h=nd(i),p=h.next();!p.done;p=h.next()){var f=p.value;e.NAME_TO_ECI.set(f,this)}}catch(m){o={error:m}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}}return e.prototype.getValueIdentifier=function(){return this.valueIdentifier},e.prototype.getName=function(){return this.name},e.prototype.getValue=function(){return this.values[0]},e.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new ed("incorect value");var n=e.VALUES_TO_ECI.get(t);if(void 0===n)throw new ed("incorect value");return n},e.getCharacterSetECIByName=function(t){var n=e.NAME_TO_ECI.get(t);if(void 0===n)throw new ed("incorect value");return n},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.getName()===n.getName()},e.VALUE_IDENTIFIER_TO_ECI=new Map,e.VALUES_TO_ECI=new Map,e.NAME_TO_ECI=new Map,e.Cp437=new e(td.Cp437,Int32Array.from([0,2]),"Cp437"),e.ISO8859_1=new e(td.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),e.ISO8859_2=new e(td.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),e.ISO8859_3=new e(td.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),e.ISO8859_4=new e(td.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),e.ISO8859_5=new e(td.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),e.ISO8859_6=new e(td.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),e.ISO8859_7=new e(td.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),e.ISO8859_8=new e(td.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),e.ISO8859_9=new e(td.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),e.ISO8859_10=new e(td.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),e.ISO8859_11=new e(td.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),e.ISO8859_13=new e(td.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),e.ISO8859_14=new e(td.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),e.ISO8859_15=new e(td.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),e.ISO8859_16=new e(td.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),e.SJIS=new e(td.SJIS,20,"SJIS","Shift_JIS"),e.Cp1250=new e(td.Cp1250,21,"Cp1250","windows-1250"),e.Cp1251=new e(td.Cp1251,22,"Cp1251","windows-1251"),e.Cp1252=new e(td.Cp1252,23,"Cp1252","windows-1252"),e.Cp1256=new e(td.Cp1256,24,"Cp1256","windows-1256"),e.UnicodeBigUnmarked=new e(td.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),e.UTF8=new e(td.UTF8,26,"UTF8","UTF-8"),e.ASCII=new e(td.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),e.Big5=new e(td.Big5,28,"Big5"),e.GB18030=new e(td.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),e.EUC_KR=new e(td.EUC_KR,30,"EUC_KR","EUC-KR"),e}();const od=rd;var ad=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const id=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ad(t,e),t.kind="UnsupportedOperationException",t}(Bc);const sd=function(){function e(){}return e.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},e.shouldDecodeOnFallback=function(t){return!e.isBrowser()&&"ISO-8859-1"===t},e.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)},e.isBrowser=function(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)},e.encodingName=function(e){return"string"===typeof e?e:e.getName()},e.encodingCharacterSet=function(e){return e instanceof od?e:od.getCharacterSetECIByName(e)},e.decodeFallback=function(t,n){var r=this.encodingCharacterSet(n);if(e.isDecodeFallbackSupported(r)){for(var o="",a=0,i=t.length;a<i;a++){var s=t[a].toString(16);s.length<2&&(s="0"+s),o+="%"+s}return decodeURIComponent(o)}if(r.equals(od.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new id("Encoding "+this.encodingName(n)+" not supported by fallback.")},e.isDecodeFallbackSupported=function(e){return e.equals(od.UTF8)||e.equals(od.ISO8859_1)||e.equals(od.ASCII)},e.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))).split(""),n=[],r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)},e}();const ld=function(){function e(){}return e.castAsNonUtf8Char=function(e,t){void 0===t&&(t=null);var n=t?t.getName():this.ISO88591;return sd.decode(new Uint8Array([e]),n)},e.guessEncoding=function(t,n){if(null!==n&&void 0!==n&&void 0!==n.get(Qc.CHARACTER_SET))return n.get(Qc.CHARACTER_SET).toString();for(var r=t.length,o=!0,a=!0,i=!0,s=0,l=0,c=0,d=0,u=0,h=0,p=0,f=0,m=0,g=0,x=0,y=t.length>3&&239===t[0]&&187===t[1]&&191===t[2],v=0;v<r&&(o||a||i);v++){var b=255&t[v];i&&(s>0?0===(128&b)?i=!1:s--:0!==(128&b)&&(0===(64&b)?i=!1:(s++,0===(32&b)?l++:(s++,0===(16&b)?c++:(s++,0===(8&b)?d++:i=!1))))),o&&(b>127&&b<160?o=!1:b>159&&(b<192||215===b||247===b)&&x++),a&&(u>0?b<64||127===b||b>252?a=!1:u--:128===b||160===b||b>239?a=!1:b>160&&b<224?(h++,f=0,++p>m&&(m=p)):b>127?(u++,p=0,++f>g&&(g=f)):(p=0,f=0))}return i&&s>0&&(i=!1),a&&u>0&&(a=!1),i&&(y||l+c+d>0)?e.UTF8:a&&(e.ASSUME_SHIFT_JIS||m>=3||g>=3)?e.SHIFT_JIS:o&&a?2===m&&2===h||10*x>=r?e.SHIFT_JIS:e.ISO88591:o?e.ISO88591:a?e.SHIFT_JIS:i?e.UTF8:e.PLATFORM_DEFAULT_ENCODING},e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,n,o,a,i,s){if("%%"===e)return"%";if(void 0!==t[++r]){e=a?parseInt(a.substr(1)):void 0;var l,c=i?parseInt(i.substr(1)):void 0;switch(s){case"s":l=t[r];break;case"c":l=t[r][0];break;case"f":l=parseFloat(t[r]).toFixed(e);break;case"p":l=parseFloat(t[r]).toPrecision(e);break;case"e":l=parseFloat(t[r]).toExponential(e);break;case"x":l=parseInt(t[r]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[r],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);for(var d=parseInt(o),u=o&&o[0]+""==="0"?"0":" ";l.length<d;)l=void 0!==n?l+u:u+l;return l}})},e.getBytes=function(e,t){return sd.encode(e,t)},e.getCharCode=function(e,t){return void 0===t&&(t=0),e.charCodeAt(t)},e.getCharAt=function(e){return String.fromCharCode(e)},e.SHIFT_JIS=od.SJIS.getName(),e.GB2312="GB2312",e.ISO88591=od.ISO8859_1.getName(),e.EUC_JP="EUC_JP",e.UTF8=od.UTF8.getName(),e.PLATFORM_DEFAULT_ENCODING=e.UTF8,e.ASSUME_SHIFT_JIS=!1,e}();const cd=function(){function e(e){void 0===e&&(e=""),this.value=e}return e.prototype.enableDecoding=function(e){return this.encoding=e,this},e.prototype.append=function(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=ld.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},e.prototype.appendChars=function(e,t,n){for(var r=t;t<t+n;r++)this.append(e[r]);return this},e.prototype.length=function(){return this.value.length},e.prototype.charAt=function(e){return this.value.charAt(e)},e.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},e.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},e.prototype.substring=function(e,t){return this.value.substring(e,t)},e.prototype.setLengthToZero=function(){this.value=""},e.prototype.toString=function(){return this.value},e.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},e}();const dd=function(){function e(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new Dc("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}return e.parseFromBooleanArray=function(t){for(var n=t.length,r=t[0].length,o=new e(r,n),a=0;a<n;a++)for(var i=t[a],s=0;s<r;s++)i[s]&&o.set(s,a);return o},e.parseFromString=function(t,n,r){if(null===t)throw new Dc("stringRepresentation cannot be null");for(var o=new Array(t.length),a=0,i=0,s=-1,l=0,c=0;c<t.length;)if("\n"===t.charAt(c)||"\r"===t.charAt(c)){if(a>i){if(-1===s)s=a-i;else if(a-i!==s)throw new Dc("row lengths do not match");i=a,l++}c++}else if(t.substring(c,c+n.length)===n)c+=n.length,o[a]=!0,a++;else{if(t.substring(c,c+r.length)!==r)throw new Dc("illegal character encountered: "+t.substring(c));c+=r.length,o[a]=!1,a++}if(a>i){if(-1===s)s=a-i;else if(a-i!==s)throw new Dc("row lengths do not match");l++}for(var d=new e(s,l),u=0;u<a;u++)o[u]&&d.set(Math.floor(u%s),Math.floor(u/s));return d},e.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)},e.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295},e.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)},e.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295},e.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Dc("input matrix dimensions do not match");for(var t=new Zc(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits,o=0,a=this.height;o<a;o++)for(var i=o*n,s=e.getRow(o,t).getBitArray(),l=0;l<n;l++)r[i+l]^=s[l]},e.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},e.prototype.setRegion=function(e,t,n,r){if(t<0||e<0)throw new Dc("Left and top must be nonnegative");if(r<1||n<1)throw new Dc("Height and width must be at least 1");var o=e+n,a=t+r;if(a>this.height||o>this.width)throw new Dc("The region must fit inside the matrix");for(var i=this.rowSize,s=this.bits,l=t;l<a;l++)for(var c=l*i,d=e;d<o;d++)s[c+Math.floor(d/32)]|=1<<(31&d)&4294967295},e.prototype.getRow=function(e,t){null===t||void 0===t||t.getSize()<this.width?t=new Zc(this.width):t.clear();for(var n=this.rowSize,r=this.bits,o=e*n,a=0;a<n;a++)t.setBulk(32*a,r[o+a]);return t},e.prototype.setRow=function(e,t){Wc.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},e.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new Zc(e),r=new Zc(e),o=0,a=Math.floor((t+1)/2);o<a;o++)n=this.getRow(o,n),r=this.getRow(t-1-o,r),n.reverse(),r.reverse(),this.setRow(o,r),this.setRow(t-1-o,n)},e.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,r=this.bits,o=e,a=t,i=-1,s=-1,l=0;l<t;l++)for(var c=0;c<n;c++){var d=r[l*n+c];if(0!==d){if(l<a&&(a=l),l>s&&(s=l),32*c<o){for(var u=0;0===(d<<31-u&4294967295);)u++;32*c+u<o&&(o=32*c+u)}if(32*c+31>i){for(u=31;d>>>u===0;)u--;32*c+u>i&&(i=32*c+u)}}}return i<o||s<a?null:Int32Array.from([o,a,i-o+1,s-a+1])},e.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&0===t[n];)n++;if(n===t.length)return null;for(var r=n/e,o=n%e*32,a=t[n],i=0;0===(a<<31-i&4294967295);)i++;return o+=i,Int32Array.from([o,r])},e.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&0===t[n];)n--;if(n<0)return null;for(var r=Math.floor(n/e),o=32*Math.floor(n%e),a=t[n],i=31;a>>>i===0;)i--;return o+=i,Int32Array.from([o,r])},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRowSize=function(){return this.rowSize},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&Yc.equals(this.bits,n.bits)},e.prototype.hashCode=function(){var e=this.width;return e=31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+Yc.hashCode(this.bits)},e.prototype.toString=function(e,t,n){return void 0===e&&(e="X "),void 0===t&&(t="  "),void 0===n&&(n="\n"),this.buildToString(e,t,n)},e.prototype.buildToString=function(e,t,n){for(var r=new cd,o=0,a=this.height;o<a;o++){for(var i=0,s=this.width;i<s;i++)r.append(this.get(i,o)?e:t);r.append(n)}return r.toString()},e.prototype.clone=function(){return new e(this.width,this.height,this.rowSize,this.bits.slice())},e}();var ud=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const hd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ud(t,e),t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(Bc);var pd=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const fd=function(e){function t(n){var r=e.call(this,n)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return pd(t,e),t.prototype.getBlackRow=function(e,n){var r=this.getLuminanceSource(),o=r.getWidth();void 0===n||null===n||n.getSize()<o?n=new Zc(o):n.clear(),this.initArrays(o);for(var a=r.getRow(e,this.luminances),i=this.buckets,s=0;s<o;s++)i[(255&a[s])>>t.LUMINANCE_SHIFT]++;var l=t.estimateBlackPoint(i);if(o<3)for(s=0;s<o;s++)(255&a[s])<l&&n.set(s);else{var c=255&a[0],d=255&a[1];for(s=1;s<o-1;s++){var u=255&a[s+1];(4*d-c-u)/2<l&&n.set(s),c=d,d=u}}return n},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight(),o=new dd(n,r);this.initArrays(n);for(var a=this.buckets,i=1;i<5;i++)for(var s=Math.floor(r*i/5),l=e.getRow(s,this.luminances),c=Math.floor(4*n/5),d=Math.floor(n/5);d<c;d++){a[(255&l[d])>>t.LUMINANCE_SHIFT]++}var u=t.estimateBlackPoint(a),h=e.getMatrix();for(i=0;i<r;i++){var p=i*n;for(d=0;d<n;d++){(255&h[p+d])<u&&o.set(d,i)}}return o},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var n=this.buckets,r=0;r<t.LUMINANCE_BUCKETS;r++)n[r]=0},t.estimateBlackPoint=function(e){for(var n=e.length,r=0,o=0,a=0,i=0;i<n;i++)e[i]>a&&(o=i,a=e[i]),e[i]>r&&(r=e[i]);var s=0,l=0;for(i=0;i<n;i++){var c=i-o;(p=e[i]*c*c)>l&&(s=i,l=p)}if(o>s){var d=o;o=s,s=d}if(s-o<=n/16)throw new hd;var u=s-1,h=-1;for(i=s-1;i>o;i--){var p,f=i-o;(p=f*f*(s-i)*(r-e[i]))>h&&(u=i,h=p)}return u<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(Lc);var md=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const gd=function(e){function t(t){var n=e.call(this,t)||this;return n.matrix=null,n}return md(t,e),t.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),o=n.getHeight();if(r>=t.MINIMUM_DIMENSION&&o>=t.MINIMUM_DIMENSION){var a=n.getMatrix(),i=r>>t.BLOCK_SIZE_POWER;0!==(r&t.BLOCK_SIZE_MASK)&&i++;var s=o>>t.BLOCK_SIZE_POWER;0!==(o&t.BLOCK_SIZE_MASK)&&s++;var l=t.calculateBlackPoints(a,i,s,r,o),c=new dd(r,o);t.calculateThresholdForBlock(a,i,s,r,o,l,c),this.matrix=c}else this.matrix=e.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,n,r,o,a,i,s){for(var l=a-t.BLOCK_SIZE,c=o-t.BLOCK_SIZE,d=0;d<r;d++){var u=d<<t.BLOCK_SIZE_POWER;u>l&&(u=l);for(var h=t.cap(d,2,r-3),p=0;p<n;p++){var f=p<<t.BLOCK_SIZE_POWER;f>c&&(f=c);for(var m=t.cap(p,2,n-3),g=0,x=-2;x<=2;x++){var y=i[h+x];g+=y[m-2]+y[m-1]+y[m]+y[m+1]+y[m+2]}var v=g/25;t.thresholdBlock(e,f,u,v,o,s)}}},t.cap=function(e,t,n){return e<t?t:e>n?n:e},t.thresholdBlock=function(e,n,r,o,a,i){for(var s=0,l=r*a+n;s<t.BLOCK_SIZE;s++,l+=a)for(var c=0;c<t.BLOCK_SIZE;c++)(255&e[l+c])<=o&&i.set(n+c,r+s)},t.calculateBlackPoints=function(e,n,r,o,a){for(var i=a-t.BLOCK_SIZE,s=o-t.BLOCK_SIZE,l=new Array(r),c=0;c<r;c++){l[c]=new Int32Array(n);var d=c<<t.BLOCK_SIZE_POWER;d>i&&(d=i);for(var u=0;u<n;u++){var h=u<<t.BLOCK_SIZE_POWER;h>s&&(h=s);for(var p=0,f=255,m=0,g=0,x=d*o+h;g<t.BLOCK_SIZE;g++,x+=o){for(var y=0;y<t.BLOCK_SIZE;y++){var v=255&e[x+y];p+=v,v<f&&(f=v),v>m&&(m=v)}if(m-f>t.MIN_DYNAMIC_RANGE)for(g++,x+=o;g<t.BLOCK_SIZE;g++,x+=o)for(y=0;y<t.BLOCK_SIZE;y++)p+=255&e[x+y]}var b=p>>2*t.BLOCK_SIZE_POWER;if(m-f<=t.MIN_DYNAMIC_RANGE&&(b=f/2,c>0&&u>0)){var w=(l[c-1][u]+2*l[c][u-1]+l[c-1][u-1])/4;f<w&&(b=w)}l[c][u]=b}}return l},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=5*t.BLOCK_SIZE,t.MIN_DYNAMIC_RANGE=24,t}(fd);const xd=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.isCropSupported=function(){return!1},e.prototype.crop=function(e,t,n,r){throw new id("This luminance source does not support cropping.")},e.prototype.isRotateSupported=function(){return!1},e.prototype.rotateCounterClockwise=function(){throw new id("This luminance source does not support rotation by 90 degrees.")},e.prototype.rotateCounterClockwise45=function(){throw new id("This luminance source does not support rotation by 45 degrees.")},e.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new cd,n=0;n<this.height;n++){for(var r=this.getRow(n,e),o=0;o<this.width;o++){var a=255&r[o],i=void 0;i=a<64?"#":a<128?"+":a<192?".":" ",t.append(i)}t.append("\n")}return t.toString()},e}();var yd=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const vd=function(e){function t(t){var n=e.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return yd(t,e),t.prototype.getRow=function(e,t){for(var n=this.delegate.getRow(e,t),r=this.getWidth(),o=0;o<r;o++)n[o]=255-(255&n[o]);return n},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t),r=0;r<t;r++)n[r]=255-(255&e[r]);return n},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,n,r,o){return new t(this.delegate.crop(e,n,r,o))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(xd);var bd=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wd=function(e){function t(n,r){void 0===r&&(r=!1);var o=e.call(this,n.width,n.height)||this;return o.canvas=n,o.tempCanvasElement=null,o.buffer=t.makeBufferFromCanvasImageData(n,r),o}return bd(t,e),t.makeBufferFromCanvasImageData=function(e,n){void 0===n&&(n=!1);var r=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(r.data,e.width,e.height,n)},t.toGrayscaleBuffer=function(e,n,r,o){void 0===o&&(o=!1);var a=new Uint8ClampedArray(n*r);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!o)for(var i=0,s=0,l=e.length;i<l;i+=4,s++){var c=void 0;if(0===e[i+3])c=255;else c=306*e[i]+601*e[i+1]+117*e[i+2]+512>>10;a[s]=c}else{i=0,s=0;for(var d=e.length;i<d;i+=4,s++){c=void 0;if(0===e[i+3])c=255;else c=306*e[i]+601*e[i+1]+117*e[i+2]+512>>10;a[s]=255-c}}return a},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new Dc("Requested row is outside the image: "+e);var n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,n,r,o){return e.prototype.crop.call(this,t,n,r,o),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var n=this.getTempCanvasElement(),r=n.getContext("2d"),o=e*t.DEGREE_TO_RADIANS,a=this.canvas.width,i=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*i),l=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*i);return n.width=s,n.height=l,r.translate(s/2,l/2),r.rotate(o),r.drawImage(this.canvas,a/-2,i/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.prototype.invert=function(){return new vd(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(xd),kd=function(){function e(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return e.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},e}(),Cd=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(iN){a(iN)}}function s(e){try{l(r.throw(e))}catch(iN){a(iN)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})},jd=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(iN){a=[6,iN],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},_d=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nd=function(){function e(e,t,n){void 0===t&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(e.prototype,"hasNavigator",{get:function(){return"undefined"!==typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),e.prototype.listVideoInputDevices=function(){return Cd(this,void 0,void 0,function(){var e,t,n,r,o,a,i,s,l,c,d,u;return jd(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=_d(e),r=n.next();!r.done;r=n.next())o=r.value,"videoinput"===(a="video"===o.kind?"videoinput":o.kind)&&(i=o.deviceId||o.id,s=o.label||"Video device "+(t.length+1),l=o.groupId,c={deviceId:i,label:s,kind:a,groupId:l},t.push(c))}catch(p){d={error:p}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(d)throw d.error}}return[2,t]}})})},e.prototype.getVideoInputDevices=function(){return Cd(this,void 0,void 0,function(){return jd(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,e.sent().map(function(e){return new kd(e.deviceId,e.label)})]}})})},e.prototype.findDeviceById=function(e){return Cd(this,void 0,void 0,function(){var t;return jd(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(t=n.sent())?[2,t.find(function(t){return t.deviceId===e})]:[2,null]}})})},e.prototype.decodeFromInputVideoDevice=function(e,t){return Cd(this,void 0,void 0,function(){return jd(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},e.prototype.decodeOnceFromVideoDevice=function(e,t){return Cd(this,void 0,void 0,function(){var n;return jd(this,function(r){switch(r.label){case 0:return this.reset(),n={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(n,t)];case 1:return[2,r.sent()]}})})},e.prototype.decodeOnceFromConstraints=function(e,t){return Cd(this,void 0,void 0,function(){var n;return jd(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,r.sent()]}})})},e.prototype.decodeOnceFromStream=function(e,t){return Cd(this,void 0,void 0,function(){var n;return jd(this,function(r){switch(r.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=r.sent(),[4,this.decodeOnce(n)];case 2:return[2,r.sent()]}})})},e.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return Cd(this,void 0,void 0,function(){return jd(this,function(r){switch(r.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,r.sent()]}})})},e.prototype.decodeFromVideoDevice=function(e,t,n){return Cd(this,void 0,void 0,function(){var r;return jd(this,function(o){switch(o.label){case 0:return r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(r,t,n)];case 1:return[2,o.sent()]}})})},e.prototype.decodeFromConstraints=function(e,t,n){return Cd(this,void 0,void 0,function(){var r;return jd(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=o.sent(),[4,this.decodeFromStream(r,t,n)];case 2:return[2,o.sent()]}})})},e.prototype.decodeFromStream=function(e,t,n){return Cd(this,void 0,void 0,function(){var r;return jd(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeContinuously(r,n)];case 2:return[2,o.sent()]}})})},e.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},e.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},e.prototype.attachStreamToVideo=function(e,t){return Cd(this,void 0,void 0,function(){var n;return jd(this,function(r){switch(r.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return r.sent(),[2,n]}})})},e.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,r){return t.playVideoOnLoad(e,function(){return n()})})},e.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},e.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},e.prototype.tryPlayVideo=function(e){return Cd(this,void 0,void 0,function(){return jd(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},e.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new Tc("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new Tc("element with id '"+e+"' must be an "+t+" element");return n},e.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Tc("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},e.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Tc("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},e.prototype.decodeFromVideoContinuously=function(e,t,n){if(void 0===e&&void 0===t)throw new Tc("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},e.prototype.decodeFromImageElement=function(e){if(!e)throw new Tc("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)},e.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},e.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},e.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Tc("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},e.prototype.decodeFromImageUrl=function(e){if(!e)throw new Tc("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},e.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Tc("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},e.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Tc("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r},e.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,r){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,r)},e.addEventListener("load",t.imageLoadedListener)})},e.prototype._decodeOnLoadVideo=function(e){return Cd(this,void 0,void 0,function(){return jd(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},e.prototype._decodeOnLoadVideoContinuously=function(e,t){return Cd(this,void 0,void 0,function(){return jd(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},e.prototype.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.prototype.prepareImageElement=function(e){var t;return"undefined"===typeof e&&((t=document.createElement("img")).width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},e.prototype.prepareVideoElement=function(e){var t;return e||"undefined"===typeof document||((t=document.createElement("video")).width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},e.prototype.decodeOnce=function(e,t,n){var r=this;void 0===t&&(t=!0),void 0===n&&(n=!0),this._stopAsyncDecode=!1;var o=function(a,i){if(r._stopAsyncDecode)return i(new hd("Video stream has ended before any code could be detected.")),void(r._stopAsyncDecode=void 0);try{a(r.decode(e))}catch(iN){if(t&&iN instanceof hd||(iN instanceof Fc||iN instanceof ed)&&n)return setTimeout(o,r._timeBetweenDecodingAttempts,a,i);i(iN)}};return new Promise(function(e,t){return o(e,t)})},e.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var r=function(){if(n._stopContinuousDecode)n._stopContinuousDecode=void 0;else try{var o=n.decode(e);t(o,null),setTimeout(r,n.timeBetweenScansMillis)}catch(iN){t(null,iN),(iN instanceof Fc||iN instanceof ed||iN instanceof hd)&&setTimeout(r,n._timeBetweenDecodingAttempts)}};r()},e.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},e.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),r=new wd(n,t),o=new gd(r);return new Rc(o)},e.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch(iN){n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},e.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},e.prototype.drawFrameOnCanvas=function(e,t,n){void 0===t&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),void 0===n&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},e.prototype.drawImageOnCanvas=function(e,t,n){void 0===t&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),void 0===n&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},e.prototype.createCaptureCanvas=function(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;var t,n,r=document.createElement("canvas");return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(t=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(t=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),r.style.width=t+"px",r.style.height=n+"px",r.width=t,r.height=n,r},e.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},e.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},e.prototype._destroyVideoElement=function(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},e.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},e.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},e.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}},e.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")},e}(),Sd=function(){function e(e,t,n,r,o,a){void 0===n&&(n=null==t?0:8*t.length),void 0===a&&(a=Wc.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=o,this.timestamp=a,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=o,this.resultMetadata=null,this.timestamp=void 0===a||null===a?Wc.currentTimeMillis():a}return e.prototype.getText=function(){return this.text},e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.getBarcodeFormat=function(){return this.format},e.prototype.getResultMetadata=function(){return this.resultMetadata},e.prototype.putMetadata=function(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},e.prototype.putAllMetadata=function(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))},e.prototype.addResultPoints=function(e){var t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){var n=new Array(t.length+e.length);Wc.arraycopy(t,0,n,0,t.length),Wc.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.toString=function(){return this.text},e}();const Ed=Sd;var Ad;!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(Ad||(Ad={}));const Pd=Ad;var Bd;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(Bd||(Bd={}));const Id=Bd;const Td=function(){function e(e,t,n,r,o,a){void 0===o&&(o=-1),void 0===a&&(a=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=a,this.numBits=void 0===e||null===e?0:8*e.length}return e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.setNumBits=function(e){this.numBits=e},e.prototype.getText=function(){return this.text},e.prototype.getByteSegments=function(){return this.byteSegments},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getErrorsCorrected=function(){return this.errorsCorrected},e.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},e.prototype.getErasures=function(){return this.erasures},e.prototype.setErasures=function(e){this.erasures=e},e.prototype.getOther=function(){return this.other},e.prototype.setOther=function(e){this.other=e},e.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},e.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},e.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},e}();const Md=function(){function e(){}return e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new Dc;return this.logTable[e]},e.addOrSubtract=function(e,t){return e^t},e}();var Dd=function(){function e(e,t){if(0===t.length)throw new Dc;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),Wc.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var t,n=this.coefficients;if(1===e){t=0;for(var r=0,o=n.length;r!==o;r++){var a=n[r];t=Md.addOrSubtract(t,a)}return t}t=n[0];var i=n.length,s=this.field;for(r=1;r<i;r++)t=Md.addOrSubtract(s.multiply(e,t),n[r]);return t},e.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new Dc("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var o=n;n=r,r=o}var a=new Int32Array(r.length),i=r.length-n.length;Wc.arraycopy(r,0,a,0,i);for(var s=i;s<r.length;s++)a[s]=Md.addOrSubtract(n[s-i],r[s]);return new e(this.field,a)},e.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new Dc("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,o=t.coefficients,a=o.length,i=new Int32Array(r+a-1),s=this.field,l=0;l<r;l++)for(var c=n[l],d=0;d<a;d++)i[l+d]=Md.addOrSubtract(i[l+d],s.multiply(c,o[d]));return new e(s,i)},e.prototype.multiplyScalar=function(t){if(0===t)return this.field.getZero();if(1===t)return this;for(var n=this.coefficients.length,r=this.field,o=new Int32Array(n),a=this.coefficients,i=0;i<n;i++)o[i]=r.multiply(a[i],t);return new e(r,o)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new Dc;if(0===n)return this.field.getZero();for(var r=this.coefficients,o=r.length,a=new Int32Array(o+t),i=this.field,s=0;s<o;s++)a[s]=i.multiply(r[s],n);return new e(i,a)},e.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Dc("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Dc("Divide by 0");for(var t=this.field,n=t.getZero(),r=this,o=e.getCoefficient(e.getDegree()),a=t.inverse(o);r.getDegree()>=e.getDegree()&&!r.isZero();){var i=r.getDegree()-e.getDegree(),s=t.multiply(r.getCoefficient(r.getDegree()),a),l=e.multiplyByMonomial(i,s),c=t.buildMonomial(i,s);n=n.addOrSubtract(c),r=r.addOrSubtract(l)}return[n,r]},e.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){var r=this.field.log(n);0===r?e+="1":1===r?e+="a":(e+="a^",e+=r)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e},e}();const Rd=Dd;var Od=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Fd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Od(t,e),t.kind="ArithmeticException",t}(Bc);var Ld=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const zd=function(e){function t(t,n,r){var o=e.call(this)||this;o.primitive=t,o.size=n,o.generatorBase=r;for(var a=new Int32Array(n),i=1,s=0;s<n;s++)a[s]=i,(i*=2)>=n&&(i^=t,i&=n-1);o.expTable=a;var l=new Int32Array(n);for(s=0;s<n-1;s++)l[a[s]]=s;return o.logTable=l,o.zero=new Rd(o,Int32Array.from([0])),o.one=new Rd(o,Int32Array.from([1])),o}return Ld(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new Dc;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new Rd(this,n)},t.prototype.inverse=function(e){if(0===e)throw new Fd;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+qc.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(Md);var Wd=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Vd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wd(t,e),t.kind="ReedSolomonException",t}(Bc);var Ud=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Hd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ud(t,e),t.kind="IllegalStateException",t}(Bc);var Gd=function(){function e(e){this.field=e}return e.prototype.decode=function(e,t){for(var n=this.field,r=new Rd(n,e),o=new Int32Array(t),a=!0,i=0;i<t;i++){var s=r.evaluateAt(n.exp(i+n.getGeneratorBase()));o[o.length-1-i]=s,0!==s&&(a=!1)}if(!a){var l=new Rd(n,o),c=this.runEuclideanAlgorithm(n.buildMonomial(t,1),l,t),d=c[0],u=c[1],h=this.findErrorLocations(d),p=this.findErrorMagnitudes(u,h);for(i=0;i<h.length;i++){var f=e.length-1-n.log(h[i]);if(f<0)throw new Vd("Bad error location");e[f]=zd.addOrSubtract(e[f],p[i])}}},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var o=this.field,a=e,i=t,s=o.getZero(),l=o.getOne();i.getDegree()>=(n/2|0);){var c=a,d=s;if(s=l,(a=i).isZero())throw new Vd("r_{i-1} was zero");i=c;for(var u=o.getZero(),h=a.getCoefficient(a.getDegree()),p=o.inverse(h);i.getDegree()>=a.getDegree()&&!i.isZero();){var f=i.getDegree()-a.getDegree(),m=o.multiply(i.getCoefficient(i.getDegree()),p);u=u.addOrSubtract(o.buildMonomial(f,m)),i=i.addOrSubtract(a.multiplyByMonomial(f,m))}if(l=u.multiply(s).addOrSubtract(d),i.getDegree()>=a.getDegree())throw new Hd("Division algorithm failed to reduce polynomial?")}var g=l.getCoefficient(0);if(0===g)throw new Vd("sigmaTilde(0) was zero");var x=o.inverse(g);return[l.multiplyScalar(x),i.multiplyScalar(x)]},e.prototype.findErrorLocations=function(e){var t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),r=0,o=this.field,a=1;a<o.getSize()&&r<t;a++)0===e.evaluateAt(a)&&(n[r]=o.inverse(a),r++);if(r!==t)throw new Vd("Error locator degree does not match number of roots");return n},e.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,r=new Int32Array(n),o=this.field,a=0;a<n;a++){for(var i=o.inverse(t[a]),s=1,l=0;l<n;l++)if(a!==l){var c=o.multiply(t[l],i),d=0===(1&c)?1|c:-2&c;s=o.multiply(s,d)}r[a]=o.multiply(e.evaluateAt(i),o.inverse(s)),0!==o.getGeneratorBase()&&(r[a]=o.multiply(r[a],i))}return r},e}();const Xd=Gd;var Kd;!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(Kd||(Kd={}));const Yd=function(){function e(){}return e.prototype.decode=function(t){this.ddata=t;var n=t.getBits(),r=this.extractBits(n),o=this.correctBits(r),a=e.convertBoolArrayToByteArray(o),i=e.getEncodedData(o),s=new Td(a,i,null,null);return s.setNumBits(o.length),s},e.highLevelDecode=function(e){return this.getEncodedData(e)},e.getEncodedData=function(t){for(var n=t.length,r=Kd.UPPER,o=Kd.UPPER,a="",i=0;i<n;)if(o===Kd.BINARY){if(n-i<5)break;var s=e.readCode(t,i,5);if(i+=5,0===s){if(n-i<11)break;s=e.readCode(t,i,11)+31,i+=11}for(var l=0;l<s;l++){if(n-i<8){i=n;break}var c=e.readCode(t,i,8);a+=ld.castAsNonUtf8Char(c),i+=8}o=r}else{var d=o===Kd.DIGIT?4:5;if(n-i<d)break;c=e.readCode(t,i,d);i+=d;var u=e.getCharacter(o,c);u.startsWith("CTRL_")?(r=o,o=e.getTable(u.charAt(5)),"L"===u.charAt(6)&&(r=o)):(a+=u,o=r)}return a},e.getTable=function(e){switch(e){case"L":return Kd.LOWER;case"P":return Kd.PUNCT;case"M":return Kd.MIXED;case"D":return Kd.DIGIT;case"B":return Kd.BINARY;default:return Kd.UPPER}},e.getCharacter=function(t,n){switch(t){case Kd.UPPER:return e.UPPER_TABLE[n];case Kd.LOWER:return e.LOWER_TABLE[n];case Kd.MIXED:return e.MIXED_TABLE[n];case Kd.PUNCT:return e.PUNCT_TABLE[n];case Kd.DIGIT:return e.DIGIT_TABLE[n];default:throw new Hd("Bad table")}},e.prototype.correctBits=function(t){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=zd.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=zd.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=zd.AZTEC_DATA_10):(r=12,n=zd.AZTEC_DATA_12);var o=this.ddata.getNbDatablocks(),a=t.length/r;if(a<o)throw new ed;for(var i=t.length%r,s=new Int32Array(a),l=0;l<a;l++,i+=r)s[l]=e.readCode(t,i,r);try{new Xd(n).decode(s,a-o)}catch(m){throw new ed(m)}var c=(1<<r)-1,d=0;for(l=0;l<o;l++){if(0===(p=s[l])||p===c)throw new ed;1!==p&&p!==c-1||d++}var u=new Array(o*r-d),h=0;for(l=0;l<o;l++){var p;if(1===(p=s[l])||p===c-1)u.fill(p>1,h,h+r-1),h+=r-1;else for(var f=r-1;f>=0;--f)u[h++]=0!==(p&1<<f)}return u},e.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,o=new Int32Array(r),a=new Array(this.totalBitsInLayer(n,t));if(t)for(var i=0;i<o.length;i++)o[i]=i;else{var s=r+1+2*qc.truncDivision(qc.truncDivision(r,2)-1,15),l=r/2,c=qc.truncDivision(s,2);for(i=0;i<l;i++){var d=i+qc.truncDivision(i,15);o[l-i-1]=c-d-1,o[l+i]=c+d+1}}i=0;for(var u=0;i<n;i++){for(var h=4*(n-i)+(t?9:12),p=2*i,f=r-1-p,m=0;m<h;m++)for(var g=2*m,x=0;x<2;x++)a[u+g+x]=e.get(o[p+x],o[p+m]),a[u+2*h+g+x]=e.get(o[p+m],o[f-x]),a[u+4*h+g+x]=e.get(o[f-x],o[f-m]),a[u+6*h+g+x]=e.get(o[f-m],o[p+x]);u+=8*h}return a},e.readCode=function(e,t,n){for(var r=0,o=t;o<t+n;o++)r<<=1,e[o]&&(r|=1);return r},e.readByte=function(t,n){var r=t.length-n;return r>=8?e.readCode(t,n,8):e.readCode(t,n,r)<<8-r},e.convertBoolArrayToByteArray=function(t){for(var n=new Uint8Array((t.length+7)/8),r=0;r<n.length;r++)n[r]=e.readByte(t,8*r);return n},e.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],e.MIXED_TABLE=["CTRL_PS"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],e.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],e}();const qd=function(){function e(){}return e.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},e.distance=function(e,t,n,r){var o=e-n,a=t-r;return Math.sqrt(o*o+a*a)},e.sum=function(e){for(var t=0,n=0,r=e.length;n!==r;n++){t+=e[n]}return t},e}();const Zd=function(){function e(){}return e.floatToIntBits=function(e){return e},e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}();const Jd=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this.x===n.x&&this.y===n.y}return!1},e.prototype.hashCode=function(){return 31*Zd.floatToIntBits(this.x)+Zd.floatToIntBits(this.y)},e.prototype.toString=function(){return"("+this.x+","+this.y+")"},e.orderBestPatterns=function(e){var t,n,r,o=this.distance(e[0],e[1]),a=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]);if(a>=o&&a>=i?(n=e[0],t=e[1],r=e[2]):i>=a&&i>=o?(n=e[1],t=e[0],r=e[2]):(n=e[2],t=e[0],r=e[1]),this.crossProductZ(t,n,r)<0){var s=t;t=r,r=s}e[0]=t,e[1]=n,e[2]=r},e.distance=function(e,t){return qd.distance(e.x,e.y,t.x,t.y)},e.crossProductZ=function(e,t,n){var r=t.x,o=t.y;return(n.x-r)*(e.y-o)-(n.y-o)*(e.x-r)},e}();const Qd=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}();var $d=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const eu=function(e){function t(t,n,r,o,a){var i=e.call(this,t,n)||this;return i.compact=r,i.nbDatablocks=o,i.nbLayers=a,i}return $d(t,e),t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(Qd);const tu=function(){function e(t,n,r,o){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),void 0!==n&&null!==n||(n=e.INIT_SIZE),void 0!==r&&null!==r||(r=t.getWidth()/2|0),void 0!==o&&null!==o||(o=t.getHeight()/2|0);var a=n/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=o-a,this.downInit=o+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new hd}return e.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,o=!1,a=!0,i=!1,s=!1,l=!1,c=!1,d=!1,u=this.width,h=this.height;a;){a=!1;for(var p=!0;(p||!s)&&t<u;)(p=this.containsBlackPoint(n,r,t,!1))?(t++,a=!0,s=!0):s||t++;if(t>=u){o=!0;break}for(var f=!0;(f||!l)&&r<h;)(f=this.containsBlackPoint(e,t,r,!0))?(r++,a=!0,l=!0):l||r++;if(r>=h){o=!0;break}for(var m=!0;(m||!c)&&e>=0;)(m=this.containsBlackPoint(n,r,e,!1))?(e--,a=!0,c=!0):c||e--;if(e<0){o=!0;break}for(var g=!0;(g||!d)&&n>=0;)(g=this.containsBlackPoint(e,t,n,!0))?(n--,a=!0,d=!0):d||n--;if(n<0){o=!0;break}a&&(i=!0)}if(!o&&i){for(var x=t-e,y=null,v=1;null===y&&v<x;v++)y=this.getBlackPointOnSegment(e,r-v,e+v,r);if(null==y)throw new hd;var b=null;for(v=1;null===b&&v<x;v++)b=this.getBlackPointOnSegment(e,n+v,e+v,n);if(null==b)throw new hd;var w=null;for(v=1;null===w&&v<x;v++)w=this.getBlackPointOnSegment(t,n+v,t-v,n);if(null==w)throw new hd;var k=null;for(v=1;null===k&&v<x;v++)k=this.getBlackPointOnSegment(t,r-v,t-v,r);if(null==k)throw new hd;return this.centerEdges(k,y,w,b)}throw new hd},e.prototype.getBlackPointOnSegment=function(e,t,n,r){for(var o=qd.round(qd.distance(e,t,n,r)),a=(n-e)/o,i=(r-t)/o,s=this.image,l=0;l<o;l++){var c=qd.round(e+l*a),d=qd.round(t+l*i);if(s.get(c,d))return new Jd(c,d)}return null},e.prototype.centerEdges=function(t,n,r,o){var a=t.getX(),i=t.getY(),s=n.getX(),l=n.getY(),c=r.getX(),d=r.getY(),u=o.getX(),h=o.getY(),p=e.CORR;return a<this.width/2?[new Jd(u-p,h+p),new Jd(s+p,l+p),new Jd(c-p,d-p),new Jd(a+p,i-p)]:[new Jd(u+p,h+p),new Jd(s+p,l-p),new Jd(c-p,d+p),new Jd(a-p,i-p)]},e.prototype.containsBlackPoint=function(e,t,n,r){var o=this.image;if(r){for(var a=e;a<=t;a++)if(o.get(a,n))return!0}else for(var i=e;i<=t;i++)if(o.get(n,i))return!0;return!1},e.INIT_SIZE=10,e.CORR=1,e}();const nu=function(){function e(){}return e.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),r=e.getHeight(),o=!0,a=0;a<t.length&&o;a+=2){var i=Math.floor(t[a]),s=Math.floor(t[a+1]);if(i<-1||i>n||s<-1||s>r)throw new hd;o=!1,-1===i?(t[a]=0,o=!0):i===n&&(t[a]=n-1,o=!0),-1===s?(t[a+1]=0,o=!0):s===r&&(t[a+1]=r-1,o=!0)}o=!0;for(a=t.length-2;a>=0&&o;a-=2){i=Math.floor(t[a]),s=Math.floor(t[a+1]);if(i<-1||i>n||s<-1||s>r)throw new hd;o=!1,-1===i?(t[a]=0,o=!0):i===n&&(t[a]=n-1,o=!0),-1===s?(t[a+1]=0,o=!0):s===r&&(t[a+1]=r-1,o=!0)}},e}();const ru=function(){function e(e,t,n,r,o,a,i,s,l){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=o,this.a32=a,this.a13=i,this.a23=s,this.a33=l}return e.quadrilateralToQuadrilateral=function(t,n,r,o,a,i,s,l,c,d,u,h,p,f,m,g){var x=e.quadrilateralToSquare(t,n,r,o,a,i,s,l);return e.squareToQuadrilateral(c,d,u,h,p,f,m,g).times(x)},e.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,r=this.a12,o=this.a13,a=this.a21,i=this.a22,s=this.a23,l=this.a31,c=this.a32,d=this.a33,u=0;u<t;u+=2){var h=e[u],p=e[u+1],f=o*h+s*p+d;e[u]=(n*h+a*p+l)/f,e[u+1]=(r*h+i*p+c)/f}},e.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,r=this.a12,o=this.a13,a=this.a21,i=this.a22,s=this.a23,l=this.a31,c=this.a32,d=this.a33,u=e.length,h=0;h<u;h++){var p=e[h],f=t[h],m=o*p+s*f+d;e[h]=(n*p+a*f+l)/m,t[h]=(r*p+i*f+c)/m}},e.squareToQuadrilateral=function(t,n,r,o,a,i,s,l){var c=t-r+a-s,d=n-o+i-l;if(0===c&&0===d)return new e(r-t,a-r,t,o-n,i-o,n,0,0,1);var u=r-a,h=s-a,p=o-i,f=l-i,m=u*f-h*p,g=(c*f-h*d)/m,x=(u*d-c*p)/m;return new e(r-t+g*r,s-t+x*s,t,o-n+g*o,l-n+x*l,n,g,x,1)},e.quadrilateralToSquare=function(t,n,r,o,a,i,s,l){return e.squareToQuadrilateral(t,n,r,o,a,i,s,l).buildAdjoint()},e.prototype.buildAdjoint=function(){return new e(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},e.prototype.times=function(t){return new e(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},e}();var ou=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const au=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ou(t,e),t.prototype.sampleGrid=function(e,t,n,r,o,a,i,s,l,c,d,u,h,p,f,m,g,x,y){var v=ru.quadrilateralToQuadrilateral(r,o,a,i,s,l,c,d,u,h,p,f,m,g,x,y);return this.sampleGridWithTransform(e,t,n,v)},t.prototype.sampleGridWithTransform=function(e,t,n,r){if(t<=0||n<=0)throw new hd;for(var o=new dd(t,n),a=new Float32Array(2*t),i=0;i<n;i++){for(var s=a.length,l=i+.5,c=0;c<s;c+=2)a[c]=c/2+.5,a[c+1]=l;r.transformPoints(a),nu.checkAndNudgePoints(e,a);try{for(c=0;c<s;c+=2)e.get(Math.floor(a[c]),Math.floor(a[c+1]))&&o.set(c/2,i)}catch(d){throw new hd}}return o},t}(nu);const iu=function(){function e(){}return e.setGridSampler=function(t){e.gridSampler=t},e.getInstance=function(){return e.gridSampler},e.gridSampler=new au,e}();var su=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.toResultPoint=function(){return new Jd(this.getX(),this.getY())},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e}(),lu=function(){function e(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return e.prototype.detect=function(){return this.detectMirror(!1)},e.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var r=n[0];n[0]=n[2],n[2]=r}this.extractParameters(n);var o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),a=this.getMatrixCornerPoints(n);return new eu(o,a,this.compact,this.nbDataBlocks,this.nbLayers)},e.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new hd;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var r=0,o=0;o<4;o++){var a=n[(this.shift+o)%4];this.compact?(r<<=7,r+=a>>1&127):(r<<=10,r+=(a>>2&992)+(a>>1&31))}var i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))},e.prototype.getRotation=function(e,t){var n=0;e.forEach(function(e,r,o){n=(n<<3)+((e>>t-2<<1)+(1&e))}),n=((1&n)<<11)+(n>>1);for(var r=0;r<4;r++)if(qc.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new hd},e.prototype.getCorrectedParameterData=function(e,t){var n,r;t?(n=7,r=2):(n=10,r=4);for(var o=n-r,a=new Int32Array(n),i=n-1;i>=0;--i)a[i]=15&e,e>>=4;try{new Xd(zd.AZTEC_PARAM).decode(a,o)}catch(l){throw new hd}var s=0;for(i=0;i<r;i++)s=(s<<4)+a[i];return s},e.prototype.getBullsEyeCorners=function(e){var t=e,n=e,r=e,o=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var i=this.getFirstDifferent(t,a,1,-1),s=this.getFirstDifferent(n,a,1,1),l=this.getFirstDifferent(r,a,-1,1),c=this.getFirstDifferent(o,a,-1,-1);if(this.nbCenterLayers>2){var d=this.distancePoint(c,i)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(d<.75||d>1.25||!this.isWhiteOrBlackRectangle(i,s,l,c))break}t=i,n=s,r=l,o=c,a=!a}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new hd;this.compact=5===this.nbCenterLayers;var u=new Jd(t.getX()+.5,t.getY()-.5),h=new Jd(n.getX()+.5,n.getY()+.5),p=new Jd(r.getX()-.5,r.getY()+.5),f=new Jd(o.getX()-.5,o.getY()-.5);return this.expandSquare([u,h,p,f],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},e.prototype.getMatrixCenter=function(){var e,t,n,r;try{e=(l=new tu(this.image).detect())[0],t=l[1],n=l[2],r=l[3]}catch(iN){var o=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new su(o+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new su(o+7,a+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new su(o-7,a+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new su(o-7,a-7),!1,-1,-1).toResultPoint()}var i=qd.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=qd.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{var l;e=(l=new tu(this.image,15,i,s).detect())[0],t=l[1],n=l[2],r=l[3]}catch(iN){e=this.getFirstDifferent(new su(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new su(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new su(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new su(i-7,s-7),!1,-1,-1).toResultPoint()}return i=qd.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=qd.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new su(i,s)},e.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},e.prototype.sampleGrid=function(e,t,n,r,o){var a=iu.getInstance(),i=this.getDimension(),s=i/2-this.nbCenterLayers,l=i/2+this.nbCenterLayers;return a.sampleGrid(e,i,i,s,s,l,s,l,l,s,l,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),o.getX(),o.getY())},e.prototype.sampleLine=function(e,t,n){for(var r=0,o=this.distanceResultPoint(e,t),a=o/n,i=e.getX(),s=e.getY(),l=a*(t.getX()-e.getX())/o,c=a*(t.getY()-e.getY())/o,d=0;d<n;d++)this.image.get(qd.round(i+d*l),qd.round(s+d*c))&&(r|=1<<n-d-1);return r},e.prototype.isWhiteOrBlackRectangle=function(e,t,n,r){e=new su(e.getX()-3,e.getY()+3),t=new su(t.getX()-3,t.getY()-3),n=new su(n.getX()+3,n.getY()-3),r=new su(r.getX()+3,r.getY()+3);var o=this.getColor(r,e);if(0===o)return!1;var a=this.getColor(e,t);return a===o&&((a=this.getColor(t,n))===o&&(a=this.getColor(n,r))===o)},e.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,o=(t.getY()-e.getY())/n,a=0,i=e.getX(),s=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n),d=0;d<c;d++)i+=r,s+=o,this.image.get(qd.round(i),qd.round(s))!==l&&a++;var u=a/n;return u>.1&&u<.9?0:u<=.1===l?1:-1},e.prototype.getFirstDifferent=function(e,t,n,r){for(var o=e.getX()+n,a=e.getY()+r;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=n,a+=r;for(o-=n,a-=r;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=n;for(o-=n;this.isValid(o,a)&&this.image.get(o,a)===t;)a+=r;return new su(o,a-=r)},e.prototype.expandSquare=function(e,t,n){var r=n/(2*t),o=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),i=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,l=new Jd(i+r*o,s+r*a),c=new Jd(i-r*o,s-r*a);return o=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),i=(e[1].getX()+e[3].getX())/2,s=(e[1].getY()+e[3].getY())/2,[l,new Jd(i+r*o,s+r*a),c,new Jd(i-r*o,s-r*a)]},e.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},e.prototype.isValidPoint=function(e){var t=qd.round(e.getX()),n=qd.round(e.getY());return this.isValid(t,n)},e.prototype.distancePoint=function(e,t){return qd.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.distanceResultPoint=function(e,t){return qd.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(qc.truncDivision(this.nbLayers-4,8)+1)+15},e}();const cu=lu;const du=function(){function e(){}return e.prototype.decode=function(e,t){void 0===t&&(t=null);var n=null,r=new cu(e.getBlackMatrix()),o=null,a=null;try{o=(i=r.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(t,o),a=(new Yd).decode(i)}catch(iN){n=iN}if(null==a)try{var i;o=(i=r.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(t,o),a=(new Yd).decode(i)}catch(iN){if(null!=n)throw n;throw iN}var s=new Ed(a.getText(),a.getRawBytes(),a.getNumBits(),o,Pd.AZTEC,Wc.currentTimeMillis()),l=a.getByteSegments();null!=l&&s.putMetadata(Id.BYTE_SEGMENTS,l);var c=a.getECLevel();return null!=c&&s.putMetadata(Id.ERROR_CORRECTION_LEVEL,c),s},e.prototype.reportFoundResultPoints=function(e,t){if(null!=e){var n=e.get(Qc.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach(function(e,t,r){n.foundPossibleResultPoint(e)})}},e.prototype.reset=function(){},e}();var uu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t){return void 0===t&&(t=500),e.call(this,new du,t)||this}uu(t,e)}(Nd);const hu=function(){function e(){}return e.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch(c){if(t&&!0===t.get(Qc.TRY_HARDER)&&e.isRotateSupported()){var n=e.rotateCounterClockwise(),r=this.doDecode(n,t),o=r.getResultMetadata(),a=270;null!==o&&!0===o.get(Id.ORIENTATION)&&(a+=o.get(Id.ORIENTATION)%360),r.putMetadata(Id.ORIENTATION,a);var i=r.getResultPoints();if(null!==i)for(var s=n.getHeight(),l=0;l<i.length;l++)i[l]=new Jd(s-i[l].getY()-1,i[l].getX());return r}throw new hd}},e.prototype.reset=function(){},e.prototype.doDecode=function(e,t){var n,r=e.getWidth(),o=e.getHeight(),a=new Zc(r),i=t&&!0===t.get(Qc.TRY_HARDER),s=Math.max(1,o>>(i?8:5));n=i?o:15;for(var l=Math.trunc(o/2),c=0;c<n;c++){var d=Math.trunc((c+1)/2),u=l+s*(0===(1&c)?d:-d);if(u<0||u>=o)break;try{a=e.getBlackRow(u,a)}catch(g){continue}for(var h=function(e){if(1===e&&(a.reverse(),t&&!0===t.get(Qc.NEED_RESULT_POINT_CALLBACK))){var n=new Map;t.forEach(function(e,t){return n.set(t,e)}),n.delete(Qc.NEED_RESULT_POINT_CALLBACK),t=n}try{var o=p.decodeRow(u,a,t);if(1===e){o.putMetadata(Id.ORIENTATION,180);var i=o.getResultPoints();null!==i&&(i[0]=new Jd(r-i[0].getX()-1,i[0].getY()),i[1]=new Jd(r-i[1].getX()-1,i[1].getY()))}return{value:o}}catch(s){}},p=this,f=0;f<2;f++){var m=h(f);if("object"===typeof m)return m.value}}throw new hd},e.recordPattern=function(e,t,n){for(var r=n.length,o=0;o<r;o++)n[o]=0;var a=e.getSize();if(t>=a)throw new hd;for(var i=!e.get(t),s=0,l=t;l<a;){if(e.get(l)!==i)n[s]++;else{if(++s===r)break;n[s]=1,i=!i}l++}if(s!==r&&(s!==r-1||l!==a))throw new hd},e.recordPatternInReverse=function(t,n,r){for(var o=r.length,a=t.get(n);n>0&&o>=0;)t.get(--n)!==a&&(o--,a=!a);if(o>=0)throw new hd;e.recordPattern(t,n+1,r)},e.patternMatchVariance=function(e,t,n){for(var r=e.length,o=0,a=0,i=0;i<r;i++)o+=e[i],a+=t[i];if(o<a)return Number.POSITIVE_INFINITY;var s=o/a;n*=s;for(var l=0,c=0;c<r;c++){var d=e[c],u=t[c]*s,h=d>u?d-u:u-d;if(h>n)return Number.POSITIVE_INFINITY;l+=h}return l/o},e}();var pu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const fu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pu(t,e),t.findStartPattern=function(e){for(var n=e.getSize(),r=e.getNextSet(0),o=0,a=Int32Array.from([0,0,0,0,0,0]),i=r,s=!1,l=r;l<n;l++)if(e.get(l)!==s)a[o]++;else{if(5===o){for(var c=t.MAX_AVG_VARIANCE,d=-1,u=t.CODE_START_A;u<=t.CODE_START_C;u++){var h=hu.patternMatchVariance(a,t.CODE_PATTERNS[u],t.MAX_INDIVIDUAL_VARIANCE);h<c&&(c=h,d=u)}if(d>=0&&e.isRange(Math.max(0,i-(l-i)/2),i,!1))return Int32Array.from([i,l,d]);i+=a[0]+a[1],(a=a.slice(2,a.length))[o-1]=0,a[o]=0,o--}else o++;a[o]=1,s=!s}throw new hd},t.decodeCode=function(e,n,r){hu.recordPattern(e,r,n);for(var o=t.MAX_AVG_VARIANCE,a=-1,i=0;i<t.CODE_PATTERNS.length;i++){var s=t.CODE_PATTERNS[i],l=this.patternMatchVariance(n,s,t.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,a=i)}if(a>=0)return a;throw new hd},t.prototype.decodeRow=function(e,n,r){var o,a=r&&!0===r.get(Qc.ASSUME_GS1),i=t.findStartPattern(n),s=i[2],l=0,c=new Uint8Array(20);switch(c[l++]=s,s){case t.CODE_START_A:o=t.CODE_CODE_A;break;case t.CODE_START_B:o=t.CODE_CODE_B;break;case t.CODE_START_C:o=t.CODE_CODE_C;break;default:throw new ed}for(var d=!1,u=!1,h="",p=i[0],f=i[1],m=Int32Array.from([0,0,0,0,0,0]),g=0,x=0,y=s,v=0,b=!0,w=!1,k=!1;!d;){var C=u;switch(u=!1,g=x,x=t.decodeCode(n,m,f),c[l++]=x,x!==t.CODE_STOP&&(b=!0),x!==t.CODE_STOP&&(y+=++v*x),p=f,f+=m.reduce(function(e,t){return e+t},0),x){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new ed}switch(o){case t.CODE_CODE_A:if(x<64)h+=k===w?String.fromCharCode(" ".charCodeAt(0)+x):String.fromCharCode(" ".charCodeAt(0)+x+128),k=!1;else if(x<96)h+=k===w?String.fromCharCode(x-64):String.fromCharCode(x+64),k=!1;else switch(x!==t.CODE_STOP&&(b=!1),x){case t.CODE_FNC_1:a&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!w&&k?(w=!0,k=!1):w&&k?(w=!1,k=!1):k=!0;break;case t.CODE_SHIFT:u=!0,o=t.CODE_CODE_B;break;case t.CODE_CODE_B:o=t.CODE_CODE_B;break;case t.CODE_CODE_C:o=t.CODE_CODE_C;break;case t.CODE_STOP:d=!0}break;case t.CODE_CODE_B:if(x<96)h+=k===w?String.fromCharCode(" ".charCodeAt(0)+x):String.fromCharCode(" ".charCodeAt(0)+x+128),k=!1;else switch(x!==t.CODE_STOP&&(b=!1),x){case t.CODE_FNC_1:a&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!w&&k?(w=!0,k=!1):w&&k?(w=!1,k=!1):k=!0;break;case t.CODE_SHIFT:u=!0,o=t.CODE_CODE_A;break;case t.CODE_CODE_A:o=t.CODE_CODE_A;break;case t.CODE_CODE_C:o=t.CODE_CODE_C;break;case t.CODE_STOP:d=!0}break;case t.CODE_CODE_C:if(x<100)x<10&&(h+="0"),h+=x;else switch(x!==t.CODE_STOP&&(b=!1),x){case t.CODE_FNC_1:a&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_CODE_A:o=t.CODE_CODE_A;break;case t.CODE_CODE_B:o=t.CODE_CODE_B;break;case t.CODE_STOP:d=!0}}C&&(o=o===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var j=f-p;if(f=n.getNextUnset(f),!n.isRange(f,Math.min(n.getSize(),f+(f-p)/2),!1))throw new hd;if((y-=v*g)%103!==g)throw new Fc;var _=h.length;if(0===_)throw new hd;_>0&&b&&(h=o===t.CODE_CODE_C?h.substring(0,_-2):h.substring(0,_-1));for(var N=(i[1]+i[0])/2,S=p+j/2,E=c.length,A=new Uint8Array(E),P=0;P<E;P++)A[P]=c[P];var B=[new Jd(N,e),new Jd(S,e)];return new Ed(h,A,0,B,Pd.CODE_128,(new Date).getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(hu);var mu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gu=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xu=function(e){function t(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.call(this)||this;return r.usingCheckDigit=t,r.extendedMode=n,r.decodeRowResult="",r.counters=new Int32Array(9),r}return mu(t,e),t.prototype.decodeRow=function(e,n,r){var o,a,i,s,l=this.counters;l.fill(0),this.decodeRowResult="";var c,d,u=t.findAsteriskPattern(n,l),h=n.getNextSet(u[1]),p=n.getSize();do{t.recordPattern(n,h,l);var f=t.toNarrowWidePattern(l);if(f<0)throw new hd;c=t.patternToChar(f),this.decodeRowResult+=c,d=h;try{for(var m=(o=void 0,gu(l)),g=m.next();!g.done;g=m.next()){h+=g.value}}catch(N){o={error:N}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}h=n.getNextSet(h)}while("*"!==c);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x,y=0;try{for(var v=gu(l),b=v.next();!b.done;b=v.next()){y+=b.value}}catch(S){i={error:S}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(i)throw i.error}}if(h!==p&&2*(h-d-y)<y)throw new hd;if(this.usingCheckDigit){for(var w=this.decodeRowResult.length-1,k=0,C=0;C<w;C++)k+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(C));if(this.decodeRowResult.charAt(w)!==t.ALPHABET_STRING.charAt(k%43))throw new Fc;this.decodeRowResult=this.decodeRowResult.substring(0,w)}if(0===this.decodeRowResult.length)throw new hd;x=this.extendedMode?t.decodeExtended(this.decodeRowResult):this.decodeRowResult;var j=(u[1]+u[0])/2,_=d+y/2;return new Ed(x,null,0,[new Jd(j,e),new Jd(_,e)],Pd.CODE_39,(new Date).getTime())},t.findAsteriskPattern=function(e,n){for(var r=e.getSize(),o=e.getNextSet(0),a=0,i=o,s=!1,l=n.length,c=o;c<r;c++)if(e.get(c)!==s)n[a]++;else{if(a===l-1){if(this.toNarrowWidePattern(n)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,i-Math.floor((c-i)/2)),i,!1))return[i,c];i+=n[0]+n[1],n.copyWithin(0,2,2+a-1),n[a-1]=0,n[a]=0,a--}else a++;n[a]=1,s=!s}throw new hd},t.toNarrowWidePattern=function(e){var t,n,r,o=e.length,a=0;do{var i=2147483647;try{for(var s=(t=void 0,gu(e)),l=s.next();!l.done;l=s.next()){(h=l.value)<i&&h>a&&(i=h)}}catch(p){t={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}a=i,r=0;for(var c=0,d=0,u=0;u<o;u++){(h=e[u])>a&&(d|=1<<o-1-u,r++,c+=h)}if(3===r){for(u=0;u<o&&r>0;u++){var h;if((h=e[u])>a&&(r--,2*h>=c))return-1}return d}}while(r>3);return-1},t.patternToChar=function(e){for(var n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===e)return t.ALPHABET_STRING.charAt(n);if(e===t.ASTERISK_ENCODING)return"*";throw new hd},t.decodeExtended=function(e){for(var t=e.length,n="",r=0;r<t;r++){var o=e.charAt(r);if("+"===o||"$"===o||"%"===o||"/"===o){var a=e.charAt(r+1),i="\0";switch(o){case"+":if(!(a>="A"&&a<="Z"))throw new ed;i=String.fromCharCode(a.charCodeAt(0)+32);break;case"$":if(!(a>="A"&&a<="Z"))throw new ed;i=String.fromCharCode(a.charCodeAt(0)-64);break;case"%":if(a>="A"&&a<="E")i=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")i=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")i=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")i=String.fromCharCode(a.charCodeAt(0)+43);else if("U"===a)i="\0";else if("V"===a)i="@";else if("W"===a)i="`";else{if("X"!==a&&"Y"!==a&&"Z"!==a)throw new ed;i="\x7f"}break;case"/":if(a>="A"&&a<="O")i=String.fromCharCode(a.charCodeAt(0)-32);else{if("Z"!==a)throw new ed;i=":"}}n+=i,r++}else n+=o}return n},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(hu);const yu=xu;var vu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bu=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wu=function(e){function t(){var t=e.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return vu(t,e),t.prototype.decodeRow=function(e,n,r){var o,a,i,s,l,c,d=this.findAsteriskPattern(n),u=n.getNextSet(d[1]),h=n.getSize(),p=this.counters;p.fill(0),this.decodeRowResult="";do{t.recordPattern(n,u,p);var f=this.toPattern(p);if(f<0)throw new hd;l=this.patternToChar(f),this.decodeRowResult+=l,c=u;try{for(var m=(o=void 0,bu(p)),g=m.next();!g.done;g=m.next()){u+=g.value}}catch(C){o={error:C}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}u=n.getNextSet(u)}while("*"!==l);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var x=0;try{for(var y=bu(p),v=y.next();!v.done;v=y.next()){x+=v.value}}catch(j){i={error:j}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}if(u===h||!n.get(u))throw new hd;if(this.decodeRowResult.length<2)throw new hd;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var b=this.decodeExtended(this.decodeRowResult),w=(d[1]+d[0])/2,k=c+x/2;return new Ed(b,null,0,[new Jd(w,e),new Jd(k,e)],Pd.CODE_93,(new Date).getTime())},t.prototype.findAsteriskPattern=function(e){var n=e.getSize(),r=e.getNextSet(0);this.counters.fill(0);for(var o=this.counters,a=r,i=!1,s=o.length,l=0,c=r;c<n;c++)if(e.get(c)!==i)o[l]++;else{if(l===s-1){if(this.toPattern(o)===t.ASTERISK_ENCODING)return new Int32Array([a,c]);a+=o[0]+o[1],o.copyWithin(0,2,2+l-1),o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,i=!i}throw new hd},t.prototype.toPattern=function(e){var t,n,r=0;try{for(var o=bu(e),a=o.next();!a.done;a=o.next()){r+=a.value}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}for(var i=0,s=e.length,l=0;l<s;l++){var c=Math.round(9*e[l]/r);if(c<1||c>4)return-1;if(0===(1&l))for(var d=0;d<c;d++)i=i<<1|1;else i<<=c}return i},t.prototype.patternToChar=function(e){for(var n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===e)return t.ALPHABET_STRING.charAt(n);throw new hd},t.prototype.decodeExtended=function(e){for(var t=e.length,n="",r=0;r<t;r++){var o=e.charAt(r);if(o>="a"&&o<="d"){if(r>=t-1)throw new ed;var a=e.charAt(r+1),i="\0";switch(o){case"d":if(!(a>="A"&&a<="Z"))throw new ed;i=String.fromCharCode(a.charCodeAt(0)+32);break;case"a":if(!(a>="A"&&a<="Z"))throw new ed;i=String.fromCharCode(a.charCodeAt(0)-64);break;case"b":if(a>="A"&&a<="E")i=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")i=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")i=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")i=String.fromCharCode(a.charCodeAt(0)+43);else if("U"===a)i="\0";else if("V"===a)i="@";else if("W"===a)i="`";else{if(!(a>="X"&&a<="Z"))throw new ed;i=String.fromCharCode(127)}break;case"c":if(a>="A"&&a<="O")i=String.fromCharCode(a.charCodeAt(0)-32);else{if("Z"!==a)throw new ed;i=":"}}n+=i,r++}else n+=o}return n},t.prototype.checkChecksums=function(e){var t=e.length;this.checkOneChecksum(e,t-2,20),this.checkOneChecksum(e,t-1,15)},t.prototype.checkOneChecksum=function(e,n,r){for(var o=1,a=0,i=n-1;i>=0;i--)a+=o*t.ALPHABET_STRING.indexOf(e.charAt(i)),++o>r&&(o=1);if(e.charAt(n)!==t.ALPHABET_STRING[a%47])throw new Fc},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(hu);const ku=wu;var Cu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ju=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return Cu(t,e),t.prototype.decodeRow=function(e,n,r){var o,a,i=this.decodeStart(n),s=this.decodeEnd(n),l=new cd;t.decodeMiddle(n,i[1],s[0],l);var c=l.toString(),d=null;null!=r&&(d=r.get(Qc.ALLOWED_LENGTHS)),null==d&&(d=t.DEFAULT_ALLOWED_LENGTHS);var u=c.length,h=!1,p=0;try{for(var f=ju(d),m=f.next();!m.done;m=f.next()){var g=m.value;if(u===g){h=!0;break}g>p&&(p=g)}}catch(y){o={error:y}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}if(!h&&u>p&&(h=!0),!h)throw new ed;var x=[new Jd(i[1],e),new Jd(s[0],e)];return new Ed(c,null,0,x,Pd.ITF,(new Date).getTime())},t.decodeMiddle=function(e,n,r,o){var a=new Int32Array(10),i=new Int32Array(5),s=new Int32Array(5);for(a.fill(0),i.fill(0),s.fill(0);n<r;){hu.recordPattern(e,n,a);for(var l=0;l<5;l++){var c=2*l;i[l]=a[c],s[l]=a[c+1]}var d=t.decodeDigit(i);o.append(d.toString()),d=this.decodeDigit(s),o.append(d.toString()),a.forEach(function(e){n+=e})}},t.prototype.decodeStart=function(e){var n=t.skipWhiteSpace(e),r=t.findGuardPattern(e,n,t.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r},t.prototype.validateQuietZone=function(e,t){var n=10*this.narrowLineWidth;n=n<t?n:t;for(var r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new hd},t.skipWhiteSpace=function(e){var t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new hd;return n},t.prototype.decodeEnd=function(e){e.reverse();try{var n=t.skipWhiteSpace(e),r=void 0;try{r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[0])}catch(a){a instanceof hd&&(r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);var o=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-o,r}finally{e.reverse()}},t.findGuardPattern=function(e,n,r){var o=r.length,a=new Int32Array(o),i=e.getSize(),s=!1,l=0,c=n;a.fill(0);for(var d=n;d<i;d++)if(e.get(d)!==s)a[l]++;else{if(l===o-1){if(hu.patternMatchVariance(a,r,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[c,d];c+=a[0]+a[1],Wc.arraycopy(a,2,a,0,l-1),a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,s=!s}throw new hd},t.decodeDigit=function(e){for(var n=t.MAX_AVG_VARIANCE,r=-1,o=t.PATTERNS.length,a=0;a<o;a++){var i=t.PATTERNS[a],s=hu.patternMatchVariance(e,i,t.MAX_INDIVIDUAL_VARIANCE);s<n?(n=s,r=a):s===n&&(r=-1)}if(r>=0)return r%10;throw new hd},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(hu);const Nu=_u;var Su=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Eu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return Su(t,e),t.findStartGuardPattern=function(e){for(var n,r=!1,o=0,a=Int32Array.from([0,0,0]);!r;){a=Int32Array.from([0,0,0]);var i=(n=t.findGuardPattern(e,o,!1,this.START_END_PATTERN,a))[0],s=i-((o=n[1])-i);s>=0&&(r=e.isRange(s,i,!1))}return n},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new ed;n+=o}n*=3;for(r=t-2;r>=0;r-=2){var o;if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new ed;n+=o}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))},t.findGuardPattern=function(e,n,r,o,a){for(var i=e.getSize(),s=0,l=n=r?e.getNextUnset(n):e.getNextSet(n),c=o.length,d=r,u=n;u<i;u++)if(e.get(u)!==d)a[s]++;else{if(s===c-1){if(hu.patternMatchVariance(a,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([l,u]);l+=a[0]+a[1];for(var h=a.slice(2,a.length),p=0;p<s-1;p++)a[p]=h[p];a[s-1]=0,a[s]=0,s--}else s++;a[s]=1,d=!d}throw new hd},t.decodeDigit=function(e,n,r,o){this.recordPattern(e,r,n);for(var a=this.MAX_AVG_VARIANCE,i=-1,s=o.length,l=0;l<s;l++){var c=o[l],d=hu.patternMatchVariance(n,c,t.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,i=l)}if(i>=0)return i;throw new hd},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(hu);var Au=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Pu=function(){function e(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var o=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,o),i=o.toString(),s=e.parseExtensionString(i),l=[new Jd((r[0]+r[1])/2,t),new Jd(a,t)],c=new Ed(i,null,0,l,Pd.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c},e.prototype.decodeMiddle=function(t,n,r){var o,a,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=t.getSize(),l=n[1],c=0,d=0;d<5&&l<s;d++){var u=Eu.decodeDigit(t,i,l,Eu.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+u%10);try{for(var h=(o=void 0,Au(i)),p=h.next();!p.done;p=h.next()){l+=p.value}}catch(m){o={error:m}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}u>=10&&(c|=1<<4-d),4!==d&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(5!==r.length)throw new hd;var f=this.determineCheckDigit(c);if(e.extensionChecksum(r.toString())!==f)throw new hd;return l},e.extensionChecksum=function(e){for(var t=e.length,n=0,r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return(n*=3)%10},e.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new hd},e.parseExtensionString=function(t){if(5!==t.length)return null;var n=e.parseExtension5String(t);return null==n?null:new Map([[Id.SUGGESTED_PRICE,n]])},e.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}var n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())},e}();const Bu=Pu;var Iu=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tu=function(){function e(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var o=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,o),i=o.toString(),s=e.parseExtensionString(i),l=[new Jd((r[0]+r[1])/2,t),new Jd(a,t)],c=new Ed(i,null,0,l,Pd.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c},e.prototype.decodeMiddle=function(e,t,n){var r,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=e.getSize(),s=t[1],l=0,c=0;c<2&&s<i;c++){var d=Eu.decodeDigit(e,a,s,Eu.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var u=(r=void 0,Iu(a)),h=u.next();!h.done;h=u.next()){s+=h.value}}catch(p){r={error:p}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}d>=10&&(l|=1<<1-c),1!==c&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length)throw new hd;if(parseInt(n.toString())%4!==l)throw new hd;return s},e.parseExtensionString=function(e){return 2!==e.length?null:new Map([[Id.ISSUE_NUMBER,parseInt(e)]])},e}();const Mu=Tu;const Du=function(){function e(){}return e.decodeRow=function(e,t,n){var r=Eu.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Bu).decodeRow(e,t,r)}catch(o){return(new Mu).decodeRow(e,t,r)}},e.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),e}();var Ru=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ou=function(e){function t(){var n=e.call(this)||this;n.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(e){return Int32Array.from(e)});for(var r=10;r<20;r++){for(var o=t.L_PATTERNS[r-10],a=new Int32Array(o.length),i=0;i<o.length;i++)a[i]=o[o.length-i-1];t.L_AND_G_PATTERNS[r]=a}return n}return Ru(t,e),t.prototype.decodeRow=function(e,n,r){var o=t.findStartGuardPattern(n),a=null==r?null:r.get(Qc.NEED_RESULT_POINT_CALLBACK);if(null!=a){var i=new Jd((o[0]+o[1])/2,e);a.foundPossibleResultPoint(i)}var s=this.decodeMiddle(n,o,this.decodeRowStringBuffer),l=s.rowOffset,c=s.resultString;if(null!=a){var d=new Jd(l,e);a.foundPossibleResultPoint(d)}var u=t.decodeEnd(n,l);if(null!=a){var h=new Jd((u[0]+u[1])/2,e);a.foundPossibleResultPoint(h)}var p=u[1],f=p+(p-u[0]);if(f>=n.getSize()||!n.isRange(p,f,!1))throw new hd;var m=c.toString();if(m.length<8)throw new ed;if(!t.checkChecksum(m))throw new Fc;var g=(o[1]+o[0])/2,x=(u[1]+u[0])/2,y=this.getBarcodeFormat(),v=[new Jd(g,e),new Jd(x,e)],b=new Ed(m,null,0,v,y,(new Date).getTime()),w=0;try{var k=Du.decodeRow(e,n,u[1]);b.putMetadata(Id.UPC_EAN_EXTENSION,k.getText()),b.putAllMetadata(k.getResultMetadata()),b.addResultPoints(k.getResultPoints()),w=k.getText().length}catch(N){}var C=null==r?null:r.get(Qc.ALLOWED_EAN_EXTENSIONS);if(null!=C){var j=!1;for(var _ in C)if(w.toString()===_){j=!0;break}if(!j)throw new hd}return y===Pd.EAN_13||Pd.UPC_A,b},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new ed;n+=o}n*=3;for(r=t-2;r>=0;r-=2){var o;if((o=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new ed;n+=o}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(Eu);const Fu=Ou;var Lu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zu=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Wu=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return Lu(t,e),t.prototype.decodeMiddle=function(e,n,r){var o,a,i,s,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=e.getSize(),d=n[1],u=0,h=0;h<6&&d<c;h++){var p=Fu.decodeDigit(e,l,d,Fu.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+p%10);try{for(var f=(o=void 0,zu(l)),m=f.next();!m.done;m=f.next()){d+=m.value}}catch(y){o={error:y}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}p>=10&&(u|=1<<5-h)}r=t.determineFirstDigit(r,u),d=Fu.findGuardPattern(e,d,!0,Fu.MIDDLE_PATTERN,new Int32Array(Fu.MIDDLE_PATTERN.length).fill(0))[1];for(h=0;h<6&&d<c;h++){p=Fu.decodeDigit(e,l,d,Fu.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+p);try{for(var g=(i=void 0,zu(l)),x=g.next();!x.done;x=g.next()){d+=x.value}}catch(v){i={error:v}}finally{try{x&&!x.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}}return{rowOffset:d,resultString:r}},t.prototype.getBarcodeFormat=function(){return Pd.EAN_13},t.determineFirstDigit=function(e,t){for(var n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new hd},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(Fu);const Vu=Wu;var Uu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hu=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gu=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return Uu(t,e),t.prototype.decodeMiddle=function(e,t,n){var r,o,a,i,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=e.getSize(),c=t[1],d=0;d<4&&c<l;d++){var u=Fu.decodeDigit(e,s,c,Fu.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+u);try{for(var h=(r=void 0,Hu(s)),p=h.next();!p.done;p=h.next()){c+=p.value}}catch(g){r={error:g}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}c=Fu.findGuardPattern(e,c,!0,Fu.MIDDLE_PATTERN,new Int32Array(Fu.MIDDLE_PATTERN.length).fill(0))[1];for(d=0;d<4&&c<l;d++){u=Fu.decodeDigit(e,s,c,Fu.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+u);try{for(var f=(a=void 0,Hu(s)),m=f.next();!m.done;m=f.next()){c+=m.value}}catch(x){a={error:x}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}}return{rowOffset:c,resultString:n}},t.prototype.getBarcodeFormat=function(){return Pd.EAN_8},t}(Fu);const Xu=Gu;var Ku=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Yu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ean13Reader=new Vu,t}return Ku(t,e),t.prototype.getBarcodeFormat=function(){return Pd.UPC_A},t.prototype.decode=function(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))},t.prototype.decodeMiddle=function(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)},t.prototype.maybeReturnResult=function(e){var t=e.getText();if("0"===t.charAt(0)){var n=new Ed(t.substring(1),null,null,e.getResultPoints(),Pd.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new hd},t.prototype.reset=function(){this.ean13Reader.reset()},t}(Fu);var qu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zu=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ju=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return qu(t,e),t.prototype.decodeMiddle=function(e,n,r){var o,a,i=this.decodeMiddleCounters.map(function(e){return e});i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var s=e.getSize(),l=n[1],c=0,d=0;d<6&&l<s;d++){var u=t.decodeDigit(e,i,l,t.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+u%10);try{for(var h=(o=void 0,Zu(i)),p=h.next();!p.done;p=h.next()){l+=p.value}}catch(f){o={error:f}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}u>=10&&(c|=1<<5-d)}return t.determineNumSysAndCheckDigit(new cd(r),c),l},t.prototype.decodeEnd=function(e,n){return t.findGuardPatternWithoutCounters(e,n,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return Fu.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,t){for(var n=0;n<=1;n++)for(var r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return e.insert(0,"0"+n),void e.append("0"+r);throw hd.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return Pd.UPC_E},t.convertUPCEtoUPCA=function(e){var t=e.slice(1,7).split("").map(function(e){return e.charCodeAt(0)}),n=new cd;n.append(e.charAt(0));var r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(Fu);const Qu=Ju;var $u=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eh=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},th=function(e){function t(t){var n=e.call(this)||this,r=null==t?null:t.get(Qc.POSSIBLE_FORMATS),o=[];return null!=r&&(r.indexOf(Pd.EAN_13)>-1&&o.push(new Vu),r.indexOf(Pd.UPC_A)>-1&&o.push(new Yu),r.indexOf(Pd.EAN_8)>-1&&o.push(new Xu),r.indexOf(Pd.UPC_E)>-1&&o.push(new Qu)),0===o.length&&(o.push(new Vu),o.push(new Yu),o.push(new Xu),o.push(new Qu)),n.readers=o,n}return $u(t,e),t.prototype.decodeRow=function(e,t,n){var r,o;try{for(var a=eh(this.readers),i=a.next();!i.done;i=a.next()){var s=i.value;try{var l=s.decodeRow(e,t,n),c=l.getBarcodeFormat()===Pd.EAN_13&&"0"===l.getText().charAt(0),d=null==n?null:n.get(Qc.POSSIBLE_FORMATS),u=null==d||d.includes(Pd.UPC_A);if(c&&u){var h=l.getRawBytes(),p=new Ed(l.getText().substring(1),h,h?h.length:null,l.getResultPoints(),Pd.UPC_A);return p.putAllMetadata(l.getResultMetadata()),p}return l}catch(f){}}}catch(m){r={error:m}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}throw new hd},t.prototype.reset=function(){var e,t;try{for(var n=eh(this.readers),r=n.next();!r.done;r=n.next()){r.value.reset()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t}(hu);const nh=th;var rh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return rh(t,e),t.prototype.decodeRow=function(e,t,n){var r=this.getValidRowData(t);if(!r)throw new hd;var o=this.codaBarDecodeRow(r.row);if(!o)throw new hd;return new Ed(o,null,0,[new Jd(r.left,e),new Jd(r.right,e)],Pd.CODABAR,(new Date).getTime())},t.prototype.getValidRowData=function(e){var t=e.toArray(),n=t.indexOf(!0);if(-1===n)return null;var r=t.lastIndexOf(!0);if(r<=n)return null;for(var o=[],a=(t=t.slice(n,r+1))[0],i=1,s=1;s<t.length;s++)t[s]===a?i++:(a=t[s],o.push(i),i=1);return o.push(i),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:n,right:r}},t.prototype.codaBarDecodeRow=function(e){for(var t=[],n=Math.ceil(e.reduce(function(e,t){return(e+t)/2},0));e.length>0;){var r=e.splice(0,8).splice(0,7).map(function(e){return e<n?"n":"w"}).join("");if(void 0===this.CODA_BAR_CHAR_SET[r])return null;t.push(this.CODA_BAR_CHAR_SET[r])}var o=t.join("");return this.validCodaBarString(o)?o:null},t.prototype.validCodaBarString=function(e){return/^[A-D].{1,}[A-D]$/.test(e)},t}(hu);const ah=oh;var ih=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sh=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lh=function(e){function t(){var t=e.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return ih(t,e),t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,n){for(var r=0;r<n.length;r++)if(hu.patternMatchVariance(e,n[r],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return r;throw new hd},t.count=function(e){return qd.sum(new Int32Array(e))},t.increment=function(e,t){for(var n=0,r=t[0],o=1;o<e.length;o++)t[o]>r&&(r=t[o],n=o);e[n]++},t.decrement=function(e,t){for(var n=0,r=t[0],o=1;o<e.length;o++)t[o]<r&&(r=t[o],n=o);e[n]--},t.isFinderPattern=function(e){var n,r,o=e[0]+e[1],a=o/(o+e[2]+e[3]);if(a>=t.MIN_FINDER_PATTERN_RATIO&&a<=t.MAX_FINDER_PATTERN_RATIO){var i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;try{for(var l=sh(e),c=l.next();!c.done;c=l.next()){var d=c.value;d>s&&(s=d),d<i&&(i=d)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return s<10*i}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(hu);const ch=lh;const dh=function(){function e(e,t){this.value=e,this.checksumPortion=t}return e.prototype.getValue=function(){return this.value},e.prototype.getChecksumPortion=function(){return this.checksumPortion},e.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value&&this.checksumPortion===n.checksumPortion},e.prototype.hashCode=function(){return this.value^this.checksumPortion},e}();const uh=function(){function e(e,t,n,r,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Jd(n,o)),this.resultPoints.push(new Jd(r,o))}return e.prototype.getValue=function(){return this.value},e.prototype.getStartEnd=function(){return this.startEnd},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.hashCode=function(){return this.value},e}();var hh=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ph=function(){function e(){}return e.getRSSvalue=function(t,n,r){var o,a,i=0;try{for(var s=hh(t),l=s.next();!l.done;l=s.next()){i+=l.value}}catch(x){o={error:x}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}for(var c=0,d=0,u=t.length,h=0;h<u-1;h++){var p=void 0;for(p=1,d|=1<<h;p<t[h];p++,d&=~(1<<h)){var f=e.combins(i-p-1,u-h-2);if(r&&0===d&&i-p-(u-h-1)>=u-h-1&&(f-=e.combins(i-p-(u-h),u-h-2)),u-h-1>1){for(var m=0,g=i-p-(u-h-2);g>n;g--)m+=e.combins(i-p-g-1,u-h-3);f-=m*(u-1-h)}else i-p>n&&f--;c+=f}i-=p}return c},e.combins=function(e,t){var n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);for(var o=1,a=1,i=e;i>n;i--)o*=i,a<=r&&(o/=a,a++);for(;a<=r;)o/=a,a++;return o},e}();const fh=ph;const mh=function(){function e(){}return e.buildBitArray=function(e){var t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);for(var n=new Zc(12*t),r=0,o=e[0].getRightChar().getValue(),a=11;a>=0;--a)0!==(o&1<<a)&&n.set(r),r++;for(a=1;a<e.length;++a){for(var i=e[a],s=i.getLeftChar().getValue(),l=11;l>=0;--l)0!==(s&1<<l)&&n.set(r),r++;if(null!==i.getRightChar()){var c=i.getRightChar().getValue();for(l=11;l>=0;--l)0!==(c&1<<l)&&n.set(r),r++}}return n},e}();const gh=function(){function e(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return e.prototype.getDecodedInformation=function(){return this.decodedInformation},e.prototype.isFinished=function(){return this.finished},e}();const xh=function(){function e(e){this.newPosition=e}return e.prototype.getNewPosition=function(){return this.newPosition},e}();var yh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const vh=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return yh(t,e),t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(xh);var bh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const wh=function(e){function t(t,n,r){var o=e.call(this,t)||this;return r?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=n,o}return bh(t,e),t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(xh);var kh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Ch=function(e){function t(t,n,r){var o=e.call(this,t)||this;if(n<0||n>10||r<0||r>10)throw new ed;return o.firstDigit=n,o.secondDigit=r,o}return kh(t,e),t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(xh);var jh=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_h=function(){function e(){}return e.parseFieldsInGeneralPurpose=function(t){var n,r,o,a,i,s,l,c;if(!t)return null;if(t.length<2)throw new hd;var d=t.substring(0,2);try{for(var u=jh(e.TWO_DIGIT_DATA_LENGTH),h=u.next();!h.done;h=u.next()){if((w=h.value)[0]===d)return w[1]===e.VARIABLE_LENGTH?e.processVariableAI(2,w[2],t):e.processFixedAI(2,w[1],t)}}catch(k){n={error:k}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(t.length<3)throw new hd;var p=t.substring(0,3);try{for(var f=jh(e.THREE_DIGIT_DATA_LENGTH),m=f.next();!m.done;m=f.next()){if((w=m.value)[0]===p)return w[1]===e.VARIABLE_LENGTH?e.processVariableAI(3,w[2],t):e.processFixedAI(3,w[1],t)}}catch(C){o={error:C}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}try{for(var g=jh(e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),x=g.next();!x.done;x=g.next()){if((w=x.value)[0]===p)return w[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,w[2],t):e.processFixedAI(4,w[1],t)}}catch(j){i={error:j}}finally{try{x&&!x.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}if(t.length<4)throw new hd;var y=t.substring(0,4);try{for(var v=jh(e.FOUR_DIGIT_DATA_LENGTH),b=v.next();!b.done;b=v.next()){var w;if((w=b.value)[0]===y)return w[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,w[2],t):e.processFixedAI(4,w[1],t)}}catch(_){l={error:_}}finally{try{b&&!b.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}throw new hd},e.processFixedAI=function(t,n,r){if(r.length<t)throw new hd;var o=r.substring(0,t);if(r.length<t+n)throw new hd;var a=r.substring(t,t+n),i=r.substring(t+n),s="("+o+")"+a,l=e.parseFieldsInGeneralPurpose(i);return null==l?s:s+l},e.processVariableAI=function(t,n,r){var o,a=r.substring(0,t);o=r.length<t+n?r.length:t+n;var i=r.substring(t,o),s=r.substring(o),l="("+a+")"+i,c=e.parseFieldsInGeneralPurpose(s);return null==c?l:l+c},e.VARIABLE_LENGTH=[],e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",e.VARIABLE_LENGTH,20],["22",e.VARIABLE_LENGTH,29],["30",e.VARIABLE_LENGTH,8],["37",e.VARIABLE_LENGTH,8],["90",e.VARIABLE_LENGTH,30],["91",e.VARIABLE_LENGTH,30],["92",e.VARIABLE_LENGTH,30],["93",e.VARIABLE_LENGTH,30],["94",e.VARIABLE_LENGTH,30],["95",e.VARIABLE_LENGTH,30],["96",e.VARIABLE_LENGTH,30],["97",e.VARIABLE_LENGTH,3],["98",e.VARIABLE_LENGTH,30],["99",e.VARIABLE_LENGTH,30]],e.THREE_DIGIT_DATA_LENGTH=[["240",e.VARIABLE_LENGTH,30],["241",e.VARIABLE_LENGTH,30],["242",e.VARIABLE_LENGTH,6],["250",e.VARIABLE_LENGTH,30],["251",e.VARIABLE_LENGTH,30],["253",e.VARIABLE_LENGTH,17],["254",e.VARIABLE_LENGTH,20],["400",e.VARIABLE_LENGTH,30],["401",e.VARIABLE_LENGTH,30],["402",17],["403",e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",e.VARIABLE_LENGTH,20],["421",e.VARIABLE_LENGTH,15],["422",3],["423",e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",e.VARIABLE_LENGTH,15],["391",e.VARIABLE_LENGTH,18],["392",e.VARIABLE_LENGTH,15],["393",e.VARIABLE_LENGTH,18],["703",e.VARIABLE_LENGTH,30]],e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",e.VARIABLE_LENGTH,20],["8003",e.VARIABLE_LENGTH,30],["8004",e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",e.VARIABLE_LENGTH,30],["8008",e.VARIABLE_LENGTH,12],["8018",18],["8020",e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",e.VARIABLE_LENGTH,70],["8200",e.VARIABLE_LENGTH,70]],e}();const Nh=_h;var Sh=function(){function e(e){this.buffer=new cd,this.information=e}return e.prototype.decodeAllCodes=function(e,t){for(var n=t,r=null;;){var o=this.decodeGeneralPurposeField(n,r),a=Nh.parseFieldsInGeneralPurpose(o.getNewString());if(null!=a&&e.append(a),r=o.isRemaining()?""+o.getRemainingValue():null,n===o.getNewPosition())break;n=o.getNewPosition()}return e.toString()},e.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},e.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return new Ch(this.information.getSize(),0===t?Ch.FNC1:t-1,Ch.FNC1)}var n=this.extractNumericValueFromBitArray(e,7);return new Ch(e+7,(n-8)/11,(n-8)%11)},e.prototype.extractNumericValueFromBitArray=function(t,n){return e.extractNumericValueFromBitArray(this.information,t,n)},e.extractNumericValueFromBitArray=function(e,t,n){for(var r=0,o=0;o<n;++o)e.get(t+o)&&(r|=1<<n-o-1);return r},e.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return null!=n&&n.isRemaining()?new wh(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new wh(this.current.getPosition(),this.buffer.toString())},e.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()},e.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return t=e.isSecondDigitFNC1()?new wh(this.current.getPosition(),this.buffer.toString()):new wh(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new gh(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){t=new wh(this.current.getPosition(),this.buffer.toString());return new gh(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new gh(!1)},e.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new wh(this.current.getPosition(),this.buffer.toString());return new gh(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new gh(!1)},e.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new wh(this.current.getPosition(),this.buffer.toString());return new gh(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new gh(!1)},e.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253},e.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new vh(e+5,vh.FNC1);if(t>=5&&t<15)return new vh(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new vh(e+7,""+(r+1));if(r>=90&&r<116)return new vh(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new ed}return new vh(e+8,n)},e.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},e.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new vh(e+5,vh.FNC1);if(t>=5&&t<15)return new vh(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new vh(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new Hd("Decoding invalid alphanumeric value: "+r)}return new vh(e+6,n)},e.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},e.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},e.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},e}();const Eh=Sh;const Ah=function(){function e(e){this.information=e,this.generalDecoder=new Eh(e)}return e.prototype.getInformation=function(){return this.information},e.prototype.getGeneralDecoder=function(){return this.generalDecoder},e}();var Ph=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Bh=function(e){function t(t){return e.call(this,t)||this}return Ph(t,e),t.prototype.encodeCompressedGtin=function(e,t){e.append("(01)");var n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)},t.prototype.encodeCompressedGtinWithoutAI=function(e,n,r){for(var o=0;o<4;++o){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);a/100===0&&e.append("0"),a/10===0&&e.append("0"),e.append(a)}t.appendCheckDigit(e,r)},t.appendCheckDigit=function(e,t){for(var n=0,r=0;r<13;r++){var o=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*o:o}10===(n=10-n%10)&&(n=0),e.append(n)},t.GTIN_SIZE=40,t}(Ah);var Ih=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Th=function(e){function t(t){return e.call(this,t)||this}return Ih(t,e),t.prototype.parseInformation=function(){var e=new cd;e.append("(01)");var n=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(Bh);var Mh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Dh=function(e){function t(t){return e.call(this,t)||this}return Mh(t,e),t.prototype.parseInformation=function(){var e=new cd;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(Ah);var Rh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Oh=function(e){function t(t){return e.call(this,t)||this}return Rh(t,e),t.prototype.encodeCompressedWeight=function(e,t,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);for(var o=this.checkWeight(r),a=1e5,i=0;i<5;++i)o/a===0&&e.append("0"),a/=10;e.append(o)},t}(Bh);var Fh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Lh=function(e){function t(t){return e.call(this,t)||this}return Fh(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+Oh.GTIN_SIZE+t.WEIGHT_SIZE)throw new hd;var e=new cd;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+Oh.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(Oh);var zh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Wh=function(e){function t(t){return e.call(this,t)||this}return zh(t,e),t.prototype.addWeightCode=function(e,t){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(Lh);var Vh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Uh=function(e){function t(t){return e.call(this,t)||this}return Vh(t,e),t.prototype.addWeightCode=function(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(Lh);var Hh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Gh=function(e){function t(t){return e.call(this,t)||this}return Hh(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Bh.GTIN_SIZE)throw new hd;var e=new cd;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Bh.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");var r=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Bh.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(Bh);var Xh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Kh=function(e){function t(t){return e.call(this,t)||this}return Xh(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Bh.GTIN_SIZE)throw new hd;var e=new cd;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Bh.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Bh.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);r/100===0&&e.append("0"),r/10===0&&e.append("0"),e.append(r);var o=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Bh.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(o.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(Bh);var Yh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const qh=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.dateCode=r,o.firstAIdigits=n,o}return Yh(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new hd;var e=new cd;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,t.DATE_SIZE);if(38400!==r){e.append("("),e.append(this.dateCode),e.append(")");var o=r%32,a=(r/=32)%12+1,i=r/=12;i/10===0&&e.append("0"),e.append(i),a/10===0&&e.append("0"),e.append(a),o/10===0&&e.append("0"),e.append(o)}},t.prototype.addWeightCode=function(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(Oh);const Zh=function(){function e(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}return e.prototype.mayBeLast=function(){return this.maybeLast},e.prototype.getLeftChar=function(){return this.leftchar},e.prototype.getRightChar=function(){return this.rightchar},e.prototype.getFinderPattern=function(){return this.finderpattern},e.prototype.mustBeLast=function(){return null==this.rightchar},e.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},e.equals=function(t,n){return t instanceof e&&(e.equalsOrNull(t.leftchar,n.leftchar)&&e.equalsOrNull(t.rightchar,n.rightchar)&&e.equalsOrNull(t.finderpattern,n.finderpattern))},e.equalsOrNull=function(t,n){return null===t?null===n:e.equals(t,n)},e.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},e}();const Jh=function(){function e(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return e.prototype.getPairs=function(){return this.pairs},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.isReversed=function(){return this.wasReversed},e.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},e.prototype.toString=function(){return"{ "+this.pairs+" }"},e.prototype.equals=function(t,n){return t instanceof e&&(this.checkEqualitity(t,n)&&t.wasReversed===n.wasReversed)},e.prototype.checkEqualitity=function(e,t){var n;if(e&&t)return e.forEach(function(e,r){t.forEach(function(t){e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n},e}();var Qh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$h=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ep=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.pairs=new Array(t.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return Qh(t,e),t.prototype.decodeRow=function(e,n,r){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,n))}catch(iN){}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,n))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,t){for(var n,r=!1;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(a){if(a instanceof hd){if(!this.pairs.length)throw new hd;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){var o=this.checkRowsBoolean(!1);if(null!=o)return o;if(null!=(o=this.checkRowsBoolean(!0)))return o}throw new hd},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var t=null;try{t=this.checkRows(new Array,0)}catch(iN){console.log(iN)}return e&&(this.rows=this.rows.reverse()),t},t.prototype.checkRows=function(e,n){for(var r,o,a=n;a<this.rows.length;a++){var i=this.rows[a];this.pairs.length=0;try{for(var s=(r=void 0,$h(e)),l=s.next();!l.done;l=s.next()){var c=l.value;this.pairs.push(c.getPairs())}}catch(u){r={error:u}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}if(this.pairs.push(i.getPairs()),t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var d=new Array(e);d.push(i);try{return this.checkRows(d,a+1)}catch(iN){console.log(iN)}}}throw new hd},t.isValidSequence=function(e){var n,r;try{for(var o=$h(t.FINDER_PATTERN_SEQUENCES),a=o.next();!a.done;a=o.next()){var i=a.value;if(!(e.length>i.length)){for(var s=!0,l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!==i[l]){s=!1;break}if(s)return!0}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1},t.prototype.storeRow=function(e,n){for(var r=0,o=!1,a=!1;r<this.rows.length;){var i=this.rows[r];if(i.getRowNumber()>e){a=i.isEquivalent(this.pairs);break}o=i.isEquivalent(this.pairs),r++}a||o||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new Jh(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,t){var n,r,o,a,i,s;try{for(var l=$h(t),c=l.next();!c.done;c=l.next()){var d=c.value;if(d.getPairs().length!==e.length){try{for(var u=(o=void 0,$h(d.getPairs())),h=u.next();!h.done;h=u.next()){var p=h.value,f=!1;try{for(var m=(i=void 0,$h(e)),g=m.next();!g.done;g=m.next()){var x=g.value;if(Zh.equals(p,x)){f=!0;break}}}catch(y){i={error:y}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}f||!1}}catch(v){o={error:v}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}}}}catch(b){n={error:b}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}},t.isPartialRow=function(e,t){var n,r,o,a,i,s;try{for(var l=$h(t),c=l.next();!c.done;c=l.next()){var d=c.value,u=!0;try{for(var h=(o=void 0,$h(e)),p=h.next();!p.done;p=h.next()){var f=p.value,m=!1;try{for(var g=(i=void 0,$h(d.getPairs())),x=g.next();!x.done;x=g.next()){var y=x.value;if(f.equals(y)){m=!0;break}}}catch(v){i={error:v}}finally{try{x&&!x.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}if(!m){u=!1;break}}}catch(b){o={error:b}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}if(u)return!0}}catch(w){n={error:w}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var t=function(e){try{if(e.get(1))return new Th(e);if(!e.get(2))return new Dh(e);switch(Eh.extractNumericValueFromBitArray(e,1,4)){case 4:return new Wh(e);case 5:return new Uh(e)}switch(Eh.extractNumericValueFromBitArray(e,1,5)){case 12:return new Gh(e);case 13:return new Kh(e)}switch(Eh.extractNumericValueFromBitArray(e,1,7)){case 56:return new qh(e,"310","11");case 57:return new qh(e,"320","11");case 58:return new qh(e,"310","13");case 59:return new qh(e,"320","13");case 60:return new qh(e,"310","15");case 61:return new qh(e,"320","15");case 62:return new qh(e,"310","17");case 63:return new qh(e,"320","17")}}catch(iN){throw console.log(iN),new Hd("unknown decoder: "+e)}}(mh.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),o=[n[0],n[1],r[0],r[1]];return new Ed(t,null,null,o,Pd.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null===n)return!1;for(var r=n.getChecksumPortion(),o=2,a=1;a<this.pairs.size();++a){var i=this.pairs.get(a);r+=i.getLeftChar().getChecksumPortion(),o++;var s=i.getRightChar();null!=s&&(r+=s.getChecksumPortion(),o++)}return 211*(o-4)+(r%=211)===t.getValue()},t.getNextSecondBar=function(e,t){var n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n},t.prototype.retrieveNextPair=function(e,n,r){var o,a=n.length%2===0;this.startFromEven&&(a=!a);var i=!0,s=-1;do{this.findNextPair(e,n,s),null===(o=this.parseFoundFinderPattern(e,r,a))?s=t.getNextSecondBar(e,this.startEnd[0]):i=!1}while(i);var l,c=this.decodeDataCharacter(e,o,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new hd;try{l=this.decodeDataCharacter(e,o,a,!1)}catch(iN){l=null,console.log(iN)}return new Zh(c,l,o,!0)},t.prototype.isEmptyPair=function(e){return 0===e.length},t.prototype.findNextPair=function(e,n,r){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var a,i=e.getSize();if(r>=0)a=r;else if(this.isEmptyPair(n))a=0;else{a=n[n.length-1].getFinderPattern().getStartEnd()[1]}var s=n.length%2!==0;this.startFromEven&&(s=!s);for(var l=!1;a<i&&(l=!e.get(a));)a++;for(var c=0,d=a,u=a;u<i;u++)if(e.get(u)!==l)o[c]++;else{if(3===c){if(s&&t.reverseCounters(o),t.isFinderPattern(o))return this.startEnd[0]=d,void(this.startEnd[1]=u);s&&t.reverseCounters(o),d+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,c--}else c++;o[c]=1,l=!l}throw new hd},t.reverseCounters=function(e){for(var t=e.length,n=0;n<t/2;++n){var r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}},t.prototype.parseFoundFinderPattern=function(e,n,r){var o,a,i;if(r){for(var s=this.startEnd[0]-1;s>=0&&!e.get(s);)s--;s++,o=this.startEnd[0]-s,a=s,i=this.startEnd[1]}else a=this.startEnd[0],o=(i=e.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var l,c=this.getDecodeFinderCounters();Wc.arraycopy(c,0,c,1,c.length-1),c[0]=o;try{l=this.parseFinderValue(c,t.FINDER_PATTERNS)}catch(iN){return null}return new uh(l,[a,i],a,i,n)},t.prototype.decodeDataCharacter=function(e,n,r,o){for(var a=this.getDataCharacterCounters(),i=0;i<a.length;i++)a[i]=0;if(o)t.recordPatternInReverse(e,n.getStartEnd()[0],a);else{t.recordPattern(e,n.getStartEnd()[1],a);for(var s=0,l=a.length-1;s<l;s++,l--){var c=a[s];a[s]=a[l],a[l]=c}}var d=qd.sum(new Int32Array(a))/17,u=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-u)/u>.3)throw new hd;var h=this.getOddCounts(),p=this.getEvenCounts(),f=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors();for(s=0;s<a.length;s++){var g=1*a[s]/d,x=g+.5;if(x<1){if(g<.3)throw new hd;x=1}else if(x>8){if(g>8.7)throw new hd;x=8}var y=s/2;0===(1&s)?(h[y]=x,f[y]=g-x):(p[y]=x,m[y]=g-x)}this.adjustOddEvenCounts(17);var v=4*n.getValue()+(r?0:2)+(o?0:1)-1,b=0,w=0;for(s=h.length-1;s>=0;s--){if(t.isNotA1left(n,r,o)){var k=t.WEIGHTS[v][2*s];w+=h[s]*k}b+=h[s]}var C=0;for(s=p.length-1;s>=0;s--)if(t.isNotA1left(n,r,o)){k=t.WEIGHTS[v][2*s+1];C+=p[s]*k}var j=w+C;if(0!==(1&b)||b>13||b<4)throw new hd;var _=(13-b)/2,N=t.SYMBOL_WIDEST[_],S=9-N,E=fh.getRSSvalue(h,N,!0),A=fh.getRSSvalue(p,S,!1),P=t.EVEN_TOTAL_SUBSET[_],B=t.GSUM[_];return new dh(E*P+A+B,j)},t.isNotA1left=function(e,t,n){return!(0===e.getValue()&&t&&n)},t.prototype.adjustOddEvenCounts=function(e){var n=qd.sum(new Int32Array(this.getOddCounts())),r=qd.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;n>13?a=!0:n<4&&(o=!0);var i=!1,s=!1;r>13?s=!0:r<4&&(i=!0);var l=n+r-e,c=1===(1&n),d=0===(1&r);if(1===l)if(c){if(d)throw new hd;a=!0}else{if(!d)throw new hd;s=!0}else if(-1===l)if(c){if(d)throw new hd;o=!0}else{if(!d)throw new hd;i=!0}else{if(0!==l)throw new hd;if(c){if(!d)throw new hd;n<r?(o=!0,s=!0):(a=!0,i=!0)}else if(d)throw new hd}if(o){if(a)throw new hd;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),i){if(s)throw new hd;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(ch);const tp=ep;var np=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const rp=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.count=0,o.finderPattern=r,o}return np(t,e),t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(dh);var op=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ap=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ip=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return op(t,e),t.prototype.decodeRow=function(e,n,r){var o,a,i,s,l=this.decodePair(n,!1,e,r);t.addOrTally(this.possibleLeftPairs,l),n.reverse();var c=this.decodePair(n,!0,e,r);t.addOrTally(this.possibleRightPairs,c),n.reverse();try{for(var d=ap(this.possibleLeftPairs),u=d.next();!u.done;u=d.next()){var h=u.value;if(h.getCount()>1)try{for(var p=(i=void 0,ap(this.possibleRightPairs)),f=p.next();!f.done;f=p.next()){var m=f.value;if(m.getCount()>1&&t.checkChecksum(h,m))return t.constructResult(h,m)}}catch(g){i={error:g}}finally{try{f&&!f.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}}}catch(x){o={error:x}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}throw new hd},t.addOrTally=function(e,t){var n,r;if(null!=t){var o=!1;try{for(var a=ap(e),i=a.next();!i.done;i=a.next()){var s=i.value;if(s.getValue()===t.getValue()){s.incrementCount(),o=!0;break}}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}o||e.push(t)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,t){for(var n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),o=new cd,a=13-r.length;a>0;a--)o.append("0");o.append(r);var i=0;for(a=0;a<13;a++){var s=o.charAt(a).charCodeAt(0)-"0".charCodeAt(0);i+=0===(1&a)?3*s:s}10===(i=10-i%10)&&(i=0),o.append(i.toString());var l=e.getFinderPattern().getResultPoints(),c=t.getFinderPattern().getResultPoints();return new Ed(o.toString(),null,0,[l[0],l[1],c[0],c[1]],Pd.RSS_14,(new Date).getTime())},t.checkChecksum=function(e,t){var n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r},t.prototype.decodePair=function(e,t,n,r){try{var o=this.findFinderPattern(e,t),a=this.parseFoundFinderPattern(e,n,t,o),i=null==r?null:r.get(Qc.NEED_RESULT_POINT_CALLBACK);if(null!=i){var s=(o[0]+o[1])/2;t&&(s=e.getSize()-1-s),i.foundPossibleResultPoint(new Jd(s,n))}var l=this.decodeDataCharacter(e,a,!0),c=this.decodeDataCharacter(e,a,!1);return new rp(1597*l.getValue()+c.getValue(),l.getChecksumPortion()+4*c.getChecksumPortion(),a)}catch(d){return null}},t.prototype.decodeDataCharacter=function(e,n,r){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(r)hu.recordPatternInReverse(e,n.getStartEnd()[0],o);else{hu.recordPattern(e,n.getStartEnd()[1]+1,o);for(var i=0,s=o.length-1;i<s;i++,s--){var l=o[i];o[i]=o[s],o[s]=l}}var c=r?16:15,d=qd.sum(new Int32Array(o))/c,u=this.getOddCounts(),h=this.getEvenCounts(),p=this.getOddRoundingErrors(),f=this.getEvenRoundingErrors();for(i=0;i<o.length;i++){var m=o[i]/d,g=Math.floor(m+.5);g<1?g=1:g>8&&(g=8);var x=Math.floor(i/2);0===(1&i)?(u[x]=g,p[x]=m-g):(h[x]=g,f[x]=m-g)}this.adjustOddEvenCounts(r,c);var y=0,v=0;for(i=u.length-1;i>=0;i--)v*=9,v+=u[i],y+=u[i];var b=0,w=0;for(i=h.length-1;i>=0;i--)b*=9,b+=h[i],w+=h[i];var k=v+3*b;if(r){if(0!==(1&y)||y>12||y<4)throw new hd;var C=(12-y)/2,j=9-(A=t.OUTSIDE_ODD_WIDEST[C]),_=fh.getRSSvalue(u,A,!1),N=fh.getRSSvalue(h,j,!0),S=t.OUTSIDE_EVEN_TOTAL_SUBSET[C],E=t.OUTSIDE_GSUM[C];return new dh(_*S+N+E,k)}if(0!==(1&w)||w>10||w<4)throw new hd;C=(10-w)/2,j=9-(A=t.INSIDE_ODD_WIDEST[C]),_=fh.getRSSvalue(u,A,!0),N=fh.getRSSvalue(h,j,!1);var A,P=t.INSIDE_ODD_TOTAL_SUBSET[C];E=t.INSIDE_GSUM[C];return new dh(N*P+_+E,k)},t.prototype.findFinderPattern=function(e,t){var n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;for(var r=e.getSize(),o=!1,a=0;a<r&&t!==(o=!e.get(a));)a++;for(var i=0,s=a,l=a;l<r;l++)if(e.get(l)!==o)n[i]++;else{if(3===i){if(ch.isFinderPattern(n))return[s,l];s+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,i--}else i++;n[i]=1,o=!o}throw new hd},t.prototype.parseFoundFinderPattern=function(e,n,r,o){for(var a=e.get(o[0]),i=o[0]-1;i>=0&&a!==e.get(i);)i--;i++;var s=o[0]-i,l=this.getDecodeFinderCounters(),c=new Int32Array(l.length);Wc.arraycopy(l,0,c,1,l.length-1),c[0]=s;var d=this.parseFinderValue(c,t.FINDER_PATTERNS),u=i,h=o[1];return r&&(u=e.getSize()-1-u,h=e.getSize()-1-h),new uh(d,[i,o[1]],u,h,n)},t.prototype.adjustOddEvenCounts=function(e,t){var n=qd.sum(new Int32Array(this.getOddCounts())),r=qd.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1,i=!1,s=!1;e?(n>12?a=!0:n<4&&(o=!0),r>12?s=!0:r<4&&(i=!0)):(n>11?a=!0:n<5&&(o=!0),r>10?s=!0:r<4&&(i=!0));var l=n+r-t,c=(1&n)===(e?1:0),d=1===(1&r);if(1===l)if(c){if(d)throw new hd;a=!0}else{if(!d)throw new hd;s=!0}else if(-1===l)if(c){if(d)throw new hd;o=!0}else{if(!d)throw new hd;i=!0}else{if(0!==l)throw new hd;if(c){if(!d)throw new hd;n<r?(o=!0,s=!0):(a=!0,i=!0)}else if(d)throw new hd}if(o){if(a)throw new hd;ch.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&ch.decrement(this.getOddCounts(),this.getOddRoundingErrors()),i){if(s)throw new hd;ch.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&ch.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(ch);const sp=ip;var lp=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const cp=function(e){function t(t){var n=e.call(this)||this;n.readers=[];var r=t?t.get(Qc.POSSIBLE_FORMATS):null,o=t&&void 0!==t.get(Qc.ASSUME_CODE_39_CHECK_DIGIT),a=t&&void 0!==t.get(Qc.ENABLE_CODE_39_EXTENDED_MODE);return r&&((r.includes(Pd.EAN_13)||r.includes(Pd.UPC_A)||r.includes(Pd.EAN_8)||r.includes(Pd.UPC_E))&&n.readers.push(new nh(t)),r.includes(Pd.CODE_39)&&n.readers.push(new yu(o,a)),r.includes(Pd.CODE_93)&&n.readers.push(new ku),r.includes(Pd.CODE_128)&&n.readers.push(new fu),r.includes(Pd.ITF)&&n.readers.push(new Nu),r.includes(Pd.CODABAR)&&n.readers.push(new ah),r.includes(Pd.RSS_14)&&n.readers.push(new sp),r.includes(Pd.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new tp))),0===n.readers.length&&(n.readers.push(new nh(t)),n.readers.push(new yu),n.readers.push(new ku),n.readers.push(new nh(t)),n.readers.push(new fu),n.readers.push(new Nu),n.readers.push(new sp)),n}return lp(t,e),t.prototype.decodeRow=function(e,t,n){for(var r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch(o){}throw new hd},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}(hu);var dp=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),up=(function(e){function t(t,n){return void 0===t&&(t=500),e.call(this,new cp(n),t,n)||this}dp(t,e)}(Nd),function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}),hp=function(){function e(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return e.prototype.getECCodewords=function(){return this.ecCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),pp=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),fp=function(){function e(e,t,n,r,o,a){var i,s;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=o,this.ecBlocks=a;var l=0,c=a.getECCodewords(),d=a.getECBlocks();try{for(var u=up(d),h=u.next();!h.done;h=u.next()){var p=h.value;l+=p.getCount()*(p.getDataCodewords()+c)}}catch(f){i={error:f}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}this.totalCodewords=l}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},e.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},e.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},e.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e.getVersionForDimensions=function(t,n){var r,o;if(0!==(1&t)||0!==(1&n))throw new ed;try{for(var a=up(e.VERSIONS),i=a.next();!i.done;i=a.next()){var s=i.value;if(s.symbolSizeRows===t&&s.symbolSizeColumns===n)return s}}catch(l){r={error:l}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}throw new ed},e.prototype.toString=function(){return""+this.versionNumber},e.buildVersions=function(){return[new e(1,10,10,8,8,new hp(5,new pp(1,3))),new e(2,12,12,10,10,new hp(7,new pp(1,5))),new e(3,14,14,12,12,new hp(10,new pp(1,8))),new e(4,16,16,14,14,new hp(12,new pp(1,12))),new e(5,18,18,16,16,new hp(14,new pp(1,18))),new e(6,20,20,18,18,new hp(18,new pp(1,22))),new e(7,22,22,20,20,new hp(20,new pp(1,30))),new e(8,24,24,22,22,new hp(24,new pp(1,36))),new e(9,26,26,24,24,new hp(28,new pp(1,44))),new e(10,32,32,14,14,new hp(36,new pp(1,62))),new e(11,36,36,16,16,new hp(42,new pp(1,86))),new e(12,40,40,18,18,new hp(48,new pp(1,114))),new e(13,44,44,20,20,new hp(56,new pp(1,144))),new e(14,48,48,22,22,new hp(68,new pp(1,174))),new e(15,52,52,24,24,new hp(42,new pp(2,102))),new e(16,64,64,14,14,new hp(56,new pp(2,140))),new e(17,72,72,16,16,new hp(36,new pp(4,92))),new e(18,80,80,18,18,new hp(48,new pp(4,114))),new e(19,88,88,20,20,new hp(56,new pp(4,144))),new e(20,96,96,22,22,new hp(68,new pp(4,174))),new e(21,104,104,24,24,new hp(56,new pp(6,136))),new e(22,120,120,18,18,new hp(68,new pp(6,175))),new e(23,132,132,20,20,new hp(62,new pp(8,163))),new e(24,144,144,22,22,new hp(62,new pp(8,156),new pp(2,155))),new e(25,8,18,6,16,new hp(7,new pp(1,5))),new e(26,8,32,6,14,new hp(11,new pp(1,10))),new e(27,12,26,10,24,new hp(14,new pp(1,16))),new e(28,12,36,10,16,new hp(18,new pp(1,22))),new e(29,16,36,14,16,new hp(24,new pp(1,32))),new e(30,16,48,14,22,new hp(28,new pp(1,49)))]},e.VERSIONS=e.buildVersions(),e}();const mp=fp;const gp=function(){function e(t){var n=t.getHeight();if(n<8||n>144||0!==(1&n))throw new ed;this.version=e.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new dd(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return e.prototype.getVersion=function(){return this.version},e.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return mp.getVersionForDimensions(t,n)},e.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,r=0,o=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),i=!1,s=!1,l=!1,c=!1;do{if(n!==o||0!==r||i)if(n!==o-2||0!==r||0===(3&a)||s)if(n!==o+4||2!==r||0!==(7&a)||l)if(n!==o-2||0!==r||4!==(7&a)||c){do{n<o&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,o,a)),n-=2,r+=2}while(n>=0&&r<a);n+=1,r+=3;do{n>=0&&r<a&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,o,a)),n+=2,r-=2}while(n<o&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(o,a),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner3(o,a),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner2(o,a),n-=2,r+=2,s=!0;else e[t++]=255&this.readCorner1(o,a),n-=2,r+=2,i=!0}while(n<o||r<a);if(t!==this.version.getTotalCodewords())throw new ed;return e},e.prototype.readModule=function(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},e.prototype.readUtah=function(e,t,n,r){var o=0;return this.readModule(e-2,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-2,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e-1,t,n,r)&&(o|=1),o<<=1,this.readModule(e,t-2,n,r)&&(o|=1),o<<=1,this.readModule(e,t-1,n,r)&&(o|=1),o<<=1,this.readModule(e,t,n,r)&&(o|=1),o},e.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Dc("Dimension of bitMatrix must match the version size");for(var r=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),a=t/r|0,i=n/o|0,s=new dd(i*o,a*r),l=0;l<a;++l)for(var c=l*r,d=0;d<i;++d)for(var u=d*o,h=0;h<r;++h)for(var p=l*(r+2)+1+h,f=c+h,m=0;m<o;++m){var g=d*(o+2)+1+m;if(e.get(g,p)){var x=u+m;s.set(x,f)}}return s},e}();var xp=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yp=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n){var r,o,a,i,s=n.getECBlocks(),l=0,c=s.getECBlocks();try{for(var d=xp(c),u=d.next();!u.done;u=d.next()){l+=(g=u.value).getCount()}}catch(A){r={error:A}}finally{try{u&&!u.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}var h=new Array(l),p=0;try{for(var f=xp(c),m=f.next();!m.done;m=f.next())for(var g=m.value,x=0;x<g.getCount();x++){var y=g.getDataCodewords(),v=s.getECCodewords()+y;h[p++]=new e(y,new Uint8Array(v))}}catch(P){a={error:P}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}var b=h[0].codewords.length-s.getECCodewords(),w=b-1,k=0;for(x=0;x<w;x++)for(var C=0;C<p;C++)h[C].codewords[x]=t[k++];var j=24===n.getVersionNumber(),_=j?8:p;for(C=0;C<_;C++)h[C].codewords[b-1]=t[k++];var N=h[0].codewords.length;for(x=b;x<N;x++)for(C=0;C<p;C++){var S=j?(C+8)%p:C,E=j&&S>7?x-1:x;h[S].codewords[E]=t[k++]}if(k!==t.length)throw new Dc;return h},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}();const vp=yp;const bp=function(){function e(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return e.prototype.getBitOffset=function(){return this.bitOffset},e.prototype.getByteOffset=function(){return this.byteOffset},e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Dc(""+e);var t=0,n=this.bitOffset,r=this.byteOffset,o=this.bytes;if(n>0){var a=8-n,i=e<a?e:a,s=255>>8-i<<(l=a-i);t=(o[r]&s)>>l,e-=i,8===(n+=i)&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&o[r],r++,e-=8;if(e>0){var l;s=255>>(l=8-e)<<l;t=t<<e|(o[r]&s)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=r,t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();var wp;!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(wp||(wp={}));const kp=function(){function e(){}return e.decode=function(e){var t=new bp(e),n=new cd,r=new cd,o=new Array,a=wp.ASCII_ENCODE;do{if(a===wp.ASCII_ENCODE)a=this.decodeAsciiSegment(t,n,r);else{switch(a){case wp.C40_ENCODE:this.decodeC40Segment(t,n);break;case wp.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case wp.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case wp.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case wp.BASE256_ENCODE:this.decodeBase256Segment(t,n,o);break;default:throw new ed}a=wp.ASCII_ENCODE}}while(a!==wp.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Td(e,n.toString(),0===o.length?null:o,null)},e.decodeAsciiSegment=function(e,t,n){var r=!1;do{var o=e.readBits(8);if(0===o)throw new ed;if(o<=128)return r&&(o+=128),t.append(String.fromCharCode(o-1)),wp.ASCII_ENCODE;if(129===o)return wp.PAD_ENCODE;if(o<=229){var a=o-130;a<10&&t.append("0"),t.append(""+a)}else switch(o){case 230:return wp.C40_ENCODE;case 231:return wp.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return wp.ANSIX12_ENCODE;case 239:return wp.TEXT_ENCODE;case 240:return wp.EDIFACT_ENCODE;default:if(254!==o||0!==e.available())throw new ed}}while(e.available()>0);return wp.ASCII_ENCODE},e.decodeC40Segment=function(e,t){var n=!1,r=[],o=0;do{if(8===e.available())return;var a=e.readBits(8);if(254===a)return;this.parseTwoBytes(a,e.readBits(8),r);for(var i=0;i<3;i++){var s=r[i];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new ed;var l=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){l=this.C40_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new ed}o=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),o=0;break;default:throw new ed}}}while(e.available()>0)},e.decodeTextSegment=function(e,t){var n=!1,r=[],o=0;do{if(8===e.available())return;var a=e.readBits(8);if(254===a)return;this.parseTwoBytes(a,e.readBits(8),r);for(var i=0;i<3;i++){var s=r[i];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new ed;var l=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l)}break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){l=this.TEXT_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new ed}o=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new ed;l=this.TEXT_SHIFT3_SET_CHARS[s];n?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),n=!1):t.append(l),o=0;break;default:throw new ed}}}while(e.available()>0)},e.decodeAnsiX12Segment=function(e,t){var n=[];do{if(8===e.available())return;var r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(var o=0;o<3;o++){var a=n[o];switch(a){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(a<14)t.append(String.fromCharCode(a+44));else{if(!(a<40))throw new ed;t.append(String.fromCharCode(a+51))}}}}while(e.available()>0)},e.parseTwoBytes=function(e,t,n){var r=(e<<8)+t-1,o=Math.floor(r/1600);n[0]=o,r-=1600*o,o=Math.floor(r/40),n[1]=o,n[2]=r-40*o},e.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var r=e.readBits(6);if(31===r){var o=8-e.getBitOffset();return void(8!==o&&e.readBits(o))}0===(32&r)&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)},e.decodeBase256Segment=function(e,t,n){var r,o=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),o++);if((r=0===a?e.available()/8|0:a<250?a:250*(a-249)+this.unrandomize255State(e.readBits(8),o++))<0)throw new ed;for(var i=new Uint8Array(r),s=0;s<r;s++){if(e.available()<8)throw new ed;i[s]=this.unrandomize255State(e.readBits(8),o++)}n.push(i);try{t.append(sd.decode(i,ld.ISO88591))}catch(l){throw new Hd("Platform does not support required encoding: "+l.message)}},e.unrandomize255State=function(e,t){var n=e-(149*t%255+1);return n>=0?n:n+256},e.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],e.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.TEXT_SHIFT2_SET_CHARS=e.C40_SHIFT2_SET_CHARS,e.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],e}();var Cp=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jp=function(){function e(){this.rsDecoder=new Xd(zd.DATA_MATRIX_FIELD_256)}return e.prototype.decode=function(e){var t,n,r=new gp(e),o=r.getVersion(),a=r.readCodewords(),i=vp.getDataBlocks(a,o),s=0;try{for(var l=Cp(i),c=l.next();!c.done;c=l.next()){s+=c.value.getNumDataCodewords()}}catch(x){t={error:x}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}for(var d=new Uint8Array(s),u=i.length,h=0;h<u;h++){var p=i[h],f=p.getCodewords(),m=p.getNumDataCodewords();this.correctErrors(f,m);for(var g=0;g<m;g++)d[g*u+h]=f[g]}return kp.decode(d)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(o){throw new Fc}for(var r=0;r<t;r++)e[r]=n[r]},e}();const _p=jp;var Np=function(){function e(e){this.image=e,this.rectangleDetector=new tu(this.image)}return e.prototype.detect=function(){var t=this.rectangleDetector.detect(),n=this.detectSolid1(t);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new hd;var r=(n=this.shiftToModuleCenter(n))[0],o=n[1],a=n[2],i=n[3],s=this.transitionsBetween(r,i)+1,l=this.transitionsBetween(a,i)+1;1===(1&s)&&(s+=1),1===(1&l)&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var c=e.sampleGrid(this.image,r,o,a,i,s,l);return new Qd(c,[r,o,a,i])},e.shiftPoint=function(e,t,n){var r=(t.getX()-e.getX())/(n+1),o=(t.getY()-e.getY())/(n+1);return new Jd(e.getX()+r,e.getY()+o)},e.moveAway=function(e,t,n){var r=e.getX(),o=e.getY();return r<t?r-=1:r+=1,o<n?o-=1:o+=1,new Jd(r,o)},e.prototype.detectSolid1=function(e){var t=e[0],n=e[1],r=e[3],o=e[2],a=this.transitionsBetween(t,n),i=this.transitionsBetween(n,r),s=this.transitionsBetween(r,o),l=this.transitionsBetween(o,t),c=a,d=[o,t,n,r];return c>i&&(c=i,d[0]=t,d[1]=n,d[2]=r,d[3]=o),c>s&&(c=s,d[0]=n,d[1]=r,d[2]=o,d[3]=t),c>l&&(d[0]=r,d[1]=o,d[2]=t,d[3]=n),d},e.prototype.detectSolid2=function(t){var n=t[0],r=t[1],o=t[2],a=t[3],i=this.transitionsBetween(n,a),s=e.shiftPoint(r,o,4*(i+1)),l=e.shiftPoint(o,r,4*(i+1));return this.transitionsBetween(s,n)<this.transitionsBetween(l,a)?(t[0]=n,t[1]=r,t[2]=o,t[3]=a):(t[0]=r,t[1]=o,t[2]=a,t[3]=n),t},e.prototype.correctTopRight=function(t){var n=t[0],r=t[1],o=t[2],a=t[3],i=this.transitionsBetween(n,a),s=this.transitionsBetween(r,a),l=e.shiftPoint(n,r,4*(s+1)),c=e.shiftPoint(o,r,4*(i+1));i=this.transitionsBetween(l,a),s=this.transitionsBetween(c,a);var d=new Jd(a.getX()+(o.getX()-r.getX())/(i+1),a.getY()+(o.getY()-r.getY())/(i+1)),u=new Jd(a.getX()+(n.getX()-r.getX())/(s+1),a.getY()+(n.getY()-r.getY())/(s+1));return this.isValid(d)?this.isValid(u)?this.transitionsBetween(l,d)+this.transitionsBetween(c,d)>this.transitionsBetween(l,u)+this.transitionsBetween(c,u)?d:u:d:this.isValid(u)?u:null},e.prototype.shiftToModuleCenter=function(t){var n=t[0],r=t[1],o=t[2],a=t[3],i=this.transitionsBetween(n,a)+1,s=this.transitionsBetween(o,a)+1,l=e.shiftPoint(n,r,4*s),c=e.shiftPoint(o,r,4*i);1===(1&(i=this.transitionsBetween(l,a)+1))&&(i+=1),1===(1&(s=this.transitionsBetween(c,a)+1))&&(s+=1);var d,u,h=(n.getX()+r.getX()+o.getX()+a.getX())/4,p=(n.getY()+r.getY()+o.getY()+a.getY())/4;return n=e.moveAway(n,h,p),r=e.moveAway(r,h,p),o=e.moveAway(o,h,p),a=e.moveAway(a,h,p),l=e.shiftPoint(n,r,4*s),l=e.shiftPoint(l,a,4*i),d=e.shiftPoint(r,n,4*s),d=e.shiftPoint(d,o,4*i),c=e.shiftPoint(o,a,4*s),c=e.shiftPoint(c,r,4*i),u=e.shiftPoint(a,o,4*s),[l,d,c,u=e.shiftPoint(u,n,4*i)]},e.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},e.sampleGrid=function(e,t,n,r,o,a,i){return iu.getInstance().sampleGrid(e,a,i,.5,.5,a-.5,.5,a-.5,i-.5,.5,i-.5,t.getX(),t.getY(),o.getX(),o.getY(),r.getX(),r.getY(),n.getX(),n.getY())},e.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),i=Math.abs(a-r)>Math.abs(o-n);if(i){var s=n;n=r,r=s,s=o,o=a,a=s}for(var l=Math.abs(o-n),c=Math.abs(a-r),d=-l/2,u=r<a?1:-1,h=n<o?1:-1,p=0,f=this.image.get(i?r:n,i?n:r),m=n,g=r;m!==o;m+=h){var x=this.image.get(i?g:m,i?m:g);if(x!==f&&(p++,f=x),(d+=c)>0){if(g===a)break;g+=u,d-=l}}return p},e}();const Sp=Np;const Ep=function(){function e(){this.decoder=new _p}return e.prototype.decode=function(t,n){var r,o;if(void 0===n&&(n=null),null!=n&&n.has(Qc.PURE_BARCODE)){var a=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(a),o=e.NO_POINTS}else{var i=new Sp(t.getBlackMatrix()).detect();r=this.decoder.decode(i.getBits()),o=i.getPoints()}var s=r.getRawBytes(),l=new Ed(r.getText(),s,8*s.length,o,Pd.DATA_MATRIX,Wc.currentTimeMillis()),c=r.getByteSegments();null!=c&&l.putMetadata(Id.BYTE_SEGMENTS,c);var d=r.getECLevel();return null!=d&&l.putMetadata(Id.ERROR_CORRECTION_LEVEL,d),l},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new hd;var r=this.moduleSize(t,e),o=t[1],a=n[1],i=t[0],s=(n[0]-i+1)/r,l=(a-o+1)/r;if(s<=0||l<=0)throw new hd;var c=r/2;o+=c,i+=c;for(var d=new dd(s,l),u=0;u<l;u++)for(var h=o+u*r,p=0;p<s;p++)e.get(i+p*r,h)&&d.set(p,u);return d},e.moduleSize=function(e,t){for(var n=t.getWidth(),r=e[0],o=e[1];r<n&&t.get(r,o);)r++;if(r===n)throw new hd;var a=r-e[0];if(0===a)throw new hd;return a},e.NO_POINTS=[],e}();var Ap,Pp=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t){return void 0===t&&(t=500),e.call(this,new Ep,t)||this}Pp(t,e)}(Nd);!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(Ap||(Ap={}));const Bp=function(){function e(t,n,r){this.value=t,this.stringValue=n,this.bits=r,e.FOR_BITS.set(r,this),e.FOR_VALUE.set(t,this)}return e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.fromString=function(t){switch(t){case"L":return e.L;case"M":return e.M;case"Q":return e.Q;case"H":return e.H;default:throw new Tc(t+"not available")}},e.prototype.toString=function(){return this.stringValue},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.forBits=function(t){if(t<0||t>=e.FOR_BITS.size)throw new Dc;return e.FOR_BITS.get(t)},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.L=new e(Ap.L,"L",1),e.M=new e(Ap.M,"M",0),e.Q=new e(Ap.Q,"Q",3),e.H=new e(Ap.H,"H",2),e}();var Ip=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tp=function(){function e(e){this.errorCorrectionLevel=Bp.forBits(e>>3&3),this.dataMask=7&e}return e.numBitsDiffering=function(e,t){return qc.bitCount(e^t)},e.decodeFormatInformation=function(t,n){var r=e.doDecodeFormatInformation(t,n);return null!==r?r:e.doDecodeFormatInformation(t^e.FORMAT_INFO_MASK_QR,n^e.FORMAT_INFO_MASK_QR)},e.doDecodeFormatInformation=function(t,n){var r,o,a=Number.MAX_SAFE_INTEGER,i=0;try{for(var s=Ip(e.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var c=l.value,d=c[0];if(d===t||d===n)return new e(c[1]);var u=e.numBitsDiffering(t,d);u<a&&(i=c[1],a=u),t!==n&&(u=e.numBitsDiffering(n,d))<a&&(i=c[1],a=u)}}catch(h){r={error:h}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a<=3?new e(i):null},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getDataMask=function(){return this.dataMask},e.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},e.FORMAT_INFO_MASK_QR=21522,e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],e}();const Mp=Tp;var Dp=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rp=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return e.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},e.prototype.getNumBlocks=function(){var e,t,n=0,r=this.ecBlocks;try{for(var o=Dp(r),a=o.next();!a.done;a=o.next()){n+=a.value.getCount()}}catch(i){e={error:i}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},e.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},e.prototype.getECBlocks=function(){return this.ecBlocks},e}();const Op=Rp;var Fp=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}();const Lp=Fp;var zp=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Wp=function(){function e(e,t){for(var n,r,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var i=0,s=o[0].getECCodewordsPerBlock(),l=o[0].getECBlocks();try{for(var c=zp(l),d=c.next();!d.done;d=c.next()){var u=d.value;i+=u.getCount()*(u.getDataCodewords()+s)}}catch(h){n={error:h}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}this.totalCodewords=i}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},e.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},e.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new ed;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new ed}},e.getVersionForNumber=function(t){if(t<1||t>40)throw new Dc;return e.VERSIONS[t-1]},e.decodeVersionInformation=function(t){for(var n=Number.MAX_SAFE_INTEGER,r=0,o=0;o<e.VERSION_DECODE_INFO.length;o++){var a=e.VERSION_DECODE_INFO[o];if(a===t)return e.getVersionForNumber(o+7);var i=Mp.numBitsDiffering(t,a);i<n&&(r=o+7,n=i)}return n<=3?e.getVersionForNumber(r):null},e.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new dd(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,r=0;r<n;r++)for(var o=this.alignmentPatternCenters[r]-2,a=0;a<n;a++)0===r&&(0===a||a===n-1)||r===n-1&&0===a||t.setRegion(this.alignmentPatternCenters[a]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},e.prototype.toString=function(){return""+this.versionNumber},e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),e.VERSIONS=[new e(1,new Int32Array(0),new Op(7,new Lp(1,19)),new Op(10,new Lp(1,16)),new Op(13,new Lp(1,13)),new Op(17,new Lp(1,9))),new e(2,Int32Array.from([6,18]),new Op(10,new Lp(1,34)),new Op(16,new Lp(1,28)),new Op(22,new Lp(1,22)),new Op(28,new Lp(1,16))),new e(3,Int32Array.from([6,22]),new Op(15,new Lp(1,55)),new Op(26,new Lp(1,44)),new Op(18,new Lp(2,17)),new Op(22,new Lp(2,13))),new e(4,Int32Array.from([6,26]),new Op(20,new Lp(1,80)),new Op(18,new Lp(2,32)),new Op(26,new Lp(2,24)),new Op(16,new Lp(4,9))),new e(5,Int32Array.from([6,30]),new Op(26,new Lp(1,108)),new Op(24,new Lp(2,43)),new Op(18,new Lp(2,15),new Lp(2,16)),new Op(22,new Lp(2,11),new Lp(2,12))),new e(6,Int32Array.from([6,34]),new Op(18,new Lp(2,68)),new Op(16,new Lp(4,27)),new Op(24,new Lp(4,19)),new Op(28,new Lp(4,15))),new e(7,Int32Array.from([6,22,38]),new Op(20,new Lp(2,78)),new Op(18,new Lp(4,31)),new Op(18,new Lp(2,14),new Lp(4,15)),new Op(26,new Lp(4,13),new Lp(1,14))),new e(8,Int32Array.from([6,24,42]),new Op(24,new Lp(2,97)),new Op(22,new Lp(2,38),new Lp(2,39)),new Op(22,new Lp(4,18),new Lp(2,19)),new Op(26,new Lp(4,14),new Lp(2,15))),new e(9,Int32Array.from([6,26,46]),new Op(30,new Lp(2,116)),new Op(22,new Lp(3,36),new Lp(2,37)),new Op(20,new Lp(4,16),new Lp(4,17)),new Op(24,new Lp(4,12),new Lp(4,13))),new e(10,Int32Array.from([6,28,50]),new Op(18,new Lp(2,68),new Lp(2,69)),new Op(26,new Lp(4,43),new Lp(1,44)),new Op(24,new Lp(6,19),new Lp(2,20)),new Op(28,new Lp(6,15),new Lp(2,16))),new e(11,Int32Array.from([6,30,54]),new Op(20,new Lp(4,81)),new Op(30,new Lp(1,50),new Lp(4,51)),new Op(28,new Lp(4,22),new Lp(4,23)),new Op(24,new Lp(3,12),new Lp(8,13))),new e(12,Int32Array.from([6,32,58]),new Op(24,new Lp(2,92),new Lp(2,93)),new Op(22,new Lp(6,36),new Lp(2,37)),new Op(26,new Lp(4,20),new Lp(6,21)),new Op(28,new Lp(7,14),new Lp(4,15))),new e(13,Int32Array.from([6,34,62]),new Op(26,new Lp(4,107)),new Op(22,new Lp(8,37),new Lp(1,38)),new Op(24,new Lp(8,20),new Lp(4,21)),new Op(22,new Lp(12,11),new Lp(4,12))),new e(14,Int32Array.from([6,26,46,66]),new Op(30,new Lp(3,115),new Lp(1,116)),new Op(24,new Lp(4,40),new Lp(5,41)),new Op(20,new Lp(11,16),new Lp(5,17)),new Op(24,new Lp(11,12),new Lp(5,13))),new e(15,Int32Array.from([6,26,48,70]),new Op(22,new Lp(5,87),new Lp(1,88)),new Op(24,new Lp(5,41),new Lp(5,42)),new Op(30,new Lp(5,24),new Lp(7,25)),new Op(24,new Lp(11,12),new Lp(7,13))),new e(16,Int32Array.from([6,26,50,74]),new Op(24,new Lp(5,98),new Lp(1,99)),new Op(28,new Lp(7,45),new Lp(3,46)),new Op(24,new Lp(15,19),new Lp(2,20)),new Op(30,new Lp(3,15),new Lp(13,16))),new e(17,Int32Array.from([6,30,54,78]),new Op(28,new Lp(1,107),new Lp(5,108)),new Op(28,new Lp(10,46),new Lp(1,47)),new Op(28,new Lp(1,22),new Lp(15,23)),new Op(28,new Lp(2,14),new Lp(17,15))),new e(18,Int32Array.from([6,30,56,82]),new Op(30,new Lp(5,120),new Lp(1,121)),new Op(26,new Lp(9,43),new Lp(4,44)),new Op(28,new Lp(17,22),new Lp(1,23)),new Op(28,new Lp(2,14),new Lp(19,15))),new e(19,Int32Array.from([6,30,58,86]),new Op(28,new Lp(3,113),new Lp(4,114)),new Op(26,new Lp(3,44),new Lp(11,45)),new Op(26,new Lp(17,21),new Lp(4,22)),new Op(26,new Lp(9,13),new Lp(16,14))),new e(20,Int32Array.from([6,34,62,90]),new Op(28,new Lp(3,107),new Lp(5,108)),new Op(26,new Lp(3,41),new Lp(13,42)),new Op(30,new Lp(15,24),new Lp(5,25)),new Op(28,new Lp(15,15),new Lp(10,16))),new e(21,Int32Array.from([6,28,50,72,94]),new Op(28,new Lp(4,116),new Lp(4,117)),new Op(26,new Lp(17,42)),new Op(28,new Lp(17,22),new Lp(6,23)),new Op(30,new Lp(19,16),new Lp(6,17))),new e(22,Int32Array.from([6,26,50,74,98]),new Op(28,new Lp(2,111),new Lp(7,112)),new Op(28,new Lp(17,46)),new Op(30,new Lp(7,24),new Lp(16,25)),new Op(24,new Lp(34,13))),new e(23,Int32Array.from([6,30,54,78,102]),new Op(30,new Lp(4,121),new Lp(5,122)),new Op(28,new Lp(4,47),new Lp(14,48)),new Op(30,new Lp(11,24),new Lp(14,25)),new Op(30,new Lp(16,15),new Lp(14,16))),new e(24,Int32Array.from([6,28,54,80,106]),new Op(30,new Lp(6,117),new Lp(4,118)),new Op(28,new Lp(6,45),new Lp(14,46)),new Op(30,new Lp(11,24),new Lp(16,25)),new Op(30,new Lp(30,16),new Lp(2,17))),new e(25,Int32Array.from([6,32,58,84,110]),new Op(26,new Lp(8,106),new Lp(4,107)),new Op(28,new Lp(8,47),new Lp(13,48)),new Op(30,new Lp(7,24),new Lp(22,25)),new Op(30,new Lp(22,15),new Lp(13,16))),new e(26,Int32Array.from([6,30,58,86,114]),new Op(28,new Lp(10,114),new Lp(2,115)),new Op(28,new Lp(19,46),new Lp(4,47)),new Op(28,new Lp(28,22),new Lp(6,23)),new Op(30,new Lp(33,16),new Lp(4,17))),new e(27,Int32Array.from([6,34,62,90,118]),new Op(30,new Lp(8,122),new Lp(4,123)),new Op(28,new Lp(22,45),new Lp(3,46)),new Op(30,new Lp(8,23),new Lp(26,24)),new Op(30,new Lp(12,15),new Lp(28,16))),new e(28,Int32Array.from([6,26,50,74,98,122]),new Op(30,new Lp(3,117),new Lp(10,118)),new Op(28,new Lp(3,45),new Lp(23,46)),new Op(30,new Lp(4,24),new Lp(31,25)),new Op(30,new Lp(11,15),new Lp(31,16))),new e(29,Int32Array.from([6,30,54,78,102,126]),new Op(30,new Lp(7,116),new Lp(7,117)),new Op(28,new Lp(21,45),new Lp(7,46)),new Op(30,new Lp(1,23),new Lp(37,24)),new Op(30,new Lp(19,15),new Lp(26,16))),new e(30,Int32Array.from([6,26,52,78,104,130]),new Op(30,new Lp(5,115),new Lp(10,116)),new Op(28,new Lp(19,47),new Lp(10,48)),new Op(30,new Lp(15,24),new Lp(25,25)),new Op(30,new Lp(23,15),new Lp(25,16))),new e(31,Int32Array.from([6,30,56,82,108,134]),new Op(30,new Lp(13,115),new Lp(3,116)),new Op(28,new Lp(2,46),new Lp(29,47)),new Op(30,new Lp(42,24),new Lp(1,25)),new Op(30,new Lp(23,15),new Lp(28,16))),new e(32,Int32Array.from([6,34,60,86,112,138]),new Op(30,new Lp(17,115)),new Op(28,new Lp(10,46),new Lp(23,47)),new Op(30,new Lp(10,24),new Lp(35,25)),new Op(30,new Lp(19,15),new Lp(35,16))),new e(33,Int32Array.from([6,30,58,86,114,142]),new Op(30,new Lp(17,115),new Lp(1,116)),new Op(28,new Lp(14,46),new Lp(21,47)),new Op(30,new Lp(29,24),new Lp(19,25)),new Op(30,new Lp(11,15),new Lp(46,16))),new e(34,Int32Array.from([6,34,62,90,118,146]),new Op(30,new Lp(13,115),new Lp(6,116)),new Op(28,new Lp(14,46),new Lp(23,47)),new Op(30,new Lp(44,24),new Lp(7,25)),new Op(30,new Lp(59,16),new Lp(1,17))),new e(35,Int32Array.from([6,30,54,78,102,126,150]),new Op(30,new Lp(12,121),new Lp(7,122)),new Op(28,new Lp(12,47),new Lp(26,48)),new Op(30,new Lp(39,24),new Lp(14,25)),new Op(30,new Lp(22,15),new Lp(41,16))),new e(36,Int32Array.from([6,24,50,76,102,128,154]),new Op(30,new Lp(6,121),new Lp(14,122)),new Op(28,new Lp(6,47),new Lp(34,48)),new Op(30,new Lp(46,24),new Lp(10,25)),new Op(30,new Lp(2,15),new Lp(64,16))),new e(37,Int32Array.from([6,28,54,80,106,132,158]),new Op(30,new Lp(17,122),new Lp(4,123)),new Op(28,new Lp(29,46),new Lp(14,47)),new Op(30,new Lp(49,24),new Lp(10,25)),new Op(30,new Lp(24,15),new Lp(46,16))),new e(38,Int32Array.from([6,32,58,84,110,136,162]),new Op(30,new Lp(4,122),new Lp(18,123)),new Op(28,new Lp(13,46),new Lp(32,47)),new Op(30,new Lp(48,24),new Lp(14,25)),new Op(30,new Lp(42,15),new Lp(32,16))),new e(39,Int32Array.from([6,26,54,82,110,138,166]),new Op(30,new Lp(20,117),new Lp(4,118)),new Op(28,new Lp(40,47),new Lp(7,48)),new Op(30,new Lp(43,24),new Lp(22,25)),new Op(30,new Lp(10,15),new Lp(67,16))),new e(40,Int32Array.from([6,30,58,86,114,142,170]),new Op(30,new Lp(19,118),new Lp(6,119)),new Op(28,new Lp(18,47),new Lp(31,48)),new Op(30,new Lp(34,24),new Lp(34,25)),new Op(30,new Lp(20,15),new Lp(61,16)))],e}();const Vp=Wp;var Up;!function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(Up||(Up={}));const Hp=function(){function e(e,t){this.value=e,this.isMasked=t}return e.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},e.values=new Map([[Up.DATA_MASK_000,new e(Up.DATA_MASK_000,function(e,t){return 0===(e+t&1)})],[Up.DATA_MASK_001,new e(Up.DATA_MASK_001,function(e,t){return 0===(1&e)})],[Up.DATA_MASK_010,new e(Up.DATA_MASK_010,function(e,t){return t%3===0})],[Up.DATA_MASK_011,new e(Up.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Up.DATA_MASK_100,new e(Up.DATA_MASK_100,function(e,t){return 0===(Math.floor(e/2)+Math.floor(t/3)&1)})],[Up.DATA_MASK_101,new e(Up.DATA_MASK_101,function(e,t){return e*t%6===0})],[Up.DATA_MASK_110,new e(Up.DATA_MASK_110,function(e,t){return e*t%6<3})],[Up.DATA_MASK_111,new e(Up.DATA_MASK_111,function(e,t){return 0===(e+t+e*t%3&1)})]]),e}();var Gp=function(){function e(e){var t=e.getHeight();if(t<21||1!==(3&t))throw new ed;this.bitMatrix=e}return e.prototype.readFormatInformation=function(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);var r=this.bitMatrix.getHeight(),o=0,a=r-7;for(n=r-1;n>=a;n--)o=this.copyBit(8,n,o);for(t=r-8;t<r;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=Mp.decodeFormatInformation(e,o),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new ed},e.prototype.readVersion=function(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Vp.getVersionForNumber(t);for(var n=0,r=e-11,o=5;o>=0;o--)for(var a=e-9;a>=r;a--)n=this.copyBit(a,o,n);var i=Vp.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(a=5;a>=0;a--)for(o=e-9;o>=r;o--)n=this.copyBit(a,o,n);if(null!==(i=Vp.decodeVersionInformation(n))&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new ed},e.prototype.copyBit=function(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1},e.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=Hp.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);for(var o=t.buildFunctionPattern(),a=!0,i=new Uint8Array(t.getTotalCodewords()),s=0,l=0,c=0,d=r-1;d>0;d-=2){6===d&&d--;for(var u=0;u<r;u++)for(var h=a?r-1-u:u,p=0;p<2;p++)o.get(d-p,h)||(c++,l<<=1,this.bitMatrix.get(d-p,h)&&(l|=1),8===c&&(i[s++]=l,c=0,l=0));a=!a}if(s!==t.getTotalCodewords())throw new ed;return i},e.prototype.remask=function(){if(null!==this.parsedFormatInfo){var e=Hp.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},e.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},e.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var r=t+1,o=e.getHeight();r<o;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))},e}();const Xp=Gp;var Kp=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Yp=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n,r){var o,a,i,s;if(t.length!==n.getTotalCodewords())throw new Dc;var l=n.getECBlocksForLevel(r),c=0,d=l.getECBlocks();try{for(var u=Kp(d),h=u.next();!h.done;h=u.next()){c+=(x=h.value).getCount()}}catch(E){o={error:E}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}var p=new Array(c),f=0;try{for(var m=Kp(d),g=m.next();!g.done;g=m.next())for(var x=g.value,y=0;y<x.getCount();y++){var v=x.getDataCodewords(),b=l.getECCodewordsPerBlock()+v;p[f++]=new e(v,new Uint8Array(b))}}catch(A){i={error:A}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}for(var w=p[0].codewords.length,k=p.length-1;k>=0;){if(p[k].codewords.length===w)break;k--}k++;var C=w-l.getECCodewordsPerBlock(),j=0;for(y=0;y<C;y++)for(var _=0;_<f;_++)p[_].codewords[y]=t[j++];for(_=k;_<f;_++)p[_].codewords[C]=t[j++];var N=p[0].codewords.length;for(y=C;y<N;y++)for(_=0;_<f;_++){var S=_<k?y:y+1;p[_].codewords[S]=t[j++]}return p},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}();const qp=Yp;var Zp;!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(Zp||(Zp={}));var Jp=function(){function e(t,n,r,o){this.value=t,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=o,e.FOR_BITS.set(o,this),e.FOR_VALUE.set(t,this)}return e.forBits=function(t){var n=e.FOR_BITS.get(t);if(void 0===n)throw new Dc;return n},e.prototype.getCharacterCountBits=function(e){var t,n=e.getVersionNumber();return t=n<=9?0:n<=26?1:2,this.characterCountBitsForVersions[t]},e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.toString=function(){return this.stringValue},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.TERMINATOR=new e(Zp.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),e.NUMERIC=new e(Zp.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),e.ALPHANUMERIC=new e(Zp.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),e.STRUCTURED_APPEND=new e(Zp.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),e.BYTE=new e(Zp.BYTE,"BYTE",Int32Array.from([8,16,16]),4),e.ECI=new e(Zp.ECI,"ECI",Int32Array.from([0,0,0]),7),e.KANJI=new e(Zp.KANJI,"KANJI",Int32Array.from([8,10,12]),8),e.FNC1_FIRST_POSITION=new e(Zp.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),e.FNC1_SECOND_POSITION=new e(Zp.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),e.HANZI=new e(Zp.HANZI,"HANZI",Int32Array.from([8,10,12]),13),e}();const Qp=Jp;var $p=function(){function e(){}return e.decode=function(t,n,r,o){var a=new bp(t),i=new cd,s=new Array,l=-1,c=-1;try{var d=null,u=!1,h=void 0;do{if(a.available()<4)h=Qp.TERMINATOR;else{var p=a.readBits(4);h=Qp.forBits(p)}switch(h){case Qp.TERMINATOR:break;case Qp.FNC1_FIRST_POSITION:case Qp.FNC1_SECOND_POSITION:u=!0;break;case Qp.STRUCTURED_APPEND:if(a.available()<16)throw new ed;l=a.readBits(8),c=a.readBits(8);break;case Qp.ECI:var f=e.parseECIValue(a);if(null===(d=od.getCharacterSetECIByValue(f)))throw new ed;break;case Qp.HANZI:var m=a.readBits(4),g=a.readBits(h.getCharacterCountBits(n));m===e.GB2312_SUBSET&&e.decodeHanziSegment(a,i,g);break;default:var x=a.readBits(h.getCharacterCountBits(n));switch(h){case Qp.NUMERIC:e.decodeNumericSegment(a,i,x);break;case Qp.ALPHANUMERIC:e.decodeAlphanumericSegment(a,i,x,u);break;case Qp.BYTE:e.decodeByteSegment(a,i,x,d,s,o);break;case Qp.KANJI:e.decodeKanjiSegment(a,i,x);break;default:throw new ed}}}while(h!==Qp.TERMINATOR)}catch(y){throw new ed}return new Td(t,i.toString(),0===s.length?null:s,null===r?null:r.toString(),l,c)},e.decodeHanziSegment=function(e,t,n){if(13*n>e.available())throw new ed;for(var r=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),i=a/96<<8&4294967295|a%96;i+=i<959?41377:42657,r[o]=i>>8&255,r[o+1]=255&i,o+=2,n--}try{t.append(sd.decode(r,ld.GB2312))}catch(s){throw new ed(s)}},e.decodeKanjiSegment=function(e,t,n){if(13*n>e.available())throw new ed;for(var r=new Uint8Array(2*n),o=0;n>0;){var a=e.readBits(13),i=a/192<<8&4294967295|a%192;i+=i<7936?33088:49472,r[o]=i>>8,r[o+1]=i,o+=2,n--}try{t.append(sd.decode(r,ld.SHIFT_JIS))}catch(s){throw new ed(s)}},e.decodeByteSegment=function(e,t,n,r,o,a){if(8*n>e.available())throw new ed;for(var i,s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);i=null===r?ld.guessEncoding(s,a):r.getName();try{t.append(sd.decode(s,i))}catch(c){throw new ed(c)}o.push(s)},e.toAlphaNumericChar=function(t){if(t>=e.ALPHANUMERIC_CHARS.length)throw new ed;return e.ALPHANUMERIC_CHARS[t]},e.decodeAlphanumericSegment=function(t,n,r,o){for(var a=n.length();r>1;){if(t.available()<11)throw new ed;var i=t.readBits(11);n.append(e.toAlphaNumericChar(Math.floor(i/45))),n.append(e.toAlphaNumericChar(i%45)),r-=2}if(1===r){if(t.available()<6)throw new ed;n.append(e.toAlphaNumericChar(t.readBits(6)))}if(o)for(var s=a;s<n.length();s++)"%"===n.charAt(s)&&(s<n.length()-1&&"%"===n.charAt(s+1)?n.deleteCharAt(s+1):n.setCharAt(s,String.fromCharCode(29)))},e.decodeNumericSegment=function(t,n,r){for(;r>=3;){if(t.available()<10)throw new ed;var o=t.readBits(10);if(o>=1e3)throw new ed;n.append(e.toAlphaNumericChar(Math.floor(o/100))),n.append(e.toAlphaNumericChar(Math.floor(o/10)%10)),n.append(e.toAlphaNumericChar(o%10)),r-=3}if(2===r){if(t.available()<7)throw new ed;var a=t.readBits(7);if(a>=100)throw new ed;n.append(e.toAlphaNumericChar(Math.floor(a/10))),n.append(e.toAlphaNumericChar(a%10))}else if(1===r){if(t.available()<4)throw new ed;var i=t.readBits(4);if(i>=10)throw new ed;n.append(e.toAlphaNumericChar(i))}},e.parseECIValue=function(e){var t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new ed},e.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.GB2312_SUBSET=1,e}();const ef=$p;const tf=function(){function e(e){this.mirrored=e}return e.prototype.isMirrored=function(){return this.mirrored},e.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},e}();var nf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rf=function(){function e(){this.rsDecoder=new Xd(zd.QR_CODE_FIELD_256)}return e.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(dd.parseFromBooleanArray(e),t)},e.prototype.decodeBitMatrix=function(e,t){var n=new Xp(e),r=null;try{return this.decodeBitMatrixParser(n,t)}catch(iN){r=iN}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var o=this.decodeBitMatrixParser(n,t);return o.setOther(new tf(!0)),o}catch(iN){if(null!==r)throw r;throw iN}},e.prototype.decodeBitMatrixParser=function(e,t){var n,r,o,a,i=e.readVersion(),s=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),c=qp.getDataBlocks(l,i,s),d=0;try{for(var u=nf(c),h=u.next();!h.done;h=u.next()){d+=(x=h.value).getNumDataCodewords()}}catch(w){n={error:w}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}var p=new Uint8Array(d),f=0;try{for(var m=nf(c),g=m.next();!g.done;g=m.next()){var x,y=(x=g.value).getCodewords(),v=x.getNumDataCodewords();this.correctErrors(y,v);for(var b=0;b<v;b++)p[f++]=y[b]}}catch(k){o={error:k}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}return ef.decode(p,i,s,t)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(o){throw new Fc}for(var r=0;r<t;r++)e[r]=n[r]},e}();const of=rf;var af=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const sf=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.estimatedModuleSize=r,o}return af(t,e),t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){return new t((this.getX()+n)/2,(this.getY()+e)/2,(this.estimatedModuleSize+r)/2)},t}(Jd);var lf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cf=function(){function e(e,t,n,r,o,a,i){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=o,this.moduleSize=a,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return e.prototype.find=function(){for(var e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,o=new Int32Array(3),a=this.image,i=0;i<t;i++){var s=r+(0===(1&i)?Math.floor((i+1)/2):-Math.floor((i+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var l=e;l<n&&!a.get(l,s);)l++;for(var c=0;l<n;){if(a.get(l,s))if(1===c)o[1]++;else if(2===c){var d;if(this.foundPatternCross(o))if(null!==(d=this.handlePossibleCenter(o,s,l)))return d;o[0]=o[2],o[1]=1,o[2]=0,c=1}else o[++c]++;else 1===c&&c++,o[c]++;l++}if(this.foundPatternCross(o))if(null!==(d=this.handlePossibleCenter(o,s,n)))return d}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new hd},e.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},e.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0},e.prototype.crossCheckVertical=function(t,n,r,o){var a=this.image,i=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=t;l>=0&&a.get(n,l)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&!a.get(n,l)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=t+1;l<i&&a.get(n,l)&&s[1]<=r;)s[1]++,l++;if(l===i||s[1]>r)return NaN;for(;l<i&&!a.get(n,l)&&s[2]<=r;)s[2]++,l++;if(s[2]>r)return NaN;var c=s[0]+s[1]+s[2];return 5*Math.abs(c-o)>=2*o?NaN:this.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.handlePossibleCenter=function(t,n,r){var o,a,i=t[0]+t[1]+t[2],s=e.centerFromEnd(t,r),l=this.crossCheckVertical(n,s,2*t[1],i);if(!isNaN(l)){var c=(t[0]+t[1]+t[2])/3;try{for(var d=lf(this.possibleCenters),u=d.next();!u.done;u=d.next()){var h=u.value;if(h.aboutEquals(c,l,s))return h.combineEstimate(l,s,c)}}catch(f){o={error:f}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}var p=new sf(s,l,c);this.possibleCenters.push(p),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},e}();const df=cf;var uf=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hf=function(e){function t(t,n,r,o){var a=e.call(this,t,n)||this;return a.estimatedModuleSize=r,a.count=o,void 0===o&&(a.count=1),a}return uf(t,e),t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){var o=this.count+1;return new t((this.count*this.getX()+n)/o,(this.count*this.getY()+e)/o,(this.count*this.estimatedModuleSize+r)/o,o)},t}(Jd);const pf=hf;const ff=function(){function e(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e}();var mf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gf=function(){function e(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return e.prototype.getImage=function(){return this.image},e.prototype.getPossibleCenters=function(){return this.possibleCenters},e.prototype.find=function(t){var n=null!==t&&void 0!==t&&void 0!==t.get(Qc.TRY_HARDER),r=null!==t&&void 0!==t&&void 0!==t.get(Qc.PURE_BARCODE),o=this.image,a=o.getHeight(),i=o.getWidth(),s=Math.floor(3*a/(4*e.MAX_MODULES));(s<e.MIN_SKIP||n)&&(s=e.MIN_SKIP);for(var l=!1,c=new Int32Array(5),d=s-1;d<a&&!l;d+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var u=0,h=0;h<i;h++)if(o.get(h,d))1===(1&u)&&u++,c[u]++;else if(0===(1&u))if(4===u)if(e.foundPatternCross(c)){if(!0!==this.handlePossibleCenter(c,d,h,r)){c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,u=3;continue}if(s=2,!0===this.hasSkipped)l=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>c[2]&&(d+=p-c[2]-s,h=i-1)}u=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,u=3;else c[++u]++;else c[u]++;if(e.foundPatternCross(c))!0===this.handlePossibleCenter(c,d,i,r)&&(s=c[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}var f=this.selectBestPatterns();return Jd.orderBestPatterns(f),new ff(f)},e.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},e.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var r=e[n];if(0===r)return!1;t+=r}if(t<7)return!1;var o=t/7,a=o/2;return Math.abs(o-e[0])<a&&Math.abs(o-e[1])<a&&Math.abs(3*o-e[2])<3*a&&Math.abs(o-e[3])<a&&Math.abs(o-e[4])<a},e.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},e.prototype.crossCheckDiagonal=function(t,n,r,o){for(var a=this.getCrossCheckStateCount(),i=0,s=this.image;t>=i&&n>=i&&s.get(n-i,t-i);)a[2]++,i++;if(t<i||n<i)return!1;for(;t>=i&&n>=i&&!s.get(n-i,t-i)&&a[1]<=r;)a[1]++,i++;if(t<i||n<i||a[1]>r)return!1;for(;t>=i&&n>=i&&s.get(n-i,t-i)&&a[0]<=r;)a[0]++,i++;if(a[0]>r)return!1;var l=s.getHeight(),c=s.getWidth();for(i=1;t+i<l&&n+i<c&&s.get(n+i,t+i);)a[2]++,i++;if(t+i>=l||n+i>=c)return!1;for(;t+i<l&&n+i<c&&!s.get(n+i,t+i)&&a[3]<r;)a[3]++,i++;if(t+i>=l||n+i>=c||a[3]>=r)return!1;for(;t+i<l&&n+i<c&&s.get(n+i,t+i)&&a[4]<r;)a[4]++,i++;if(a[4]>=r)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-o)<2*o&&e.foundPatternCross(a)},e.prototype.crossCheckVertical=function(t,n,r,o){for(var a=this.image,i=a.getHeight(),s=this.getCrossCheckStateCount(),l=t;l>=0&&a.get(n,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(n,l)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&a.get(n,l)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=t+1;l<i&&a.get(n,l);)s[2]++,l++;if(l===i)return NaN;for(;l<i&&!a.get(n,l)&&s[3]<r;)s[3]++,l++;if(l===i||s[3]>=r)return NaN;for(;l<i&&a.get(n,l)&&s[4]<r;)s[4]++,l++;if(s[4]>=r)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-o)>=2*o?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.crossCheckHorizontal=function(t,n,r,o){for(var a=this.image,i=a.getWidth(),s=this.getCrossCheckStateCount(),l=t;l>=0&&a.get(l,n);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(l,n)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&a.get(l,n)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=t+1;l<i&&a.get(l,n);)s[2]++,l++;if(l===i)return NaN;for(;l<i&&!a.get(l,n)&&s[3]<r;)s[3]++,l++;if(l===i||s[3]>=r)return NaN;for(;l<i&&a.get(l,n)&&s[4]<r;)s[4]++,l++;if(s[4]>=r)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-o)>=o?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.handlePossibleCenter=function(t,n,r,o){var a=t[0]+t[1]+t[2]+t[3]+t[4],i=e.centerFromEnd(t,r),s=this.crossCheckVertical(n,Math.floor(i),t[2],a);if(!isNaN(s)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(s),t[2],a),!isNaN(i)&&(!o||this.crossCheckDiagonal(Math.floor(s),Math.floor(i),t[2],a)))){for(var l=a/7,c=!1,d=this.possibleCenters,u=0,h=d.length;u<h;u++){var p=d[u];if(p.aboutEquals(l,s,i)){d[u]=p.combineEstimate(s,i,l),c=!0;break}}if(!c){var f=new pf(i,s,l);d.push(f),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(f)}return!0}return!1},e.prototype.findRowSkip=function(){var t,n;if(this.possibleCenters.length<=1)return 0;var r=null;try{for(var o=mf(this.possibleCenters),a=o.next();!a.done;a=o.next()){var i=a.value;if(i.getCount()>=e.CENTER_QUORUM){if(null!=r)return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-i.getX())-Math.abs(r.getY()-i.getY()))/2);r=i}}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return 0},e.prototype.haveMultiplyConfirmedCenters=function(){var t,n,r,o,a=0,i=0,s=this.possibleCenters.length;try{for(var l=mf(this.possibleCenters),c=l.next();!c.done;c=l.next()){(f=c.value).getCount()>=e.CENTER_QUORUM&&(a++,i+=f.getEstimatedModuleSize())}}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}if(a<3)return!1;var d=i/s,u=0;try{for(var h=mf(this.possibleCenters),p=h.next();!p.done;p=h.next()){var f=p.value;u+=Math.abs(f.getEstimatedModuleSize()-d)}}catch(g){r={error:g}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}return u<=.05*i},e.prototype.selectBestPatterns=function(){var e,t,n,r,o=this.possibleCenters.length;if(o<3)throw new hd;var a,i=this.possibleCenters;if(o>3){var s=0,l=0;try{for(var c=mf(this.possibleCenters),d=c.next();!d.done;d=c.next()){var u=d.value.getEstimatedModuleSize();s+=u,l+=u*u}}catch(y){e={error:y}}finally{try{d&&!d.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}a=s/o;var h=Math.sqrt(l/o-a*a);i.sort(function(e,t){var n=Math.abs(t.getEstimatedModuleSize()-a),r=Math.abs(e.getEstimatedModuleSize()-a);return n<r?-1:n>r?1:0});for(var p=Math.max(.2*a,h),f=0;f<i.length&&i.length>3;f++){var m=i[f];Math.abs(m.getEstimatedModuleSize()-a)>p&&(i.splice(f,1),f--)}}if(i.length>3){s=0;try{for(var g=mf(i),x=g.next();!x.done;x=g.next()){s+=x.value.getEstimatedModuleSize()}}catch(v){n={error:v}}finally{try{x&&!x.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}a=s/i.length,i.sort(function(e,t){if(t.getCount()===e.getCount()){var n=Math.abs(t.getEstimatedModuleSize()-a),r=Math.abs(e.getEstimatedModuleSize()-a);return n<r?1:n>r?-1:0}return t.getCount()-e.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]},e.CENTER_QUORUM=2,e.MIN_SKIP=3,e.MAX_MODULES=57,e}();const xf=gf;var yf=function(){function e(e){this.image=e}return e.prototype.getImage=function(){return this.image},e.prototype.getResultPointCallback=function(){return this.resultPointCallback},e.prototype.detect=function(e){this.resultPointCallback=null===e||void 0===e?null:e.get(Qc.NEED_RESULT_POINT_CALLBACK);var t=new xf(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)},e.prototype.processFinderPatternInfo=function(t){var n=t.getTopLeft(),r=t.getTopRight(),o=t.getBottomLeft(),a=this.calculateModuleSize(n,r,o);if(a<1)throw new hd("No pattern found in proccess finder.");var i=e.computeDimension(n,r,o,a),s=Vp.getProvisionalVersionForDimension(i),l=s.getDimensionForVersion()-7,c=null;if(s.getAlignmentPatternCenters().length>0)for(var d=r.getX()-n.getX()+o.getX(),u=r.getY()-n.getY()+o.getY(),h=1-3/l,p=Math.floor(n.getX()+h*(d-n.getX())),f=Math.floor(n.getY()+h*(u-n.getY())),m=4;m<=16;m<<=1)try{c=this.findAlignmentInRegion(a,p,f,m);break}catch(y){if(!(y instanceof hd))throw y}var g=e.createTransform(n,r,o,c,i),x=e.sampleGrid(this.image,g,i);return new Qd(x,null===c?[o,n,r]:[o,n,r,c])},e.createTransform=function(e,t,n,r,o){var a,i,s,l,c=o-3.5;return null!==r?(a=r.getX(),i=r.getY(),l=s=c-3):(a=t.getX()-e.getX()+n.getX(),i=t.getY()-e.getY()+n.getY(),s=c,l=c),ru.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,s,l,3.5,c,e.getX(),e.getY(),t.getX(),t.getY(),a,i,n.getX(),n.getY())},e.sampleGrid=function(e,t,n){return iu.getInstance().sampleGridWithTransform(e,n,n,t)},e.computeDimension=function(e,t,n,r){var o=qd.round(Jd.distance(e,t)/r),a=qd.round(Jd.distance(e,n)/r),i=Math.floor((o+a)/2)+7;switch(3&i){case 0:i++;break;case 2:i--;break;case 3:throw new hd("Dimensions could be not found.")}return i},e.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},e.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14},e.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,r){var o=this.sizeOfBlackWhiteBlackRun(e,t,n,r),a=1,i=e-(n-e);i<0?(a=e/(e-i),i=0):i>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(i-e),i=this.image.getWidth()-1);var s=Math.floor(t-(r-t)*a);return a=1,s<0?(a=t/(t-s),s=0):s>=this.image.getHeight()&&(a=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),i=Math.floor(e+(i-e)*a),(o+=this.sizeOfBlackWhiteBlackRun(e,t,i,s))-1},e.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,r){var o=Math.abs(r-t)>Math.abs(n-e);if(o){var a=e;e=t,t=a,a=n,n=r,r=a}for(var i=Math.abs(n-e),s=Math.abs(r-t),l=-i/2,c=e<n?1:-1,d=t<r?1:-1,u=0,h=n+c,p=e,f=t;p!==h;p+=c){var m=o?f:p,g=o?p:f;if(1===u===this.image.get(m,g)){if(2===u)return qd.distance(p,f,e,t);u++}if((l+=s)>0){if(f===r)break;f+=d,l-=i}}return 2===u?qd.distance(n+c,r,e,t):NaN},e.prototype.findAlignmentInRegion=function(e,t,n,r){var o=Math.floor(r*e),a=Math.max(0,t-o),i=Math.min(this.image.getWidth()-1,t+o);if(i-a<3*e)throw new hd("Alignment top exceeds estimated module size.");var s=Math.max(0,n-o),l=Math.min(this.image.getHeight()-1,n+o);if(l-s<3*e)throw new hd("Alignment bottom exceeds estimated module size.");return new df(this.image,a,s,i-a,l-s,e,this.resultPointCallback).find()},e}();const vf=yf;const bf=function(){function e(){this.decoder=new of}return e.prototype.getDecoder=function(){return this.decoder},e.prototype.decode=function(t,n){var r,o;if(void 0!==n&&null!==n&&void 0!==n.get(Qc.PURE_BARCODE)){var a=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,n),o=e.NO_POINTS}else{var i=new vf(t.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(i.getBits(),n),o=i.getPoints()}r.getOther()instanceof tf&&r.getOther().applyMirroredCorrection(o);var s=new Ed(r.getText(),r.getRawBytes(),void 0,o,Pd.QR_CODE,void 0),l=r.getByteSegments();null!==l&&s.putMetadata(Id.BYTE_SEGMENTS,l);var c=r.getECLevel();return null!==c&&s.putMetadata(Id.ERROR_CORRECTION_LEVEL,c),r.hasStructuredAppend()&&(s.putMetadata(Id.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(Id.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new hd;var r=this.moduleSize(t,e),o=t[1],a=n[1],i=t[0],s=n[0];if(i>=s||o>=a)throw new hd;if(a-o!==s-i&&(s=i+(a-o))>=e.getWidth())throw new hd;var l=Math.round((s-i+1)/r),c=Math.round((a-o+1)/r);if(l<=0||c<=0)throw new hd;if(c!==l)throw new hd;var d=Math.floor(r/2);o+=d;var u=(i+=d)+Math.floor((l-1)*r)-s;if(u>0){if(u>d)throw new hd;i-=u}var h=o+Math.floor((c-1)*r)-a;if(h>0){if(h>d)throw new hd;o-=h}for(var p=new dd(l,c),f=0;f<c;f++)for(var m=o+Math.floor(f*r),g=0;g<l;g++)e.get(i+Math.floor(g*r),m)&&p.set(g,f);return p},e.moduleSize=function(e,t){for(var n=t.getHeight(),r=t.getWidth(),o=e[0],a=e[1],i=!0,s=0;o<r&&a<n;){if(i!==t.get(o,a)){if(5===++s)break;i=!i}o++,a++}if(o===r||a===n)throw new hd;return(o-e[0])/7},e.NO_POINTS=new Array,e}();var wf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kf=function(){function e(){}return e.prototype.PDF417Common=function(){},e.getBitCountSum=function(e){return qd.sum(e)},e.toIntArray=function(t){var n,r;if(null==t||!t.length)return e.EMPTY_INT_ARRAY;var o=new Int32Array(t.length),a=0;try{for(var i=wf(t),s=i.next();!s.done;s=i.next()){var l=s.value;o[a++]=l}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},e.getCodeword=function(t){var n=Yc.binarySearch(e.SYMBOL_TABLE,262143&t);return n<0?-1:(e.CODEWORD_TABLE[n]-1)%e.NUMBER_OF_CODEWORDS},e.NUMBER_OF_CODEWORDS=929,e.MAX_CODEWORDS_IN_BARCODE=e.NUMBER_OF_CODEWORDS-1,e.MIN_ROWS_IN_BARCODE=3,e.MAX_ROWS_IN_BARCODE=90,e.MODULES_IN_CODEWORD=17,e.MODULES_IN_STOP_PATTERN=18,e.BARS_IN_MODULE=8,e.EMPTY_INT_ARRAY=new Int32Array([]),e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),e}();const Cf=kf;const jf=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}();var _f=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nf=function(){function e(){}return e.detectMultiple=function(t,n,r){var o=t.getBlackMatrix(),a=e.detect(r,o);return a.length||((o=o.clone()).rotate180(),a=e.detect(r,o)),new jf(o,a)},e.detect=function(t,n){for(var r,o,a=new Array,i=0,s=0,l=!1;i<n.getHeight();){var c=e.findVertices(n,i,s);if(null!=c[0]||null!=c[3]){if(l=!0,a.push(c),!t)break;null!=c[2]?(s=Math.trunc(c[2].getX()),i=Math.trunc(c[2].getY())):(s=Math.trunc(c[4].getX()),i=Math.trunc(c[4].getY()))}else{if(!l)break;l=!1,s=0;try{for(var d=(r=void 0,_f(a)),u=d.next();!u.done;u=d.next()){var h=u.value;null!=h[1]&&(i=Math.trunc(Math.max(i,h[1].getY()))),null!=h[3]&&(i=Math.max(i,Math.trunc(h[3].getY())))}}catch(p){r={error:p}}finally{try{u&&!u.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}i+=e.ROW_STEP}}return a},e.findVertices=function(t,n,r){var o=t.getHeight(),a=t.getWidth(),i=new Array(8);return e.copyToResult(i,e.findRowsWithPattern(t,o,a,n,r,e.START_PATTERN),e.INDEXES_START_PATTERN),null!=i[4]&&(r=Math.trunc(i[4].getX()),n=Math.trunc(i[4].getY())),e.copyToResult(i,e.findRowsWithPattern(t,o,a,n,r,e.STOP_PATTERN),e.INDEXES_STOP_PATTERN),i},e.copyToResult=function(e,t,n){for(var r=0;r<n.length;r++)e[n[r]]=t[r]},e.findRowsWithPattern=function(t,n,r,o,a,i){for(var s=new Array(4),l=!1,c=new Int32Array(i.length);o<n;o+=e.ROW_STEP){if(null!=(p=e.findGuardPattern(t,a,o,r,!1,i,c))){for(;o>0;){if(null==(h=e.findGuardPattern(t,a,--o,r,!1,i,c))){o++;break}p=h}s[0]=new Jd(p[0],o),s[1]=new Jd(p[1],o),l=!0;break}}var d=o+1;if(l){for(var u=0,h=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);d<n;d++){var p;if(null!=(p=e.findGuardPattern(t,h[0],d,r,!1,i,c))&&Math.abs(h[0]-p[0])<e.MAX_PATTERN_DRIFT&&Math.abs(h[1]-p[1])<e.MAX_PATTERN_DRIFT)h=p,u=0;else{if(u>e.SKIPPED_ROW_COUNT_MAX)break;u++}}d-=u+1,s[2]=new Jd(h[0],d),s[3]=new Jd(h[1],d)}return d-o<e.BARCODE_MIN_HEIGHT&&Yc.fill(s,null),s},e.findGuardPattern=function(t,n,r,o,a,i,s){Yc.fillWithin(s,0,s.length,0);for(var l=n,c=0;t.get(l,r)&&l>0&&c++<e.MAX_PIXEL_DRIFT;)l--;for(var d=l,u=0,h=i.length,p=a;d<o;d++){if(t.get(d,r)!==p)s[u]++;else{if(u===h-1){if(e.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=s[0]+s[1],Wc.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,p=!p}}return u===h-1&&e.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},e.patternMatchVariance=function(e,t,n){for(var r=e.length,o=0,a=0,i=0;i<r;i++)o+=e[i],a+=t[i];if(o<a)return 1/0;var s=o/a;n*=s;for(var l=0,c=0;c<r;c++){var d=e[c],u=t[c]*s,h=d>u?d-u:u-d;if(h>n)return 1/0;l+=h}return l/o},e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),e.MAX_AVG_VARIANCE=.42,e.MAX_INDIVIDUAL_VARIANCE=.8,e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),e.MAX_PIXEL_DRIFT=3,e.MAX_PATTERN_DRIFT=5,e.SKIPPED_ROW_COUNT_MAX=25,e.ROW_STEP=5,e.BARCODE_MIN_HEIGHT=10,e}();const Sf=Nf;var Ef=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Af=function(){function e(e,t){if(0===t.length)throw new Dc;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),Wc.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){var t,n;if(0===e)return this.getCoefficient(0);if(1===e){var r=0;try{for(var o=Ef(this.coefficients),a=o.next();!a.done;a=o.next()){var i=a.value;r=this.field.add(r,i)}}catch(d){t={error:d}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}for(var s=this.coefficients[0],l=this.coefficients.length,c=1;c<l;c++)s=this.field.add(this.field.multiply(e,s),this.coefficients[c]);return s},e.prototype.add=function(t){if(!this.field.equals(t.field))throw new Dc("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var o=n;n=r,r=o}var a=new Int32Array(r.length),i=r.length-n.length;Wc.arraycopy(r,0,a,0,i);for(var s=i;s<r.length;s++)a[s]=this.field.add(n[s-i],r[s]);return new e(this.field,a)},e.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Dc("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},e.prototype.multiply=function(t){return t instanceof e?this.multiplyOther(t):this.multiplyScalar(t)},e.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new Dc("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new e(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,o=t.coefficients,a=o.length,i=new Int32Array(r+a-1),s=0;s<r;s++)for(var l=n[s],c=0;c<a;c++)i[s+c]=this.field.add(i[s+c],this.field.multiply(l,o[c]));return new e(this.field,i)},e.prototype.negative=function(){for(var t=this.coefficients.length,n=new Int32Array(t),r=0;r<t;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new e(this.field,n)},e.prototype.multiplyScalar=function(t){if(0===t)return new e(this.field,new Int32Array([0]));if(1===t)return this;for(var n=this.coefficients.length,r=new Int32Array(n),o=0;o<n;o++)r[o]=this.field.multiply(this.coefficients[o],t);return new e(this.field,r)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new Dc;if(0===n)return new e(this.field,new Int32Array([0]));for(var r=this.coefficients.length,o=new Int32Array(r+t),a=0;a<r;a++)o[a]=this.field.multiply(this.coefficients[a],n);return new e(this.field,o)},e.prototype.toString=function(){for(var e=new cd,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},e}();const Pf=Af;const Bf=function(){function e(){}return e.prototype.add=function(e,t){return(e+t)%this.modulus},e.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new Dc;return this.logTable[e]},e.prototype.inverse=function(e){if(0===e)throw new Fd;return this.expTable[this.modulus-this.logTable[e]-1]},e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},e.prototype.getSize=function(){return this.modulus},e.prototype.equals=function(e){return e===this},e}();var If=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Tf=function(e){function t(t,n){var r=e.call(this)||this;r.modulus=t,r.expTable=new Int32Array(t),r.logTable=new Int32Array(t);for(var o=1,a=0;a<t;a++)r.expTable[a]=o,o=o*n%t;for(a=0;a<t-1;a++)r.logTable[r.expTable[a]]=a;return r.zero=new Pf(r,new Int32Array([0])),r.one=new Pf(r,new Int32Array([1])),r}return If(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new Dc;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new Pf(this,n)},t.PDF417_GF=new t(Cf.NUMBER_OF_CODEWORDS,3),t}(Bf);var Mf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Df=function(){function e(){this.field=Tf.PDF417_GF}return e.prototype.decode=function(e,t,n){for(var r,o,a=new Pf(this.field,e),i=new Int32Array(t),s=!1,l=t;l>0;l--){var c=a.evaluateAt(this.field.exp(l));i[t-l]=c,0!==c&&(s=!0)}if(!s)return 0;var d=this.field.getOne();if(null!=n)try{for(var u=Mf(n),h=u.next();!h.done;h=u.next()){var p=h.value,f=this.field.exp(e.length-1-p),m=new Pf(this.field,new Int32Array([this.field.subtract(0,f),1]));d=d.multiply(m)}}catch(C){r={error:C}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}var g=new Pf(this.field,i),x=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),g,t),y=x[0],v=x[1],b=this.findErrorLocations(y),w=this.findErrorMagnitudes(v,y,b);for(l=0;l<b.length;l++){var k=e.length-1-this.field.log(b[l]);if(k<0)throw Fc.getChecksumInstance();e[k]=this.field.subtract(e[k],w[l])}return b.length},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var o=e,a=t,i=this.field.getZero(),s=this.field.getOne();a.getDegree()>=Math.round(n/2);){var l=o,c=i;if(i=s,(o=a).isZero())throw Fc.getChecksumInstance();a=l;for(var d=this.field.getZero(),u=o.getCoefficient(o.getDegree()),h=this.field.inverse(u);a.getDegree()>=o.getDegree()&&!a.isZero();){var p=a.getDegree()-o.getDegree(),f=this.field.multiply(a.getCoefficient(a.getDegree()),h);d=d.add(this.field.buildMonomial(p,f)),a=a.subtract(o.multiplyByMonomial(p,f))}s=d.multiply(i).subtract(c).negative()}var m=s.getCoefficient(0);if(0===m)throw Fc.getChecksumInstance();var g=this.field.inverse(m);return[s.multiply(g),a.multiply(g)]},e.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),r=0,o=1;o<this.field.getSize()&&r<t;o++)0===e.evaluateAt(o)&&(n[r]=this.field.inverse(o),r++);if(r!==t)throw Fc.getChecksumInstance();return n},e.prototype.findErrorMagnitudes=function(e,t,n){for(var r=t.getDegree(),o=new Int32Array(r),a=1;a<=r;a++)o[r-a]=this.field.multiply(a,t.getCoefficient(a));var i=new Pf(this.field,o),s=n.length,l=new Int32Array(s);for(a=0;a<s;a++){var c=this.field.inverse(n[a]),d=this.field.subtract(0,e.evaluateAt(c)),u=this.field.inverse(i.evaluateAt(c));l[a]=this.field.multiply(d,u)}return l},e}();const Rf=Df;const Of=function(){function e(t,n,r,o,a){t instanceof e?this.constructor_2(t):this.constructor_1(t,n,r,o,a)}return e.prototype.constructor_1=function(e,t,n,r,o){var a=null==t||null==n,i=null==r||null==o;if(a&&i)throw new hd;a?(t=new Jd(0,r.getY()),n=new Jd(0,o.getY())):i&&(r=new Jd(e.getWidth()-1,t.getY()),o=new Jd(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))},e.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},e.merge=function(t,n){return null==t?n:null==n?t:new e(t.image,t.topLeft,t.bottomLeft,n.topRight,n.bottomRight)},e.prototype.addMissingRows=function(t,n,r){var o=this.topLeft,a=this.bottomLeft,i=this.topRight,s=this.bottomRight;if(t>0){var l=r?this.topLeft:this.topRight,c=Math.trunc(l.getY()-t);c<0&&(c=0);var d=new Jd(l.getX(),c);r?o=d:i=d}if(n>0){var u=r?this.bottomLeft:this.bottomRight,h=Math.trunc(u.getY()+n);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var p=new Jd(u.getX(),h);r?a=p:s=p}return new e(this.image,o,a,i,s)},e.prototype.getMinX=function(){return this.minX},e.prototype.getMaxX=function(){return this.maxX},e.prototype.getMinY=function(){return this.minY},e.prototype.getMaxY=function(){return this.maxY},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getBottomRight=function(){return this.bottomRight},e}();const Ff=function(){function e(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return e.prototype.getColumnCount=function(){return this.columnCount},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getRowCount=function(){return this.rowCount},e.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},e.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},e}();const Lf=function(){function e(){this.buffer=""}return e.form=function(e,t){var n=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,r,o,a,i,s){if("%%"===e)return"%";if(void 0!==t[++n]){e=a?parseInt(a.substr(1)):void 0;var l,c=i?parseInt(i.substr(1)):void 0;switch(s){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);for(var d=parseInt(o),u=o&&o[0]+""==="0"?"0":" ";l.length<d;)l=void 0!==r?l+u:u+l;return l}})},e.prototype.format=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=e.form(t,n)},e.prototype.toString=function(){return this.buffer},e}();var zf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Wf=function(){function e(e){this.boundingBox=new Of(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return e.prototype.getCodewordNearby=function(t){var n=this.getCodeword(t);if(null!=n)return n;for(var r=1;r<e.MAX_NEARBY_DISTANCE;r++){var o=this.imageRowToCodewordIndex(t)-r;if(o>=0&&null!=(n=this.codewords[o]))return n;if((o=this.imageRowToCodewordIndex(t)+r)<this.codewords.length&&null!=(n=this.codewords[o]))return n}return null},e.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},e.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},e.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.getCodewords=function(){return this.codewords},e.prototype.toString=function(){var e,t,n=new Lf,r=0;try{for(var o=zf(this.codewords),a=o.next();!a.done;a=o.next()){var i=a.value;null!=i?n.format("%3d: %3d|%3d%n",r++,i.getRowNumber(),i.getValue()):n.format("%3d:    |   %n",r++)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n.toString()},e.MAX_NEARBY_DISTANCE=5,e}();const Vf=Wf;var Uf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hf=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Gf=function(){function e(){this.values=new Map}return e.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)},e.prototype.getValue=function(){var e,t,n=-1,r=new Array,o=function(e,t){var o=function(){return e},a=function(){return t};a()>n?(n=a(),(r=[]).push(o())):a()===n&&r.push(o())};try{for(var a=Uf(this.values.entries()),i=a.next();!i.done;i=a.next()){var s=Hf(i.value,2);o(s[0],s[1])}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return Cf.toIntArray(r)},e.prototype.getConfidence=function(e){return this.values.get(e)},e}();const Xf=Gf;var Kf=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qf=function(e){function t(t,n){var r=e.call(this,t)||this;return r._isLeft=n,r}return Kf(t,e),t.prototype.setRowNumbers=function(){var e,t;try{for(var n=Yf(this.getCodewords()),r=n.next();!r.done;r=n.next()){var o=r.value;null!=o&&o.setRowNumberAsRowIndicatorColumn()}}catch(a){e={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);for(var n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.imageRowToCodewordIndex(Math.trunc(o.getY())),s=-1,l=1,c=0,d=a;d<i;d++)if(null!=t[d]){var u=t[d],h=u.getRowNumber()-s;if(0===h)c++;else if(1===h)l=Math.max(l,c),c=1,s=u.getRowNumber();else if(h<0||u.getRowNumber()>=e.getRowCount()||h>d)t[d]=null;else{for(var p=void 0,f=(p=l>2?(l-2)*h:h)>=d,m=1;m<=p&&!f;m++)f=null!=t[d-m];f?t[d]=null:(s=u.getRowNumber(),c=1)}}},t.prototype.getRowHeights=function(){var e,t,n=this.getBarcodeMetadata();if(null==n)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);var r=new Int32Array(n.getRowCount());try{for(var o=Yf(this.getCodewords()),a=o.next();!a.done;a=o.next()){var i=a.value;if(null!=i){var s=i.getRowNumber();if(s>=r.length)continue;r[s]++}}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.getCodewords(),s=-1,l=1,c=0,d=o;d<a;d++)if(null!=i[d]){var u=i[d];u.setRowNumberAsRowIndicatorColumn();var h=u.getRowNumber()-s;0===h?c++:1===h?(l=Math.max(l,c),c=1,s=u.getRowNumber()):u.getRowNumber()>=e.getRowCount()?i[d]=null:(s=u.getRowNumber(),c=1)}},t.prototype.getBarcodeMetadata=function(){var e,t,n=this.getCodewords(),r=new Xf,o=new Xf,a=new Xf,i=new Xf;try{for(var s=Yf(n),l=s.next();!l.done;l=s.next()){var c=l.value;if(null!=c){c.setRowNumberAsRowIndicatorColumn();var d=c.getValue()%30,u=c.getRowNumber();switch(this._isLeft||(u+=2),u%3){case 0:o.setValue(3*d+1);break;case 1:i.setValue(d/3),a.setValue(d%3);break;case 2:r.setValue(d+1)}}}}catch(p){e={error:p}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}if(0===r.getValue().length||0===o.getValue().length||0===a.getValue().length||0===i.getValue().length||r.getValue()[0]<1||o.getValue()[0]+a.getValue()[0]<Cf.MIN_ROWS_IN_BARCODE||o.getValue()[0]+a.getValue()[0]>Cf.MAX_ROWS_IN_BARCODE)return null;var h=new Ff(r.getValue()[0],o.getValue()[0],a.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(n,h),h},t.prototype.removeIncorrectCodewords=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(null!=e[n]){var o=r.getValue()%30,a=r.getRowNumber();if(a>t.getRowCount())e[n]=null;else switch(this._isLeft||(a+=2),a%3){case 0:3*o+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(o/3)===t.getErrorCorrectionLevel()&&o%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:o+1!==t.getColumnCount()&&(e[n]=null)}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+e.prototype.toString.call(this)},t}(Vf);const Zf=qf;var Jf=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qf=function(){function e(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return e.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e,t=Cf.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns},e.prototype.adjustIndicatorColumnRowNumbers=function(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},e.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),r=0;r<n.length;r++)null!=n[r]&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n));return e},e.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},e.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(var r=1;r<=this.barcodeColumnCount;r++){var o=this.detectionResultColumns[r].getCodewords()[n];null!=o&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}},e.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var t=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var o=n[r].getRowNumber(),a=0,i=this.barcodeColumnCount+1;i>0&&a<this.ADJUST_ROW_NUMBER_SKIP;i--){var s=this.detectionResultColumns[i].getCodewords()[r];null!=s&&(a=e.adjustRowNumberIfValid(o,a,s),s.hasValidRowNumber()||t++)}return t},e.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var t=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var o=n[r].getRowNumber(),a=0,i=1;i<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;i++){var s=this.detectionResultColumns[i].getCodewords()[r];null!=s&&(a=e.adjustRowNumberIfValid(o,a,s),s.hasValidRowNumber()||t++)}return t},e.adjustRowNumberIfValid=function(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},e.prototype.adjustRowNumbers=function(t,n,r){var o,a;if(null!=this.detectionResultColumns[t-1]){var i=r[n],s=this.detectionResultColumns[t-1].getCodewords(),l=s;null!=this.detectionResultColumns[t+1]&&(l=this.detectionResultColumns[t+1].getCodewords());var c=new Array(14);c[2]=s[n],c[3]=l[n],n>0&&(c[0]=r[n-1],c[4]=s[n-1],c[5]=l[n-1]),n>1&&(c[8]=r[n-2],c[10]=s[n-2],c[11]=l[n-2]),n<r.length-1&&(c[1]=r[n+1],c[6]=s[n+1],c[7]=l[n+1]),n<r.length-2&&(c[9]=r[n+2],c[12]=s[n+2],c[13]=l[n+2]);try{for(var d=Jf(c),u=d.next();!u.done;u=d.next()){var h=u.value;if(e.adjustRowNumber(i,h))return}}catch(p){o={error:p}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}}},e.adjustRowNumber=function(e,t){return null!=t&&(!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0))},e.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},e.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},e.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},e.prototype.setBoundingBox=function(e){this.boundingBox=e},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},e.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},e.prototype.toString=function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Lf,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var r=0;r<this.barcodeColumnCount+2;r++)if(null!=this.detectionResultColumns[r]){var o=this.detectionResultColumns[r].getCodewords()[n];null!=o?t.format(" %3d|%3d",o.getRowNumber(),o.getValue()):t.format("    |   ")}else t.format("    |   ");t.format("%n")}return t.toString()},e}();const $f=Qf;const em=function(){function e(t,n,r,o){this.rowNumber=e.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(o)}return e.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},e.prototype.isValidRowNumber=function(t){return t!==e.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},e.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},e.prototype.getWidth=function(){return this.endX-this.startX},e.prototype.getStartX=function(){return this.startX},e.prototype.getEndX=function(){return this.endX},e.prototype.getBucket=function(){return this.bucket},e.prototype.getValue=function(){return this.value},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.setRowNumber=function(e){this.rowNumber=e},e.prototype.toString=function(){return this.rowNumber+"|"+this.value},e.BARCODE_ROW_UNKNOWN=-1,e}();const tm=function(){function e(){}return e.initialize=function(){for(var t=0;t<Cf.SYMBOL_TABLE.length;t++)for(var n=Cf.SYMBOL_TABLE[t],r=1&n,o=0;o<Cf.BARS_IN_MODULE;o++){for(var a=0;(1&n)===r;)a+=1,n>>=1;r=1&n,e.RATIOS_TABLE[t]||(e.RATIOS_TABLE[t]=new Array(Cf.BARS_IN_MODULE)),e.RATIOS_TABLE[t][Cf.BARS_IN_MODULE-o-1]=Math.fround(a/Cf.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},e.getDecodedValue=function(t){var n=e.getDecodedCodewordValue(e.sampleBitCounts(t));return-1!==n?n:e.getClosestDecodedValue(t)},e.sampleBitCounts=function(e){for(var t=qd.sum(e),n=new Int32Array(Cf.BARS_IN_MODULE),r=0,o=0,a=0;a<Cf.MODULES_IN_CODEWORD;a++){var i=t/(2*Cf.MODULES_IN_CODEWORD)+a*t/Cf.MODULES_IN_CODEWORD;o+e[r]<=i&&(o+=e[r],r++),n[r]++}return n},e.getDecodedCodewordValue=function(t){var n=e.getBitValue(t);return-1===Cf.getCodeword(n)?-1:n},e.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},e.getClosestDecodedValue=function(t){var n=qd.sum(t),r=new Array(Cf.BARS_IN_MODULE);if(n>1)for(var o=0;o<r.length;o++)r[o]=Math.fround(t[o]/n);var a=Zd.MAX_VALUE,i=-1;this.bSymbolTableReady||e.initialize();for(var s=0;s<e.RATIOS_TABLE.length;s++){for(var l=0,c=e.RATIOS_TABLE[s],d=0;d<Cf.BARS_IN_MODULE;d++){var u=Math.fround(c[d]-r[d]);if((l+=Math.fround(u*u))>=a)break}l<a&&(a=l,i=Cf.SYMBOL_TABLE[s])}return i},e.bSymbolTableReady=!1,e.RATIOS_TABLE=new Array(Cf.SYMBOL_TABLE.length).map(function(e){return new Array(Cf.BARS_IN_MODULE)}),e}();const nm=function(){function e(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return e.prototype.getSegmentIndex=function(){return this.segmentIndex},e.prototype.setSegmentIndex=function(e){this.segmentIndex=e},e.prototype.getFileId=function(){return this.fileId},e.prototype.setFileId=function(e){this.fileId=e},e.prototype.getOptionalData=function(){return this.optionalData},e.prototype.setOptionalData=function(e){this.optionalData=e},e.prototype.isLastSegment=function(){return this.lastSegment},e.prototype.setLastSegment=function(e){this.lastSegment=e},e.prototype.getSegmentCount=function(){return this.segmentCount},e.prototype.setSegmentCount=function(e){this.segmentCount=e},e.prototype.getSender=function(){return this.sender||null},e.prototype.setSender=function(e){this.sender=e},e.prototype.getAddressee=function(){return this.addressee||null},e.prototype.setAddressee=function(e){this.addressee=e},e.prototype.getFileName=function(){return this.fileName},e.prototype.setFileName=function(e){this.fileName=e},e.prototype.getFileSize=function(){return this.fileSize},e.prototype.setFileSize=function(e){this.fileSize=e},e.prototype.getChecksum=function(){return this.checksum},e.prototype.setChecksum=function(e){this.checksum=e},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.setTimestamp=function(e){this.timestamp=e},e}();const rm=function(){function e(){}return e.parseLong=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e}();var om=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const am=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return om(t,e),t.kind="NullPointerException",t}(Bc);const im=function(){function e(){}return e.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},e.prototype.writeBytesOffset=function(e,t,n){if(null==e)throw new am;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new Uc;if(0!==n)for(var r=0;r<n;r++)this.write(e[t+r])},e.prototype.flush=function(){},e.prototype.close=function(){},e}();var sm=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const lm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sm(t,e),t}(Bc);var cm=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const dm=function(e){function t(t){void 0===t&&(t=32);var n=e.call(this)||this;if(n.count=0,t<0)throw new Dc("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return cm(t,e),t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new lm;t=qc.MAX_VALUE}this.buf=Yc.copyOfUint8Array(this.buf,t)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new Uc;this.ensureCapacity(this.count+n),Wc.arraycopy(e,t,this.buf,this.count,n),this.count+=n},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return Yc.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(im);var um,hm;function pm(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function fm(e){if("undefined"===typeof hm&&(hm=pm()),null===hm)throw new Error("BigInt is not supported!");return hm(e)}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(um||(um={}));var mm=function(){function e(){}return e.decode=function(t,n){var r=new cd(""),o=od.ISO8859_1;r.enableDecoding(o);for(var a=1,i=t[a++],s=new nm;a<t[0];){switch(i){case e.TEXT_COMPACTION_MODE_LATCH:a=e.textCompaction(t,a,r);break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:a=e.byteCompaction(i,t,o,a,r);break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a++]);break;case e.NUMERIC_COMPACTION_MODE_LATCH:a=e.numericCompaction(t,a,r);break;case e.ECI_CHARSET:od.getCharacterSetECIByValue(t[a++]);break;case e.ECI_GENERAL_PURPOSE:a+=2;break;case e.ECI_USER_DEFINED:a++;break;case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=e.decodeMacroBlock(t,a,s);break;case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:throw new ed;default:a--,a=e.textCompaction(t,a,r)}if(!(a<t.length))throw ed.getFormatInstance();i=t[a++]}if(0===r.length())throw ed.getFormatInstance();var l=new Td(null,r.toString(),null,n);return l.setOther(s),l},e.decodeMacroBlock=function(t,n,r){if(n+e.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw ed.getFormatInstance();for(var o=new Int32Array(e.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<e.NUMBER_OF_SEQUENCE_CODEWORDS;a++,n++)o[a]=t[n];r.setSegmentIndex(qc.parseInt(e.decodeBase900toBase10(o,e.NUMBER_OF_SEQUENCE_CODEWORDS)));var i=new cd;n=e.textCompaction(t,n,i),r.setFileId(i.toString());var s=-1;for(t[n]===e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=n+1);n<t[0];)switch(t[n]){case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++n]){case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new cd;n=e.textCompaction(t,n+1,l),r.setFileName(l.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new cd;n=e.textCompaction(t,n+1,c),r.setSender(c.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new cd;n=e.textCompaction(t,n+1,d),r.setAddressee(d.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var u=new cd;n=e.numericCompaction(t,n+1,u),r.setSegmentCount(qc.parseInt(u.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new cd;n=e.numericCompaction(t,n+1,h),r.setTimestamp(rm.parseLong(h.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new cd;n=e.numericCompaction(t,n+1,p),r.setChecksum(qc.parseInt(p.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var f=new cd;n=e.numericCompaction(t,n+1,f),r.setFileSize(rm.parseLong(f.toString()));break;default:throw ed.getFormatInstance()}break;case e.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw ed.getFormatInstance()}if(-1!==s){var m=n-s;r.isLastSegment()&&m--,r.setOptionalData(Yc.copyOfRange(t,s,s+m))}return n},e.textCompaction=function(t,n,r){for(var o=new Int32Array(2*(t[0]-n)),a=new Int32Array(2*(t[0]-n)),i=0,s=!1;n<t[0]&&!s;){var l=t[n++];if(l<e.TEXT_COMPACTION_MODE_LATCH)o[i]=l/30,o[i+1]=l%30,i+=2;else switch(l){case e.TEXT_COMPACTION_MODE_LATCH:o[i++]=e.TEXT_COMPACTION_MODE_LATCH;break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,s=!0;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[i]=e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=t[n++],a[i]=l,i++}}return e.decodeTextCompaction(o,a,i,r),n},e.decodeTextCompaction=function(t,n,r,o){for(var a=um.ALPHA,i=um.ALPHA,s=0;s<r;){var l=t[s],c="";switch(a){case um.ALPHA:if(l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case e.LL:a=um.LOWER;break;case e.ML:a=um.MIXED;break;case e.PS:i=a,a=um.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:a=um.ALPHA}break;case um.LOWER:if(l<26)c=String.fromCharCode(97+l);else switch(l){case 26:c=" ";break;case e.AS:i=a,a=um.ALPHA_SHIFT;break;case e.ML:a=um.MIXED;break;case e.PS:i=a,a=um.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:a=um.ALPHA}break;case um.MIXED:if(l<e.PL)c=e.MIXED_CHARS[l];else switch(l){case e.PL:a=um.PUNCT;break;case 26:c=" ";break;case e.LL:a=um.LOWER;break;case e.AL:a=um.ALPHA;break;case e.PS:i=a,a=um.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:a=um.ALPHA}break;case um.PUNCT:if(l<e.PAL)c=e.PUNCT_CHARS[l];else switch(l){case e.PAL:a=um.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:a=um.ALPHA}break;case um.ALPHA_SHIFT:if(a=i,l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case e.TEXT_COMPACTION_MODE_LATCH:a=um.ALPHA}break;case um.PUNCT_SHIFT:if(a=i,l<e.PAL)c=e.PUNCT_CHARS[l];else switch(l){case e.PAL:a=um.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:a=um.ALPHA}}""!==c&&o.append(c),s++}},e.byteCompaction=function(t,n,r,o,a){var i=new dm,s=0,l=0,c=!1;switch(t){case e.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),u=n[o++];o<n[0]&&!c;)switch(d[s++]=u,l=900*l+u,u=n[o++]){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,c=!0;break;default:if(s%5===0&&s>0){for(var h=0;h<6;++h)i.write(Number(fm(l)>>fm(8*(5-h))));l=0,s=0}}o===n[0]&&u<e.TEXT_COMPACTION_MODE_LATCH&&(d[s++]=u);for(var p=0;p<s;p++)i.write(d[p]);break;case e.BYTE_COMPACTION_MODE_LATCH_6:for(;o<n[0]&&!c;){var f=n[o++];if(f<e.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+f;else switch(f){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,c=!0}if(s%5===0&&s>0){for(h=0;h<6;++h)i.write(Number(fm(l)>>fm(8*(5-h))));l=0,s=0}}}return a.append(sd.decode(i.toByteArray(),r)),o},e.numericCompaction=function(t,n,r){for(var o=0,a=!1,i=new Int32Array(e.MAX_NUMERIC_CODEWORDS);n<t[0]&&!a;){var s=t[n++];if(n===t[0]&&(a=!0),s<e.TEXT_COMPACTION_MODE_LATCH)i[o]=s,o++;else switch(s){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,a=!0}(o%e.MAX_NUMERIC_CODEWORDS===0||s===e.NUMERIC_COMPACTION_MODE_LATCH||a)&&o>0&&(r.append(e.decodeBase900toBase10(i,o)),o=0)}return n},e.decodeBase900toBase10=function(t,n){for(var r=fm(0),o=0;o<n;o++)r+=e.EXP900[n-o-1]*fm(t[o]);var a=r.toString();if("1"!==a.charAt(0))throw new ed;return a.substring(1)},e.TEXT_COMPACTION_MODE_LATCH=900,e.BYTE_COMPACTION_MODE_LATCH=901,e.NUMERIC_COMPACTION_MODE_LATCH=902,e.BYTE_COMPACTION_MODE_LATCH_6=924,e.ECI_USER_DEFINED=925,e.ECI_GENERAL_PURPOSE=926,e.ECI_CHARSET=927,e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,e.MACRO_PDF417_TERMINATOR=922,e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,e.MAX_NUMERIC_CODEWORDS=15,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,e.PL=25,e.LL=27,e.AS=27,e.ML=28,e.AL=28,e.PS=29,e.PAL=29,e.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",e.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",e.EXP900=pm()?function(){var e=[];e[0]=fm(1);var t=fm(900);e[1]=t;for(var n=2;n<16;n++)e[n]=e[n-1]*t;return e}():[],e.NUMBER_OF_SEQUENCE_CODEWORDS=2,e}();const gm=mm;var xm=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ym=function(){function e(){}return e.decode=function(t,n,r,o,a,i,s){for(var l,c=new Of(t,n,r,o,a),d=null,u=null,h=!0;;h=!1){if(null!=n&&(d=e.getRowIndicatorColumn(t,c,n,!0,i,s)),null!=o&&(u=e.getRowIndicatorColumn(t,c,o,!1,i,s)),null==(l=e.merge(d,u)))throw hd.getNotFoundInstance();var p=l.getBoundingBox();if(!h||null==p||!(p.getMinY()<c.getMinY()||p.getMaxY()>c.getMaxY()))break;c=p}l.setBoundingBox(c);var f=l.getBarcodeColumnCount()+1;l.setDetectionResultColumn(0,d),l.setDetectionResultColumn(f,u);for(var m=null!=d,g=1;g<=f;g++){var x=m?g:f-g;if(void 0===l.getDetectionResultColumn(x)){var y=void 0;y=0===x||x===f?new Zf(c,0===x):new Vf(c),l.setDetectionResultColumn(x,y);for(var v=-1,b=v,w=c.getMinY();w<=c.getMaxY();w++){if((v=e.getStartColumn(l,x,w,m))<0||v>c.getMaxX()){if(-1===b)continue;v=b}var k=e.detectCodeword(t,c.getMinX(),c.getMaxX(),m,v,w,i,s);null!=k&&(y.setCodeword(w,k),b=v,i=Math.min(i,k.getWidth()),s=Math.max(s,k.getWidth()))}}}return e.createDecoderResult(l)},e.merge=function(t,n){if(null==t&&null==n)return null;var r=e.getBarcodeMetadata(t,n);if(null==r)return null;var o=Of.merge(e.adjustBoundingBox(t),e.adjustBoundingBox(n));return new $f(r,o)},e.adjustBoundingBox=function(t){var n,r;if(null==t)return null;var o=t.getRowHeights();if(null==o)return null;var a=e.getMax(o),i=0;try{for(var s=xm(o),l=s.next();!l.done;l=s.next()){var c=l.value;if(i+=a-c,c>0)break}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}for(var d=t.getCodewords(),u=0;i>0&&null==d[u];u++)i--;var h=0;for(u=o.length-1;u>=0&&(h+=a-o[u],!(o[u]>0));u--);for(u=d.length-1;h>0&&null==d[u];u--)h--;return t.getBoundingBox().addMissingRows(i,h,t.isLeft())},e.getMax=function(e){var t,n,r=-1;try{for(var o=xm(e),a=o.next();!a.done;a=o.next()){var i=a.value;r=Math.max(r,i)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.getBarcodeMetadata=function(e,t){var n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n},e.getRowIndicatorColumn=function(t,n,r,o,a,i){for(var s=new Zf(n,o),l=0;l<2;l++)for(var c=0===l?1:-1,d=Math.trunc(Math.trunc(r.getX())),u=Math.trunc(Math.trunc(r.getY()));u<=n.getMaxY()&&u>=n.getMinY();u+=c){var h=e.detectCodeword(t,0,t.getWidth(),o,d,u,a,i);null!=h&&(s.setCodeword(u,h),d=o?h.getStartX():h.getEndX())}return s},e.adjustCodewordCount=function(t,n){var r=n[0][1],o=r.getValue(),a=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-e.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===o.length){if(a<1||a>Cf.MAX_CODEWORDS_IN_BARCODE)throw hd.getNotFoundInstance();r.setValue(a)}else o[0]!==a&&r.setValue(a)},e.createDecoderResult=function(t){var n=e.createBarcodeMatrix(t);e.adjustCodewordCount(t,n);for(var r=new Array,o=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),a=[],i=new Array,s=0;s<t.getBarcodeRowCount();s++)for(var l=0;l<t.getBarcodeColumnCount();l++){var c=n[s][l+1].getValue(),d=s*t.getBarcodeColumnCount()+l;0===c.length?r.push(d):1===c.length?o[d]=c[0]:(i.push(d),a.push(c))}for(var u=new Array(a.length),h=0;h<u.length;h++)u[h]=a[h];return e.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),o,Cf.toIntArray(r),Cf.toIntArray(i),u)},e.createDecoderResultFromAmbiguousValues=function(t,n,r,o,a){for(var i=new Int32Array(o.length),s=100;s-- >0;){for(var l=0;l<i.length;l++)n[o[l]]=a[l][i[l]];try{return e.decodeCodewords(n,t,r)}catch(c){if(!(c instanceof Fc))throw c}if(0===i.length)throw Fc.getChecksumInstance();for(l=0;l<i.length;l++){if(i[l]<a[l].length-1){i[l]++;break}if(i[l]=0,l===i.length-1)throw Fc.getChecksumInstance()}}throw Fc.getChecksumInstance()},e.createBarcodeMatrix=function(e){for(var t,n,r,o,a=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),i=0;i<a.length;i++)for(var s=0;s<a[i].length;s++)a[i][s]=new Xf;var l=0;try{for(var c=xm(e.getDetectionResultColumns()),d=c.next();!d.done;d=c.next()){var u=d.value;if(null!=u)try{for(var h=(r=void 0,xm(u.getCodewords())),p=h.next();!p.done;p=h.next()){var f=p.value;if(null!=f){var m=f.getRowNumber();if(m>=0){if(m>=a.length)continue;a[m][l].setValue(f.getValue())}}}}catch(g){r={error:g}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}l++}}catch(x){t={error:x}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return a},e.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},e.getStartColumn=function(t,n,r,o){var a,i,s=o?1:-1,l=null;if(e.isValidBarcodeColumn(t,n-s)&&(l=t.getDetectionResultColumn(n-s).getCodeword(r)),null!=l)return o?l.getEndX():l.getStartX();if(null!=(l=t.getDetectionResultColumn(n).getCodewordNearby(r)))return o?l.getStartX():l.getEndX();if(e.isValidBarcodeColumn(t,n-s)&&(l=t.getDetectionResultColumn(n-s).getCodewordNearby(r)),null!=l)return o?l.getEndX():l.getStartX();for(var c=0;e.isValidBarcodeColumn(t,n-s);){n-=s;try{for(var d=(a=void 0,xm(t.getDetectionResultColumn(n).getCodewords())),u=d.next();!u.done;u=d.next()){var h=u.value;if(null!=h)return(o?h.getEndX():h.getStartX())+s*c*(h.getEndX()-h.getStartX())}}catch(p){a={error:p}}finally{try{u&&!u.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}c++}return o?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},e.detectCodeword=function(t,n,r,o,a,i,s,l){a=e.adjustCodewordStartColumn(t,n,r,o,a,i);var c,d=e.getModuleBitCount(t,n,r,o,a,i);if(null==d)return null;var u=qd.sum(d);if(o)c=a+u;else{for(var h=0;h<d.length/2;h++){var p=d[h];d[h]=d[d.length-1-h],d[d.length-1-h]=p}a=(c=a)-u}if(!e.checkCodewordSkew(u,s,l))return null;var f=tm.getDecodedValue(d),m=Cf.getCodeword(f);return-1===m?null:new em(a,c,e.getCodewordBucketNumber(f),m)},e.getModuleBitCount=function(e,t,n,r,o,a){for(var i=o,s=new Int32Array(8),l=0,c=r?1:-1,d=r;(r?i<n:i>=t)&&l<s.length;)e.get(i,a)===d?(s[l]++,i+=c):(l++,d=!d);return l===s.length||i===(r?n:t)&&l===s.length-1?s:null},e.getNumberOfECCodeWords=function(e){return 2<<e},e.adjustCodewordStartColumn=function(t,n,r,o,a,i){for(var s=a,l=o?-1:1,c=0;c<2;c++){for(;(o?s>=n:s<r)&&o===t.get(s,i);){if(Math.abs(a-s)>e.CODEWORD_SKEW_SIZE)return a;s+=l}l=-l,o=!o}return s},e.checkCodewordSkew=function(t,n,r){return n-e.CODEWORD_SKEW_SIZE<=t&&t<=r+e.CODEWORD_SKEW_SIZE},e.decodeCodewords=function(t,n,r){if(0===t.length)throw ed.getFormatInstance();var o=1<<n+1,a=e.correctErrors(t,r,o);e.verifyCodewordCount(t,o);var i=gm.decode(t,""+n);return i.setErrorsCorrected(a),i.setErasures(r.length),i},e.correctErrors=function(t,n,r){if(null!=n&&n.length>r/2+e.MAX_ERRORS||r<0||r>e.MAX_EC_CODEWORDS)throw Fc.getChecksumInstance();return e.errorCorrection.decode(t,r,n)},e.verifyCodewordCount=function(e,t){if(e.length<4)throw ed.getFormatInstance();var n=e[0];if(n>e.length)throw ed.getFormatInstance();if(0===n){if(!(t<e.length))throw ed.getFormatInstance();e[0]=e.length-t}},e.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,r=t.length-1;!((1&e)!==n&&(n=1&e,--r<0));)t[r]++,e>>=1;return t},e.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},e.getCodewordBucketNumber_number=function(t){return e.getCodewordBucketNumber(e.getBitCountForCodeword(t))},e.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},e.toString=function(e){for(var t=new Lf,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var r=0;r<e[n].length;r++){var o=e[n][r];0===o.getValue().length?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},e.CODEWORD_SKEW_SIZE=2,e.MAX_ERRORS=3,e.MAX_EC_CODEWORDS=512,e.errorCorrection=new Rf,e}();const vm=ym;var bm=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wm=function(){function e(){}return e.prototype.decode=function(t,n){void 0===n&&(n=null);var r=e.decode(t,n,!1);if(null==r||0===r.length||null==r[0])throw hd.getNotFoundInstance();return r[0]},e.prototype.decodeMultiple=function(t,n){void 0===n&&(n=null);try{return e.decode(t,n,!0)}catch(r){if(r instanceof ed||r instanceof Fc)throw hd.getNotFoundInstance();throw r}},e.decode=function(t,n,r){var o,a,i=new Array,s=Sf.detectMultiple(t,n,r);try{for(var l=bm(s.getPoints()),c=l.next();!c.done;c=l.next()){var d=c.value,u=vm.decode(s.getBits(),d[4],d[5],d[6],d[7],e.getMinCodewordWidth(d),e.getMaxCodewordWidth(d)),h=new Ed(u.getText(),u.getRawBytes(),void 0,d,Pd.PDF_417);h.putMetadata(Id.ERROR_CORRECTION_LEVEL,u.getECLevel());var p=u.getOther();null!=p&&h.putMetadata(Id.PDF417_EXTRA_METADATA,p),i.push(h)}}catch(f){o={error:f}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return i.map(function(e){return e})},e.getMaxWidth=function(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMinWidth=function(e,t){return null==e||null==t?qc.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(e.getMaxWidth(t[0],t[4]),e.getMaxWidth(t[6],t[2])*Cf.MODULES_IN_CODEWORD/Cf.MODULES_IN_STOP_PATTERN),Math.max(e.getMaxWidth(t[1],t[5]),e.getMaxWidth(t[7],t[3])*Cf.MODULES_IN_CODEWORD/Cf.MODULES_IN_STOP_PATTERN)))},e.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(e.getMinWidth(t[0],t[4]),e.getMinWidth(t[6],t[2])*Cf.MODULES_IN_CODEWORD/Cf.MODULES_IN_STOP_PATTERN),Math.min(e.getMinWidth(t[1],t[5]),e.getMinWidth(t[7],t[3])*Cf.MODULES_IN_CODEWORD/Cf.MODULES_IN_STOP_PATTERN)))},e.prototype.reset=function(){},e}();const km=wm;var Cm=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const jm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cm(t,e),t.kind="ReaderException",t}(Bc);var _m=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nm=function(){function e(){}return e.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},e.prototype.decodeWithState=function(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)},e.prototype.setHints=function(e){this.hints=e;var t=null!==e&&void 0!==e&&void 0!==e.get(Qc.TRY_HARDER),n=null===e||void 0===e?null:e.get(Qc.POSSIBLE_FORMATS),r=new Array;if(null!==n&&void 0!==n){var o=n.some(function(e){return e===Pd.UPC_A||e===Pd.UPC_E||e===Pd.EAN_13||e===Pd.EAN_8||e===Pd.CODABAR||e===Pd.CODE_39||e===Pd.CODE_93||e===Pd.CODE_128||e===Pd.ITF||e===Pd.RSS_14||e===Pd.RSS_EXPANDED});o&&!t&&r.push(new cp(e)),n.includes(Pd.QR_CODE)&&r.push(new bf),n.includes(Pd.DATA_MATRIX)&&r.push(new Ep),n.includes(Pd.AZTEC)&&r.push(new du),n.includes(Pd.PDF_417)&&r.push(new km),o&&t&&r.push(new cp(e))}0===r.length&&(t||r.push(new cp(e)),r.push(new bf),r.push(new Ep),r.push(new du),r.push(new km),t&&r.push(new cp(e))),this.readers=r},e.prototype.reset=function(){var e,t;if(null!==this.readers)try{for(var n=_m(this.readers),r=n.next();!r.done;r=n.next()){r.value.reset()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.decodeInternal=function(e){var t,n;if(null===this.readers)throw new jm("No readers where selected, nothing can be read.");try{for(var r=_m(this.readers),o=r.next();!o.done;o=r.next()){var a=o.value;try{return a.decode(e,this.hints)}catch(i){if(i instanceof jm)continue}}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new hd("No MultiFormat Readers were able to detect the code.")},e}();const Sm=Nm;var Em,Am=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pm=(function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=500);var r=new Sm;return r.setHints(t),e.call(this,r,n)||this}Am(t,e),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)}}(Nd),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Bm=(function(e){function t(t){return void 0===t&&(t=500),e.call(this,new km,t)||this}Pm(t,e)}(Nd),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}());!function(e){function t(t){return void 0===t&&(t=500),e.call(this,new bf,t)||this}Bm(t,e)}(Nd);!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",e[e.MIN_SIZE=4]="MIN_SIZE",e[e.MAX_SIZE=5]="MAX_SIZE",e[e.MARGIN=6]="MARGIN",e[e.PDF417_COMPACT=7]="PDF417_COMPACT",e[e.PDF417_COMPACTION=8]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=10]="AZTEC_LAYERS",e[e.QR_VERSION=11]="QR_VERSION",e[e.GS1_FORMAT=12]="GS1_FORMAT",e[e.FORCE_C40=13]="FORCE_C40"}(Em||(Em={}));const Im=Em;const Tm=function(){function e(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Rd(e,Int32Array.from([1])))}return e.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],r=this.field,o=t.length;o<=e;o++){var a=n.multiply(new Rd(r,Int32Array.from([1,r.exp(o-1+r.getGeneratorBase())])));t.push(a),n=a}return t[e]},e.prototype.encode=function(e,t){if(0===t)throw new Dc("No error correction bytes");var n=e.length-t;if(n<=0)throw new Dc("No data bytes provided");var r=this.buildGenerator(t),o=new Int32Array(n);Wc.arraycopy(e,0,o,0,n);for(var a=new Rd(this.field,o),i=(a=a.multiplyByMonomial(t,1)).divide(r)[1].getCoefficients(),s=t-i.length,l=0;l<s;l++)e[n+l]=0;Wc.arraycopy(i,0,e,n+s,i.length)},e}();const Mm=function(){function e(){}return e.applyMaskPenaltyRule1=function(t){return e.applyMaskPenaltyRule1Internal(t,!0)+e.applyMaskPenaltyRule1Internal(t,!1)},e.applyMaskPenaltyRule2=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),a=t.getHeight(),i=0;i<a-1;i++)for(var s=r[i],l=0;l<o-1;l++){var c=s[l];c===s[l+1]&&c===r[i+1][l]&&c===r[i+1][l+1]&&n++}return e.N2*n},e.applyMaskPenaltyRule3=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),a=t.getHeight(),i=0;i<a;i++)for(var s=0;s<o;s++){var l=r[i];s+6<o&&1===l[s]&&0===l[s+1]&&1===l[s+2]&&1===l[s+3]&&1===l[s+4]&&0===l[s+5]&&1===l[s+6]&&(e.isWhiteHorizontal(l,s-4,s)||e.isWhiteHorizontal(l,s+7,s+11))&&n++,i+6<a&&1===r[i][s]&&0===r[i+1][s]&&1===r[i+2][s]&&1===r[i+3][s]&&1===r[i+4][s]&&0===r[i+5][s]&&1===r[i+6][s]&&(e.isWhiteVertical(r,s,i-4,i)||e.isWhiteVertical(r,s,i+7,i+11))&&n++}return n*e.N3},e.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var r=t;r<n;r++)if(1===e[r])return!1;return!0},e.isWhiteVertical=function(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var o=n;o<r;o++)if(1===e[o][t])return!1;return!0},e.applyMaskPenaltyRule4=function(t){for(var n=0,r=t.getArray(),o=t.getWidth(),a=t.getHeight(),i=0;i<a;i++)for(var s=r[i],l=0;l<o;l++)1===s[l]&&n++;var c=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*n-c)/c)*e.N4},e.getDataMaskBit=function(e,t,n){var r,o;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:r=(1&(o=n*t))+o%3;break;case 6:r=(1&(o=n*t))+o%3&1;break;case 7:r=(o=n*t)%3+(n+t&1)&1;break;default:throw new Dc("Invalid mask pattern: "+e)}return 0===r},e.applyMaskPenaltyRule1Internal=function(t,n){for(var r=0,o=n?t.getHeight():t.getWidth(),a=n?t.getWidth():t.getHeight(),i=t.getArray(),s=0;s<o;s++){for(var l=0,c=-1,d=0;d<a;d++){var u=n?i[s][d]:i[d][s];u===c?l++:(l>=5&&(r+=e.N1+(l-5)),l=1,c=u)}l>=5&&(r+=e.N1+(l-5))}return r},e.N1=3,e.N2=3,e.N3=40,e.N4=10,e}();var Dm=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rm=function(){function e(e,t){this.width=e,this.height=t;for(var n=new Array(t),r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}return e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.get=function(e,t){return this.bytes[t][e]},e.prototype.getArray=function(){return this.bytes},e.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},e.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},e.prototype.clear=function(e){var t,n;try{for(var r=Dm(this.bytes),o=r.next();!o.done;o=r.next()){var a=o.value;Yc.fill(a,e)}}catch(i){t={error:i}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.width!==n.width)return!1;if(this.height!==n.height)return!1;for(var r=0,o=this.height;r<o;++r)for(var a=this.bytes[r],i=n.bytes[r],s=0,l=this.width;s<l;++s)if(a[s]!==i[s])return!1;return!0},e.prototype.toString=function(){for(var e=new cd,t=0,n=this.height;t<n;++t){for(var r=this.bytes[t],o=0,a=this.width;o<a;++o)switch(r[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()},e}();const Om=Rm;const Fm=function(){function e(){this.maskPattern=-1}return e.prototype.getMode=function(){return this.mode},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getVersion=function(){return this.version},e.prototype.getMaskPattern=function(){return this.maskPattern},e.prototype.getMatrix=function(){return this.matrix},e.prototype.toString=function(){var e=new cd;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},e.prototype.setMode=function(e){this.mode=e},e.prototype.setECLevel=function(e){this.ecLevel=e},e.prototype.setVersion=function(e){this.version=e},e.prototype.setMaskPattern=function(e){this.maskPattern=e},e.prototype.setMatrix=function(e){this.matrix=e},e.isValidMaskPattern=function(t){return t>=0&&t<e.NUM_MASK_PATTERNS},e.NUM_MASK_PATTERNS=8,e}();var Lm=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const zm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lm(t,e),t.kind="WriterException",t}(Bc);const Wm=function(){function e(){}return e.clearMatrix=function(e){e.clear(255)},e.buildMatrix=function(t,n,r,o,a){e.clearMatrix(a),e.embedBasicPatterns(r,a),e.embedTypeInfo(n,o,a),e.maybeEmbedVersionInfo(r,a),e.embedDataBits(t,o,a)},e.embedBasicPatterns=function(t,n){e.embedPositionDetectionPatternsAndSeparators(n),e.embedDarkDotAtLeftBottomCorner(n),e.maybeEmbedPositionAdjustmentPatterns(t,n),e.embedTimingPatterns(n)},e.embedTypeInfo=function(t,n,r){var o=new Zc;e.makeTypeInfoBits(t,n,o);for(var a=0,i=o.getSize();a<i;++a){var s=o.get(o.getSize()-1-a),l=e.TYPE_INFO_COORDINATES[a],c=l[0],d=l[1];if(r.setBoolean(c,d,s),a<8){var u=r.getWidth()-a-1,h=8;r.setBoolean(u,h,s)}else{u=8,h=r.getHeight()-7+(a-8);r.setBoolean(u,h,s)}}},e.maybeEmbedVersionInfo=function(t,n){if(!(t.getVersionNumber()<7)){var r=new Zc;e.makeVersionInfoBits(t,r);for(var o=17,a=0;a<6;++a)for(var i=0;i<3;++i){var s=r.get(o);o--,n.setBoolean(a,n.getHeight()-11+i,s),n.setBoolean(n.getHeight()-11+i,a,s)}}},e.embedDataBits=function(t,n,r){for(var o=0,a=-1,i=r.getWidth()-1,s=r.getHeight()-1;i>0;){for(6===i&&(i-=1);s>=0&&s<r.getHeight();){for(var l=0;l<2;++l){var c=i-l;if(e.isEmpty(r.get(c,s))){var d=void 0;o<t.getSize()?(d=t.get(o),++o):d=!1,255!==n&&Mm.getDataMaskBit(n,c,s)&&(d=!d),r.setBoolean(c,s,d)}}s+=a}s+=a=-a,i-=2}if(o!==t.getSize())throw new zm("Not all bits consumed: "+o+"/"+t.getSize())},e.findMSBSet=function(e){return 32-qc.numberOfLeadingZeros(e)},e.calculateBCHCode=function(t,n){if(0===n)throw new Dc("0 polynomial");var r=e.findMSBSet(n);for(t<<=r-1;e.findMSBSet(t)>=r;)t^=n<<e.findMSBSet(t)-r;return t},e.makeTypeInfoBits=function(t,n,r){if(!Fm.isValidMaskPattern(n))throw new zm("Invalid mask pattern");var o=t.getBits()<<3|n;r.appendBits(o,5);var a=e.calculateBCHCode(o,e.TYPE_INFO_POLY);r.appendBits(a,10);var i=new Zc;if(i.appendBits(e.TYPE_INFO_MASK_PATTERN,15),r.xor(i),15!==r.getSize())throw new zm("should not happen but we got: "+r.getSize())},e.makeVersionInfoBits=function(t,n){n.appendBits(t.getVersionNumber(),6);var r=e.calculateBCHCode(t.getVersionNumber(),e.VERSION_INFO_POLY);if(n.appendBits(r,12),18!==n.getSize())throw new zm("should not happen but we got: "+n.getSize())},e.isEmpty=function(e){return 255===e},e.embedTimingPatterns=function(t){for(var n=8;n<t.getWidth()-8;++n){var r=(n+1)%2;e.isEmpty(t.get(n,6))&&t.setNumber(n,6,r),e.isEmpty(t.get(6,n))&&t.setNumber(6,n,r)}},e.embedDarkDotAtLeftBottomCorner=function(e){if(0===e.get(8,e.getHeight()-8))throw new zm;e.setNumber(8,e.getHeight()-8,1)},e.embedHorizontalSeparationPattern=function(t,n,r){for(var o=0;o<8;++o){if(!e.isEmpty(r.get(t+o,n)))throw new zm;r.setNumber(t+o,n,0)}},e.embedVerticalSeparationPattern=function(t,n,r){for(var o=0;o<7;++o){if(!e.isEmpty(r.get(t,n+o)))throw new zm;r.setNumber(t,n+o,0)}},e.embedPositionAdjustmentPattern=function(t,n,r){for(var o=0;o<5;++o)for(var a=e.POSITION_ADJUSTMENT_PATTERN[o],i=0;i<5;++i)r.setNumber(t+i,n+o,a[i])},e.embedPositionDetectionPattern=function(t,n,r){for(var o=0;o<7;++o)for(var a=e.POSITION_DETECTION_PATTERN[o],i=0;i<7;++i)r.setNumber(t+i,n+o,a[i])},e.embedPositionDetectionPatternsAndSeparators=function(t){var n=e.POSITION_DETECTION_PATTERN[0].length;e.embedPositionDetectionPattern(0,0,t),e.embedPositionDetectionPattern(t.getWidth()-n,0,t),e.embedPositionDetectionPattern(0,t.getWidth()-n,t);e.embedHorizontalSeparationPattern(0,7,t),e.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),e.embedHorizontalSeparationPattern(0,t.getWidth()-8,t);e.embedVerticalSeparationPattern(7,0,t),e.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),e.embedVerticalSeparationPattern(7,t.getHeight()-7,t)},e.maybeEmbedPositionAdjustmentPatterns=function(t,n){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,o=e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,i=o.length;a!==i;a++){var s=o[a];if(s>=0)for(var l=0;l!==i;l++){var c=o[l];c>=0&&e.isEmpty(n.get(c,s))&&e.embedPositionAdjustmentPattern(c-2,s-2,n)}}},e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),e.VERSION_INFO_POLY=7973,e.TYPE_INFO_POLY=1335,e.TYPE_INFO_MASK_PATTERN=21522,e}();const Vm=function(){function e(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return e.prototype.getDataBytes=function(){return this.dataBytes},e.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},e}();var Um=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hm=function(){function e(){}return e.calculateMaskPenalty=function(e){return Mm.applyMaskPenaltyRule1(e)+Mm.applyMaskPenaltyRule2(e)+Mm.applyMaskPenaltyRule3(e)+Mm.applyMaskPenaltyRule4(e)},e.encode=function(t,n,r){void 0===r&&(r=null);var o=e.DEFAULT_BYTE_MODE_ENCODING,a=null!==r&&void 0!==r.get(Im.CHARACTER_SET);a&&(o=r.get(Im.CHARACTER_SET).toString());var i=this.chooseMode(t,o),s=new Zc;if(i===Qp.BYTE&&(a||e.DEFAULT_BYTE_MODE_ENCODING!==o)){var l=od.getCharacterSetECIByName(o);void 0!==l&&this.appendECI(l,s)}this.appendModeInfo(i,s);var c,d=new Zc;if(this.appendBytes(t,i,d,o),null!==r&&void 0!==r.get(Im.QR_VERSION)){var u=Number.parseInt(r.get(Im.QR_VERSION).toString(),10);c=Vp.getVersionForNumber(u);var h=this.calculateBitsNeeded(i,s,d,c);if(!this.willFit(h,c,n))throw new zm("Data too big for requested version")}else c=this.recommendVersion(n,i,s,d);var p=new Zc;p.appendBitArray(s);var f=i===Qp.BYTE?d.getSizeInBytes():t.length;this.appendLengthInfo(f,c,i,p),p.appendBitArray(d);var m=c.getECBlocksForLevel(n),g=c.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(g,p);var x=this.interleaveWithECBytes(p,c.getTotalCodewords(),g,m.getNumBlocks()),y=new Fm;y.setECLevel(n),y.setMode(i),y.setVersion(c);var v=c.getDimensionForVersion(),b=new Om(v,v),w=this.chooseMaskPattern(x,n,c,b);return y.setMaskPattern(w),Wm.buildMatrix(x,n,c,w,b),y.setMatrix(b),y},e.recommendVersion=function(e,t,n,r){var o=this.calculateBitsNeeded(t,n,r,Vp.getVersionForNumber(1)),a=this.chooseVersion(o,e),i=this.calculateBitsNeeded(t,n,r,a);return this.chooseVersion(i,e)},e.calculateBitsNeeded=function(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()},e.getAlphanumericCode=function(t){return t<e.ALPHANUMERIC_TABLE.length?e.ALPHANUMERIC_TABLE[t]:-1},e.chooseMode=function(t,n){if(void 0===n&&(n=null),od.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(t))return Qp.KANJI;for(var r=!1,o=!1,a=0,i=t.length;a<i;++a){var s=t.charAt(a);if(e.isDigit(s))r=!0;else{if(-1===this.getAlphanumericCode(s.charCodeAt(0)))return Qp.BYTE;o=!0}}return o?Qp.ALPHANUMERIC:r?Qp.NUMERIC:Qp.BYTE},e.isOnlyDoubleByteKanji=function(e){var t;try{t=sd.encode(e,od.SJIS)}catch(a){return!1}var n=t.length;if(n%2!==0)return!1;for(var r=0;r<n;r+=2){var o=255&t[r];if((o<129||o>159)&&(o<224||o>235))return!1}return!0},e.chooseMaskPattern=function(e,t,n,r){for(var o=Number.MAX_SAFE_INTEGER,a=-1,i=0;i<Fm.NUM_MASK_PATTERNS;i++){Wm.buildMatrix(e,t,n,i,r);var s=this.calculateMaskPenalty(r);s<o&&(o=s,a=i)}return a},e.chooseVersion=function(t,n){for(var r=1;r<=40;r++){var o=Vp.getVersionForNumber(r);if(e.willFit(t,o,n))return o}throw new zm("Data too big")},e.willFit=function(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8},e.terminateBits=function(e,t){var n=8*e;if(t.getSize()>n)throw new zm("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var r=0;r<4&&t.getSize()<n;++r)t.appendBit(!1);var o=7&t.getSize();if(o>0)for(r=o;r<8;r++)t.appendBit(!1);var a=e-t.getSizeInBytes();for(r=0;r<a;++r)t.appendBits(0===(1&r)?236:17,8);if(t.getSize()!==n)throw new zm("Bits size does not equal capacity")},e.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,r,o,a){if(r>=n)throw new zm("Block ID too large");var i=e%n,s=n-i,l=Math.floor(e/n),c=l+1,d=Math.floor(t/n),u=d+1,h=l-d,p=c-u;if(h!==p)throw new zm("EC bytes mismatch");if(n!==s+i)throw new zm("RS blocks mismatch");if(e!==(d+h)*s+(u+p)*i)throw new zm("Total bytes mismatch");r<s?(o[0]=d,a[0]=h):(o[0]=u,a[0]=p)},e.interleaveWithECBytes=function(t,n,r,o){var a,i,s,l;if(t.getSizeInBytes()!==r)throw new zm("Number of bits and data bytes does not match");for(var c=0,d=0,u=0,h=new Array,p=0;p<o;++p){var f=new Int32Array(1),m=new Int32Array(1);e.getNumDataBytesAndNumECBytesForBlockID(n,r,o,p,f,m);var g=f[0],x=new Uint8Array(g);t.toBytes(8*c,x,0,g);var y=e.generateECBytes(x,m[0]);h.push(new Vm(x,y)),d=Math.max(d,g),u=Math.max(u,y.length),c+=f[0]}if(r!==c)throw new zm("Data bytes does not match offset");var v=new Zc;for(p=0;p<d;++p)try{for(var b=(a=void 0,Um(h)),w=b.next();!w.done;w=b.next()){p<(x=w.value.getDataBytes()).length&&v.appendBits(x[p],8)}}catch(j){a={error:j}}finally{try{w&&!w.done&&(i=b.return)&&i.call(b)}finally{if(a)throw a.error}}for(p=0;p<u;++p)try{for(var k=(s=void 0,Um(h)),C=k.next();!C.done;C=k.next()){p<(y=C.value.getErrorCorrectionBytes()).length&&v.appendBits(y[p],8)}}catch(_){s={error:_}}finally{try{C&&!C.done&&(l=k.return)&&l.call(k)}finally{if(s)throw s.error}}if(n!==v.getSizeInBytes())throw new zm("Interleaving error: "+n+" and "+v.getSizeInBytes()+" differ.");return v},e.generateECBytes=function(e,t){for(var n=e.length,r=new Int32Array(n+t),o=0;o<n;o++)r[o]=255&e[o];new Tm(zd.QR_CODE_FIELD_256).encode(r,t);var a=new Uint8Array(t);for(o=0;o<t;o++)a[o]=r[n+o];return a},e.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},e.appendLengthInfo=function(e,t,n,r){var o=n.getCharacterCountBits(t);if(e>=1<<o)throw new zm(e+" is bigger than "+((1<<o)-1));r.appendBits(e,o)},e.appendBytes=function(t,n,r,o){switch(n){case Qp.NUMERIC:e.appendNumericBytes(t,r);break;case Qp.ALPHANUMERIC:e.appendAlphanumericBytes(t,r);break;case Qp.BYTE:e.append8BitBytes(t,r,o);break;case Qp.KANJI:e.appendKanjiBytes(t,r);break;default:throw new zm("Invalid mode: "+n)}},e.getDigit=function(e){return e.charCodeAt(0)-48},e.isDigit=function(t){var n=e.getDigit(t);return n>=0&&n<=9},e.appendNumericBytes=function(t,n){for(var r=t.length,o=0;o<r;){var a=e.getDigit(t.charAt(o));if(o+2<r){var i=e.getDigit(t.charAt(o+1)),s=e.getDigit(t.charAt(o+2));n.appendBits(100*a+10*i+s,10),o+=3}else if(o+1<r){i=e.getDigit(t.charAt(o+1));n.appendBits(10*a+i,7),o+=2}else n.appendBits(a,4),o++}},e.appendAlphanumericBytes=function(t,n){for(var r=t.length,o=0;o<r;){var a=e.getAlphanumericCode(t.charCodeAt(o));if(-1===a)throw new zm;if(o+1<r){var i=e.getAlphanumericCode(t.charCodeAt(o+1));if(-1===i)throw new zm;n.appendBits(45*a+i,11),o+=2}else n.appendBits(a,6),o++}},e.append8BitBytes=function(e,t,n){var r;try{r=sd.encode(e,n)}catch(s){throw new zm(s)}for(var o=0,a=r.length;o!==a;o++){var i=r[o];t.appendBits(i,8)}},e.appendKanjiBytes=function(e,t){var n;try{n=sd.encode(e,od.SJIS)}catch(l){throw new zm(l)}for(var r=n.length,o=0;o<r;o+=2){var a=(255&n[o])<<8&4294967295|255&n[o+1],i=-1;if(a>=33088&&a<=40956?i=a-33088:a>=57408&&a<=60351&&(i=a-49472),-1===i)throw new zm("Invalid byte sequence");var s=192*(i>>8)+(255&i);t.appendBits(s,13)}},e.appendECI=function(e,t){t.appendBits(Qp.ECI.getBits(),4),t.appendBits(e.getValue(),8)},e.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),e.DEFAULT_BYTE_MODE_ENCODING=od.UTF8.getName(),e}();const Gm=Hm;!function(){function e(){}e.prototype.write=function(t,n,r,o){if(void 0===o&&(o=null),0===t.length)throw new Dc("Found empty contents");if(n<0||r<0)throw new Dc("Requested dimensions are too small: "+n+"x"+r);var a=Bp.L,i=e.QUIET_ZONE_SIZE;null!==o&&(void 0!==o.get(Im.ERROR_CORRECTION)&&(a=Bp.fromString(o.get(Im.ERROR_CORRECTION).toString())),void 0!==o.get(Im.MARGIN)&&(i=Number.parseInt(o.get(Im.MARGIN).toString(),10)));var s=Gm.encode(t,a,o);return this.renderResult(s,n,r,i)},e.prototype.writeToDom=function(e,t,n,r,o){void 0===o&&(o=null),"string"===typeof e&&(e=document.querySelector(e));var a=this.write(t,n,r,o);e&&e.appendChild(a)},e.prototype.renderResult=function(e,t,n,r){var o=e.getMatrix();if(null===o)throw new Hd;for(var a=o.getWidth(),i=o.getHeight(),s=a+2*r,l=i+2*r,c=Math.max(t,s),d=Math.max(n,l),u=Math.min(Math.floor(c/s),Math.floor(d/l)),h=Math.floor((c-a*u)/2),p=Math.floor((d-i*u)/2),f=this.createSVGElement(c,d),m=0,g=p;m<i;m++,g+=u)for(var x=0,y=h;x<a;x++,y+=u)if(1===o.get(x,m)){var v=this.createSvgRectElement(y,g,u,u);f.appendChild(v)}return f},e.prototype.createSVGElement=function(t,n){var r=document.createElementNS(e.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",n.toString()),r},e.prototype.createSvgRectElement=function(t,n,r,o){var a=document.createElementNS(e.SVG_NS,"rect");return a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",o.toString()),a.setAttributeNS(null,"fill","#000000"),a},e.QUIET_ZONE_SIZE=4,e.SVG_NS="http://www.w3.org/2000/svg"}();var Xm=function(){function e(){}return e.prototype.encode=function(t,n,r,o,a){if(0===t.length)throw new Dc("Found empty contents");if(n!==Pd.QR_CODE)throw new Dc("Can only encode QR_CODE, but got "+n);if(r<0||o<0)throw new Dc("Requested dimensions are too small: "+r+"x"+o);var i=Bp.L,s=e.QUIET_ZONE_SIZE;null!==a&&(void 0!==a.get(Im.ERROR_CORRECTION)&&(i=Bp.fromString(a.get(Im.ERROR_CORRECTION).toString())),void 0!==a.get(Im.MARGIN)&&(s=Number.parseInt(a.get(Im.MARGIN).toString(),10)));var l=Gm.encode(t,i,a);return e.renderResult(l,r,o,s)},e.renderResult=function(e,t,n,r){var o=e.getMatrix();if(null===o)throw new Hd;for(var a=o.getWidth(),i=o.getHeight(),s=a+2*r,l=i+2*r,c=Math.max(t,s),d=Math.max(n,l),u=Math.min(Math.floor(c/s),Math.floor(d/l)),h=Math.floor((c-a*u)/2),p=Math.floor((d-i*u)/2),f=new dd(c,d),m=0,g=p;m<i;m++,g+=u)for(var x=0,y=h;x<a;x++,y+=u)1===o.get(x,m)&&f.setRegion(y,g,u,u);return f},e.QUIET_ZONE_SIZE=4,e}();const Km=Xm;!function(){function e(){}e.prototype.encode=function(e,t,n,r,o){if(t!==Pd.QR_CODE)throw new Dc("No encoder available for format "+t);return(new Km).encode(e,t,n,r,o)}}();var Ym=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r,o,a,i,s,l){var c=e.call(this,i,s)||this;if(c.yuvData=t,c.dataWidth=n,c.dataHeight=r,c.left=o,c.top=a,o+i>n||a+s>r)throw new Dc("Crop rectangle does not fit within image data.");return l&&c.reverseHorizontal(i,s),c}Ym(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new Dc("Requested row is outside the image: "+e);var n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return Wc.arraycopy(this.yuvData,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;var n=e*t,r=new Uint8ClampedArray(n),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Wc.arraycopy(this.yuvData,o,r,0,n),r;for(var a=0;a<t;a++){var i=a*e;Wc.arraycopy(this.yuvData,o,r,i,e),o+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,o){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,r,o,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*n),o=this.yuvData,a=this.top*this.dataWidth+this.left,i=0;i<n;i++){for(var s=i*e,l=0;l<e;l++){var c=255&o[a+l*t.THUMBNAIL_SCALE_FACTOR];r[s+l]=4278190080|65793*c}a+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return r},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,t){for(var n=this.yuvData,r=0,o=this.top*this.dataWidth+this.left;r<t;r++,o+=this.dataWidth)for(var a=o+e/2,i=o,s=o+e-1;i<a;i++,s--){var l=n[i];n[i]=n[s],n[s]=l}},t.prototype.invert=function(){return new vd(this)},t.THUMBNAIL_SCALE_FACTOR=2}(xd);var qm=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r,o,a,i,s){var l=e.call(this,n,r)||this;if(l.dataWidth=o,l.dataHeight=a,l.left=i,l.top=s,4===t.BYTES_PER_ELEMENT){for(var c=n*r,d=new Uint8ClampedArray(c),u=0;u<c;u++){var h=t[u],p=h>>16&255,f=h>>7&510,m=255&h;d[u]=(p+f+m)/4&255}l.luminances=d}else l.luminances=t;if(void 0===o&&(l.dataWidth=n),void 0===a&&(l.dataHeight=r),void 0===i&&(l.left=0),void 0===s&&(l.top=0),l.left+n>l.dataWidth||l.top+r>l.dataHeight)throw new Dc("Crop rectangle does not fit within image data.");return l}qm(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new Dc("Requested row is outside the image: "+e);var n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return Wc.arraycopy(this.luminances,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;var n=e*t,r=new Uint8ClampedArray(n),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Wc.arraycopy(this.luminances,o,r,0,n),r;for(var a=0;a<t;a++){var i=a*e;Wc.arraycopy(this.luminances,o,r,i,e),o+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,o){return new t(this.luminances,r,o,this.dataWidth,this.dataHeight,this.left+e,this.top+n)},t.prototype.invert=function(){return new vd(this)}}(xd);var Zm=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Jm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zm(t,e),t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(od);const Qm=function(){function e(){}return e.ISO_8859_1=od.ISO8859_1,e}();const $m=function(){function e(e,t,n){this.codewords=e,this.numcols=t,this.numrows=n,this.bits=new Uint8Array(t*n),Yc.fill(this.bits,2)}return e.prototype.getNumrows=function(){return this.numrows},e.prototype.getNumcols=function(){return this.numcols},e.prototype.getBits=function(){return this.bits},e.prototype.getBit=function(e,t){return 1===this.bits[t*this.numcols+e]},e.prototype.setBit=function(e,t,n){this.bits[t*this.numcols+e]=n?1:0},e.prototype.noBit=function(e,t){return 2===this.bits[t*this.numcols+e]},e.prototype.place=function(){var e=0,t=4,n=0;do{t===this.numrows&&0===n&&this.corner1(e++),t===this.numrows-2&&0===n&&this.numcols%4!==0&&this.corner2(e++),t===this.numrows-2&&0===n&&this.numcols%8===4&&this.corner3(e++),t===this.numrows+4&&2===n&&this.numcols%8===0&&this.corner4(e++);do{t<this.numrows&&n>=0&&this.noBit(n,t)&&this.utah(t,n,e++),t-=2,n+=2}while(t>=0&&n<this.numcols);t++,n+=3;do{t>=0&&n<this.numcols&&this.noBit(n,t)&&this.utah(t,n,e++),t+=2,n-=2}while(t<this.numrows&&n>=0);t+=3,n++}while(t<this.numrows||n<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},e.prototype.module=function(e,t,n,r){e<0&&(e+=this.numrows,t+=4-(this.numrows+4)%8),t<0&&(t+=this.numcols,e+=4-(this.numcols+4)%8);var o=this.codewords.charCodeAt(n);o&=1<<8-r,this.setBit(t,e,0!==o)},e.prototype.utah=function(e,t,n){this.module(e-2,t-2,n,1),this.module(e-2,t-1,n,2),this.module(e-1,t-2,n,3),this.module(e-1,t-1,n,4),this.module(e-1,t,n,5),this.module(e,t-2,n,6),this.module(e,t-1,n,7),this.module(e,t,n,8)},e.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},e.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},e.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},e.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},e}();var eg,tg,ng=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],rg=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],og=(eg=function(e,t){for(var n=1,r=0;r<255;r++)t[r]=n,e[n]=r,(n*=2)>=256&&(n^=301);return{LOG:e,ALOG:t}}([],[]),eg.LOG),ag=eg.ALOG;!function(e){e[e.FORCE_NONE=0]="FORCE_NONE",e[e.FORCE_SQUARE=1]="FORCE_SQUARE",e[e.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"}(tg||(tg={}));var ig="[)>\x1e05\x1d",sg="[)>\x1e06\x1d",lg="\x1e\x04",cg=function(){function e(){}return e.encodeECC200=function(e,t){if(e.length!==t.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var n=new cd;n.append(e);var r=t.getInterleavedBlockCount();if(1===r){var o=this.createECCBlock(e,t.getErrorCodewords());n.append(o)}else{for(var a=[],i=[],s=0;s<r;s++)a[s]=t.getDataLengthForInterleavedBlock(s+1),i[s]=t.getErrorLengthForInterleavedBlock(s+1);for(var l=0;l<r;l++){for(var c=new cd,d=l;d<t.getDataCapacity();d+=r)c.append(e.charAt(d));o=this.createECCBlock(c.toString(),i[l]);for(var u=0,h=l;h<i[l]*r;h+=r)n.setCharAt(t.getDataCapacity()+h,o.charAt(u++))}}return n.toString()},e.createECCBlock=function(e,t){for(var n=-1,r=0;r<ng.length;r++)if(ng[r]===t){n=r;break}if(n<0)throw new Error("Illegal number of error correction codewords specified: "+t);var o=rg[n],a=[];for(r=0;r<t;r++)a[r]=0;for(r=0;r<e.length;r++){for(var i=a[t-1]^e.charAt(r).charCodeAt(0),s=t-1;s>0;s--)0!==i&&0!==o[s]?a[s]=a[s-1]^ag[(og[i]+og[o[s]])%255]:a[s]=a[s-1];0!==i&&0!==o[0]?a[0]=ag[(og[i]+og[o[0]])%255]:a[0]=0}var l=[];for(r=0;r<t;r++)l[r]=a[t-r-1];return l.map(function(e){return String.fromCharCode(e)}).join("")},e}();const dg=cg;var ug=function(){function e(){}return e.prototype.getEncodingMode=function(){return 0},e.prototype.encode=function(e){if(Sg.determineConsecutiveDigitCount(e.getMessage(),e.pos)>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var t=e.getCurrentChar(),n=Sg.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(n!==this.getEncodingMode())switch(n){case 5:return e.writeCodeword(231),void e.signalEncoderChange(5);case 1:return e.writeCodeword(230),void e.signalEncoderChange(1);case 3:e.writeCodeword(238),e.signalEncoderChange(3);break;case 2:e.writeCodeword(239),e.signalEncoderChange(2);break;case 4:e.writeCodeword(240),e.signalEncoderChange(4);break;default:throw new Error("Illegal mode: "+n)}else Sg.isExtendedASCII(t)?(e.writeCodeword(235),e.writeCodeword(t-128+1),e.pos++):(e.writeCodeword(t+1),e.pos++)}},e.prototype.encodeASCIIDigits=function(e,t){if(Sg.isDigit(e)&&Sg.isDigit(t))return 10*(e-48)+(t-48)+130;throw new Error("not digits: "+e+t)},e}(),hg=function(){function e(){}return e.prototype.getEncodingMode=function(){return 5},e.prototype.encode=function(e){var t=new cd;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();if(t.append(n),e.pos++,Sg.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}var r=t.length()-1,o=e.getCodewordCount()+r+1;e.updateSymbolInfo(o);var a=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||a)if(r<=249)t.setCharAt(0,ld.getCharAt(r));else{if(!(r<=1555))throw new Error("Message length not in valid ranges: "+r);t.setCharAt(0,ld.getCharAt(Math.floor(r/250)+249)),t.insert(1,ld.getCharAt(r%250))}var i=0;for(n=t.length();i<n;i++)e.writeCodeword(this.randomize255State(t.charAt(i).charCodeAt(0),e.getCodewordCount()+1))},e.prototype.randomize255State=function(e,t){var n=e+(149*t%255+1);return n<=255?n:n-256},e}(),pg=function(){function e(){}return e.prototype.getEncodingMode=function(){return 1},e.prototype.encodeMaximal=function(e){for(var t=new cd,n=0,r=e.pos,o=0;e.hasMoreCharacters();){var a=e.getCurrentChar();e.pos++,n=this.encodeChar(a,t),t.length()%3===0&&(r=e.pos,o=t.length())}if(o!==t.length()){var i=Math.floor(t.length()/3*2),s=Math.floor(e.getCodewordCount()+i+1);e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s,c=Math.floor(t.length()%3);(2===c&&2!==l||1===c&&(n>3||1!==l))&&(e.pos=r)}t.length()>0&&e.writeCodeword(230),this.handleEOD(e,t)},e.prototype.encode=function(e){for(var t=new cd;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var r=this.encodeChar(n,t),o=2*Math.floor(t.length()/3),a=e.getCodewordCount()+o;e.updateSymbolInfo(a);var i=e.getSymbolInfo().getDataCapacity()-a;if(!e.hasMoreCharacters()){var s=new cd;for(t.length()%3===2&&2!==i&&(r=this.backtrackOneCharacter(e,t,s,r));t.length()%3===1&&(r>3||1!==i);)r=this.backtrackOneCharacter(e,t,s,r);break}if(t.length()%3===0)if(Sg.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}this.handleEOD(e,t)},e.prototype.backtrackOneCharacter=function(e,t,n,r){var o=t.length(),a=t.toString().substring(0,o-r);t.setLengthToZero(),t.append(a),e.pos--;var i=e.getCurrentChar();return r=this.encodeChar(i,n),e.resetSymbolInfo(),r},e.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},e.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),r=t.length()%3,o=e.getCodewordCount()+n;e.updateSymbolInfo(o);var a=e.getSymbolInfo().getDataCapacity()-o;if(2===r){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(254)}else if(1===a&&1===r){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(254),e.pos--}else{if(0!==r)throw new Error("Unexpected case. Please report!");for(;t.length()>=3;)this.writeNextTriplet(e,t);(a>0||e.hasMoreCharacters())&&e.writeCodeword(254)}e.signalEncoderChange(0)},e.prototype.encodeChar=function(e,t){if(e===" ".charCodeAt(0))return t.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return t.append(e-48+4),1;if(e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0))return t.append(e-65+14),1;if(e<" ".charCodeAt(0))return t.append(0),t.append(e),2;if(e<="/".charCodeAt(0))return t.append(1),t.append(e-33),2;if(e<="@".charCodeAt(0))return t.append(1),t.append(e-58+15),2;if(e<="_".charCodeAt(0))return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1\x1e");var n=2;return n+=this.encodeChar(e-128,t)},e.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,r=t%256,o=new cd;return o.append(n),o.append(r),o.toString()},e}(),fg=function(){function e(){}return e.prototype.getEncodingMode=function(){return 4},e.prototype.encode=function(e){for(var t=new cd;e.hasMoreCharacters();){var n=e.getCurrentChar();if(this.encodeChar(n,t),e.pos++,t.length()>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(4);if(t.setLengthToZero(),t.append(r),Sg.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}}t.append(ld.getCharAt(31)),this.handleEOD(e,t)},e.prototype.handleEOD=function(e,t){try{var n=t.length();if(0===n)return;if(1===n){e.updateSymbolInfo();var r=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>r&&(e.updateSymbolInfo(e.getCodewordCount()+1),r=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=r&&r<=2)return}if(n>4)throw new Error("Count must not exceed 4");var a=n-1,i=this.encodeToCodewords(t.toString()),s=!e.hasMoreCharacters()&&a<=2;if(a<=2)e.updateSymbolInfo(e.getCodewordCount()+a),(r=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount())>=3&&(s=!1,e.updateSymbolInfo(e.getCodewordCount()+i.length));s?(e.resetSymbolInfo(),e.pos-=a):e.writeCodewords(i)}finally{e.signalEncoderChange(0)}},e.prototype.encodeChar=function(e,t){e>=" ".charCodeAt(0)&&e<="?".charCodeAt(0)?t.append(e):e>="@".charCodeAt(0)&&e<="^".charCodeAt(0)?t.append(ld.getCharAt(e-64)):Sg.illegalCharacter(ld.getCharAt(e))},e.prototype.encodeToCodewords=function(e){var t=e.length;if(0===t)throw new Error("StringBuilder must not be empty");var n=(e.charAt(0).charCodeAt(0)<<18)+((t>=2?e.charAt(1).charCodeAt(0):0)<<12)+((t>=3?e.charAt(2).charCodeAt(0):0)<<6)+(t>=4?e.charAt(3).charCodeAt(0):0),r=n>>16&255,o=n>>8&255,a=255&n,i=new cd;return i.append(r),t>=2&&i.append(o),t>=3&&i.append(a),i.toString()},e}(),mg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gg=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xg=function(){function e(e,t,n,r,o,a,i,s){void 0===i&&(i=0),void 0===s&&(s=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=r,this.matrixHeight=o,this.dataRegions=a,this.rsBlockData=i,this.rsBlockError=s}return e.lookup=function(e,t,n,r,o){var a,i;void 0===t&&(t=0),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=!0);try{for(var s=gg(bg),l=s.next();!l.done;l=s.next()){var c=l.value;if((1!==t||!c.rectangular)&&((2!==t||c.rectangular)&&(null==n||!(c.getSymbolWidth()<n.getWidth()||c.getSymbolHeight()<n.getHeight()))&&(null==r||!(c.getSymbolWidth()>r.getWidth()||c.getSymbolHeight()>r.getHeight()))&&e<=c.dataCapacity))return c}}catch(d){a={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},e.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},e.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},e.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},e.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},e.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},e.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},e.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},e.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},e.prototype.getDataCapacity=function(){return this.dataCapacity},e.prototype.getErrorCodewords=function(){return this.errorCodewords},e.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},e.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},e}();const yg=xg;var vg=function(e){function t(){return e.call(this,!1,1558,620,22,22,36,-1,62)||this}return mg(t,e),t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(xg),bg=[new xg(!1,3,5,8,8,1),new xg(!1,5,7,10,10,1),new xg(!0,5,7,16,6,1),new xg(!1,8,10,12,12,1),new xg(!0,10,11,14,6,2),new xg(!1,12,12,14,14,1),new xg(!0,16,14,24,10,1),new xg(!1,18,14,16,16,1),new xg(!1,22,18,18,18,1),new xg(!0,22,18,16,10,2),new xg(!1,30,20,20,20,1),new xg(!0,32,24,16,14,2),new xg(!1,36,24,22,22,1),new xg(!1,44,28,24,24,1),new xg(!0,49,28,22,14,2),new xg(!1,62,36,14,14,4),new xg(!1,86,42,16,16,4),new xg(!1,114,48,18,18,4),new xg(!1,144,56,20,20,4),new xg(!1,174,68,22,22,4),new xg(!1,204,84,24,24,4,102,42),new xg(!1,280,112,14,14,16,140,56),new xg(!1,368,144,16,16,16,92,36),new xg(!1,456,192,18,18,16,114,48),new xg(!1,576,224,20,20,16,144,56),new xg(!1,696,272,22,22,16,174,68),new xg(!1,816,336,24,24,16,136,56),new xg(!1,1050,408,18,18,36,175,68),new xg(!1,1304,496,20,20,36,163,62),new vg],wg=function(){function e(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(e){return e.charCodeAt(0)}),n=new cd,r=0,o=t.length;r<o;r++){var a=String.fromCharCode(255&t[r]);if("?"===a&&"?"!==e.charAt(r))throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(a)}this.msg=n.toString(),this.shape=0,this.codewords=new cd,this.newEncoding=-1}return e.prototype.setSymbolShape=function(e){this.shape=e},e.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},e.prototype.getMessage=function(){return this.msg},e.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},e.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},e.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},e.prototype.getCodewords=function(){return this.codewords},e.prototype.writeCodewords=function(e){this.codewords.append(e)},e.prototype.writeCodeword=function(e){this.codewords.append(e)},e.prototype.getCodewordCount=function(){return this.codewords.length()},e.prototype.getNewEncoding=function(){return this.newEncoding},e.prototype.signalEncoderChange=function(e){this.newEncoding=e},e.prototype.resetEncoderSignal=function(){this.newEncoding=-1},e.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},e.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},e.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},e.prototype.getSymbolInfo=function(){return this.symbolInfo},e.prototype.updateSymbolInfo=function(e){void 0===e&&(e=this.getCodewordCount()),(null==this.symbolInfo||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=yg.lookup(e,this.shape,this.minSize,this.maxSize,!0))},e.prototype.resetSymbolInfo=function(){this.symbolInfo=null},e}(),kg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kg(t,e),t.prototype.getEncodingMode=function(){return 3},t.prototype.encode=function(e){for(var t=new cd;e.hasMoreCharacters();){var n=e.getCurrentChar();if(e.pos++,this.encodeChar(n,t),t.length()%3===0)if(this.writeNextTriplet(e,t),Sg.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}this.handleEOD(e,t)},t.prototype.encodeChar=function(e,t){switch(e){case 13:t.append(0);break;case"*".charCodeAt(0):t.append(1);break;case">".charCodeAt(0):t.append(2);break;case" ".charCodeAt(0):t.append(3);break;default:e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)?t.append(e-48+4):e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)?t.append(e-65+14):Sg.illegalCharacter(ld.getCharAt(e))}return 1},t.prototype.handleEOD=function(e,t){e.updateSymbolInfo();var n=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),r=t.length();e.pos-=r,(e.getRemainingCharacters()>1||n>1||e.getRemainingCharacters()!==n)&&e.writeCodeword(254),e.getNewEncoding()<0&&e.signalEncoderChange(0)},t}(pg),jg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jg(t,e),t.prototype.getEncodingMode=function(){return 2},t.prototype.encodeChar=function(e,t){if(e===" ".charCodeAt(0))return t.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return t.append(e-48+4),1;if(e>="a".charCodeAt(0)&&e<="z".charCodeAt(0))return t.append(e-97+14),1;if(e<" ".charCodeAt(0))return t.append(0),t.append(e),2;if(e<="/".charCodeAt(0))return t.append(1),t.append(e-33),2;if(e<="@".charCodeAt(0))return t.append(1),t.append(e-58+15),2;if(e>="[".charCodeAt(0)&&e<="_".charCodeAt(0))return t.append(1),t.append(e-91+22),2;if(e==="`".charCodeAt(0))return t.append(2),t.append(0),2;if(e<="Z".charCodeAt(0))return t.append(2),t.append(e-65+1),2;if(e<=127)return t.append(2),t.append(e-123+27),2;t.append("1\x1e");var n=2;return n+=this.encodeChar(e-128,t)},t}(pg),Ng=function(){function e(){}return e.randomize253State=function(e){var t=129+(149*e%253+1);return t<=254?t:t-254},e.encodeHighLevel=function(e,t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=!1);var a=new pg,i=[new ug,a,new _g,new Cg,new fg,new hg],s=new wg(e);s.setSymbolShape(t),s.setSizeConstraints(n,r),e.startsWith(ig)&&e.endsWith(lg)?(s.writeCodeword(236),s.setSkipAtEnd(2),s.pos+=7):e.startsWith(sg)&&e.endsWith(lg)&&(s.writeCodeword(237),s.setSkipAtEnd(2),s.pos+=7);var l=0;for(o&&(a.encodeMaximal(s),l=s.getNewEncoding(),s.resetEncoderSignal());s.hasMoreCharacters();)i[l].encode(s),s.getNewEncoding()>=0&&(l=s.getNewEncoding(),s.resetEncoderSignal());var c=s.getCodewordCount();s.updateSymbolInfo();var d=s.getSymbolInfo().getDataCapacity();c<d&&0!==l&&5!==l&&4!==l&&s.writeCodeword("\xfe");var u=s.getCodewords();for(u.length()<d&&u.append(129);u.length()<d;)u.append(this.randomize253State(u.length()+1));return s.getCodewords().toString()},e.lookAheadTest=function(e,t,n){var r=this.lookAheadTestIntern(e,t,n);if(3===n&&3===r){for(var o=Math.min(t+3,e.length),a=t;a<o;a++)if(!this.isNativeX12(e.charCodeAt(a)))return 0}else if(4===n&&4===r)for(o=Math.min(t+4,e.length),a=t;a<o;a++)if(!this.isNativeEDIFACT(e.charCodeAt(a)))return 0;return r},e.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var r;0===n?r=[0,1,1,1,1,1.25]:(r=[1,2,2,2,2,2.25])[n]=0;for(var o=0,a=new Uint8Array(6),i=[];;){if(t+o===e.length){Yc.fill(a,0),Yc.fill(i,0);var s=this.findMinimums(r,i,qc.MAX_VALUE,a),l=this.getMinimumCount(a);if(i[0]===s)return 0;if(1===l){if(a[5]>0)return 5;if(a[4]>0)return 4;if(a[2]>0)return 2;if(a[3]>0)return 3}return 1}var c=e.charCodeAt(t+o);if(o++,this.isDigit(c)?r[0]+=.5:this.isExtendedASCII(c)?(r[0]=Math.ceil(r[0]),r[0]+=2):(r[0]=Math.ceil(r[0]),r[0]++),this.isNativeC40(c)?r[1]+=2/3:this.isExtendedASCII(c)?r[1]+=8/3:r[1]+=4/3,this.isNativeText(c)?r[2]+=2/3:this.isExtendedASCII(c)?r[2]+=8/3:r[2]+=4/3,this.isNativeX12(c)?r[3]+=2/3:this.isExtendedASCII(c)?r[3]+=13/3:r[3]+=10/3,this.isNativeEDIFACT(c)?r[4]+=3/4:this.isExtendedASCII(c)?r[4]+=4.25:r[4]+=3.25,this.isSpecialB256(c)?r[5]+=4:r[5]++,o>=4){if(Yc.fill(a,0),Yc.fill(i,0),this.findMinimums(r,i,qc.MAX_VALUE,a),i[0]<this.min(i[5],i[1],i[2],i[3],i[4]))return 0;if(i[5]<i[0]||i[5]+1<this.min(i[1],i[2],i[3],i[4]))return 5;if(i[4]+1<this.min(i[5],i[1],i[2],i[3],i[0]))return 4;if(i[2]+1<this.min(i[5],i[1],i[4],i[3],i[0]))return 2;if(i[3]+1<this.min(i[5],i[1],i[4],i[2],i[0]))return 3;if(i[1]+1<this.min(i[0],i[5],i[4],i[2])){if(i[1]<i[3])return 1;if(i[1]===i[3]){for(var d=t+o+1;d<e.length;){var u=e.charCodeAt(d);if(this.isX12TermSep(u))return 3;if(!this.isNativeX12(u))break;d++}return 1}}}}},e.min=function(e,t,n,r,o){var a=Math.min(e,Math.min(t,Math.min(n,r)));return void 0===o?a:Math.min(a,o)},e.findMinimums=function(e,t,n,r){for(var o=0;o<6;o++){var a=t[o]=Math.ceil(e[o]);n>a&&(n=a,Yc.fill(r,0)),n===a&&(r[o]=r[o]+1)}return n},e.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},e.isDigit=function(e){return e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)},e.isExtendedASCII=function(e){return e>=128&&e<=255},e.isNativeC40=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},e.isNativeText=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)},e.isNativeX12=function(e){return this.isX12TermSep(e)||e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},e.isX12TermSep=function(e){return 13===e||e==="*".charCodeAt(0)||e===">".charCodeAt(0)},e.isNativeEDIFACT=function(e){return e>=" ".charCodeAt(0)&&e<="^".charCodeAt(0)},e.isSpecialB256=function(e){return!1},e.determineConsecutiveDigitCount=function(e,t){void 0===t&&(t=0);for(var n=e.length,r=t;r<n&&this.isDigit(e.charCodeAt(r));)r++;return r-t},e.illegalCharacter=function(e){var t=qc.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},e}();const Sg=Ng;var Eg,Ag=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Pg=function(){function e(e){this.charset=e,this.name=e.name}return e.prototype.canEncode=function(e){try{return null!=sd.encode(e,this.charset)}catch(t){return!1}},e}(),Bg=function(){function e(e,t,n){var r,o,a,i,s,l;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(e){return new Pg(Jm.forName(e))}),this.encoders=[];var c=[];c.push(new Pg(Qm.ISO_8859_1));for(var d=null!=t&&t.name.startsWith("UTF"),u=0;u<e.length;u++){var h=!1;try{for(var p=(r=void 0,Ag(c)),f=p.next();!f.done;f=p.next()){var m=f.value,g=e.charAt(u);if(g.charCodeAt(0)===n||m.canEncode(g)){h=!0;break}}}catch(C){r={error:C}}finally{try{f&&!f.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}if(!h)try{for(var x=(a=void 0,Ag(this.ENCODERS)),y=x.next();!y.done;y=x.next()){if((m=y.value).canEncode(e.charAt(u))){c.push(m),h=!0;break}}}catch(j){a={error:j}}finally{try{y&&!y.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}h||(d=!0)}if(1!==c.length||d){this.encoders=[];var v=0;try{for(var b=Ag(c),w=b.next();!w.done;w=b.next()){m=w.value;this.encoders[v++]=m}}catch(_){s={error:_}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}}else this.encoders=[c[0]];var k=-1;if(null!=t)for(u=0;u<this.encoders.length;u++)if(null!=this.encoders[u]&&t.name===this.encoders[u].name){k=u;break}this.priorityEncoderIndex=k}return e.prototype.length=function(){return this.encoders.length},e.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},e.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},e.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},e.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},e.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},e.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return sd.encode(ld.getCharAt(e),this.encoders[t].name)},e}(),Ig=function(){function e(e,t,n){this.fnc1=n;var r=new Bg(e,t,n);if(1===r.length())for(var o=0;o<this.bytes.length;o++){var a=e.charAt(o).charCodeAt(0);this.bytes[o]=a===n?1e3:a}else this.bytes=this.encodeMinimally(e,r,n)}return e.prototype.getFNC1Character=function(){return this.fnc1},e.prototype.length=function(){return this.bytes.length},e.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},e.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},e.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new cd,r=e;r<t;r++){if(this.isECI(r))throw new Error("value at "+r+" is not a character but an ECI");n.append(this.charAt(r))}return n.toString()},e.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},e.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return 1e3===this.bytes[e]},e.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},e.prototype.addEdge=function(e,t,n){(null==e[t][n.encoderIndex]||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},e.prototype.addEdges=function(e,t,n,r,o,a){var i=e.charAt(r).charCodeAt(0),s=0,l=t.length();t.getPriorityEncoderIndex()>=0&&(i===a||t.canEncode(i,t.getPriorityEncoderIndex()))&&(l=(s=t.getPriorityEncoderIndex())+1);for(var c=s;c<l;c++)(i===a||t.canEncode(i,c))&&this.addEdge(n,r+1,new Tg(i,t,c,o,a))},e.prototype.encodeMinimally=function(e,t,n){var r=e.length,o=new(Tg[r+1][t.length()]);this.addEdges(e,t,o,0,null,n);for(var a=1;a<=r;a++){for(var i=0;i<t.length();i++)null!=o[a][i]&&a<r&&this.addEdges(e,t,o,a,o[a][i],n);for(i=0;i<t.length();i++)o[a-1][i]=null}var s=-1,l=qc.MAX_VALUE;for(i=0;i<t.length();i++)if(null!=o[r][i]){var c=o[r][i];c.cachedTotalSize<l&&(l=c.cachedTotalSize,s=i)}if(s<0)throw new Error('Failed to encode "'+e+'"');for(var d=[],u=o[r][s];null!=u;){if(u.isFNC1())d.unshift(1e3);else{var h=t.encode(u.c,u.encoderIndex);for(a=h.length-1;a>=0;a--)d.unshift(255&h[a])}(null===u.previous?0:u.previous.encoderIndex)!==u.encoderIndex&&d.unshift(256+t.getECIValue(u.encoderIndex)),u=u.previous}var p=[];for(a=0;a<p.length;a++)p[a]=d[a];return p},e}(),Tg=function(){function e(e,t,n,r,o){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=r,this.fnc1=o,this.c=e===o?1e3:e;var a=this.isFNC1()?1:t.encode(e,n).length;(null===r?0:r.encoderIndex)!==n&&(a+=3),null!=r&&(a+=r.cachedTotalSize),this.cachedTotalSize=a}return e.prototype.isFNC1=function(){return 1e3===this.c},e}(),Mg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dg=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rg=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Og=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Rg(arguments[t]));return e};!function(e){e[e.ASCII=0]="ASCII",e[e.C40=1]="C40",e[e.TEXT=2]="TEXT",e[e.X12=3]="X12",e[e.EDF=4]="EDF",e[e.B256=5]="B256"}(Eg||(Eg={}));var Fg=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Lg=function(){function e(){}return e.isExtendedASCII=function(e,t){return e!==t&&e>=128&&e<=255},e.isInC40Shift1Set=function(e){return e<=31},e.isInC40Shift2Set=function(e,t){var n,r;try{for(var o=Dg(Fg),a=o.next();!a.done;a=o.next()){if(a.value.charCodeAt(0)===e)return!0}}catch(i){n={error:i}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return e===t},e.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},e.isInTextShift2Set=function(e,t){return this.isInC40Shift2Set(e,t)},e.encodeHighLevel=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=-1),void 0===r&&(r=0);var o=0;return e.startsWith(ig)&&e.endsWith(lg)?(o=5,e=e.substring(7,e.length-2)):e.startsWith(sg)&&e.endsWith(lg)&&(o=6,e=e.substring(7,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,Og(this.encode(e,t,n,r,o)))))},e.encode=function(e,t,n,r,o){return this.encodeMinimally(new Vg(e,t,n,r,o)).getBytes()},e.addEdge=function(e,t){var n=t.fromPosition+t.characterLength;(null===e[n][t.getEndMode()]||e[n][t.getEndMode()].cachedTotalSize>t.cachedTotalSize)&&(e[n][t.getEndMode()]=t)},e.getNumberOfC40Words=function(t,n,r,o){for(var a=0,i=n;i<t.length();i++){if(t.isECI(i))return o[0]=0,0;var s=t.charAt(i);if(r&&Sg.isNativeC40(s)||!r&&Sg.isNativeText(s))a++;else if(e.isExtendedASCII(s,t.getFNC1Character())){var l=255&s;l>=128&&(r&&Sg.isNativeC40(l-128)||!r&&Sg.isNativeText(l-128))?a+=3:a+=4}else a+=2;if(a%3===0||(a-2)%3===0&&i+1===t.length())return o[0]=i-n+1,Math.ceil(a/3)}return o[0]=0,0},e.addEdges=function(t,n,r,o){var a,i;if(t.isECI(r))this.addEdge(n,new Wg(t,Eg.ASCII,r,1,o));else{var s,l=t.charAt(r);if(null===o||o.getEndMode()!==Eg.EDF){Sg.isDigit(l)&&t.haveNCharacters(r,2)&&Sg.isDigit(t.charAt(r+1))?this.addEdge(n,new Wg(t,Eg.ASCII,r,2,o)):this.addEdge(n,new Wg(t,Eg.ASCII,r,1,o));var c=[Eg.C40,Eg.TEXT];try{for(var d=Dg(c),u=d.next();!u.done;u=d.next()){var h=u.value,p=[];e.getNumberOfC40Words(t,r,h===Eg.C40,p)>0&&this.addEdge(n,new Wg(t,h,r,p[0],o))}}catch(m){a={error:m}}finally{try{u&&!u.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}t.haveNCharacters(r,3)&&Sg.isNativeX12(t.charAt(r))&&Sg.isNativeX12(t.charAt(r+1))&&Sg.isNativeX12(t.charAt(r+2))&&this.addEdge(n,new Wg(t,Eg.X12,r,3,o)),this.addEdge(n,new Wg(t,Eg.B256,r,1,o))}for(s=0;s<3;s++){var f=r+s;if(!t.haveNCharacters(f,1)||!Sg.isNativeEDIFACT(t.charAt(f)))break;this.addEdge(n,new Wg(t,Eg.EDF,r,s+1,o))}3===s&&t.haveNCharacters(r,4)&&Sg.isNativeEDIFACT(t.charAt(r+3))&&this.addEdge(n,new Wg(t,Eg.EDF,r,4,o))}},e.encodeMinimally=function(e){var t=e.length(),n=Array(t+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,n,0,null);for(var r=1;r<=t;r++){for(var o=0;o<6;o++)null!==n[r][o]&&r<t&&this.addEdges(e,n,r,n[r][o]);for(o=0;o<6;o++)n[r-1][o]=null}var a=-1,i=qc.MAX_VALUE;for(o=0;o<6;o++)if(null!==n[t][o]){var s=n[t][o],l=o>=1&&o<=3?s.cachedTotalSize+1:s.cachedTotalSize;l<i&&(i=l,a=o)}if(a<0)throw new Error('Failed to encode "'+e+'"');return new zg(n[t][a])},e}(),zg=function(){function e(e){var t=e.input,n=0,r=[],o=[],a=[];e.mode!==Eg.C40&&e.mode!==Eg.TEXT&&e.mode!==Eg.X12||e.getEndMode()===Eg.ASCII||(n+=this.prepend(Wg.getBytes(254),r));for(var i=e;null!==i;)n+=this.prepend(i.getDataBytes(),r),null!==i.previous&&i.getPreviousStartMode()===i.getMode()||(i.getMode()===Eg.B256&&(n<=249?(r.unshift(n),n++):(r.unshift(n%250),r.unshift(n/250+249),n+=2),o.push(r.length),a.push(n)),this.prepend(i.getLatchBytes(),r),n=0),i=i.previous;5===t.getMacroId()?n+=this.prepend(Wg.getBytes(236),r):6===t.getMacroId()&&(n+=this.prepend(Wg.getBytes(237),r)),t.getFNC1Character()>0&&(n+=this.prepend(Wg.getBytes(232),r));for(var s=0;s<o.length;s++)this.applyRandomPattern(r,r.length-o[s],a[s]);var l=e.getMinSymbolSize(r.length);for(r.length<l&&r.push(129);r.length<l;)r.push(this.randomize253State(r.length+1));this.bytes=new Uint8Array(r.length);for(s=0;s<this.bytes.length;s++)this.bytes[s]=r[s]}return e.prototype.prepend=function(e,t){for(var n=e.length-1;n>=0;n--)t.unshift(e[n]);return e.length},e.prototype.randomize253State=function(e){var t=129+(149*e%253+1);return t<=254?t:t-254},e.prototype.applyRandomPattern=function(e,t,n){for(var r=0;r<n;r++){var o=t+r,a=(255&e[o])+(149*(o+1)%255+1);e[o]=a<=255?a:a-256}},e.prototype.getBytes=function(){return this.bytes},e}(),Wg=function(){function e(e,t,n,r,o){if(this.input=e,this.mode=t,this.fromPosition=n,this.characterLength=r,this.previous=o,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(n+r<=e.length()))throw new Error("Invalid edge");var a=null!==o?o.cachedTotalSize:0,i=this.getPreviousMode();switch(t){case Eg.ASCII:a++,(e.isECI(n)||Lg.isExtendedASCII(e.charAt(n),e.getFNC1Character()))&&a++,i!==Eg.C40&&i!==Eg.TEXT&&i!==Eg.X12||a++;break;case Eg.B256:a++,(i!==Eg.B256||250===this.getB256Size())&&a++,i===Eg.ASCII?a++:i!==Eg.C40&&i!==Eg.TEXT&&i!==Eg.X12||(a+=2);break;case Eg.C40:case Eg.TEXT:case Eg.X12:if(t===Eg.X12)a+=2;else{a+=2*Lg.getNumberOfC40Words(e,n,t===Eg.C40,[])}i===Eg.ASCII||i===Eg.B256?a++:i===t||i!==Eg.C40&&i!==Eg.TEXT&&i!==Eg.X12||(a+=2);break;case Eg.EDF:a+=3,i===Eg.ASCII||i===Eg.B256?a++:i!==Eg.C40&&i!==Eg.TEXT&&i!==Eg.X12||(a+=2)}this.cachedTotalSize=a}return e.prototype.getB256Size=function(){for(var e=0,t=this;null!==t&&t.mode===Eg.B256&&e<=250;)e++,t=t.previous;return e},e.prototype.getPreviousStartMode=function(){return null===this.previous?Eg.ASCII:this.previous.mode},e.prototype.getPreviousMode=function(){return null===this.previous?Eg.ASCII:this.previous.getEndMode()},e.prototype.getEndMode=function(){if(this.mode===Eg.EDF){if(this.characterLength<4)return Eg.ASCII;if((e=this.getLastASCII())>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return Eg.ASCII}if(this.mode===Eg.C40||this.mode===Eg.TEXT||this.mode===Eg.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&0===this.getCodewordsRemaining(this.cachedTotalSize))return Eg.ASCII;var e;if(1===(e=this.getLastASCII())&&0===this.getCodewordsRemaining(this.cachedTotalSize+1))return Eg.ASCII}return this.mode},e.prototype.getMode=function(){return this.mode},e.prototype.getLastASCII=function(){var e=this.input.length(),t=this.fromPosition+this.characterLength;return e-t>4||t>=e?0:e-t===1?Lg.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?0:1:e-t===2?Lg.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())||Lg.isExtendedASCII(this.input.charAt(t+1),this.input.getFNC1Character())?0:Sg.isDigit(this.input.charAt(t))&&Sg.isDigit(this.input.charAt(t+1))?1:2:e-t===3?Sg.isDigit(this.input.charAt(t))&&Sg.isDigit(this.input.charAt(t+1))&&!Lg.isExtendedASCII(this.input.charAt(t+2),this.input.getFNC1Character())||Sg.isDigit(this.input.charAt(t+1))&&Sg.isDigit(this.input.charAt(t+2))&&!Lg.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?2:0:Sg.isDigit(this.input.charAt(t))&&Sg.isDigit(this.input.charAt(t+1))&&Sg.isDigit(this.input.charAt(t+2))&&Sg.isDigit(this.input.charAt(t+3))?2:0},e.prototype.getMinSymbolSize=function(e){var t,n,r,o,a,i;switch(this.input.getShapeHint()){case 1:try{for(var s=Dg(this.squareCodewordCapacities),l=s.next();!l.done;l=s.next()){if((p=l.value)>=e)return p}}catch(f){t={error:f}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}break;case 2:try{for(var c=Dg(this.rectangularCodewordCapacities),d=c.next();!d.done;d=c.next()){if((p=d.value)>=e)return p}}catch(m){r={error:m}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}}try{for(var u=Dg(this.allCodewordCapacities),h=u.next();!h.done;h=u.next()){var p;if((p=h.value)>=e)return p}}catch(g){a={error:g}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},e.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},e.getBytes=function(e,t){var n=new Uint8Array(t?2:1);return n[0]=e,t&&(n[1]=t),n},e.prototype.setC40Word=function(e,t,n,r,o){var a=1600*(255&n)+40*(255&r)+(255&o)+1;e[t]=a/256,e[t+1]=a%256},e.prototype.getX12Value=function(e){return 13===e?0:42===e?1:62===e?2:32===e?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},e.prototype.getX12Words=function(){if(this.characterLength%3!==0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),t=0;t<e.length;t+=2)this.setC40Word(e,t,this.getX12Value(this.input.charAt(this.fromPosition+t/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+2)));return e},e.prototype.getShiftValue=function(e,t,n){return t&&Lg.isInC40Shift1Set(e)||!t&&Lg.isInTextShift1Set(e)?0:t&&Lg.isInC40Shift2Set(e,n)||!t&&Lg.isInTextShift2Set(e,n)?1:2},e.prototype.getC40Value=function(e,t,n,r){if(n===r){if(2!==t)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?n<=31?n:32===n?3:n<=47?n-33:n<=57?n-44:n<=64?n-43:n<=90?n-51:n<=95?n-69:n<=127?n-96:n:0===n?0:0===t&&n<=3?n-1:1===t&&n<=31?n:32===n?3:n>=33&&n<=47?n-33:n>=48&&n<=57?n-44:n>=58&&n<=64?n-43:n>=65&&n<=90?n-64:n>=91&&n<=95?n-69:96===n?0:n>=97&&n<=122?n-83:n>=123&&n<=127?n-96:n},e.prototype.getC40Words=function(e,t){for(var n=[],r=0;r<this.characterLength;r++){var o=this.input.charAt(this.fromPosition+r);if(e&&Sg.isNativeC40(o)||!e&&Sg.isNativeText(o))n.push(this.getC40Value(e,0,o,t));else if(Lg.isExtendedASCII(o,t)){var a=(255&o)-128;if(e&&Sg.isNativeC40(a)||!e&&Sg.isNativeText(a))n.push(1),n.push(30),n.push(this.getC40Value(e,0,a,t));else{n.push(1),n.push(30);i=this.getShiftValue(a,e,t);n.push(i),n.push(this.getC40Value(e,i,a,t))}}else{var i=this.getShiftValue(o,e,t);n.push(i),n.push(this.getC40Value(e,i,o,t))}}if(n.length%3!==0){if((n.length-2)%3!==0||this.fromPosition+this.characterLength!==this.input.length())throw new Error("C40 words must be a multiple of 3");n.push(0)}var s=new Uint8Array(n.length/3*2),l=0;for(r=0;r<n.length;r+=3)this.setC40Word(s,l,255&n[r],255&n[r+1],255&n[r+2]),l+=2;return s},e.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),t=new Uint8Array(3*e),n=this.fromPosition,r=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),o=0;o<e;o+=3){for(var a=[],i=0;i<4;i++)a[i]=n<=r?63&this.input.charAt(n++):n===r+1?31:0;var s=a[0]<<18;s|=a[1]<<12,s|=a[2]<<6,s|=a[3],t[o]=s>>16&255,t[o+1]=s>>8&255,t[o+2]=255&s}return t},e.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case Eg.ASCII:case Eg.B256:switch(this.mode){case Eg.B256:return e.getBytes(231);case Eg.C40:return e.getBytes(230);case Eg.TEXT:return e.getBytes(239);case Eg.X12:return e.getBytes(238);case Eg.EDF:return e.getBytes(240)}break;case Eg.C40:case Eg.TEXT:case Eg.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case Eg.ASCII:return e.getBytes(254);case Eg.B256:return e.getBytes(254,231);case Eg.C40:return e.getBytes(254,230);case Eg.TEXT:return e.getBytes(254,239);case Eg.X12:return e.getBytes(254,238);case Eg.EDF:return e.getBytes(254,240)}break;case Eg.EDF:if(this.mode!==Eg.EDF)throw new Error("Cannot switch from EDF to "+this.mode)}return new Uint8Array(0)},e.prototype.getDataBytes=function(){switch(this.mode){case Eg.ASCII:return this.input.isECI(this.fromPosition)?e.getBytes(241,this.input.getECIValue(this.fromPosition)+1):Lg.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?e.getBytes(235,this.input.charAt(this.fromPosition)-127):2===this.characterLength?e.getBytes(10*this.input.charAt(this.fromPosition)+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?e.getBytes(232):e.getBytes(this.input.charAt(this.fromPosition)+1);case Eg.B256:return e.getBytes(this.input.charAt(this.fromPosition));case Eg.C40:return this.getC40Words(!0,this.input.getFNC1Character());case Eg.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case Eg.X12:return this.getX12Words();case Eg.EDF:return this.getEDFBytes()}},e}(),Vg=function(e){function t(t,n,r,o,a){var i=e.call(this,t,n,r)||this;return i.shape=o,i.macroId=a,i}return Mg(t,e),t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t}(Ig);!function(){function e(){}e.prototype.encode=function(e,t,n,r,o){if(void 0===o&&(o=null),""===e.trim())throw new Error("Found empty contents");if(t!==Pd.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+t);if(n<0||r<0)throw new Error("Requested dimensions can't be negative: "+n+"x"+r);var a,i=0,s=null,l=null;if(null!=o){var c=o.get(Im.DATA_MATRIX_SHAPE);null!=c&&(i=c);var d=o.get(Im.MIN_SIZE);null!=d&&(s=d);var u=o.get(Im.MAX_SIZE);null!=u&&(l=u)}if(null!=o&&o.has(Im.DATA_MATRIX_COMPACT)&&Boolean(o.get(Im.DATA_MATRIX_COMPACT).toString())){var h=o.has(Im.GS1_FORMAT)&&Boolean(o.get(Im.GS1_FORMAT).toString()),p=null;o.has(Im.CHARACTER_SET)&&(p=Jm.forName(o.get(Im.CHARACTER_SET).toString())),a=Lg.encodeHighLevel(e,p,h?29:-1,i)}else{var f=null!=o&&o.has(Im.FORCE_C40)&&Boolean(o.get(Im.FORCE_C40).toString());a=Sg.encodeHighLevel(e,i,s,l,f)}var m=yg.lookup(a.length,i,s,l,!0),g=dg.encodeECC200(a,m),x=new $m(g,m.getSymbolDataWidth(),m.getSymbolDataHeight());return x.place(),this.encodeLowLevel(x,m,n,r)},e.prototype.encodeLowLevel=function(e,t,n,r){for(var o=t.getSymbolDataWidth(),a=t.getSymbolDataHeight(),i=new Om(t.getSymbolWidth(),t.getSymbolHeight()),s=0,l=0;l<a;l++){var c=void 0;if(l%t.matrixHeight===0){c=0;for(var d=0;d<t.getSymbolWidth();d++)i.setBoolean(c,s,d%2===0),c++;s++}c=0;for(d=0;d<o;d++)d%t.matrixWidth===0&&(i.setBoolean(c,s,!0),c++),i.setBoolean(c,s,e.getBit(d,l)),c++,d%t.matrixWidth===t.matrixWidth-1&&(i.setBoolean(c,s,l%2===0),c++);if(s++,l%t.matrixHeight===t.matrixHeight-1){c=0;for(d=0;d<t.getSymbolWidth();d++)i.setBoolean(c,s,!0),c++;s++}}return this.convertByteMatrixToBitMatrix(i,n,r)},e.prototype.convertByteMatrixToBitMatrix=function(e,t,n){var r,o=e.getWidth(),a=e.getHeight(),i=Math.max(t,o),s=Math.max(n,a),l=Math.min(i/o,s/a),c=(i-o*l)/2,d=(s-a*l)/2;n<a||t<o?(c=0,d=0,r=new dd(o,a)):r=new dd(t,n),r.clear();for(var u=0,h=d;u<a;u++,h+=l)for(var p=0,f=c;p<o;p++,f+=l)1===e.get(p,u)&&r.setRegion(f,h,l,l);return r}}();const Ug=function(){function e(){}return e.prototype.isCompact=function(){return this.compact},e.prototype.setCompact=function(e){this.compact=e},e.prototype.getSize=function(){return this.size},e.prototype.setSize=function(e){this.size=e},e.prototype.getLayers=function(){return this.layers},e.prototype.setLayers=function(e){this.layers=e},e.prototype.getCodeWords=function(){return this.codeWords},e.prototype.setCodeWords=function(e){this.codeWords=e},e.prototype.getMatrix=function(){return this.matrix},e.prototype.setMatrix=function(e){this.matrix=e},e}();const Hg=function(){function e(){}return e.singletonList=function(e){return[e]},e.min=function(e,t){return e.sort(t)[0]},e}();const Gg=function(){function e(e){this.previous=e}return e.prototype.getPrevious=function(){return this.previous},e}();var Xg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Kg=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.value=n,o.bitCount=r,o}return Xg(t,e),t.prototype.appendTo=function(e,t){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,n){return new t(this,e,n)},t.prototype.addBinaryShift=function(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,n)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+qc.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(Gg);var Yg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const qg=function(e){function t(t,n,r){var o=e.call(this,t,0,0)||this;return o.binaryShiftStart=n,o.binaryShiftByteCount=r,o}return Yg(t,e),t.prototype.appendTo=function(e,t){for(var n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)},t.prototype.addBinaryShift=function(e,n){return new t(this,e,n)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(Kg);function Zg(e,t,n){return new Kg(e,t,n)}var Jg=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Qg=new Kg(null,0,0),$g=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],ex=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var tx=function(e){var t,n;try{for(var r=ex(e),o=r.next();!o.done;o=r.next()){var a=o.value;Yc.fill(a,-1)}}catch(i){t={error:i}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e[0][4]=0,e[1][4]=0,e[1][0]=28,e[3][4]=0,e[2][4]=0,e[2][0]=15,e}(Yc.createInt32Array(6,6)),nx=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rx=function(){function e(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}return e.prototype.getMode=function(){return this.mode},e.prototype.getToken=function(){return this.token},e.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},e.prototype.getBitCount=function(){return this.bitCount},e.prototype.latchAndAppend=function(t,n){var r=this.bitCount,o=this.token;if(t!==this.mode){var a=$g[this.mode][t];o=Zg(o,65535&a,a>>16),r+=a>>16}var i=2===t?4:5;return new e(o=Zg(o,n,i),t,0,r+i)},e.prototype.shiftAndAppend=function(t,n){var r=this.token,o=2===this.mode?4:5;return r=Zg(r,tx[this.mode][t],o),new e(r=Zg(r,n,5),this.mode,0,this.bitCount+o+5)},e.prototype.addBinaryShiftChar=function(t){var n=this.token,r=this.mode,o=this.bitCount;if(4===this.mode||2===this.mode){var a=$g[r][0];n=Zg(n,65535&a,a>>16),o+=a>>16,r=0}var i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new e(n,r,this.binaryShiftByteCount+1,o+i);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(t+1)),s},e.prototype.endBinaryShift=function(t){if(0===this.binaryShiftByteCount)return this;var n=this.token;return new e(n=function(e,t,n){return new qg(e,t,n)}(n,t-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},e.prototype.isBetterThanOrEqualTo=function(t){var n=this.bitCount+($g[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?n+=e.calculateBinaryShiftCost(t)-e.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(n+=10),n<=t.bitCount},e.prototype.toBitArray=function(e){for(var t,n,r=[],o=this.endBinaryShift(e.length).token;null!==o;o=o.getPrevious())r.unshift(o);var a=new Zc;try{for(var i=nx(r),s=i.next();!s.done;s=i.next()){s.value.appendTo(a,e)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},e.prototype.toString=function(){return ld.format("%s bits=%d bytes=%d",Jg[this.mode],this.bitCount,this.binaryShiftByteCount)},e.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},e.INITIAL_STATE=new e(Qg,0,0,0),e}();const ox=rx;var ax=function(e){var t=ld.getCharCode(" "),n=ld.getCharCode("."),r=ld.getCharCode(",");e[0][t]=1;for(var o=ld.getCharCode("Z"),a=ld.getCharCode("A"),i=a;i<=o;i++)e[0][i]=i-a+2;e[1][t]=1;var s=ld.getCharCode("z"),l=ld.getCharCode("a");for(i=l;i<=s;i++)e[1][i]=i-l+2;e[2][t]=1;var c=ld.getCharCode("9"),d=ld.getCharCode("0");for(i=d;i<=c;i++)e[2][i]=i-d+2;e[2][r]=12,e[2][n]=13;for(var u=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],h=0;h<u.length;h++)e[3][ld.getCharCode(u[h])]=h;var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(h=0;h<p.length;h++)ld.getCharCode(p[h])>0&&(e[4][ld.getCharCode(p[h])]=h);return e}(Yc.createInt32Array(5,256)),ix=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sx=function(){function e(e){this.text=e}return e.prototype.encode=function(){for(var t=ld.getCharCode(" "),n=ld.getCharCode("\n"),r=Hg.singletonList(ox.INITIAL_STATE),o=0;o<this.text.length;o++){var a=void 0,i=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case ld.getCharCode("\r"):a=i===n?2:0;break;case ld.getCharCode("."):a=i===t?3:0;break;case ld.getCharCode(","):a=i===t?4:0;break;case ld.getCharCode(":"):a=i===t?5:0;break;default:a=0}a>0?(r=e.updateStateListForPair(r,o,a),o++):r=this.updateStateListForChar(r,o)}return Hg.min(r,function(e,t){return e.getBitCount()-t.getBitCount()}).toBitArray(this.text)},e.prototype.updateStateListForChar=function(t,n){var r,o,a=[];try{for(var i=ix(t),s=i.next();!s.done;s=i.next()){var l=s.value;this.updateStateForChar(l,n,a)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return e.simplifyStates(a)},e.prototype.updateStateForChar=function(e,t,n){for(var r=255&this.text[t],o=ax[e.getMode()][r]>0,a=null,i=0;i<=4;i++){var s=ax[i][r];if(s>0){if(null==a&&(a=e.endBinaryShift(t)),!o||i===e.getMode()||2===i){var l=a.latchAndAppend(i,s);n.push(l)}if(!o&&tx[e.getMode()][i]>=0){var c=a.shiftAndAppend(i,s);n.push(c)}}}if(e.getBinaryShiftByteCount()>0||0===ax[e.getMode()][r]){var d=e.addBinaryShiftChar(t);n.push(d)}},e.updateStateListForPair=function(e,t,n){var r,o,a=[];try{for(var i=ix(e),s=i.next();!s.done;s=i.next()){var l=s.value;this.updateStateForPair(l,t,n,a)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return this.simplifyStates(a)},e.updateStateForPair=function(e,t,n,r){var o=e.endBinaryShift(t);if(r.push(o.latchAndAppend(4,n)),4!==e.getMode()&&r.push(o.shiftAndAppend(4,n)),3===n||4===n){var a=o.latchAndAppend(2,16-n).latchAndAppend(2,1);r.push(a)}if(e.getBinaryShiftByteCount()>0){var i=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(i)}},e.simplifyStates=function(e){var t,n,r,o,a=[];try{for(var i=ix(e),s=i.next();!s.done;s=i.next()){var l=s.value,c=!0,d=function(e){if(e.isBetterThanOrEqualTo(l))return c=!1,"break";l.isBetterThanOrEqualTo(e)&&(a=a.filter(function(t){return t!==e}))};try{for(var u=(r=void 0,ix(a)),h=u.next();!h.done;h=u.next()){if("break"===d(h.value))break}}catch(p){r={error:p}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}c&&a.push(l)}}catch(f){t={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},e}();const lx=sx;var cx=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},dx=function(){function e(){}return e.encodeBytes=function(t){return e.encode(t,e.DEFAULT_EC_PERCENT,e.DEFAULT_AZTEC_LAYERS)},e.encode=function(t,n,r){var o,a,i,s,l,c=new lx(t).encode(),d=qc.truncDivision(c.getSize()*n,100)+11,u=c.getSize()+d;if(r!==e.DEFAULT_AZTEC_LAYERS){if(o=r<0,(a=Math.abs(r))>(o?e.MAX_NB_BITS_COMPACT:e.MAX_NB_BITS))throw new Dc(ld.format("Illegal value %s for layers",r));var h=(i=e.totalBitsInLayer(a,o))-i%(s=e.WORD_SIZE[a]);if((l=e.stuffBits(c,s)).getSize()+d>h)throw new Dc("Data to large for user specified layer");if(o&&l.getSize()>64*s)throw new Dc("Data to large for user specified layer")}else{s=0,l=null;for(var p=0;;p++){if(p>e.MAX_NB_BITS)throw new Dc("Data too large for an Aztec code");if(a=(o=p<=3)?p+1:p,!(u>(i=e.totalBitsInLayer(a,o)))){null!=l&&s===e.WORD_SIZE[a]||(s=e.WORD_SIZE[a],l=e.stuffBits(c,s));h=i-i%s;if(!(o&&l.getSize()>64*s)&&l.getSize()+d<=h)break}}}var f,m=e.generateCheckWords(l,i,s),g=l.getSize()/s,x=e.generateModeMessage(o,a,g),y=(o?11:14)+4*a,v=new Int32Array(y);if(o){f=y;for(p=0;p<v.length;p++)v[p]=p}else{f=y+1+2*qc.truncDivision(qc.truncDivision(y,2)-1,15);var b=qc.truncDivision(y,2),w=qc.truncDivision(f,2);for(p=0;p<b;p++){var k=p+qc.truncDivision(p,15);v[b-p-1]=w-k-1,v[b+p]=w+k+1}}for(var C=new dd(f),j=(p=0,0);p<a;p++){for(var _=4*(a-p)+(o?9:12),N=0;N<_;N++)for(var S=2*N,E=0;E<2;E++)m.get(j+S+E)&&C.set(v[2*p+E],v[2*p+N]),m.get(j+2*_+S+E)&&C.set(v[2*p+N],v[y-1-2*p-E]),m.get(j+4*_+S+E)&&C.set(v[y-1-2*p-E],v[y-1-2*p-N]),m.get(j+6*_+S+E)&&C.set(v[y-1-2*p-N],v[2*p+E]);j+=8*_}if(e.drawModeMessage(C,o,f,x),o)e.drawBullsEye(C,qc.truncDivision(f,2),5);else{e.drawBullsEye(C,qc.truncDivision(f,2),7);for(p=0,N=0;p<qc.truncDivision(y,2)-1;p+=15,N+=16)for(E=1&qc.truncDivision(f,2);E<f;E+=2)C.set(qc.truncDivision(f,2)-N,E),C.set(qc.truncDivision(f,2)+N,E),C.set(E,qc.truncDivision(f,2)-N),C.set(E,qc.truncDivision(f,2)+N)}var A=new Ug;return A.setCompact(o),A.setSize(f),A.setLayers(a),A.setCodeWords(g),A.setMatrix(C),A},e.drawBullsEye=function(e,t,n){for(var r=0;r<n;r+=2)for(var o=t-r;o<=t+r;o++)e.set(o,t-r),e.set(o,t+r),e.set(t-r,o),e.set(t+r,o);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},e.generateModeMessage=function(t,n,r){var o=new Zc;return t?(o.appendBits(n-1,2),o.appendBits(r-1,6),o=e.generateCheckWords(o,28,4)):(o.appendBits(n-1,5),o.appendBits(r-1,11),o=e.generateCheckWords(o,40,4)),o},e.drawModeMessage=function(e,t,n,r){var o=qc.truncDivision(n,2);if(t)for(var a=0;a<7;a++){var i=o-3+a;r.get(a)&&e.set(i,o-5),r.get(a+7)&&e.set(o+5,i),r.get(20-a)&&e.set(i,o+5),r.get(27-a)&&e.set(o-5,i)}else for(a=0;a<10;a++){i=o-5+a+qc.truncDivision(a,5);r.get(a)&&e.set(i,o-7),r.get(a+10)&&e.set(o+7,i),r.get(29-a)&&e.set(i,o+7),r.get(39-a)&&e.set(o-7,i)}},e.generateCheckWords=function(t,n,r){var o,a,i=t.getSize()/r,s=new Tm(e.getGF(r)),l=qc.truncDivision(n,r),c=e.bitsToWords(t,r,l);s.encode(c,l-i);var d=n%r,u=new Zc;u.appendBits(0,d);try{for(var h=cx(Array.from(c)),p=h.next();!p.done;p=h.next()){var f=p.value;u.appendBits(f,r)}}catch(m){o={error:m}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}return u},e.bitsToWords=function(e,t,n){var r,o,a=new Int32Array(n);for(r=0,o=e.getSize()/t;r<o;r++){for(var i=0,s=0;s<t;s++)i|=e.get(r*t+s)?1<<t-s-1:0;a[r]=i}return a},e.getGF=function(e){switch(e){case 4:return zd.AZTEC_PARAM;case 6:return zd.AZTEC_DATA_6;case 8:return zd.AZTEC_DATA_8;case 10:return zd.AZTEC_DATA_10;case 12:return zd.AZTEC_DATA_12;default:throw new Dc("Unsupported word size "+e)}},e.stuffBits=function(e,t){for(var n=new Zc,r=e.getSize(),o=(1<<t)-2,a=0;a<r;a+=t){for(var i=0,s=0;s<t;s++)(a+s>=r||e.get(a+s))&&(i|=1<<t-1-s);(i&o)===o?(n.appendBits(i&o,t),a--):0===(i&o)?(n.appendBits(1|i,t),a--):n.appendBits(i,t)}return n},e.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.DEFAULT_EC_PERCENT=33,e.DEFAULT_AZTEC_LAYERS=0,e.MAX_NB_BITS=32,e.MAX_NB_BITS_COMPACT=4,e.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),e}();const ux=dx;!function(){function e(){}e.prototype.encode=function(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)},e.prototype.encodeWithHints=function(t,n,r,o,a){var i=Qm.ISO_8859_1,s=ux.DEFAULT_EC_PERCENT,l=ux.DEFAULT_AZTEC_LAYERS;return null!=a&&(a.has(Im.CHARACTER_SET)&&(i=Jm.forName(a.get(Im.CHARACTER_SET).toString())),a.has(Im.ERROR_CORRECTION)&&(s=qc.parseInt(a.get(Im.ERROR_CORRECTION).toString())),a.has(Im.AZTEC_LAYERS)&&(l=qc.parseInt(a.get(Im.AZTEC_LAYERS).toString()))),e.encodeLayers(t,n,r,o,i,s,l)},e.encodeLayers=function(t,n,r,o,a,i,s){if(n!==Pd.AZTEC)throw new Dc("Can only encode AZTEC, but got "+n);var l=ux.encode(ld.getBytes(t,a),i,s);return e.renderResult(l,r,o)},e.renderResult=function(e,t,n){var r=e.getMatrix();if(null==r)throw new Hd;for(var o=r.getWidth(),a=r.getHeight(),i=Math.max(t,o),s=Math.max(n,a),l=Math.min(i/o,s/a),c=(i-o*l)/2,d=(s-a*l)/2,u=new dd(i,s),h=0,p=d;h<a;h++,p+=l)for(var f=0,m=c;f<o;f++,m+=l)r.get(f,h)&&u.setRegion(m,p,l,l);return u}}();var hx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),px=function(e){function t(n){var r=e.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=t.makeBufferFromCanvasImageData(n),r}return hx(t,e),t.makeBufferFromCanvasImageData=function(e){var n;try{n=e.getContext("2d",{willReadFrequently:!0})}catch(iN){n=e.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var r=n.getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(r.data,e.width,e.height)},t.toGrayscaleBuffer=function(e,t,n){for(var r=new Uint8ClampedArray(t*n),o=0,a=0,i=e.length;o<i;o+=4,a++){var s=void 0;if(0===e[o+3])s=255;else s=306*e[o]+601*e[o+1]+117*e[o+2]+512>>10;r[a]=s}return r},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new Dc("Requested row is outside the image: "+e);var n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,n,r,o){return e.prototype.crop.call(this,t,n,r,o),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.invert=function(){return new vd(this)},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var r=e*t.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,i=Math.ceil(Math.abs(Math.cos(r))*o+Math.abs(Math.sin(r))*a),s=Math.ceil(Math.abs(Math.sin(r))*o+Math.abs(Math.cos(r))*a);n.width=i,n.height=s;var l=n.getContext("2d");if(!l)throw new Error("Could not create a Canvas Context element.");return l.translate(i/2,s/2),l.rotate(r),l.drawImage(this.canvas,o/-2,a/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.DEGREE_TO_RADIANS=Math.PI/180,t}(xd);function fx(){return"undefined"!==typeof navigator}function mx(){return!!(fx()&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}var gx=function(){return gx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gx.apply(this,arguments)},xx=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(iN){a(iN)}}function s(e){try{l(r.throw(e))}catch(iN){a(iN)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})},yx=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(iN){a=[6,iN],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},vx=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bx={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},wx=function(){function e(e,t,n){void 0===t&&(t=new Map),void 0===n&&(n={}),this.reader=e,this.hints=t,this.options=gx(gx({},bx),n)}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(e){this.hints.set(Qc.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),e.addVideoSource=function(e,t){try{e.srcObject=t}catch(n){console.error("got interrupted by new loading request")}},e.mediaStreamSetTorch=function(e,t){return xx(this,void 0,void 0,function(){return yx(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}})})},e.mediaStreamIsTorchCompatible=function(t){var n,r,o=t.getVideoTracks();try{for(var a=vx(o),i=a.next();!i.done;i=a.next()){var s=i.value;if(e.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return!1},e.mediaStreamIsTorchCompatibleTrack=function(e){try{return"torch"in e.getCapabilities()}catch(t){return console.error(t),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},e.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},e.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new Tc("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new Tc("element with id '".concat(e,"' must be an ").concat(t," element"));return n},e.createVideoElement=function(t){if(t instanceof HTMLVideoElement)return t;if("string"===typeof t)return e.getMediaElement(t,"video");if(!t&&"undefined"!==typeof document){var n=document.createElement("video");return n.width=200,n.height=200,n}throw new Error("Couldn't get videoElement from videoSource!")},e.prepareImageElement=function(t){if(t instanceof HTMLImageElement)return t;if("string"===typeof t)return e.getMediaElement(t,"img");if("undefined"===typeof t){var n=document.createElement("img");return n.width=200,n.height=200,n}throw new Error("Couldn't get imageElement from imageSource!")},e.prepareVideoElement=function(t){var n=e.createVideoElement(t);return n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},e.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.createBinaryBitmapFromCanvas=function(e){var t=new px(e),n=new gd(t);return new Rc(n)},e.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},e.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},e.createCaptureCanvas=function(t){if(!t)throw new Tc("Cannot create a capture canvas without a media element.");if("undefined"===typeof document)throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var n=document.createElement("canvas"),r=e.getMediaElementDimensions(t),o=r.width,a=r.height;return n.style.width=o+"px",n.style.height=a+"px",n.width=o,n.height=a,n},e.tryPlayVideo=function(t){return xx(this,void 0,void 0,function(){var n;return yx(this,function(r){switch(r.label){case 0:if(null===t||void 0===t?void 0:t.ended)return console.error("Trying to play video that has ended."),[2,!1];if(e.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.play()];case 2:return r.sent(),[2,!0];case 3:return n=r.sent(),console.warn("It was not possible to play the video.",n),[2,!1];case 4:return[2]}})})},e.createCanvasFromMediaElement=function(t){var n=e.createCaptureCanvas(t),r=n.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return e.drawImageOnCanvas(r,t),n},e.createBinaryBitmapFromMediaElem=function(t){var n=e.createCanvasFromMediaElement(t);return e.createBinaryBitmapFromCanvas(n)},e.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},e.listVideoInputDevices=function(){return xx(this,void 0,void 0,function(){var e,t,n,r,o,a,i,s,l,c,d,u;return yx(this,function(h){switch(h.label){case 0:if(!fx())throw new Error("Can't enumerate devices, navigator is not present.");if(!mx())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=vx(e),r=n.next();!r.done;r=n.next())o=r.value,"videoinput"===(a="video"===o.kind?"videoinput":o.kind)&&(i=o.deviceId||o.id,s=o.label||"Video device ".concat(t.length+1),l=o.groupId,c={deviceId:i,label:s,kind:a,groupId:l},t.push(c))}catch(p){d={error:p}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(d)throw d.error}}return[2,t]}})})},e.findDeviceById=function(t){return xx(this,void 0,void 0,function(){var n;return yx(this,function(r){switch(r.label){case 0:return[4,e.listVideoInputDevices()];case 1:return(n=r.sent())?[2,n.find(function(e){return e.deviceId===t})]:[2]}})})},e.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch(t){e.src=""}e&&e.removeAttribute("src")}},e.releaseAllStreams=function(){0!==e.streamTracker.length&&e.streamTracker.forEach(function(e){e.getTracks().forEach(function(e){return e.stop()})}),e.streamTracker=[]},e.playVideoOnLoadAsync=function(t,n){return xx(this,void 0,void 0,function(){return yx(this,function(r){switch(r.label){case 0:return[4,e.tryPlayVideo(t)];case 1:return r.sent()?[2,!0]:[2,new Promise(function(r,o){var a=setTimeout(function(){e.isVideoPlaying(t)||(o(!1),t.removeEventListener("canplay",i))},n),i=function(){e.tryPlayVideo(t).then(function(e){clearTimeout(a),t.removeEventListener("canplay",i),r(e)})};t.addEventListener("canplay",i)})]}})})},e.attachStreamToVideo=function(t,n,r){return void 0===r&&(r=5e3),xx(this,void 0,void 0,function(){var o;return yx(this,function(a){switch(a.label){case 0:return o=e.prepareVideoElement(n),e.addVideoSource(o,t),[4,e.playVideoOnLoadAsync(o,r)];case 1:return a.sent(),[2,o]}})})},e._waitImageLoad=function(t){return new Promise(function(n,r){var o=setTimeout(function(){e.isImageLoaded(t)||(t.removeEventListener("load",a),r())},1e4),a=function(){clearTimeout(o),t.removeEventListener("load",a),n()};t.addEventListener("load",a)})},e.checkCallbackFnOrThrow=function(e){if(!e)throw new Tc("`callbackFn` is a required parameter, you cannot capture results without it.")},e.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(e){return e.stop()}),e=void 0},e.prototype.decode=function(t){var n=e.createCanvasFromMediaElement(t);return this.decodeFromCanvas(n)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},e.prototype.decodeFromCanvas=function(t){var n=e.createBinaryBitmapFromCanvas(t);return this.decodeBitmap(n)},e.prototype.decodeFromImageElement=function(t){return xx(this,void 0,void 0,function(){var n;return yx(this,function(r){switch(r.label){case 0:if(!t)throw new Tc("An image element must be provided.");return n=e.prepareImageElement(t),[4,this._decodeOnLoadImage(n)];case 1:return[2,r.sent()]}})})},e.prototype.decodeFromImageUrl=function(t){return xx(this,void 0,void 0,function(){var n;return yx(this,function(r){switch(r.label){case 0:if(!t)throw new Tc("An URL must be provided.");(n=e.prepareImageElement()).src=t,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(n)];case 2:return[2,r.sent()];case 3:return e.destroyImageElement(n),[7];case 4:return[2]}})})},e.prototype.decodeFromConstraints=function(t,n,r){return xx(this,void 0,void 0,function(){var o,a;return yx(this,function(i){switch(i.label){case 0:return e.checkCallbackFnOrThrow(r),[4,this.getUserMedia(t)];case 1:o=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.decodeFromStream(o,n,r)];case 3:return[2,i.sent()];case 4:throw a=i.sent(),e.disposeMediaStream(o),a;case 5:return[2]}})})},e.prototype.decodeFromStream=function(t,n,r){return xx(this,void 0,void 0,function(){var o,a,i,s,l,c,d,u,h=this;return yx(this,function(p){switch(p.label){case 0:return e.checkCallbackFnOrThrow(r),o=this.options.tryPlayVideoTimeout,[4,e.attachStreamToVideo(t,n,o)];case 1:return a=p.sent(),i=function(){e.disposeMediaStream(t),e.cleanVideoSource(a)},s=this.scan(a,r,i),l=t.getVideoTracks(),c=gx(gx({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(e,t){return xx(this,void 0,void 0,function(){var n,r,o,a,i,s;return yx(this,function(c){switch(c.label){case 0:n=t?l.filter(t):l,c.label=1;case 1:c.trys.push([1,6,7,8]),r=vx(n),o=r.next(),c.label=2;case 2:return o.done?[3,5]:[4,o.value.applyConstraints(e)];case 3:c.sent(),c.label=4;case 4:return o=r.next(),[3,2];case 5:return[3,8];case 6:return a=c.sent(),i={error:a},[3,8];case 7:try{o&&!o.done&&(s=r.return)&&s.call(r)}finally{if(i)throw i.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(e){return l.find(e).getConstraints()},streamVideoSettingsGet:function(e){return l.find(e).getSettings()},streamVideoCapabilitiesGet:function(e){return l.find(e).getCapabilities()}}),e.mediaStreamIsTorchCompatible(t)&&(d=null===l||void 0===l?void 0:l.find(function(t){return e.mediaStreamIsTorchCompatibleTrack(t)}),u=function(t){return xx(h,void 0,void 0,function(){return yx(this,function(n){switch(n.label){case 0:return[4,e.mediaStreamSetTorch(d,t)];case 1:return n.sent(),[2]}})})},c.switchTorch=u,c.stop=function(){return xx(h,void 0,void 0,function(){return yx(this,function(e){switch(e.label){case 0:return s.stop(),[4,u(!1)];case 1:return e.sent(),[2]}})})}),[2,c]}})})},e.prototype.decodeFromVideoDevice=function(t,n,r){return xx(this,void 0,void 0,function(){var o;return yx(this,function(a){switch(a.label){case 0:return e.checkCallbackFnOrThrow(r),o={video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(o,n,r)];case 1:return[2,a.sent()]}})})},e.prototype.decodeFromVideoElement=function(t,n){return xx(this,void 0,void 0,function(){var r,o;return yx(this,function(a){switch(a.label){case 0:if(e.checkCallbackFnOrThrow(n),!t)throw new Tc("A video element must be provided.");return r=e.prepareVideoElement(t),o=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(r,o)];case 1:return a.sent(),[2,this.scan(r,n)]}})})},e.prototype.decodeFromVideoUrl=function(t,n){return xx(this,void 0,void 0,function(){var r,o,a;return yx(this,function(i){switch(i.label){case 0:if(e.checkCallbackFnOrThrow(n),!t)throw new Tc("An URL must be provided.");return(r=e.prepareVideoElement()).src=t,o=function(){e.cleanVideoSource(r)},a=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(r,a)];case 1:return i.sent(),[2,this.scan(r,n,o)]}})})},e.prototype.decodeOnceFromConstraints=function(e,t){return xx(this,void 0,void 0,function(){var n;return yx(this,function(r){switch(r.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=r.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,r.sent()]}})})},e.prototype.decodeOnceFromStream=function(t,n){return xx(this,void 0,void 0,function(){var r,o;return yx(this,function(a){switch(a.label){case 0:return r=Boolean(n),[4,e.attachStreamToVideo(t,n)];case 1:o=a.sent(),a.label=2;case 2:return a.trys.push([2,,4,5]),[4,this.scanOneResult(o)];case 3:return[2,a.sent()];case 4:return r||e.cleanVideoSource(o),[7];case 5:return[2]}})})},e.prototype.decodeOnceFromVideoDevice=function(e,t){return xx(this,void 0,void 0,function(){var n;return yx(this,function(r){switch(r.label){case 0:return n={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(n,t)];case 1:return[2,r.sent()]}})})},e.prototype.decodeOnceFromVideoElement=function(t){return xx(this,void 0,void 0,function(){var n,r;return yx(this,function(o){switch(o.label){case 0:if(!t)throw new Tc("A video element must be provided.");return n=e.prepareVideoElement(t),r=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(n,r)];case 1:return o.sent(),[4,this.scanOneResult(n)];case 2:return[2,o.sent()]}})})},e.prototype.decodeOnceFromVideoUrl=function(t){return xx(this,void 0,void 0,function(){var n,r;return yx(this,function(o){switch(o.label){case 0:if(!t)throw new Tc("An URL must be provided.");(n=e.prepareVideoElement()).src=t,r=this.decodeOnceFromVideoElement(n),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,r];case 2:return[2,o.sent()];case 3:return e.cleanVideoSource(n),[7];case 4:return[2]}})})},e.prototype.scanOneResult=function(e,t,n,r){var o=this;return void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),new Promise(function(a,i){o.scan(e,function(e,o,s){if(e)return a(e),void s.stop();if(o){if(o instanceof hd&&t)return;if(o instanceof Fc&&n)return;if(o instanceof ed&&r)return;s.stop(),i(o)}})})},e.prototype.scan=function(t,n,r){var o=this;e.checkCallbackFnOrThrow(n);var a,i=e.createCaptureCanvas(t);try{a=i.getContext("2d",{willReadFrequently:!0})}catch(iN){a=i.getContext("2d")}if(!a)throw new Error("Couldn't create canvas for visual element scan.");var s,l=function(){a=void 0,i=void 0},c=!1,d={stop:function(){c=!0,clearTimeout(s),l(),r&&r()}},u=function(){if(!c)try{e.drawImageOnCanvas(a,t);var h=o.decodeFromCanvas(i);n(h,void 0,d),s=setTimeout(u,o.options.delayBetweenScanSuccess)}catch(p){if(n(void 0,p,d),p instanceof Fc||p instanceof ed||p instanceof hd)return void(s=setTimeout(u,o.options.delayBetweenScanAttempts));l(),r&&r(p)}};return u(),d},e.prototype._decodeOnLoadImage=function(t){return xx(this,void 0,void 0,function(){return yx(this,function(n){switch(n.label){case 0:return e.isImageLoaded(t)?[3,2]:[4,e._waitImageLoad(t)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(t)]}})})},e.prototype.getUserMedia=function(t){return xx(this,void 0,void 0,function(){var n;return yx(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=r.sent(),e.streamTracker.push(n),[2,n]}})})},e.streamTracker=[],e}(),kx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cx=(function(e){function t(t,n){return e.call(this,new du,t,n)||this}kx(t,e)}(wx),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),jx=(function(e){function t(t,n){return e.call(this,new cp(t),t,n)||this}Cx(t,e)}(wx),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),_x=(function(e){function t(t,n){return e.call(this,new Ep,t,n)||this}jx(t,e)}(wx),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Nx=function(e){function t(t,n){var r=this,o=new Sm;return o.setHints(t),(r=e.call(this,o,t,n)||this).reader=o,r}return _x(t,e),Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Qc.POSSIBLE_FORMATS,e),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t.prototype.setHints=function(e){this.hints=e,this.reader.setHints(this.hints)},t}(wx),Sx=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ex=(function(e){function t(t,n){return e.call(this,new km,t,n)||this}Sx(t,e)}(wx),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Ax=(function(e){function t(t,n){return e.call(this,new bf,t,n)||this}Ex(t,e)}(wx),"http://www.w3.org/2000/svg"),Px=(function(){function e(e){if("string"===typeof e){var t=document.getElementById(e);if(!t)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=t}else this.containerElement=e}e.prototype.write=function(t,n,r,o){if(0===t.length)throw new Dc("Found empty contents");if(n<0||r<0)throw new Dc("Requested dimensions are too small: "+n+"x"+r);var a=o&&void 0!==o.get(Im.MARGIN)?Number.parseInt(o.get(Im.MARGIN).toString(),10):e.QUIET_ZONE_SIZE,i=this.encode(o,t);return this.renderResult(i,n,r,a)},e.prototype.createSVGElement=function(t,n){var r=document.createElementNS(e.SVG_NS,"svg");return r.setAttributeNS(Ax,"width",n.toString()),r.setAttributeNS(Ax,"height",t.toString()),r},e.prototype.createSvgPathPlaceholderElement=function(t,n){var r=document.createElementNS(e.SVG_NS,"path");return r.setAttributeNS(Ax,"d","M0 0h".concat(t,"v").concat(n,"H0z")),r.setAttributeNS(Ax,"fill","none"),r},e.prototype.createSvgRectElement=function(t,n,r,o){var a=document.createElementNS(e.SVG_NS,"rect");return a.setAttributeNS(Ax,"x",t.toString()),a.setAttributeNS(Ax,"y",n.toString()),a.setAttributeNS(Ax,"height",r.toString()),a.setAttributeNS(Ax,"width",o.toString()),a.setAttributeNS(Ax,"fill","#000000"),a},e.prototype.encode=function(e,t){var n=Bp.L;if(e&&void 0!==e.get(Im.ERROR_CORRECTION)){var r=e.get(Im.ERROR_CORRECTION).toString();n=Bp.fromString(r)}return Gm.encode(t,n,e)},e.prototype.renderResult=function(e,t,n,r){var o=e.getMatrix();if(null===o)throw new Hd;var a=o.getWidth(),i=o.getHeight(),s=a+2*r,l=i+2*r,c=Math.max(t,s),d=Math.max(n,l),u=Math.min(Math.floor(c/s),Math.floor(d/l)),h=Math.floor((c-a*u)/2),p=Math.floor((d-i*u)/2),f=this.createSVGElement(c,d),m=this.createSvgPathPlaceholderElement(t,n);f.appendChild(m),this.containerElement.appendChild(f);for(var g=0,x=p;g<i;g++,x+=u)for(var y=0,v=h;y<a;y++,v+=u)if(1===o.get(y,g)){var b=this.createSvgRectElement(v,x,u,u);f.appendChild(b)}return f},e.QUIET_ZONE_SIZE=4,e.SVG_NS="http://www.w3.org/2000/svg"}(),"http://www.w3.org/2000/svg");!function(){function e(){}e.prototype.write=function(t,n,r,o){if(0===t.length)throw new Dc("Found empty contents");if(n<0||r<0)throw new Dc("Requested dimensions are too small: "+n+"x"+r);var a=Bp.L,i=e.QUIET_ZONE_SIZE;if(o){if(void 0!==o.get(Im.ERROR_CORRECTION)){var s=o.get(Im.ERROR_CORRECTION).toString();a=Bp.fromString(s)}void 0!==o.get(Im.MARGIN)&&(i=Number.parseInt(o.get(Im.MARGIN).toString(),10))}var l=Gm.encode(t,a,o);return this.renderResult(l,n,r,i)},e.prototype.writeToDom=function(e,t,n,r,o){if("string"===typeof e){var a=document.querySelector(e);if(!a)throw new Error("Could no find the target HTML element.");e=a}var i=this.write(t,n,r,o);e instanceof HTMLElement&&e.appendChild(i)},e.prototype.renderResult=function(e,t,n,r){var o=e.getMatrix();if(null===o)throw new Hd;for(var a=o.getWidth(),i=o.getHeight(),s=a+2*r,l=i+2*r,c=Math.max(t,s),d=Math.max(n,l),u=Math.min(Math.floor(c/s),Math.floor(d/l)),h=Math.floor((c-a*u)/2),p=Math.floor((d-i*u)/2),f=this.createSVGElement(c,d),m=0,g=p;m<i;m++,g+=u)for(var x=0,y=h;x<a;x++,y+=u)if(1===o.get(x,m)){var v=this.createSvgRectElement(y,g,u,u);f.appendChild(v)}return f},e.prototype.createSVGElement=function(e,t){var n=document.createElementNS(Px,"svg"),r=e.toString(),o=t.toString();return n.setAttribute("height",o),n.setAttribute("width",r),n.setAttribute("viewBox","0 0 "+r+" "+o),n},e.prototype.createSvgRectElement=function(e,t,n,r){var o=document.createElementNS(Px,"rect");return o.setAttribute("x",e.toString()),o.setAttribute("y",t.toString()),o.setAttribute("height",n.toString()),o.setAttribute("width",r.toString()),o.setAttribute("fill","#000000"),o},e.QUIET_ZONE_SIZE=4}();const Bx={formats:[Pd.EAN_13,Pd.EAN_8,Pd.CODE_128,Pd.QR_CODE],desiredWidth:1280,desiredHeight:720,decodeFPS:15,roiResizeLongSide:600,consensusFrames:2,maxWorkerQueue:2,tryHarderAfter:3,backendFallbackEnabled:!0,backendFallbackURL:"/api/barcode/decode",backendFallbackAfterFailures:2,backendFallbackTimeout:5e3};const Ix=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.video=void 0,this.opts=void 0,this.worker=null,this.pendingWorkerJobs=0,this.lastResults=[],this.roi=null,this.trackingStableCount=0,this._onFound=()=>{},this._onProgress=()=>{},this._onError=()=>{},this._running=!1,this._lastDecodeTime=0,this.stream=null,this.barcodeDetector=null,this.zxingReader=null,this.consecutiveFailures=0,this.backendInFlight=!1,this.backendCircuitOpen=!1,this.lastBackendBitmap=null,this.video=e,this.opts=qe(qe({},Bx),t),"undefined"!==typeof window&&window.BarcodeDetector)try{const e=this.opts.formats.map(e=>this.formatToNative(e)).filter(Boolean);this.barcodeDetector=new window.BarcodeDetector({formats:e}),console.log("[Scanner] BarcodeDetector API available")}catch(iN){console.warn("[Scanner] BarcodeDetector init failed:",iN)}this.initZXing()}formatToNative(e){return{[Pd.EAN_13]:"ean_13",[Pd.EAN_8]:"ean_8",[Pd.UPC_A]:"upc_a",[Pd.UPC_E]:"upc_e",[Pd.CODE_128]:"code_128",[Pd.CODE_39]:"code_39",[Pd.QR_CODE]:"qr_code",[Pd.DATA_MATRIX]:"data_matrix"}[e]||null}initZXing(){try{const e=new Map;e.set(Qc.POSSIBLE_FORMATS,this.opts.formats),e.set(Qc.TRY_HARDER,!1),this.zxingReader=new Nx(e),console.log("[Scanner] ZXing reader initialized")}catch(iN){console.error("[Scanner] ZXing init failed:",iN)}}async start(){try{await this.ensureCamera(),this.startWorker(),this._running=!0,this._onProgress({phase:"started"}),this.loop()}catch(e){throw this._onError(e instanceof Error?e:new Error(String(e))),e}}stop(){this._running=!1,this.worker&&(this.worker.terminate(),this.worker=null),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.video.srcObject=null,this._onProgress({phase:"stopped"})}onFound(e){this._onFound=e}onProgress(e){this._onProgress=e}onError(e){this._onError=e}async ensureCamera(){if(this.stream)return;const e={video:{facingMode:"environment",width:{ideal:this.opts.desiredWidth},height:{ideal:this.opts.desiredHeight}}};this.stream=await navigator.mediaDevices.getUserMedia(e),this.video.srcObject=this.stream,await this.video.play(),this._onProgress({phase:"camera-ready"})}startWorker(){if(!this.worker)try{this.worker=new Worker("/workers/zxing-worker.js"),this.worker.onmessage=this.handleWorkerMessage.bind(this),this.worker.onerror=e=>{console.error("[Scanner] Worker error:",e)},this.worker.postMessage({type:"init",formats:this.opts.formats.map(e=>this.formatToNative(e))})}catch(iN){console.warn("[Scanner] Worker creation failed, using main thread only:",iN)}}handleWorkerMessage(e){const t=e.data;"ready"===t.type?this._onProgress({phase:"worker-ready"}):"processed"===t.type?(this.pendingWorkerJobs=Math.max(0,this.pendingWorkerJobs-1),this.decodeFromLuminance(t.luminanceSource,t.width,t.height)):"result"===t.type&&(this.pendingWorkerJobs=Math.max(0,this.pendingWorkerJobs-1),t.result&&this.accumulateResult(t.result))}async decodeFromLuminance(e,t,n){if(this.zxingReader)try{const r=document.createElement("canvas");r.width=t,r.height=n;const o=r.getContext("2d");if(!o)return;const a=o.createImageData(t,n),i=a.data,s=e.luminances;for(let e=0;e<s.length;e++){const t=4*e;i[t]=i[t+1]=i[t+2]=s[e],i[t+3]=255}o.putImageData(a,0,0);const l=await this.zxingReader.decodeFromCanvas(r);l&&this.accumulateResult({text:l.getText(),format:Pd[l.getBarcodeFormat()],rawValue:l.getText()})}catch(iN){}}accumulateResult(e){const t=e.rawValue||e.text;if(!t)return;const n=Date.now();this.lastResults.push({payload:t,timestamp:n,result:e});this.lastResults=this.lastResults.filter(e=>n-e.timestamp<1500);const r={};for(const o of this.lastResults)r[o.payload]=(r[o.payload]||0)+1;for(const o in r)if(r[o]>=this.opts.consensusFrames){console.log("[Scanner] Consensus reached:",o,"(".concat(r[o],"/").concat(this.opts.consensusFrames,")")),this._onFound({text:o,format:e.format,rawValue:o}),this.lastResults=[];break}}async loop(){const e=1e3/this.opts.decodeFPS;for(;this._running;){const n=performance.now();if(n-this._lastDecodeTime<e){await this.sleep(5);continue}this._lastDecodeTime=n;let r=null;try{r=await createImageBitmap(this.video)}catch(t){console.warn("[Scanner] Capture failed:",t),await this.sleep(30);continue}let o=!1;if(this.barcodeDetector)try{const e=await this.barcodeDetector.detect(r);if(e&&e.length>0){o=!0,this.consecutiveFailures=0;for(const t of e)this.accumulateResult({text:t.rawValue,format:t.format,rawValue:t.rawValue});r.close();continue}}catch(iN){console.warn("[Scanner] BarcodeDetector error:",iN)}if(this.worker&&this.pendingWorkerJobs<this.opts.maxWorkerQueue){const e=this.computeCrop(r.width,r.height);try{const t=await this.createResizedBitmap(r,e,this.opts.roiResizeLongSide);this.pendingWorkerJobs++,this.worker.postMessage({type:"decode",image:t},[t])}catch(iN){console.warn("[Scanner] Resize failed:",iN)}}else try{if(this.zxingReader){const e=document.createElement("canvas");e.width=r.width,e.height=r.height;const t=e.getContext("2d");if(t){t.drawImage(r,0,0);const n=await this.zxingReader.decodeFromCanvas(e);n&&(o=!0,this.consecutiveFailures=0,this.accumulateResult({text:n.getText(),format:Pd[n.getBarcodeFormat()],rawValue:n.getText()}))}}}catch(iN){}o||(this.consecutiveFailures++,this.opts.backendFallbackEnabled&&this.consecutiveFailures>=this.opts.backendFallbackAfterFailures&&!this.backendInFlight&&!this.backendCircuitOpen&&this.tryBackendFallback(r).catch(()=>{})),r.close(),await this.sleep(1)}}computeCrop(e,t){if(this.roi&&this.trackingStableCount>0)return this.roi;const n=Math.floor(.75*Math.min(e,t));return{x:Math.floor((e-n)/2),y:Math.floor((t-n)/2),w:n,h:n}}async createResizedBitmap(e,t,n){const{x:r,y:o,w:a,h:i}=t,s=await createImageBitmap(e,r,o,a,i),l=Math.max(a,i),c=Math.min(1,n/l),d=Math.max(1,Math.round(a*c)),u=Math.max(1,Math.round(i*c));let h;if("undefined"!==typeof OffscreenCanvas){const e=new OffscreenCanvas(d,u),t=e.getContext("2d");t?(t.drawImage(s,0,0,d,u),h=await createImageBitmap(e)):h=s}else{const e=document.createElement("canvas");e.width=d,e.height=u;const t=e.getContext("2d");t?(t.drawImage(s,0,0,d,u),h=await createImageBitmap(e)):h=s}return s.close(),h}sleep(e){return new Promise(t=>setTimeout(t,e))}async tryBackendFallback(e){if(!this.backendInFlight&&!this.backendCircuitOpen&&this.opts.backendFallbackEnabled){this.backendInFlight=!0,this._onProgress({phase:"backend-fallback",data:{failures:this.consecutiveFailures}});try{const t=this.computeCrop(e.width,e.height),n=await createImageBitmap(e,t.x,t.y,t.w,t.h),r=document.createElement("canvas");r.width=n.width,r.height=n.height;const o=r.getContext("2d");if(!o)return void n.close();o.drawImage(n,0,0),n.close();const a=await new Promise(e=>{r.toBlob(e,"image/webp",.75)});if(!a)return void console.warn("[Scanner] Failed to create blob");const i=new FormData;i.append("file",a,"roi.webp");const s=new AbortController,l=setTimeout(()=>s.abort(),this.opts.backendFallbackTimeout),c=await fetch(this.opts.backendFallbackURL,{method:"POST",body:i,signal:s.signal});if(clearTimeout(l),!c.ok)throw new Error("Backend error: ".concat(c.status));const d=await c.json();if(d.ok&&d.results&&d.results.length>0){const e=d.results[0];console.log("[Scanner] Backend found:",e.text,"(".concat(d.latency_ms,"ms, path: ").concat(d.path,")")),this._onProgress({phase:"backend-success",data:{latency:d.latency_ms,cached:d.cached,path:d.path}}),this.accumulateResult({text:e.text,format:e.type,rawValue:e.text}),this.consecutiveFailures=0}else console.log("[Scanner] Backend returned no results"),this._onProgress({phase:"backend-no-result"})}catch(t){console.error("[Scanner] Backend fallback error:",t),this._onProgress({phase:"backend-error",data:{error:String(t)}}),this.backendCircuitOpen=!0,setTimeout(()=>{this.backendCircuitOpen=!1,console.log("[Scanner] Backend circuit breaker reset")},3e4)}finally{this.backendInFlight=!1}}}},Tx=e=>{let{isActive:n,onToggle:r,onBarcodeDetected:o,cornerColor:a="yellow",showManualInput:i=!1}=e;const s=(0,t.useRef)(null),l=(0,t.useRef)(null),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),m="orange"===a?"border-orange-500":"border-yellow-400",g=(0,t.useRef)(""),x=(0,t.useRef)(0),y=(0,t.useRef)(o);return(0,t.useEffect)(()=>{y.current=o},[o]),(0,t.useEffect)(()=>{if(n&&s.current){d(!0),h("");const e=async()=>{try{l.current=new Ix(s.current,{desiredWidth:1280,desiredHeight:720,decodeFPS:20,roiResizeLongSide:600,consensusFrames:1}),l.current.onFound(e=>{const t=Date.now(),n=e.text;n===g.current&&t-x.current<2e3?console.log("[Scanner] DEBOUNCED - same barcode within 2s:",n):(g.current=n,x.current=t,console.log("[Scanner] NEW SCAN:",n),y.current(n))}),l.current.onProgress(e=>{"camera-ready"===e.phase&&d(!1)}),l.current.onError(e=>{console.error("[ScannerSection] Error:",e),h(e.message||"Gagal mengakses kamera"),d(!1)}),await l.current.start()}catch(e){console.error("[ScannerSection] Init error:",e),h(e.message||"Gagal memulai scanner"),d(!1)}};e()}return()=>{l.current&&(l.current.stop(),l.current=null)}},[n]),n?(0,Fe.jsxs)("div",{className:"scanner-active relative bg-black",children:[(0,Fe.jsx)("video",{ref:s,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-48 object-cover"}),c&&(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:(0,Fe.jsxs)("div",{className:"text-white text-center",children:[(0,Fe.jsxs)("svg",{className:"w-8 h-8 mx-auto mb-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),(0,Fe.jsx)("span",{className:"text-sm",children:"Memulai kamera..."})]})}),u&&(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80",children:(0,Fe.jsxs)("div",{className:"text-white text-center px-4",children:[(0,Fe.jsx)("div",{className:"text-red-400 mb-2",children:"\u26a0\ufe0f"}),(0,Fe.jsx)("p",{className:"text-sm mb-3",children:u}),(0,Fe.jsx)("button",{onClick:r,className:"bg-gray-700 text-white px-4 py-2 rounded-lg text-sm",children:"Tutup"})]})}),!c&&!u&&(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,Fe.jsxs)("div",{className:"relative w-64 h-24",children:[(0,Fe.jsx)("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 ".concat(m)}),(0,Fe.jsx)("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 ".concat(m)}),(0,Fe.jsx)("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 ".concat(m)}),(0,Fe.jsx)("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 ".concat(m)})]})}),(0,Fe.jsx)("button",{onClick:r,className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white px-3 py-1.5 rounded-full text-sm transition-colors",children:"\u2715 Tutup"}),i&&(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:p,onChange:e=>(e=>{const t=e.replace(/\D/g,"").slice(0,13);f(t),13===t.length&&(o(t),f(""))})(e.target.value),placeholder:"Input barcode atau ketik nama produk",className:"w-full px-4 py-3 text-sm bg-white text-gray-700 border-t border-gray-200 focus:outline-none placeholder:text-gray-400",maxLength:13})]}):(0,Fe.jsx)("div",{className:"scanner-trigger px-4 py-2",style:{backgroundColor:"transparent"},children:(0,Fe.jsxs)("button",{onClick:r,className:"w-full bg-amber-500 hover:bg-amber-600 active:bg-amber-700 text-white py-4 rounded-xl flex items-center justify-center gap-2 text-lg font-semibold transition-colors border border-amber-400",style:{boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[(0,Fe.jsx)("img",{src:"/icons/CAM.png",alt:"Camera",style:{width:"24px",height:"24px"}}),"Scan Barcode"]})})},Mx="milkyhoop_draft_purchase",Dx="#F97316",Rx="#737373",Ox="#D4D4D4",Fx="#E5E5E5",Lx="#F5F5F5",zx="#FFFFFF",Wx="#262626",Vx="#22C55E",Ux={karton:"pcs",dus:"pcs",box:"pcs",slop:"bungkus",bal:"bungkus",koli:"pcs",pack:"pcs",lusin:"pcs",kg:"kg",liter:"liter"},Hx=["karton","dus","box","slop","bal","koli","pack","lusin","kg","liter"],Gx=["pcs","lembar","unit","liter","mili liter","gram","kg","botol","sachet","bungkus"],Xx=e=>new Intl.NumberFormat("id-ID",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Kx=e=>{const t=e.replace(/[^\d]/g,"");return parseInt(t,10)||0},Yx=e=>e.toISOString().split("T")[0],qx=()=>{const e=new Date;return e.setDate(e.getDate()+1),Yx(e)},Zx=()=>({type:"wholesales",supplier:"",date:Yx(new Date),product:"",qty:1,unit:"karton",unitsPerPack:void 0,pricePerUnit:0,discountType:"none",discountValue:void 0,notes:"",paymentMethod:"transfer",dueDate:void 0,includePPN:!1}),Jx=e=>{let{isOpen:n,onClose:r,isMobile:o=!1,isEmbedded:a=!1,onTransactionComplete:i,scannedProductData:s}=e;Q(),Z();const[l,c]=(0,t.useState)(1),[d,u]=(0,t.useState)(Zx()),[h,p]=(0,t.useState)({}),[f,m]=(0,t.useState)({}),[g,x]=(0,t.useState)(!1),[y,v]=(0,t.useState)("idle"),[b,w]=(0,t.useState)(!1),[k,C]=(0,t.useState)(!1),[j,_]=(0,t.useState)(""),[N,S]=(0,t.useState)(""),[E,A]=(0,t.useState)("right"),[P,B]=(0,t.useState)(!1),[I,T]=(0,t.useState)(null),[M,D]=(0,t.useState)(!1),[R,O]=(0,t.useState)(!1),[F,L]=(0,t.useState)(!1),[z,W]=(0,t.useState)(!1),[V,U]=(0,t.useState)(null),[H,G]=(0,t.useState)(1),[X,K]=(0,t.useState)(0),[Y,q]=(0,t.useState)(null);(0,t.useEffect)(()=>{if(console.log("[PurchaseForm] scannedProductData effect:",{isOpen:n,scannedProductData:s,lastProcessedBarcode:I}),n&&s){const{name:e,barcode:t,unit:n,units_per_pack:r,harga_jual:o,last_price:a}=s;if(t===I)return void console.log("[PurchaseForm] Skipping - already processed barcode:",t);const i=setTimeout(()=>{console.log("[PurchaseForm] AUTO-FILLING from scan:",{name:e,barcode:t,unit:n,units_per_pack:r,harga_jual:o,last_price:a}),u(t=>qe(qe(qe(qe({},t),{},{product:e},n?{unit:n}:{}),r&&r>0?{unitsPerPack:r}:{}),a&&a>0?{pricePerUnit:a}:{})),_(""),T(t),o&&o>0&&q(o),c(e=>1===e?2:e)},150);return()=>clearTimeout(i)}},[n,s,I]),(0,t.useEffect)(()=>{n||(console.log("[PurchaseForm] Form closed - resetting lastProcessedBarcode"),T(null))},[n]);const[J,$]=(0,t.useState)([]),[ee,te]=(0,t.useState)([]),[ne,re]=(0,t.useState)(!1),[oe,ae]=(0,t.useState)(!1),ie=(0,t.useRef)(null),se=(0,t.useRef)(null),le=(0,t.useRef)(null),ce=(0,t.useRef)(null),de=(0,t.useRef)(null);(0,t.useEffect)(()=>{var e;const t=()=>{const e=window.visualViewport;if(e&&e.height<.75*window.innerHeight){const e=document.activeElement;!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center"})},100)}};return null===(e=window.visualViewport)||void 0===e||e.addEventListener("resize",t),()=>{var e;return null===(e=window.visualViewport)||void 0===e?void 0:e.removeEventListener("resize",t)}},[]);(0,t.useEffect)(()=>(ce.current&&clearTimeout(ce.current),j&&b?ce.current=setTimeout(()=>{(async e=>{if(e.length<1)$([]);else{re(!0);try{const t=localStorage.getItem("access_token"),n=await fetch("/api/products/search?q=".concat(encodeURIComponent(e),"&limit=10"),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();$(e.suggestions||[])}else $([])}catch(t){console.error("Failed to fetch product suggestions:",t),$([])}finally{re(!1)}}})(j)},300):$([]),()=>{ce.current&&clearTimeout(ce.current)}),[j,b]),(0,t.useEffect)(()=>(de.current&&clearTimeout(de.current),N&&k?de.current=setTimeout(()=>{(async e=>{if(e.length<1)te([]);else{ae(!0);try{const t=localStorage.getItem("access_token"),n=await fetch("/api/suppliers/search?q=".concat(encodeURIComponent(e),"&limit=10"),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();te(e.suggestions||[])}else te([])}catch(t){console.error("Failed to fetch supplier suggestions:",t),te([])}finally{ae(!1)}}})(N)},300):te([]),()=>{de.current&&clearTimeout(de.current)}),[N,k]);const ue=(0,t.useMemo)(()=>{const e=d.qty*d.pricePerUnit;let t=0;"amount"===d.discountType&&d.discountValue?t=d.discountValue:"percentage"===d.discountType&&d.discountValue&&(t=e*d.discountValue/100);const n=Math.max(0,e-t),r=d.includePPN?.11*n:0;return{subtotal:n,ppn:r,total:n+r,discount:t}},[d.qty,d.pricePerUnit,d.discountType,d.discountValue,d.includePPN]),he=(0,t.useMemo)(()=>{const e="wholesales"===d.type?Ux[d.unit]||"pcs":d.unit,t=d.unitsPerPack||1,n="wholesales"===d.type&&t>0?d.pricePerUnit/t:d.pricePerUnit,r="wholesales"===d.type?d.qty*t:d.qty,o=Y?Y-n:0;return{retailUnit:e,estimatedHppPerUnit:n,estimatedMargin:o,estimatedMarginPercent:n>0&&Y?o/n*100:0,totalUnits:r,estimatedTotalProfit:o*r}},[d.type,d.unit,d.pricePerUnit,d.unitsPerPack,d.qty,Y]),pe=(0,t.useMemo)(()=>{const e=he.retailUnit,t=he.totalUnits,n=ue.total,r=t>0?n/t:0,o=Y?Y-r:0;return{retailUnit:e,finalHppPerUnit:r,finalMargin:o,finalMarginPercent:r>0&&Y?o/r*100:0,totalUnits:t,finalTotalProfit:o*t}},[ue.total,he.retailUnit,he.totalUnits,Y]);he.retailUnit,he.estimatedHppPerUnit,he.estimatedMargin,he.estimatedMarginPercent,he.totalUnits,he.estimatedTotalProfit;(0,t.useEffect)(()=>{if(2===l&&!Y&&pe.finalHppPerUnit>0){const e=Math.round(1.1*pe.finalHppPerUnit);q(e)}},[l,pe.finalHppPerUnit]),(0,t.useEffect)(()=>{if(n){const e=localStorage.getItem(Mx);if(e)try{const t=JSON.parse(e);Date.now()-t.timestamp<864e5?t.fromScan?(u(t.formData),c(t.currentStep),localStorage.removeItem(Mx)):B(!0):localStorage.removeItem(Mx)}catch(sN){localStorage.removeItem(Mx)}}},[n]),(0,t.useEffect)(()=>{n&&setTimeout(()=>{1===l&&le.current?le.current.focus():se.current&&se.current.focus()},300)},[n,l]),(0,t.useEffect)(()=>{const e=e=>{"Escape"===e.key&&n&&r()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,r]),(0,t.useEffect)(()=>(document.body.style.overflow=n?"hidden":"",()=>{document.body.style.overflow=""}),[n]);const fe=e=>{const t={};return 1===e&&(d.type||(t.type="Tipe pembelian wajib dipilih"),d.date||(t.date="Tanggal wajib diisi"),d.product&&""!==d.product.trim()||(t.product="Produk wajib dipilih"),(!d.qty||d.qty<1)&&(t.qty="Qty minimal 1"),(!d.pricePerUnit||d.pricePerUnit<=0)&&(t.pricePerUnit="Harga wajib diisi"),"wholesales"===d.type&&(!d.unitsPerPack||d.unitsPerPack<=0)&&(t.unitsPerPack="Isi per unit wajib diisi untuk wholesales")),2===e&&("percentage"===d.discountType&&d.discountValue&&(d.discountValue<0||d.discountValue>100)&&(t.discountValue="Diskon harus 0-100%"),d.paymentMethod||(t.paymentMethod="Metode bayar wajib dipilih"),"kredit"!==d.paymentMethod||d.dueDate||(t.dueDate="Jatuh tempo wajib diisi")),p(t),0===Object.keys(t).length},me=e=>{m(t=>qe(qe({},t),{},{[e]:!0}))},ge=(e,t)=>{u(n=>qe(qe({},n),{},{[e]:t})),h[e]&&p(t=>qe(qe({},t),{},{[e]:void 0}))},xe=()=>{r(),setTimeout(()=>{u(Zx()),c(1),m({}),p({}),v("idle"),_(""),S(""),B(!1),q(null)},300)};if(!n)return null;const ye=e=>{if(1===e){const e=!!d.type,t=!!d.product&&d.product.trim().length>0,n=d.qty>=1,r=!!d.date,o=d.pricePerUnit>0;if("wholesales"===d.type){const a="number"===typeof d.unitsPerPack&&d.unitsPerPack>0;return e&&t&&n&&r&&o&&a}return e&&t&&n&&r&&o}if(2===e){return!!d.paymentMethod&&("kredit"!==d.paymentMethod||!!d.dueDate)}return!1},ve=a?"h-full bg-white flex flex-col":"fixed inset-0 z-[100] flex items-end sm:items-center justify-center";return(0,Fe.jsxs)("div",{className:ve,children:[!a&&(0,Fe.jsx)("div",{className:"absolute inset-0 bg-black/20",onClick:xe}),P&&(0,Fe.jsx)("div",{className:"absolute inset-0 z-[101] flex items-center justify-center",children:(0,Fe.jsxs)("div",{className:"bg-white rounded-xl p-5 mx-4 max-w-sm shadow-2xl",children:[(0,Fe.jsx)("h3",{className:"text-base font-semibold mb-2",style:{color:"#262626"},children:"Lanjutkan Draft?"}),(0,Fe.jsx)("p",{className:"text-sm mb-4",style:{color:"#737373"},children:"Anda memiliki draft yang belum selesai. Lanjutkan atau mulai baru?"}),(0,Fe.jsxs)("div",{className:"flex gap-2",children:[(0,Fe.jsx)("button",{onClick:()=>{localStorage.removeItem(Mx),B(!1)},className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Mulai Baru"}),(0,Fe.jsx)("button",{onClick:()=>{const e=localStorage.getItem(Mx);if(e){const t=JSON.parse(e);u(t.formData),c(t.currentStep)}B(!1)},className:"flex-1 px-4 py-2.5 text-white rounded-lg text-sm font-medium",style:{background:Dx},children:"Lanjutkan"})]})]})}),(0,Fe.jsxs)("div",{ref:ie,className:a?"h-full bg-white flex flex-col overflow-hidden":"relative w-full bg-white shadow-2xl animate-slide-up sm:animate-popup-slide ".concat(o?"rounded-t-2xl max-h-[90vh]":"rounded-2xl max-w-[600px] max-h-[85vh] mx-4"),style:a?{}:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15)"},children:[(0,Fe.jsxs)("div",{className:"sticky top-0 bg-white border-b px-4 py-3 flex items-center justify-between z-10 ".concat(a?"":"rounded-t-2xl"),style:{borderColor:"#E5E5E5"},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("button",{onClick:xe,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Ox},children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain"})}),(0,Fe.jsx)("span",{className:"font-semibold",style:{color:"#525252",fontSize:"15px"},children:"Pembelian"})]}),(0,Fe.jsx)("div",{className:"flex items-center gap-2",style:{background:"#F5F5F5",borderRadius:"12px",padding:"6px 12px"},children:(0,Fe.jsxs)("span",{style:{fontSize:"12px",fontWeight:600,color:"#737373"},children:[l,"/",2]})})]}),(0,Fe.jsx)("div",{className:"px-4 pt-2 pb-1",children:(0,Fe.jsx)("div",{className:"h-1 rounded-full overflow-hidden",style:{background:"#E5E5E5"},children:(0,Fe.jsx)("div",{className:"h-full transition-all duration-300 ease-out",style:{width:"".concat(l/2*100,"%"),background:"#F97316"}})})}),(0,Fe.jsxs)("div",{className:"overflow-y-auto px-4 sm:px-6 py-4 ".concat(a?"flex-1":""),style:a?{}:{maxHeight:o?"calc(90vh - 180px)":"calc(85vh - 180px)"},children:[1===l&&(0,Fe.jsxs)("div",{className:"space-y-3 animate-fade-in",children:[(0,Fe.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",style:{boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,Fe.jsxs)("div",{style:{padding:"8px 12px",borderBottom:"1px solid #E5E5E5",background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:"#737373"},children:["Tipe Pembelian ",(0,Fe.jsx)("span",{style:{color:"#EF4444"},children:"*"})]}),(0,Fe.jsx)("div",{className:"grid grid-cols-2",children:["wholesales","eceran"].map((e,t)=>(0,Fe.jsxs)("button",{type:"button",ref:"wholesales"===e?le:void 0,onClick:()=>{ge("type",e),ge("unit","eceran"===e?"pcs":"karton")},className:"flex items-center justify-center gap-2 py-3 px-4 transition-all",style:{background:d.type===e?"#FFF7ED":t%2===0?zx:Lx,borderBottom:d.type===e?"2px solid ".concat(Dx):"none",borderRight:0===t?"1px solid #E5E5E5":"none"},children:[(0,Fe.jsx)("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center",style:{borderColor:d.type===e?Dx:"#9CA3AF"},children:d.type===e&&(0,Fe.jsx)("div",{className:"w-2 h-2 rounded-full",style:{background:Dx}})}),(0,Fe.jsx)("span",{className:"text-sm font-medium",style:{color:d.type===e?Dx:Rx},children:"wholesales"===e?"Wholesales":"Eceran"})]},e))}),h.type&&(0,Fe.jsx)("p",{className:"px-3 py-2 text-xs text-red-500",children:h.type})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("label",{htmlFor:"product",className:"block text-xs font-medium mb-1",style:{color:"#525252"},children:"Produk"}),(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fe.jsxs)("div",{className:"relative flex-1",children:[(0,Fe.jsx)("input",{id:"product",name:"product",ref:se,type:"text",value:j||d.product,onChange:e=>{_(e.target.value),w(!0)},onFocus:()=>w(!0),onBlur:()=>{setTimeout(()=>w(!1),200),me("product")},placeholder:"Cari produk...","aria-invalid":!!h.product,className:"w-full px-3 py-2.5 pr-8 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(h.product&&f.product?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Fe.jsx)("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,Fe.jsx)("button",{type:"button",onClick:()=>D(!M),className:"p-2.5 border rounded-lg transition-colors ".concat(M?"border-orange-500 bg-orange-50 text-orange-600":"border-gray-300 text-gray-500 hover:text-gray-700 hover:bg-gray-50 active:bg-gray-100"),"aria-label":"Scan barcode",title:"Scan barcode produk",children:(0,Fe.jsx)("img",{src:"/icons/CAM.png",alt:"Camera",style:{width:"20px",height:"20px"}})})]}),b&&(0,Fe.jsxs)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[ne?(0,Fe.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:(0,Fe.jsxs)("svg",{className:"animate-spin w-4 h-4 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):J.length>0?J.map((e,t)=>(0,Fe.jsx)("button",{type:"button",onClick:()=>{ge("product",e.name),ge("unit",e.unit),e.last_price&&ge("pricePerUnit",e.last_price),e.units_per_pack&&e.units_per_pack>0&&ge("unitsPerPack",e.units_per_pack),e.harga_jual&&e.harga_jual>0&&q(e.harga_jual),_(""),w(!1)},className:"w-full text-left px-3 py-3 text-sm text-gray-800 hover:bg-gray-50 transition-colors",children:(0,Fe.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",children:e.name}),(0,Fe.jsxs)("div",{className:"text-xs text-gray-500",children:[e.unit,e.last_price&&" \xb7 Rp ".concat(Xx(e.last_price))]})]}),(0,Fe.jsxs)("span",{className:"text-xs text-gray-400",children:[e.usage_count,"x"]})]})},"".concat(e.name,"-").concat(e.unit,"-").concat(t))):j&&j.length>0?(0,Fe.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:"Tidak ada produk ditemukan"}):null,j&&(0,Fe.jsxs)("button",{type:"button",onClick:()=>{ge("product",j),_(""),w(!1)},className:"w-full text-left px-3 py-3 text-sm text-blue-600 hover:bg-blue-50 transition-colors flex items-center gap-1 border-t border-gray-100",children:[(0,Fe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),'Produk Baru: "',j,'"']})]}),h.product&&f.product&&(0,Fe.jsxs)("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[(0,Fe.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Fe.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),h.product]}),M&&(0,Fe.jsxs)("div",{className:"mt-2 rounded-xl overflow-hidden border border-gray-200",children:[(0,Fe.jsx)(Tx,{isActive:M,onToggle:()=>D(!1),onBarcodeDetected:async e=>{console.log("[PurchaseForm] Barcode scanned:",e),O(!0);try{const t=localStorage.getItem("access_token"),n=await fetch("/api/products/barcode/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const t=await n.json();console.log("[PurchaseForm] Product found:",t),u(e=>qe(qe(qe(qe({},e),{},{product:t.nama_produk||t.name},t.satuan||t.unit?{unit:t.satuan||t.unit}:{}),t.units_per_pack&&t.units_per_pack>0?{unitsPerPack:t.units_per_pack}:{}),t.last_price&&t.last_price>0?{pricePerUnit:t.last_price}:{})),_(""),T(e),t.harga_jual&&t.harga_jual>0&&q(t.harga_jual),D(!1)}else 404===n.status?(console.log("[PurchaseForm] Product not found for barcode:",e),alert("Produk tidak ditemukan untuk barcode: ".concat(e))):(console.error("[PurchaseForm] Product lookup error:",n.status),alert("Gagal mencari produk. Silakan coba lagi."))}catch(t){console.error("[PurchaseForm] Product lookup error:",t),alert("Gagal mencari produk. Silakan coba lagi.")}finally{O(!1)}},cornerColor:"orange",showManualInput:!0}),R&&(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-30",children:(0,Fe.jsxs)("div",{className:"bg-white rounded-xl px-6 py-4 flex flex-col items-center gap-2",children:[(0,Fe.jsxs)("svg",{className:"animate-spin w-6 h-6 text-orange-500",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),(0,Fe.jsx)("span",{className:"text-sm text-gray-600",children:"Mencari produk..."})]})})]})]}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{htmlFor:"qty",className:"block text-xs font-medium mb-1",style:{color:"#525252"},children:"Qty"}),(0,Fe.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Fe.jsx)("button",{type:"button",onClick:()=>ge("qty",Math.max(1,d.qty-1)),className:"flex-shrink-0 rounded-full flex items-center justify-center font-semibold text-sm",style:{width:"32px",height:"32px",minWidth:"32px",minHeight:"32px",background:Fx,color:"#525252"},"aria-label":"Decrease quantity",children:"\u2212"}),(0,Fe.jsx)("input",{id:"qty",name:"qty",type:"number",min:"1",value:d.qty,onChange:e=>ge("qty",parseInt(e.target.value)||1),onBlur:()=>me("qty"),"aria-invalid":!!h.qty,className:"w-16 py-2.5 border rounded-lg text-sm text-gray-900 text-center focus:outline-none focus:ring-1 ".concat(h.qty&&f.qty?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Fe.jsx)("button",{type:"button",onClick:()=>ge("qty",d.qty+1),className:"flex-shrink-0 rounded-full flex items-center justify-center font-semibold text-sm text-white",style:{width:"32px",height:"32px",minWidth:"32px",minHeight:"32px",background:Dx},"aria-label":"Increase quantity",children:"+"})]}),h.qty&&f.qty&&(0,Fe.jsx)("p",{className:"mt-1 text-xs text-red-500",children:h.qty})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{htmlFor:"unit",className:"block text-xs font-medium mb-1",style:{color:"#525252"},children:"Satuan"}),(0,Fe.jsx)("select",{id:"unit",value:d.unit,onChange:e=>ge("unit",e.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm text-gray-900 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500 bg-white",children:("eceran"===d.type?Gx:Hx).map(e=>(0,Fe.jsx)("option",{value:e,children:e},e))})]})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsxs)("label",{htmlFor:"supplier",className:"block text-xs font-medium mb-1",style:{color:"#525252"},children:["Supplier ",(0,Fe.jsx)("span",{className:"text-gray-400",children:"(opsional)"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("input",{id:"supplier",type:"text",value:N||d.supplier,onChange:e=>{S(e.target.value),C(!0)},onFocus:()=>C(!0),onBlur:()=>setTimeout(()=>C(!1),200),placeholder:"Pilih supplier...",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500"}),(0,Fe.jsx)("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),k&&(0,Fe.jsxs)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[oe?(0,Fe.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:(0,Fe.jsxs)("svg",{className:"animate-spin w-4 h-4 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):ee.length>0?ee.map((e,t)=>(0,Fe.jsxs)("button",{type:"button",onClick:()=>{ge("supplier",e.name),S(""),C(!1)},className:"w-full text-left px-3 py-3 text-sm text-gray-800 hover:bg-gray-50 transition-colors flex justify-between items-center",children:[(0,Fe.jsx)("span",{children:e.name}),(0,Fe.jsxs)("span",{className:"text-xs text-gray-400",children:[e.usage_count,"x"]})]},"".concat(e.name,"-").concat(t))):N&&N.length>0?(0,Fe.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:"Tidak ada supplier ditemukan"}):null,N&&!ee.find(e=>e.name.toLowerCase()===N.toLowerCase())&&(0,Fe.jsxs)("button",{type:"button",onClick:()=>{ge("supplier",N),S(""),C(!1)},className:"w-full text-left px-3 py-3 text-sm text-blue-600 hover:bg-blue-50 transition-colors flex items-center gap-1 border-t border-gray-100",children:[(0,Fe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),'Gunakan "',N,'"']})]})]}),(0,Fe.jsxs)("div",{className:"w-full",children:[(0,Fe.jsxs)("label",{htmlFor:"date",className:"block text-xs font-medium mb-1",style:{color:"#525252"},children:["Tanggal ",(0,Fe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Fe.jsx)("div",{className:"relative w-full",children:(0,Fe.jsx)("input",{id:"date",type:"date",value:d.date,onChange:e=>ge("date",e.target.value),onBlur:()=>me("date"),className:"w-full px-3 py-2.5 border rounded-lg text-sm text-gray-900 focus:outline-none focus:ring-1 appearance-none box-border ".concat(h.date&&f.date?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500"),style:{maxWidth:"100%"}})}),h.date&&f.date&&(0,Fe.jsx)("p",{className:"mt-1 text-xs text-red-500",children:h.date})]})]}),2===l&&(0,Fe.jsxs)("div",{className:"space-y-3 animate-fade-in",children:[(0,Fe.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",style:{boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,Fe.jsx)("div",{style:{padding:"8px 12px",borderBottom:"1px solid #E5E5E5",background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:"#737373"},children:"Produk"}),(0,Fe.jsx)("div",{className:"px-3 py-2.5",style:{background:zx},children:(0,Fe.jsx)("span",{className:"text-sm font-semibold",style:{color:Wx},children:d.product})}),(0,Fe.jsxs)("div",{className:"flex justify-between items-center px-3 py-2.5",style:{background:Lx},children:[(0,Fe.jsxs)("span",{className:"text-sm",style:{color:Rx},children:["HPP Final per ",pe.retailUnit]}),(0,Fe.jsxs)("span",{className:"text-sm font-semibold",style:{color:Wx},children:["Rp ",Xx(Math.round(pe.finalHppPerUnit))]})]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{htmlFor:"hargaJual",className:"block text-xs font-medium mb-1",style:{color:"#525252"},children:["Harga Jual ",(0,Fe.jsx)("span",{className:"text-gray-400",children:"(ketik atau geser slider)"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Rp"}),(0,Fe.jsx)("input",{id:"hargaJual",type:"text",inputMode:"numeric",value:Y?Xx(Y):"",onChange:e=>q(Kx(e.target.value)||null),placeholder:"Masukkan harga jual",className:"w-full pl-10 pr-16 py-2.5 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 border-gray-300 focus:border-gray-500 focus:ring-gray-500"}),(0,Fe.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["/",pe.retailUnit]})]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Fe.jsx)("label",{className:"text-xs font-medium",style:{color:"#525252"},children:"Margin"}),(0,Fe.jsxs)("span",{className:"text-base font-bold",style:{color:"#16A34A"},children:[Y&&pe.finalHppPerUnit>0?Math.round((Y-pe.finalHppPerUnit)/pe.finalHppPerUnit*100):0,"%"]})]}),(0,Fe.jsx)("input",{type:"range",min:"1",max:"100",value:Y&&pe.finalHppPerUnit>0?Math.max(1,Math.min(100,Math.round((Y-pe.finalHppPerUnit)/pe.finalHppPerUnit*100))):10,onChange:e=>{const t=parseInt(e.target.value),n=Math.round(pe.finalHppPerUnit*(1+t/100));q(n)},className:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-gradient-to-r from-red-300 via-yellow-300 to-green-400",style:{accentColor:"#16a34a"}}),(0,Fe.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[(0,Fe.jsx)("span",{children:"1%"}),(0,Fe.jsx)("span",{children:"50%"}),(0,Fe.jsx)("span",{children:"100%"})]})]}),Y&&Y>0&&(0,Fe.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",style:{boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,Fe.jsx)("div",{style:{padding:"8px 12px",borderBottom:"1px solid #E5E5E5",background:pe.finalMarginPercent>=10?"#DCFCE7":"#FEF3C7",fontSize:"12px",fontWeight:600,color:pe.finalMarginPercent>=10?Vx:"#D97706"},children:pe.finalMarginPercent>=10?"\u2713 Margin Sehat":"\u26a0 Margin Rendah"}),(0,Fe.jsxs)("div",{className:"flex justify-between items-center px-3 py-2.5",style:{background:zx},children:[(0,Fe.jsxs)("span",{className:"text-sm",style:{color:Rx},children:["Profit per ",pe.retailUnit]}),(0,Fe.jsxs)("span",{className:"text-sm font-semibold",style:{color:Vx},children:["Rp ",Xx(Math.round(pe.finalMargin))," (",pe.finalMarginPercent.toFixed(0),"%)"]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between items-center px-3 py-2.5",style:{background:Lx},children:[(0,Fe.jsx)("span",{className:"text-sm",style:{color:Rx},children:"Total Profit"}),(0,Fe.jsxs)("span",{className:"text-sm font-bold",style:{color:Vx},children:["Rp ",Xx(Math.round(pe.finalTotalProfit))]})]}),pe.finalMarginPercent<0&&(0,Fe.jsx)("div",{className:"px-3 py-2 text-xs",style:{background:"#FEF2F2",color:"#DC2626"},children:"\u26a0 RUGI! Harga jual lebih rendah dari HPP."})]}),"success"===y&&(0,Fe.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[(0,Fe.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Fe.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,Fe.jsx)("span",{className:"text-sm text-green-700",children:"Berhasil disimpan!"})]}),"error"===y&&(0,Fe.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[(0,Fe.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Fe.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,Fe.jsx)("span",{className:"text-sm text-red-700",children:"Gagal menyimpan, coba lagi"})]}),"session_expired"===y&&(0,Fe.jsxs)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-2",children:[(0,Fe.jsx)("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Fe.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,Fe.jsx)("span",{className:"text-sm text-yellow-700",children:"Session expired. Redirecting to login..."})]})]}),1===l&&(0,Fe.jsxs)("div",{className:"space-y-3 animate-fade-in",children:["wholesales"===d.type?(0,Fe.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{htmlFor:"pricePerUnit",className:"block text-xs font-medium mb-1",style:{color:"#525252"},children:["Harga per ",d.unit]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Rp"}),(0,Fe.jsx)("input",{id:"pricePerUnit",name:"pricePerUnit",type:"text",inputMode:"numeric",value:d.pricePerUnit?Xx(d.pricePerUnit):"",onChange:e=>ge("pricePerUnit",Kx(e.target.value)),onBlur:()=>me("pricePerUnit"),placeholder:"0","aria-invalid":!!h.pricePerUnit,className:"w-full pl-10 pr-12 py-2.5 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(h.pricePerUnit&&f.pricePerUnit?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Fe.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["/",d.unit]})]}),h.pricePerUnit&&f.pricePerUnit&&(0,Fe.jsxs)("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[(0,Fe.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Fe.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),h.pricePerUnit]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{htmlFor:"unitsPerPack",className:"block text-xs font-medium mb-1",style:{color:"#525252"},children:["Isi per ",d.unit," ",(0,Fe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("input",{id:"unitsPerPack",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:d.unitsPerPack||"",onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");ge("unitsPerPack",t?parseInt(t):void 0)},placeholder:"40",className:"w-full px-3 pr-16 py-2.5 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(h.unitsPerPack?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Fe.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["pcs/",d.unit]})]}),h.unitsPerPack&&(0,Fe.jsx)("p",{className:"mt-1 text-xs text-red-500",children:h.unitsPerPack})]})]}):(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{htmlFor:"pricePerUnit",className:"block text-xs font-medium mb-1",style:{color:"#525252"},children:["Harga per ",d.unit]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Rp"}),(0,Fe.jsx)("input",{id:"pricePerUnit",name:"pricePerUnit",type:"text",inputMode:"numeric",value:d.pricePerUnit?Xx(d.pricePerUnit):"",onChange:e=>ge("pricePerUnit",Kx(e.target.value)),onBlur:()=>me("pricePerUnit"),placeholder:"0","aria-invalid":!!h.pricePerUnit,className:"w-full pl-10 pr-20 py-2.5 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(h.pricePerUnit&&f.pricePerUnit?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Fe.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["/",d.unit]})]}),h.pricePerUnit&&f.pricePerUnit&&(0,Fe.jsxs)("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[(0,Fe.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Fe.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),h.pricePerUnit]})]}),(0,Fe.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,Fe.jsxs)("div",{className:"text-center",children:[(0,Fe.jsx)("span",{className:"text-xs font-medium block mb-1.5",style:{color:"#525252"},children:"Diskon"}),(0,Fe.jsx)("button",{type:"button",onClick:()=>{"percentage"===d.discountType?(K(d.discountValue||0),W(!0)):(K(1),W(!0))},className:"inline-flex items-center justify-center gap-1 px-3 py-1.5 rounded-full text-sm font-medium transition-colors",style:{background:"percentage"===d.discountType?Dx:Fx,color:"percentage"===d.discountType?"white":"#525252"},children:"percentage"===d.discountType&&d.discountValue?(0,Fe.jsxs)(Fe.Fragment,{children:[d.discountValue,"%"]}):(0,Fe.jsx)(Fe.Fragment,{children:"diskon off"})})]}),(0,Fe.jsxs)("div",{className:"text-center",children:[(0,Fe.jsx)("span",{className:"text-xs font-medium block mb-1.5",style:{color:"#525252"},children:"PPN"}),(0,Fe.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,Fe.jsx)("input",{type:"checkbox",checked:d.includePPN,onChange:e=>ge("includePPN",e.target.checked),className:"sr-only peer"}),(0,Fe.jsx)("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-neutral-500 relative"})]})]}),(0,Fe.jsxs)("div",{className:"text-center",children:[(0,Fe.jsx)("span",{className:"text-xs font-medium block mb-1.5",style:{color:"#525252"},children:"Cara Bayar"}),(0,Fe.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,Fe.jsx)("input",{type:"checkbox",checked:"tunai"!==d.paymentMethod||!0===f.paymentMethod,onChange:e=>{e.target.checked?me("paymentMethod"):(ge("paymentMethod","tunai"),ge("dueDate",void 0),m(e=>qe(qe({},e),{},{paymentMethod:!1})))},className:"sr-only peer"}),(0,Fe.jsx)("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-neutral-500 relative"})]})]})]}),("tunai"!==d.paymentMethod||!0===f.paymentMethod)&&(0,Fe.jsx)("div",{className:"flex gap-2",children:[{value:"tunai",label:"Tunai"},{value:"transfer",label:"Transfer"},{value:"kredit",label:"Tempo"}].map(e=>(0,Fe.jsx)("button",{type:"button",onClick:()=>{ge("paymentMethod",e.value),"kredit"!==e.value&&ge("dueDate",void 0)},className:"flex-1 py-2.5 px-3 rounded-xl text-sm font-medium transition-colors",style:d.paymentMethod===e.value?{background:Dx,color:zx}:{background:Lx,color:Rx},children:e.label},e.value))}),"kredit"===d.paymentMethod&&(0,Fe.jsxs)("div",{className:"w-full",children:[(0,Fe.jsx)("label",{htmlFor:"dueDate",className:"block text-xs font-medium mb-1",style:{color:"#525252"},children:"Jatuh Tempo"}),(0,Fe.jsx)("div",{className:"relative w-full",children:(0,Fe.jsx)("input",{id:"dueDate",name:"dueDate",type:"date",min:qx(),value:d.dueDate||"",onChange:e=>ge("dueDate",e.target.value),onBlur:()=>me("dueDate"),"aria-invalid":!!h.dueDate,className:"w-full px-3 py-2.5 border rounded-lg text-sm text-gray-900 focus:outline-none focus:ring-1 appearance-none box-border ".concat(h.dueDate&&f.dueDate?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500"),style:{maxWidth:"100%"}})}),h.dueDate&&f.dueDate&&(0,Fe.jsx)("p",{className:"mt-1 text-xs text-red-500",children:h.dueDate})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{htmlFor:"notes",className:"block text-xs font-medium mb-1",style:{color:"#525252"},children:["Catatan ",(0,Fe.jsx)("span",{className:"text-gray-400",children:"(opsional)"})]}),(0,Fe.jsx)("textarea",{id:"notes",value:d.notes,onChange:e=>ge("notes",e.target.value.slice(0,200)),placeholder:"Catatan tambahan...",rows:1,maxLength:200,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500 resize-none"})]}),(0,Fe.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden mt-3",style:{boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,Fe.jsx)("div",{style:{padding:"8px 12px",borderBottom:"1px solid #E5E5E5",background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:"#737373"},children:"Ringkasan"}),(0,Fe.jsxs)("div",{className:"flex justify-between items-center px-3 py-2.5",style:{background:zx},children:[(0,Fe.jsx)("span",{className:"text-sm",style:{color:Rx},children:"Subtotal"}),(0,Fe.jsxs)("span",{className:"text-sm font-semibold",style:{color:Wx},children:["Rp ",Xx(d.qty*d.pricePerUnit)]})]}),ue.discount>0&&(0,Fe.jsxs)("div",{className:"flex justify-between items-center px-3 py-2.5",style:{background:Lx},children:[(0,Fe.jsx)("span",{className:"text-sm",style:{color:Rx},children:"Diskon"}),(0,Fe.jsxs)("span",{className:"text-sm font-semibold",style:{color:Vx},children:["- Rp ",Xx(ue.discount)]})]}),d.includePPN&&(0,Fe.jsxs)("div",{className:"flex justify-between items-center px-3 py-2.5",style:{background:ue.discount>0?zx:Lx},children:[(0,Fe.jsx)("span",{className:"text-sm",style:{color:Rx},children:"PPN (11%)"}),(0,Fe.jsxs)("span",{className:"text-sm font-semibold",style:{color:Wx},children:["Rp ",Xx(ue.ppn)]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between items-center px-3 py-3",style:{background:"#FFF7ED",borderTop:"2px solid ".concat(Dx)},children:[(0,Fe.jsx)("span",{className:"text-sm font-semibold",style:{color:Wx},children:"TOTAL BAYAR"}),(0,Fe.jsxs)("span",{className:"text-lg font-bold",style:{color:Dx},children:["Rp ",Xx(ue.total)]})]}),"wholesales"===d.type&&d.unitsPerPack&&d.unitsPerPack>0&&(0,Fe.jsxs)("div",{className:"flex justify-between items-center px-3 py-2.5",style:{background:Lx,borderTop:"1px solid #E5E5E5"},children:[(0,Fe.jsxs)("span",{className:"text-sm",style:{color:Rx},children:["HPP Final per ",pe.retailUnit]}),(0,Fe.jsxs)("span",{className:"text-sm font-medium",style:{color:Wx},children:["Rp ",Xx(Math.round(pe.finalHppPerUnit))]})]})]})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 ".concat(a?"":"rounded-b-2xl"),style:{background:Fx,paddingBottom:"max(12px, env(safe-area-inset-bottom))"},children:[1===l&&(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Fe.jsx)("div",{className:"flex items-center justify-center rounded-xl font-semibold",style:{background:zx,color:Rx,fontSize:"14px",padding:"14px"},children:"Step 1/2"}),(0,Fe.jsx)("button",{type:"button",onClick:()=>{fe(l)&&(A("right"),c(e=>Math.min(e+1,2)))},disabled:!ye(1),className:"rounded-xl font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{background:ye(1)?Dx:zx,color:ye(1)?zx:Rx,fontSize:"14px",padding:"14px"},children:"Next \u2192"})]}),2===l&&(0,Fe.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,Fe.jsx)("button",{type:"button",onClick:()=>{A("left"),c(e=>Math.max(e-1,1))},className:"rounded-xl font-semibold transition-colors",style:{background:zx,color:Rx,fontSize:"14px",padding:"14px"},children:"\u2190"}),(0,Fe.jsxs)("button",{type:"button",onClick:async()=>{if(fe(2)){x(!0),v("idle");try{const e=localStorage.getItem("access_token");if(!e)return v("session_expired"),console.error("No auth token found - session expired"),void setTimeout(()=>{window.location.href="/login"},2e3);console.log("[PurchaseForm] Submitting transaction...");const t=await fetch("/api/transactions/purchase",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({product_name:d.product,quantity:d.qty,unit:d.unit,price_per_unit:d.pricePerUnit,payment_method:d.paymentMethod,vendor_name:d.supplier||null,notes:d.notes||null,discount_type:"none"===d.discountType?null:d.discountType,discount_value:d.discountValue||0,include_vat:d.includePPN,units_per_pack:d.unitsPerPack||null,purchase_type:d.type,purchase_date:d.date,due_date:d.dueDate||null,hpp_per_unit:pe.finalHppPerUnit,harga_jual:Y,margin:pe.finalMargin,margin_percent:pe.finalMarginPercent,retail_unit:pe.retailUnit})});if(console.log("[PurchaseForm] Response status:",t.status),!t.ok)return console.error("[PurchaseForm] HTTP error:",t.status),void v("error");const n=await t.json();console.log("[PurchaseForm] Response data:",n),"success"===n.status?(localStorage.removeItem(Mx),v("success"),console.log("[PurchaseForm] Transaction saved:",n.transaction_id),i&&n.message&&i(n.message),xe()):(console.error("[PurchaseForm] API error:",n.message),v("error"))}catch(e){console.error("[PurchaseForm] Submit error:",e),v("error")}finally{x(!1)}}},disabled:!ye(2)||g,className:"col-span-1 flex items-center justify-center gap-2 rounded-xl font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{background:ye(2)&&!g?Dx:zx,color:ye(2)&&!g?zx:Rx,fontSize:"14px",padding:"14px"},children:[g?(0,Fe.jsxs)("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,"Simpan"]}),(0,Fe.jsx)("button",{type:"button",onClick:()=>{const e={formData:d,currentStep:l,timestamp:Date.now()};localStorage.setItem(Mx,JSON.stringify(e)),xe()},className:"rounded-xl font-semibold transition-colors",style:{background:zx,color:Rx,fontSize:"14px",padding:"14px"},children:"Draft"})]})]})]}),F&&(0,Fe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>L(!1),children:(0,Fe.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm mx-4 w-full",style:{boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,Fe.jsx)("div",{className:"text-center mb-4 text-lg font-semibold",style:{color:Wx},children:"Kuantiti"}),(0,Fe.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-4",children:[(0,Fe.jsx)("button",{type:"button",onClick:()=>G(Math.max(1,H-1)),className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-xl",style:{background:Fx,color:"#525252"},children:"\u2212"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:H,onChange:e=>G(parseInt(e.target.value.replace(/\D/g,""))||1),className:"w-20 px-4 py-3 rounded-lg border text-center text-2xl font-bold",style:{borderColor:Fx,color:Wx},autoFocus:!0}),(0,Fe.jsx)("button",{type:"button",onClick:()=>G(H+1),className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-xl text-white",style:{background:Dx},children:"+"})]}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Fe.jsx)("button",{type:"button",onClick:()=>L(!1),className:"py-3 rounded-lg font-semibold transition-colors",style:{background:Fx,color:"#525252"},children:"Batal"}),(0,Fe.jsx)("button",{type:"button",onClick:()=>{ge("qty",H),L(!1)},className:"py-3 rounded-lg font-semibold text-white transition-colors",style:{background:Dx},children:"OK"})]})]})}),z&&(0,Fe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>W(!1),children:(0,Fe.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm mx-4 w-full",style:{boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,Fe.jsx)("div",{className:"text-center mb-4 text-lg font-semibold",style:{color:Wx},children:"Diskon"}),(0,Fe.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-4",children:[(0,Fe.jsx)("button",{type:"button",onClick:()=>K(Math.max(0,X-1)),className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-xl",style:{background:Fx,color:"#525252"},children:"\u2212"}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:X,onChange:e=>{const t=parseInt(e.target.value.replace(/\D/g,""))||0;K(Math.min(99,t))},className:"w-20 px-4 py-3 rounded-lg border text-center text-2xl font-bold",style:{borderColor:Fx,color:Wx},autoFocus:!0}),(0,Fe.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-lg font-bold",style:{color:Rx},children:"%"})]}),(0,Fe.jsx)("button",{type:"button",onClick:()=>K(Math.min(99,X+1)),className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-xl text-white",style:{background:Dx},children:"+"})]}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Fe.jsx)("button",{type:"button",onClick:()=>W(!1),className:"py-3 rounded-lg font-semibold transition-colors",style:{background:Fx,color:"#525252"},children:"Batal"}),(0,Fe.jsx)("button",{type:"button",onClick:()=>{X>0?(ge("discountType","percentage"),ge("discountValue",X)):(ge("discountType","none"),ge("discountValue",void 0)),W(!1)},className:"py-3 rounded-lg font-semibold text-white transition-colors",style:{background:Dx},children:"OK"})]})]})})]})};function Qx(e){const n=Ve(()=>vr(e)),{isStatic:r}=(0,t.useContext)($e);if(r){const[,r]=(0,t.useState)(e);(0,t.useEffect)(()=>n.on("change",r),[])}return n}class $x{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e){const t=this.animations.map(t=>t.attachTimeline(e));return()=>{t.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return ey(this.animations,"duration")}get iterationDuration(){return ey(this.animations,"iterationDuration")}runAll(e){this.animations.forEach(t=>t[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function ey(e,t){let n=0;for(let r=0;r<e.length;r++){const o=e[r][t];null!==o&&o>n&&(n=o)}return n}class ty extends $x{then(e,t){return this.finished.finally(e).then(()=>{})}}function ny(e,t){return Ma(e)?e[((e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e})(0,e.length,t)]:e}function ry(e){return"object"===typeof e&&!Array.isArray(e)}function oy(e,t,n,r){return"string"===typeof e&&ry(t)?Gl(e,n,r):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function ay(e,t,n){return e*(t+1)}function iy(e,t,n,r){return"number"===typeof t?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):"<"===t?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):null!==(o=r.get(t))&&void 0!==o?o:e;var o}function sy(e,t,n,r,o,a){!function(e,t,n){for(let r=0;r<e.length;r++){const o=e[r];o.at>t&&o.at<n&&(fr(e,o),r--)}}(e,o,a);for(let i=0;i<t.length;i++)e.push({value:t[i],at:Et(o,a,r[i]),easing:ny(n,i)})}function ly(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function cy(e,t){return e.at===t.at?null===e.value?1:null===t.value?-1:0:e.at-t.at}const dy=["defaultTransition"],uy=["delay","times","type","repeat","repeatType","repeatDelay"];function hy(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function py(e,t){return t[e]||(t[e]=[]),t[e]}function fy(e){return Array.isArray(e)?e:[e]}function my(e,t){return e&&e[t]?qe(qe({},e),e[t]):qe({},e)}const gy=e=>"number"===typeof e,xy=e=>e.every(gy);class yy extends Lr{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,t){if(function(e,t){return e in t}(t,e)){const n=e[t];if("string"===typeof n||"number"===typeof n)return n}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}build(e,t){Object.assign(e.output,t)}renderInstance(e,t){let{output:n}=t;Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function vy(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=Os(e)&&!Fs(e)?new oo(t):new qr(t);n.mount(e),Er.set(e,n)}function by(e){const t=new yy({presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}});t.mount(e),Er.set(e,t)}function wy(e,t,n,r){const o=[];if(function(e,t){return lr(e)||"number"===typeof e||"string"===typeof e&&!ry(t)}(e,t))o.push(Ls(e,ry(t)&&t.default||t,n&&n.default||n));else{const a=oy(e,t,r),i=a.length;Boolean(i);for(let e=0;e<i;e++){const r=a[e];an();const s=r instanceof Element?vy:by;Er.has(r)||s(r);const l=Er.get(r),c=qe({},n);"delay"in c&&"function"===typeof c.delay&&(c.delay=c.delay(e,i)),o.push(...Di(l,qe(qe({},t),{},{transition:c}),{}))}}return o}function ky(e,t,n){const r=[],o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{defaultTransition:n={}}=t,r=cr(t,dy),o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;const i=n.duration||.3,s=new Map,l=new Map,c={},d=new Map;let u=0,h=0,p=0;for(let f=0;f<e.length;f++){const t=e[f];if("string"===typeof t){d.set(t,h);continue}if(!Array.isArray(t)){d.set(t.name,iy(h,t.at,u,d));continue}let[r,s,m={}]=t;void 0!==m.at&&(h=iy(h,m.at,u,d));let g=0;const x=function(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const l=fy(e),{delay:c=0,times:d=Za(l),type:u="keyframes",repeat:f,repeatType:m,repeatDelay:x=0}=t,y=cr(t,uy);let{ease:v=n.ease||"easeOut",duration:b}=t;const w="function"===typeof c?c(o,s):c,k=l.length,C=fi(u)?u:null===a||void 0===a?void 0:a[u||"keyframes"];if(k<=2&&C){let e=100;if(2===k&&xy(l)){const t=l[1]-l[0];e=Math.abs(t)}const t=qe({},y);void 0!==b&&(t.duration=Jo(b));const n=xa(t,e,C);v=n.ease,b=n.duration}null!==b&&void 0!==b||(b=i);const j=h+w;1===d.length&&0===d[0]&&(d[1]=1);const _=d.length-l.length;if(_>0&&qa(d,_),1===l.length&&l.unshift(null),f){b=ay(b,f);const e=[...l],t=[...d];v=Array.isArray(v)?[...v]:[v];const n=[...v];for(let r=0;r<f;r++){l.push(...e);for(let o=0;o<e.length;o++)d.push(t[o]+(r+1)),v.push(0===o?"linear":ny(n,o-1))}ly(d,f)}const N=j+b;sy(r,l,v,d,j,N),g=Math.max(w+b,g),p=Math.max(N,p)};if(lr(r))x(s,m,py("default",hy(r,l)));else{const e=oy(r,s,o,c),t=e.length;for(let n=0;n<t;n++){const r=hy(e[n],l);for(const e in s)x(s[e],my(m,e),py(e,r),n,t)}}u=h,h+=g}return l.forEach((e,t)=>{for(const o in e){const a=e[o];a.sort(cy);const i=[],l=[],c=[];for(let e=0;e<a.length;e++){const{at:t,value:n,easing:r}=a[e];i.push(n),l.push(Ka(0,p,t)),c.push(r||"easeOut")}0!==l[0]&&(l.unshift(0),i.unshift(i[0]),c.unshift("easeInOut")),1!==l[l.length-1]&&(l.push(1),i.push(null)),s.has(t)||s.set(t,{keyframes:{},transition:{}});const d=s.get(t);d.keyframes[o]=i,d.transition[o]=qe(qe({},n),{},{duration:p,ease:c,times:l},r)}}),s}(e,t,n,{spring:Sa});return o.forEach((e,t)=>{let{keyframes:n,transition:o}=e;r.push(...wy(t,n,o))}),r}const Cy=["onComplete"];const jy=function(e,t,n){let r,o=[];if(a=e,Array.isArray(a)&&a.some(Array.isArray))o=ky(e,t,_y);else{const a=n||{},{onComplete:i}=a;"function"===typeof i&&(r=i),o=wy(e,t,cr(a,Cy),_y)}var a;const i=new ty(o);return r&&i.finished.then(r),_y&&(_y.animations.push(i),i.finished.then(()=>{fr(_y.animations,i)})),i};var _y;const Ny=new class{constructor(){this.audioContext=null}getAudioContext(){return this.audioContext||(this.audioContext=new AudioContext),"suspended"===this.audioContext.state&&this.audioContext.resume(),this.audioContext}playTone(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{const r=this.getAudioContext(),o=r.createOscillator(),a=r.createGain();o.connect(a),a.connect(r.destination),o.frequency.value=e,o.type="sine";const i=r.currentTime+n/1e3,s=i+t/1e3;a.gain.setValueAtTime(.3,i),a.gain.exponentialRampToValueAtTime(.01,s),o.start(i),o.stop(s)}catch(iN){console.warn("Sound playback failed:",iN)}}scanSuccess(){this.playTone(800,50,0),this.playTone(1200,80,60)}scanError(){this.playTone(400,100,0),this.playTone(300,150,110)}transactionComplete(){this.playTone(1e3,80,0),this.playTone(1200,80,100),this.playTone(1400,120,200)}tap(){this.playTone(600,20,0)}itemAdded(){this.playTone(1e3,40,0)}},Sy="#F97316",Ey="#737373",Ay="#D4D4D4",Py="#E5E5E5",By="#F5F5F5",Iy="#FFFFFF",Ty="#262626",My="#22C55E",Dy={shake:{x:[0,-8,8,-6,6,-3,3,0],transition:{duration:.5,ease:"easeOut"}}},Ry=[{id:"ongkir_masuk",label:"Ongkir Masuk",icon:"\ud83d\udce5",code:"6101",desc:"Ongkir beli barang"},{id:"gaji",label:"Gaji Karyawan",icon:"\ud83d\udc64",code:"6102",desc:"Gaji karyawan/kasir"},{id:"sewa",label:"Sewa Tempat",icon:"\ud83c\udfe0",code:"6103",desc:"Sewa toko/ruko"},{id:"listrik",label:"Listrik & Air",icon:"\ud83d\udca1",code:"6104",desc:"PLN, PDAM"},{id:"telepon",label:"Telepon & Internet",icon:"\ud83d\udcf1",code:"6105",desc:"Pulsa, WiFi"},{id:"perlengkapan",label:"Perlengkapan",icon:"\ud83d\udce6",code:"6106",desc:"Plastik, nota, ATK"},{id:"transport",label:"Transportasi",icon:"\ud83d\ude97",code:"6107",desc:"Bensin, parkir"},{id:"ongkir_keluar",label:"Ongkir Keluar",icon:"\ud83d\udce4",code:"6108",desc:"Antar ke customer"},{id:"pajak",label:"Pajak UMKM",icon:"\ud83d\udccb",code:"6109",desc:"Pajak 0.5% omzet"},{id:"lainnya_operasional",label:"Beban Lain-lain",icon:"\ud83d\udcdd",code:"6110",desc:"Kebersihan, keamanan"},{id:"bunga",label:"Bunga Pinjaman",icon:"\ud83d\udcb0",code:"7201",desc:"Bunga pinjaman bank"},{id:"biaya_bank",label:"Admin Bank",icon:"\ud83c\udfe6",code:"7202",desc:"Potongan admin bulanan"},{id:"beban_dimuka",label:"Beban Dibayar di Muka",icon:"\ud83d\udcc5",code:"1105",desc:"Sewa/asuransi bayar duluan"},{id:"pemeliharaan",label:"Pemeliharaan",icon:"\ud83d\udd27",code:"6110",desc:"Service AC, perbaikan"},{id:"asuransi",label:"Asuransi",icon:"\ud83d\udee1\ufe0f",code:"6110",desc:"Asuransi toko"},{id:"iklan",label:"Iklan & Promosi",icon:"\ud83d\udce2",code:"6110",desc:"Iklan/promosi"},{id:"makan",label:"Makan Karyawan",icon:"\ud83c\udf7d\ufe0f",code:"6110",desc:"Makan karyawan"},{id:"penyusutan",label:"Penyusutan Aset",icon:"\ud83d\udcc9",code:"6110",desc:"Penyusutan aset tetap"},{id:"lainnya",label:"Tulis Sendiri...",icon:"\u270f\ufe0f",code:"-",desc:"Kategori custom"}],Oy={gaji:"beban_gaji",sewa:"beban_sewa",listrik:"beban_utilitas",telepon:"beban_telepon",perlengkapan:"beban_perlengkapan",transport:"beban_transport",ongkir_masuk:"beban_ongkir_masuk",ongkir_keluar:"beban_ongkir_keluar",pajak:"beban_pajak",lainnya_operasional:"beban_lainnya",pemeliharaan:"beban_pemeliharaan",biaya_bank:"beban_admin_bank",bunga:"beban_bunga",asuransi:"beban_asuransi",iklan:"beban_iklan",makan:"beban_makan",penyusutan:"beban_penyusutan",beban_dimuka:"beban_dibayar_dimuka",lainnya:"beban_lainnya"},Fy={gaji:{row1Label:"Nama Karyawan",row2Label:"Periode Gaji"},sewa:{row1Label:"Lokasi/Alamat",row2Label:"Periode Sewa"},listrik:{row1Label:"No. ID Pelanggan",row2Label:"Periode Tagihan"},telepon:{row1Label:"No. Pelanggan",row2Label:"Periode Tagihan"},ongkir_masuk:{row1Label:"Supplier",row2Label:"No. Resi"},ongkir_keluar:{row1Label:"Pelanggan",row2Label:"No. Resi"},pajak:{row1Label:"Jenis Pajak",row2Label:"Periode Pajak"},perlengkapan:{row1Label:"Nama Barang",row2Label:"Qty"},transport:{row1Label:"Tujuan",row2Label:"Tanggal"},lainnya_operasional:{row1Label:"Nama Beban",row2Label:"Tanggal"},bunga:{row1Label:"Nama Kreditur",row2Label:"Cicilan ke-"},biaya_bank:{row1Label:"Nama Bank",row2Label:"Periode"},beban_dimuka:{row1Label:"Jenis Beban",row2Label:"Periode"},pemeliharaan:{row1Label:"Nama Item",row2Label:"Tanggal"},asuransi:{row1Label:"Jenis Asuransi",row2Label:"Periode"},iklan:{row1Label:"Platform/Media",row2Label:"Periode"},makan:{row1Label:"Jumlah Orang",row2Label:"Tanggal"},penyusutan:{row1Label:"Nama Aset",row2Label:"Periode"}},Ly="milkyhoop_draft_beban",zy=t.memo(e=>{let{checked:n,onChange:r,labelOn:o,labelOff:a}=e;const[i,s]=t.useState(!1),l=Qx(n?42:-42);t.useEffect(()=>{i||jy(l,n?42:-42,{type:"spring",stiffness:500,damping:30})},[n,i,l]);return(0,Fe.jsxs)("button",{onClick:()=>{i||(r(!n),Ny.itemAdded())},style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"120px",height:"36px",padding:"4px",background:n?Sy:"#E5E5E5",borderRadius:"18px",border:"none",cursor:"pointer",userSelect:"none",touchAction:"pan-y"},children:[(0,Fe.jsx)("span",{style:{fontSize:"13px",fontWeight:400,color:n?"#FFFFFF":Ey,zIndex:1,paddingLeft:n?"0":"24px",paddingRight:n?"24px":"0",pointerEvents:"none"},children:n?o:a}),(0,Fe.jsx)(hc.span,{drag:"x",dragElastic:.1,dragMomentum:!1,dragConstraints:{left:-42,right:42},onDragStart:()=>s(!0),onDragEnd:(e,t)=>{Math.abs(t.offset.x)>20&&(t.offset.x>0&&!n||t.offset.x<0&&n)?(r(!n),Ny.itemAdded()):jy(l,n?42:-42,{type:"spring",stiffness:500,damping:30}),s(!1)},style:{x:l,position:"absolute",width:"28px",height:"28px",borderRadius:"50%",background:"#FFFFFF",boxShadow:"0 2px 4px rgba(0,0,0,0.15)",cursor:"grab",zIndex:2},whileDrag:{cursor:"grabbing",scale:1.05}})]})}),Wy=e=>{var n,r,o,a;let{tenantId:i,onClose:s,onTransactionComplete:l}=e;const c=(0,t.useRef)(null),[d,u]=(0,t.useState)({category:"",categoryLabel:"",customCategory:"",amount:0,description:"",date:(new Date).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",timeZone:"Asia/Jakarta"})}),[h,p]=(0,t.useState)(""),[f,m]=(0,t.useState)(!1),[g,x]=(0,t.useState)(Ry),[y,v]=(0,t.useState)("tunai"),[b]=(0,t.useState)(35e5),[w]=(0,t.useState)(25e5),[k,C]=(0,t.useState)(()=>{const e=new Date;return e.setDate(e.getDate()+30),e.toLocaleDateString("id-ID",{day:"numeric",month:"long"})}),[j]=(0,t.useState)({totalBebanBulan:125e4,rataRataBeban:125e3,jumlahTransaksi:10}),[_,N]=(0,t.useState)(!1),[S,E]=(0,t.useState)(!1),[A,P]=(0,t.useState)(!1),[B,I]=(0,t.useState)(!1),[T,M]=(0,t.useState)(""),[D,R]=(0,t.useState)(""),[O,F]=(0,t.useState)(""),[L,z]=(0,t.useState)(""),[W,V]=(0,t.useState)(""),[U,H]=(0,t.useState)(""),[G,X]=(0,t.useState)(!1),[K,Y]=(0,t.useState)(null),[q,Z]=(0,t.useState)(""),[J,Q]=(0,t.useState)(!1),[$,ee]=(0,t.useState)(!1),[te,ne]=(0,t.useState)(!1),[re,oe]=(0,t.useState)(!1),[ae,ie]=(0,t.useState)(!1),[se,le]=(0,t.useState)(""),[ce,de]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=localStorage.getItem(Ly);if(e)try{const t=JSON.parse(e);Date.now()-t.timestamp<864e5?(u(t.formData),t.paymentMethod&&v(t.paymentMethod)):localStorage.removeItem(Ly)}catch(sN){localStorage.removeItem(Ly)}},[]),(0,t.useEffect)(()=>{if(h.trim()){const e=Ry.filter(e=>e.label.toLowerCase().includes(h.toLowerCase())||e.desc.toLowerCase().includes(h.toLowerCase()));x(e),m(!0)}else x(Ry),m(!1)},[h]);const ue=e=>"Rp ".concat(e.toLocaleString("id-ID"));d.category&&d.amount;return(0,Fe.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",background:Py,fontFamily:"'Hiragino Kaku Gothic ProN', -apple-system, BlinkMacSystemFont, sans-serif"},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 flex-shrink-0",style:{height:"60px",paddingTop:"max(4px, env(safe-area-inset-top))",background:Py},children:[(0,Fe.jsx)("button",{onClick:s,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Ay},children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain"})}),(0,Fe.jsx)("span",{className:"font-semibold",style:{fontSize:"20px",fontWeight:600,color:"#1F2937"},children:"Beban"})]}),(0,Fe.jsx)("div",{style:{padding:"0 16px 8px",flexShrink:0},children:(0,Fe.jsxs)(hc.div,{animate:$?"shake":"",variants:Dy,style:{position:"relative"},children:[(0,Fe.jsx)("input",{ref:c,type:"text",value:h,onChange:e=>p(e.target.value),onFocus:()=>h&&m(!0),onBlur:()=>setTimeout(()=>m(!1),200),placeholder:"Ketik nama beban",style:{width:"100%",height:"52px",padding:"0 56px 0 16px",background:Iy,border:"1px solid ".concat(Py),borderRadius:"12px",fontSize:"14px",color:Ty,outline:"none"}}),f&&g.length>0&&(0,Fe.jsx)("div",{style:{position:"absolute",top:"56px",left:0,right:0,background:"white",border:"1px solid ".concat(Py),borderRadius:"12px",maxHeight:"200px",overflowY:"auto",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:50},children:g.map(e=>(0,Fe.jsxs)("div",{onClick:()=>(e=>{if(Ny.itemAdded(),"lainnya"===e.id)return m(!1),R(""),void P(!0);u(t=>qe(qe({},t),{},{category:e.id,categoryLabel:e.label})),p(""),m(!1)})(e),style:{padding:"12px 16px",cursor:"pointer",borderBottom:"1px solid ".concat(By),display:"flex",alignItems:"center",gap:"12px"},children:[(0,Fe.jsx)("span",{style:{fontSize:"18px"},children:e.icon}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{style:{fontSize:"14px",fontWeight:500,color:Ty},children:e.label}),(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey},children:e.desc})]})]},e.id))})]})}),(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"0 16px",minHeight:0,overflow:"auto"},children:[(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"10px",flex:1,minHeight:0},children:[(0,Fe.jsxs)("div",{style:{background:Iy,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[(0,Fe.jsx)("div",{style:{flexShrink:0,padding:"10px 12px",borderBottom:"1px solid ".concat(Py),background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:Ey,textAlign:"center"},children:"Rincian"}),(0,Fe.jsxs)(hc.div,{onClick:()=>{var e;ee(!0),setTimeout(()=>ee(!1),500),null===(e=c.current)||void 0===e||e.focus()},animate:te?"shake":"",variants:Dy,style:{flex:1,padding:"10px 12px",background:Iy,display:"flex",flexDirection:"column",justifyContent:"center",cursor:"pointer"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:"Nama Beban"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:d.categoryLabel?Ty:Ey,textAlign:"left"},children:d.categoryLabel||"Nama Beban"})]}),(0,Fe.jsxs)(hc.div,{onClick:()=>{M(d.amount>0?d.amount.toString():""),E(!0)},animate:re?"shake":"",variants:Dy,style:{flex:1,padding:"10px 12px",background:By,display:"flex",flexDirection:"column",justifyContent:"center",cursor:"pointer"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:"Biaya Beban"}),(0,Fe.jsxs)("div",{style:{fontSize:"15px",fontWeight:700,color:d.amount>0?Ty:Ey,textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:Ey},children:"\u270e"})," ",d.amount>0?ue(d.amount):"Rp 0"]})]}),(0,Fe.jsxs)("div",{style:{flex:1,padding:"10px 12px",background:Iy,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:"Tanggal"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:Ty,textAlign:"left"},children:d.date})]})]}),d.category&&"lainnya"!==d.category&&Fy[d.category]&&(0,Fe.jsxs)("div",{style:{background:Iy,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[(0,Fe.jsx)("div",{style:{flexShrink:0,padding:"10px 12px",borderBottom:"1px solid ".concat(Py),background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:Ey,textAlign:"center"},children:"Detail Beban"}),(0,Fe.jsxs)("div",{onClick:()=>{Y("field1"),Z(L),X(!0)},style:{flex:1,padding:"10px 12px",background:Iy,display:"flex",flexDirection:"column",justifyContent:"center",cursor:"pointer"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:null===(n=Fy[d.category])||void 0===n?void 0:n.row1Label}),(0,Fe.jsxs)("div",{style:{fontSize:"15px",fontWeight:700,color:L?Ty:Ey,textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:Ey},children:"\u270e"})," ",L||"..."]})]}),(0,Fe.jsxs)("div",{onClick:()=>{Y("field2"),Z(W),X(!0)},style:{flex:1,padding:"10px 12px",background:By,display:"flex",flexDirection:"column",justifyContent:"center",cursor:"pointer"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:null===(r=Fy[d.category])||void 0===r?void 0:r.row2Label}),(0,Fe.jsxs)("div",{style:{fontSize:"15px",fontWeight:700,color:W?Ty:Ey,textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:Ey},children:"\u270e"})," ",W||"..."]})]}),(0,Fe.jsxs)("div",{onClick:()=>{Y("keterangan"),Z(U),X(!0)},style:{flex:1,padding:"10px 12px",background:Iy,display:"flex",flexDirection:"column",justifyContent:"center",cursor:"pointer"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:"Keterangan Lain"}),(0,Fe.jsxs)("div",{style:{fontSize:"15px",fontWeight:700,color:U?Ty:Ey,textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:Ey},children:"\u270e"})," ",U||"..."]})]})]}),(!d.category||"lainnya"===d.category||!Fy[d.category])&&(0,Fe.jsxs)("div",{style:{background:Iy,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[(0,Fe.jsx)("div",{style:{flexShrink:0,padding:"10px 12px",borderBottom:"1px solid ".concat(Py),background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:Ey,textAlign:"center"},children:"Keterangan"}),(0,Fe.jsx)("div",{style:{flex:1,padding:"10px 12px",background:Iy}}),(0,Fe.jsx)("div",{style:{flex:1,padding:"10px 12px",background:By}}),(0,Fe.jsx)("div",{onClick:()=>{Y("keterangan"),Z(U),X(!0)},style:{flex:1,padding:"10px 12px",background:Iy,display:"flex",flexDirection:"column",justifyContent:"center",cursor:"pointer"},children:U&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:"Keterangan Lain"}),(0,Fe.jsxs)("div",{style:{fontSize:"15px",fontWeight:700,color:Ty,textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:Ey},children:"\u270e"})," ",U]})]})})]})]}),(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",flex:1,minHeight:0},children:[(0,Fe.jsxs)("div",{style:{background:Iy,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[(0,Fe.jsx)("div",{style:{flexShrink:0,padding:"10px 12px",borderBottom:"1px solid ".concat(Py),background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:Ey,textAlign:"center"},children:"kredit"===y?"Hutang":"Kas & Bank"}),"kredit"===y?(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{onClick:()=>I(!0),style:{flex:1,padding:"10px 12px",background:Iy,cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:"Jatuh Tempo"}),(0,Fe.jsxs)("div",{style:{fontSize:"14px",fontWeight:600,color:Ty,textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:Ey},children:"\u270e"})," ",k]})]}),(0,Fe.jsxs)("div",{style:{flex:1,padding:"10px 12px",background:By,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:"Nilai Hutang"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:Ty,textAlign:"left"},children:ue(d.amount)})]}),(0,Fe.jsxs)("div",{style:{flex:1,padding:"10px 12px",background:Iy,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:"Total Hutang Toko"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:Ty,textAlign:"left"},children:ue(w+d.amount)})]})]}):(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{style:{flex:1,padding:"10px 12px",background:Iy,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:"Kas Bank"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:Ty,textAlign:"left"},children:ue(b)})]}),(0,Fe.jsxs)("div",{style:{flex:1,padding:"10px 12px",background:By,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:"Total Bayar"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:Ty,textAlign:"left"},children:ue(d.amount)})]}),(0,Fe.jsxs)("div",{style:{flex:1,padding:"10px 12px",background:Iy,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:Ey,textAlign:"left"},children:"Update Kas Bank"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:"#EF4444",textAlign:"left"},children:ue(b-d.amount)})]})]})]}),(0,Fe.jsxs)("div",{style:{background:Iy,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[(0,Fe.jsx)("div",{style:{flexShrink:0,padding:"10px 12px",borderBottom:"1px solid ".concat(Py),background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:Ey,textAlign:"center"},children:"Cara Bayar"}),(0,Fe.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 12px",background:"tunai"===y?"#FFF7ED":Iy,borderBottom:"1px solid ".concat(By)},children:(0,Fe.jsx)(zy,{checked:"tunai"===y,onChange:()=>v("tunai"),labelOn:"Tunai",labelOff:"Tunai off"})}),(0,Fe.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 12px",background:"transfer"===y?"#FFF7ED":By,borderBottom:"1px solid ".concat(Py)},children:(0,Fe.jsx)(zy,{checked:"transfer"===y,onChange:()=>v("transfer"),labelOn:"Transfer",labelOff:"Transfer off"})}),(0,Fe.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 12px",background:"kredit"===y?"#FFF7ED":Iy},children:(0,Fe.jsx)(zy,{checked:"kredit"===y,onChange:()=>v("kredit"),labelOn:"Tempo",labelOff:"Tempo off"})})]})]})]}),se&&(0,Fe.jsx)("div",{style:{padding:"12px 16px",background:"#FEE2E2",color:"#DC2626",textAlign:"center",fontSize:"14px",fontWeight:500},children:se}),(0,Fe.jsxs)("div",{style:{flexShrink:0,display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",padding:"12px 16px",background:Py,paddingBottom:"max(12px, env(safe-area-inset-bottom))"},children:[(0,Fe.jsxs)("button",{onClick:()=>{Ny.itemAdded()},style:{padding:"14px 16px",background:Iy,color:"#525252",border:"none",borderRadius:"12px",fontSize:"15px",fontWeight:600,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[(0,Fe.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Fe.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,Fe.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,Fe.jsx)("polyline",{points:"21,15 16,10 5,21"})]}),"Foto Bukti"]}),(0,Fe.jsx)(hc.button,{animate:J?"shake":"",variants:Dy,onClick:async()=>{if(!d.category||d.amount<=0)return d.category||(ne(!0),setTimeout(()=>ne(!1),500)),d.amount<=0&&(oe(!0),setTimeout(()=>oe(!1),500)),void Ny.scanError();if(!ae){ie(!0),le("");try{const e=localStorage.getItem("access_token");if(!e)throw new Error("Sesi berakhir. Silakan login ulang.");const t=qe({transaction_type:"beban",category:"lainnya"===d.category?d.customCategory:Oy[d.category]||"beban_lainnya",description:d.description||d.categoryLabel,amount:d.amount,total_amount:d.amount,payment_method:"tunai"===y?"CASH":"transfer"===y?"TRANSFER":"TEMPO",date:d.date},"kredit"===y&&{due_date:k,is_tempo:!0}),n=await fetch("/api/tenant/".concat(i,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Beban",session_id:"beban-".concat(Date.now()),conversation_context:JSON.stringify({form_data:t})})});if(!n.ok){if(401===n.status)throw new Error("Sesi berakhir. Silakan login ulang.");const e=await n.json().catch(()=>({}));throw new Error(e.message||e.detail||"Gagal menyimpan beban")}await n.json(),Ny.transactionComplete(),de(!0),localStorage.removeItem(Ly),setTimeout(()=>{null===l||void 0===l||l("Beban ".concat(d.categoryLabel," ").concat(ue(d.amount)," berhasil dicatat.")),s()},1500)}catch(iN){Ny.scanError(),le(iN.message||"Transaksi gagal. Silakan coba lagi."),setTimeout(()=>le(""),3e3)}finally{ie(!1)}}},disabled:ae,style:{padding:"14px 16px",background:ae?"#D1D5DB":"#FFFFFF",color:ae?"white":"#525252",border:"1px solid ".concat(Ay),borderRadius:"12px",fontSize:"15px",fontWeight:600,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",cursor:ae?"not-allowed":"pointer"},children:ae?"Menyimpan...":"Simpan"})]}),(0,Fe.jsx)(ct,{children:_&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>N(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"16px",width:"100%",maxWidth:"340px",maxHeight:"70vh",display:"flex",flexDirection:"column"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"12px",color:Ty},children:"Pilih Kategori Beban"}),(0,Fe.jsx)("div",{style:{flex:1,overflowY:"auto"},children:Ry.map(e=>(0,Fe.jsxs)("div",{onClick:()=>(e=>{if(Ny.itemAdded(),"lainnya"===e.id)return N(!1),R(d.customCategory),void P(!0);u(t=>qe(qe({},t),{},{category:e.id,categoryLabel:e.label})),N(!1),p(""),m(!1)})(e),style:{padding:"14px 16px",cursor:"pointer",borderBottom:"1px solid ".concat(By),display:"flex",alignItems:"center",gap:"12px",background:d.category===e.id?"#FFF7ED":"transparent"},children:[(0,Fe.jsx)("span",{style:{fontSize:"20px"},children:e.icon}),(0,Fe.jsx)("span",{style:{fontSize:"14px",fontWeight:d.category===e.id?600:400,color:d.category===e.id?Sy:Ty},children:e.label})]},e.id))}),(0,Fe.jsx)("button",{onClick:()=>N(!1),style:{marginTop:"12px",padding:"12px",background:By,border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer"},children:"Batal"})]})})}),(0,Fe.jsx)(ct,{children:A&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>P(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"300px"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:Ty},children:"Kategori Lainnya"}),(0,Fe.jsx)("input",{type:"text",value:D,onChange:e=>R(e.target.value),placeholder:"Contoh: Biaya parkir",autoFocus:!0,style:{width:"100%",height:"48px",padding:"0 16px",fontSize:"14px",border:"2px solid ".concat(Sy),borderRadius:"8px",marginBottom:"16px",outline:"none"}}),(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,Fe.jsx)("button",{onClick:()=>P(!1),style:{padding:"12px",background:By,border:"none",borderRadius:"8px",fontWeight:600},children:"Batal"}),(0,Fe.jsx)("button",{onClick:()=>{D.trim()&&u(e=>qe(qe({},e),{},{category:"lainnya",categoryLabel:D.trim(),customCategory:D.trim()})),P(!1)},style:{padding:"12px",background:Sy,color:"white",border:"none",borderRadius:"8px",fontWeight:600},children:"Simpan"})]})]})})}),(0,Fe.jsx)(ct,{children:S&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>E(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"300px"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:Ty},children:"Nominal Beban"}),(0,Fe.jsxs)("div",{style:{position:"relative",marginBottom:"16px"},children:[(0,Fe.jsx)("span",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",fontSize:"14px",color:Ey},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:T,onChange:e=>M(e.target.value.replace(/\D/g,"")),autoFocus:!0,style:{width:"100%",height:"48px",paddingLeft:"40px",paddingRight:"16px",textAlign:"right",fontSize:"24px",fontWeight:600,border:"2px solid ".concat(Sy),borderRadius:"8px",outline:"none"}})]}),(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,Fe.jsx)("button",{onClick:()=>E(!1),style:{padding:"12px",background:By,border:"none",borderRadius:"8px",fontWeight:600},children:"Batal"}),(0,Fe.jsx)("button",{onClick:()=>{const e=parseInt(T.replace(/\D/g,""))||0;u(t=>qe(qe({},t),{},{amount:e})),E(!1)},style:{padding:"12px",background:Sy,color:"white",border:"none",borderRadius:"8px",fontWeight:600},children:"Simpan"})]})]})})}),(0,Fe.jsx)(ct,{children:G&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>X(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"300px"},children:[(0,Fe.jsxs)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:Ty},children:["field1"===K&&d.category&&(null===(o=Fy[d.category])||void 0===o?void 0:o.row1Label),"field2"===K&&d.category&&(null===(a=Fy[d.category])||void 0===a?void 0:a.row2Label),"keterangan"===K&&"Keterangan Lain"]}),(0,Fe.jsx)("input",{type:"text",value:q,onChange:e=>Z(e.target.value),autoFocus:!0,placeholder:"Ketik di sini...",style:{width:"100%",height:"48px",padding:"0 16px",fontSize:"16px",border:"2px solid ".concat(Sy),borderRadius:"8px",outline:"none",marginBottom:"16px"}}),(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,Fe.jsx)("button",{onClick:()=>X(!1),style:{padding:"12px",background:By,border:"none",borderRadius:"8px",fontWeight:600},children:"Batal"}),(0,Fe.jsx)("button",{onClick:()=>{"field1"===K?z(q):"field2"===K?V(q):"keterangan"===K&&H(q),X(!1),Y(null),Ny.itemAdded()},style:{padding:"12px",background:Sy,color:"white",border:"none",borderRadius:"8px",fontWeight:600},children:"Simpan"})]})]})})}),(0,Fe.jsx)(ct,{children:B&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>I(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"300px"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:Ty},children:"Jatuh Tempo"}),(0,Fe.jsx)("input",{type:"text",value:O,onChange:e=>F(e.target.value),placeholder:"Contoh: 15 Januari 2025",autoFocus:!0,style:{width:"100%",height:"48px",padding:"0 16px",fontSize:"14px",border:"2px solid ".concat(Sy),borderRadius:"8px",marginBottom:"16px",outline:"none"}}),(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,Fe.jsx)("button",{onClick:()=>I(!1),style:{padding:"12px",background:By,border:"none",borderRadius:"8px",fontWeight:600},children:"Batal"}),(0,Fe.jsx)("button",{onClick:()=>{O.trim()&&C(O),I(!1)},style:{padding:"12px",background:Sy,color:"white",border:"none",borderRadius:"8px",fontWeight:600},children:"Simpan"})]})]})})}),(0,Fe.jsx)(ct,{children:ce&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:200,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},style:{background:"white",borderRadius:"16px",padding:"32px",textAlign:"center",maxWidth:"300px",width:"100%"},children:[(0,Fe.jsx)("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"#F0FDF4",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:(0,Fe.jsx)("svg",{style:{width:"32px",height:"32px",color:My},fill:"currentColor",viewBox:"0 0 20 20",children:(0,Fe.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,Fe.jsx)("h3",{style:{fontSize:"18px",fontWeight:600,color:Ty,marginBottom:"8px"},children:"Beban Berhasil!"}),(0,Fe.jsxs)("p",{style:{fontSize:"14px",color:Ey},children:[d.categoryLabel," ",ue(d.amount)," telah dicatat"]})]})})})]})};function Vy(e){return Array.isArray?Array.isArray(e):"[object Array]"===qy(e)}function Uy(e){return"string"===typeof e}function Hy(e){return"number"===typeof e}function Gy(e){return!0===e||!1===e||function(e){return Xy(e)&&null!==e}(e)&&"[object Boolean]"==qy(e)}function Xy(e){return"object"===typeof e}function Ky(e){return void 0!==e&&null!==e}function Yy(e){return!e.trim().length}function qy(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Zy=Object.prototype.hasOwnProperty;class Jy{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let n=Qy(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Qy(e){let t=null,n=null,r=null,o=1,a=null;if(Uy(e)||Vy(e))r=e,t=$y(e),n=ev(e);else{if(!Zy.call(e,"name"))throw new Error((e=>"Missing ".concat(e," property in key"))("name"));const i=e.name;if(r=i,Zy.call(e,"weight")&&(o=e.weight,o<=0))throw new Error((e=>"Property 'weight' in key '".concat(e,"' must be a positive integer"))(i));t=$y(i),n=ev(i),a=e.getFn}return{path:t,id:n,weight:o,src:r,getFn:a}}function $y(e){return Vy(e)?e:e.split(".")}function ev(e){return Vy(e)?e.join("."):e}const tv={useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const o=(e,t,a)=>{if(Ky(e))if(t[a]){const i=e[t[a]];if(!Ky(i))return;if(a===t.length-1&&(Uy(i)||Hy(i)||Gy(i)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(i));else if(Vy(i)){r=!0;for(let e=0,n=i.length;e<n;e+=1)o(i[e],t,a+1)}else t.length&&o(i,t,a+1)}else n.push(e)};return o(e,Uy(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var nv=qe(qe(qe(qe({},{isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),tv);const rv=/[^ ]+/g;class ov{constructor(){let{getFn:e=nv.getFn,fieldNormWeight:t=nv.fieldNormWeight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.norm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=new Map,r=Math.pow(10,t);return{get(t){const o=t.match(rv).length;if(n.has(o))return n.get(o);const a=1/Math.pow(o,.5*e),i=parseFloat(Math.round(a*r)/r);return n.set(o,i),i},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}setIndexRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}setKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Uy(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();Uy(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Ky(e)||Yy(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((t,r)=>{let o=t.getFn?t.getFn(e):this.getFn(e,t.path);if(Ky(o))if(Vy(o)){let e=[];const t=[{nestedArrIndex:-1,value:o}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(Ky(r))if(Uy(r)&&!Yy(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else Vy(r)&&r.forEach((e,n)=>{t.push({nestedArrIndex:n,value:e})})}n.$[r]=e}else if(Uy(o)&&!Yy(o)){let e={v:o,n:this.norm.get(o)};n.$[r]=e}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function av(e,t){let{getFn:n=nv.getFn,fieldNormWeight:r=nv.fieldNormWeight}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new ov({getFn:n,fieldNormWeight:r});return o.setKeys(e.map(Qy)),o.setSources(t),o.create(),o}function iv(e){let{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:o=nv.distance,ignoreLocation:a=nv.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t/e.length;if(a)return i;const s=Math.abs(r-n);return o?i+s/o:s?1:i}const sv=32;function lv(e,t,n){let{location:r=nv.location,distance:o=nv.distance,threshold:a=nv.threshold,findAllMatches:i=nv.findAllMatches,minMatchCharLength:s=nv.minMatchCharLength,includeMatches:l=nv.includeMatches,ignoreLocation:c=nv.ignoreLocation}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length>sv)throw new Error("Pattern length exceeds max of ".concat(sv,"."));const d=t.length,u=e.length,h=Math.max(0,Math.min(r,u));let p=a,f=h;const m=s>1||l,g=m?Array(u):[];let x;for(;(x=e.indexOf(t,f))>-1;){let e=iv(t,{currentLocation:x,expectedLocation:h,distance:o,ignoreLocation:c});if(p=Math.min(e,p),f=x+d,m){let e=0;for(;e<d;)g[x+e]=1,e+=1}}f=-1;let y=[],v=1,b=d+u;const w=1<<d-1;for(let C=0;C<d;C+=1){let r=0,a=b;for(;r<a;){iv(t,{errors:C,currentLocation:h+a,expectedLocation:h,distance:o,ignoreLocation:c})<=p?r=a:b=a,a=Math.floor((b-r)/2+r)}b=a;let s=Math.max(1,h-a+1),l=i?u:Math.min(h+a,u)+d,x=Array(l+2);x[l+1]=(1<<C)-1;for(let i=l;i>=s;i-=1){let r=i-1,a=n[e.charAt(r)];if(m&&(g[r]=+!!a),x[i]=(x[i+1]<<1|1)&a,C&&(x[i]|=(y[i+1]|y[i])<<1|1|y[i+1]),x[i]&w&&(v=iv(t,{errors:C,currentLocation:r,expectedLocation:h,distance:o,ignoreLocation:c}),v<=p)){if(p=v,f=r,f<=h)break;s=Math.max(1,2*h-f)}}if(iv(t,{errors:C+1,currentLocation:h,expectedLocation:h,distance:o,ignoreLocation:c})>p)break;y=x}const k={isMatch:f>=0,score:Math.max(.001,v)};if(m){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nv.minMatchCharLength,n=[],r=-1,o=-1,a=0;for(let i=e.length;a<i;a+=1){let i=e[a];i&&-1===r?r=a:i||-1===r||(o=a-1,o-r+1>=t&&n.push([r,o]),r=-1)}return e[a-1]&&a-r>=t&&n.push([r,a-1]),n}(g,s);e.length?l&&(k.indices=e):k.isMatch=!1}return k}function cv(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<r-n-1}return t}const dv=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class uv{constructor(e){let{location:t=nv.location,threshold:n=nv.threshold,distance:r=nv.distance,includeMatches:o=nv.includeMatches,findAllMatches:a=nv.findAllMatches,minMatchCharLength:i=nv.minMatchCharLength,isCaseSensitive:s=nv.isCaseSensitive,ignoreDiacritics:l=nv.ignoreDiacritics,ignoreLocation:c=nv.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options={location:t,threshold:n,distance:r,includeMatches:o,findAllMatches:a,minMatchCharLength:i,isCaseSensitive:s,ignoreDiacritics:l,ignoreLocation:c},e=s?e:e.toLowerCase(),e=l?dv(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const d=(e,t)=>{this.chunks.push({pattern:e,alphabet:cv(e),startIndex:t})},u=this.pattern.length;if(u>sv){let e=0;const t=u%sv,n=u-t;for(;e<n;)d(this.pattern.substr(e,sv),e),e+=sv;if(t){const e=u-sv;d(this.pattern.substr(e),e)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r}=this.options;if(e=t?e:e.toLowerCase(),e=n?dv(e):e,this.pattern===e){let t={isMatch:!0,score:0};return r&&(t.indices=[[0,e.length-1]]),t}const{location:o,distance:a,threshold:i,findAllMatches:s,minMatchCharLength:l,ignoreLocation:c}=this.options;let d=[],u=0,h=!1;this.chunks.forEach(t=>{let{pattern:n,alphabet:p,startIndex:f}=t;const{isMatch:m,score:g,indices:x}=lv(e,n,p,{location:o+f,distance:a,threshold:i,findAllMatches:s,minMatchCharLength:l,includeMatches:r,ignoreLocation:c});m&&(h=!0),u+=g,m&&x&&(d=[...d,...x])});let p={isMatch:h,score:h?u/this.chunks.length:1};return h&&r&&(p.indices=d),p}}class hv{constructor(e){this.pattern=e}static isMultiMatch(e){return pv(e,this.multiRegex)}static isSingleMatch(e){return pv(e,this.singleRegex)}search(){}}function pv(e,t){const n=e.match(t);return n?n[1]:null}class fv extends hv{constructor(e){let{location:t=nv.location,threshold:n=nv.threshold,distance:r=nv.distance,includeMatches:o=nv.includeMatches,findAllMatches:a=nv.findAllMatches,minMatchCharLength:i=nv.minMatchCharLength,isCaseSensitive:s=nv.isCaseSensitive,ignoreDiacritics:l=nv.ignoreDiacritics,ignoreLocation:c=nv.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._bitapSearch=new uv(e,{location:t,threshold:n,distance:r,includeMatches:o,findAllMatches:a,minMatchCharLength:i,isCaseSensitive:s,ignoreDiacritics:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class mv extends hv{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const r=[],o=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+o,r.push([t,n-1]);const a=!!r.length;return{isMatch:a,score:a?0:1,indices:r}}}const gv=[class extends hv{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},mv,class extends hv{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends hv{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends hv{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends hv{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends hv{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},fv],xv=gv.length,yv=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const vv=new Set([fv.type,mv.type]);class bv{constructor(e){let{isCaseSensitive:t=nv.isCaseSensitive,ignoreDiacritics:n=nv.ignoreDiacritics,includeMatches:r=nv.includeMatches,minMatchCharLength:o=nv.minMatchCharLength,ignoreLocation:a=nv.ignoreLocation,findAllMatches:i=nv.findAllMatches,location:s=nv.location,threshold:l=nv.threshold,distance:c=nv.distance}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r,minMatchCharLength:o,findAllMatches:i,ignoreLocation:a,location:s,threshold:l,distance:c},e=t?e:e.toLowerCase(),e=n?dv(e):e,this.pattern=e,this.query=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map(e=>{let n=e.trim().split(yv).filter(e=>e&&!!e.trim()),r=[];for(let o=0,a=n.length;o<a;o+=1){const e=n[o];let a=!1,i=-1;for(;!a&&++i<xv;){const n=gv[i];let o=n.isMultiMatch(e);o&&(r.push(new n(o,t)),a=!0)}if(!a)for(i=-1;++i<xv;){const n=gv[i];let o=n.isSingleMatch(e);if(o){r.push(new n(o,t));break}}}return r})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r,ignoreDiacritics:o}=this.options;e=r?e:e.toLowerCase(),e=o?dv(e):e;let a=0,i=[],s=0;for(let l=0,c=t.length;l<c;l+=1){const r=t[l];i.length=0,a=0;for(let t=0,o=r.length;t<o;t+=1){const o=r[t],{isMatch:l,indices:c,score:d}=o.search(e);if(!l){s=0,a=0,i.length=0;break}if(a+=1,s+=d,n){const e=o.constructor.type;vv.has(e)?i=[...i,...c]:i.push(c)}}if(a){let e={isMatch:!0,score:s/a};return n&&(e.indices=i),e}}return{isMatch:!1,score:1}}}const wv=[];function kv(e,t){for(let n=0,r=wv.length;n<r;n+=1){let r=wv[n];if(r.condition(e,t))return new r(e,t)}return new uv(e,t)}const Cv="$and",jv="$or",_v="$path",Nv="$val",Sv=e=>!(!e[Cv]&&!e[jv]),Ev=e=>({[Cv]:Object.keys(e).map(t=>({[t]:e[t]}))});function Av(e,t){let{auto:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e=>{let o=Object.keys(e);const a=(e=>!!e[_v])(e);if(!a&&o.length>1&&!Sv(e))return r(Ev(e));if((e=>!Vy(e)&&Xy(e)&&!Sv(e))(e)){const r=a?e[_v]:o[0],i=a?e[Nv]:e[r];if(!Uy(i))throw new Error((e=>"Invalid value for key ".concat(e))(r));const s={keyId:ev(r),pattern:i};return n&&(s.searcher=kv(i,t)),s}let i={children:[],operator:o[0]};return o.forEach(t=>{const n=e[t];Vy(n)&&n.forEach(e=>{i.children.push(r(e))})}),i};return Sv(e)||(e=Ev(e)),r(e)}function Pv(e,t){const n=e.matches;t.matches=[],Ky(n)&&n.forEach(e=>{if(!Ky(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let o={indices:n,value:r};e.key&&(o.key=e.key.src),e.idx>-1&&(o.refIndex=e.idx),t.matches.push(o)})}function Bv(e,t){t.score=e.score}class Iv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.options=qe(qe({},nv),t),this.options.useExtendedSearch,this._keyStore=new Jy(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof ov))throw new Error("Incorrect 'index' type");this._myIndex=t||av(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Ky(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1;const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,r-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e){let{limit:t=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeMatches:n,includeScore:r,shouldSort:o,sortFn:a,ignoreFieldNorm:i}=this.options;let s=Uy(e)?Uy(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,t){let{ignoreFieldNorm:n=nv.ignoreFieldNorm}=t;e.forEach(e=>{let t=1;e.matches.forEach(e=>{let{key:r,norm:o,score:a}=e;const i=r?r.weight:null;t*=Math.pow(0===a&&i?Number.EPSILON:a,(i||1)*(n?1:o))}),e.score=t})}(s,{ignoreFieldNorm:i}),o&&s.sort(a),Hy(t)&&t>-1&&(s=s.slice(0,t)),function(e,t){let{includeMatches:n=nv.includeMatches,includeScore:r=nv.includeScore}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=[];return n&&o.push(Pv),r&&o.push(Bv),e.map(e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return o.length&&o.forEach(t=>{t(e,r)}),r})}(s,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=kv(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(e=>{let{v:n,i:o,n:a}=e;if(!Ky(n))return;const{isMatch:i,score:s,indices:l}=t.searchIn(n);i&&r.push({item:n,idx:o,matches:[{score:s,value:n,norm:a,indices:l}]})}),r}_searchLogical(e){const t=Av(e,this.options),n=(e,t,r)=>{if(!e.children){const{keyId:n,searcher:o}=e,a=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:o});return a&&a.length?[{idx:r,item:t,matches:a}]:[]}const o=[];for(let a=0,i=e.children.length;a<i;a+=1){const i=e.children[a],s=n(i,t,r);if(s.length)o.push(...s);else if(e.operator===Cv)return[]}return o},r=this._myIndex.records,o={},a=[];return r.forEach(e=>{let{$:r,i:i}=e;if(Ky(r)){let e=n(t,r,i);e.length&&(o[i]||(o[i]={idx:i,item:r,matches:[]},a.push(o[i])),e.forEach(e=>{let{matches:t}=e;o[i].matches.push(...t)}))}}),a}_searchObjectList(e){const t=kv(e,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach(e=>{let{$:r,i:a}=e;if(!Ky(r))return;let i=[];n.forEach((e,n)=>{i.push(...this._findMatches({key:e,value:r[n],searcher:t}))}),i.length&&o.push({idx:a,item:r,matches:i})}),o}_findMatches(e){let{key:t,value:n,searcher:r}=e;if(!Ky(n))return[];let o=[];if(Vy(n))n.forEach(e=>{let{v:n,i:a,n:i}=e;if(!Ky(n))return;const{isMatch:s,score:l,indices:c}=r.searchIn(n);s&&o.push({score:l,key:t,value:n,idx:a,norm:i,indices:c})});else{const{v:e,n:a}=n,{isMatch:i,score:s,indices:l}=r.searchIn(e);i&&o.push({score:s,key:t,value:e,norm:a,indices:l})}return o}}Iv.version="7.1.0",Iv.createIndex=av,Iv.parseIndex=function(e){let{getFn:t=nv.getFn,fieldNormWeight:n=nv.fieldNormWeight}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{keys:r,records:o}=e,a=new ov({getFn:t,fieldNormWeight:n});return a.setKeys(r),a.setIndexRecords(o),a},Iv.config=nv,Iv.parseQuery=Av,function(){wv.push(...arguments)}(bv);const Tv=e=>{let{value:n,onChange:r,placeholder:o="Ketik nama produk...",className:a="",disabled:i=!1}=e;const[s,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(-1),[p,f]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{d(!0);try{const e=localStorage.getItem("access_token"),t=await fetch("/api/products/all",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch products");const n=await t.json();l(n);const r=new Iv(n,{keys:["name"],threshold:.3,distance:100,minMatchCharLength:1});f(r)}catch(e){console.error("Failed to fetch products:",e)}finally{d(!1)}})()},[]);const m=(0,t.useMemo)(()=>{if(!n||!p)return s.slice(0,10);return p.search(n).map(e=>e.item).slice(0,10)},[n,p,s]);return c?(0,Fe.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Fe.jsxs)("svg",{className:"animate-spin h-5 w-5 mx-auto text-amber-500",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Fe.jsx)("div",{className:"mt-2 text-sm",children:"Loading produk..."})]}):0===m.length?(0,Fe.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Fe.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Fe.jsx)("div",{className:"text-sm",children:n?"Produk tidak ditemukan":"Belum ada produk"}),n&&(0,Fe.jsxs)("button",{onClick:()=>r(n),className:"mt-2 text-xs text-amber-600 hover:text-amber-700",children:['Tambah "',n,'" sebagai produk baru']})]}):(0,Fe.jsxs)("div",{className:"p-2 max-h-80 overflow-y-auto",children:[(0,Fe.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:n?"\ud83d\udd0d ".concat(m.length," hasil:"):"\ud83d\udd25 Produk Sering Dibeli:"}),(0,Fe.jsx)("div",{className:"space-y-0.5",children:m.map((e,t)=>{return(0,Fe.jsxs)("button",{onClick:()=>(e=>{r(e.name,e)})(e),className:"w-full px-3 py-2 text-left hover:bg-amber-50 flex items-center justify-between rounded transition-colors ".concat(t===u?"bg-amber-50":""),children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fe.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,Fe.jsx)("div",{className:"text-xs text-gray-500",children:e.unit})]})]}),e.last_price&&(0,Fe.jsx)("span",{className:"text-xs text-gray-500",children:(n=e.last_price,n?n>=1e6?"".concat((n/1e6).toFixed(1),"jt"):n>=1e3?"".concat(Math.round(n/1e3),"rb"):n.toString():"")})]},"".concat(e.name,"-").concat(e.unit,"-").concat(t));var n})})]})},Mv=e=>{let{value:n,onChange:r,placeholder:o="Ketik nama supplier...",className:a="",disabled:i=!1}=e;const[s,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(-1),[p,f]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{d(!0);try{const e=localStorage.getItem("access_token"),t=await fetch("/api/suppliers/all",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch suppliers");const n=await t.json();l(n);const r=new Iv(n,{keys:["name"],threshold:.3,distance:100,minMatchCharLength:1});f(r)}catch(e){console.error("Failed to fetch suppliers:",e)}finally{d(!1)}})()},[]);const m=(0,t.useMemo)(()=>{if(!n||!p)return s.slice(0,10);return p.search(n).map(e=>e.item).slice(0,10)},[n,p,s]);return c?(0,Fe.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Fe.jsxs)("svg",{className:"animate-spin h-5 w-5 mx-auto text-amber-500",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Fe.jsx)("div",{className:"mt-2 text-sm",children:"Loading supplier..."})]}):0===m.length?(0,Fe.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Fe.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Fe.jsx)("div",{className:"text-sm",children:n?"Supplier tidak ditemukan":"Belum ada supplier"}),n&&(0,Fe.jsxs)("button",{onClick:()=>r(n),className:"mt-2 text-xs text-amber-600 hover:text-amber-700",children:['Tambah "',n,'" sebagai supplier baru']})]}):(0,Fe.jsxs)("div",{className:"p-2 max-h-80 overflow-y-auto",children:[(0,Fe.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:n?"\ud83c\udfe2 ".concat(m.length," hasil:"):"\ud83d\udd25 Supplier Sering Dipakai:"}),(0,Fe.jsx)("div",{className:"space-y-0.5",children:m.map((e,t)=>(0,Fe.jsx)("button",{onClick:()=>(e=>{r(e.name)})(e),className:"w-full px-3 py-2 text-left hover:bg-amber-50 flex items-center justify-between rounded transition-colors ".concat(t===u?"bg-amber-50":""),children:(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fe.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium text-sm",children:e.name}),e.contact&&(0,Fe.jsx)("div",{className:"text-xs text-gray-500",children:e.contact})]})]})},"".concat(e.name,"-").concat(t)))})]})},Dv=()=>{const[e,n]=(0,t.useState)(0);return(0,t.useEffect)(()=>{const e=setInterval(()=>{n(e=>(e+1)%4)},400);return()=>clearInterval(e)},[]),(0,Fe.jsxs)("span",{children:["Scanning",".".repeat(e)]})},Rv=e=>{let{isOpen:n,productId:r,productName:o,onClose:a,onSuccess:i}=e;const[s,l]=(0,t.useState)("choose"),[c,d]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(""),[m,g]=(0,t.useState)(!1),[x,y]=(0,t.useState)(""),[v,b]=(0,t.useState)(null),[w,k]=(0,t.useState)(""),[C,j]=(0,t.useState)(!1),_=(0,t.useRef)(!0),N=(0,t.useRef)(!1),S=(0,t.useRef)(null),E=(0,t.useRef)(null);(0,t.useEffect)(()=>{n?(l("choose"),d(""),f(""),y(""),g(!1),b(null),k(""),j(!1),_.current=!0,N.current=!1):(A(),_.current=!1)},[n]),(0,t.useEffect)(()=>()=>{_.current=!1,A()},[]);const A=()=>{S.current&&(S.current.stop(),S.current=null),console.log("[BarcodeModal] Scanner cleanup")},P=e=>e?/^\d+$/.test(e)?13!==e.length?{valid:!1,message:"Barcode harus 13 digit (EAN-13). Terdeteksi ".concat(e.length," digit.")}:{valid:!0,message:""}:{valid:!1,message:"Barcode harus berupa angka saja"}:{valid:!1,message:"Barcode kosong"},B=(0,t.useCallback)(async e=>{const t=P(e);if(t.valid){h(!0),f("");try{const t=localStorage.getItem("access_token"),n=await fetch("/api/products/".concat(r,"/barcode"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({barcode:e})});if(!n.ok){const e=await n.json();throw new Error(e.detail||"Gagal menyimpan barcode")}i(e)}catch(n){console.error("[BarcodeModal] Submit error:",n),f(n.message||"Gagal menyimpan barcode")}finally{h(!1)}}else f(t.message)},[r,i]),I=(0,t.useCallback)(e=>{if(!_.current||N.current)return;const t=e.text;console.log("[BarcodeModal] Barcode detected:",t,"format:",e.format),N.current=!0,A(),g(!1),navigator.vibrate&&navigator.vibrate(200);const n=P(t);b(t),n.valid?B(t):k(n.message)},[B]),T=(0,t.useCallback)(async()=>{y(""),b(null),k(""),j(!0),N.current=!1,console.log("[BarcodeModal] Initializing scanner...");try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return y("Browser tidak mendukung akses kamera."),void j(!1);if(await new Promise(e=>setTimeout(e,100)),!_.current||!E.current)return;const e=new Ix(E.current,{desiredWidth:1280,desiredHeight:720,decodeFPS:12,roiResizeLongSide:800,consensusFrames:2});e.onFound(I),e.onProgress(e=>{console.log("[BarcodeModal] Progress:",e.phase),"camera-ready"===e.phase&&(g(!0),j(!1))}),e.onError(e=>{console.error("[BarcodeModal] Scanner error:",e),e.message.includes("Permission")||"NotAllowedError"===e.name?y("Akses kamera ditolak. Izinkan akses kamera di pengaturan browser."):"NotFoundError"===e.name?y("Kamera tidak ditemukan."):y("Gagal mengakses kamera: ".concat(e.message)),j(!1)}),S.current=e,await e.start()}catch(e){console.error("[BarcodeModal] Scanner init error:",e),y("Gagal memulai scanner."),j(!1)}},[I]),M=async e=>{l(e),f(""),k(""),b(null),"scan"===e&&await T()},D=()=>{A(),g(!1),y(""),l("choose"),d(""),f(""),b(null),k("")},R=async()=>{b(null),k(""),N.current=!1,await T()},O=()=>{l("manual"),b(null),k(""),v&&d(v)};(0,t.useEffect)(()=>{"manual"===s&&13===c.length&&B(c.trim())},[c,s,B]);return n?"scan"===s?(0,Fe.jsxs)("div",{className:"fixed inset-0 z-[200] bg-gray-900 flex flex-col",children:[(0,Fe.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center gap-3",children:[(0,Fe.jsx)("button",{onClick:D,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors active:bg-gray-200",children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Fe.jsxs)("div",{className:"flex-1",children:[(0,Fe.jsx)("h1",{className:"font-semibold text-lg",children:"Daftarkan Barcode"}),(0,Fe.jsx)("p",{className:"text-sm text-gray-500 truncate",children:o})]}),(0,Fe.jsx)("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Fe.jsxs)("div",{className:"flex-1 relative bg-black",children:[(0,Fe.jsx)("video",{ref:E,className:"absolute inset-0 w-full h-full object-cover",playsInline:!0,muted:!0,autoPlay:!0}),x&&(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white p-6 z-10 bg-black",children:(0,Fe.jsxs)("div",{className:"text-center max-w-md",children:[(0,Fe.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,Fe.jsx)("p",{className:"mb-4",children:x}),(0,Fe.jsxs)("button",{onClick:T,className:"px-6 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 active:bg-amber-700 transition-colors flex items-center gap-2 mx-auto",children:[(0,Fe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Coba Lagi"]})]})}),C&&(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white z-10 bg-black",children:(0,Fe.jsxs)("div",{className:"text-center",children:[(0,Fe.jsx)("img",{src:"/icons/CAM.png",alt:"Camera",className:"mx-auto mb-3 animate-pulse",style:{width:"48px",height:"48px"}}),(0,Fe.jsx)("p",{children:"Memulai scanner..."})]})}),m&&!v&&(0,Fe.jsx)("div",{className:"absolute inset-0 pointer-events-none z-10",children:(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Fe.jsxs)("div",{className:"relative transition-all duration-200",style:{width:"85vw",height:"60vh",maxWidth:"500px",maxHeight:"400px",boxShadow:"0 0 20px ".concat("rgba(255, 255, 255, 0.3)")},children:[(0,Fe.jsx)("div",{className:"absolute top-0 left-0 w-10 h-10 border-t-4 border-l-4 ".concat("border-white/70"," transition-colors")}),(0,Fe.jsx)("div",{className:"absolute top-0 right-0 w-10 h-10 border-t-4 border-r-4 ".concat("border-white/70"," transition-colors")}),(0,Fe.jsx)("div",{className:"absolute bottom-0 left-0 w-10 h-10 border-b-4 border-l-4 ".concat("border-white/70"," transition-colors")}),(0,Fe.jsx)("div",{className:"absolute bottom-0 right-0 w-10 h-10 border-b-4 border-r-4 ".concat("border-white/70"," transition-colors")}),(0,Fe.jsx)("div",{className:"absolute left-2 right-2 h-0.5 bg-white/80",style:{boxShadow:"0 0 10px rgba(255, 255, 255, 0.6)",animation:"scanLine 1.5s ease-in-out infinite"}})]})})}),v&&w&&(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-30 bg-black/80",children:(0,Fe.jsx)("div",{className:"bg-white rounded-xl p-6 mx-4 max-w-sm w-full shadow-2xl",children:(0,Fe.jsxs)("div",{className:"text-center",children:[(0,Fe.jsx)("svg",{className:"w-10 h-10 mx-auto mb-3 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,Fe.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Barcode Tidak Valid"}),(0,Fe.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:w}),(0,Fe.jsx)("p",{className:"text-xs text-gray-400 mb-4 font-mono",children:v}),(0,Fe.jsxs)("div",{className:"flex gap-2",children:[(0,Fe.jsx)("button",{onClick:R,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Scan Ulang"}),(0,Fe.jsx)("button",{onClick:O,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Input Manual"})]})]})})}),u&&(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-30 bg-black/80",children:(0,Fe.jsx)("div",{className:"bg-white rounded-xl p-6 mx-4 max-w-sm w-full shadow-2xl",children:(0,Fe.jsxs)("div",{className:"text-center",children:[(0,Fe.jsxs)("svg",{className:"animate-spin w-8 h-8 mx-auto mb-3 text-gray-600",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Fe.jsx)("p",{className:"text-sm text-gray-600",children:"Menyimpan barcode..."})]})})}),(0,Fe.jsx)("style",{children:"\n            @keyframes scanLine {\n              0% { top: 10%; }\n              50% { top: 90%; }\n              100% { top: 10%; }\n            }\n          "}),m&&!v&&(0,Fe.jsx)("div",{className:"absolute bottom-32 left-0 right-0 text-center text-white z-20",children:(0,Fe.jsx)("div",{className:"inline-block px-6 py-3 rounded-full backdrop-blur-sm bg-black/60",children:(0,Fe.jsx)("p",{className:"text-sm font-medium",children:(0,Fe.jsx)(Dv,{})})})})]})]}):(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&"scan"!==s&&a()},children:(0,Fe.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-md shadow-2xl overflow-hidden",children:[(0,Fe.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"choose"===s?"Daftarkan Barcode":"Input Barcode Manual"}),(0,Fe.jsx)("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Fe.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Fe.jsx)("p",{className:"text-sm text-gray-500 mt-1 truncate",children:o})]}),(0,Fe.jsx)("div",{className:"p-4",children:"choose"===s?(0,Fe.jsxs)("div",{className:"space-y-3",children:[(0,Fe.jsxs)("button",{onClick:()=>M("scan"),className:"w-full p-4 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition-colors flex items-center gap-4",children:[(0,Fe.jsx)("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center",children:(0,Fe.jsx)("img",{src:"/icons/CAM.png",alt:"Camera",style:{width:"24px",height:"24px"}})}),(0,Fe.jsxs)("div",{className:"text-left",children:[(0,Fe.jsx)("p",{className:"font-medium text-gray-900",children:"Scan Barcode"}),(0,Fe.jsx)("p",{className:"text-sm text-gray-500",children:"Gunakan kamera untuk scan"})]})]}),(0,Fe.jsxs)("button",{onClick:()=>M("manual"),className:"w-full p-4 border-2 border-gray-200 rounded-xl hover:border-gray-400 hover:bg-gray-50 transition-colors flex items-center gap-4",children:[(0,Fe.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:(0,Fe.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,Fe.jsxs)("div",{className:"text-left",children:[(0,Fe.jsx)("p",{className:"font-medium text-gray-900",children:"Input Manual"}),(0,Fe.jsx)("p",{className:"text-sm text-gray-500",children:"Ketik barcode 13 digit"})]})]})]}):(0,Fe.jsxs)("div",{className:"space-y-4",children:[(0,Fe.jsx)("input",{type:"text",value:c,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,13);d(t),f("")},placeholder:"13 digit code",className:"w-full px-4 py-4 text-xl text-center font-mono border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 tracking-widest placeholder:text-gray-400 placeholder:text-base placeholder:font-sans",inputMode:"numeric",pattern:"[0-9]*",maxLength:13,autoFocus:!0}),p&&(0,Fe.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,Fe.jsx)("p",{className:"text-sm text-red-600",children:p})}),u&&(0,Fe.jsx)("div",{className:"text-center py-2",children:(0,Fe.jsx)("p",{className:"text-sm text-gray-500",children:"Menyimpan..."})}),(0,Fe.jsx)("button",{type:"button",onClick:D,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Kembali"})]})})]})}):null};class Ov{constructor(){this.denominations=[1e5,5e4,2e4,1e4,5e3,2e3,1e3,500,100]}calculate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const n=new Set;n.add(100*Math.ceil(e/100)),n.add(500*Math.ceil(e/500)),n.add(1e3*Math.ceil(e/1e3));const r=5e3*Math.ceil(e/5e3);n.add(r),r===Math.round(e)&&e%1e4!==0&&n.add(r+5e3);const o=1e4*Math.ceil(e/1e4);if(n.add(o),o===Math.round(e)&&n.add(o+1e4),e%1e4===0&&e>0)n.add(e+1e3);else{const t=5e3*Math.floor(e/5e3),r=5e3*Math.ceil(e/5e3);for(let o=1;o<=3;o++){const a=t+2e3*o;if(a>e&&a<r&&a-e<2e3){n.add(a);break}}}e>5e4&&e<=7e4&&n.add(7e4),e>7e4&&e<=8e4&&n.add(8e4),e>7e4&&e<=9e4&&n.add(9e4),e<=2e4&&n.add(2e4),e<=5e4&&n.add(5e4),n.add(1e5),e>1e5&&e<=15e4&&n.add(15e4),e>15e4&&e<=17e4&&n.add(17e4),e>1e5&&e<=2e5&&n.add(2e5),e>2e5&&e<=25e4&&n.add(25e4),e>2e5&&e<=3e5&&n.add(3e5),e>3e5&&e<=4e5&&n.add(4e5),e>4e5&&e<=5e5&&n.add(5e5);const a=1e5*Math.ceil(e/1e5);return Array.from(n).filter(t=>t>=e&&t<=a).sort((e,t)=>e-t).slice(0,t).map(t=>{const n=this.greedyBills(t);return{total:t,change:t-e,count:n.length,bills:n,label:this.getLabel(t,e),formatted:this.formatBills(n)}})}greedyBills(e){const t=[];let n=e;for(const r of this.denominations)for(;n>=r;)t.push(r),n-=r;return t}getLabel(e,t){return e===100*Math.ceil(t/100)&&e-t<100?"UANG PAS":5e4===e||1e5===e||2e5===e?"PECAHAN":e%1e4===0?"BULAT":"KEMBALIAN KECIL"}formatBills(e){if(0===e.length)return"";const t=new Map;for(const n of e)t.set(n,(t.get(n)||0)+1);return Array.from(t.entries()).sort((e,t)=>t[0]-e[0]).map(e=>{let[t,n]=e;const r=this.formatDenom(t);return n>1?"".concat(n,"\xd7").concat(r):r}).join(" + ")}formatDenom(e){return e>=1e3?"".concat(e/1e3,"k"):"".concat(e)}formatCurrency(e){return"Rp ".concat(e.toLocaleString("id-ID"))}}const Fv={duration:.3,ease:[.4,0,.2,1]},Lv="#F97316",zv="#0EA5E9",Wv="#262626",Vv="#737373",Uv="#D4D4D4",Hv="#E5E5E5",Gv="#F5F5F5",Xv="#FFFFFF",Kv="#262626",Yv="#22C55E",qv=e=>{let{tenantId:n,onClose:r,isEmbedded:o=!1,onTransactionComplete:a,initialItems:i,initialPaymentMethod:s,onPrefillProcessed:l}=e;const[c,d]=(0,t.useState)("pos"),[u,h]=(0,t.useState)("left"),[p,f]=(0,t.useState)(!1),[m,g]=(0,t.useState)([]),[x,y]=(0,t.useState)(0),[v,b]=(0,t.useState)(!0),[w,k]=(0,t.useState)(!1),[C,j]=(0,t.useState)(""),_=(0,t.useRef)(null),N=(0,t.useRef)(null),[S,E]=(0,t.useState)(""),[A,P]=(0,t.useState)(!1),[B,I]=(0,t.useState)([]),[T,M]=(0,t.useState)(!1),D=(0,t.useRef)(null),R=(0,t.useRef)(null),[O,F]=(0,t.useState)("tunai"),[L,z]=(0,t.useState)(""),[W,V]=(0,t.useState)(null),[U,H]=(0,t.useState)([]),[G,X]=(0,t.useState)(!1),[K,Y]=(0,t.useState)(!1),q=(0,t.useRef)(null),[Z,J]=(0,t.useState)(0),[Q,$]=(0,t.useState)([]),[ee,te]=(0,t.useState)(null),ne=(0,t.useRef)(null),[re,oe]=(0,t.useState)(!1),[ae,ie]=(0,t.useState)(""),[se,le]=(0,t.useState)(!1),[ce,de]=(0,t.useState)(null),[ue,he]=(0,t.useState)(!1),[pe,fe]=(0,t.useState)(!1),[me,ge]=(0,t.useState)(!1),[xe,ye]=(0,t.useState)(""),[ve,be]=(0,t.useState)(""),[we,ke]=(0,t.useState)(""),[Ce,je]=(0,t.useState)(!1),[_e,Ne]=(0,t.useState)(0),[Se,Ee]=(0,t.useState)(0),[Pe,Be]=(0,t.useState)(!1),Ie="pos_draft_".concat(n),Te=(0,t.useRef)({barcode:"",time:0}),Me=(0,t.useRef)(()=>{}),De=(0,t.useRef)(null),Re=(0,t.useMemo)(()=>new Ov,[]),Oe=m.reduce((e,t)=>e+t.price*t.qty,0),Le=Math.round(Oe*(x/100)),ze=Oe-Le,We=Z-ze;(0,t.useEffect)(()=>{if(!i||0===i.length)return;(async()=>{console.log("[SalesTransaction] Processing initial items from chat:",i);for(const t of i)try{const e=localStorage.getItem("access_token"),n=await fetch("/api/products/search/pos?q=".concat(encodeURIComponent(t.productQuery),"&limit=1"),{headers:{Authorization:"Bearer ".concat(e)}}),r=await n.json();if(r.products&&r.products.length>0){const e=r.products[0];console.log("[SalesTransaction] Found product for query:",t.productQuery,"->",e.name),g(n=>{const r=n.findIndex(t=>t.id===e.id||t.name.toLowerCase()===e.name.toLowerCase());if(r>=0){console.log("[SalesTransaction] Product exists in cart, adding qty:",t.qty);const e=[...n];return e[r]=qe(qe({},e[r]),{},{qty:e[r].qty+t.qty}),e}return console.log("[SalesTransaction] Adding new product to cart:",e.name,"x",t.qty),[...n,{id:e.id,productId:e.id,name:e.name,price:e.harga_jual,qty:t.qty,barcode:e.barcode||""}]}),Ny.itemAdded()}else console.warn("[SalesTransaction] Product not found for query:",t.productQuery)}catch(e){console.error("[SalesTransaction] Error searching product:",t.productQuery,e)}null===l||void 0===l||l()})()},[i,l]),(0,t.useEffect)(()=>{s&&(console.log("[SalesTransaction] Setting initial payment method:",s),F(s))},[s]),(0,t.useEffect)(()=>{let e=!0,t=null;if(v&&"pos"===c){k(!0),j("");const n=async()=>{if(_.current){if(e)try{N.current=new Ix(_.current,{desiredWidth:1280,desiredHeight:720,decodeFPS:20,roiResizeLongSide:600,consensusFrames:1}),N.current.onFound(e=>{const t=Date.now(),n=e.text;n===Te.current.barcode&&t-Te.current.time<1500||(Te.current={barcode:n,time:t},Me.current(n))}),N.current.onProgress(t=>{"camera-ready"===t.phase&&e&&k(!1)}),N.current.onError(t=>{e&&(j(t.message||"Gagal mengakses kamera"),k(!1))}),await N.current.start()}catch(t){e&&(j(t.message||"Gagal memulai scanner"),k(!1))}}else console.log("[Scanner] Waiting for video element...")};t=setTimeout(()=>{n()},350)}return()=>{e=!1,t&&clearTimeout(t),N.current&&(N.current.stop(),N.current=null)}},[v,c]);const Ve=(0,t.useCallback)(async e=>{ie("");const t=m.findIndex(t=>t.barcode===e);if(-1!==t)return g(e=>e.map((e,n)=>n===t?qe(qe({},e),{},{qty:e.qty+1}):e)),void Ny.scanSuccess();try{const t=localStorage.getItem("access_token"),r=await fetch("/api/products/barcode/".concat(e,"?tenant_id=").concat(n),{headers:{Authorization:"Bearer ".concat(t)}});if(!r.ok)return Ny.scanError(),void le(!0);const o=await r.json(),a={id:"cart_".concat(Date.now()),productId:o.id,name:o.nama_produk||o.name,barcode:e,price:o.harga_jual||o.price||0,qty:1};g(e=>[...e,a]),Ny.scanSuccess()}catch(iN){Ny.scanError(),le(!0)}},[n,m]);(0,t.useEffect)(()=>{Me.current=Ve},[Ve]),(0,t.useEffect)(()=>{m.length>5&&De.current&&(De.current.scrollTop=De.current.scrollHeight)},[m.length]),(0,t.useEffect)(()=>{try{const e=localStorage.getItem(Ie);if(e){const t=JSON.parse(e);t.cart&&t.cart.length>0&&Be(!0)}}catch(iN){console.error("Failed to load POS draft:",iN)}},[Ie]),(0,t.useEffect)(()=>{if(m.length>0)try{const e={cart:m,discount:x,savedAt:(new Date).toISOString()};localStorage.setItem(Ie,JSON.stringify(e))}catch(iN){console.error("Failed to save POS draft:",iN)}},[m,x,Ie]);const Ue=()=>{try{localStorage.removeItem(Ie)}catch(iN){console.error("Failed to clear POS draft:",iN)}};(0,t.useEffect)(()=>{R.current&&clearTimeout(R.current);const e=S.replace(/\D/g,"");if(13===e.length)return Ve(e),E(""),void P(!1);if(S&&A){M(!0);const e=S.length>=3?0:80;0===e?He(S):R.current=setTimeout(()=>{He(S)},e)}else I([]),M(!1);return()=>{R.current&&clearTimeout(R.current)}},[S,A]);const He=(0,t.useCallback)(async e=>{if(e.length<1)I([]);else{M(!0);try{const t=localStorage.getItem("access_token"),n=await fetch("/api/products/search/pos?q=".concat(encodeURIComponent(e),"&limit=10"),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=((await n.json()).products||[]).map(e=>({id:e.id,name:e.name,barcode:e.barcode||"",price:e.harga_jual||0,stock:e.stok||0}));I(e)}else console.error("Product search failed:",n.status),I([])}catch(iN){console.error("Product search failed:",iN),I([])}finally{M(!1)}}},[]);(0,t.useEffect)(()=>(q.current&&clearTimeout(q.current),L&&G?q.current=setTimeout(()=>{Ge(L)},200):H([]),()=>{q.current&&clearTimeout(q.current)}),[L,G]);const Ge=(0,t.useCallback)(async e=>{if(e.length<1)H([]);else{Y(!0);try{const t=Ae(),n=await fetch("/api/members/search?q=".concat(encodeURIComponent(e),"&limit=10"),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();H(e.members||[])}else console.error("Member search failed:",n.status),H([])}catch(iN){console.error("Member search error:",iN),H([])}finally{Y(!1)}}},[]),Xe=e=>{g(t=>t.map(t=>t.id===e?qe(qe({},t),{},{qty:t.qty+1}):t))},Ke=e=>{g(t=>{const n=t.find(t=>t.id===e);return n&&n.qty<=1?t.filter(t=>t.id!==e):t.map(t=>t.id===e?qe(qe({},t),{},{qty:t.qty-1}):t)})},Ye=()=>y(e=>Math.min(100,e+1)),Ze=()=>{ye(x.toString()),he(!0)},Je=()=>{be(Z>0?Z.toString():ze.toString()),fe(!0)},Qe=async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){const e=new FileReader;e.onload=async e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.result,r=await function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return new Promise(n=>{const r=new Image;r.onload=()=>{const e=document.createElement("canvas");let o=r.width,a=r.height;const i=1024;(o>i||a>i)&&(o>a?(a=a/o*i,o=i):(o=o/a*i,a=i)),e.width=o,e.height=a,e.getContext("2d").drawImage(r,0,0,o,a);let s=.8,l=e.toDataURL("image/jpeg",s);for(;l.length>1024*t&&s>.3;)s-=.1,l=e.toDataURL("image/jpeg",s);n(l)},r.src=e})}(n);te(r)},e.readAsDataURL(n)}e.target.value=""},$e=()=>{0!==m.length&&(J(ze),$([ze]),Ne(ze),Ee(0),h("left"),d("checkout"))},et=()=>{h("right"),d("pos")},tt=async()=>{if(!re&&0!==m.length){if("tunai"===O&&Z<ze)return ie("Pembayaran kurang"),void setTimeout(()=>ie(""),3e3);if("qris"===O&&!ee)return ie("Bukti transfer diperlukan"),void setTimeout(()=>ie(""),3e3);oe(!0);try{const e=localStorage.getItem("access_token"),t={tunai:"CASH",qris:"QRIS",hutang:"CASH"},n={items:m.map(e=>({productId:e.productId,name:e.name,barcode:e.barcode,qty:e.qty,price:e.price})),totalAmount:ze,paymentAmount:"tunai"===O?Z:"hutang"===O?Se:ze,kembalian:"tunai"===O?Math.max(0,We):0,paymentMethod:t[O]||"CASH",proofImage:ee||void 0,discount:x,hutang:"hutang"===O?_e:0},r=await fetch("/api/transactions/sales",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(n)}),o=await r.json();if(r.ok&&"success"===o.status){if(Ny.transactionComplete(),de(o),f(!0),Ue(),W){const e=await(async(e,t)=>{try{const n=Ae(),r=await fetch("/api/members/add-points",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({member_id:e,transaction_amount:t})});if(r.ok){const t=await r.json();return console.log("Points added:",t),W&&W.id===e&&V(qe(qe({},W),{},{points:t.new_total_points})),t}}catch(iN){console.error("Failed to add points:",iN)}return null})(W.id,ze);e&&console.log("[POS] Added ".concat(e.points_added," points to ").concat(W.nama))}a&&o.message&&a(o.message)}else{let e="Transaksi gagal";o.message&&"string"===typeof o.message?e=o.message:o.detail&&("string"===typeof o.detail?e=o.detail:Array.isArray(o.detail)&&o.detail.length>0&&(e=o.detail.map(e=>e.msg||"Validation error").join(", "))),ie(e),setTimeout(()=>ie(""),3e3)}}catch(iN){ie("Transaksi gagal"),setTimeout(()=>ie(""),3e3)}finally{oe(!1)}}},nt=()=>{g([]),y(0),J(0),$([]),te(null),F("tunai"),Ne(0),Ee(0),f(!1),V(null),z(""),de(null),h("right"),d("pos"),Ue()},rt=e=>"Rp ".concat(e.toLocaleString("id-ID"));return(0,Fe.jsxs)("div",{className:"flex flex-col overflow-hidden ".concat(o?"h-full w-full":"fixed inset-0 z-50"),style:{backgroundColor:Hv,fontFamily:"'Hiragino Kaku Gothic ProN', -apple-system, sans-serif"},children:[(0,Fe.jsx)(ct,{mode:"wait",custom:u,children:(0,Fe.jsx)(hc.div,{custom:u,variants:{enter:e=>({x:"left"===e?"100%":"-100%"}),center:{x:0},exit:e=>({x:"left"===e?"-100%":"100%"})},initial:"enter",animate:"center",exit:"exit",transition:Fv,className:"flex-1 flex flex-col overflow-hidden",children:"pos"===c?(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 flex-shrink-0",style:{height:"48px",paddingTop:"max(4px, env(safe-area-inset-top))"},children:[(0,Fe.jsx)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Uv},children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain"})}),(0,Fe.jsx)("span",{className:"font-semibold text-lg",style:{color:"#525252"},children:"Point of Sales"})]}),(0,Fe.jsx)("div",{className:"mx-4 mb-4 flex-shrink-0",children:(0,Fe.jsxs)("div",{className:"bg-white",style:{boxShadow:"0 1px 3px rgba(0,0,0,0.1)",borderRadius:"12px"},children:[(0,Fe.jsx)("div",{className:"relative overflow-hidden",style:{background:Hv,aspectRatio:"16/9",borderRadius:"12px 12px 0 0"},children:v?(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("video",{ref:_,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),w&&(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",style:{background:Hv},children:(0,Fe.jsxs)("div",{className:"text-center",style:{color:"#525252"},children:[(0,Fe.jsxs)("svg",{className:"w-8 h-8 mx-auto mb-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),(0,Fe.jsx)("span",{className:"text-sm",children:"Memulai kamera..."})]})}),C&&(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",style:{background:Hv},children:(0,Fe.jsx)("p",{className:"text-sm px-4 text-center",style:{color:"#525252"},children:C})}),!w&&!C&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("div",{className:"absolute top-3 left-3 w-10 h-10",style:{border:"3px solid ".concat(Lv),borderRight:0,borderBottom:0,borderRadius:"4px 0 0 0"}}),(0,Fe.jsx)("div",{className:"absolute top-3 right-3 w-10 h-10",style:{border:"3px solid ".concat(Lv),borderLeft:0,borderBottom:0,borderRadius:"0 4px 0 0"}}),(0,Fe.jsx)("div",{className:"absolute bottom-3 left-3 w-10 h-10",style:{border:"3px solid ".concat(Lv),borderRight:0,borderTop:0,borderRadius:"0 0 0 4px"}}),(0,Fe.jsx)("div",{className:"absolute bottom-3 right-3 w-10 h-10",style:{border:"3px solid ".concat(Lv),borderLeft:0,borderTop:0,borderRadius:"0 0 4px 0"}})]})]}):(0,Fe.jsx)("button",{onClick:()=>b(!0),className:"w-full h-full flex items-center justify-center",style:{color:"#525252"},children:(0,Fe.jsxs)("div",{className:"text-center",children:[(0,Fe.jsx)("img",{src:"/icons/CAM.png",alt:"Camera",className:"mx-auto mb-2",style:{width:"40px",height:"40px"}}),(0,Fe.jsx)("span",{className:"text-sm",children:"Tap untuk scan"})]})})}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("input",{ref:D,type:"text",inputMode:S.length>0&&/^\d/.test(S)?"numeric":"text",value:S,onChange:e=>{return t=e.target.value,E(t),void P(t.length>0);var t},onFocus:()=>S&&P(!0),onBlur:()=>setTimeout(()=>P(!1),200),placeholder:"Input barcode atau ketik nama produk",className:"w-full px-4 border-none focus:outline-none",style:{height:"48px",fontSize:"14px",color:"#A3A3A3",borderRadius:"0 0 12px 12px"}}),A&&S&&(0,Fe.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white z-50 overflow-y-auto",style:{border:"1px solid ".concat(Hv),borderRadius:"0 0 12px 12px",maxHeight:"240px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:T?(0,Fe.jsx)("div",{className:"px-4 py-3 text-sm",style:{color:Vv},children:"Mencari..."}):B.length>0?B.map(e=>(0,Fe.jsxs)("div",{onClick:()=>(e=>{const t=m.findIndex(t=>t.productId===e.id);if(-1!==t)g(e=>e.map((e,n)=>n===t?qe(qe({},e),{},{qty:e.qty+1}):e));else{const t={id:"cart_".concat(Date.now()),productId:e.id,name:e.name,barcode:e.barcode,price:e.price,qty:1};g(e=>[...e,t])}Ny.itemAdded(),E(""),P(!1),I([])})(e),className:"px-4 py-3 cursor-pointer transition-colors hover:bg-gray-50",style:{borderBottom:"1px solid ".concat(Gv)},children:[(0,Fe.jsx)("div",{className:"text-sm font-medium",style:{color:Kv},children:e.name}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:Vv},children:rt(e.price)})]},e.id)):(0,Fe.jsxs)("div",{className:"px-4 py-3 text-sm",style:{color:Vv},children:['Tidak ditemukan "',S,'"']})})]})]})}),(0,Fe.jsx)("div",{className:"mx-4 mb-2 flex-1 min-h-0",children:(0,Fe.jsxs)("div",{className:"bg-white overflow-hidden h-full flex flex-col",style:{boxShadow:"0 1px 3px rgba(0,0,0,0.1)",borderRadius:"12px"},children:[(0,Fe.jsxs)("div",{className:"grid gap-2 px-4",style:{gridTemplateColumns:"1fr 100px 80px",height:"32px",alignItems:"center",background:"#FAFAFA",borderBottom:"1px solid ".concat(Hv),fontSize:"11px",fontWeight:600,color:Vv,fontFamily:"'Hiragino Kaku Gothic ProN', -apple-system, sans-serif"},children:[(0,Fe.jsx)("div",{children:"Description"}),(0,Fe.jsx)("div",{className:"text-center",children:"Qty"}),(0,Fe.jsx)("div",{className:"text-right",children:"Amount"})]}),(0,Fe.jsx)("div",{ref:De,className:"flex-1 min-h-0 flex flex-col",style:{overflowY:m.length>5?"auto":"hidden"},children:m.length<=5?(0,Fe.jsxs)(Fe.Fragment,{children:[m.map((e,t)=>(0,Fe.jsxs)("div",{className:"flex-1 grid gap-2 px-4 items-center",style:{gridTemplateColumns:"1fr 100px 80px",background:t%2===0?Xv:Gv,borderBottom:"1px solid ".concat(Gv)},children:[(0,Fe.jsx)("div",{className:"truncate text-left",style:{fontSize:"13px",fontWeight:500,color:Kv},children:e.name}),(0,Fe.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Fe.jsx)("button",{onClick:()=>Ke(e.id),className:"flex-shrink-0 rounded-full flex items-center justify-center font-semibold text-sm",style:{width:"28px",height:"28px",minWidth:"28px",minHeight:"28px",background:Hv,color:"#525252"},children:"\u2212"}),(0,Fe.jsx)("span",{className:"w-8 text-center font-semibold text-sm",style:{color:Kv},children:e.qty}),(0,Fe.jsx)("button",{onClick:()=>Xe(e.id),className:"flex-shrink-0 rounded-full flex items-center justify-center font-semibold text-sm text-white",style:{width:"28px",height:"28px",minWidth:"28px",minHeight:"28px",background:Lv},children:"+"})]}),(0,Fe.jsx)("div",{className:"text-right font-semibold text-sm",style:{color:Kv},children:(e.price*e.qty).toLocaleString("id-ID")})]},e.id)),Array.from({length:5-m.length}).map((e,t)=>{const n=m.length+t;return(0,Fe.jsxs)("div",{className:"flex-1 grid gap-2 px-4 items-center",style:{gridTemplateColumns:"1fr 100px 80px",background:n%2===0?Xv:Gv,borderBottom:t<4-m.length?"1px solid ".concat(Gv):"none"},children:[(0,Fe.jsx)("div",{className:"truncate text-left",style:{fontSize:"13px",fontWeight:500,color:Hv},children:"-"}),(0,Fe.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Fe.jsx)("button",{disabled:!0,className:"flex-shrink-0 rounded-full flex items-center justify-center font-semibold text-sm",style:{width:"28px",height:"28px",minWidth:"28px",minHeight:"28px",background:Hv,color:"#D1D5DB",cursor:"not-allowed"},children:"\u2212"}),(0,Fe.jsx)("span",{className:"w-8 text-center font-semibold text-sm",style:{color:Hv},children:"0"}),(0,Fe.jsx)("button",{disabled:!0,className:"flex-shrink-0 rounded-full flex items-center justify-center font-semibold text-sm",style:{width:"28px",height:"28px",minWidth:"28px",minHeight:"28px",background:Hv,color:"#D1D5DB",cursor:"not-allowed"},children:"+"})]}),(0,Fe.jsx)("div",{className:"text-right font-semibold text-sm",style:{color:Hv},children:"-"})]},"empty-".concat(t))})]}):(0,Fe.jsx)(Fe.Fragment,{children:m.map((e,t)=>(0,Fe.jsxs)("div",{className:"grid gap-2 px-4 items-center flex-shrink-0",style:{gridTemplateColumns:"1fr 100px 80px",height:"48px",background:t%2===0?Xv:Gv,borderBottom:"1px solid ".concat(Gv)},children:[(0,Fe.jsx)("div",{className:"truncate text-left",style:{fontSize:"13px",fontWeight:500,color:Kv},children:e.name}),(0,Fe.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Fe.jsx)("button",{onClick:()=>Ke(e.id),className:"flex-shrink-0 rounded-full flex items-center justify-center font-semibold text-sm",style:{width:"28px",height:"28px",minWidth:"28px",minHeight:"28px",background:Hv,color:"#525252"},children:"\u2212"}),(0,Fe.jsx)("span",{className:"w-8 text-center font-semibold text-sm",style:{color:Kv},children:e.qty}),(0,Fe.jsx)("button",{onClick:()=>Xe(e.id),className:"flex-shrink-0 rounded-full flex items-center justify-center font-semibold text-sm text-white",style:{width:"28px",height:"28px",minWidth:"28px",minHeight:"28px",background:Lv},children:"+"})]}),(0,Fe.jsx)("div",{className:"text-right font-semibold text-sm",style:{color:Kv},children:(e.price*e.qty).toLocaleString("id-ID")})]},e.id))})})]})}),(0,Fe.jsxs)("div",{className:"px-4 grid grid-cols-2 gap-3 flex-shrink-0",style:{background:Hv,paddingTop:"8px",paddingBottom:"max(12px, env(safe-area-inset-bottom))"},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-center rounded-xl font-semibold",style:{background:"white",color:"#525252",fontSize:"16px",padding:"14px"},children:[m.length," items"]}),(0,Fe.jsx)("button",{onClick:$e,disabled:0===m.length,className:"rounded-xl font-semibold transition-colors",style:{background:0===m.length?"white":Lv,color:0===m.length?"#525252":"white",fontSize:"16px",padding:"14px",cursor:0===m.length?"not-allowed":"pointer"},children:"Checkout"})]})]}):(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 flex-shrink-0",style:{height:"48px",paddingTop:"max(4px, env(safe-area-inset-top))"},children:[(0,Fe.jsx)("button",{onClick:et,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Uv},children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain"})}),(0,Fe.jsx)("span",{className:"font-semibold text-lg",style:{color:"#525252"},children:"Back"})]}),(0,Fe.jsxs)("div",{className:"px-4 mb-3 flex-shrink-0 relative",style:{paddingTop:"4px"},children:[(0,Fe.jsx)("input",{type:"text",value:L,onChange:e=>{return t=e.target.value,z(t),X(t.length>0),void(t.length>0&&W&&t!==W.nama&&V(null));var t},onFocus:()=>L&&X(!0),onBlur:()=>setTimeout(()=>X(!1),200),placeholder:"Cari nama, nomor member atau nomor telepon pelanggan",className:"w-full px-4 rounded-xl border-none focus:outline-none",style:{background:"white",height:"48px",fontSize:"14px",color:"#525252"}}),G&&L&&(0,Fe.jsx)("div",{className:"absolute left-4 right-4 bg-white z-50 overflow-y-auto",style:{top:"52px",border:"1px solid ".concat(Hv),borderRadius:"12px",maxHeight:"200px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:K?(0,Fe.jsx)("div",{className:"px-4 py-3 text-sm",style:{color:Vv},children:"Mencari..."}):U.length>0?U.map(e=>(0,Fe.jsx)("div",{onClick:()=>(e=>{V(e),z(e.nama),X(!1),H([]),Ny.itemAdded()})(e),className:"px-4 py-3 cursor-pointer transition-colors hover:bg-gray-50",style:{borderBottom:"1px solid ".concat(Gv)},children:(0,Fe.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"text-sm font-medium",style:{color:Kv},children:e.nama}),(0,Fe.jsxs)("div",{className:"text-xs",style:{color:Vv},children:[e.nomor_member||"No Member ID"," \u2022 ",e.points," pts"]})]}),(0,Fe.jsxs)("div",{className:"text-xs px-2 py-0.5 rounded",style:{background:"#F0FDF4",color:"#22C55E"},children:[e.points," pts"]})]})},e.id)):(0,Fe.jsxs)("div",{className:"px-4 py-3 text-sm",style:{color:Vv},children:['Tidak ditemukan "',L,'"']})})]}),(0,Fe.jsxs)("div",{className:"px-4 pb-1 flex-1 min-h-0 grid grid-cols-2 gap-2",style:{gridTemplateRows:"1fr 1fr"},children:[(0,Fe.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",style:{boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[(0,Fe.jsx)("div",{style:{padding:"8px 12px",borderBottom:"1px solid #E5E5E5",background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:"#737373",flexShrink:0},children:"Membership"}),(0,Fe.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:W?(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("div",{className:"flex-1 flex items-center",style:{background:"#FFFFFF",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv,lineHeight:1.2},children:W.nama}),(0,Fe.jsx)("div",{className:"text-sm font-bold",style:{color:Kv,lineHeight:1.3},children:W.nomor_member||"-"})]})}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center",style:{background:"#F5F5F5",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv,lineHeight:1.2},children:"Member"}),(0,Fe.jsxs)("div",{className:"text-sm font-bold",style:{color:Yv,lineHeight:1.3},children:[W.points," Points"]})]})}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center",style:{background:"#FFFFFF",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv,lineHeight:1.2},children:"Total Transaksi"}),(0,Fe.jsxs)("div",{className:"text-sm font-bold",style:{color:Kv,lineHeight:1.3},children:[W.total_transaksi,"x"]})]})})]}):(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-center",style:{background:"#FFFFFF"},children:(0,Fe.jsxs)("div",{className:"text-center px-3",children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Cari nama member"}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:"#D1D5DB"},children:"untuk menambah poin"})]})}),(0,Fe.jsx)("div",{className:"flex-1",style:{background:"#F5F5F5"}}),(0,Fe.jsx)("div",{className:"flex-1",style:{background:"#FFFFFF"}})]})})]}),(0,Fe.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",style:{boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[(0,Fe.jsx)("div",{style:{padding:"8px 12px",borderBottom:"1px solid #E5E5E5",background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:"#737373",flexShrink:0},children:"Purchase"}),(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-between",style:{background:"#FFFFFF",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Sub Total"}),(0,Fe.jsx)("div",{className:"text-base font-bold",style:{color:Kv},children:rt(Oe)})]})}),(0,Fe.jsxs)("div",{className:"flex-1 flex items-center justify-between",style:{background:"#F5F5F5",padding:"0 10px 0 12px"},children:[(0,Fe.jsxs)("div",{className:"cursor-pointer",onClick:Ze,style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Discount"}),(0,Fe.jsxs)("div",{className:"text-base font-bold",style:{color:Kv},children:[x,"%"]})]}),(0,Fe.jsx)("button",{onClick:Ye,className:"flex-shrink-0 rounded-full flex items-center justify-center text-white",style:{width:"31px",height:"31px",minWidth:"31px",minHeight:"31px",background:Hv,color:Wv,border:"none",fontSize:"19px",fontWeight:700,lineHeight:1},children:"+"})]}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-between",style:{background:"#FFFFFF",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Total"}),(0,Fe.jsx)("div",{className:"text-lg font-bold",style:{color:Kv},children:rt(ze)})]})})]})]}),(0,Fe.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",style:{boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[(0,Fe.jsx)("div",{style:{padding:"8px 12px",borderBottom:"1px solid #E5E5E5",background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:"#737373",flexShrink:0},children:"Description"}),(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:["tunai"===O&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-between",style:{background:"#FFFFFF",padding:"0 12px"},children:(0,Fe.jsxs)("div",{className:"cursor-pointer",onClick:Je,style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Bayar"}),(0,Fe.jsx)("div",{className:"text-base font-bold",style:{color:Kv},children:rt(Z)})]})}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center",style:{background:"#F5F5F5",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Kembalian"}),(0,Fe.jsx)("div",{className:"text-base font-bold",style:{color:We>=0?Kv:"#EF4444"},children:rt(Math.max(0,We))})]})}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center",style:{background:"#FFFFFF",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Update Kas Toko"}),(0,Fe.jsx)("div",{className:"text-base font-bold",style:{color:Yv},children:rt(ze)})]})})]}),"qris"===O&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("div",{className:"flex-1 flex items-center",style:{background:"#FFFFFF",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Rek BCA 739203822"}),(0,Fe.jsx)("div",{className:"text-sm font-bold",style:{color:Kv},children:"Toto Sugiharto"})]})}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center",style:{background:"#F5F5F5",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Qris Code"}),(0,Fe.jsx)("div",{className:"text-sm font-bold",style:{color:Kv},children:"Evlogia Apparel"})]})}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center",style:{background:"#FFFFFF",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Update Kas Bank"}),(0,Fe.jsxs)("div",{className:"text-base font-bold",style:{color:Yv},children:["+",rt(ze)]})]})})]}),"hutang"===O&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("div",{className:"flex-1 flex items-center",style:{background:"#FFFFFF",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Hutang"}),(0,Fe.jsx)("div",{className:"text-base font-bold",style:{color:Kv},children:rt(_e)})]})}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center",style:{background:"#F5F5F5",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Sudah Dibayar"}),(0,Fe.jsx)("div",{className:"text-base font-bold",style:{color:Kv},children:rt(Se)})]})}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center",style:{background:"#FFFFFF",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Update Kas Toko"}),(0,Fe.jsx)("div",{className:"text-base font-bold",style:{color:Yv},children:rt(Se)})]})})]})]})]}),(0,Fe.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden",style:{boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[(0,Fe.jsx)("div",{style:{padding:"8px 12px",borderBottom:"1px solid #E5E5E5",background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:"#737373",flexShrink:0},children:"Payment Methods"}),(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,Fe.jsx)("button",{onClick:()=>{F("qris"),Ne(0),Ee(ze)},className:"flex-1 flex items-center justify-between",style:{background:"qris"===O?"#FFF7ED":"#FFFFFF",border:"none",borderBottom:"qris"===O?"2px solid ".concat(Lv):"none",cursor:"pointer",textAlign:"left",padding:"0 12px"},children:(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Qris/Transfer"}),(0,Fe.jsx)("div",{className:"text-base font-bold",style:{color:Kv},children:rt(ze)})]})}),(0,Fe.jsxs)("button",{onClick:()=>{F("tunai"),Ne(0),Ee(ze)},className:"flex-1 flex items-center justify-between",style:{background:"tunai"===O?"#FFF7ED":"#F5F5F5",border:"none",borderBottom:"tunai"===O?"2px solid ".concat(Lv):"none",cursor:"pointer",textAlign:"left",padding:"0 10px 0 12px"},children:[(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Tunai"}),(0,Fe.jsxs)("div",{className:"text-base font-bold",style:{color:Kv},children:[(0,Fe.jsx)("span",{className:"cursor-pointer",onClick:e=>{e.stopPropagation(),Je()},style:{color:Kv},children:"\u270e Rp"})," ",Z.toLocaleString("id-ID")]})]}),(0,Fe.jsx)("div",{onClick:e=>{e.stopPropagation(),F("tunai"),Ne(0),Ee(ze),(()=>{const e=Re.calculate(ze,10).find(e=>e.total>Z);e?($(e=>[...e,Z||ze]),J(e.total)):($(e=>[...e,Z||ze]),J(ze))})()},className:"flex-shrink-0 rounded-full flex items-center justify-center text-white cursor-pointer",style:{width:"31px",height:"31px",minWidth:"31px",minHeight:"31px",background:Hv,color:Wv,fontSize:"19px",fontWeight:700,lineHeight:1},children:"+"})]}),(0,Fe.jsxs)("button",{onClick:()=>{F("hutang"),Ne(ze),Ee(0)},className:"flex-1 flex items-center justify-between",style:{background:"hutang"===O?"#FFF7ED":"#FFFFFF",border:"none",borderTop:"hutang"===O?"2px solid ".concat(Lv):"none",cursor:"pointer",textAlign:"left",padding:"0 10px 0 12px"},children:[(0,Fe.jsxs)("div",{style:{textAlign:"left"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:Vv},children:"Hutang"}),(0,Fe.jsxs)("div",{className:"text-base font-bold",style:{color:Kv},children:[(0,Fe.jsx)("span",{className:"cursor-pointer",onClick:e=>{e.stopPropagation(),ke(_e.toString()),ge(!0)},style:{color:Kv},children:"\u270e Rp"})," ",_e.toLocaleString("id-ID")]})]}),(0,Fe.jsx)("div",{onClick:e=>{e.stopPropagation(),F("hutang"),Ne(e=>0===e?ze:e),(()=>{if(_e>0){const e=Math.min(_e,1e3);Ne(t=>Math.max(0,t-e)),Ee(t=>t+e)}})()},className:"flex-shrink-0 rounded-full flex items-center justify-center text-white cursor-pointer",style:{width:"31px",height:"31px",minWidth:"31px",minHeight:"31px",background:Hv,color:Wv,fontSize:"19px",fontWeight:700,lineHeight:1},children:"\u2212"})]})]})]})]}),(0,Fe.jsxs)("div",{className:"px-4 grid grid-cols-2 gap-2 flex-shrink-0",style:{background:"transparent",paddingTop:"4px",paddingBottom:"max(8px, env(safe-area-inset-bottom))"},children:[(0,Fe.jsx)("input",{ref:ne,type:"file",accept:"image/*",capture:"environment",onChange:Qe,className:"hidden"}),ee?(0,Fe.jsxs)("div",{className:"relative rounded-xl overflow-hidden cursor-pointer",style:{background:"white",height:"56px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onClick:()=>je(!0),children:[(0,Fe.jsx)("img",{src:ee,alt:"Bukti",className:"w-full h-full object-cover"}),(0,Fe.jsx)("button",{onClick:e=>{e.stopPropagation(),te(null)},className:"absolute top-1 right-1 w-6 h-6 rounded-full flex items-center justify-center text-white text-sm",style:{background:"rgba(0,0,0,0.6)"},children:"\xd7"}),(0,Fe.jsx)("button",{onClick:e=>{var t;e.stopPropagation(),null===(t=ne.current)||void 0===t||t.click()},className:"absolute bottom-1 right-1 px-2 py-0.5 rounded text-xs text-white",style:{background:"rgba(0,0,0,0.6)"},children:"Ganti"})]}):(0,Fe.jsxs)("button",{onClick:()=>{var e;return null===(e=ne.current)||void 0===e?void 0:e.click()},className:"flex items-center justify-center gap-1.5 rounded-xl font-medium",style:{background:"white",color:"#525252",fontSize:"13px",height:"56px",border:"none",cursor:"pointer",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,Fe.jsx)("img",{src:"/icons/CAM.png",alt:"Camera",className:"w-4 h-4"}),"Bukti Transfer"]}),(0,Fe.jsx)("button",{onClick:tt,disabled:re||"tunai"===O&&Z<ze||"qris"===O&&!ee,className:"rounded-xl font-semibold text-white transition-colors",style:{background:re?"#D1D5DB":zv,fontSize:"16px",height:"56px",border:"none",cursor:re?"not-allowed":"pointer",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:re?"Memproses...":"Paid"})]})]})},c)}),p&&(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0,0,0,0.5)"},onClick:e=>e.target===e.currentTarget&&f(!1),children:(0,Fe.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden",style:{maxHeight:"90vh",boxShadow:"0 20px 25px -5px rgba(0,0,0,0.1)"},onClick:e=>e.stopPropagation(),children:[(0,Fe.jsxs)("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 100px)"},children:[(0,Fe.jsxs)("div",{className:"text-center mb-5 pb-4",style:{borderBottom:"1px dashed #E5E5E5"},children:[(0,Fe.jsx)("h2",{className:"font-bold mb-1",style:{fontSize:"18px",color:Kv},children:"Warung Evlogia"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:Vv,lineHeight:1.4},children:"Jalan Atput II No.16 Bandung"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:Vv,lineHeight:1.4},children:"milkyhoop.com/evlogia"})]}),(0,Fe.jsxs)("table",{className:"w-full mb-4",style:{fontSize:"13px"},children:[(0,Fe.jsx)("thead",{children:(0,Fe.jsxs)("tr",{style:{borderBottom:"1px solid ".concat(Hv)},children:[(0,Fe.jsx)("th",{className:"text-left pb-2",style:{fontSize:"11px",fontWeight:600,color:Vv},children:"No."}),(0,Fe.jsx)("th",{className:"text-left pb-2",style:{fontSize:"11px",fontWeight:600,color:Vv},children:"Item"}),(0,Fe.jsx)("th",{className:"text-right pb-2",style:{fontSize:"11px",fontWeight:600,color:Vv},children:"Harga (Rp)"})]})}),(0,Fe.jsx)("tbody",{children:m.map((e,t)=>{var n;return(0,Fe.jsxs)("tr",{style:{borderBottom:"1px solid ".concat(Gv)},children:[(0,Fe.jsxs)("td",{className:"py-3 align-top text-left",style:{color:Kv},children:[String(t+1).padStart(2,"0"),"."]}),(0,Fe.jsxs)("td",{className:"py-3 align-top text-left",children:[(0,Fe.jsx)("div",{className:"font-semibold mb-0.5 text-left",style:{color:Kv},children:e.name}),(0,Fe.jsxs)("div",{className:"text-left",style:{fontSize:"11px",color:"#9CA3AF",lineHeight:1.3},children:["Barcode ",null===(n=e.barcode)||void 0===n?void 0:n.slice(0,6),"..."]}),(0,Fe.jsxs)("div",{className:"text-left",style:{fontSize:"11px",color:"#9CA3AF",lineHeight:1.3},children:[e.price.toLocaleString()," x ",e.qty]})]}),(0,Fe.jsx)("td",{className:"py-3 align-top text-right font-semibold",style:{color:Kv},children:(e.price*e.qty).toLocaleString()})]},e.id)})})]}),(0,Fe.jsxs)("div",{className:"py-3 mb-4",style:{borderTop:"2px solid ".concat(Hv),borderBottom:"1px dashed #E5E5E5"},children:[(0,Fe.jsxs)("div",{className:"flex justify-between mb-1",style:{fontSize:"14px",fontWeight:600,color:Kv},children:[(0,Fe.jsx)("span",{children:"Total"}),(0,Fe.jsx)("span",{children:ze.toLocaleString()})]}),(0,Fe.jsxs)("div",{className:"flex justify-between",style:{fontSize:"14px",fontWeight:600,color:Kv},children:[(0,Fe.jsx)("span",{children:"tunai"===O?"Tunai":"qris"===O?"Qris/Transfer":"Hutang"}),(0,Fe.jsx)("span",{children:("tunai"===O?Z:"hutang"===O?_e:ze).toLocaleString()})]})]}),(0,Fe.jsxs)("div",{className:"text-center mb-4",style:{fontSize:"12px",color:"#525252"},children:[(0,Fe.jsxs)("p",{children:[m.length," item pembelian"]}),(0,Fe.jsxs)("p",{children:["ID Transaksi ",(null===ce||void 0===ce?void 0:ce.transaction_id)||"tx_xxxxx"]}),(0,Fe.jsx)("p",{children:"Kasir Indah Sakti"})]}),W&&(0,Fe.jsxs)("div",{className:"text-center mb-4",style:{fontSize:"12px",color:"#525252"},children:[(0,Fe.jsx)("h3",{className:"font-semibold mb-2",style:{fontSize:"14px"},children:"Membership"}),(0,Fe.jsx)("p",{children:W.nama}),(0,Fe.jsxs)("p",{children:["No. Member: ",W.nomor_member||"-"]}),(0,Fe.jsxs)("p",{style:{color:Yv,fontWeight:600},children:["Points: ",W.points]})]}),(0,Fe.jsxs)("div",{className:"text-center p-5 rounded-xl mb-4",style:{background:"#F0FDF4"},children:[(0,Fe.jsx)("div",{className:"font-semibold mb-1",style:{fontSize:"14px",color:Yv},children:"Berhasil"}),(0,Fe.jsx)("div",{className:"font-bold",style:{fontSize:"20px",color:Kv},children:rt(ze)})]})]}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3 px-4 py-3 flex-shrink-0",style:{borderTop:"1px solid ".concat(Hv),maxHeight:"72px"},children:[(0,Fe.jsx)("button",{onClick:r,className:"rounded-xl font-semibold flex items-center justify-center",style:{height:"48px",background:"white",border:"1px solid ".concat(Hv),fontSize:"14px",color:"#525252",cursor:"pointer"},children:"Back to Chat"}),(0,Fe.jsx)("button",{onClick:nt,className:"rounded-xl font-semibold text-white flex items-center justify-center",style:{height:"48px",background:"#22C55E",border:"none",fontSize:"14px",cursor:"pointer"},children:"Transaksi Baru"})]})]})}),se&&(0,Fe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Fe.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm mx-4",style:{boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(0,Fe.jsx)("div",{className:"text-center mb-4 text-lg font-semibold",style:{color:Kv},children:"Produk tidak ditemukan"}),(0,Fe.jsx)("div",{className:"text-center mb-6 text-sm",style:{color:"#525252"},children:"Coba ketik nama produk"}),(0,Fe.jsx)("button",{onClick:()=>le(!1),className:"w-full py-3 rounded-lg font-semibold text-white transition-colors",style:{background:zv},children:"OK"})]})}),Pe&&(0,Fe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Fe.jsxs)("div",{className:"bg-white rounded-xl p-5 mx-4 max-w-sm",style:{boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},children:[(0,Fe.jsx)("h3",{className:"text-base font-semibold mb-2",style:{color:"#262626"},children:"Lanjutkan Belanja?"}),(0,Fe.jsx)("p",{className:"text-sm mb-4",style:{color:"#737373"},children:"Anda memiliki keranjang belanja yang belum selesai. Lanjutkan atau mulai baru?"}),(0,Fe.jsxs)("div",{className:"flex gap-2",children:[(0,Fe.jsx)("button",{onClick:()=>{try{localStorage.removeItem(Ie)}catch(iN){console.error("Failed to discard POS draft:",iN)}Be(!1)},className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50",children:"Mulai Baru"}),(0,Fe.jsx)("button",{onClick:()=>{try{const e=localStorage.getItem(Ie);if(e){const t=JSON.parse(e);t.cart&&g(t.cart),t.discount&&y(t.discount)}}catch(iN){console.error("Failed to resume POS draft:",iN)}Be(!1)},className:"flex-1 px-4 py-2.5 text-white rounded-lg text-sm font-medium",style:{background:zv},children:"Lanjutkan"})]})]})}),ue&&(0,Fe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>he(!1),children:(0,Fe.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm mx-4 w-full",style:{boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,Fe.jsx)("div",{className:"text-center mb-4 text-lg font-semibold",style:{color:Kv},children:"Input Diskon"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:xe,onChange:e=>ye(e.target.value.replace(/\D/g,"")),placeholder:"0-100%",className:"w-full px-4 py-3 rounded-lg border text-center text-lg font-bold mb-4",style:{borderColor:Hv,color:Kv},autoFocus:!0}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Fe.jsx)("button",{onClick:()=>he(!1),className:"py-3 rounded-lg font-semibold transition-colors",style:{background:Hv,color:"#525252"},children:"Batal"}),(0,Fe.jsx)("button",{onClick:()=>{const e=parseInt(xe)||0;y(Math.min(100,Math.max(0,e))),he(!1)},className:"py-3 rounded-lg font-semibold text-white transition-colors",style:{background:zv},children:"OK"})]})]})}),pe&&(0,Fe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>fe(!1),children:(0,Fe.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm mx-4 w-full",style:{boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,Fe.jsx)("div",{className:"text-center mb-2 text-lg font-semibold",style:{color:Kv},children:"Input Jumlah Bayar"}),(0,Fe.jsxs)("div",{className:"text-center mb-4 text-sm",style:{color:Vv},children:["Total: ",rt(ze)]}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:ve,onChange:e=>be(e.target.value.replace(/\D/g,"")),placeholder:"Min: ".concat(rt(ze)),className:"w-full px-4 py-3 rounded-lg border text-center text-lg font-bold mb-4",style:{borderColor:Hv,color:Kv},autoFocus:!0}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Fe.jsx)("button",{onClick:()=>fe(!1),className:"py-3 rounded-lg font-semibold transition-colors",style:{background:Hv,color:"#525252"},children:"Batal"}),(0,Fe.jsx)("button",{onClick:()=>{const e=parseInt(ve)||0;e>=ze&&($(e=>[...e,Z||ze]),J(e)),fe(!1)},className:"py-3 rounded-lg font-semibold text-white transition-colors",style:{background:zv},children:"OK"})]})]})}),me&&(0,Fe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>ge(!1),children:(0,Fe.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-sm mx-4 w-full",style:{boxShadow:"0 4px 20px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),children:[(0,Fe.jsx)("div",{className:"text-center mb-2 text-lg font-semibold",style:{color:Kv},children:"Input Jumlah Hutang"}),(0,Fe.jsxs)("div",{className:"text-center mb-4 text-sm",style:{color:Vv},children:["Total Tagihan: ",rt(ze)]}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:we,onChange:e=>ke(e.target.value.replace(/\D/g,"")),placeholder:"Max: ".concat(rt(ze)),className:"w-full px-4 py-3 rounded-lg border text-center text-lg font-bold mb-4",style:{borderColor:Hv,color:Kv},autoFocus:!0}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Fe.jsx)("button",{onClick:()=>ge(!1),className:"py-3 rounded-lg font-semibold transition-colors",style:{background:Hv,color:"#525252"},children:"Batal"}),(0,Fe.jsx)("button",{onClick:()=>{const e=parseInt(we)||0,t=Math.max(0,Math.min(ze,e)),n=ze-t;Ne(t),Ee(n),ge(!1)},className:"py-3 rounded-lg font-semibold text-white transition-colors",style:{background:zv},children:"OK"})]})]})}),Ce&&ee&&(0,Fe.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:()=>je(!1),children:[(0,Fe.jsx)("button",{onClick:()=>je(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full flex items-center justify-center text-white text-2xl",style:{background:"rgba(255,255,255,0.2)"},children:"\xd7"}),(0,Fe.jsx)("img",{src:ee,alt:"Bukti Transfer",className:"max-w-full max-h-full object-contain p-4",onClick:e=>e.stopPropagation()})]}),ae&&(0,Fe.jsx)("div",{className:"fixed top-20 left-4 right-4 px-4 py-2 rounded-lg text-center text-sm shadow-lg z-50 text-white",style:{background:"#EF4444"},children:ae})]})},Zv=e=>{let{isOpen:n,onClose:r,onBarcodeDetected:o,scannerText:a="Find a barcode to scan"}=e;const[i,s]=(0,t.useState)("idle"),[l,c]=(0,t.useState)(null),d=(0,t.useRef)(null),u=(0,t.useRef)(null),h=(0,t.useCallback)(async()=>{if(d.current)try{c(null),s("scanning"),u.current=new Ix(d.current,{desiredWidth:1280,desiredHeight:720}),u.current.onFound(e=>{const t=e.text||e.rawValue||"";var n;t&&(null===(n=u.current)||void 0===n||n.stop(),o(t),r())}),u.current.onProgress(e=>{"camera-ready"===e.phase&&s("scanning")}),u.current.onError(e=>{console.error("[FullscreenBarcodeScanner] Error:",e),c(e.message||"Gagal mengakses kamera"),s("error")}),await u.current.start()}catch(e){console.error("Scanner error:",e),c("NotAllowedError"===e.name?"Izinkan akses kamera untuk scan barcode":"Gagal mengakses kamera"),s("error")}},[o,r]),p=(0,t.useCallback)(()=>{u.current&&(u.current.stop(),u.current=null)},[]);return(0,t.useEffect)(()=>(n?h():(p(),s("idle"),c(null)),()=>{p()}),[n,h,p]),n?(0,Fe.jsxs)("div",{className:"fixed inset-0 z-50 bg-black",children:[(0,Fe.jsx)("video",{ref:d,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover"}),(0,Fe.jsx)("button",{onClick:r,className:"absolute top-4 right-4 z-20 w-11 h-11 rounded-full bg-neutral-900/60 backdrop-blur-md flex items-center justify-center active:bg-neutral-800/60 transition-colors",children:(0,Fe.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),"scanning"===i&&!l&&(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:(0,Fe.jsxs)("div",{className:"w-64 h-64 relative",style:{animation:"scan-breathe 1s ease-in-out infinite"},children:[(0,Fe.jsx)("div",{className:"absolute top-0 left-0 w-12 h-12 border-t-4 border-l-4 border-white rounded-tl-2xl"}),(0,Fe.jsx)("div",{className:"absolute top-0 right-0 w-12 h-12 border-t-4 border-r-4 border-white rounded-tr-2xl"}),(0,Fe.jsx)("div",{className:"absolute bottom-0 left-0 w-12 h-12 border-b-4 border-l-4 border-white rounded-bl-2xl"}),(0,Fe.jsx)("div",{className:"absolute bottom-0 right-0 w-12 h-12 border-b-4 border-r-4 border-white rounded-br-2xl"})]})}),(0,Fe.jsx)("style",{children:"\n        @keyframes scan-breathe {\n          0%, 100% { transform: scale(1); }\n          50% { transform: scale(1.08); }\n        }\n      "}),"scanning"===i&&!l&&(0,Fe.jsx)("div",{className:"absolute top-24 inset-x-4 flex justify-center z-10",children:(0,Fe.jsx)("div",{className:"px-6 py-4 rounded-full bg-neutral-900/60 backdrop-blur-md",children:(0,Fe.jsx)("span",{className:"text-white font-medium",children:a})})}),l&&(0,Fe.jsx)("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/80",children:(0,Fe.jsxs)("div",{className:"text-center px-8",children:[(0,Fe.jsx)("div",{className:"w-20 h-20 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Fe.jsx)("svg",{className:"w-10 h-10 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,Fe.jsx)("p",{className:"text-white font-medium text-lg mb-2",children:l}),(0,Fe.jsx)("p",{className:"text-neutral-400 text-sm mb-6",children:"Pastikan browser memiliki izin kamera"}),(0,Fe.jsx)("button",{onClick:()=>{c(null),s("idle"),h()},className:"px-6 py-3 rounded-full bg-neutral-900/60 backdrop-blur-md text-white font-medium",children:"Coba Lagi"})]})})]}):null};function Jv(e){const[n,r]=(0,t.useState)(()=>"undefined"!==typeof window&&window.matchMedia(e).matches);return(0,t.useEffect)(()=>{if("undefined"===typeof window)return;const t=window.matchMedia(e),n=e=>{r(e.matches)};return r(t.matches),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},[e]),n}function Qv(){return Jv("(min-width: 1024px)")}const $v="#F97316",eb="#737373",tb="#22C55E",nb="#EF4444",rb="#FFFFFF",ob=()=>(0,Fe.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Fe.jsx)("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),(0,Fe.jsx)("line",{x1:"8",y1:"10",x2:"16",y2:"10",strokeDasharray:"2 2"}),(0,Fe.jsx)("line",{x1:"8",y1:"14",x2:"16",y2:"14",strokeDasharray:"2 2"})]}),ab=()=>(0,Fe.jsxs)("svg",{className:"animate-spin",width:"22",height:"22",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",fill:"none"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),ib=()=>(0,Fe.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Fe.jsx)("polyline",{points:"20 6 9 17 4 12"})}),sb=()=>(0,Fe.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Fe.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,Fe.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),lb=()=>(0,Fe.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Fe.jsx)("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),(0,Fe.jsx)("line",{x1:"5",y1:"2",x2:"19",y2:"22",strokeWidth:"2.5"})]}),cb=e=>{let{onBarcodeReceived:n,variant:r="icon-only",className:o=""}=e;const a=Qv(),[i,s]=(0,t.useState)("idle"),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(null),h=(0,t.useCallback)(async()=>{try{const e=Ae();if(!e)return;const t=await fetch("/api/devices/mobile-status",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();u(e.is_online),e.is_online||"idle"!==i?e.is_online&&"offline"===i&&s("idle"):s("offline")}}catch(e){console.warn("[RemoteScanButton] Failed to check mobile status:",e)}},[i]);(0,t.useEffect)(()=>{if(!a)return;h();const e=setInterval(h,1e4);return()=>clearInterval(e)},[a,h]);const{state:p,requestScan:f,cancelScan:m,reset:g}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[n,r]=(0,t.useState)("idle"),[o,a]=(0,t.useState)(null),[i,s]=(0,t.useState)(null),l=(0,t.useRef)(e);l.current=e;const c=(0,t.useRef)(null);(0,t.useEffect)(()=>{const e=e=>{var t,n,o,d,u,h;const p=e,{event:f,scan_id:m,barcode:g,error:x,product:y}=p.detail;if(!m||!i||m===i)switch(f){case"remote_scan:result":var v,b;g&&(r("success"),a({barcode:g,product:y}),s(null),c.current=g,null===(v=(b=l.current).onSuccess)||void 0===v||v.call(b,g,y));break;case"remote_scan:product":var w,k;y&&c.current&&(a(e=>e?qe(qe({},e),{},{product:y}):{barcode:c.current,product:y}),null===(w=(k=l.current).onProductReceived)||void 0===w||w.call(k,c.current,y));break;case"remote_scan:error":r("error"),a({error:x||"Scan failed"}),s(null),null===(t=(n=l.current).onError)||void 0===t||t.call(n,x||"Scan failed");break;case"remote_scan:cancelled":r("cancelled"),s(null),null===(o=(d=l.current).onCancel)||void 0===o||o.call(d);break;case"remote_scan:timeout":r("timeout"),s(null),null===(u=(h=l.current).onTimeout)||void 0===u||u.call(h)}};return window.addEventListener("remoteScanEvent",e),()=>{window.removeEventListener("remoteScanEvent",e)}},[i]);const d=(0,t.useCallback)(async()=>{try{r("requesting"),a(null);const n=Ee(),o=Ae(),i=await fetch("/api/devices/remote-scan/request",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({tab_id:n})}),c=await i.json();return c.success&&c.scan_id?(s(c.scan_id),r("waiting"),!0):(r("error"),a({error:c.message||"Failed to request scan"}),null===(e=(t=l.current).onError)||void 0===e||e.call(t,c.message||"Failed to request scan"),!1);var e,t}catch(i){var n,o;return r("error"),a({error:"Network error"}),null===(n=(o=l.current).onError)||void 0===n||n.call(o,"Network error"),!1}},[]);return{state:n,result:o,isScanning:"requesting"===n||"waiting"===n,requestScan:d,cancelScan:(0,t.useCallback)(async()=>{if(i){try{const e=Ae();await fetch("/api/devices/remote-scan/cancel",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({scan_id:i})})}catch(e){console.error("[RemoteScanner] Cancel failed:",e)}r("cancelled"),s(null)}},[i]),reset:(0,t.useCallback)(()=>{r("idle"),a(null),s(null)},[])}}({onSuccess:(e,t)=>{s("success"),n(e,t),setTimeout(()=>{s("idle"),g()},1500)},onError:e=>{s("error"),c(e||"HP tidak online"),setTimeout(()=>{s("idle"),c(""),g()},3e3)},onTimeout:()=>{s("error"),c("Timeout, coba lagi"),setTimeout(()=>{s("idle"),c(""),g()},3e3)},onCancel:()=>{s("idle"),g()}});(0,t.useEffect)(()=>{"requesting"!==p&&"waiting"!==p||s("waiting")},[p]);const x=(0,t.useCallback)(async()=>{if("offline"===i)return c("HP tidak online"),void setTimeout(()=>c(""),3e3);"waiting"===i?(await m(),s("idle")):"idle"===i&&await f()},[i,f,m]);if(!a)return null;const y=()=>{switch(i){case"waiting":return $v;case"success":return tb;case"error":return nb;default:return eb}},v=()=>{switch(i){case"waiting":return(0,Fe.jsx)(ab,{});case"success":return(0,Fe.jsx)(ib,{});case"error":return(0,Fe.jsx)(sb,{});case"offline":return(0,Fe.jsx)(lb,{});default:return(0,Fe.jsx)(ob,{})}},b={shake:{x:[0,-6,6,-4,4,0],transition:{duration:.4}}};if("icon-only"===r)return(0,Fe.jsxs)("div",{style:{position:"relative",display:"inline-flex"},children:[(0,Fe.jsx)(hc.button,{onClick:x,animate:"error"===i?"shake":void 0,variants:b,style:{width:"32px",height:"32px",marginLeft:"8px",display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",cursor:"pointer",color:y(),opacity:"idle"===i?.6:"offline"===i?.4:1,transition:"opacity 0.2s, color 0.2s",flexShrink:0},whileHover:{opacity:"offline"===i?.4:1,scale:"offline"===i?1:1.05},whileTap:{scale:"offline"===i?1:.95},title:"offline"===i?"HP tidak online":"waiting"===i?"Batalkan scan":"Scan via HP","aria-label":"offline"===i?"HP tidak online":"waiting"===i?"Batalkan scan":"Scan barcode via HP",className:o,children:v()}),(0,Fe.jsx)(ct,{children:l&&(0,Fe.jsx)(hc.div,{initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},style:{position:"absolute",top:"100%",right:0,marginTop:"8px",padding:"6px 10px",borderRadius:"6px",backgroundColor:nb,color:rb,fontSize:"11px",fontWeight:500,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:100},children:l})})]});if("inline"===r){const e=()=>{switch(i){case"waiting":return"Menunggu HP...";case"success":return"Berhasil!";case"error":return"Gagal";case"offline":return"HP Offline";default:return"Scan via HP"}},t=()=>{switch(i){case"waiting":return $v;case"success":return tb;case"error":return nb;case"offline":return"#D4D4D4";default:return"#E5E5E5"}},n=()=>"idle"===i||"offline"===i?"#262626":rb;return(0,Fe.jsxs)(hc.button,{onClick:x,animate:"error"===i?"shake":void 0,variants:b,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",borderRadius:"10px",background:t(),border:"none",fontSize:"14px",fontWeight:500,color:n(),cursor:"pointer",transition:"all 0.2s ease"},whileHover:{scale:1.02},whileTap:{scale:.98},title:"waiting"===i?"Batalkan scan":"Scan via HP",className:o,children:[v(),(0,Fe.jsx)("span",{children:e()})]})}return null},db="#F97316",ub="#3B82F6",hb="#262626",pb="#737373",fb="#A3A3A3",mb="#D4D4D4",gb="#E5E5E5",xb="#F5F5F5",yb="#FFFFFF",vb="#262626",bb="#22C55E",wb="#EF4444",kb={duration:.3,ease:[.4,0,.2,1]},Cb=["Karton","Dus","Box","Pack","Lusin","Kodi","Slop","Bal","Koli","Rim"],jb=["pcs","kg","gram","liter","ml","meter","cm","batang","bungkus","sachet","botol","kaleng"],_b=["Makanan Sachet","Minuman","Snack","Sembako","Rokok","Toiletries","Bumbu Dapur","Frozen Food","Susu","Kopi & Teh"],Nb=["Indogrosir","Alfamart Grosir","Indomaret Grosir","Toko Sumber Rezeki","CV Maju Jaya","PT Sinar Harapan","Supplier Lokal","Lainnya"],Sb=t.memo(e=>{let{checked:n,onChange:r,labelOn:o,labelOff:a}=e;const[i,s]=t.useState(!1),l=Qx(n?42:-42);t.useEffect(()=>{i||jy(l,n?42:-42,{type:"spring",stiffness:500,damping:30})},[n,i,l]);return(0,Fe.jsxs)("button",{onClick:()=>{i||(r(!n),Ny.itemAdded())},style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"120px",height:"36px",padding:"4px",background:n?db:"#E5E5E5",borderRadius:"18px",border:"none",cursor:"pointer",userSelect:"none",touchAction:"pan-y"},children:[(0,Fe.jsx)("span",{style:{fontSize:"13px",fontWeight:400,color:n?"#FFFFFF":pb,zIndex:1,paddingLeft:n?"0":"24px",paddingRight:n?"24px":"0",pointerEvents:"none"},children:n?o:a}),(0,Fe.jsx)(hc.span,{drag:"x",dragElastic:.1,dragMomentum:!1,dragConstraints:{left:-42,right:42},onDragStart:()=>s(!0),onDragEnd:(e,t)=>{Math.abs(t.offset.x)>20&&(t.offset.x>0&&!n||t.offset.x<0&&n)?(r(!n),Ny.itemAdded()):jy(l,n?42:-42,{type:"spring",stiffness:500,damping:30}),s(!1)},style:{x:l,position:"absolute",width:"28px",height:"28px",borderRadius:"50%",background:"#FFFFFF",boxShadow:"0 2px 4px rgba(0,0,0,0.15)",cursor:"grab",zIndex:2},whileDrag:{cursor:"grabbing",scale:1.05}})]})}),Eb=t.memo(e=>{let{value:n,displayValue:r,onChange:o}=e;const[a,i]=t.useState(!1),s=t.useRef(null),[l,c]=t.useState(200);t.useEffect(()=>{s.current&&c(s.current.clientHeight)},[]);const d=Math.max(0,l-36-8),u=Qx((100-n)/100*d);t.useEffect(()=>{!a&&d>0&&jy(u,(100-n)/100*d,{type:"spring",stiffness:500,damping:30})},[n,a,u,d]);return(0,Fe.jsxs)("div",{ref:s,onClick:e=>{if(!a&&s.current){const t=s.current.getBoundingClientRect(),n=e.clientY-t.top,r=Math.round(100-n/l*100);o(Math.max(0,Math.min(100,r))),Ny.itemAdded()}},style:{position:"relative",width:"44px",alignSelf:"stretch",minHeight:"150px",background:mb,borderRadius:"22px",cursor:"pointer",userSelect:"none",touchAction:"pan-x"},children:[(0,Fe.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"".concat(Math.min(l,l-(100-n)/100*d-4),"px"),background:db,borderRadius:"22px",transition:a?"none":"height 0.1s ease-out",zIndex:2}}),(0,Fe.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-90deg)",color:pb,fontSize:"9px",fontWeight:600,letterSpacing:"0.5px",textTransform:"uppercase",whiteSpace:"nowrap",pointerEvents:"none",zIndex:1,opacity:.6},children:"margin slider"}),(0,Fe.jsx)("div",{style:{position:"absolute",right:"52px",top:"".concat(Math.max(0,(100-n)/100*d-65),"px"),transition:"top 0.1s ease-out",zIndex:10},children:(0,Fe.jsxs)("span",{style:{background:db,color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:700,whiteSpace:"nowrap",boxShadow:"0 2px 4px rgba(0,0,0,0.15)"},children:[r,"%"]})}),(0,Fe.jsx)(hc.div,{drag:"y",dragElastic:.1,dragMomentum:!1,dragConstraints:{top:0,bottom:d},onDragStart:()=>i(!0),onDragEnd:()=>{const e=u.get(),t=Math.round(100-e/d*100);o(Math.max(0,Math.min(100,t))),i(!1)},onDrag:()=>{const e=u.get(),t=Math.round(100-e/d*100);t!==n&&o(Math.max(0,Math.min(100,t)))},style:{y:u,position:"absolute",left:"50%",marginLeft:"-18px",width:"36px",height:"36px",borderRadius:"50%",background:"#FFFFFF",boxShadow:"0 2px 4px rgba(0,0,0,0.15)",cursor:"grab",zIndex:2},whileDrag:{cursor:"grabbing",scale:1.05}})]})}),Ab=e=>{let{tenantId:n,onClose:r,onTransactionComplete:o}=e;const a=Qv(),[i,s]=(0,t.useState)("input"),[l,c]=(0,t.useState)("left"),[d,u]=(0,t.useState)({productName:"",productBarcode:"",quantity:0,unit:"",unitsPerPack:0,contentUnit:"",isWholesale:!0,supplier:"",date:(new Date).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),pricePerUnit:0,totalPrice:0,hargaPokok:0,hasDiscount:!1,hasPPN:!1,category:""}),h=(0,t.useRef)(null),p=(0,t.useRef)(null),[f,m]=(0,t.useState)(!1),[g,x]=(0,t.useState)(!1),[y,v]=(0,t.useState)(""),b=(0,t.useRef)(null),[w,k]=(0,t.useState)(""),[C,j]=(0,t.useState)(!1),[_,N]=(0,t.useState)([]),[S,E]=(0,t.useState)(!1),[A,P]=(0,t.useState)(!1),B=(0,t.useRef)(null),[I,T]=(0,t.useState)(!1),[M,D]=(0,t.useState)(!1),[R,O]=(0,t.useState)(!1),[F,L]=(0,t.useState)(!1),[z,W]=(0,t.useState)(!1),[V,U]=(0,t.useState)(!1),[H,G]=(0,t.useState)(""),[X,K]=(0,t.useState)(""),[Y,q]=(0,t.useState)(!1),[Z,J]=(0,t.useState)(""),[Q,$]=(0,t.useState)(""),[ee,te]=(0,t.useState)(!1),[ne,re]=(0,t.useState)(""),[oe,ae]=(0,t.useState)(""),[ie,se]=(0,t.useState)(""),[le,ce]=(0,t.useState)(""),[de,ue]=(0,t.useState)(_b),he=(0,t.useRef)(null),pe=(0,t.useRef)(null),[fe,me]=(0,t.useState)("tunai"),[ge]=(0,t.useState)(35e5),[xe]=(0,t.useState)(2e6),[ye]=(0,t.useState)(4e6),[ve,be]=(0,t.useState)(()=>{const e=new Date;return e.setDate(e.getDate()+30),e.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}),[we,ke]=(0,t.useState)(!1),[Ce,je]=(0,t.useState)(!1),[_e,Ne]=(0,t.useState)(10),[Se,Ee]=(0,t.useState)(0),[Ae,Pe]=(0,t.useState)(""),[Be,Ie]=(0,t.useState)(!1),[Te,Me]=(0,t.useState)(""),[De,Re]=(0,t.useState)(!1),[Oe,Le]=(0,t.useState)(""),[ze,We]=(0,t.useState)(!1),[Ve,Ue]=(0,t.useState)(null),[He,Ge]=(0,t.useState)(null),[Xe,Ke]=(0,t.useState)(0),[Ye,Ze]=(0,t.useState)(!1),[Je,Qe]=(0,t.useState)(""),[$e,et]=(0,t.useState)(""),[tt,nt]=(0,t.useState)(""),[rt,ot]=(0,t.useState)(""),[at,it]=(0,t.useState)(!1),[st,lt]=(0,t.useState)(!1),[dt,ut]=(0,t.useState)(!1),[ht,pt]=(0,t.useState)(!1),[ft,mt]=(0,t.useState)(!1),[gt,xt]=(0,t.useState)(!1),[yt,vt]=(0,t.useState)(!1),[bt,wt]=(0,t.useState)(!1),[kt,Ct]=(0,t.useState)(!1),[jt,_t]=(0,t.useState)(""),[Nt,St]=(0,t.useState)(!1),Et="pembelian_draft_".concat(n),At={shake:{x:[0,-8,8,-6,6,-3,3,0],transition:{duration:.5,ease:"easeOut"}}},Pt=(0,t.useMemo)(()=>d.hargaPokok>0&&Se>0?Math.round((Se-d.hargaPokok)/d.hargaPokok*100):_e,[d.hargaPokok,Se,_e]),Bt=Math.max(0,Math.min(100,Pt)),It=(Cb.filter(e=>e.toLowerCase().includes(X.toLowerCase())),jb.filter(e=>e.toLowerCase().includes(Q.toLowerCase()))),Tt=Nb.filter(e=>e.toLowerCase().includes(oe.toLowerCase())),Mt=de.filter(e=>e.toLowerCase().includes(ie.toLowerCase()));(0,t.useEffect)(()=>{let e=d.pricePerUnit*d.quantity,t=e,n=e;d.hasDiscount&&Xe>0&&(t=e-e*Xe/100),n=d.hasPPN?t+11*t/100:t;let r=0;d.quantity>0&&(d.isWholesale&&d.unitsPerPack>0?r=Math.round(n/d.quantity/d.unitsPerPack):d.isWholesale||(r=Math.round(n/d.quantity))),u(e=>qe(qe({},e),{},{totalPrice:Math.round(n),hargaPokok:r}))},[d.pricePerUnit,d.quantity,d.hasDiscount,d.hasPPN,d.unitsPerPack,d.isWholesale,Xe]),(0,t.useEffect)(()=>{if(d.productName||d.quantity>0||d.pricePerUnit>0)try{const e={formData:d,margin:_e,hargaJual:Se,catatan:Ae,discountPercent:Xe,kasPaymentMethod:fe,currentPage:i,savedAt:(new Date).toISOString()};localStorage.setItem(Et,JSON.stringify(e))}catch(iN){console.error("Failed to save Pembelian draft:",iN)}},[d,_e,Se,Ae,Xe,fe,i,Et]),(0,t.useEffect)(()=>{try{const e=localStorage.getItem(Et);if(e){const t=JSON.parse(e);t.formData&&(t.formData.productName||t.formData.quantity>0)&&St(!0)}}catch(iN){console.error("Failed to check Pembelian draft:",iN)}},[Et]);const Dt=(0,t.useCallback)(()=>{try{const e=localStorage.getItem(Et);if(e){const t=JSON.parse(e);t.formData&&u(t.formData),void 0!==t.margin&&Ne(t.margin),void 0!==t.hargaJual&&Ee(t.hargaJual),t.catatan&&Pe(t.catatan),void 0!==t.discountPercent&&Ke(t.discountPercent),t.kasPaymentMethod&&me(t.kasPaymentMethod),t.currentPage&&s(t.currentPage)}}catch(iN){console.error("Failed to resume Pembelian draft:",iN)}St(!1)},[Et]),Rt=(0,t.useCallback)(()=>{try{localStorage.removeItem(Et)}catch(iN){console.error("Failed to discard Pembelian draft:",iN)}St(!1)},[Et]),Ot=(0,t.useCallback)(()=>{try{localStorage.removeItem(Et)}catch(iN){console.error("Failed to clear Pembelian draft:",iN)}},[Et]),Ft=(0,t.useCallback)(async e=>{if(e.length<1)N([]);else{E(!0);try{const n=localStorage.getItem("access_token"),r=await fetch("/api/products/search/kulakan?q=".concat(encodeURIComponent(e),"&limit=10"),{headers:{Authorization:"Bearer ".concat(n)}});if(r.ok){var t;const e=await r.json();N(e.products||[]),P(0===(null===(t=e.products)||void 0===t?void 0:t.length))}else N([]),P(!0)}catch(iN){console.error("Product search failed:",iN),N([]),P(!0)}finally{E(!1)}}},[]);(0,t.useEffect)(()=>{B.current&&clearTimeout(B.current);const e=w.replace(/\D/g,"");if(13===e.length)return Lt(e),k(""),void j(!1);if(w&&C){E(!0);const e=w.length>=3?0:80;0===e?Ft(w):B.current=setTimeout(()=>{Ft(w)},e)}else N([]),E(!1);return()=>{B.current&&clearTimeout(B.current)}},[w,C,Ft]);const Lt=async(e,t)=>{try{if(t){Ny.scanSuccess();const n=t.hpp_per_unit||t.price||0;if(t.harga_jual&&n>0){const e=Math.round(100*(t.harga_jual/n-1));Ne(e),Ee(t.harga_jual)}else if(n>0){const e=10;Ne(e),Ee(Math.round(n*(1+e/100)))}return u(r=>qe(qe({},r),{},{productName:t.name,productBarcode:e,unit:t.last_unit||t.unit||r.unit,contentUnit:t.content_unit||r.contentUnit,unitsPerPack:t.units_per_pack||r.unitsPerPack,hargaPokok:n||r.hargaPokok,pricePerUnit:t.last_price||r.pricePerUnit,category:t.category||r.category,isWholesale:!!t.last_unit})),void P(!1)}const r=localStorage.getItem("access_token"),o=await fetch("/api/products/barcode/".concat(e,"?tenant_id=").concat(n),{headers:{Authorization:"Bearer ".concat(r)}});if(o.ok){const t=await o.json();Ny.scanSuccess();const n=t.harga_jual||0;if(t.harga_jual&&n>0){const e=10;Ne(e),Ee(Math.round(n*(1+e/100)))}u(r=>qe(qe({},r),{},{productName:t.nama_produk||t.name,productBarcode:e,unit:t.unit||r.unit,contentUnit:t.content_unit||r.contentUnit,unitsPerPack:t.units_per_pack||r.unitsPerPack,hargaPokok:n||r.hargaPokok,pricePerUnit:t.last_price||r.pricePerUnit,category:t.category||r.category,isWholesale:!!t.unit,quantity:1})),P(!1)}else Ny.scanError(),u(t=>qe(qe({},t),{},{productBarcode:e})),P(!0)}catch(iN){Ny.scanError(),console.error("Barcode lookup failed:",iN)}},zt=()=>{u(e=>qe(qe({},e),{},{productName:w,productBarcode:"",quantity:0,pricePerUnit:0})),k(""),j(!1),P(!0),Ny.itemAdded(),setTimeout(()=>{G(""),K(""),Qe(""),et(""),T(!0)},100)};(0,t.useEffect)(()=>()=>{p.current&&(p.current.stop(),p.current=null)},[]),(0,t.useEffect)(()=>{if(f){const e=setTimeout(()=>{(async()=>{if(h.current){x(!0),v("");try{p.current=new Ix(h.current,{desiredWidth:1280,desiredHeight:720,decodeFPS:15,roiResizeLongSide:600,consensusFrames:2}),p.current.onFound(e=>{var t;Lt(e.text),m(!1),null===(t=p.current)||void 0===t||t.stop()}),p.current.onProgress(e=>{"camera-ready"===e.phase&&x(!1)}),p.current.onError(e=>{v(e.message||"Gagal mengakses kamera"),x(!1)}),await p.current.start()}catch(e){v(e.message||"Gagal memulai scanner"),x(!1)}}})()},100);return()=>clearTimeout(e)}p.current&&(p.current.stop(),p.current=null)},[f]),(0,t.useEffect)(()=>{I&&pe.current&&setTimeout(()=>{var e;return null===(e=pe.current)||void 0===e?void 0:e.focus()},100)},[I]);const Wt=e=>{u(t=>qe(qe({},t),{},{supplier:e})),L(!1)},Vt=e=>{u(t=>qe(qe({},t),{},{category:e})),W(!1)},Ut=()=>{const e=!d.unit||"satuan"===d.unit.toLowerCase(),t=!d.contentUnit||"satuan"===d.contentUnit.toLowerCase();if(!d.productName||d.pricePerUnit<=0||e||t)return mt(!0),xt(!0),e&&lt(!0),t&&pt(!0),void setTimeout(()=>{mt(!1),xt(!1),lt(!1),pt(!1)},500);c("left"),s("checkout")},Ht=()=>{c("right"),s("input")},Gt=async()=>{if(!De){Re(!0),Le("");try{const e=localStorage.getItem("access_token"),t={transaction_type:"pembelian",product_name:d.productName,product_barcode:d.productBarcode,quantity:d.quantity,unit:d.unit,units_per_pack:d.unitsPerPack,content_unit:d.contentUnit,price_per_unit:d.pricePerUnit,total_amount:d.totalPrice,harga_pokok:d.hargaPokok,harga_jual:Se,margin_percent:_e,supplier_name:d.supplier,category:d.category,is_wholesale:d.isWholesale,has_discount:d.hasDiscount,has_ppn:d.hasPPN,payment_method:"tunai"===fe?"CASH":"transfer"===fe?"TRANSFER":"TEMPO",is_tempo:"tempo"===fe,due_date:ve,catatan:Ae,is_new_product:A},n=await fetch("/api/transactions/purchase",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await n.json();n.ok&&"success"===r.status?(Ny.transactionComplete(),Ot(),Ue(r),We(!0),o&&r.message&&o(r.message)):(Le(r.message||r.detail||"Transaksi gagal"),setTimeout(()=>Le(""),3e3))}catch(iN){Le("Transaksi gagal. Silakan coba lagi."),setTimeout(()=>Le(""),3e3)}finally{Re(!1)}}},Xt=e=>"Rp ".concat(e.toLocaleString("id-ID")),Kt=(0,t.useCallback)(()=>{We(!1),Ue(null),u({productName:"",productBarcode:"",quantity:0,unit:"",unitsPerPack:0,contentUnit:"",isWholesale:!0,supplier:"",date:(new Date).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),pricePerUnit:0,totalPrice:0,hargaPokok:0,hasDiscount:!1,hasPPN:!1,category:""}),Ne(10),Ee(0),Pe(""),Ke(0),me("tunai"),s("input"),P(!1),k("")},[]),Yt=e=>e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".");return(0,Fe.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",background:gb,fontFamily:"'Hiragino Kaku Gothic ProN', -apple-system, BlinkMacSystemFont, sans-serif"},children:[(0,Fe.jsx)(ct,{mode:"wait",children:"input"===i?(0,Fe.jsx)(hc.div,{initial:{x:"right"===l?"-100%":"100%"},animate:{x:0},exit:{x:"left"===l?"-100%":"100%"},transition:kb,style:{flex:1,display:"flex",flexDirection:"column"},children:(0,Fe.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 flex-shrink-0",style:{height:"56px",paddingTop:"max(8px, env(safe-area-inset-top))"},children:[(0,Fe.jsx)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:mb},children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain"})}),(0,Fe.jsx)("span",{className:"font-semibold text-lg",style:{color:"#525252"},children:"Pembelian"})]}),(0,Fe.jsx)("div",{style:{padding:"0 16px 12px",flexShrink:0},children:(0,Fe.jsxs)(hc.div,{animate:yt?"shake":"",variants:At,style:{position:"relative"},children:[(0,Fe.jsx)("input",{ref:b,type:"text",value:w,onChange:e=>{k(e.target.value),j(e.target.value.length>0)},onFocus:()=>w&&j(!0),onBlur:()=>setTimeout(()=>j(!1),200),placeholder:"Input barcode atau ketik nama produk",style:{width:"100%",height:"48px",padding:"0 48px 0 16px",background:yb,border:"none",borderRadius:"12px",fontSize:"14px",color:vb,outline:"none"}}),(0,Fe.jsx)("div",{style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"4px"},children:a?(0,Fe.jsx)(cb,{onBarcodeReceived:Lt,variant:"icon-only"}):(0,Fe.jsx)("button",{onClick:()=>m(!0),style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",border:"none",cursor:"pointer"},children:(0,Fe.jsx)("img",{src:"/icons/CAM.png",alt:"Camera",style:{width:"22px",height:"22px"}})})}),C&&w&&(0,Fe.jsx)("div",{style:{position:"absolute",top:"52px",left:0,right:0,background:"white",border:"1px solid ".concat(gb),borderRadius:"12px",maxHeight:"200px",overflowY:"auto",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:50},children:S?(0,Fe.jsx)("div",{style:{padding:"12px 16px",fontSize:"14px",color:pb},children:"Mencari..."}):(0,Fe.jsxs)(Fe.Fragment,{children:[_.map(e=>(0,Fe.jsxs)("div",{onClick:()=>(e=>{Ny.itemAdded();const t=e.hpp_per_unit||e.harga_jual||0;if(e.harga_jual&&t>0){const n=Math.round(100*(e.harga_jual/t-1));Ne(n),Ee(e.harga_jual)}else if(t>0){const e=10;Ne(e),Ee(Math.round(t*(1+e/100)))}u(n=>qe(qe({},n),{},{productName:e.name,productBarcode:e.barcode||"",unit:e.last_unit||n.unit,pricePerUnit:e.last_price||n.pricePerUnit,hargaPokok:t||n.hargaPokok,unitsPerPack:e.units_per_pack||n.unitsPerPack,contentUnit:e.content_unit||n.contentUnit,category:e.category||n.category,isWholesale:!!e.last_unit,quantity:1})),k(""),j(!1),N([]),P(!1)})(e),style:{padding:"12px 16px",cursor:"pointer",borderBottom:"1px solid ".concat(xb)},children:[(0,Fe.jsx)("div",{style:{fontSize:"14px",fontWeight:500,color:vb},children:e.name}),(0,Fe.jsx)("div",{style:{fontSize:"12px",color:pb},children:Xt(e.harga_jual||0)})]},e.id)),!_.some(e=>e.name.toLowerCase()===w.toLowerCase().trim())&&w.trim()&&(0,Fe.jsxs)("div",{onClick:zt,style:{padding:"12px 16px",cursor:"pointer"},children:[(0,Fe.jsxs)("div",{style:{fontSize:"14px",fontWeight:500,color:db},children:['+ Tambah "',w,'" sebagai produk baru']}),(0,Fe.jsx)("div",{style:{fontSize:"12px",color:pb},children:"Produk baru akan didaftarkan"})]})]})})]})}),(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"0 16px",minHeight:0,overflow:"auto"},children:[(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"8px",flex:1,minHeight:0},children:[(0,Fe.jsxs)("div",{style:{background:yb,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[(0,Fe.jsx)("div",{style:{padding:"8px 8px",borderBottom:"1px solid ".concat(gb),background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:pb,textAlign:"center"},children:"Rincian Produk"}),(0,Fe.jsxs)("div",{onClick:()=>{var e;vt(!0),setTimeout(()=>vt(!1),500),null===(e=b.current)||void 0===e||e.focus()},style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 12px",background:yb,borderBottom:"1px solid ".concat(xb),cursor:"pointer"},children:[(!d.productName||d.productName.split(" ").length<=2)&&(0,Fe.jsx)("div",{style:{fontSize:"14px",color:pb,marginBottom:"2px",textAlign:"left"},children:"Nama Produk"}),(0,Fe.jsx)(hc.div,{animate:gt&&!d.productName?"shake":"",variants:At,style:{fontSize:"14px",fontWeight:600,color:d.productName?vb:pb,textAlign:"left",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",lineHeight:"1.3"},children:d.productName||"Pilih produk"}),A&&d.productName&&(0,Fe.jsx)("div",{style:{fontSize:"11px",color:db,marginTop:"2px",textAlign:"left"},children:"Produk baru"})]}),(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",padding:"0 12px",background:xb,borderBottom:"1px solid ".concat(gb)},children:[(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[(0,Fe.jsx)("div",{style:{fontSize:"14px",color:pb,marginBottom:"2px",textAlign:"left"},children:"Kuantiti"}),(0,Fe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{onClick:()=>{G(d.quantity>0?d.quantity.toString():""),K(d.unit),Qe(""),et(""),T(!0)},style:{color:pb,flexShrink:0,cursor:"pointer",fontSize:"14px"},children:"\u270e"}),(0,Fe.jsx)(hc.span,{animate:gt&&(d.quantity<=0||!d.unit||"satuan"===d.unit.toLowerCase())?"shake":"",variants:At,onClick:()=>{G(d.quantity>0?d.quantity.toString():""),K(d.unit),Qe(""),et(""),T(!0)},style:{fontSize:"14px",fontWeight:600,color:d.quantity>0||d.unit?vb:pb,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer",display:"inline-block"},children:d.quantity>0||d.unit?"".concat(d.quantity," ").concat(d.unit||"satuan"):"0 satuan"})]})]}),(0,Fe.jsx)("span",{onClick:()=>{u(e=>qe(qe({},e),{},{quantity:e.quantity+1})),Ny.itemAdded()},style:{width:"31px",height:"31px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",background:gb,color:hb,fontSize:"22px",fontWeight:700,cursor:"pointer",flexShrink:0},children:"+"})]}),(0,Fe.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",padding:"0 12px",background:yb},children:d.isWholesale?(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[(0,Fe.jsxs)("div",{style:{fontSize:"14px",color:pb,marginBottom:"2px",textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["Isi per ",d.unit.toLowerCase()||"satuan"]}),(0,Fe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{onClick:()=>{J(d.unitsPerPack>0?d.unitsPerPack.toString():""),$(d.contentUnit),nt(""),ot(""),D(!0)},style:{color:pb,flexShrink:0,cursor:"pointer",fontSize:"14px"},children:"\u270e"}),(0,Fe.jsxs)(hc.span,{animate:gt&&(d.unitsPerPack<=0||!d.contentUnit||"satuan"===d.contentUnit.toLowerCase())?"shake":"",variants:At,onClick:()=>{J(d.unitsPerPack>0?d.unitsPerPack.toString():""),$(d.contentUnit),nt(""),ot(""),D(!0)},style:{fontSize:"14px",fontWeight:600,color:d.unitsPerPack>0?vb:pb,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer",display:"inline-block"},children:[d.unitsPerPack," ",d.contentUnit||"satuan"]})]})]}),(0,Fe.jsx)("span",{onClick:()=>{u(e=>qe(qe({},e),{},{unitsPerPack:e.unitsPerPack+1})),Ny.itemAdded()},style:{width:"31px",height:"31px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",background:gb,color:hb,fontSize:"22px",fontWeight:700,cursor:"pointer",flexShrink:0},children:"+"})]}):(0,Fe.jsx)("div",{style:{flex:1}})})]}),(0,Fe.jsxs)("div",{style:{background:yb,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[(0,Fe.jsx)("div",{style:{padding:"8px 8px",borderBottom:"1px solid ".concat(gb),background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:pb,textAlign:"center"},children:"Rincian Pembelian"}),(0,Fe.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 12px",background:yb,borderBottom:"1px solid ".concat(xb)},children:(0,Fe.jsx)(Sb,{checked:d.isWholesale,onChange:e=>u(t=>qe(qe({},t),{},{isWholesale:e})),labelOn:"wholesales",labelOff:"ecer"})}),(0,Fe.jsxs)("div",{onClick:()=>{ae(d.supplier),L(!0)},style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 12px",background:xb,borderBottom:"1px solid ".concat(gb),cursor:"pointer"},children:[(0,Fe.jsx)("div",{style:{fontSize:"14px",color:pb,marginBottom:"2px",textAlign:"left"},children:"Supplier"}),(0,Fe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:pb,flexShrink:0,fontSize:"14px"},children:"\u270e"}),(0,Fe.jsx)("span",{style:{fontSize:"14px",fontWeight:600,color:d.supplier?vb:pb,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.supplier||"nama suplier"})]})]}),(0,Fe.jsxs)("div",{onClick:()=>U(!0),style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 12px",background:yb,cursor:"pointer"},children:[(0,Fe.jsx)("div",{style:{fontSize:"14px",color:pb,marginBottom:"2px",textAlign:"left"},children:"Tanggal"}),(0,Fe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:pb,flexShrink:0,fontSize:"14px"},children:"\u270e"}),(0,Fe.jsx)("span",{style:{fontSize:"14px",fontWeight:600,color:vb,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.date})]})]})]})]}),(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",flex:1,minHeight:0},children:[(0,Fe.jsxs)("div",{style:{background:yb,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[(0,Fe.jsx)("div",{style:{padding:"8px 8px",borderBottom:"1px solid ".concat(gb),background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:pb,textAlign:"center"},children:"Pricing"}),(0,Fe.jsxs)("div",{onClick:()=>{re(d.pricePerUnit>0?d.pricePerUnit.toString():""),O(!0)},style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 12px",background:d.pricePerUnit>0?"#FFF7ED":yb,borderBottom:"1px solid ".concat(xb),cursor:"pointer",borderLeft:d.pricePerUnit>0?"3px solid ".concat(db):"none"},children:[(0,Fe.jsxs)("div",{style:{fontSize:"14px",color:pb,marginBottom:"2px",textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["Harga per ",d.unit||"satuan"]}),(0,Fe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:"#9CA3AF",flexShrink:0},children:"\u270e"}),(0,Fe.jsx)(hc.span,{animate:gt&&d.pricePerUnit<=0?"shake":"",variants:At,style:{fontSize:"15px",fontWeight:700,color:vb,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block"},children:Xt(d.pricePerUnit)})]})]}),(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 12px",background:xb,borderBottom:"1px solid ".concat(gb)},children:[(0,Fe.jsx)("div",{style:{fontSize:"14px",color:pb,marginBottom:"2px",textAlign:"left"},children:"Total Bayar"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:vb,textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Xt(d.totalPrice)})]}),(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 12px",background:yb},children:[(0,Fe.jsx)("div",{style:{fontSize:"14px",color:pb,marginBottom:"2px",textAlign:"left"},children:"HPP"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:vb,textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Xt(d.hargaPokok)})]})]}),(0,Fe.jsxs)("div",{style:{background:yb,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[(0,Fe.jsx)("div",{style:{padding:"8px 8px",borderBottom:"1px solid ".concat(gb),background:"#FAFAFA",fontSize:"12px",fontWeight:600,color:pb,textAlign:"center"},children:"Extra"}),(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 12px",background:yb,borderBottom:"1px solid ".concat(xb),gap:"8px"},children:[(0,Fe.jsx)(Sb,{checked:d.hasDiscount,onChange:e=>{u(t=>qe(qe({},t),{},{hasDiscount:e})),e&&0===Xe&&Ke(5)},labelOn:"".concat(Xe,"%"),labelOff:"diskon off"}),d.hasDiscount&&(0,Fe.jsx)("span",{onClick:()=>Ze(!0),style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",background:db,color:"white",fontSize:"16px",fontWeight:600,cursor:"pointer",flexShrink:0},children:"+"})]}),(0,Fe.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 12px",background:xb,borderBottom:"1px solid ".concat(gb)},children:(0,Fe.jsx)(Sb,{checked:d.hasPPN,onChange:e=>u(t=>qe(qe({},t),{},{hasPPN:e})),labelOn:"PPN",labelOff:"PPN off"})}),(0,Fe.jsxs)("div",{onClick:()=>{se(d.category),W(!0)},style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 12px",background:yb,cursor:"pointer"},children:[(0,Fe.jsx)("div",{style:{fontSize:"14px",color:pb,marginBottom:"2px",textAlign:"left"},children:"Kategori Produk"}),(0,Fe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:pb,flexShrink:0,fontSize:"14px"},children:"\u270e"}),(0,Fe.jsx)("span",{style:{fontSize:"14px",fontWeight:600,color:d.category?vb:pb,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.category||"Tulis Kategori"})]})]})]})]})]}),Oe&&"input"===i&&(0,Fe.jsx)("div",{style:{padding:"8px 16px",background:"#FEE2E2",color:"#DC2626",textAlign:"center",fontSize:"13px",fontWeight:500},children:Oe}),(0,Fe.jsxs)("div",{style:{flexShrink:0,display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",padding:"12px 16px",background:gb,paddingBottom:"max(12px, env(safe-area-inset-bottom))"},children:[(0,Fe.jsx)("button",{onClick:()=>{d.productBarcode||m(!0)},disabled:!!d.productBarcode,style:{padding:d.productBarcode?"6px 10px":"14px",background:yb,color:"#525252",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,cursor:d.productBarcode?"default":"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"48px"},children:d.productBarcode?(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("span",{style:{fontSize:"10px",fontWeight:400,color:pb,marginBottom:"1px"},children:"barcode"}),(0,Fe.jsx)("span",{style:{fontSize:"12px",fontWeight:600,color:vb,letterSpacing:"0.5px"},children:d.productBarcode})]}):"Scan Barcode"}),(0,Fe.jsx)(hc.button,{animate:ft?"shake":"",variants:At,onClick:Ut,style:{padding:"14px",background:db,color:"white",border:"none",borderRadius:"12px",fontSize:"15px",fontWeight:700,cursor:"pointer"},children:"Next"})]})]})},"input"):(0,Fe.jsx)(hc.div,{initial:{x:"right"===l?"-100%":"100%"},animate:{x:0},exit:{x:"left"===l?"-100%":"100%"},transition:kb,style:{flex:1,display:"flex",flexDirection:"column"},children:(0,Fe.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 flex-shrink-0",style:{height:"56px",paddingTop:"max(8px, env(safe-area-inset-top))"},children:[(0,Fe.jsx)("button",{onClick:Ht,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:mb},children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain"})}),(0,Fe.jsx)("span",{className:"font-semibold text-lg",style:{color:"#525252"},children:"Back"})]}),(0,Fe.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"0 16px",minHeight:0,overflow:"auto"},children:[(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"10px",flex:1,minHeight:0},children:[(0,Fe.jsxs)("div",{style:{background:yb,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[(0,Fe.jsx)("div",{style:{flexShrink:0,padding:"6px 12px",borderBottom:"1px solid ".concat(gb),background:"#FAFAFA",fontSize:"11px",fontWeight:600,color:pb,textAlign:"center"},children:"tempo"===fe?"Hutang":"Kas & Bank"}),"tempo"===fe?(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{onClick:()=>ke(!0),style:{flex:1,padding:"10px 12px",background:yb,cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:pb,textAlign:"left"},children:"Jatuh Tempo"}),(0,Fe.jsxs)("div",{style:{fontSize:"14px",fontWeight:600,color:vb,textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:pb},children:"\u270e"})," ",ve]})]}),(0,Fe.jsxs)("div",{style:{flex:1,padding:"10px 12px",background:xb,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:pb,textAlign:"left"},children:"Nilai Hutang"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:vb,textAlign:"left"},children:Xt(d.totalPrice)})]}),(0,Fe.jsxs)("div",{style:{flex:1,padding:"10px 12px",background:yb,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:pb,textAlign:"left"},children:"Total Hutang Toko"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:vb,textAlign:"left"},children:Xt(ye+d.totalPrice)})]})]}):(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{style:{flex:1,padding:"10px 12px",background:yb,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:pb,textAlign:"left"},children:"tunai"===fe?"Kas Toko":"Kas Bank"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:vb,textAlign:"left"},children:Xt("tunai"===fe?xe:ge)})]}),(0,Fe.jsxs)("div",{style:{flex:1,padding:"10px 12px",background:xb,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:pb,textAlign:"left"},children:"Total Bayar"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:vb,textAlign:"left"},children:Xt(d.totalPrice)})]}),(0,Fe.jsxs)("div",{style:{flex:1,padding:"10px 12px",background:yb,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:pb,textAlign:"left"},children:"tunai"===fe?"Update Kas Toko":"Update Kas Bank"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:"#EF4444",textAlign:"left"},children:Xt("tunai"===fe?xe-d.totalPrice:ge-d.totalPrice)})]})]})]}),(0,Fe.jsxs)("div",{style:{background:yb,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[(0,Fe.jsx)("div",{style:{flexShrink:0,padding:"6px 12px",borderBottom:"1px solid ".concat(gb),background:"#FAFAFA",fontSize:"11px",fontWeight:600,color:pb,textAlign:"center"},children:"Cara Bayar"}),(0,Fe.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 12px",background:"tunai"===fe?"#FFF7ED":yb,borderBottom:"1px solid ".concat(xb)},children:(0,Fe.jsx)(Sb,{checked:"tunai"===fe,onChange:()=>me("tunai"),labelOn:"Tunai",labelOff:"Tunai off"})}),(0,Fe.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 12px",background:"transfer"===fe?"#FFF7ED":xb,borderBottom:"1px solid ".concat(gb)},children:(0,Fe.jsx)(Sb,{checked:"transfer"===fe,onChange:()=>me("transfer"),labelOn:"Transfer",labelOff:"Transfer off"})}),(0,Fe.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 12px",background:"tempo"===fe?"#FFF7ED":yb},children:(0,Fe.jsx)(Sb,{checked:"tempo"===fe,onChange:()=>me("tempo"),labelOn:"Tempo",labelOff:"Tempo off"})})]})]}),(0,Fe.jsxs)("div",{style:{display:"flex",gap:"10px",flex:1,minHeight:0},children:[(0,Fe.jsxs)("div",{style:{flex:"1 1 75%",background:yb,borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},children:[(0,Fe.jsx)("div",{style:{flexShrink:0,padding:"6px 12px",borderBottom:"1px solid ".concat(gb),background:"#FAFAFA",textAlign:"center"},children:(0,Fe.jsx)("span",{style:{fontSize:"11px",fontWeight:600,color:pb},children:"Sales Pricing"})}),(0,Fe.jsx)("div",{style:{flex:1,flexShrink:0,minHeight:"52px",padding:"10px 12px",background:yb,borderBottom:"1px solid ".concat(xb),display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,Fe.jsx)("div",{style:{fontSize:"14px",fontWeight:700,color:vb,textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},children:d.productName})}),(0,Fe.jsxs)("div",{style:{flex:1,minHeight:"52px",padding:"10px 12px",background:xb,borderBottom:"1px solid ".concat(gb),display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:pb,textAlign:"left"},children:"Harga Pokok Produksi"}),(0,Fe.jsx)("div",{style:{fontSize:"15px",fontWeight:700,color:vb,textAlign:"left"},children:Xt(d.hargaPokok)})]}),(0,Fe.jsxs)("div",{onClick:()=>{_t(Se.toString()),Ct(!0)},style:{flex:1,minHeight:"52px",padding:"10px 12px",background:yb,borderBottom:"1px solid ".concat(xb),cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:pb,textAlign:"left"},children:"Harga Jual"}),(0,Fe.jsxs)("div",{style:{fontSize:"15px",fontWeight:700,color:vb,textAlign:"left",display:"flex",alignItems:"center",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:pb},children:"\u270e"})," ",Xt(Se)]})]}),(0,Fe.jsxs)("div",{onClick:()=>{Me(Ae),Ie(!0)},style:{flex:1,minHeight:"52px",padding:"10px 12px",background:yb,cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,Fe.jsx)("div",{style:{fontSize:"11px",color:pb,textAlign:"left"},children:"Catatan"}),(0,Fe.jsxs)("div",{style:{fontSize:"15px",color:vb,textAlign:"left",display:"flex",alignItems:"flex-start",gap:"4px"},children:[(0,Fe.jsx)("span",{style:{color:pb},children:"\u270e"}),(0,Fe.jsx)("span",{style:{color:Ae?vb:fb},children:Ae||"Tambah catatan..."})]})]})]}),(0,Fe.jsx)(Eb,{value:Bt,displayValue:Pt,onChange:e=>{if(Ne(e),d.hargaPokok>0){const t=Math.round(d.hargaPokok*(1+e/100));Ee(t)}}})]})]}),(0,Fe.jsxs)("div",{style:{flexShrink:0,display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",padding:"12px 16px",background:gb,paddingBottom:"max(12px, env(safe-area-inset-bottom))"},children:[(0,Fe.jsx)("button",{onClick:r,style:{padding:"14px",background:yb,color:"#525252",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Draft"}),(0,Fe.jsx)("button",{onClick:Gt,disabled:De,style:{padding:"14px",background:De?"#94A3B8":ub,color:"white",border:"none",borderRadius:"12px",fontSize:"15px",fontWeight:700,cursor:De?"not-allowed":"pointer"},children:De?"Menyimpan...":"Simpan"})]})]})},"checkout")}),(0,Fe.jsx)(Zv,{isOpen:f,onClose:()=>m(!1),onBarcodeDetected:Lt,scannerText:"Find a barcode to scan"}),(0,Fe.jsx)(ct,{children:I&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>T(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"320px"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:vb,textAlign:"left"},children:"Kuantiti"}),(0,Fe.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,Fe.jsx)("label",{style:{fontSize:"13px",color:pb,display:"block",marginBottom:"8px",textAlign:"left"},children:"Jumlah"}),(0,Fe.jsx)(hc.div,{animate:at?"shake":"",variants:At,style:{position:"relative"},children:(0,Fe.jsx)("input",{ref:pe,type:"text",inputMode:"numeric",value:Yt(H),onChange:e=>{G(e.target.value.replace(/\D/g,""))},placeholder:"",style:{width:"100%",height:"48px",padding:"0 16px",fontSize:"18px",border:"1px solid ".concat(gb),borderRadius:"8px",outline:"none"}})})]}),(0,Fe.jsxs)("div",{style:{position:"relative",marginBottom:"24px"},children:[(0,Fe.jsx)("label",{style:{fontSize:"13px",color:pb,display:"block",marginBottom:"8px",textAlign:"left"},children:d.isWholesale?"Satuan Wholesales":"Satuan Ecer"}),(0,Fe.jsx)(hc.div,{animate:st?"shake":"",variants:At,style:{position:"relative"},children:(0,Fe.jsx)("input",{ref:he,type:"text",value:X,onChange:e=>{K(e.target.value),q(!0)},onFocus:()=>q(!0),onBlur:()=>setTimeout(()=>q(!1),200),placeholder:d.isWholesale?"ketik lusin/karton/dus...":"ketik pcs/batang/lembar...",style:{width:"100%",height:"48px",padding:"0 16px",fontSize:"16px",border:"2px solid ".concat(X?db:gb),borderRadius:"8px",outline:"none"}})}),Y&&(0,Fe.jsxs)("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"white",border:"1px solid ".concat(gb),borderRadius:"8px",marginTop:"4px",maxHeight:"180px",overflowY:"auto",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",zIndex:10},children:[(()=>{const e=d.isWholesale?Cb:jb;return(X?e.filter(e=>e.toLowerCase().includes(X.toLowerCase())):e).map(e=>(0,Fe.jsx)("div",{onClick:()=>{K(e),q(!1)},style:{padding:"12px 16px",cursor:"pointer",borderBottom:"1px solid ".concat(xb),fontSize:"14px",background:X.toLowerCase()===e.toLowerCase()?"#FFF7ED":"white"},children:e},e))})(),X&&!(d.isWholesale?Cb:jb).some(e=>e.toLowerCase()===X.toLowerCase())&&(0,Fe.jsxs)("div",{onClick:()=>{const e=X.charAt(0).toUpperCase()+X.slice(1).toLowerCase();d.isWholesale?Cb.push(e):jb.push(e),K(e),q(!1)},style:{padding:"12px 16px",cursor:"pointer",fontSize:"14px",color:db,fontWeight:600,background:"#FFF7ED"},children:['+ Tambah "',X,'" sebagai satuan baru']})]})]}),(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,Fe.jsx)("button",{onClick:()=>{T(!1),q(!1)},style:{padding:"12px",background:xb,border:"none",borderRadius:"8px",fontWeight:600},children:"Batal"}),(0,Fe.jsx)(hc.button,{animate:bt?"shake":"",variants:At,onClick:()=>{let e=!1;!H.trim()||parseInt(H)<=0?(Qe("Input jumlah"),it(!0),setTimeout(()=>it(!1),500),e=!0):Qe("");const t=/^\d+$/.test(X.trim());if(!X.trim()||t?(et("Input satuan"),lt(!0),setTimeout(()=>lt(!1),500),e=!0):et(""),e)return wt(!0),void setTimeout(()=>wt(!1),500);const n=parseInt(H)||1,r=X.trim();u(e=>qe(qe({},e),{},{quantity:Math.max(1,n),unit:r})),T(!1),q(!1),Qe(""),et("")},style:{padding:"12px",background:db,color:"white",border:"none",borderRadius:"8px",fontWeight:600},children:"Simpan"})]})]})})}),(0,Fe.jsx)(ct,{children:M&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>D(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"320px"},children:[(0,Fe.jsxs)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:vb,textAlign:"left"},children:["Isi per ",d.unit||"satuan"]}),(0,Fe.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,Fe.jsx)("label",{style:{fontSize:"13px",color:pb,display:"block",marginBottom:"8px",textAlign:"left"},children:"Jumlah"}),(0,Fe.jsx)(hc.div,{animate:dt?"shake":"",variants:At,style:{position:"relative"},children:(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:Yt(Z),onChange:e=>{J(e.target.value.replace(/\D/g,""))},autoFocus:!0,style:{width:"100%",height:"48px",padding:"0 16px",fontSize:"18px",border:"1px solid ".concat(gb),borderRadius:"8px",outline:"none"}})})]}),(0,Fe.jsxs)("div",{style:{position:"relative",marginBottom:"24px"},children:[(0,Fe.jsx)("label",{style:{fontSize:"13px",color:pb,display:"block",marginBottom:"8px",textAlign:"left"},children:"Satuan"}),(0,Fe.jsx)(hc.div,{animate:ht?"shake":"",variants:At,style:{position:"relative"},children:(0,Fe.jsx)("input",{type:"text",value:Q,onChange:e=>{$(e.target.value),te(e.target.value.length>0)},onFocus:()=>te(!0),placeholder:"ketik pcs/lembar/bungkus...",style:{width:"100%",height:"48px",padding:"0 16px",fontSize:"16px",border:"2px solid ".concat(Q?db:gb),borderRadius:"8px",outline:"none"}})}),ee&&(0,Fe.jsxs)("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"white",border:"1px solid ".concat(gb),borderRadius:"8px",marginTop:"4px",maxHeight:"150px",overflowY:"auto",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",zIndex:10},children:[(Q?It:jb).map(e=>(0,Fe.jsx)("div",{onClick:()=>{$(e),te(!1)},style:{padding:"12px 16px",cursor:"pointer",borderBottom:"1px solid ".concat(xb),fontSize:"14px",background:Q.toLowerCase()===e.toLowerCase()?"#FFF7ED":"white"},children:e},e)),Q&&!jb.some(e=>e.toLowerCase()===Q.toLowerCase())&&(0,Fe.jsxs)("div",{onClick:()=>{const e=Q.charAt(0).toUpperCase()+Q.slice(1).toLowerCase();$(e),te(!1)},style:{padding:"12px 16px",cursor:"pointer",fontSize:"14px",color:db,fontWeight:600,background:"#FFF7ED"},children:['+ Tambah "',Q,'" sebagai satuan baru']})]})]}),(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,Fe.jsx)("button",{onClick:()=>{D(!1),te(!1)},style:{padding:"12px",background:xb,border:"none",borderRadius:"8px",fontWeight:600},children:"Batal"}),(0,Fe.jsx)(hc.button,{animate:bt?"shake":"",variants:At,onClick:()=>{let e=!1;!Z.trim()||parseInt(Z)<=0?(nt("Input jumlah"),ut(!0),setTimeout(()=>ut(!1),500),e=!0):nt("");const t=/^\d+$/.test(Q.trim());if(!Q.trim()||t?(ot("Input satuan"),pt(!0),setTimeout(()=>pt(!1),500),e=!0):ot(""),e)return wt(!0),void setTimeout(()=>wt(!1),500);const n=parseInt(Z)||1,r=Q.trim();u(e=>qe(qe({},e),{},{unitsPerPack:Math.max(1,n),contentUnit:r})),D(!1),te(!1),nt(""),ot("")},style:{padding:"12px",background:db,color:"white",border:"none",borderRadius:"8px",fontWeight:600},children:"Simpan"})]})]})})}),(0,Fe.jsx)(ct,{children:R&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>O(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"300px"},children:[(0,Fe.jsxs)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:vb,textAlign:"left"},children:["Harga per ",d.unit||"satuan"]}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:Yt(ne),onChange:e=>re(e.target.value.replace(/\D/g,"")),autoFocus:!0,style:{width:"100%",height:"48px",textAlign:"center",fontSize:"24px",border:"1px solid ".concat(gb),borderRadius:"8px",marginBottom:"16px"}}),(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,Fe.jsx)("button",{onClick:()=>O(!1),style:{padding:"12px",background:xb,border:"none",borderRadius:"8px",fontWeight:600},children:"Batal"}),(0,Fe.jsx)("button",{onClick:()=>{const e=parseInt(ne.replace(/\D/g,""))||0;u(t=>qe(qe({},t),{},{pricePerUnit:e})),O(!1)},style:{padding:"12px",background:db,color:"white",border:"none",borderRadius:"8px",fontWeight:600},children:"Simpan"})]})]})})}),(0,Fe.jsx)(ct,{children:F&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>L(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"300px"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:vb,textAlign:"left"},children:"Supplier"}),(0,Fe.jsx)("input",{type:"text",value:oe,onChange:e=>ae(e.target.value),placeholder:"Ketik nama supplier",autoFocus:!0,style:{width:"100%",height:"48px",padding:"0 16px",fontSize:"14px",border:"2px solid ".concat(db),borderRadius:"8px",marginBottom:"8px",outline:"none"}}),(0,Fe.jsxs)("div",{style:{maxHeight:"200px",overflowY:"auto",marginBottom:"16px"},children:[Tt.map(e=>(0,Fe.jsx)("div",{onClick:()=>Wt(e),style:{padding:"12px 16px",cursor:"pointer",borderBottom:"1px solid ".concat(xb),fontSize:"14px",color:vb,background:d.supplier===e?"#FFF7ED":"white"},children:e},e)),oe.trim()&&!Nb.some(e=>e.toLowerCase()===oe.toLowerCase())&&(0,Fe.jsxs)("div",{onClick:()=>{const e=oe.trim();Nb.push(e),Wt(e)},style:{padding:"12px 16px",cursor:"pointer",fontSize:"14px",color:db,fontWeight:600,background:"#FFF7ED"},children:['+ "',oe,'" sebagai suplier baru']})]}),(0,Fe.jsx)("button",{onClick:()=>L(!1),style:{width:"100%",padding:"12px",background:xb,border:"none",borderRadius:"8px",fontWeight:600},children:"Batal"})]})})}),(0,Fe.jsx)(ct,{children:z&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>W(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"320px",maxHeight:"70vh",display:"flex",flexDirection:"column"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:vb,textAlign:"left"},children:"Kategori Produk"}),(0,Fe.jsx)("input",{type:"text",value:ie,onChange:e=>se(e.target.value),placeholder:"Cari atau tambah kategori...",autoFocus:!0,style:{width:"100%",height:"48px",padding:"0 16px",fontSize:"14px",border:"2px solid ".concat(db),borderRadius:"8px",marginBottom:"8px",outline:"none"}}),(0,Fe.jsxs)("div",{style:{flex:1,overflowY:"auto"},children:[Mt.map(e=>(0,Fe.jsx)("div",{onClick:()=>Vt(e),style:{padding:"12px 16px",cursor:"pointer",borderBottom:"1px solid ".concat(xb),fontSize:"14px",color:vb,background:d.category===e?"#FFF7ED":"white"},children:e},e)),ie.trim()&&!de.some(e=>e.toLowerCase()===ie.toLowerCase())&&(0,Fe.jsxs)("div",{onClick:()=>{const e=ie.trim();ue(t=>[...t,e]),Vt(e)},style:{padding:"12px 16px",cursor:"pointer",fontSize:"14px",color:db,fontWeight:600,background:"#FFF7ED"},children:['+ "',ie,'" sebagai kategori baru']})]}),(0,Fe.jsx)("button",{onClick:()=>W(!1),style:{width:"100%",padding:"12px",background:xb,border:"none",borderRadius:"8px",fontWeight:600,marginTop:"12px"},children:"Batal"})]})})}),(0,Fe.jsx)(ct,{children:Ye&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Ze(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:"20vh"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"280px"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:vb,textAlign:"center"},children:"Diskon %"}),(0,Fe.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"16px",marginBottom:"24px"},children:[(0,Fe.jsx)("button",{onClick:()=>{const e=Math.max(0,Xe-1);Ke(e),0===e&&u(e=>qe(qe({},e),{},{hasDiscount:!1}))},style:{width:"40px",height:"40px",borderRadius:"50%",background:gb,border:"none",fontSize:"20px",fontWeight:600,cursor:"pointer"},children:"-"}),(0,Fe.jsxs)("span",{style:{fontSize:"32px",fontWeight:700,color:db,minWidth:"60px",textAlign:"center"},children:[Xe,"%"]}),(0,Fe.jsx)("button",{onClick:()=>Ke(e=>Math.min(100,e+1)),style:{width:"40px",height:"40px",borderRadius:"50%",background:db,border:"none",color:"white",fontSize:"20px",fontWeight:600,cursor:"pointer"},children:"+"})]}),(0,Fe.jsx)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",justifyContent:"center",marginBottom:"16px"},children:[5,10,15,20,25,50].map(e=>(0,Fe.jsxs)("button",{onClick:()=>Ke(e),style:{padding:"8px 12px",borderRadius:"8px",background:Xe===e?db:xb,color:Xe===e?"white":vb,border:"none",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:[e,"%"]},e))}),(0,Fe.jsx)("button",{onClick:()=>{0===Xe&&u(e=>qe(qe({},e),{},{hasDiscount:!1})),Ze(!1)},style:{width:"100%",padding:"12px",background:db,color:"white",border:"none",borderRadius:"8px",fontWeight:600},children:"Simpan"})]})})}),(0,Fe.jsx)(ct,{children:V&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>U(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"320px"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:vb,textAlign:"center"},children:"Pilih Tanggal"}),(0,Fe.jsx)("input",{type:"date",defaultValue:(()=>{const e=d.date.split("/");return 3===e.length?"".concat(e[2],"-").concat(e[1],"-").concat(e[0]):(new Date).toISOString().split("T")[0]})(),onChange:e=>{const t=new Date(e.target.value).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"});u(e=>qe(qe({},e),{},{date:t}))},style:{width:"100%",height:"48px",padding:"0 16px",fontSize:"16px",border:"2px solid ".concat(db),borderRadius:"8px",outline:"none",marginBottom:"16px"}}),(0,Fe.jsx)("button",{onClick:()=>U(!1),style:{width:"100%",padding:"12px",background:db,color:"white",border:"none",borderRadius:"8px",fontWeight:600},children:"Pilih"})]})})}),(0,Fe.jsx)(ct,{children:we&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>ke(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"320px"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:vb,textAlign:"center"},children:"Jatuh Tempo"}),(0,Fe.jsx)("input",{type:"date",defaultValue:(()=>{const e=new Date;return e.setDate(e.getDate()+30),e.toISOString().split("T")[0]})(),onChange:e=>{const t=new Date(e.target.value).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});be(t)},style:{width:"100%",height:"48px",padding:"0 16px",fontSize:"16px",border:"2px solid ".concat(db),borderRadius:"8px",outline:"none",marginBottom:"16px"}}),(0,Fe.jsx)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",justifyContent:"center",marginBottom:"16px"},children:[7,14,30,60,90].map(e=>{const t=new Date;return t.setDate(t.getDate()+e),(0,Fe.jsxs)("button",{onClick:()=>{const e=t.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});be(e),ke(!1)},style:{padding:"8px 12px",borderRadius:"8px",background:xb,color:vb,border:"none",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:[e," hari"]},e)})}),(0,Fe.jsx)("button",{onClick:()=>ke(!1),style:{width:"100%",padding:"12px",background:db,color:"white",border:"none",borderRadius:"8px",fontWeight:600},children:"Pilih"})]})})}),(0,Fe.jsx)(ct,{children:kt&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Ct(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"300px"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:vb,textAlign:"left"},children:"Harga Jual"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:Yt(jt),onChange:e=>_t(e.target.value.replace(/\D/g,"")),autoFocus:!0,style:{width:"100%",height:"48px",textAlign:"center",fontSize:"24px",border:"1px solid ".concat(gb),borderRadius:"8px",marginBottom:"16px"}}),(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,Fe.jsx)("button",{onClick:()=>Ct(!1),style:{padding:"12px",background:xb,border:"none",borderRadius:"8px",fontWeight:600},children:"Batal"}),(0,Fe.jsx)("button",{onClick:()=>{const e=parseInt(jt)||0;Ee(e),Ct(!1)},style:{padding:"12px",background:db,color:"white",border:"none",borderRadius:"8px",fontWeight:600},children:"Simpan"})]})]})})}),(0,Fe.jsx)(ct,{children:Be&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Ie(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"320px"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:vb,textAlign:"left"},children:"Catatan"}),(0,Fe.jsx)("textarea",{value:Te,onChange:e=>Me(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Pe(Te.trim()),Ie(!1))},placeholder:"Tambah catatan untuk transaksi ini...",autoFocus:!0,rows:4,style:{width:"100%",padding:"12px",fontSize:"14px",border:"1px solid ".concat(gb),borderRadius:"8px",marginBottom:"16px",resize:"none",fontFamily:"inherit"}}),(0,Fe.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,Fe.jsx)("button",{onClick:()=>Ie(!1),style:{padding:"12px",background:xb,border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer"},children:"Batal"}),(0,Fe.jsx)("button",{onClick:()=>{Pe(Te.trim()),Ie(!1)},style:{padding:"12px",background:db,color:"white",border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer"},children:"Simpan"})]})]})})}),Nt&&(0,Fe.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},children:(0,Fe.jsxs)("div",{style:{background:"white",borderRadius:"12px",padding:"20px",margin:"16px",maxWidth:"320px"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"8px",color:vb},children:"Lanjutkan Pembelian?"}),(0,Fe.jsx)("p",{style:{fontSize:"14px",marginBottom:"16px",color:pb},children:"Anda memiliki data pembelian yang belum selesai. Lanjutkan atau mulai baru?"}),(0,Fe.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Fe.jsx)("button",{onClick:Rt,style:{flex:1,padding:"12px",border:"1px solid ".concat(gb),background:"white",borderRadius:"8px",fontWeight:600,color:pb,cursor:"pointer"},children:"Mulai Baru"}),(0,Fe.jsx)("button",{onClick:Dt,style:{flex:1,padding:"12px",border:"none",background:db,color:"white",borderRadius:"8px",fontWeight:600,cursor:"pointer"},children:"Lanjutkan"})]})]})}),(0,Fe.jsx)(ct,{children:Ce&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>je(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.3)",zIndex:99}}),(0,Fe.jsxs)(hc.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:30,stiffness:300},style:{position:"fixed",right:0,top:0,bottom:0,width:"85%",maxWidth:"380px",background:xb,zIndex:100,display:"flex",flexDirection:"column",boxShadow:"-4px 0 8px rgba(0,0,0,0.1)"},children:[(0,Fe.jsxs)("div",{style:{padding:"16px",background:yb,borderBottom:"1px solid ".concat(gb),display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"max(16px, env(safe-area-inset-top))"},children:[(0,Fe.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,color:vb},children:"Sales Pricing"}),(0,Fe.jsx)("button",{onClick:()=>je(!1),style:{width:"32px",height:"32px",border:"none",background:"transparent",fontSize:"20px",cursor:"pointer",color:pb},children:"\xd7"})]}),(0,Fe.jsxs)("div",{style:{padding:"16px",background:yb,borderBottom:"1px solid ".concat(gb)},children:[(0,Fe.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[(0,Fe.jsx)("span",{style:{fontSize:"13px",color:pb},children:"Margin"}),(0,Fe.jsxs)("span",{style:{fontSize:"16px",fontWeight:700,color:db,background:"#FFF7ED",padding:"4px 12px",borderRadius:"16px"},children:[_e,"%"]})]}),(0,Fe.jsx)("input",{type:"range",min:"0",max:"100",value:_e,onChange:e=>{const t=parseInt(e.target.value);Ne(t),d.hargaPokok>0&&Ee(Math.round(d.hargaPokok*(1+t/100)))},style:{width:"100%",height:"6px",borderRadius:"3px",background:gb,outline:"none"}})]}),(0,Fe.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:[(0,Fe.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,Fe.jsx)("h4",{style:{fontSize:"15px",fontWeight:600,color:vb,marginBottom:"4px"},children:d.productName||"Pilih produk"}),(0,Fe.jsxs)("div",{style:{fontSize:"13px",color:pb},children:["Barcode ",d.productBarcode||"-"]})]}),(0,Fe.jsxs)("div",{style:{background:yb,borderRadius:"12px",padding:"16px",marginBottom:"16px"},children:[(0,Fe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[(0,Fe.jsx)("span",{style:{fontSize:"13px",color:pb},children:"Harga Pokok Produksi"}),(0,Fe.jsx)("span",{style:{fontSize:"14px",fontWeight:600},children:Xt(d.hargaPokok)})]}),(0,Fe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid ".concat(gb)},children:[(0,Fe.jsx)("span",{style:{fontSize:"13px",color:pb},children:"Harga Jual"}),(0,Fe.jsx)("span",{style:{fontSize:"16px",fontWeight:700,color:db},children:Xt(Se)})]})]}),(0,Fe.jsxs)("div",{style:{background:yb,borderRadius:"12px",padding:"16px"},children:[(0,Fe.jsx)("div",{style:{fontSize:"13px",color:pb,marginBottom:"8px"},children:"Catatan"}),(0,Fe.jsx)("textarea",{value:Ae,onChange:e=>Pe(e.target.value),placeholder:"Tambahkan catatan...",style:{width:"100%",minHeight:"80px",padding:"12px",border:"1px solid ".concat(gb),borderRadius:"8px",fontSize:"14px",resize:"vertical",outline:"none"}})]})]}),(0,Fe.jsx)("div",{style:{padding:"16px",background:yb,borderTop:"1px solid ".concat(gb),paddingBottom:"max(16px, env(safe-area-inset-bottom))"},children:(0,Fe.jsx)("button",{onClick:()=>je(!1),style:{width:"100%",padding:"14px",background:db,color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:600,cursor:"pointer"},children:"Terapkan"})})]})]})}),(0,Fe.jsx)(ct,{children:ze&&(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:200,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},style:{background:"white",borderRadius:"16px",maxWidth:"380px",width:"100%",maxHeight:"90vh",overflow:"auto"},children:[(0,Fe.jsxs)("div",{style:{textAlign:"center",padding:"24px 20px 16px",borderBottom:"1px dashed ".concat(gb)},children:[(0,Fe.jsx)("h2",{style:{fontSize:"18px",fontWeight:700,color:vb,margin:0},children:"Warung Evlogia"}),(0,Fe.jsx)("p",{style:{fontSize:"12px",color:pb,margin:"4px 0 0"},children:"Jalan Atput II No.16 Bandung"}),(0,Fe.jsxs)("p",{style:{fontSize:"11px",color:fb,margin:"2px 0 0"},children:[(new Date).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"})," \u2022 ",(new Date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})]})]}),(0,Fe.jsx)("div",{style:{padding:"12px 20px",textAlign:"center"},children:(0,Fe.jsx)("span",{style:{display:"inline-block",padding:"4px 12px",background:"#FFF7ED",color:db,borderRadius:"20px",fontSize:"12px",fontWeight:600},children:"KULAKAN / PEMBELIAN"})}),(0,Fe.jsx)("div",{style:{padding:"0 20px 16px"},children:(0,Fe.jsx)("table",{style:{width:"100%",borderCollapse:"collapse"},children:(0,Fe.jsxs)("tbody",{children:[(0,Fe.jsxs)("tr",{children:[(0,Fe.jsxs)("td",{style:{padding:"8px 0",fontSize:"14px",color:vb,fontWeight:500},children:[d.productName||"Produk",d.productBarcode&&(0,Fe.jsx)("div",{style:{fontSize:"11px",color:fb,marginTop:"2px"},children:d.productBarcode})]}),(0,Fe.jsxs)("td",{style:{padding:"8px 0",fontSize:"14px",color:vb,textAlign:"right"},children:[d.quantity," ",d.unit]})]}),(0,Fe.jsxs)("tr",{children:[(0,Fe.jsxs)("td",{style:{padding:"4px 0",fontSize:"13px",color:pb},children:["@ ",Xt(d.pricePerUnit),"/",d.unit]}),(0,Fe.jsx)("td",{style:{padding:"4px 0",fontSize:"14px",color:vb,textAlign:"right",fontWeight:600},children:Xt(d.totalPrice)})]})]})})}),(0,Fe.jsx)("div",{style:{borderTop:"1px dashed ".concat(gb),margin:"0 20px"}}),(0,Fe.jsxs)("div",{style:{padding:"16px 20px"},children:[(0,Fe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,Fe.jsx)("span",{style:{fontSize:"13px",color:pb},children:"Harga Pokok"}),(0,Fe.jsx)("span",{style:{fontSize:"13px",color:vb},children:Xt(d.hargaPokok)})]}),(0,Fe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,Fe.jsx)("span",{style:{fontSize:"13px",color:pb},children:"Harga Jual"}),(0,Fe.jsx)("span",{style:{fontSize:"13px",color:vb},children:Xt(Se)})]}),(0,Fe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,Fe.jsx)("span",{style:{fontSize:"13px",color:pb},children:"Margin"}),(0,Fe.jsxs)("span",{style:{fontSize:"13px",color:Pt>=0?bb:wb},children:[Pt,"%"]})]}),d.supplier&&(0,Fe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,Fe.jsx)("span",{style:{fontSize:"13px",color:pb},children:"Supplier"}),(0,Fe.jsx)("span",{style:{fontSize:"13px",color:vb},children:d.supplier})]}),(0,Fe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Fe.jsx)("span",{style:{fontSize:"13px",color:pb},children:"Pembayaran"}),(0,Fe.jsx)("span",{style:{fontSize:"13px",color:vb,textTransform:"capitalize"},children:fe})]})]}),(0,Fe.jsx)("div",{style:{borderTop:"1px dashed ".concat(gb),margin:"0 20px"}}),(0,Fe.jsxs)("div",{style:{padding:"16px 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Fe.jsx)("span",{style:{fontSize:"16px",fontWeight:600,color:vb},children:"TOTAL"}),(0,Fe.jsx)("span",{style:{fontSize:"20px",fontWeight:700,color:db},children:Xt(d.totalPrice)})]}),(null===Ve||void 0===Ve?void 0:Ve.transaction_id)&&(0,Fe.jsx)("div",{style:{padding:"0 20px 16px",textAlign:"center"},children:(0,Fe.jsxs)("span",{style:{fontSize:"11px",color:fb},children:["ID Transaksi: ",Ve.transaction_id]})}),(0,Fe.jsxs)("div",{style:{margin:"0 20px 16px",padding:"12px",background:"#F0FDF4",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[(0,Fe.jsx)("svg",{style:{width:"20px",height:"20px",color:bb},fill:"currentColor",viewBox:"0 0 20 20",children:(0,Fe.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,Fe.jsxs)("span",{style:{fontSize:"14px",fontWeight:600,color:bb},children:["Berhasil - ",Xt(d.totalPrice)]})]}),(0,Fe.jsxs)("div",{style:{padding:"0 20px 20px",display:"flex",gap:"12px"},children:[(0,Fe.jsx)("button",{onClick:r,style:{flex:1,padding:"14px",background:xb,color:vb,border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Back to Chat"}),(0,Fe.jsx)("button",{onClick:Kt,style:{flex:1,padding:"14px",background:db,color:"white",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"Transaksi Baru"})]})]})})})]})},Pb=[{id:"pcs",label:"pcs"},{id:"kg",label:"kg"},{id:"liter",label:"liter"},{id:"box",label:"box"},{id:"pack",label:"pack"},{id:"custom",label:"Lainnya..."}],Bb=[{id:"opname",label:"Opname",description:"Hasil stock opname fisik"},{id:"rusak",label:"Rusak",description:"Barang rusak/cacat"},{id:"hilang",label:"Hilang",description:"Barang hilang/kehilangan"},{id:"koreksi",label:"Koreksi",description:"Koreksi data kesalahan input"},{id:"lainnya",label:"Lainnya",description:"Alasan lainnya"}],Ib={nama_produk:"",satuan:"pcs",kategori:"",harga_jual:0},Tb=e=>new Intl.NumberFormat("id-ID").format(e),Mb=(e,t)=>{const n=e%1===0?e.toString():e.toFixed(2);return"".concat(n," ").concat(t)},Db="#737373",Rb="#D4D4D4",Ob="#E5E5E5",Fb="#F5F5F5",Lb="#FFFFFF",zb="#262626",Wb="#22C55E",Vb=e=>{let{product:n,onClose:r,onEditStock:o,onEditProduct:a,onRetur:i}=e;const s=n.harga_jual&&n.nilai_per_unit?((e,t)=>{if(!t||0===t)return{margin:0,persen:0};const n=e-t,r=n/t*100;return{margin:n,persen:Math.round(10*r)/10}})(n.harga_jual,n.nilai_per_unit):null,[l,c]=(0,t.useState)(null),{boldPart:d,normalPart:u}=(e=>{const t=e.split(" ");return{boldPart:t.slice(0,2).join(" "),normalPart:t.slice(2).join(" ")}})(n.nama_produk),h=e=>{let{label:t,value:n,isGray:r=!1,valueColor:o,icon:a,editIcon:i,onClick:s}=e;return(0,Fe.jsxs)("div",{className:"flex justify-between items-center px-4 py-3 ".concat(s?"cursor-pointer active:opacity-70":""),style:{backgroundColor:r?Fb:Lb},onClick:s,children:[(0,Fe.jsx)("span",{className:"text-sm",style:{color:Db},children:t}),(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[a,(0,Fe.jsx)("span",{className:"text-sm font-medium",style:{color:o||zb},children:null!==n&&void 0!==n?n:"-"}),i&&(0,Fe.jsx)("svg",{className:"w-4 h-4",style:{color:Db},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]})]})},p=e=>{let{icon:t,label:n,sectionKey:r}=e;const o=l===r;return(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("div",{className:"flex justify-between items-center px-4 py-3 cursor-pointer active:opacity-70",style:{backgroundColor:Lb},onClick:()=>c(o?null:r),children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[t,(0,Fe.jsx)("span",{className:"text-sm font-medium",style:{color:zb},children:n})]}),(0,Fe.jsx)(hc.svg,{className:"w-5 h-5",style:{color:Db},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:o?90:0},transition:{duration:.2},children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),(0,Fe.jsx)(ct,{children:o&&(0,Fe.jsx)(hc.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,Fe.jsx)("div",{className:"px-4 py-4 text-center",style:{backgroundColor:Fb},children:(0,Fe.jsx)("p",{className:"text-sm",style:{color:Db},children:"Coming Soon"})})})})]})},f=()=>{alert("Fitur ini akan tersedia di fase berikutnya")};return(0,Fe.jsxs)("div",{className:"h-full flex flex-col",style:{backgroundColor:Ob},children:[(0,Fe.jsxs)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:Lb,borderColor:Ob},children:[(0,Fe.jsx)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Fb},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:zb},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Fe.jsx)("h1",{className:"text-lg font-semibold ml-3",style:{color:zb},children:"Kartu Stok Produk"})]}),(0,Fe.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,Fe.jsxs)("div",{className:"mx-4 mt-4 rounded-xl overflow-hidden",style:{backgroundColor:Lb,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{className:"px-4 py-3 border-b",style:{borderColor:Ob},children:[(0,Fe.jsx)("span",{className:"text-base font-bold",style:{color:zb},children:d}),u&&(0,Fe.jsx)("span",{className:"text-base ml-1",style:{color:Db},children:u})]}),(0,Fe.jsx)(h,{label:"Kategori",value:n.kategori||"-"}),(0,Fe.jsx)(h,{label:"Barcode",value:n.barcode||"-",isGray:!0,icon:n.barcode?(0,Fe.jsx)("svg",{className:"w-4 h-4",style:{color:Db},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}):void 0}),(0,Fe.jsx)(h,{label:"Stok Sistem",value:Mb(n.stok,n.satuan),editIcon:!0,onClick:o}),(0,Fe.jsx)(h,{label:"Selisih Stok",value:"0 pcs",isGray:!0,valueColor:zb}),(0,Fe.jsx)(h,{label:"HPP",value:n.nilai_per_unit?"Rp ".concat(Tb(n.nilai_per_unit)):"-"}),(0,Fe.jsx)(h,{label:"Harga Jual",value:n.harga_jual?"Rp ".concat(Tb(n.harga_jual)):"-",isGray:!0,editIcon:!0,onClick:a}),(0,Fe.jsx)(h,{label:"Margin",value:s?"".concat(s.persen," Persen"):"-",valueColor:s&&s.margin>0?Wb:zb}),(0,Fe.jsx)(h,{label:"Total Produk Masuk",value:"-",isGray:!0}),(0,Fe.jsx)(h,{label:"Total Produk Keluar",value:"-"}),(0,Fe.jsx)(h,{label:"Rata-rata Penjualan",value:"-",isGray:!0})]}),(0,Fe.jsxs)("div",{className:"mx-4 mt-4 rounded-xl overflow-hidden",style:{backgroundColor:Lb,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)(p,{sectionKey:"supplier",label:"Supplier",icon:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:Db},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,Fe.jsx)("div",{style:{height:1,backgroundColor:Ob}}),(0,Fe.jsx)(p,{sectionKey:"riwayat_pembelian",label:"Riwayat Pembelian",icon:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:Db},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,Fe.jsx)("div",{style:{height:1,backgroundColor:Ob}}),(0,Fe.jsx)(p,{sectionKey:"riwayat_penjualan",label:"Riwayat Penjualan",icon:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:Db},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})})]}),(0,Fe.jsx)("div",{className:"h-24"})]}),(0,Fe.jsx)("div",{className:"absolute bottom-0 left-0 right-0 px-4 py-4 border-t",style:{backgroundColor:Lb,borderColor:Ob,boxShadow:"0 -2px 10px rgba(0,0,0,0.05)"},children:(0,Fe.jsxs)("div",{className:"flex gap-3",children:[(0,Fe.jsx)("button",{onClick:f,className:"flex-1 py-3 rounded-lg font-medium text-sm transition-all active:scale-[0.98]",style:{backgroundColor:Lb,color:zb,border:"1px solid ".concat(Rb)},children:"Stok Opname"}),(0,Fe.jsx)("button",{onClick:f,className:"flex-1 py-3 rounded-lg font-medium text-sm transition-all active:scale-[0.98]",style:{backgroundColor:Lb,color:zb,border:"1px solid ".concat(Rb)},children:"Reorder"})]})})]})},Ub=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=localStorage.getItem("access_token");return fetch(e,qe(qe({},t),{},{headers:qe(qe({"Content-Type":"application/json"},n?{Authorization:"Bearer ".concat(n)}:{}),t.headers)}))},Hb="#F97316",Gb="#737373",Xb="#D4D4D4",Kb="#E5E5E5",Yb="#F5F5F5",qb="#FFFFFF",Zb="#262626",Jb="#EF4444",Qb={x:[0,-8,8,-6,6,-3,3,0],transition:{duration:.5}},$b=e=>{let{isOpen:n,onClose:r,onSuccess:o,categories:a}=e;const[i,s]=(0,t.useState)(Ib),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(""),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(null),[g,x]=(0,t.useState)([]),y=(0,t.useRef)(null);(0,t.useEffect)(()=>{n&&(s(Ib),c(""),u(""),m(null),x([]),setTimeout(()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.focus()},100))},[n]);const v=(e,t)=>{s(n=>qe(qe({},n),{},{[e]:t})),m(null),x([])},b=(e,t)=>{const n=parseInt(t.replace(/\D/g,""),10)||0;v(e,n)};if(!n)return null;const w=e=>{let{label:t,value:n,onChange:r,placeholder:o,required:a,prefix:i,type:s="text",inputMode:l,fieldKey:c,isGray:d=!1}=e;return(0,Fe.jsxs)(hc.div,{animate:c&&g.includes(c)?Qb:{},className:"flex items-center px-3 py-2.5",style:{backgroundColor:d?Yb:qb},children:[(0,Fe.jsxs)("span",{className:"text-sm w-24 flex-shrink-0",style:{color:Gb},children:[t,a&&(0,Fe.jsx)("span",{style:{color:Jb},children:" *"})]}),(0,Fe.jsxs)("div",{className:"flex-1 flex items-center",children:[i&&(0,Fe.jsx)("span",{className:"text-sm mr-1",style:{color:Gb},children:i}),(0,Fe.jsx)("input",{type:s,inputMode:l,value:n,onChange:e=>r(e.target.value),placeholder:o,className:"flex-1 text-sm text-right bg-transparent outline-none",style:{color:Zb}})]})]})};return(0,Fe.jsx)(ct,{children:(0,Fe.jsxs)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:Yb},children:[(0,Fe.jsxs)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:qb,borderColor:Kb},children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Xb},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:Zb},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),(0,Fe.jsx)("h1",{className:"text-lg font-semibold ml-2",style:{color:Zb},children:"Tambah Produk"})]}),(0,Fe.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[f&&(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 rounded-xl flex items-center gap-2",style:{backgroundColor:"#FEF2F2",border:"1px solid ".concat(Jb)},children:[(0,Fe.jsx)("span",{children:"\u26a0\ufe0f"}),(0,Fe.jsx)("span",{className:"text-sm",style:{color:Jb},children:f})]}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"col-span-2 rounded-xl overflow-hidden",style:{backgroundColor:qb,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-3 py-2 border-b",style:{borderColor:Kb},children:(0,Fe.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Hb},children:"Info Produk"})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)(w,{label:"Nama",value:i.nama_produk,onChange:e=>v("nama_produk",e),placeholder:"Indomie Goreng",required:!0,fieldKey:"nama_produk"}),(0,Fe.jsx)(w,{label:"Barcode",value:i.barcode||"",onChange:e=>v("barcode",e),placeholder:"Scan atau ketik",isGray:!0})]})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"col-span-2 rounded-xl overflow-hidden",style:{backgroundColor:qb,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-3 py-2 border-b",style:{borderColor:Kb},children:(0,Fe.jsxs)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Hb},children:["Satuan ",(0,Fe.jsx)("span",{style:{color:Jb},children:"*"})]})}),(0,Fe.jsx)(hc.div,{animate:g.includes("satuan")?Qb:{},className:"p-3 flex flex-wrap gap-2",children:Pb.map(e=>(0,Fe.jsx)("button",{type:"button",onClick:()=>v("satuan",e.id),className:"px-3 py-1.5 rounded-lg text-sm transition-colors",style:{backgroundColor:i.satuan===e.id?Hb:Yb,color:i.satuan===e.id?qb:Gb},children:e.label},e.id))}),"custom"===i.satuan&&(0,Fe.jsx)("div",{className:"px-3 pb-3",children:(0,Fe.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:"Ketik satuan custom",className:"w-full px-3 py-2 rounded-lg text-sm",style:{backgroundColor:Yb,color:Zb,border:"none",outline:"none"}})})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"rounded-xl overflow-hidden",style:{backgroundColor:qb,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-3 py-2 border-b",style:{borderColor:Kb},children:(0,Fe.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Hb},children:"Harga"})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)(w,{label:"Beli",value:i.nilai_per_unit?Tb(i.nilai_per_unit):"",onChange:e=>b("nilai_per_unit",e),placeholder:"0",prefix:"Rp",inputMode:"numeric"}),(0,Fe.jsx)(w,{label:"Jual",value:i.harga_jual?Tb(i.harga_jual):"",onChange:e=>b("harga_jual",e),placeholder:"0",prefix:"Rp",inputMode:"numeric",isGray:!0})]})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"rounded-xl overflow-hidden",style:{backgroundColor:qb,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-3 py-2 border-b",style:{borderColor:Kb},children:(0,Fe.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Hb},children:"Stok"})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)(w,{label:"Awal",value:i.stok_awal||"",onChange:e=>v("stok_awal",parseFloat(e)||0),placeholder:"0",inputMode:"numeric"}),(0,Fe.jsx)(w,{label:"Minimum",value:i.minimum_stock||"",onChange:e=>v("minimum_stock",parseFloat(e)||0),placeholder:"0",inputMode:"numeric",isGray:!0})]})]})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"mt-3 rounded-xl overflow-hidden",style:{backgroundColor:qb,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-3 py-2 border-b",style:{borderColor:Kb},children:(0,Fe.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Hb},children:"Kategori"})}),(0,Fe.jsxs)("div",{className:"p-3 flex flex-wrap gap-2",children:[(0,Fe.jsx)("button",{type:"button",onClick:()=>v("kategori",""),className:"px-3 py-1.5 rounded-lg text-sm transition-colors",style:{backgroundColor:""===i.kategori?Hb:Yb,color:""===i.kategori?qb:Gb},children:"Tanpa Kategori"}),a.map(e=>(0,Fe.jsx)("button",{type:"button",onClick:()=>v("kategori",e.id),className:"px-3 py-1.5 rounded-lg text-sm transition-colors",style:{backgroundColor:i.kategori===e.id?Hb:Yb,color:i.kategori===e.id?qb:Gb},children:e.label},e.id)),(0,Fe.jsx)("button",{type:"button",onClick:()=>v("kategori","custom"),className:"px-3 py-1.5 rounded-lg text-sm transition-colors",style:{backgroundColor:"custom"===i.kategori?Hb:Yb,color:"custom"===i.kategori?qb:Gb},children:"+ Baru"})]}),"custom"===i.kategori&&(0,Fe.jsx)("div",{className:"px-3 pb-3",children:(0,Fe.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"Ketik kategori baru",className:"w-full px-3 py-2 rounded-lg text-sm",style:{backgroundColor:Yb,color:Zb,border:"none",outline:"none"}})})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-3 rounded-xl overflow-hidden",style:{backgroundColor:qb,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-3 py-2 border-b",style:{borderColor:Kb},children:(0,Fe.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Hb},children:"Catatan"})}),(0,Fe.jsx)("div",{className:"p-3",children:(0,Fe.jsx)("textarea",{value:i.deskripsi||"",onChange:e=>v("deskripsi",e.target.value),placeholder:"Catatan tambahan (opsional)",rows:2,className:"w-full text-sm resize-none",style:{backgroundColor:Yb,color:Zb,border:"none",outline:"none",borderRadius:"8px",padding:"12px"}})})]}),(0,Fe.jsx)("div",{className:"h-24"})]}),(0,Fe.jsx)("div",{className:"absolute bottom-0 left-0 right-0 px-4 py-4 border-t",style:{backgroundColor:qb,borderColor:Kb,paddingBottom:"max(16px, env(safe-area-inset-bottom))"},children:(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:async()=>{const e=[];i.nama_produk.trim()||e.push("nama_produk");const t="custom"===i.satuan?d:i.satuan;if(t.trim()||e.push("satuan"),e.length>0)return x(e),setTimeout(()=>x([]),500),void m("Lengkapi field yang wajib diisi");p(!0),m(null);try{var n,r;const e={nama_produk:i.nama_produk.trim(),satuan:t.trim(),kategori:"custom"===i.kategori?l.trim():i.kategori,barcode:(null===(n=i.barcode)||void 0===n?void 0:n.trim())||null,harga_jual:i.harga_jual||null,stok_awal:i.stok_awal||0,nilai_per_unit:i.nilai_per_unit||null,deskripsi:(null===(r=i.deskripsi)||void 0===r?void 0:r.trim())||null,minimum_stock:i.minimum_stock||null},a=await Ub("/api/inventory/products",{method:"POST",body:JSON.stringify(e)});if(401===a.status)return void m("Sesi berakhir. Silakan login ulang.");if(409===a.status){const e=await a.json();return void m(e.detail||"Produk sudah ada")}if(!a.ok){const e=await a.json();throw new Error(e.detail||"Gagal menambah produk")}const s=await a.json();o(s)}catch(a){m(a.message||"Gagal menambah produk. Coba lagi."),console.error("Add product error:",a)}finally{p(!1)}},disabled:h,className:"w-full py-3.5 rounded-xl font-medium transition-colors disabled:opacity-50",style:{backgroundColor:Hb,color:qb},children:h?"Menyimpan...":"Simpan Produk"})})]})})},ew="#F97316",tw="#737373",nw="#E5E5E5",rw="#F5F5F5",ow="#FFFFFF",aw="#262626",iw="#22C55E",sw="#EF4444",lw=e=>{var n;let{isOpen:r,onClose:o,product:a,onSuccess:i}=e;const[s,l]=(0,t.useState)(""),[c,d]=(0,t.useState)("opname"),[u,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(!1),[m,g]=(0,t.useState)(null),[x,y]=(0,t.useState)(null),v=(0,t.useRef)(null);(0,t.useEffect)(()=>{r&&(l(a.stok.toString()),d("opname"),h(""),g(null),y(null),setTimeout(()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.focus()},100))},[r,a]);const b=parseFloat(s)-a.stok,w=!isNaN(b)&&0!==b;return r?x?(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-sm mx-4 rounded-xl shadow-xl p-6 text-center",style:{backgroundColor:ow},children:[(0,Fe.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"#DCFCE7"},children:(0,Fe.jsx)("svg",{className:"w-8 h-8",style:{color:iw},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{color:aw},children:"Stok Berhasil Diubah"}),(0,Fe.jsxs)("p",{className:"mb-4",style:{color:tw},children:[Mb(x.stok_sebelum,a.satuan)," \u2192 ",Mb(x.stok_setelah,a.satuan)]}),(0,Fe.jsxs)("p",{className:"text-sm",style:{color:tw},children:[x.adjustment_amount>0?"+":"",x.adjustment_amount," ",a.satuan]})]})}):(0,Fe.jsx)(ct,{children:(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md mx-4 rounded-xl shadow-xl",style:{backgroundColor:ow},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{borderColor:nw},children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h2",{className:"text-lg font-semibold",style:{color:aw},children:"Edit Stok"}),(0,Fe.jsx)("p",{className:"text-sm truncate",style:{color:tw},children:a.nama_produk})]}),(0,Fe.jsx)("button",{onClick:o,className:"p-2 rounded-lg transition-colors hover:bg-gray-100",style:{color:tw},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Fe.jsxs)("div",{className:"p-4 space-y-4",children:[m&&(0,Fe.jsx)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-lg text-sm",style:{backgroundColor:"#FEF2F2",border:"1px solid ".concat(sw),color:sw},children:m}),(0,Fe.jsxs)("div",{className:"p-4 rounded-lg",style:{backgroundColor:rw},children:[(0,Fe.jsx)("div",{className:"text-sm mb-1",style:{color:tw},children:"Stok Saat Ini"}),(0,Fe.jsx)("div",{className:"text-2xl font-bold",style:{color:aw},children:Mb(a.stok,a.satuan)})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:aw},children:["Stok Baru ",(0,Fe.jsx)("span",{style:{color:sw},children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("input",{ref:v,type:"number",inputMode:"decimal",step:"any",value:s,onChange:e=>{l(e.target.value),g(null)},className:"w-full px-3 py-3 text-lg rounded-lg transition-all",style:{backgroundColor:ow,border:"1px solid ".concat(nw),color:aw,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=ew,e.currentTarget.style.boxShadow="0 0 0 2px ".concat(ew,"30")},onBlur:e=>{e.currentTarget.style.borderColor=nw,e.currentTarget.style.boxShadow="none"}}),(0,Fe.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2",style:{color:tw},children:a.satuan})]}),w&&(0,Fe.jsxs)("div",{className:"mt-1 text-sm",style:{color:b>0?iw:sw},children:[b>0?"+":"",b," ",a.satuan]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-2",style:{color:aw},children:["Alasan Penyesuaian ",(0,Fe.jsx)("span",{style:{color:sw},children:"*"})]}),(0,Fe.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Bb.map(e=>(0,Fe.jsx)("button",{type:"button",onClick:()=>d(e.id),className:"px-3 py-2.5 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:c===e.id?ew:rw,color:c===e.id?ow:tw},children:e.label},e.id))}),(0,Fe.jsx)("p",{className:"mt-1 text-xs",style:{color:tw},children:null===(n=Bb.find(e=>e.id===c))||void 0===n?void 0:n.description})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:aw},children:"Catatan (opsional)"}),(0,Fe.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),placeholder:"Contoh: Hasil stock opname tanggal 5 Desember",rows:2,className:"w-full px-3 py-2.5 rounded-lg transition-all resize-none",style:{backgroundColor:ow,border:"1px solid ".concat(nw),color:aw,outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor=ew,e.currentTarget.style.boxShadow="0 0 0 2px ".concat(ew,"30")},onBlur:e=>{e.currentTarget.style.borderColor=nw,e.currentTarget.style.boxShadow="none"}})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 border-t flex gap-3",style:{borderColor:nw},children:[(0,Fe.jsx)("button",{onClick:o,className:"flex-1 py-3 rounded-lg font-medium transition-colors",style:{backgroundColor:rw,color:tw},children:"Batal"}),(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:async()=>{const e=parseFloat(s);if(isNaN(e)||e<0)g("Jumlah stok tidak valid");else if(e!==a.stok){f(!0),g(null);try{const t={new_quantity:e,reason:c,notes:u.trim()||null},n=await Ub("/api/inventory/products/".concat(a.id,"/adjust"),{method:"POST",body:JSON.stringify(t)});if(401===n.status)return void g("Sesi berakhir. Silakan login ulang.");if(!n.ok){const e=await n.json();throw new Error(e.detail||"Gagal menyesuaikan stok")}const r=await n.json();y(r),setTimeout(()=>{i(r)},1500)}catch(t){g(t.message||"Gagal menyesuaikan stok. Coba lagi."),console.error("Stock adjustment error:",t)}finally{f(!1)}}else g("Stok baru sama dengan stok saat ini")},disabled:p||!w,className:"flex-1 py-3 rounded-lg font-medium transition-colors disabled:opacity-50",style:{backgroundColor:ew,color:ow},children:p?"Menyimpan...":"Simpan Perubahan"})]})]})})}):null},cw=[{id:"rusak",label:"Rusak",description:"Barang rusak/cacat produksi"},{id:"salah_kirim",label:"Salah Kirim",description:"Kesalahan pengiriman"},{id:"tidak_sesuai",label:"Tidak Sesuai",description:"Produk tidak sesuai pesanan"},{id:"kadaluarsa",label:"Kadaluarsa",description:"Masa berlaku habis"},{id:"lainnya",label:"Lainnya",description:"Alasan lain"}],dw=((new Date).toISOString().split("T")[0],e=>new Intl.NumberFormat("id-ID").format(e)),uw="#F97316",hw="#3B82F6",pw="#A855F7",fw="#737373",mw="#E5E5E5",gw="#F5F5F5",xw="#FFFFFF",yw="#262626",vw="#22C55E",bw="#EF4444",ww=e=>{let{isOpen:n,onClose:r,product:o,defaultType:a="retur_penjualan",onSuccess:i}=e;const[s,l]=(0,t.useState)(a),[c,d]=(0,t.useState)("1"),[u,h]=(0,t.useState)(""),[p,f]=(0,t.useState)("rusak"),[m,g]=(0,t.useState)(""),[x,y]=(0,t.useState)(""),[v,b]=(0,t.useState)(""),[w,k]=(0,t.useState)(""),[C,j]=(0,t.useState)((new Date).toISOString().split("T")[0]),[_,N]=(0,t.useState)(!1),[S,E]=(0,t.useState)(null),[A,P]=(0,t.useState)(null),[B,I]=(0,t.useState)(!1),T=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(n){l(a),d("1");const e="retur_penjualan"===a?o.harga_jual||o.nilai_per_unit||0:o.nilai_per_unit||0;h(e.toString()),f("rusak"),g(""),y(""),b(""),k(""),j((new Date).toISOString().split("T")[0]),E(null),P(null),I(!1),setTimeout(()=>{var e;return null===(e=T.current)||void 0===e?void 0:e.focus()},100)}},[n,o,a]),(0,t.useEffect)(()=>{const e="retur_penjualan"===s?o.harga_jual||o.nilai_per_unit||0:o.nilai_per_unit||0;h(e.toString())},[s,o]);const M=parseFloat(c)||0,D=parseFloat(u)||0,R=M*D,O=(e=>{switch(e){case"retur_penjualan":return{label:"Retur Penjualan",description:"Pembeli mengembalikan barang ke toko",stockDirection:"increase"};case"retur_pembelian":return{label:"Retur Pembelian",description:"Mengembalikan barang ke supplier",stockDirection:"decrease"}}})(s),F="increase"===O.stockDirection?o.stok+M:o.stok-M,L=M>0&&D>=0&&("lainnya"!==p||m.trim()),z="retur_pembelian"===s&&M>o.stok;return n?A?(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-sm mx-4 rounded-xl shadow-xl p-6 text-center",style:{backgroundColor:xw},children:[(0,Fe.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"#DCFCE7"},children:(0,Fe.jsx)("svg",{className:"w-8 h-8",style:{color:vw},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsxs)("h3",{className:"text-lg font-semibold mb-2",style:{color:yw},children:[O.label," Berhasil"]}),(0,Fe.jsx)("p",{className:"mb-2",style:{color:fw},children:o.nama_produk}),(0,Fe.jsxs)("p",{className:"mb-4",style:{color:fw},children:["Stok: ",Mb(A.stok_sebelum,o.satuan)," \u2192 ",Mb(A.stok_setelah,o.satuan)]}),(0,Fe.jsxs)("p",{className:"text-sm font-medium",style:{color:uw},children:["Rp ",dw(R)]})]})}):(0,Fe.jsx)(ct,{children:(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md mx-4 rounded-xl shadow-xl max-h-[90vh] flex flex-col",style:{backgroundColor:xw},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{borderColor:mw},children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h2",{className:"text-lg font-semibold",style:{color:yw},children:"Catat Retur"}),(0,Fe.jsx)("p",{className:"text-sm truncate",style:{color:fw},children:o.nama_produk})]}),(0,Fe.jsx)("button",{onClick:r,className:"p-2 rounded-lg transition-colors hover:bg-gray-100",style:{color:fw},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Fe.jsxs)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:[S&&(0,Fe.jsx)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-lg text-sm",style:{backgroundColor:"#FEF2F2",border:"1px solid ".concat(bw),color:bw},children:S}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-2",style:{color:yw},children:["Jenis Retur ",(0,Fe.jsx)("span",{style:{color:bw},children:"*"})]}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Fe.jsxs)("button",{type:"button",onClick:()=>l("retur_penjualan"),className:"px-3 py-3 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"retur_penjualan"===s?hw:gw,color:"retur_penjualan"===s?xw:fw},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Fe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Retur Penjualan"]}),(0,Fe.jsx)("span",{className:"text-xs opacity-75 mt-1 block",children:"Barang masuk"})]}),(0,Fe.jsxs)("button",{type:"button",onClick:()=>l("retur_pembelian"),className:"px-3 py-3 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"retur_pembelian"===s?pw:gw,color:"retur_pembelian"===s?xw:fw},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Fe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})}),"Retur Pembelian"]}),(0,Fe.jsx)("span",{className:"text-xs opacity-75 mt-1 block",children:"Barang keluar"})]})]})]}),(0,Fe.jsxs)("div",{className:"p-3 rounded-lg flex justify-between items-center",style:{backgroundColor:gw},children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:fw},children:"Stok Saat Ini"}),(0,Fe.jsx)("div",{className:"text-lg font-bold",style:{color:yw},children:Mb(o.stok,o.satuan)})]}),(0,Fe.jsxs)("div",{className:"text-right",children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:fw},children:"Stok Setelah"}),(0,Fe.jsx)("div",{className:"text-lg font-bold",style:{color:z?bw:yw},children:Mb(F,o.satuan)})]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:yw},children:["Jumlah ",(0,Fe.jsx)("span",{style:{color:bw},children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("input",{ref:T,type:"number",inputMode:"decimal",step:"any",min:"0",value:c,onChange:e=>{d(e.target.value),E(null)},className:"w-full px-3 py-3 text-lg rounded-lg",style:{backgroundColor:xw,border:"1px solid ".concat(mw),color:yw,outline:"none"}}),(0,Fe.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2",style:{color:fw},children:o.satuan})]}),z&&(0,Fe.jsxs)("p",{className:"mt-1 text-sm",style:{color:bw},children:["Melebihi stok tersedia (",o.stok," ",o.satuan,")"]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:yw},children:"Harga per Unit"}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:fw},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:D>0?dw(D):"",onChange:e=>{const t=e.target.value.replace(/\D/g,"");h(t)},className:"w-full pl-10 pr-3 py-2.5 rounded-lg",style:{backgroundColor:xw,border:"1px solid ".concat(mw),color:yw,outline:"none"}})]})]}),(0,Fe.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#FFF7ED"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:uw},children:"Total Nilai Retur"}),(0,Fe.jsxs)("div",{className:"text-xl font-bold",style:{color:uw},children:["Rp ",dw(R)]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-2",style:{color:yw},children:["Alasan Retur ",(0,Fe.jsx)("span",{style:{color:bw},children:"*"})]}),(0,Fe.jsx)("div",{className:"grid grid-cols-2 gap-2",children:cw.map(e=>(0,Fe.jsx)("button",{type:"button",onClick:()=>f(e.id),className:"px-3 py-2.5 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:p===e.id?uw:gw,color:p===e.id?xw:fw},children:e.label},e.id))})]}),"lainnya"===p&&(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:yw},children:["Alasan Lainnya ",(0,Fe.jsx)("span",{style:{color:bw},children:"*"})]}),(0,Fe.jsx)("input",{type:"text",value:m,onChange:e=>g(e.target.value),placeholder:"Contoh: Kesalahan packing",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:xw,border:"1px solid ".concat(mw),color:yw,outline:"none"}})]}),(0,Fe.jsxs)("button",{type:"button",onClick:()=>I(!B),className:"w-full flex items-center justify-center gap-2 py-2 text-sm",style:{color:fw},children:[(0,Fe.jsx)("span",{className:"flex-1 h-px",style:{backgroundColor:mw}}),(0,Fe.jsxs)("span",{className:"flex items-center gap-1",children:["Detail Tambahan",(0,Fe.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(B?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,Fe.jsx)("span",{className:"flex-1 h-px",style:{backgroundColor:mw}})]}),B&&(0,Fe.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:yw},children:"retur_penjualan"===s?"Nama Pembeli":"Nama Supplier"}),(0,Fe.jsx)("input",{type:"text",value:x,onChange:e=>y(e.target.value),placeholder:"retur_penjualan"===s?"Contoh: Pak Budi":"Contoh: PT Sumber Jaya",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:xw,border:"1px solid ".concat(mw),color:yw,outline:"none"}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:yw},children:"No. Transaksi Asli"}),(0,Fe.jsx)("input",{type:"text",value:v,onChange:e=>b(e.target.value),placeholder:"Contoh: TRX-20231205-001",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:xw,border:"1px solid ".concat(mw),color:yw,outline:"none"}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:yw},children:"Tanggal"}),(0,Fe.jsx)("input",{type:"date",value:C,onChange:e=>j(e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:xw,border:"1px solid ".concat(mw),color:yw,outline:"none"}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:yw},children:"Catatan"}),(0,Fe.jsx)("textarea",{value:w,onChange:e=>k(e.target.value),placeholder:"Catatan tambahan...",rows:2,className:"w-full px-3 py-2.5 rounded-lg resize-none",style:{backgroundColor:xw,border:"1px solid ".concat(mw),color:yw,outline:"none"}})]})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 border-t flex gap-3",style:{borderColor:mw},children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3 rounded-lg font-medium transition-colors",style:{backgroundColor:gw,color:fw},children:"Batal"}),(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:async()=>{if(L)if(z)E("Jumlah retur (".concat(M,") melebihi stok tersedia (").concat(o.stok,")"));else{N(!0),E(null);try{const e={transaction_type:s,product_id:o.id,product_name:o.nama_produk,quantity:M,unit:o.satuan,price_per_unit:D,total_amount:R,reason:"lainnya"===p?m:p,pihak_name:x.trim()||null,transaction_ref:v.trim()||null,notes:w.trim()||null,date:C},t=localStorage.getItem("access_token"),n=localStorage.getItem("tenant_id")||"evlogia",r=await fetch("/api/tenant/".concat(n,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] ".concat(O.label),session_id:"retur-".concat(Date.now()),conversation_context:JSON.stringify({form_data:e})})});if(401===r.status)return void E("Sesi berakhir. Silakan login ulang.");if(!r.ok){const e=await r.json();throw new Error(e.detail||e.message||"Gagal menyimpan retur")}const a=await r.json(),l={success:!0,message:a.message||"Retur berhasil dicatat",transaction_id:a.transaction_id||"",stok_sebelum:o.stok,stok_setelah:F,adjustment_amount:"increase"===O.stockDirection?M:-M};P(l),setTimeout(()=>{i(l)},1500)}catch(e){E(e.message||"Gagal menyimpan retur. Coba lagi."),console.error("[ReturForm] Submit error:",e)}finally{N(!1)}}},disabled:_||!L||z,className:"flex-1 py-3 rounded-lg font-medium transition-colors disabled:opacity-50",style:{backgroundColor:uw,color:xw},children:_?"Menyimpan...":"Simpan ".concat(O.label)})]})]})})}):null},kw=[{id:"peralatan",label:"Peralatan",description:"Komputer, mesin kasir, AC, kulkas",defaultUmurManfaat:4},{id:"kendaraan",label:"Kendaraan",description:"Motor, mobil, truk",defaultUmurManfaat:8},{id:"bangunan",label:"Bangunan",description:"Ruko, gudang",defaultUmurManfaat:20},{id:"tanah",label:"Tanah",description:"Tanah usaha",defaultUmurManfaat:0},{id:"lainnya",label:"Lainnya",description:"Aset tetap lainnya",defaultUmurManfaat:4}],Cw=[{id:"garis_lurus",label:"Garis Lurus",description:"Penyusutan tetap setiap tahun"},{id:"saldo_menurun",label:"Saldo Menurun",description:"Penyusutan lebih besar di awal"}],jw={nama_aset:"",kategori:"peralatan",tanggal_perolehan:(new Date).toISOString().split("T")[0],harga_perolehan:0,umur_manfaat:4,nilai_residu:0,metode_penyusutan:"garis_lurus"},_w=e=>new Intl.NumberFormat("id-ID").format(e),Nw=(e,t,n)=>n<=0?0:Math.round((e-t)/n),Sw=(e,t,n)=>Math.round(Nw(e,t,n)/12),Ew="#F97316",Aw="#3B82F6",Pw="#737373",Bw="#E5E5E5",Iw="#F5F5F5",Tw="#FFFFFF",Mw="#262626",Dw="#22C55E",Rw="#EF4444",Ow=e=>{var n;let{isOpen:r,onClose:o,onSuccess:a,editData:i}=e;const[s,l]=(0,t.useState)(jw),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),x=(0,t.useRef)(null);(0,t.useEffect)(()=>{r&&(l(i?{nama_aset:i.nama_aset,kategori:i.kategori,tanggal_perolehan:i.tanggal_perolehan,harga_perolehan:i.harga_perolehan,umur_manfaat:i.umur_manfaat,nilai_residu:i.nilai_residu,metode_penyusutan:i.metode_penyusutan,lokasi:i.lokasi,nomor_seri:i.nomor_seri}:jw),h(null),f(null),g(!1),setTimeout(()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.focus()},100))},[r,i]),(0,t.useEffect)(()=>{const e=kw.find(e=>e.id===s.kategori);e&&!i&&l(t=>qe(qe({},t),{},{umur_manfaat:e.defaultUmurManfaat}))},[s.kategori,i]);const y=(e,t)=>{l(n=>qe(qe({},n),{},{[e]:t})),h(null)},v=(e,t)=>{const n=parseInt(t.replace(/\D/g,""),10)||0;y(e,n)},b=Nw(s.harga_perolehan,s.nilai_residu,s.umur_manfaat),w=Sw(s.harga_perolehan,s.nilai_residu,s.umur_manfaat),k=s.nama_aset.trim()&&s.harga_perolehan>0&&s.tanggal_perolehan;return r?p?(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"w-full max-w-sm mx-4 rounded-xl shadow-xl p-6 text-center",style:{backgroundColor:Tw},children:[(0,Fe.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"#DCFCE7"},children:(0,Fe.jsx)("svg",{className:"w-8 h-8",style:{color:Dw},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{color:Mw},children:"Aset Berhasil Dicatat"}),(0,Fe.jsx)("p",{className:"mb-2",style:{color:Pw},children:p.nama_aset}),(0,Fe.jsxs)("p",{className:"text-sm",style:{color:Pw},children:["Penyusutan/bulan: Rp ",_w(p.penyusutan_per_bulan)]})]})}):(0,Fe.jsx)(ct,{children:(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,Fe.jsxs)(hc.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md mx-4 rounded-xl shadow-xl max-h-[90vh] flex flex-col",style:{backgroundColor:Tw},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{borderColor:Bw},children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h2",{className:"text-lg font-semibold",style:{color:Mw},children:i?"Edit Aset Tetap":"Catat Aset Tetap"}),(0,Fe.jsx)("p",{className:"text-sm",style:{color:Pw},children:"Peralatan, Kendaraan, dll"})]}),(0,Fe.jsx)("button",{onClick:o,className:"p-2 rounded-lg transition-colors hover:bg-gray-100",style:{color:Pw},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Fe.jsxs)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:[u&&(0,Fe.jsx)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-lg text-sm",style:{backgroundColor:"#FEF2F2",border:"1px solid ".concat(Rw),color:Rw},children:u}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:Mw},children:["Nama Aset ",(0,Fe.jsx)("span",{style:{color:Rw},children:"*"})]}),(0,Fe.jsx)("input",{ref:x,type:"text",value:s.nama_aset,onChange:e=>y("nama_aset",e.target.value),placeholder:"Contoh: Komputer Kasir, Motor Vario",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Tw,border:"1px solid ".concat(Bw),color:Mw,outline:"none"}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-2",style:{color:Mw},children:["Kategori ",(0,Fe.jsx)("span",{style:{color:Rw},children:"*"})]}),(0,Fe.jsx)("div",{className:"grid grid-cols-3 gap-2",children:kw.slice(0,3).map(e=>(0,Fe.jsx)("button",{type:"button",onClick:()=>y("kategori",e.id),className:"px-3 py-2.5 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:s.kategori===e.id?Ew:Iw,color:s.kategori===e.id?Tw:Pw},children:e.label},e.id))}),(0,Fe.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:kw.slice(3).map(e=>(0,Fe.jsx)("button",{type:"button",onClick:()=>y("kategori",e.id),className:"px-3 py-2.5 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:s.kategori===e.id?Ew:Iw,color:s.kategori===e.id?Tw:Pw},children:e.label},e.id))}),(0,Fe.jsx)("p",{className:"mt-1 text-xs",style:{color:Pw},children:null===(n=kw.find(e=>e.id===s.kategori))||void 0===n?void 0:n.description})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:Mw},children:["Tanggal Perolehan ",(0,Fe.jsx)("span",{style:{color:Rw},children:"*"})]}),(0,Fe.jsx)("input",{type:"date",value:s.tanggal_perolehan,onChange:e=>y("tanggal_perolehan",e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Tw,border:"1px solid ".concat(Bw),color:Mw,outline:"none"}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:Mw},children:["Harga Perolehan ",(0,Fe.jsx)("span",{style:{color:Rw},children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:Pw},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:s.harga_perolehan>0?_w(s.harga_perolehan):"",onChange:e=>v("harga_perolehan",e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-3 text-lg font-semibold text-right rounded-lg",style:{backgroundColor:Tw,border:"1px solid ".concat(Bw),color:Mw,outline:"none"}})]})]}),s.harga_perolehan>0&&s.umur_manfaat>0&&(0,Fe.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#EFF6FF"},children:[(0,Fe.jsx)("div",{className:"text-sm font-medium mb-2",style:{color:Aw},children:"Penyusutan"}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{style:{color:Aw},children:"Per Tahun"}),(0,Fe.jsxs)("div",{className:"font-bold",style:{color:Mw},children:["Rp ",_w(b)]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{style:{color:Aw},children:"Per Bulan"}),(0,Fe.jsxs)("div",{className:"font-bold",style:{color:Mw},children:["Rp ",_w(w)]})]})]})]}),(0,Fe.jsxs)("button",{type:"button",onClick:()=>g(!m),className:"w-full flex items-center justify-center gap-2 py-2 text-sm",style:{color:Pw},children:[(0,Fe.jsx)("span",{className:"flex-1 h-px",style:{backgroundColor:Bw}}),(0,Fe.jsxs)("span",{className:"flex items-center gap-1",children:["Opsi Lanjutan",(0,Fe.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(m?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,Fe.jsx)("span",{className:"flex-1 h-px",style:{backgroundColor:Bw}})]}),m&&(0,Fe.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Mw},children:"Umur Manfaat (tahun)"}),(0,Fe.jsx)("input",{type:"number",min:"0",value:s.umur_manfaat,onChange:e=>y("umur_manfaat",parseInt(e.target.value)||0),className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Tw,border:"1px solid ".concat(Bw),color:Mw,outline:"none"}}),(0,Fe.jsx)("p",{className:"mt-1 text-xs",style:{color:Pw},children:"tanah"===s.kategori?"Tanah tidak disusutkan (umur = 0)":"Lama pemakaian hingga habis nilai"})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Mw},children:"Nilai Residu"}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:Pw},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:s.nilai_residu>0?_w(s.nilai_residu):"",onChange:e=>v("nilai_residu",e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-2.5 rounded-lg",style:{backgroundColor:Tw,border:"1px solid ".concat(Bw),color:Mw,outline:"none"}})]}),(0,Fe.jsx)("p",{className:"mt-1 text-xs",style:{color:Pw},children:"Nilai aset di akhir masa manfaat"})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:Mw},children:"Metode Penyusutan"}),(0,Fe.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Cw.map(e=>(0,Fe.jsx)("button",{type:"button",onClick:()=>y("metode_penyusutan",e.id),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:s.metode_penyusutan===e.id?Ew:Iw,color:s.metode_penyusutan===e.id?Tw:Pw},children:e.label},e.id))})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Mw},children:"Lokasi"}),(0,Fe.jsx)("input",{type:"text",value:s.lokasi||"",onChange:e=>y("lokasi",e.target.value),placeholder:"Contoh: Toko utama, Gudang",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Tw,border:"1px solid ".concat(Bw),color:Mw,outline:"none"}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Mw},children:"Nomor Seri / Plat"}),(0,Fe.jsx)("input",{type:"text",value:s.nomor_seri||"",onChange:e=>y("nomor_seri",e.target.value),placeholder:"Contoh: SN12345, AB 1234 CD",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Tw,border:"1px solid ".concat(Bw),color:Mw,outline:"none"}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Mw},children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:s.keterangan||"",onChange:e=>y("keterangan",e.target.value),placeholder:"Catatan tambahan...",rows:2,className:"w-full px-3 py-2.5 rounded-lg resize-none",style:{backgroundColor:Tw,border:"1px solid ".concat(Bw),color:Mw,outline:"none"}})]})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 border-t flex gap-3",style:{borderColor:Bw},children:[(0,Fe.jsx)("button",{onClick:o,className:"flex-1 py-3 rounded-lg font-medium transition-colors",style:{backgroundColor:Iw,color:Pw},children:"Batal"}),(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:async()=>{if(k){d(!0),h(null);try{var e,t,n;const r=localStorage.getItem("access_token"),o=localStorage.getItem("tenant_id")||"evlogia",i={transaction_type:"aset_tetap",jenis_aset:"aset_tetap",nama_aset:s.nama_aset.trim(),kategori_aset:s.kategori,tanggal_perolehan:s.tanggal_perolehan,harga_perolehan:s.harga_perolehan,umur_manfaat:s.umur_manfaat,nilai_residu:s.nilai_residu,metode_penyusutan:s.metode_penyusutan,penyusutan_per_tahun:b,penyusutan_per_bulan:w,lokasi:(null===(e=s.lokasi)||void 0===e?void 0:e.trim())||null,nomor_seri:(null===(t=s.nomor_seri)||void 0===t?void 0:t.trim())||null,keterangan:(null===(n=s.keterangan)||void 0===n?void 0:n.trim())||null},l=await fetch("/api/tenant/".concat(o,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Aset Tetap",session_id:"aset-tetap-".concat(Date.now()),conversation_context:JSON.stringify({form_data:i})})});if(401===l.status)return void h("Sesi berakhir. Silakan login ulang.");if(!l.ok){const e=await l.json();throw new Error(e.detail||e.message||"Gagal menyimpan aset tetap")}const c=await l.json(),d={success:!0,message:c.message||"Aset tetap berhasil dicatat",asset_id:c.asset_id||"",nama_aset:s.nama_aset,penyusutan_per_bulan:w};f(d),setTimeout(()=>{a(d)},1500)}catch(r){h(r.message||"Gagal menyimpan aset tetap. Coba lagi."),console.error("[AsetTetapForm] Submit error:",r)}finally{d(!1)}}else h("Lengkapi nama aset, harga perolehan, dan tanggal perolehan")},disabled:c||!k,className:"flex-1 py-3 rounded-lg font-medium transition-colors disabled:opacity-50",style:{backgroundColor:Ew,color:Tw},children:c?"Menyimpan...":i?"Simpan Perubahan":"Simpan Aset"})]})]})})}):null},Fw="#F97316",Lw="#262626",zw="#737373",Ww="#A3A3A3",Vw="#D4D4D4",Uw="#E5E5E5",Hw="#F5F5F5",Gw="#FFFFFF",Xw="#262626",Kw="#22C55E",Yw="#EAB308",qw="#EF4444",Zw=[{id:"semua",title:"Semua",icon:"/icons/INV-ALL.png"},{id:"melimpah",title:"Melimpah",icon:"/icons/INV-PLENTY.png"},{id:"menipis",title:"Menipis",icon:"/icons/INV-SHORTAGE.png"},{id:"habis",title:"Habis",icon:"/icons/INV-OUTOFSTOCK.png"},{id:"aset",title:"Aset",icon:"/icons/INV-ASET.png"},{id:"reorder",title:"Reorder List",icon:"/icons/INV-REORDERLIST.png"}],Jw=e=>{const t=e.split(" ");if(t.length<=2)return(0,Fe.jsx)("span",{className:"font-bold",style:{color:Lw},children:e});const n=t.slice(0,2).join(" "),r=t.slice(2).join(" ");return(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("span",{className:"font-bold",style:{color:Lw},children:n}),(0,Fe.jsxs)("span",{style:{color:zw},children:[" ",r]})]})},Qw=[{id:"1",nama:"Kursi Pelanggan",deskripsi:"Warna Merah",kategori:"Aset Tidak Bergerak",jumlah:8,satuan:"pcs"},{id:"2",nama:"Etalase Produk",deskripsi:"3x0,5x1 meter",kategori:"Aset Tidak Bergerak",jumlah:1,satuan:"unit"},{id:"3",nama:"Motor Bebek",deskripsi:"Vario 125 cc",kategori:"Aset Bergerak",jumlah:1,satuan:"unit"},{id:"4",nama:"Mobil",deskripsi:"Pick Up Daihatzu 2020",kategori:"Aset Bergerak",jumlah:1,satuan:"unit"},{id:"5",nama:"Lemari",deskripsi:"Produk 2x4x5 meter",kategori:"Aset Tidak Bergerak",jumlah:4,satuan:"unit"},{id:"6",nama:"Timbangan",deskripsi:"Tradisional",kategori:"Aset Tidak Bergerak",jumlah:2,satuan:"unit"}],$w=e=>{var n;let{isOpen:r,onClose:o,isMobile:a=!1,isEmbedded:i=!1}=e;const[s,l]=(0,t.useState)("categories"),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)([]),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!1),[x,y]=(0,t.useState)(null),[v,b]=(0,t.useState)(""),[w,k]=(0,t.useState)(0),[C,j]=(0,t.useState)(!1),[_,N]=(0,t.useState)(0),[S,E]=(0,t.useState)([]),[A,P]=(0,t.useState)(!1),[B,I]=(0,t.useState)(!1),[T,M]=(0,t.useState)(null),[D,R]=(0,t.useState)(!1),[O,F]=(0,t.useState)(null),[L,z]=(0,t.useState)("retur_penjualan"),[W,V]=(0,t.useState)(!1),[U,H]=(0,t.useState)(!1),[G,X]=(0,t.useState)(!1),[K,Y]=(0,t.useState)({semua:0,melimpah:0,menipis:0,habis:0,aset:0,reorder:0}),q=(0,t.useRef)(null),Z=(0,t.useRef)(null),J=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];g(!0),y(null);try{const t=e?0:_,n=new URLSearchParams({limit:50..toString(),offset:t.toString()});v&&n.set("search",v);const r=await Ub("/api/inventory/products?".concat(n));if(401===r.status)return void y("Sesi berakhir. Silakan login ulang.");if(!r.ok)throw new Error("Failed to fetch products");const o=await r.json();e?(h(o.products),N(50)):(h(e=>[...e,...o.products]),N(e=>e+50)),k(o.total),j(o.has_more)}catch(t){y("Gagal memuat produk. Coba lagi."),console.error("Fetch products error:",t)}finally{g(!1)}},[v,_]),Q=(0,t.useCallback)(async()=>{try{const e=await Ub("/api/inventory/categories");if(e.ok){const t=await e.json();E(t.categories||[])}}catch(e){console.error("Fetch categories error:",e)}},[]),$=(0,t.useCallback)(async()=>{try{const e=await Ub("/api/inventory/summary");if(e.ok){const t=await e.json();Y({semua:t.total_products||0,melimpah:t.melimpah_count||0,menipis:t.menipis_count||0,habis:t.habis_count||0,aset:t.aset_count||0,reorder:t.reorder_count||0})}}catch(e){console.error("Fetch inventory summary error:",e)}},[]);(0,t.useEffect)(()=>{r&&(J(!0),Q(),$())},[r]),(0,t.useEffect)(()=>{v&&g(!0);const e=v.length>=3?0:100,t=setTimeout(()=>{r&&J(!0)},e);return()=>clearTimeout(t)},[v]);const ee=()=>{f(null)};if(!r)return null;const te=i?"h-full flex flex-col":"fixed inset-0 z-50 flex flex-col";if(p)return(0,Fe.jsx)("div",{className:te,style:{backgroundColor:Gw},children:(0,Fe.jsx)(Vb,{product:p,onClose:ee,onEditStock:()=>(M(p),void I(!0)),onRetur:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"retur_penjualan";F(e),z(t),R(!0)}(p,e)})});const ne=Qw.filter(e=>e.nama.toLowerCase().includes(v.toLowerCase())||e.deskripsi.toLowerCase().includes(v.toLowerCase()));return(0,Fe.jsxs)("div",{className:te,style:{backgroundColor:Uw},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 flex-shrink-0",style:{height:"56px",paddingTop:"max(8px, env(safe-area-inset-top))"},children:[(0,Fe.jsxs)("button",{onClick:"product-list"===s?()=>{l("categories"),d(null)}:o,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Vw},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:zw},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsx)("span",{className:"font-semibold text-lg",style:{color:"#525252"},children:"product-list"===s&&c&&(null===(n=Zw.find(e=>e.id===c))||void 0===n?void 0:n.title)||"Inventory dan Aset"})]}),(0,Fe.jsx)("div",{className:"px-4 pb-3",style:{backgroundColor:Uw},children:(0,Fe.jsxs)("div",{className:"flex items-center px-4",style:{backgroundColor:Gw,borderRadius:"12px",height:"48px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,Fe.jsx)("input",{ref:q,type:"text",placeholder:"Ketik barcode, nama produk atau aset",value:v,onChange:e=>b(e.target.value),onFocus:()=>{"categories"===s&&(d("semua"),l("product-list"))},className:"flex-1 bg-transparent text-sm outline-none",style:{color:Xw}}),(0,Fe.jsx)("button",{onClick:()=>H(!U),className:"ml-2 flex-shrink-0",children:(0,Fe.jsx)("img",{src:"/icons/CAM.png",alt:"Camera",style:{width:"24px",height:"24px",opacity:U?1:.6}})})]})}),(0,Fe.jsx)(ct,{mode:"popLayout",initial:!1,children:"categories"===s?(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,ease:[.4,0,.2,1]},style:{flex:1,display:"flex",flexDirection:"column",position:"relative",backgroundColor:Uw},children:[(0,Fe.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",padding:"12px 16px",flex:1,alignContent:"start"},children:Zw.map(e=>(0,Fe.jsxs)("div",{onClick:()=>{return t=e.id,d(t),void l("product-list");var t},style:{backgroundColor:Gw,borderRadius:"16px",padding:"16px",cursor:"pointer",boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},className:"active:scale-[0.98] transition-transform",children:[(0,Fe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,Fe.jsx)("span",{style:{fontSize:"18px",fontWeight:500,color:Lw},children:e.title}),(0,Fe.jsx)("svg",{style:{width:"20px",height:"20px",color:Ww},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),(0,Fe.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Fe.jsx)("img",{src:e.icon,alt:"",style:{width:"40px",height:"40px"},onError:e=>{e.currentTarget.style.display="none"}}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("span",{style:{fontSize:"20px",fontWeight:600,color:Lw},children:K[e.id].toLocaleString("id-ID")}),(0,Fe.jsx)("span",{style:{fontSize:"16px",color:zw,marginLeft:"4px"},children:"item"})]})]})]},e.id))}),(0,Fe.jsxs)("div",{style:{position:"absolute",bottom:"24px",right:"24px",display:"flex",flexDirection:"row",gap:"12px",zIndex:10},children:[(0,Fe.jsx)(hc.button,{initial:{scale:0},animate:{scale:1},whileTap:{scale:.9},onClick:()=>console.log("Sort clicked - TODO"),style:{width:"56px",height:"56px",borderRadius:"50%",backgroundColor:Gw,boxShadow:"0 2px 8px rgba(0,0,0,0.15)",display:"flex",alignItems:"center",justifyContent:"center",border:"none",cursor:"pointer"},children:(0,Fe.jsx)("svg",{style:{width:"24px",height:"24px",color:zw},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})})}),(0,Fe.jsx)(hc.button,{initial:{scale:0},animate:{scale:1},whileTap:{scale:.9},onClick:()=>P(!0),style:{width:"56px",height:"56px",borderRadius:"50%",backgroundColor:Ww,boxShadow:"0 2px 8px rgba(0,0,0,0.15)",display:"flex",alignItems:"center",justifyContent:"center",border:"none",cursor:"pointer"},children:(0,Fe.jsx)("svg",{style:{width:"28px",height:"28px",color:Gw},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]},"categories-page"):(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:[.4,0,.2,1]},className:"flex-1 flex flex-col min-h-0 relative",style:{backgroundColor:Uw},children:[(0,Fe.jsx)("div",{ref:Z,onScroll:()=>{if(!Z.current||m||!C)return;const{scrollTop:e,scrollHeight:t,clientHeight:n}=Z.current;t-e<=n+100&&J(!1)},className:"flex-1 min-h-0 overflow-y-auto px-4 pb-24 pt-2",style:{backgroundColor:Uw},children:"aset"===c?(0,Fe.jsxs)(Fe.Fragment,{children:[0===ne.length&&(0,Fe.jsxs)("div",{className:"mt-8 text-center",style:{color:zw},children:[(0,Fe.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4",style:{color:Uw},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Fe.jsx)("p",{className:"text-lg font-medium",children:"Belum ada aset"}),(0,Fe.jsx)("p",{className:"mt-1",children:"Tambahkan aset pertama Anda"})]}),(0,Fe.jsx)("div",{className:"space-y-2",children:ne.map(e=>(0,Fe.jsxs)("div",{onClick:()=>V(!0),className:"rounded-xl overflow-hidden cursor-pointer active:scale-[0.98] transition-transform",style:{backgroundColor:Gw,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between px-3 py-2",children:[(0,Fe.jsxs)("div",{className:"min-w-0 text-left",children:[(0,Fe.jsx)("span",{className:"font-bold",style:{color:Lw},children:e.nama}),(0,Fe.jsxs)("span",{style:{color:zw},children:[" ",e.deskripsi]})]}),(0,Fe.jsx)("svg",{className:"w-5 h-5 flex-shrink-0 ml-2",style:{color:Ww},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),(0,Fe.jsxs)("div",{className:"flex items-end justify-between px-3 py-2",style:{backgroundColor:Hw},children:[(0,Fe.jsx)("span",{className:"text-sm",style:{color:zw},children:(0,Fe.jsx)("span",{className:"font-semibold",style:{color:Lw},children:e.kategori})}),(0,Fe.jsx)("div",{className:"text-right",children:(0,Fe.jsxs)("div",{className:"flex items-baseline gap-1 justify-end",children:[(0,Fe.jsx)("span",{className:"font-bold text-lg",style:{color:Lw},children:e.jumlah}),(0,Fe.jsx)("span",{className:"text-sm",style:{color:zw},children:e.satuan})]})})]})]},e.id))})]}):(0,Fe.jsxs)(Fe.Fragment,{children:[x&&(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-3 p-4 rounded-xl text-sm",style:{backgroundColor:"#FEF2F2",border:"1px solid ".concat(qw),color:qw},children:[x,(0,Fe.jsx)("button",{onClick:()=>J(!0),className:"ml-2 underline",children:"Coba lagi"})]}),0===u.length&&!m&&!x&&(0,Fe.jsxs)("div",{className:"mt-8 text-center",style:{color:zw},children:[(0,Fe.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4",style:{color:Uw},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),(0,Fe.jsx)("p",{className:"text-lg font-medium",children:"Belum ada produk"}),(0,Fe.jsx)("p",{className:"mt-1",children:"Tambahkan produk pertama Anda"})]}),m&&0===u.length&&(0,Fe.jsx)("div",{className:"mt-8 text-center",style:{color:zw},children:"Memuat..."}),(0,Fe.jsx)("div",{className:"space-y-2",children:u.map(e=>{return(0,Fe.jsxs)("div",{onClick:()=>(e=>{f(e)})(e),className:"rounded-xl overflow-hidden cursor-pointer active:scale-[0.98] transition-transform",style:{backgroundColor:Gw,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between px-3 py-2",children:[(0,Fe.jsx)("div",{className:"min-w-0 text-left",children:Jw(e.nama_produk)}),(0,Fe.jsx)("svg",{className:"w-5 h-5 flex-shrink-0 ml-2",style:{color:Ww},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),(0,Fe.jsxs)("div",{className:"flex items-end justify-between px-3 py-2",style:{backgroundColor:Hw},children:[(0,Fe.jsx)("span",{className:"text-sm",style:{color:zw},children:e.kategori?(0,Fe.jsxs)(Fe.Fragment,{children:["Kategori ",(0,Fe.jsx)("span",{className:"font-semibold",style:{color:Lw},children:e.kategori})]}):e.barcode?(0,Fe.jsxs)(Fe.Fragment,{children:["Barcode ",(0,Fe.jsx)("span",{className:"font-semibold",style:{color:Lw},children:e.barcode})]}):null}),(0,Fe.jsxs)("div",{className:"text-right",children:[(0,Fe.jsxs)("div",{className:"flex items-baseline gap-1 justify-end",children:[(0,Fe.jsx)("span",{className:"font-bold text-lg",style:{color:Lw},children:e.stok}),(0,Fe.jsx)("span",{className:"text-sm",style:{color:zw},children:e.satuan})]}),(0,Fe.jsx)("div",{className:"h-0.5 mt-1 rounded-full",style:{backgroundColor:(t=e.stok,t<12?qw:t<24?Yw:Kw),width:"100%",minWidth:"50px"}})]})]})]},e.id);var t})}),m&&u.length>0&&(0,Fe.jsx)("div",{className:"py-4 text-center",style:{color:zw},children:"Memuat lebih banyak..."}),!C&&u.length>0&&(0,Fe.jsx)("div",{className:"py-4 text-center text-sm",style:{color:zw},children:"Semua produk ditampilkan"})]})}),(0,Fe.jsxs)("div",{className:"absolute bottom-6 right-6 flex flex-col gap-3 z-10",children:[(0,Fe.jsx)(hc.button,{initial:{scale:0},animate:{scale:1},whileTap:{scale:.9},onClick:()=>X(!0),className:"w-14 h-14 rounded-full flex items-center justify-center shadow-lg",style:{backgroundColor:Vw},children:(0,Fe.jsx)("svg",{className:"w-7 h-7",style:{color:Lw},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),(0,Fe.jsx)(hc.button,{initial:{scale:0},animate:{scale:1},whileTap:{scale:.9},onClick:()=>P(!0),className:"w-14 h-14 rounded-full flex items-center justify-center shadow-lg",style:{backgroundColor:Fw},children:(0,Fe.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]},"product-list-page")}),(0,Fe.jsx)($b,{isOpen:A,onClose:()=>P(!1),onSuccess:()=>{P(!1),J(!0)},categories:S.map(e=>({id:e,label:e}))}),T&&(0,Fe.jsx)(lw,{isOpen:B,onClose:()=>{I(!1),M(null)},product:T,onSuccess:()=>{if(I(!1),M(null),J(!0),p){const e=u.find(e=>e.id===p.id);e&&f(e)}}}),O&&(0,Fe.jsx)(ww,{isOpen:D,onClose:()=>{R(!1),F(null)},product:O,defaultType:L,onSuccess:()=>{if(R(!1),F(null),J(!0),p){const e=u.find(e=>e.id===p.id);e&&f(e)}}}),(0,Fe.jsx)(Ow,{isOpen:W,onClose:()=>V(!1),onSuccess:()=>{V(!1)}}),(0,Fe.jsx)(ct,{children:G&&(0,Fe.jsxs)("div",{className:"fixed inset-0 z-50 flex items-end justify-center",onClick:()=>X(!1),children:[(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30"}),(0,Fe.jsxs)(hc.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-md rounded-t-2xl p-6",style:{backgroundColor:Gw},onClick:e=>e.stopPropagation(),children:[(0,Fe.jsx)("div",{className:"w-12 h-1 rounded-full mx-auto mb-4",style:{backgroundColor:Vw}}),(0,Fe.jsx)("h3",{className:"text-lg font-bold mb-4",style:{color:Lw},children:"Filter & Sortir"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsx)("div",{className:"text-sm font-medium mb-2",style:{color:zw},children:"Level Stok"}),(0,Fe.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,Fe.jsx)("button",{className:"px-3 py-2 rounded-lg text-sm",style:{backgroundColor:Hw},children:"\ud83d\udd34 Kritis (<12)"}),(0,Fe.jsx)("button",{className:"px-3 py-2 rounded-lg text-sm",style:{backgroundColor:Hw},children:"\ud83d\udfe1 Rendah (12-23)"}),(0,Fe.jsx)("button",{className:"px-3 py-2 rounded-lg text-sm",style:{backgroundColor:Hw},children:"\ud83d\udfe2 Aman (\u226524)"})]})]}),(0,Fe.jsxs)("div",{className:"mb-6",children:[(0,Fe.jsx)("div",{className:"text-sm font-medium mb-2",style:{color:zw},children:"Urutkan"}),(0,Fe.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Fe.jsx)("button",{className:"px-3 py-2 rounded-lg text-sm",style:{backgroundColor:Hw},children:"A-Z"}),(0,Fe.jsx)("button",{className:"px-3 py-2 rounded-lg text-sm",style:{backgroundColor:Hw},children:"Stok \u2191"}),(0,Fe.jsx)("button",{className:"px-3 py-2 rounded-lg text-sm",style:{backgroundColor:Hw},children:"Stok \u2193"})]})]}),(0,Fe.jsx)("button",{onClick:()=>X(!1),className:"w-full py-3 rounded-xl text-white font-semibold",style:{backgroundColor:Fw},children:"Terapkan Filter"})]})]})})]})},ek=e=>new Intl.NumberFormat("id-ID").format(e),tk=e=>{switch(e){case"kas":return"Kas";case"bank":return"Bank";case"ewallet":return"E-Wallet";default:return e}},nk=e=>{switch(e){case"kas":return"\ud83d\udcb5";case"bank":return"\ud83c\udfe6";case"ewallet":return"\ud83d\udcf1";default:return"\ud83d\udcb0"}},rk=[{id:"modal_awal",label:"Modal Awal",description:"Modal pertama kali saat memulai usaha",direction:"masuk"},{id:"setor_modal",label:"Setor Modal",description:"Tambahan modal dari pemilik",direction:"masuk"},{id:"prive",label:"Prive",description:"Pengambilan oleh pemilik untuk keperluan pribadi",direction:"keluar"}],ok={tipe:"setor_modal",nominal:0,tanggal:(new Date).toISOString().split("T")[0]},ak=e=>new Intl.NumberFormat("id-ID").format(e),ik=e=>rk.find(t=>t.id===e),sk="#F97316",lk="#737373",ck="#D4D4D4",dk="#E5E5E5",uk="#F5F5F5",hk="#FFFFFF",pk="#262626",fk="#22C55E",mk="#EF4444",gk=e=>{let{isOpen:n,onClose:r,onSuccess:o,accounts:a=[]}=e;const[i,s]=(0,t.useState)(ok),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),g=(0,t.useRef)(null);(0,t.useEffect)(()=>{var e;n&&(s(qe(qe({},ok),{},{tanggal:(new Date).toISOString().split("T")[0],akun_id:(null===(e=a[0])||void 0===e?void 0:e.id)||""})),u(null),p(null),setTimeout(()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()},100))},[n,a]);const x=(e,t)=>{s(n=>qe(qe({},n),{},{[e]:t})),u(null)},y=ik(i.tipe),v=i.nominal>0,b=()=>{m(!0),setTimeout(()=>m(!1),500)};if(!n)return null;if(h){const e=ik(h.tipe);return(0,Fe.jsxs)("div",{className:"h-full flex flex-col",style:{backgroundColor:uk},children:[(0,Fe.jsx)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:hk,borderColor:dk},children:(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:pk},children:null===e||void 0===e?void 0:e.label})}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-center p-6",children:(0,Fe.jsxs)(hc.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},className:"text-center",children:[(0,Fe.jsx)(hc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:300},className:"w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"#DCFCE7"},children:(0,Fe.jsx)(hc.svg,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.3,duration:.5},className:"w-10 h-10",style:{color:fk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsxs)(hc.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-xl font-semibold mb-2",style:{color:pk},children:[null===e||void 0===e?void 0:e.label," Berhasil Dicatat"]}),(0,Fe.jsxs)(hc.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-3xl font-bold mb-3",style:{color:sk},children:["Rp ",ak(h.nominal)]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"masuk"===(null===e||void 0===e?void 0:e.direction)?"#DCFCE7":"#FEE2E2",color:"masuk"===(null===e||void 0===e?void 0:e.direction)?fk:mk},children:["masuk"===(null===e||void 0===e?void 0:e.direction)?(0,Fe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}):(0,Fe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),(0,Fe.jsxs)("span",{className:"text-sm font-medium",children:["masuk"===(null===e||void 0===e?void 0:e.direction)?"Menambah":"Mengurangi"," Ekuitas"]})]})]})})]})}return(0,Fe.jsxs)("div",{className:"h-full flex flex-col",style:{backgroundColor:uk},children:[(0,Fe.jsx)("div",{className:"flex items-center justify-between px-4 border-b",style:{height:"60px",backgroundColor:hk,borderColor:dk},children:(0,Fe.jsxs)("div",{className:"flex items-center",children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:ck},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:pk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsxs)("div",{className:"ml-2",children:[(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:pk},children:"Modal & Prive"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:lk},children:"Ekuitas Pemilik"})]})]})}),(0,Fe.jsxs)(hc.div,{className:"flex-1 overflow-y-auto p-4",animate:f?{x:[-10,10,-10,10,0]}:{},transition:{duration:.4},children:[(0,Fe.jsx)(ct,{children:d&&(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 rounded-xl flex items-center gap-3",style:{backgroundColor:"#FEF2F2",border:"1px solid ".concat(mk)},children:[(0,Fe.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",style:{color:mk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Fe.jsx)("span",{className:"text-sm",style:{color:mk},children:d})]})}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"rounded-xl overflow-hidden mb-4",style:{backgroundColor:hk,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{borderColor:dk},children:(0,Fe.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:sk},children:"Jenis Transaksi"})}),(0,Fe.jsx)("div",{className:"p-3 space-y-2",children:rk.map((e,t)=>(0,Fe.jsx)(hc.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1+.05*t},type:"button",onClick:()=>x("tipe",e.id),className:"w-full px-4 py-3 rounded-xl text-left transition-all active:scale-[0.98]",style:{backgroundColor:i.tipe===e.id?"masuk"===e.direction?fk:mk:uk,color:i.tipe===e.id?hk:pk},children:(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",children:e.label}),(0,Fe.jsx)("div",{className:"text-sm",style:{opacity:i.tipe===e.id?.9:1,color:i.tipe===e.id?hk:lk},children:e.description})]}),(0,Fe.jsx)("div",{className:"text-sm font-medium px-2 py-1 rounded-lg",style:{backgroundColor:i.tipe===e.id?"rgba(255,255,255,0.2)":"masuk"===e.direction?"#DCFCE7":"#FEE2E2",color:i.tipe===e.id?hk:"masuk"===e.direction?fk:mk},children:"masuk"===e.direction?"+ Masuk":"- Keluar"})]})},e.id))})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"rounded-xl overflow-hidden mb-4",style:{backgroundColor:hk,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{borderColor:dk},children:(0,Fe.jsxs)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:sk},children:["Nominal ",(0,Fe.jsx)("span",{style:{color:mk},children:"*"})]})}),(0,Fe.jsx)("div",{className:"p-4",children:(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-lg font-medium",style:{color:lk},children:"Rp"}),(0,Fe.jsx)("input",{ref:g,type:"text",inputMode:"numeric",value:i.nominal>0?ak(i.nominal):"",onChange:e=>(e=>{const t=parseInt(e.replace(/\D/g,""),10)||0;x("nominal",t)})(e.target.value),placeholder:"0",className:"w-full pl-12 pr-4 py-4 text-2xl font-bold text-right rounded-xl border-2 transition-colors",style:{borderColor:i.nominal>0?sk:dk,color:pk,backgroundColor:uk}})]})})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"rounded-xl overflow-hidden mb-4",style:{backgroundColor:hk,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{borderColor:dk},children:(0,Fe.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:sk},children:"Detail Transaksi"})}),(0,Fe.jsxs)("div",{className:"p-4 space-y-4",children:[a.length>0&&(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:pk},children:"masuk"===(null===y||void 0===y?void 0:y.direction)?"Masuk ke Akun":"Ambil dari Akun"}),(0,Fe.jsxs)("select",{value:i.akun_id||"",onChange:e=>x("akun_id",e.target.value),className:"w-full px-4 py-3 rounded-xl border transition-colors",style:{borderColor:dk,backgroundColor:uk,color:pk},children:[(0,Fe.jsx)("option",{value:"",children:"-- Pilih Akun --"}),a.map(e=>(0,Fe.jsx)("option",{value:e.id,children:e.nama_akun},e.id))]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:pk},children:"Tanggal"}),(0,Fe.jsx)("input",{type:"date",value:i.tanggal,onChange:e=>x("tanggal",e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-4 py-3 rounded-xl border transition-colors",style:{borderColor:dk,backgroundColor:uk,color:pk}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:pk},children:"Nama Pemilik"}),(0,Fe.jsx)("input",{type:"text",value:i.nama_pemilik||"",onChange:e=>x("nama_pemilik",e.target.value),placeholder:"Opsional",className:"w-full px-4 py-3 rounded-xl border transition-colors",style:{borderColor:dk,backgroundColor:uk,color:pk}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:pk},children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:i.keterangan||"",onChange:e=>x("keterangan",e.target.value),placeholder:"Contoh: ".concat(null===y||void 0===y?void 0:y.label," bulan Desember"),rows:2,className:"w-full px-4 py-3 rounded-xl border transition-colors resize-none",style:{borderColor:dk,backgroundColor:uk,color:pk}})]})]})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-4 rounded-xl flex items-start gap-3",style:{backgroundColor:"masuk"===(null===y||void 0===y?void 0:y.direction)?"#DCFCE7":"#FEE2E2"},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"masuk"===(null===y||void 0===y?void 0:y.direction)?fk:mk},children:"masuk"===(null===y||void 0===y?void 0:y.direction)?(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:hk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}):(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:hk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:"masuk"===(null===y||void 0===y?void 0:y.direction)?fk:mk},children:"masuk"===(null===y||void 0===y?void 0:y.direction)?"Menambah Modal Pemilik":"Mengurangi Modal Pemilik"}),(0,Fe.jsxs)("div",{className:"text-sm mt-1",style:{color:"masuk"===(null===y||void 0===y?void 0:y.direction)?"#166534":"#991B1B"},children:["modal_awal"===i.tipe&&"Dicatat sebagai modal awal usaha di neraca","setor_modal"===i.tipe&&"Dicatat sebagai penambahan ekuitas","prive"===i.tipe&&"Dicatat sebagai pengurangan ekuitas (bukan beban)"]})]})]})]}),(0,Fe.jsx)("div",{className:"px-4 py-4 border-t",style:{backgroundColor:hk,borderColor:dk},children:(0,Fe.jsxs)("div",{className:"flex gap-3",children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3.5 rounded-xl font-medium transition-all active:scale-[0.98]",style:{backgroundColor:uk,color:pk},children:"Batal"}),(0,Fe.jsx)("button",{onClick:async()=>{if(!v)return u("Masukkan nominal"),void b();c(!0),u(null);try{var e,t;const n=localStorage.getItem("access_token"),r=localStorage.getItem("tenant_id")||"evlogia",a={transaction_type:i.tipe,isModal:"modal_awal"===i.tipe||"setor_modal"===i.tipe,isPrive:"prive"===i.tipe,nominal:i.nominal,total_amount:i.nominal,akun_id:i.akun_id||null,nama_pemilik:(null===(e=i.nama_pemilik)||void 0===e?void 0:e.trim())||null,keterangan:(null===(t=i.keterangan)||void 0===t?void 0:t.trim())||(null===y||void 0===y?void 0:y.label),tanggal:i.tanggal,payment_method:"tunai"},s=await fetch("/api/tenant/".concat(r,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] ".concat(null===y||void 0===y?void 0:y.label),session_id:"modal-prive-".concat(Date.now()),conversation_context:JSON.stringify({form_data:a})})});if(401===s.status)return void u("Sesi berakhir. Silakan login ulang.");if(!s.ok){const e=await s.json();throw new Error(e.detail||e.message||"Gagal menyimpan transaksi")}const l=await s.json(),c={success:!0,message:l.message||"".concat(null===y||void 0===y?void 0:y.label," berhasil dicatat"),transaction_id:l.transaction_id||"",tipe:i.tipe,nominal:i.nominal};p(c),setTimeout(()=>{o(c)},2e3)}catch(n){u(n.message||"Gagal menyimpan. Coba lagi."),b(),console.error("[ModalPriveForm] Submit error:",n)}finally{c(!1)}},disabled:l||!v,className:"flex-1 py-3.5 rounded-xl font-medium transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",style:{backgroundColor:"masuk"===(null===y||void 0===y?void 0:y.direction)?fk:mk,color:hk},children:l?(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Menyimpan..."]}):(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Simpan ",null===y||void 0===y?void 0:y.label]})})]})})]})},xk=[{id:"sewa",label:"Sewa",description:"Sewa ruko, gudang, atau tempat usaha",icon:"\ud83c\udfe0"},{id:"asuransi",label:"Asuransi",description:"Premi asuransi untuk usaha atau aset",icon:"\ud83d\udee1\ufe0f"},{id:"langganan",label:"Langganan",description:"Software, layanan, atau subscription",icon:"\ud83d\udcf1"},{id:"lainnya",label:"Lainnya",description:"Beban dibayar dimuka lainnya",icon:"\ud83d\udccb"}],yk={nama_beban:"",kategori:"sewa",nominal_total:0,tanggal_bayar:(new Date).toISOString().split("T")[0],periode_mulai:(new Date).toISOString().split("T")[0],periode_selesai:"",jumlah_bulan:0,amortisasi_per_bulan:0},vk=e=>new Intl.NumberFormat("id-ID").format(e),bk=e=>{let{isOpen:n,onClose:r,onSuccess:o,accounts:a=[]}=e;const[i,s]=(0,t.useState)(yk),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),f=(0,t.useRef)(null),m=(0,t.useMemo)(()=>{const e=((e,t)=>{if(!e||!t)return 0;const n=new Date(e),r=new Date(t);if(r<=n)return 0;const o=12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())+1;return Math.max(1,o)})(i.periode_mulai,i.periode_selesai),t=((e,t)=>!e||t<=0?0:Math.round(e/t))(i.nominal_total,e);return{months:e,amortisasi:t}},[i.periode_mulai,i.periode_selesai,i.nominal_total]);(0,t.useEffect)(()=>{s(e=>qe(qe({},e),{},{jumlah_bulan:m.months,amortisasi_per_bulan:m.amortisasi}))},[m]),(0,t.useEffect)(()=>{var e;n&&(s(qe(qe({},yk),{},{tanggal_bayar:(new Date).toISOString().split("T")[0],periode_mulai:(new Date).toISOString().split("T")[0],akun_id:(null===(e=a[0])||void 0===e?void 0:e.id)||""})),u(null),p(null),setTimeout(()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.focus()},100))},[n,a]);const g=(e,t)=>{s(n=>qe(qe({},n),{},{[e]:t})),u(null)},x=(y=i.kategori,xk.find(e=>e.id===y));var y;const v=i.nama_beban.trim()&&i.nominal_total>0&&i.periode_mulai&&i.periode_selesai&&m.months>0;return n?h?(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,Fe.jsxs)("div",{className:"bg-white w-full max-w-sm mx-4 rounded-xl shadow-xl p-6 text-center",children:[(0,Fe.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center",children:(0,Fe.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Berhasil Dicatat"}),(0,Fe.jsxs)("p",{className:"text-2xl font-bold text-amber-600 mb-2",children:["Rp ",vk(h.nominal_total)]}),(0,Fe.jsx)("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg text-left",children:(0,Fe.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,Fe.jsxs)("div",{className:"flex justify-between",children:[(0,Fe.jsx)("span",{children:"Periode:"}),(0,Fe.jsxs)("span",{className:"font-medium",children:[h.jumlah_bulan," bulan"]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,Fe.jsx)("span",{children:"Amortisasi/bulan:"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",vk(h.amortisasi_per_bulan)]})]})]})}),(0,Fe.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:["Akan otomatis dibebankan Rp ",vk(h.amortisasi_per_bulan),"/bulan"]})]})}):(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,Fe.jsxs)("div",{className:"bg-white w-full max-w-md mx-4 rounded-xl shadow-xl max-h-[90vh] flex flex-col",children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Beban Dibayar di Muka"}),(0,Fe.jsx)("p",{className:"text-sm text-gray-500",children:"Prepaid Expenses (1105)"})]}),(0,Fe.jsx)("button",{onClick:r,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Fe.jsxs)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:[d&&(0,Fe.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:d}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nama Beban ",(0,Fe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Fe.jsx)("input",{ref:f,type:"text",value:i.nama_beban,onChange:e=>g("nama_beban",e.target.value),placeholder:"Contoh: Sewa Ruko 6 Bulan",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori"}),(0,Fe.jsx)("div",{className:"grid grid-cols-2 gap-2",children:xk.map(e=>(0,Fe.jsx)("button",{type:"button",onClick:()=>g("kategori",e.id),className:"px-3 py-2.5 rounded-lg text-left transition-colors ".concat(i.kategori===e.id?"bg-amber-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fe.jsx)("span",{className:"text-lg",children:e.icon}),(0,Fe.jsx)("span",{className:"font-medium text-sm",children:e.label})]})},e.id))})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Nominal ",(0,Fe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:i.nominal_total>0?vk(i.nominal_total):"",onChange:e=>(e=>{const t=parseInt(e.replace(/\D/g,""),10)||0;g("nominal_total",t)})(e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-3 text-lg font-semibold text-right border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]})]}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Bayar"}),(0,Fe.jsx)("input",{type:"date",value:i.tanggal_bayar,onChange:e=>g("tanggal_bayar",e.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Periode Mulai ",(0,Fe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Fe.jsx)("input",{type:"date",value:i.periode_mulai,onChange:e=>g("periode_mulai",e.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Periode Selesai ",(0,Fe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Fe.jsx)("input",{type:"date",value:i.periode_selesai,onChange:e=>g("periode_selesai",e.target.value),min:i.periode_mulai,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),m.months>0&&i.nominal_total>0&&(0,Fe.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Fe.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,Fe.jsx)("span",{className:"font-medium text-blue-700",children:"Perhitungan Amortisasi"})]}),(0,Fe.jsxs)("div",{className:"space-y-1 text-sm text-blue-700",children:[(0,Fe.jsxs)("div",{className:"flex justify-between",children:[(0,Fe.jsx)("span",{children:"Jumlah Periode:"}),(0,Fe.jsxs)("span",{className:"font-semibold",children:[m.months," bulan"]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between",children:[(0,Fe.jsx)("span",{children:"Amortisasi per Bulan:"}),(0,Fe.jsxs)("span",{className:"font-semibold",children:["Rp ",vk(m.amortisasi)]})]})]}),(0,Fe.jsxs)("div",{className:"mt-2 pt-2 border-t border-blue-200 text-xs text-blue-600",children:["Rp ",vk(i.nominal_total)," \xf7 ",m.months," bulan = Rp ",vk(m.amortisasi),"/bulan"]})]}),a.length>0&&(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bayar dari Akun"}),(0,Fe.jsxs)("select",{value:i.akun_id||"",onChange:e=>g("akun_id",e.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500",children:[(0,Fe.jsx)("option",{value:"",children:"-- Pilih Akun --"}),a.map(e=>(0,Fe.jsx)("option",{value:e.id,children:e.nama_akun},e.id))]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:i.keterangan||"",onChange:e=>g("keterangan",e.target.value),placeholder:"Opsional - detail tambahan",rows:2,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),(0,Fe.jsxs)("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,Fe.jsx)("div",{className:"text-sm font-medium text-amber-700",children:"Catatan SAK EMKM"}),(0,Fe.jsx)("div",{className:"text-xs text-amber-600 mt-1",children:"Beban Dibayar di Muka dicatat sebagai Aset Lancar (1105) saat pembayaran. Setiap bulan akan otomatis dibebankan sebagai Beban sesuai amortisasi."})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 border-t border-gray-200 flex gap-3",children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Batal"}),(0,Fe.jsx)("button",{onClick:async()=>{if(v){c(!0),u(null);try{var e;const t=localStorage.getItem("access_token"),n=localStorage.getItem("tenant_id")||"evlogia",r={transaction_type:"beban_dibayar_dimuka",jenisAset:"beban_dibayar_dimuka",nama_beban:i.nama_beban.trim(),kategori:i.kategori,nominal:i.nominal_total,total_amount:i.nominal_total,tanggal:i.tanggal_bayar,periode_mulai:i.periode_mulai,periode_selesai:i.periode_selesai,jumlah_bulan:m.months,amortisasi_per_bulan:m.amortisasi,akun_id:i.akun_id||null,keterangan:(null===(e=i.keterangan)||void 0===e?void 0:e.trim())||"".concat(null===x||void 0===x?void 0:x.label,": ").concat(i.nama_beban),payment_method:"tunai"},a=await fetch("/api/tenant/".concat(n,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Beban Dibayar di Muka",session_id:"prepaid-".concat(Date.now()),conversation_context:JSON.stringify({form_data:r})})});if(401===a.status)return void u("Sesi berakhir. Silakan login ulang.");if(!a.ok){const e=await a.json();throw new Error(e.detail||e.message||"Gagal menyimpan transaksi")}const s=await a.json(),l={success:!0,message:s.message||"Beban Dibayar di Muka berhasil dicatat",transaction_id:s.transaction_id||"",nominal_total:i.nominal_total,jumlah_bulan:m.months,amortisasi_per_bulan:m.amortisasi};p(l),setTimeout(()=>{o(l)},2e3)}catch(t){u(t.message||"Gagal menyimpan. Coba lagi."),console.error("[BebanDibayarDiMukaForm] Submit error:",t)}finally{c(!1)}}else i.nama_beban.trim()?i.nominal_total<=0?u("Masukkan nominal"):m.months<=0&&u("Periode tidak valid - tanggal selesai harus setelah tanggal mulai"):u("Masukkan nama beban")},disabled:l||!v,className:"flex-1 py-3 bg-amber-500 text-white rounded-lg font-medium hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Menyimpan...":"Simpan"})]})]})}):null},wk=[{id:"komisi",label:"Komisi",description:"Fee/komisi dari referral, affiliate, dll"},{id:"bonus",label:"Bonus",description:"Bonus pencapaian target, insentif"},{id:"jasa_lainnya",label:"Jasa Lainnya",description:"Pendapatan jasa di luar aktivitas utama"},{id:"lainnya",label:"Lainnya",description:"Pendapatan lain yang tidak termasuk kategori di atas"}],kk={tipe:"pendapatan_lain",kategori:"komisi",nominal:0,tanggal:(new Date).toISOString().split("T")[0]},Ck={tipe:"pendapatan_bunga",nominal:0,sumber_bank:"",tanggal:(new Date).toISOString().split("T")[0]},jk=["BCA","Mandiri","BRI","BNI","CIMB Niaga","Permata","Danamon","OCBC NISP","Panin","Lainnya"],_k=e=>new Intl.NumberFormat("id-ID").format(e),Nk="#F97316",Sk="#737373",Ek="#D4D4D4",Ak="#E5E5E5",Pk="#F5F5F5",Bk="#FFFFFF",Ik="#262626",Tk="#22C55E",Mk="#EF4444",Dk=e=>{let{isOpen:n,onClose:r,onSuccess:o,accounts:a=[]}=e;const[i,s]=(0,t.useState)(kk),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),g=(0,t.useRef)(null);(0,t.useEffect)(()=>{var e;n&&(s(qe(qe({},kk),{},{tanggal:(new Date).toISOString().split("T")[0],akun_id:(null===(e=a[0])||void 0===e?void 0:e.id)||""})),u(null),p(null),setTimeout(()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()},100))},[n,a]);const x=(e,t)=>{s(n=>qe(qe({},n),{},{[e]:t})),u(null)},y=(v=i.kategori,wk.find(e=>e.id===v));var v;const b=i.nominal>0,w=()=>{m(!0),setTimeout(()=>m(!1),500)};return n?h?(0,Fe.jsxs)("div",{className:"h-full flex flex-col",style:{backgroundColor:Pk},children:[(0,Fe.jsx)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:Bk,borderColor:Ak},children:(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:Ik},children:"Pendapatan Lain-lain"})}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-center p-6",children:(0,Fe.jsxs)(hc.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},className:"text-center",children:[(0,Fe.jsx)(hc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:300},className:"w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"#DCFCE7"},children:(0,Fe.jsx)(hc.svg,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.3,duration:.5},className:"w-10 h-10",style:{color:Tk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)(hc.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-xl font-semibold mb-2",style:{color:Ik},children:"Pendapatan Berhasil Dicatat"}),(0,Fe.jsxs)(hc.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-3xl font-bold mb-3",style:{color:Tk},children:["+ Rp ",_k(h.nominal)]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"#DCFCE7",color:Tk},children:[(0,Fe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Fe.jsx)("span",{className:"text-sm font-medium",children:"Menambah Kas"})]})]})})]}):(0,Fe.jsxs)("div",{className:"h-full flex flex-col",style:{backgroundColor:Pk},children:[(0,Fe.jsx)("div",{className:"flex items-center justify-between px-4 border-b",style:{height:"60px",backgroundColor:Bk,borderColor:Ak},children:(0,Fe.jsxs)("div",{className:"flex items-center",children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Ek},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:Ik},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsxs)("div",{className:"ml-2",children:[(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:Ik},children:"Pendapatan Lain-lain"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:Sk},children:"SAK EMKM 4201"})]})]})}),(0,Fe.jsxs)(hc.div,{className:"flex-1 overflow-y-auto p-4",animate:f?{x:[-10,10,-10,10,0]}:{},transition:{duration:.4},children:[(0,Fe.jsx)(ct,{children:d&&(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 rounded-xl flex items-center gap-3",style:{backgroundColor:"#FEF2F2",border:"1px solid ".concat(Mk)},children:[(0,Fe.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",style:{color:Mk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Fe.jsx)("span",{className:"text-sm",style:{color:Mk},children:d})]})}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"rounded-xl overflow-hidden mb-4",style:{backgroundColor:Bk,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{borderColor:Ak},children:(0,Fe.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Nk},children:"Kategori Pendapatan"})}),(0,Fe.jsx)("div",{className:"p-3 grid grid-cols-2 gap-2",children:wk.map((e,t)=>(0,Fe.jsxs)(hc.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1+.05*t},type:"button",onClick:()=>x("kategori",e.id),className:"px-3 py-3 rounded-xl text-left transition-all active:scale-[0.98]",style:{backgroundColor:i.kategori===e.id?Nk:Pk,color:i.kategori===e.id?Bk:Ik},children:[(0,Fe.jsx)("div",{className:"font-medium text-sm",children:e.label}),(0,Fe.jsx)("div",{className:"text-xs mt-0.5",style:{color:i.kategori===e.id?"rgba(255,255,255,0.8)":Sk},children:e.description.length>30?e.description.substring(0,30)+"...":e.description})]},e.id))})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"rounded-xl overflow-hidden mb-4",style:{backgroundColor:Bk,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{borderColor:Ak},children:(0,Fe.jsxs)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Nk},children:["Nominal ",(0,Fe.jsx)("span",{style:{color:Mk},children:"*"})]})}),(0,Fe.jsx)("div",{className:"p-4",children:(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-lg font-medium",style:{color:Sk},children:"Rp"}),(0,Fe.jsx)("input",{ref:g,type:"text",inputMode:"numeric",value:i.nominal>0?_k(i.nominal):"",onChange:e=>(e=>{const t=parseInt(e.replace(/\D/g,""),10)||0;x("nominal",t)})(e.target.value),placeholder:"0",className:"w-full pl-12 pr-4 py-4 text-2xl font-bold text-right rounded-xl border-2 transition-colors",style:{borderColor:i.nominal>0?Tk:Ak,color:Ik,backgroundColor:Pk}})]})})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"rounded-xl overflow-hidden mb-4",style:{backgroundColor:Bk,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{borderColor:Ak},children:(0,Fe.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Nk},children:"Detail Pendapatan"})}),(0,Fe.jsxs)("div",{className:"p-4 space-y-4",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:Ik},children:"Sumber Pendapatan"}),(0,Fe.jsx)("input",{type:"text",value:i.sumber||"",onChange:e=>x("sumber",e.target.value),placeholder:"Contoh: Referral Tokopedia, Bonus Supplier",className:"w-full px-4 py-3 rounded-xl border transition-colors",style:{borderColor:Ak,backgroundColor:Pk,color:Ik}})]}),a.length>0&&(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:Ik},children:"Masuk ke Akun"}),(0,Fe.jsxs)("select",{value:i.akun_id||"",onChange:e=>x("akun_id",e.target.value),className:"w-full px-4 py-3 rounded-xl border transition-colors",style:{borderColor:Ak,backgroundColor:Pk,color:Ik},children:[(0,Fe.jsx)("option",{value:"",children:"-- Pilih Akun --"}),a.map(e=>(0,Fe.jsx)("option",{value:e.id,children:e.nama_akun},e.id))]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:Ik},children:"Tanggal"}),(0,Fe.jsx)("input",{type:"date",value:i.tanggal,onChange:e=>x("tanggal",e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-4 py-3 rounded-xl border transition-colors",style:{borderColor:Ak,backgroundColor:Pk,color:Ik}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:Ik},children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:i.keterangan||"",onChange:e=>x("keterangan",e.target.value),placeholder:"Contoh: ".concat(null===y||void 0===y?void 0:y.label," dari..."),rows:2,className:"w-full px-4 py-3 rounded-xl border transition-colors resize-none",style:{borderColor:Ak,backgroundColor:Pk,color:Ik}})]})]})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-4 rounded-xl flex items-start gap-3",style:{backgroundColor:"#DCFCE7"},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Tk},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:Bk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:Tk},children:"Menambah Pendapatan Usaha"}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:"#166534"},children:"Dicatat sebagai pendapatan lain-lain dalam Laporan Laba Rugi (4201)"})]})]})]}),(0,Fe.jsx)("div",{className:"px-4 py-4 border-t",style:{backgroundColor:Bk,borderColor:Ak},children:(0,Fe.jsxs)("div",{className:"flex gap-3",children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3.5 rounded-xl font-medium transition-all active:scale-[0.98]",style:{backgroundColor:Pk,color:Ik},children:"Batal"}),(0,Fe.jsx)("button",{onClick:async()=>{if(!b)return u("Masukkan nominal pendapatan"),void w();c(!0),u(null);try{var e,t;const n=localStorage.getItem("access_token"),r=localStorage.getItem("tenant_id")||"evlogia",a={transaction_type:"pendapatan_lain",kategori:i.kategori,nominal:i.nominal,total_amount:i.nominal,sumber:(null===(e=i.sumber)||void 0===e?void 0:e.trim())||null,akun_id:i.akun_id||null,keterangan:(null===(t=i.keterangan)||void 0===t?void 0:t.trim())||"Pendapatan ".concat(null===y||void 0===y?void 0:y.label),tanggal:i.tanggal,akun_perkiraan:"4201",payment_method:"tunai"},s=await fetch("/api/tenant/".concat(r,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Pendapatan Lain-lain",session_id:"pendapatan-lain-".concat(Date.now()),conversation_context:JSON.stringify({form_data:a})})});if(401===s.status)return void u("Sesi berakhir. Silakan login ulang.");if(!s.ok){const e=await s.json();throw new Error(e.detail||e.message||"Gagal menyimpan transaksi")}const l=await s.json(),c={success:!0,message:l.message||"Pendapatan ".concat(null===y||void 0===y?void 0:y.label," berhasil dicatat"),transaction_id:l.transaction_id||"",tipe:"pendapatan_lain",nominal:i.nominal};p(c),setTimeout(()=>{o(c)},2e3)}catch(n){u(n.message||"Gagal menyimpan. Coba lagi."),w(),console.error("[PendapatanLainForm] Submit error:",n)}finally{c(!1)}},disabled:l||!b,className:"flex-1 py-3.5 rounded-xl font-medium transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",style:{backgroundColor:Tk,color:Bk},children:l?(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Menyimpan..."]}):(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Simpan Pendapatan"]})})]})})]}):null},Rk="#F97316",Ok="#3B82F6",Fk="#737373",Lk="#D4D4D4",zk="#E5E5E5",Wk="#F5F5F5",Vk="#FFFFFF",Uk="#262626",Hk="#EF4444",Gk=e=>{let{isOpen:n,onClose:r,onSuccess:o,accounts:a=[]}=e;const[i,s]=(0,t.useState)(Ck),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),g=(0,t.useRef)(null);(0,t.useEffect)(()=>{var e;n&&(s(qe(qe({},Ck),{},{tanggal:(new Date).toISOString().split("T")[0],akun_id:(null===(e=a[0])||void 0===e?void 0:e.id)||""})),u(null),p(null),setTimeout(()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()},100))},[n,a]);const x=(e,t)=>{s(n=>qe(qe({},n),{},{[e]:t})),u(null)},y=i.nominal>0&&""!==i.sumber_bank.trim(),v=()=>{m(!0),setTimeout(()=>m(!1),500)};return n?h?(0,Fe.jsxs)("div",{className:"h-full flex flex-col",style:{backgroundColor:Wk},children:[(0,Fe.jsx)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:Vk,borderColor:zk},children:(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:Uk},children:"Pendapatan Bunga"})}),(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-center p-6",children:(0,Fe.jsxs)(hc.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},className:"text-center",children:[(0,Fe.jsx)(hc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:300},className:"w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"#DBEAFE"},children:(0,Fe.jsx)(hc.svg,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.3,duration:.5},className:"w-10 h-10",style:{color:Ok},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)(hc.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-xl font-semibold mb-2",style:{color:Uk},children:"Bunga Berhasil Dicatat"}),(0,Fe.jsxs)(hc.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-3xl font-bold mb-3",style:{color:Ok},children:["+ Rp ",_k(h.nominal)]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{backgroundColor:"#DBEAFE",color:Ok},children:[(0,Fe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,Fe.jsx)("span",{className:"text-sm font-medium",children:"Pendapatan Bunga Bank"})]})]})})]}):(0,Fe.jsxs)("div",{className:"h-full flex flex-col",style:{backgroundColor:Wk},children:[(0,Fe.jsx)("div",{className:"flex items-center justify-between px-4 border-b",style:{height:"60px",backgroundColor:Vk,borderColor:zk},children:(0,Fe.jsxs)("div",{className:"flex items-center",children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Lk},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:Uk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsxs)("div",{className:"ml-2",children:[(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:Uk},children:"Pendapatan Bunga"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:Fk},children:"SAK EMKM 7101"})]})]})}),(0,Fe.jsxs)(hc.div,{className:"flex-1 overflow-y-auto p-4",animate:f?{x:[-10,10,-10,10,0]}:{},transition:{duration:.4},children:[(0,Fe.jsx)(ct,{children:d&&(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 rounded-xl flex items-center gap-3",style:{backgroundColor:"#FEF2F2",border:"1px solid ".concat(Hk)},children:[(0,Fe.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",style:{color:Hk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Fe.jsx)("span",{className:"text-sm",style:{color:Hk},children:d})]})}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"rounded-xl overflow-hidden mb-4",style:{backgroundColor:Vk,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{borderColor:zk},children:(0,Fe.jsxs)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Rk},children:["Sumber Bank ",(0,Fe.jsx)("span",{style:{color:Hk},children:"*"})]})}),(0,Fe.jsx)("div",{className:"p-3 grid grid-cols-3 gap-2",children:jk.map((e,t)=>(0,Fe.jsx)(hc.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1+.03*t},type:"button",onClick:()=>x("sumber_bank",e),className:"px-3 py-2.5 rounded-xl text-center transition-all active:scale-[0.98]",style:{backgroundColor:i.sumber_bank===e?Ok:Wk,color:i.sumber_bank===e?Vk:Uk},children:(0,Fe.jsx)("span",{className:"font-medium text-sm",children:e})},e))})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"rounded-xl overflow-hidden mb-4",style:{backgroundColor:Vk,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{borderColor:zk},children:(0,Fe.jsxs)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Rk},children:["Nominal Bunga ",(0,Fe.jsx)("span",{style:{color:Hk},children:"*"})]})}),(0,Fe.jsx)("div",{className:"p-4",children:(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-lg font-medium",style:{color:Fk},children:"Rp"}),(0,Fe.jsx)("input",{ref:g,type:"text",inputMode:"numeric",value:i.nominal>0?_k(i.nominal):"",onChange:e=>(e=>{const t=parseInt(e.replace(/\D/g,""),10)||0;x("nominal",t)})(e.target.value),placeholder:"0",className:"w-full pl-12 pr-4 py-4 text-2xl font-bold text-right rounded-xl border-2 transition-colors",style:{borderColor:i.nominal>0?Ok:zk,color:Uk,backgroundColor:Wk}})]})})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"rounded-xl overflow-hidden mb-4",style:{backgroundColor:Vk,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{borderColor:zk},children:(0,Fe.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Rk},children:"Detail"})}),(0,Fe.jsxs)("div",{className:"p-4 space-y-4",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:Uk},children:"Periode Bunga"}),(0,Fe.jsx)("input",{type:"text",value:i.periode||"",onChange:e=>x("periode",e.target.value),placeholder:"Contoh: Desember 2024, Q4 2024",className:"w-full px-4 py-3 rounded-xl border transition-colors",style:{borderColor:zk,backgroundColor:Wk,color:Uk}})]}),a.length>0&&(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:Uk},children:"Dicatat ke Akun"}),(0,Fe.jsxs)("select",{value:i.akun_id||"",onChange:e=>x("akun_id",e.target.value),className:"w-full px-4 py-3 rounded-xl border transition-colors",style:{borderColor:zk,backgroundColor:Wk,color:Uk},children:[(0,Fe.jsx)("option",{value:"",children:"-- Pilih Akun --"}),a.map(e=>(0,Fe.jsx)("option",{value:e.id,children:e.nama_akun},e.id))]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:Uk},children:"Tanggal"}),(0,Fe.jsx)("input",{type:"date",value:i.tanggal,onChange:e=>x("tanggal",e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-4 py-3 rounded-xl border transition-colors",style:{borderColor:zk,backgroundColor:Wk,color:Uk}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:Uk},children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:i.keterangan||"",onChange:e=>x("keterangan",e.target.value),placeholder:"Contoh: Bunga tabungan ".concat(i.sumber_bank||"bank"),rows:2,className:"w-full px-4 py-3 rounded-xl border transition-colors resize-none",style:{borderColor:zk,backgroundColor:Wk,color:Uk}})]})]})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-4 rounded-xl flex items-start gap-3",style:{backgroundColor:"#DBEAFE"},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Ok},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:Vk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:Ok},children:"Pendapatan Bunga Bank"}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:"#1E40AF"},children:"Dicatat sebagai pendapatan di luar usaha dalam Laporan Laba Rugi (7101)"})]})]})]}),(0,Fe.jsx)("div",{className:"px-4 py-4 border-t",style:{backgroundColor:Vk,borderColor:zk},children:(0,Fe.jsxs)("div",{className:"flex gap-3",children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3.5 rounded-xl font-medium transition-all active:scale-[0.98]",style:{backgroundColor:Wk,color:Uk},children:"Batal"}),(0,Fe.jsx)("button",{onClick:async()=>{if(i.nominal<=0)return u("Masukkan nominal bunga"),void v();if(!i.sumber_bank.trim())return u("Pilih sumber bank"),void v();c(!0),u(null);try{var e,t;const n=localStorage.getItem("access_token"),r=localStorage.getItem("tenant_id")||"evlogia",a={transaction_type:"pendapatan_bunga",nominal:i.nominal,total_amount:i.nominal,sumber_bank:i.sumber_bank.trim(),periode:(null===(e=i.periode)||void 0===e?void 0:e.trim())||null,akun_id:i.akun_id||null,keterangan:(null===(t=i.keterangan)||void 0===t?void 0:t.trim())||"Bunga ".concat(i.sumber_bank),tanggal:i.tanggal,akun_perkiraan:"7101",payment_method:"transfer"},s=await fetch("/api/tenant/".concat(r,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Pendapatan Bunga",session_id:"pendapatan-bunga-".concat(Date.now()),conversation_context:JSON.stringify({form_data:a})})});if(401===s.status)return void u("Sesi berakhir. Silakan login ulang.");if(!s.ok){const e=await s.json();throw new Error(e.detail||e.message||"Gagal menyimpan transaksi")}const l=await s.json(),c={success:!0,message:l.message||"Bunga ".concat(i.sumber_bank," berhasil dicatat"),transaction_id:l.transaction_id||"",tipe:"pendapatan_bunga",nominal:i.nominal};p(c),setTimeout(()=>{o(c)},2e3)}catch(n){u(n.message||"Gagal menyimpan. Coba lagi."),v(),console.error("[PendapatanBungaForm] Submit error:",n)}finally{c(!1)}},disabled:l||!y,className:"flex-1 py-3.5 rounded-xl font-medium transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",style:{backgroundColor:Ok,color:Vk},children:l?(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,Fe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Menyimpan..."]}):(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Simpan Bunga"]})})]})})]}):null},Xk="#F97316",Kk="#3B82F6",Yk="#A855F7",qk="#737373",Zk="#D4D4D4",Jk="#E5E5E5",Qk="#F5F5F5",$k="#FFFFFF",eC="#262626",tC="#22C55E",nC="#EF4444",rC=e=>{let{isOpen:n,onClose:r,isMobile:o=!1,isEmbedded:a=!1}=e;const[i,s]=(0,t.useState)("rekening"),[l,c]=(0,t.useState)("list"),[d,u]=(0,t.useState)("left"),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)([]),[g,x]=(0,t.useState)(null),[y,v]=(0,t.useState)(0),[b,w]=(0,t.useState)({modal_awal:0,setor_modal:0,prive:0,laba_ditahan:0,laba_periode:0}),[k,C]=(0,t.useState)({pendapatan_lain:0,pendapatan_bunga:0}),[j,_]=(0,t.useState)(!1),[N,S]=(0,t.useState)(null),[E,A]=(0,t.useState)(""),[P,B]=(0,t.useState)("kas"),[I,T]=(0,t.useState)(""),[M,D]=(0,t.useState)(""),[R,O]=(0,t.useState)(""),[F,L]=(0,t.useState)(""),[z,W]=(0,t.useState)(""),[V,U]=(0,t.useState)(""),[H,G]=(0,t.useState)(""),[X,K]=(0,t.useState)(!1),[Y,q]=(0,t.useState)(!1),[Z,J]=(0,t.useState)(!1),[Q,$]=(0,t.useState)(!1),ee=(0,t.useCallback)(async()=>{_(!0),S(null);try{const e=await Ub("/api/kasbank/accounts");if(!e.ok)throw new Error("Gagal memuat data");const t=await e.json();p(t.accounts||[]),v(t.total_saldo||0)}catch(e){p([{id:"1",nama_akun:"Kas Toko",tipe:"kas",saldo:5e6,is_default:!0},{id:"2",nama_akun:"BCA",tipe:"bank",saldo:15e6,nama_bank:"BCA",nomor_rekening:"1234567890",is_default:!1},{id:"3",nama_akun:"GoPay",tipe:"ewallet",saldo:5e5,is_default:!1}]),v(205e5)}finally{_(!1)}},[]),te=(0,t.useCallback)(async e=>{_(!0);try{const t=await Ub("/api/kasbank/accounts/".concat(e,"/transactions"));if(!t.ok)throw new Error("Gagal memuat transaksi");const n=await t.json();m(n.transactions||[])}catch(t){m([{id:"1",akun_id:e,nama_akun:"Kas Toko",tipe_transaksi:"masuk",nominal:5e5,saldo_sebelum:45e5,saldo_setelah:5e6,keterangan:"Penjualan tunai",created_at:(new Date).toISOString()},{id:"2",akun_id:e,nama_akun:"Kas Toko",tipe_transaksi:"keluar",nominal:15e4,saldo_sebelum:5e6,saldo_setelah:485e4,keterangan:"Beli ATK",created_at:(new Date).toISOString()}])}finally{_(!1)}},[]),ne=(0,t.useCallback)(async()=>{try{const a=(new Date).toISOString().slice(0,7),i=await Ub("/api/reports/neraca/".concat(a));if(i.ok){var e,t,n,r,o;const a=await i.json();w({modal_awal:(null===(e=a.ekuitas)||void 0===e?void 0:e.modal_awal)||0,setor_modal:(null===(t=a.ekuitas)||void 0===t?void 0:t.setor_modal)||0,prive:(null===(n=a.ekuitas)||void 0===n?void 0:n.prive)||0,laba_ditahan:(null===(r=a.ekuitas)||void 0===r?void 0:r.laba_ditahan)||0,laba_periode:(null===(o=a.ekuitas)||void 0===o?void 0:o.laba_periode_berjalan)||0})}}catch(a){w({modal_awal:5e7,setor_modal:1e7,prive:2e6,laba_ditahan:85e5,laba_periode:32e5})}},[]);(0,t.useEffect)(()=>{n&&(ee(),ne())},[n,ee,ne]);const re=()=>{A(""),B("kas"),T(""),D(""),O(""),u("left"),c("add")},oe=()=>{L(""),W(""),U(""),G(""),u("left"),c("transfer")},ae=()=>{u("right"),c("list"),x(null)},ie=async()=>{if(E.trim()){_(!0);try{const e={id:Date.now().toString(),nama_akun:E,tipe:P,saldo:parseFloat(I)||0,nama_bank:M||void 0,nomor_rekening:R||void 0,is_default:!1};p(t=>[...t,e]),ae()}catch(e){S(e.message)}finally{_(!1)}}else S("Nama akun wajib diisi")},se=async()=>{if(F&&z&&V)if(F!==z){_(!0);try{const e=parseFloat(V);p(t=>t.map(t=>t.id===F?qe(qe({},t),{},{saldo:t.saldo-e}):t.id===z?qe(qe({},t),{},{saldo:t.saldo+e}):t)),ae()}catch(e){S(e.message)}finally{_(!1)}}else S("Akun asal dan tujuan tidak boleh sama");else S("Lengkapi semua field")},le=a?"h-full bg-neutral-50 flex flex-col":"fixed inset-0 z-50 bg-neutral-50 flex flex-col";if(!n)return null;const ce=b.modal_awal+b.setor_modal-b.prive+b.laba_ditahan+b.laba_periode,de=()=>(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"flex-1 flex flex-col",children:[(0,Fe.jsxs)("div",{className:"p-4",style:{backgroundColor:Xk},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Fe.jsx)("button",{onClick:ae,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"rgba(255,255,255,0.2)"},children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{e.currentTarget.style.display="none"}})}),(0,Fe.jsxs)("div",{className:"text-white",children:[(0,Fe.jsx)("h2",{className:"text-lg font-bold",children:null===g||void 0===g?void 0:g.nama_akun}),(0,Fe.jsx)("div",{className:"text-sm opacity-80",children:g&&tk(g.tipe)})]})]}),(0,Fe.jsxs)("div",{className:"text-center text-white",children:[(0,Fe.jsx)("div",{className:"text-sm opacity-80",children:"Saldo"}),(0,Fe.jsxs)("div",{className:"text-3xl font-bold",children:["Rp ",ek((null===g||void 0===g?void 0:g.saldo)||0)]})]})]}),(0,Fe.jsxs)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4",children:[(0,Fe.jsx)("div",{className:"text-xs font-medium uppercase tracking-wider mb-3",style:{color:qk},children:"Riwayat Transaksi"}),0===f.length?(0,Fe.jsx)("div",{className:"text-center py-8",style:{color:qk},children:"Belum ada transaksi"}):(0,Fe.jsx)("div",{className:"space-y-2",children:f.map(e=>(0,Fe.jsx)("div",{className:"rounded-xl p-3",style:{backgroundColor:$k,boxShadow:"0 1px 3px rgba(0,0,0,0.05)"},children:(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:eC},children:e.keterangan||"Transaksi"}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:qk},children:new Date(e.created_at).toLocaleDateString("id-ID")})]}),(0,Fe.jsxs)("div",{className:"font-bold",style:{color:"masuk"===e.tipe_transaksi?tC:nC},children:["masuk"===e.tipe_transaksi?"+":"-","Rp ",ek(e.nominal)]})]})},e.id))})]})]},"rekening-detail"),ue=()=>(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"flex-1 flex flex-col",style:{backgroundColor:$k},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 border-b",style:{height:"60px",borderColor:Jk},children:[(0,Fe.jsx)("button",{onClick:ae,className:"p-1",children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-6 h-6",onError:e=>{e.currentTarget.style.display="none"}})}),(0,Fe.jsx)("h2",{className:"text-lg font-semibold",style:{color:eC},children:"Tambah Akun"})]}),(0,Fe.jsxs)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:[N&&(0,Fe.jsx)("div",{className:"p-3 rounded-lg text-sm",style:{backgroundColor:"#FEF2F2",color:nC},children:N}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:eC},children:["Nama Akun ",(0,Fe.jsx)("span",{style:{color:nC},children:"*"})]}),(0,Fe.jsx)("input",{type:"text",value:E,onChange:e=>A(e.target.value),placeholder:"Contoh: Kas Toko Utama",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:$k,border:"1px solid ".concat(Jk),color:eC}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:eC},children:"Tipe Akun"}),(0,Fe.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["kas","bank","ewallet"].map(e=>(0,Fe.jsxs)("button",{onClick:()=>B(e),className:"py-2.5 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:P===e?Xk:Qk,color:P===e?$k:qk},children:[nk(e)," ",tk(e)]},e))})]}),"bank"===P&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:eC},children:"Nama Bank"}),(0,Fe.jsx)("input",{type:"text",value:M,onChange:e=>D(e.target.value),placeholder:"Contoh: BCA",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:$k,border:"1px solid ".concat(Jk),color:eC}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:eC},children:"Nomor Rekening"}),(0,Fe.jsx)("input",{type:"text",value:R,onChange:e=>O(e.target.value),placeholder:"1234567890",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:$k,border:"1px solid ".concat(Jk),color:eC}})]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:eC},children:"Saldo Awal"}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:qk},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:I,onChange:e=>T(e.target.value.replace(/\D/g,"")),placeholder:"0",className:"w-full pl-10 pr-3 py-2.5 rounded-lg",style:{backgroundColor:$k,border:"1px solid ".concat(Jk),color:eC}})]})]})]}),(0,Fe.jsx)("div",{className:"p-4 border-t",style:{borderColor:Jk},children:(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:ie,disabled:j,className:"w-full py-3.5 rounded-xl font-semibold disabled:opacity-50",style:{backgroundColor:Xk,color:$k},children:j?"Menyimpan...":"Simpan Akun"})})]},"rekening-add"),he=()=>(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"flex-1 flex flex-col",style:{backgroundColor:$k},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 border-b",style:{height:"60px",borderColor:Jk},children:[(0,Fe.jsx)("button",{onClick:ae,className:"p-1",children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-6 h-6"})}),(0,Fe.jsx)("h2",{className:"text-lg font-semibold",style:{color:eC},children:"Transfer Antar Akun"})]}),(0,Fe.jsxs)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:[N&&(0,Fe.jsx)("div",{className:"p-3 rounded-lg text-sm",style:{backgroundColor:"#FEF2F2",color:nC},children:N}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:eC},children:"Dari Akun"}),(0,Fe.jsxs)("select",{value:F,onChange:e=>L(e.target.value),className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:$k,border:"1px solid ".concat(Jk),color:eC},children:[(0,Fe.jsx)("option",{value:"",children:"Pilih akun asal"}),h.map(e=>(0,Fe.jsxs)("option",{value:e.id,children:[e.nama_akun," (Rp ",ek(e.saldo),")"]},e.id))]})]}),(0,Fe.jsx)("div",{className:"flex justify-center",children:(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:Qk},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:qk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:eC},children:"Ke Akun"}),(0,Fe.jsxs)("select",{value:z,onChange:e=>W(e.target.value),className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:$k,border:"1px solid ".concat(Jk),color:eC},children:[(0,Fe.jsx)("option",{value:"",children:"Pilih akun tujuan"}),h.filter(e=>e.id!==F).map(e=>(0,Fe.jsx)("option",{value:e.id,children:e.nama_akun},e.id))]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:eC},children:"Nominal"}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:qk},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:V,onChange:e=>U(e.target.value.replace(/\D/g,"")),placeholder:"0",className:"w-full pl-10 pr-3 py-2.5 rounded-lg",style:{backgroundColor:$k,border:"1px solid ".concat(Jk),color:eC}})]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:eC},children:"Catatan (opsional)"}),(0,Fe.jsx)("input",{type:"text",value:H,onChange:e=>G(e.target.value),placeholder:"Contoh: Setor ke bank",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:$k,border:"1px solid ".concat(Jk),color:eC}})]})]}),(0,Fe.jsx)("div",{className:"p-4 border-t",style:{borderColor:Jk},children:(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:se,disabled:j,className:"w-full py-3.5 rounded-xl font-semibold disabled:opacity-50",style:{backgroundColor:Xk,color:$k},children:j?"Memproses...":"Transfer"})})]},"rekening-transfer");return(0,Fe.jsxs)("div",{className:le,children:[(0,Fe.jsxs)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:$k,borderColor:Jk},children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Zk},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:eC},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsx)("h1",{className:"text-lg font-semibold ml-2",style:{color:eC},children:"Kas & Bank"})]}),(0,Fe.jsx)("div",{className:"flex border-b",style:{backgroundColor:$k,borderColor:Jk},children:["rekening","ekuitas","pendapatan"].map(e=>(0,Fe.jsxs)("button",{onClick:()=>{s(e),c("list")},className:"flex-1 py-3 text-sm font-medium relative transition-colors",style:{color:i===e?Xk:qk},children:["rekening"===e&&"Rekening","ekuitas"===e&&"Ekuitas","pendapatan"===e&&"Pendapatan",i===e&&(0,Fe.jsx)(hc.div,{layoutId:"kasbankTabIndicator",className:"absolute bottom-0 left-0 right-0 h-0.5",style:{backgroundColor:Xk}})]},e))}),(0,Fe.jsxs)(ct,{mode:"wait",children:["rekening"===i&&("detail"===l?de():"add"===l?ue():"transfer"===l?he():(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"flex-1 flex flex-col min-h-0",children:[(0,Fe.jsx)("div",{className:"px-4 pt-4",children:(0,Fe.jsxs)("div",{className:"p-4 rounded-xl text-center",style:{backgroundColor:Xk},children:[(0,Fe.jsx)("div",{className:"text-sm text-white/80",children:"Total Saldo"}),(0,Fe.jsxs)("div",{className:"text-2xl font-bold text-white",children:["Rp ",ek(y)]})]})}),(0,Fe.jsxs)("div",{className:"px-4 py-3 flex gap-2",children:[(0,Fe.jsx)("button",{onClick:oe,className:"flex-1 py-2.5 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:Qk,color:qk},children:"\ud83d\udd04 Transfer"}),(0,Fe.jsx)("button",{onClick:()=>K(!0),className:"flex-1 py-2.5 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"#FAF5FF",color:Yk},children:"\ud83d\udcb0 Modal/Prive"})]}),(0,Fe.jsxs)("div",{className:"flex-1 min-h-0 overflow-y-auto px-4 pb-24",children:[(0,Fe.jsx)("div",{className:"text-xs font-medium uppercase tracking-wider mb-2",style:{color:qk},children:"Daftar Rekening"}),(0,Fe.jsx)("div",{className:"space-y-2",children:h.map((e,t)=>(0,Fe.jsxs)(hc.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},onClick:()=>(e=>{x(e),te(e.id),u("left"),c("detail")})(e),className:"w-full rounded-xl p-4 flex items-center justify-between transition-all active:scale-[0.98]",style:{backgroundColor:$k,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-2xl",style:{backgroundColor:"bank"===e.tipe?"#EFF6FF":"ewallet"===e.tipe?"#FAF5FF":"#FFF7ED"},children:nk(e.tipe)}),(0,Fe.jsxs)("div",{className:"text-left",children:[(0,Fe.jsx)("div",{className:"font-semibold",style:{color:eC},children:e.nama_akun}),(0,Fe.jsx)("div",{className:"text-sm",style:{color:qk},children:"bank"===e.tipe&&e.nomor_rekening?"".concat(e.nama_bank," \u2022 ").concat(e.nomor_rekening.slice(-4)):tk(e.tipe)})]})]}),(0,Fe.jsxs)("div",{className:"text-right flex items-center gap-2",children:[(0,Fe.jsxs)("div",{className:"font-bold",style:{color:Xk},children:["Rp ",ek(e.saldo)]}),(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:Jk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},e.id))})]}),(0,Fe.jsx)(hc.button,{initial:{scale:0},animate:{scale:1},whileTap:{scale:.9},onClick:re,className:"fixed bottom-6 right-6 w-14 h-14 rounded-full flex items-center justify-center shadow-lg z-10",style:{backgroundColor:Xk},children:(0,Fe.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]},"rekening-list")),"ekuitas"===i&&(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"flex-1 flex flex-col min-h-0 overflow-y-auto pb-24",style:{backgroundColor:Qk},children:[(0,Fe.jsx)("div",{className:"p-4",children:(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:$k,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{borderColor:Jk},children:(0,Fe.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider",style:{color:Xk},children:"Ringkasan Ekuitas"})}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2",children:[(0,Fe.jsxs)("div",{className:"p-3 border-b border-r",style:{borderColor:Qk},children:[(0,Fe.jsx)("div",{className:"text-xs",style:{color:qk},children:"Modal Awal"}),(0,Fe.jsxs)("div",{className:"font-bold",style:{color:tC},children:["Rp ",ek(b.modal_awal)]})]}),(0,Fe.jsxs)("div",{className:"p-3 border-b",style:{borderColor:Qk},children:[(0,Fe.jsx)("div",{className:"text-xs",style:{color:qk},children:"Setor Modal"}),(0,Fe.jsxs)("div",{className:"font-bold",style:{color:tC},children:["Rp ",ek(b.setor_modal)]})]}),(0,Fe.jsxs)("div",{className:"p-3 border-r",style:{borderColor:Qk},children:[(0,Fe.jsx)("div",{className:"text-xs",style:{color:qk},children:"Prive"}),(0,Fe.jsxs)("div",{className:"font-bold",style:{color:nC},children:["-Rp ",ek(b.prive)]})]}),(0,Fe.jsxs)("div",{className:"p-3",children:[(0,Fe.jsx)("div",{className:"text-xs",style:{color:qk},children:"Laba Ditahan"}),(0,Fe.jsxs)("div",{className:"font-bold",style:{color:Kk},children:["Rp ",ek(b.laba_ditahan)]})]})]}),(0,Fe.jsxs)("div",{className:"p-4 text-center border-t",style:{borderColor:Jk,backgroundColor:Qk},children:[(0,Fe.jsx)("div",{className:"text-xs",style:{color:qk},children:"Total Ekuitas"}),(0,Fe.jsxs)("div",{className:"text-xl font-bold",style:{color:Xk},children:["Rp ",ek(ce)]})]})]})}),(0,Fe.jsx)("div",{className:"px-4",children:(0,Fe.jsx)("div",{className:"rounded-xl p-4",style:{backgroundColor:"#FFF7ED",border:"1px solid ".concat(Xk,"20")},children:(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc8"}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"text-xs",style:{color:qk},children:"Laba Periode Berjalan"}),(0,Fe.jsxs)("div",{className:"text-lg font-bold",style:{color:Xk},children:["Rp ",ek(b.laba_periode)]})]})]})})}),(0,Fe.jsx)("div",{className:"p-4 mt-auto",children:(0,Fe.jsx)("button",{onClick:()=>K(!0),className:"w-full py-3 rounded-xl font-medium flex items-center justify-center gap-2",style:{backgroundColor:Yk,color:$k},children:"\ud83d\udcb0 Catat Modal / Prive"})}),(0,Fe.jsx)(hc.button,{initial:{scale:0},animate:{scale:1},whileTap:{scale:.9},onClick:()=>K(!0),className:"fixed bottom-6 right-6 w-14 h-14 rounded-full flex items-center justify-center shadow-lg z-10",style:{backgroundColor:Yk},children:(0,Fe.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]},"ekuitas-tab"),"pendapatan"===i&&(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"flex-1 flex flex-col min-h-0 overflow-y-auto pb-24",style:{backgroundColor:Qk},children:[(0,Fe.jsxs)("div",{className:"p-4 space-y-3",children:[(0,Fe.jsx)(hc.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},onClick:()=>J(!0),className:"w-full rounded-xl p-4 transition-all active:scale-[0.98]",style:{backgroundColor:$k,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("span",{className:"text-3xl",children:"\ud83d\udcb8"}),(0,Fe.jsxs)("div",{className:"text-left",children:[(0,Fe.jsx)("h3",{className:"font-medium",style:{color:eC},children:"Pendapatan Lain-lain"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:qk},children:"Komisi, bonus, jasa lainnya"})]})]}),(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fe.jsxs)("div",{className:"text-right",children:[(0,Fe.jsxs)("div",{className:"font-bold",style:{color:tC},children:["Rp ",ek(k.pendapatan_lain)]}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:qk},children:"Bulan ini"})]}),(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:Jk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),(0,Fe.jsx)(hc.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},onClick:()=>$(!0),className:"w-full rounded-xl p-4 transition-all active:scale-[0.98]",style:{backgroundColor:$k,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("span",{className:"text-3xl",children:"\ud83c\udfe6"}),(0,Fe.jsxs)("div",{className:"text-left",children:[(0,Fe.jsx)("h3",{className:"font-medium",style:{color:eC},children:"Pendapatan Bunga"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:qk},children:"Bunga tabungan/deposito bank"})]})]}),(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fe.jsxs)("div",{className:"text-right",children:[(0,Fe.jsxs)("div",{className:"font-bold",style:{color:Kk},children:["Rp ",ek(k.pendapatan_bunga)]}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:qk},children:"Bulan ini"})]}),(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:Jk},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})]}),(0,Fe.jsx)("div",{className:"px-4 mt-2",children:(0,Fe.jsxs)("div",{className:"p-4 rounded-xl flex items-start gap-3",style:{backgroundColor:"#DCFCE7"},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:tC},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:$k},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:tC},children:"Pendapatan di Luar Usaha"}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:"#166534"},children:"Catat pendapatan selain penjualan utama seperti komisi, bonus, atau bunga bank untuk laporan keuangan yang akurat."})]})]})}),(0,Fe.jsxs)("div",{className:"px-4 mt-4 grid grid-cols-2 gap-3",children:[(0,Fe.jsxs)("button",{onClick:()=>J(!0),className:"py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-all active:scale-[0.98]",style:{backgroundColor:tC,color:$k},children:[(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Lain-lain"]}),(0,Fe.jsxs)("button",{onClick:()=>$(!0),className:"py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-all active:scale-[0.98]",style:{backgroundColor:Kk,color:$k},children:[(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Bunga Bank"]})]}),(0,Fe.jsx)(hc.button,{initial:{scale:0},animate:{scale:1},whileTap:{scale:.9},onClick:()=>J(!0),className:"fixed bottom-6 right-6 w-14 h-14 rounded-full flex items-center justify-center shadow-lg z-10",style:{backgroundColor:tC},children:(0,Fe.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]},"pendapatan-tab")]}),X&&(0,Fe.jsx)("div",{className:"fixed inset-0 z-50",children:(0,Fe.jsx)(gk,{isOpen:X,onClose:()=>K(!1),onSuccess:()=>{K(!1),ee(),ne()},accounts:h.map(e=>({id:e.id,nama_akun:e.nama_akun}))})}),(0,Fe.jsx)(bk,{isOpen:Y,onClose:()=>q(!1),onSuccess:()=>{q(!1),ee()},accounts:h.map(e=>({id:e.id,nama_akun:e.nama_akun}))}),Z&&(0,Fe.jsx)("div",{className:"fixed inset-0 z-50",children:(0,Fe.jsx)(Dk,{isOpen:Z,onClose:()=>J(!1),onSuccess:()=>{J(!1),ee()},accounts:h.map(e=>({id:e.id,nama_akun:e.nama_akun}))})}),Q&&(0,Fe.jsx)("div",{className:"fixed inset-0 z-50",children:(0,Fe.jsx)(Gk,{isOpen:Q,onClose:()=>$(!1),onSuccess:()=>{$(!1),ee()},accounts:h.map(e=>({id:e.id,nama_akun:e.nama_akun}))})})]})},oC=e=>new Intl.NumberFormat("id-ID").format(e),aC=e=>{switch(e){case"belum_lunas":return"Belum Lunas";case"sebagian":return"Sebagian";case"lunas":return"Lunas";default:return e}},iC=e=>!!e&&new Date(e)<new Date,sC=[{id:"modal_kerja",label:"Modal Kerja",description:"Pinjaman untuk operasional usaha"},{id:"investasi",label:"Investasi",description:"Pinjaman untuk pengembangan usaha"},{id:"kpr",label:"KPR",description:"Kredit Pemilikan Rumah/Ruko"},{id:"kendaraan",label:"Kendaraan",description:"Kredit kendaraan usaha"},{id:"lainnya",label:"Lainnya",description:"Jenis pinjaman lainnya"}],lC={nama_bank:"",jenis_pinjaman:"modal_kerja",tanggal_pinjaman:(new Date).toISOString().split("T")[0],nominal_pinjaman:0,bunga_per_tahun:12,tenor_bulan:12,angsuran_per_bulan:0},cC=e=>new Intl.NumberFormat("id-ID").format(e),dC=(e,t)=>e*t,uC="#F97316",hC="#FFF7ED",pC="#3B82F6",fC="#737373",mC="#D4D4D4",gC="#E5E5E5",xC="#F5F5F5",yC="#FFFFFF",vC="#262626",bC="#22C55E",wC="#EF4444",kC={x:[0,-10,10,-10,10,0],transition:{duration:.4}},CC=e=>{let{isOpen:n,onClose:r,onSuccess:o,editData:a}=e;const[i,s]=(0,t.useState)(lC),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),[g,x]=(0,t.useState)(!1),y=(0,t.useRef)(null);(0,t.useEffect)(()=>{n&&(s(a?{nama_bank:a.nama_bank,jenis_pinjaman:a.jenis_pinjaman,nomor_pinjaman:a.nomor_pinjaman,tanggal_pinjaman:a.tanggal_pinjaman,nominal_pinjaman:a.nominal_pinjaman,bunga_per_tahun:a.bunga_per_tahun,tenor_bulan:a.tenor_bulan,angsuran_per_bulan:a.angsuran_per_bulan,sisa_pokok:a.sisa_pokok,tanggal_jatuh_tempo:a.tanggal_jatuh_tempo}:lC),u(null),p(null),m(!1),x(!1),setTimeout(()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.focus()},100))},[n,a]),(0,t.useEffect)(()=>{const e=((e,t,n)=>{if(e<=0||n<=0)return 0;if(t<=0)return Math.round(e/n);const r=t/100/12,o=r*Math.pow(1+r,n),a=Math.pow(1+r,n)-1;return Math.round(e*(o/a))})(i.nominal_pinjaman,i.bunga_per_tahun,i.tenor_bulan);s(t=>qe(qe({},t),{},{angsuran_per_bulan:e}))},[i.nominal_pinjaman,i.bunga_per_tahun,i.tenor_bulan]);const v=(e,t)=>{s(n=>qe(qe({},n),{},{[e]:t})),u(null)},b=(e,t)=>{const n=parseInt(t.replace(/\D/g,""),10)||0;v(e,n)},w=dC(i.angsuran_per_bulan,i.tenor_bulan),k=(C=i.nominal_pinjaman,j=i.angsuran_per_bulan,_=i.tenor_bulan,dC(j,_)-C);var C,j,_;const N=i.nama_bank.trim()&&i.nominal_pinjaman>0&&i.tenor_bulan>0;return n?h?(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:yC},children:(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Fe.jsxs)(hc.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:15},className:"text-center px-6",children:[(0,Fe.jsx)(hc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",damping:10},className:"w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"#DCFCE7"},children:(0,Fe.jsx)(hc.svg,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.4,duration:.5},className:"w-12 h-12",style:{color:bC},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)(hc.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)("h2",{className:"text-xl font-bold mb-2",style:{color:vC},children:"Hutang Bank Berhasil Dicatat"}),(0,Fe.jsx)("p",{className:"text-lg mb-1",style:{color:fC},children:h.nama_bank}),(0,Fe.jsxs)("p",{className:"text-sm",style:{color:fC},children:["Angsuran/bulan: ",(0,Fe.jsxs)("span",{style:{color:uC},children:["Rp ",cC(h.angsuran_per_bulan)]})]})]})})}):(0,Fe.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:xC},children:[(0,Fe.jsxs)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:yC,borderColor:gC},children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:mC},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:vC},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsxs)("div",{className:"ml-2",children:[(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:vC},children:a?"Edit Hutang Bank":"Hutang Bank"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:fC},children:"SAK EMKM 2102"})]})]}),(0,Fe.jsxs)(hc.div,{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",animate:g?kC:{},children:[(0,Fe.jsx)(ct,{children:d&&(0,Fe.jsx)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 rounded-xl text-sm",style:{backgroundColor:"#FEE2E2",color:wC},children:d})}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:yC,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:uC},children:"Detail Bank"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:vC},children:["Nama Bank ",(0,Fe.jsx)("span",{style:{color:wC},children:"*"})]}),(0,Fe.jsx)("input",{ref:y,type:"text",value:i.nama_bank,onChange:e=>v("nama_bank",e.target.value),placeholder:"Contoh: BRI, BCA, Mandiri",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:yC,border:"1px solid ".concat(gC),color:vC}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-2",style:{color:vC},children:["Jenis Pinjaman ",(0,Fe.jsx)("span",{style:{color:wC},children:"*"})]}),(0,Fe.jsx)("div",{className:"grid grid-cols-2 gap-2",children:sC.slice(0,4).map(e=>(0,Fe.jsx)("button",{type:"button",onClick:()=>v("jenis_pinjaman",e.id),className:"px-3 py-2.5 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:i.jenis_pinjaman===e.id?uC:xC,color:i.jenis_pinjaman===e.id?yC:fC},children:e.label},e.id))})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:yC,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:uC},children:"Nominal & Tenor"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:vC},children:["Nominal Pinjaman ",(0,Fe.jsx)("span",{style:{color:wC},children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:fC},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:i.nominal_pinjaman>0?cC(i.nominal_pinjaman):"",onChange:e=>b("nominal_pinjaman",e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-3 text-lg font-semibold text-right rounded-lg",style:{backgroundColor:yC,border:"1px solid ".concat(gC),color:vC}})]})]}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:vC},children:"Bunga/Tahun (%)"}),(0,Fe.jsx)("input",{type:"number",min:"0",step:"0.1",value:i.bunga_per_tahun,onChange:e=>v("bunga_per_tahun",parseFloat(e.target.value)||0),className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:yC,border:"1px solid ".concat(gC),color:vC}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:vC},children:"Tenor (bulan)"}),(0,Fe.jsx)("input",{type:"number",min:"1",value:i.tenor_bulan,onChange:e=>v("tenor_bulan",parseInt(e.target.value)||1),className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:yC,border:"1px solid ".concat(gC),color:vC}})]})]})]}),i.nominal_pinjaman>0&&(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-xl p-4",style:{backgroundColor:hC},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:uC},children:"Estimasi Pembayaran"}),(0,Fe.jsxs)("div",{className:"space-y-2",children:[(0,Fe.jsxs)("div",{className:"flex justify-between py-2",style:{borderBottom:"1px solid ".concat(uC,"20")},children:[(0,Fe.jsx)("span",{style:{color:fC},children:"Angsuran/bulan"}),(0,Fe.jsxs)("span",{className:"font-bold text-lg",style:{color:uC},children:["Rp ",cC(i.angsuran_per_bulan)]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between py-1",children:[(0,Fe.jsx)("span",{className:"text-sm",style:{color:fC},children:"Total Pembayaran"}),(0,Fe.jsxs)("span",{className:"text-sm",style:{color:vC},children:["Rp ",cC(w)]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between py-1",children:[(0,Fe.jsx)("span",{className:"text-sm",style:{color:fC},children:"Total Bunga"}),(0,Fe.jsxs)("span",{className:"text-sm",style:{color:wC},children:["Rp ",cC(k)]})]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:yC,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:uC},children:"Tanggal"}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:vC},children:"Tanggal Pinjaman"}),(0,Fe.jsx)("input",{type:"date",value:i.tanggal_pinjaman,onChange:e=>v("tanggal_pinjaman",e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:yC,border:"1px solid ".concat(gC),color:vC}})]})]}),(0,Fe.jsxs)("button",{type:"button",onClick:()=>m(!f),className:"w-full flex items-center justify-center gap-2 py-2 text-sm",style:{color:fC},children:[(0,Fe.jsx)("span",{className:"flex-1 h-px",style:{backgroundColor:gC}}),(0,Fe.jsxs)("span",{className:"flex items-center gap-1",children:["Detail Tambahan",(0,Fe.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(f?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,Fe.jsx)("span",{className:"flex-1 h-px",style:{backgroundColor:gC}})]}),(0,Fe.jsx)(ct,{children:f&&(0,Fe.jsxs)(hc.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"rounded-xl p-4 space-y-4",style:{backgroundColor:yC,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:vC},children:"Nomor Pinjaman/Kontrak"}),(0,Fe.jsx)("input",{type:"text",value:i.nomor_pinjaman||"",onChange:e=>v("nomor_pinjaman",e.target.value),placeholder:"Contoh: KUR-2024-123456",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:yC,border:"1px solid ".concat(gC),color:vC}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:vC},children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:i.keterangan||"",onChange:e=>v("keterangan",e.target.value),placeholder:"Catatan tambahan...",rows:2,className:"w-full px-3 py-2.5 rounded-lg resize-none",style:{backgroundColor:yC,border:"1px solid ".concat(gC),color:vC}})]})]})}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4 flex items-start gap-3",style:{backgroundColor:"#EFF6FF"},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:pC},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:yC},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:pC},children:"Dicatat sebagai Hutang Bank"}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:"#1E40AF"},children:"Hutang bank masuk ke kewajiban jangka panjang di neraca. Angsuran bulanan akan terdiri dari pembayaran pokok dan bunga."})]})]}),(0,Fe.jsx)("div",{className:"h-24"})]}),(0,Fe.jsxs)("div",{className:"p-4 border-t flex gap-3",style:{backgroundColor:yC,borderColor:gC},children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3.5 rounded-xl font-medium",style:{backgroundColor:xC,color:fC},children:"Batal"}),(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:async()=>{if(!N)return u("Lengkapi nama bank, nominal pinjaman, dan tenor"),x(!0),void setTimeout(()=>x(!1),500);c(!0),u(null);try{var e,t;const n=localStorage.getItem("access_token"),r=localStorage.getItem("tenant_id")||"evlogia",a={transaction_type:"hutang_bank",pihak_type:"bank",nama_pihak:i.nama_bank.trim(),jenis_pinjaman:i.jenis_pinjaman,nomor_pinjaman:(null===(e=i.nomor_pinjaman)||void 0===e?void 0:e.trim())||null,tanggal_pinjaman:i.tanggal_pinjaman,nominal_pinjaman:i.nominal_pinjaman,total_amount:i.nominal_pinjaman,bunga_per_tahun:i.bunga_per_tahun,tenor_bulan:i.tenor_bulan,angsuran_per_bulan:i.angsuran_per_bulan,total_pembayaran:w,total_bunga:k,sisa_pokok:i.nominal_pinjaman,keterangan:(null===(t=i.keterangan)||void 0===t?void 0:t.trim())||"Pinjaman ".concat(i.nama_bank)},s=await fetch("/api/tenant/".concat(r,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Hutang Bank",session_id:"hutang-bank-".concat(Date.now()),conversation_context:JSON.stringify({form_data:a})})});if(401===s.status)return void u("Sesi berakhir. Silakan login ulang.");if(!s.ok){const e=await s.json();throw new Error(e.detail||e.message||"Gagal menyimpan hutang bank")}const l=await s.json(),c={success:!0,message:l.message||"Hutang bank berhasil dicatat",loan_id:l.loan_id||"",nama_bank:i.nama_bank,angsuran_per_bulan:i.angsuran_per_bulan};p(c),setTimeout(()=>{o(c)},1500)}catch(n){u(n.message||"Gagal menyimpan. Coba lagi."),console.error("[HutangBankForm] Submit error:",n)}finally{c(!1)}},disabled:l||!N,className:"flex-1 py-3.5 rounded-xl font-semibold disabled:opacity-50",style:{backgroundColor:uC,color:yC},children:l?"Menyimpan...":a?"Simpan Perubahan":"Simpan Hutang Bank"})]})]}):null},jC={nama_karyawan:"",periode_gaji:function(){const e=new Date;return e.toLocaleDateString("id-ID",{month:"long",year:"numeric"})}(),gaji_pokok:0,tunjangan:0,potongan:0,total_hutang:0,tanggal_jatuh_tempo:NC()},_C=e=>new Intl.NumberFormat("id-ID").format(e);function NC(){const e=new Date;return new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0]}const SC="#F97316",EC="#EA580C",AC="#FFF7ED",PC="#A855F7",BC="#737373",IC="#D4D4D4",TC="#E5E5E5",MC="#F5F5F5",DC="#FFFFFF",RC="#262626",OC="#22C55E",FC="#EF4444",LC={x:[0,-10,10,-10,10,0],transition:{duration:.4}},zC=e=>{let{isOpen:n,onClose:r,onSuccess:o}=e;const[a,i]=(0,t.useState)(jC),[s,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(!1),m=(0,t.useRef)(null),g=(0,t.useMemo)(()=>(()=>{const e=[],t=new Date;for(let n=0;n<3;n++){const r=new Date(t.getFullYear(),t.getMonth()-n,1);e.push(r.toLocaleDateString("id-ID",{month:"long",year:"numeric"}))}return e})(),[]),x=(0,t.useMemo)(()=>{return e=a.gaji_pokok,t=a.tunjangan,n=a.potongan,e+t-n;var e,t,n},[a.gaji_pokok,a.tunjangan,a.potongan]);(0,t.useEffect)(()=>{i(e=>qe(qe({},e),{},{total_hutang:x}))},[x]),(0,t.useEffect)(()=>{n&&(i(qe(qe({},jC),{},{periode_gaji:g[0],tanggal_jatuh_tempo:NC()})),d(null),h(null),f(!1),setTimeout(()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.focus()},100))},[n,g]);const y=(e,t)=>{i(n=>qe(qe({},n),{},{[e]:t})),d(null)},v=(e,t)=>{const n=parseInt(t.replace(/\D/g,""),10)||0;y(e,n)},b=a.nama_karyawan.trim()&&a.gaji_pokok>0&&a.periode_gaji&&x>0;return n?u?(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:DC},children:(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Fe.jsxs)(hc.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:15},className:"text-center px-6",children:[(0,Fe.jsx)(hc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",damping:10},className:"w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"#DCFCE7"},children:(0,Fe.jsx)(hc.svg,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.4,duration:.5},className:"w-12 h-12",style:{color:OC},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)(hc.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)("h2",{className:"text-xl font-bold mb-2",style:{color:RC},children:"Hutang Gaji Dicatat"}),(0,Fe.jsx)("p",{className:"text-lg mb-2",style:{color:BC},children:u.nama_karyawan}),(0,Fe.jsxs)("p",{className:"text-2xl font-bold mb-2",style:{color:PC},children:["Rp ",_C(u.total_hutang)]}),(0,Fe.jsxs)("p",{className:"text-sm",style:{color:BC},children:["Jatuh tempo: ",new Date(u.tanggal_jatuh_tempo).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]})]})})}):(0,Fe.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:MC},children:[(0,Fe.jsxs)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:DC,borderColor:TC},children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:IC},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:RC},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsxs)("div",{className:"ml-2",children:[(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:RC},children:"Hutang Gaji"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:BC},children:"SAK EMKM 2105"})]})]}),(0,Fe.jsxs)(hc.div,{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",animate:p?LC:{},children:[(0,Fe.jsx)(ct,{children:c&&(0,Fe.jsx)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 rounded-xl text-sm",style:{backgroundColor:"#FEE2E2",color:FC},children:c})}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:DC,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:PC},children:"Data Karyawan"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:RC},children:["Nama Karyawan ",(0,Fe.jsx)("span",{style:{color:FC},children:"*"})]}),(0,Fe.jsx)("input",{ref:m,type:"text",value:a.nama_karyawan,onChange:e=>y("nama_karyawan",e.target.value),placeholder:"Contoh: Budi Santoso",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:DC,border:"1px solid ".concat(TC),color:RC}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:RC},children:["Periode Gaji ",(0,Fe.jsx)("span",{style:{color:FC},children:"*"})]}),(0,Fe.jsx)("select",{value:a.periode_gaji,onChange:e=>y("periode_gaji",e.target.value),className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:DC,border:"1px solid ".concat(TC),color:RC},children:g.map(e=>(0,Fe.jsx)("option",{value:e,children:e},e))})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:DC,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:PC},children:"Komponen Gaji"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:RC},children:["Gaji Pokok ",(0,Fe.jsx)("span",{style:{color:FC},children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:BC},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:a.gaji_pokok>0?_C(a.gaji_pokok):"",onChange:e=>v("gaji_pokok",e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-3 text-lg font-semibold text-right rounded-lg",style:{backgroundColor:DC,border:"1px solid ".concat(TC),color:RC}})]})]}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:RC},children:"Tunjangan"}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:BC},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:a.tunjangan>0?_C(a.tunjangan):"",onChange:e=>v("tunjangan",e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-2.5 text-right rounded-lg",style:{backgroundColor:DC,border:"1px solid ".concat(TC),color:RC}})]}),(0,Fe.jsx)("p",{className:"text-xs mt-1",style:{color:BC},children:"Tunjangan makan, transport, dll"})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:RC},children:"Potongan"}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:BC},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:a.potongan>0?_C(a.potongan):"",onChange:e=>v("potongan",e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-2.5 text-right rounded-lg",style:{backgroundColor:DC,border:"1px solid ".concat(TC),color:RC}})]}),(0,Fe.jsx)("p",{className:"text-xs mt-1",style:{color:BC},children:"Kasbon, BPJS, atau potongan lain"})]})]}),(0,Fe.jsxs)(hc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-xl p-4",style:{backgroundColor:"#FAF5FF"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:PC},children:"Perhitungan"}),(0,Fe.jsxs)("div",{className:"space-y-2",children:[(0,Fe.jsxs)("div",{className:"flex justify-between py-1",style:{borderBottom:"1px solid ".concat(PC,"20")},children:[(0,Fe.jsx)("span",{style:{color:BC},children:"Gaji Pokok"}),(0,Fe.jsxs)("span",{style:{color:RC},children:["Rp ",_C(a.gaji_pokok)]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between py-1",style:{borderBottom:"1px solid ".concat(PC,"20")},children:[(0,Fe.jsx)("span",{style:{color:BC},children:"+ Tunjangan"}),(0,Fe.jsxs)("span",{style:{color:OC},children:["Rp ",_C(a.tunjangan)]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between py-1",style:{borderBottom:"1px solid ".concat(PC,"20")},children:[(0,Fe.jsx)("span",{style:{color:BC},children:"- Potongan"}),(0,Fe.jsxs)("span",{style:{color:FC},children:["Rp ",_C(a.potongan)]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between py-2 mt-2",children:[(0,Fe.jsx)("span",{className:"font-medium",style:{color:RC},children:"Total Hutang Gaji"}),(0,Fe.jsxs)("span",{className:"font-bold text-xl",style:{color:PC},children:["Rp ",_C(x)]})]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:DC,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:PC},children:"Jatuh Tempo"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:RC},children:"Tanggal Jatuh Tempo"}),(0,Fe.jsx)("input",{type:"date",value:a.tanggal_jatuh_tempo,onChange:e=>y("tanggal_jatuh_tempo",e.target.value),className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:DC,border:"1px solid ".concat(TC),color:RC}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:RC},children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:a.keterangan||"",onChange:e=>y("keterangan",e.target.value),placeholder:"Opsional - catatan tambahan",rows:2,className:"w-full px-3 py-2.5 rounded-lg resize-none",style:{backgroundColor:DC,border:"1px solid ".concat(TC),color:RC}})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4 flex items-start gap-3",style:{backgroundColor:AC},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:SC},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:DC},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:SC},children:"Catatan SAK EMKM"}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:EC},children:"Hutang Gaji dicatat sebagai Kewajiban Jangka Pendek (2105). Saat gaji dibayar, akan mengurangi Kas dan menghapus hutang ini."})]})]}),(0,Fe.jsx)("div",{className:"h-24"})]}),(0,Fe.jsxs)("div",{className:"p-4 border-t flex gap-3",style:{backgroundColor:DC,borderColor:TC},children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3.5 rounded-xl font-medium",style:{backgroundColor:MC,color:BC},children:"Batal"}),(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:async()=>{if(!b)return a.nama_karyawan.trim()?a.gaji_pokok<=0?d("Masukkan gaji pokok"):x<=0&&d("Total hutang harus lebih dari 0"):d("Masukkan nama karyawan"),f(!0),void setTimeout(()=>f(!1),500);l(!0),d(null);try{var e;const t=localStorage.getItem("access_token"),n=localStorage.getItem("tenant_id")||"evlogia",r={transaction_type:"hutang_gaji",kategori_beban:"beban_gaji",pihak_type:"karyawan",nama_pihak:a.nama_karyawan.trim(),nominal:x,total_amount:x,gaji_pokok:a.gaji_pokok,tunjangan:a.tunjangan,potongan:a.potongan,periode_gaji:a.periode_gaji,jatuh_tempo:a.tanggal_jatuh_tempo,keterangan:(null===(e=a.keterangan)||void 0===e?void 0:e.trim())||"Hutang gaji ".concat(a.nama_karyawan," - ").concat(a.periode_gaji),status_pembayaran:"belum_lunas"},i=await fetch("/api/tenant/".concat(n,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Hutang Gaji",session_id:"hutang-gaji-".concat(Date.now()),conversation_context:JSON.stringify({form_data:r})})});if(401===i.status)return void d("Sesi berakhir. Silakan login ulang.");if(!i.ok){const e=await i.json();throw new Error(e.detail||e.message||"Gagal menyimpan transaksi")}const s=await i.json(),l={success:!0,message:s.message||"Hutang Gaji berhasil dicatat",transaction_id:s.transaction_id||"",nama_karyawan:a.nama_karyawan,total_hutang:x,tanggal_jatuh_tempo:a.tanggal_jatuh_tempo};h(l),setTimeout(()=>{o(l)},1500)}catch(t){d(t.message||"Gagal menyimpan. Coba lagi."),console.error("[HutangGajiForm] Submit error:",t)}finally{l(!1)}},disabled:s||!b,className:"flex-1 py-3.5 rounded-xl font-semibold disabled:opacity-50",style:{backgroundColor:PC,color:DC},children:s?"Menyimpan...":"Simpan Hutang Gaji"})]})]}):null},WC={nama_pelanggan:"",nominal:0,tanggal_transaksi:(new Date).toISOString().split("T")[0],jatuh_tempo:new Date(Date.now()+2592e6).toISOString().split("T")[0]},VC=e=>new Intl.NumberFormat("id-ID").format(e),UC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;const t=new Date;return t.setDate(t.getDate()+e),t.toISOString().split("T")[0]},HC="#737373",GC="#D4D4D4",XC="#E5E5E5",KC="#F5F5F5",YC="#FFFFFF",qC="#262626",ZC="#22C55E",JC="#EF4444",QC={x:[0,-10,10,-10,10,0],transition:{duration:.4}},$C=e=>{let{isOpen:n,onClose:r,onSuccess:o,editData:a}=e;const[i,s]=(0,t.useState)(WC),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),g=(0,t.useRef)(null);(0,t.useEffect)(()=>{n&&(s(a||qe(qe({},WC),{},{tanggal_transaksi:(new Date).toISOString().split("T")[0],jatuh_tempo:UC(30)})),u(null),p(null),m(!1),setTimeout(()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()},100))},[n,a]);const x=(e,t)=>{s(n=>qe(qe({},n),{},{[e]:t})),u(null)},y=e=>{const t=(e=>parseInt(e.replace(/\D/g,""),10)||0)(e);x("nominal",t)},v=i.nama_pelanggan.trim()&&i.nominal>0;return n?h?(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:YC},children:(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Fe.jsxs)(hc.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:15},className:"text-center px-6",children:[(0,Fe.jsx)(hc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",damping:10},className:"w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"#DCFCE7"},children:(0,Fe.jsx)(hc.svg,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.4,duration:.5},className:"w-12 h-12",style:{color:ZC},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)(hc.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)("h2",{className:"text-xl font-bold mb-2",style:{color:qC},children:"Piutang Usaha Dicatat"}),(0,Fe.jsx)("p",{className:"text-lg mb-2",style:{color:HC},children:h.nama_pelanggan}),(0,Fe.jsxs)("p",{className:"text-2xl font-bold mb-2",style:{color:ZC},children:["Rp ",VC(h.nominal)]}),(0,Fe.jsxs)("p",{className:"text-sm",style:{color:HC},children:["Jatuh tempo: ",new Date(h.jatuh_tempo).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]})]})})}):(0,Fe.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:KC},children:[(0,Fe.jsxs)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:YC,borderColor:XC},children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:GC},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:qC},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsxs)("div",{className:"ml-2",children:[(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:qC},children:a?"Edit Piutang Usaha":"Piutang Usaha"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:HC},children:"SAK EMKM 1104"})]})]}),(0,Fe.jsxs)(hc.div,{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",animate:f?QC:{},children:[(0,Fe.jsx)(ct,{children:d&&(0,Fe.jsx)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 rounded-xl text-sm",style:{backgroundColor:"#FEE2E2",color:JC},children:d})}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:YC,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:ZC},children:"Data Pelanggan"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:qC},children:["Nama Pelanggan ",(0,Fe.jsx)("span",{style:{color:JC},children:"*"})]}),(0,Fe.jsx)("input",{ref:g,type:"text",value:i.nama_pelanggan,onChange:e=>x("nama_pelanggan",e.target.value),placeholder:"Contoh: Toko Maju, Bu Siti",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:YC,border:"1px solid ".concat(XC),color:qC}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:qC},children:"No. Telepon/WA"}),(0,Fe.jsx)("input",{type:"tel",value:i.kontak_pelanggan||"",onChange:e=>x("kontak_pelanggan",e.target.value),placeholder:"08xxxxxxxxxx",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:YC,border:"1px solid ".concat(XC),color:qC}})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:YC,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:ZC},children:"Nominal Piutang"}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:qC},children:["Jumlah ",(0,Fe.jsx)("span",{style:{color:JC},children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:HC},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:i.nominal>0?VC(i.nominal):"",onChange:e=>y(e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-3 text-lg font-semibold text-right rounded-lg",style:{backgroundColor:YC,border:"1px solid ".concat(XC),color:qC}})]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:YC,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:ZC},children:"Tanggal"}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:qC},children:"Tanggal Transaksi"}),(0,Fe.jsx)("input",{type:"date",value:i.tanggal_transaksi,onChange:e=>x("tanggal_transaksi",e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:YC,border:"1px solid ".concat(XC),color:qC}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:qC},children:"Jatuh Tempo"}),(0,Fe.jsx)("input",{type:"date",value:i.jatuh_tempo,onChange:e=>x("jatuh_tempo",e.target.value),className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:YC,border:"1px solid ".concat(XC),color:qC}})]})]}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:qC},children:"No. Invoice/Referensi"}),(0,Fe.jsx)("input",{type:"text",value:i.referensi_transaksi||"",onChange:e=>x("referensi_transaksi",e.target.value),placeholder:"Contoh: INV-001",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:YC,border:"1px solid ".concat(XC),color:qC}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:qC},children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:i.keterangan||"",onChange:e=>x("keterangan",e.target.value),placeholder:"Catatan tambahan...",rows:2,className:"w-full px-3 py-2.5 rounded-lg resize-none",style:{backgroundColor:YC,border:"1px solid ".concat(XC),color:qC}})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4 flex items-start gap-3",style:{backgroundColor:"#DCFCE7"},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:ZC},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:YC},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:"#166534"},children:"Dicatat sebagai Piutang Usaha"}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:"#166534"},children:"Piutang usaha akan menambah aset lancar di neraca. Saat pelanggan membayar, piutang ini akan berkurang dan kas bertambah."})]})]}),(0,Fe.jsx)("div",{className:"h-24"})]}),(0,Fe.jsxs)("div",{className:"p-4 border-t flex gap-3",style:{backgroundColor:YC,borderColor:XC},children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3.5 rounded-xl font-medium",style:{backgroundColor:KC,color:HC},children:"Batal"}),(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:async()=>{if(!v)return i.nama_pelanggan.trim()?i.nominal<=0&&u("Masukkan nominal piutang"):u("Masukkan nama pelanggan"),m(!0),void setTimeout(()=>m(!1),500);c(!0),u(null);try{var e,t,n;const r=localStorage.getItem("access_token"),a=localStorage.getItem("tenant_id")||"evlogia",s={transaction_type:"piutang_usaha",pihak_type:"pelanggan",nama_pihak:i.nama_pelanggan.trim(),kontak_pihak:(null===(e=i.kontak_pelanggan)||void 0===e?void 0:e.trim())||null,nominal:i.nominal,total_amount:i.nominal,tanggal_transaksi:i.tanggal_transaksi,jatuh_tempo:i.jatuh_tempo,referensi_transaksi:(null===(t=i.referensi_transaksi)||void 0===t?void 0:t.trim())||null,keterangan:(null===(n=i.keterangan)||void 0===n?void 0:n.trim())||"Piutang dari ".concat(i.nama_pelanggan),status_pembayaran:"belum_lunas"},l=await fetch("/api/tenant/".concat(a,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Piutang Usaha",session_id:"piutang-usaha-".concat(Date.now()),conversation_context:JSON.stringify({form_data:s})})});if(401===l.status)return void u("Sesi berakhir. Silakan login ulang.");if(!l.ok){const e=await l.json();throw new Error(e.detail||e.message||"Gagal menyimpan piutang")}const c=await l.json(),d={success:!0,message:c.message||"Piutang usaha berhasil dicatat",transaction_id:c.transaction_id||"",nama_pelanggan:i.nama_pelanggan,nominal:i.nominal,jatuh_tempo:i.jatuh_tempo};p(d),setTimeout(()=>{o(d)},1500)}catch(r){u(r.message||"Gagal menyimpan. Coba lagi."),console.error("[PiutangUsahaForm] Submit error:",r)}finally{c(!1)}},disabled:l||!v,className:"flex-1 py-3.5 rounded-xl font-semibold disabled:opacity-50",style:{backgroundColor:ZC,color:YC},children:l?"Menyimpan...":a?"Simpan Perubahan":"Simpan Piutang"})]})]}):null},ej={nama_supplier:"",nominal:0,tanggal_transaksi:(new Date).toISOString().split("T")[0],jatuh_tempo:new Date(Date.now()+2592e6).toISOString().split("T")[0]},tj=e=>new Intl.NumberFormat("id-ID").format(e),nj=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;const t=new Date;return t.setDate(t.getDate()+e),t.toISOString().split("T")[0]},rj="#737373",oj="#D4D4D4",aj="#E5E5E5",ij="#F5F5F5",sj="#FFFFFF",lj="#262626",cj="#22C55E",dj="#EF4444",uj={x:[0,-10,10,-10,10,0],transition:{duration:.4}},hj=e=>{let{isOpen:n,onClose:r,onSuccess:o,editData:a}=e;const[i,s]=(0,t.useState)(ej),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),g=(0,t.useRef)(null);(0,t.useEffect)(()=>{n&&(s(a||qe(qe({},ej),{},{tanggal_transaksi:(new Date).toISOString().split("T")[0],jatuh_tempo:nj(30)})),u(null),p(null),m(!1),setTimeout(()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()},100))},[n,a]);const x=(e,t)=>{s(n=>qe(qe({},n),{},{[e]:t})),u(null)},y=e=>{const t=(e=>parseInt(e.replace(/\D/g,""),10)||0)(e);x("nominal",t)},v=i.nama_supplier.trim()&&i.nominal>0;return n?h?(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:sj},children:(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Fe.jsxs)(hc.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:15},className:"text-center px-6",children:[(0,Fe.jsx)(hc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",damping:10},className:"w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"#DCFCE7"},children:(0,Fe.jsx)(hc.svg,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.4,duration:.5},className:"w-12 h-12",style:{color:cj},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)(hc.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)("h2",{className:"text-xl font-bold mb-2",style:{color:lj},children:"Hutang Usaha Dicatat"}),(0,Fe.jsx)("p",{className:"text-lg mb-2",style:{color:rj},children:h.nama_supplier}),(0,Fe.jsxs)("p",{className:"text-2xl font-bold mb-2",style:{color:dj},children:["Rp ",tj(h.nominal)]}),(0,Fe.jsxs)("p",{className:"text-sm",style:{color:rj},children:["Jatuh tempo: ",new Date(h.jatuh_tempo).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]})]})})}):(0,Fe.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:ij},children:[(0,Fe.jsxs)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:sj,borderColor:aj},children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:oj},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:lj},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsxs)("div",{className:"ml-2",children:[(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:lj},children:a?"Edit Hutang Usaha":"Hutang Usaha"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:rj},children:"SAK EMKM 2101"})]})]}),(0,Fe.jsxs)(hc.div,{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",animate:f?uj:{},children:[(0,Fe.jsx)(ct,{children:d&&(0,Fe.jsx)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 rounded-xl text-sm",style:{backgroundColor:"#FEE2E2",color:dj},children:d})}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:sj,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:dj},children:"Data Supplier"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:lj},children:["Nama Supplier ",(0,Fe.jsx)("span",{style:{color:dj},children:"*"})]}),(0,Fe.jsx)("input",{ref:g,type:"text",value:i.nama_supplier,onChange:e=>x("nama_supplier",e.target.value),placeholder:"Contoh: PT ABC, Distributor Utama",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:sj,border:"1px solid ".concat(aj),color:lj}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:lj},children:"No. Telepon/WA"}),(0,Fe.jsx)("input",{type:"tel",value:i.kontak_supplier||"",onChange:e=>x("kontak_supplier",e.target.value),placeholder:"08xxxxxxxxxx",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:sj,border:"1px solid ".concat(aj),color:lj}})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:sj,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:dj},children:"Nominal Hutang"}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:lj},children:["Jumlah ",(0,Fe.jsx)("span",{style:{color:dj},children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:rj},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:i.nominal>0?tj(i.nominal):"",onChange:e=>y(e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-3 text-lg font-semibold text-right rounded-lg",style:{backgroundColor:sj,border:"1px solid ".concat(aj),color:lj}})]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:sj,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:dj},children:"Tanggal"}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:lj},children:"Tanggal Transaksi"}),(0,Fe.jsx)("input",{type:"date",value:i.tanggal_transaksi,onChange:e=>x("tanggal_transaksi",e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:sj,border:"1px solid ".concat(aj),color:lj}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:lj},children:"Jatuh Tempo"}),(0,Fe.jsx)("input",{type:"date",value:i.jatuh_tempo,onChange:e=>x("jatuh_tempo",e.target.value),className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:sj,border:"1px solid ".concat(aj),color:lj}})]})]}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:lj},children:"No. Faktur Supplier"}),(0,Fe.jsx)("input",{type:"text",value:i.nomor_faktur||"",onChange:e=>x("nomor_faktur",e.target.value),placeholder:"Contoh: FKT-001",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:sj,border:"1px solid ".concat(aj),color:lj}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:lj},children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:i.keterangan||"",onChange:e=>x("keterangan",e.target.value),placeholder:"Catatan tambahan...",rows:2,className:"w-full px-3 py-2.5 rounded-lg resize-none",style:{backgroundColor:sj,border:"1px solid ".concat(aj),color:lj}})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4 flex items-start gap-3",style:{backgroundColor:"#FEE2E2"},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:dj},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:sj},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:"#991B1B"},children:"Dicatat sebagai Hutang Usaha"}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:"#991B1B"},children:"Hutang usaha akan menambah kewajiban di neraca. Saat Anda membayar ke supplier, hutang ini akan berkurang dan kas berkurang."})]})]}),(0,Fe.jsx)("div",{className:"h-24"})]}),(0,Fe.jsxs)("div",{className:"p-4 border-t flex gap-3",style:{backgroundColor:sj,borderColor:aj},children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3.5 rounded-xl font-medium",style:{backgroundColor:ij,color:rj},children:"Batal"}),(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:async()=>{if(!v)return i.nama_supplier.trim()?i.nominal<=0&&u("Masukkan nominal hutang"):u("Masukkan nama supplier"),m(!0),void setTimeout(()=>m(!1),500);c(!0),u(null);try{var e,t,n;const r=localStorage.getItem("access_token"),a=localStorage.getItem("tenant_id")||"evlogia",s={transaction_type:"hutang_usaha",pihak_type:"supplier",nama_pihak:i.nama_supplier.trim(),kontak_pihak:(null===(e=i.kontak_supplier)||void 0===e?void 0:e.trim())||null,nominal:i.nominal,total_amount:i.nominal,tanggal_transaksi:i.tanggal_transaksi,jatuh_tempo:i.jatuh_tempo,nomor_faktur:(null===(t=i.nomor_faktur)||void 0===t?void 0:t.trim())||null,keterangan:(null===(n=i.keterangan)||void 0===n?void 0:n.trim())||"Hutang ke ".concat(i.nama_supplier),status_pembayaran:"belum_lunas"},l=await fetch("/api/tenant/".concat(a,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Hutang Usaha",session_id:"hutang-usaha-".concat(Date.now()),conversation_context:JSON.stringify({form_data:s})})});if(401===l.status)return void u("Sesi berakhir. Silakan login ulang.");if(!l.ok){const e=await l.json();throw new Error(e.detail||e.message||"Gagal menyimpan hutang")}const c=await l.json(),d={success:!0,message:c.message||"Hutang usaha berhasil dicatat",transaction_id:c.transaction_id||"",nama_supplier:i.nama_supplier,nominal:i.nominal,jatuh_tempo:i.jatuh_tempo};p(d),setTimeout(()=>{o(d)},1500)}catch(r){u(r.message||"Gagal menyimpan. Coba lagi."),console.error("[HutangUsahaForm] Submit error:",r)}finally{c(!1)}},disabled:l||!v,className:"flex-1 py-3.5 rounded-xl font-semibold disabled:opacity-50",style:{backgroundColor:dj,color:sj},children:l?"Menyimpan...":a?"Simpan Perubahan":"Simpan Hutang"})]})]}):null},pj={tipe:"pembelian",nama_supplier:"",nominal_dp:0,tanggal_dp:(new Date).toISOString().split("T")[0]},fj={tipe:"pelanggan",nama_pelanggan:"",nominal_dp:0,tanggal_dp:(new Date).toISOString().split("T")[0]},mj=e=>new Intl.NumberFormat("id-ID").format(e),gj=e=>parseInt(e.replace(/\D/g,""),10)||0,xj="#3B82F6",yj="#737373",vj="#D4D4D4",bj="#E5E5E5",wj="#F5F5F5",kj="#FFFFFF",Cj="#262626",jj="#EF4444",_j={x:[0,-10,10,-10,10,0],transition:{duration:.4}},Nj=e=>{let{isOpen:n,onClose:r,onSuccess:o,editData:a}=e;const[i,s]=(0,t.useState)(pj),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),g=(0,t.useRef)(null);(0,t.useEffect)(()=>{n&&(s(a||qe(qe({},pj),{},{tanggal_dp:(new Date).toISOString().split("T")[0]})),u(null),p(null),m(!1),setTimeout(()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()},100))},[n,a]);const x=(e,t)=>{s(n=>qe(qe({},n),{},{[e]:t})),u(null)},y=i.nama_supplier.trim()&&i.nominal_dp>0;return n?h?(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:kj},children:(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Fe.jsxs)(hc.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:15},className:"text-center px-6",children:[(0,Fe.jsx)(hc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",damping:10},className:"w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"#DBEAFE"},children:(0,Fe.jsx)(hc.svg,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.4,duration:.5},className:"w-12 h-12",style:{color:xj},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)(hc.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)("h2",{className:"text-xl font-bold mb-2",style:{color:Cj},children:"DP ke Supplier Dicatat"}),(0,Fe.jsx)("p",{className:"text-lg mb-2",style:{color:yj},children:h.nama_pihak}),(0,Fe.jsxs)("p",{className:"text-2xl font-bold",style:{color:xj},children:["Rp ",mj(h.nominal)]})]})})}):(0,Fe.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:wj},children:[(0,Fe.jsxs)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:kj,borderColor:bj},children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:vj},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:Cj},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsxs)("div",{className:"ml-2",children:[(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:Cj},children:"Uang Muka Pembelian"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:yj},children:"SAK EMKM 1106 \u2022 Aset"})]})]}),(0,Fe.jsxs)(hc.div,{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",animate:f?_j:{},children:[(0,Fe.jsx)(ct,{children:d&&(0,Fe.jsx)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 rounded-xl text-sm",style:{backgroundColor:"#FEE2E2",color:jj},children:d})}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:kj,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:xj},children:"Data Supplier"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:Cj},children:["Nama Supplier ",(0,Fe.jsx)("span",{style:{color:jj},children:"*"})]}),(0,Fe.jsx)("input",{ref:g,type:"text",value:i.nama_supplier,onChange:e=>x("nama_supplier",e.target.value),placeholder:"Contoh: PT ABC, Distributor Utama",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:kj,border:"1px solid ".concat(bj),color:Cj}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Cj},children:"No. Telepon/WA"}),(0,Fe.jsx)("input",{type:"tel",value:i.kontak_supplier||"",onChange:e=>x("kontak_supplier",e.target.value),placeholder:"08xxxxxxxxxx",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:kj,border:"1px solid ".concat(bj),color:Cj}})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:kj,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:xj},children:"Nominal DP"}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:Cj},children:["Jumlah ",(0,Fe.jsx)("span",{style:{color:jj},children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:yj},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:i.nominal_dp>0?mj(i.nominal_dp):"",onChange:e=>(e=>{const t=gj(e);x("nominal_dp",t)})(e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-3 text-lg font-semibold text-right rounded-lg",style:{backgroundColor:kj,border:"1px solid ".concat(bj),color:Cj}})]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:kj,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:xj},children:"Detail"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Cj},children:"Tanggal DP"}),(0,Fe.jsx)("input",{type:"date",value:i.tanggal_dp,onChange:e=>x("tanggal_dp",e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:kj,border:"1px solid ".concat(bj),color:Cj}})]}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Cj},children:"Tujuan Pembelian"}),(0,Fe.jsx)("input",{type:"text",value:i.tujuan_pembelian||"",onChange:e=>x("tujuan_pembelian",e.target.value),placeholder:"Contoh: Stok minyak goreng",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:kj,border:"1px solid ".concat(bj),color:Cj}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Cj},children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:i.keterangan||"",onChange:e=>x("keterangan",e.target.value),placeholder:"Catatan tambahan...",rows:2,className:"w-full px-3 py-2.5 rounded-lg resize-none",style:{backgroundColor:kj,border:"1px solid ".concat(bj),color:Cj}})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4 flex items-start gap-3",style:{backgroundColor:"#DBEAFE"},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:xj},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:kj},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:"#1E40AF"},children:"Dicatat sebagai Aset"}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:"#1E40AF"},children:"Uang muka pembelian adalah DP yang dibayar ke supplier sebelum barang diterima. Saat barang diterima, uang muka ini akan dipotong dari hutang usaha."})]})]}),(0,Fe.jsx)("div",{className:"h-24"})]}),(0,Fe.jsxs)("div",{className:"p-4 border-t flex gap-3",style:{backgroundColor:kj,borderColor:bj},children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3.5 rounded-xl font-medium",style:{backgroundColor:wj,color:yj},children:"Batal"}),(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:async()=>{if(!y)return i.nama_supplier.trim()?i.nominal_dp<=0&&u("Masukkan nominal DP"):u("Masukkan nama supplier"),m(!0),void setTimeout(()=>m(!1),500);c(!0),u(null);try{var e,t,n;const r=localStorage.getItem("access_token"),a=localStorage.getItem("tenant_id")||"evlogia",s={transaction_type:"uang_muka_pembelian",pihak_type:"supplier",nama_pihak:i.nama_supplier.trim(),kontak_pihak:(null===(e=i.kontak_supplier)||void 0===e?void 0:e.trim())||null,nominal:i.nominal_dp,total_amount:i.nominal_dp,tanggal_dp:i.tanggal_dp,tujuan_pembelian:(null===(t=i.tujuan_pembelian)||void 0===t?void 0:t.trim())||null,keterangan:(null===(n=i.keterangan)||void 0===n?void 0:n.trim())||"DP ke ".concat(i.nama_supplier)},l=await fetch("/api/tenant/".concat(a,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Uang Muka Pembelian",session_id:"uang-muka-pembelian-".concat(Date.now()),conversation_context:JSON.stringify({form_data:s})})});if(401===l.status)return void u("Sesi berakhir. Silakan login ulang.");if(!l.ok){const e=await l.json();throw new Error(e.detail||e.message||"Gagal menyimpan uang muka")}const c=await l.json(),d={success:!0,message:c.message||"Uang muka pembelian berhasil dicatat",transaction_id:c.transaction_id||"",tipe:"pembelian",nama_pihak:i.nama_supplier,nominal:i.nominal_dp};p(d),setTimeout(()=>{o(d)},1500)}catch(r){u(r.message||"Gagal menyimpan. Coba lagi."),console.error("[UangMukaPembelianForm] Submit error:",r)}finally{c(!1)}},disabled:l||!y,className:"flex-1 py-3.5 rounded-xl font-semibold disabled:opacity-50",style:{backgroundColor:xj,color:kj},children:l?"Menyimpan...":"Simpan DP Supplier"})]})]}):null},Sj="#A855F7",Ej="#737373",Aj="#D4D4D4",Pj="#E5E5E5",Bj="#F5F5F5",Ij="#FFFFFF",Tj="#262626",Mj="#EF4444",Dj={x:[0,-10,10,-10,10,0],transition:{duration:.4}},Rj=e=>{let{isOpen:n,onClose:r,onSuccess:o,editData:a}=e;const[i,s]=(0,t.useState)(fj),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),g=(0,t.useRef)(null);(0,t.useEffect)(()=>{n&&(s(a||qe(qe({},fj),{},{tanggal_dp:(new Date).toISOString().split("T")[0]})),u(null),p(null),m(!1),setTimeout(()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()},100))},[n,a]);const x=(e,t)=>{s(n=>qe(qe({},n),{},{[e]:t})),u(null)},y=i.nama_pelanggan.trim()&&i.nominal_dp>0;return n?h?(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:Ij},children:(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Fe.jsxs)(hc.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:15},className:"text-center px-6",children:[(0,Fe.jsx)(hc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",damping:10},className:"w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"#F3E8FF"},children:(0,Fe.jsx)(hc.svg,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.4,duration:.5},className:"w-12 h-12",style:{color:Sj},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)(hc.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)("h2",{className:"text-xl font-bold mb-2",style:{color:Tj},children:"DP dari Pelanggan Dicatat"}),(0,Fe.jsx)("p",{className:"text-lg mb-2",style:{color:Ej},children:h.nama_pihak}),(0,Fe.jsxs)("p",{className:"text-2xl font-bold",style:{color:Sj},children:["Rp ",mj(h.nominal)]})]})})}):(0,Fe.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:Bj},children:[(0,Fe.jsxs)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:Ij,borderColor:Pj},children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Aj},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:Tj},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsxs)("div",{className:"ml-2",children:[(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:Tj},children:"Uang Muka dari Pelanggan"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:Ej},children:"SAK EMKM 2103 \u2022 Kewajiban"})]})]}),(0,Fe.jsxs)(hc.div,{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",animate:f?Dj:{},children:[(0,Fe.jsx)(ct,{children:d&&(0,Fe.jsx)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 rounded-xl text-sm",style:{backgroundColor:"#FEE2E2",color:Mj},children:d})}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:Ij,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:Sj},children:"Data Pelanggan"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:Tj},children:["Nama Pelanggan ",(0,Fe.jsx)("span",{style:{color:Mj},children:"*"})]}),(0,Fe.jsx)("input",{ref:g,type:"text",value:i.nama_pelanggan,onChange:e=>x("nama_pelanggan",e.target.value),placeholder:"Contoh: Toko Maju, Bu Siti",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Ij,border:"1px solid ".concat(Pj),color:Tj}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Tj},children:"No. Telepon/WA"}),(0,Fe.jsx)("input",{type:"tel",value:i.kontak_pelanggan||"",onChange:e=>x("kontak_pelanggan",e.target.value),placeholder:"08xxxxxxxxxx",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Ij,border:"1px solid ".concat(Pj),color:Tj}})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:Ij,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:Sj},children:"Nominal DP"}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:Tj},children:["Jumlah ",(0,Fe.jsx)("span",{style:{color:Mj},children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:Ej},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:i.nominal_dp>0?mj(i.nominal_dp):"",onChange:e=>(e=>{const t=gj(e);x("nominal_dp",t)})(e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-3 text-lg font-semibold text-right rounded-lg",style:{backgroundColor:Ij,border:"1px solid ".concat(Pj),color:Tj}})]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:Ij,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:Sj},children:"Detail"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Tj},children:"Tanggal DP"}),(0,Fe.jsx)("input",{type:"date",value:i.tanggal_dp,onChange:e=>x("tanggal_dp",e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Ij,border:"1px solid ".concat(Pj),color:Tj}})]}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Tj},children:"Barang/Jasa yang Dipesan"}),(0,Fe.jsx)("input",{type:"text",value:i.barang_pesanan||"",onChange:e=>x("barang_pesanan",e.target.value),placeholder:"Contoh: 10 dus minyak goreng",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Ij,border:"1px solid ".concat(Pj),color:Tj}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Tj},children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:i.keterangan||"",onChange:e=>x("keterangan",e.target.value),placeholder:"Catatan tambahan...",rows:2,className:"w-full px-3 py-2.5 rounded-lg resize-none",style:{backgroundColor:Ij,border:"1px solid ".concat(Pj),color:Tj}})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4 flex items-start gap-3",style:{backgroundColor:"#F3E8FF"},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Sj},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:Ij},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:"#6B21A8"},children:"Dicatat sebagai Kewajiban"}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:"#6B21A8"},children:"Uang muka dari pelanggan adalah DP yang diterima sebelum barang dikirim. Ini menambah kas tetapi juga menambah kewajiban. Saat barang dikirim, kewajiban ini berubah menjadi pendapatan."})]})]}),(0,Fe.jsx)("div",{className:"h-24"})]}),(0,Fe.jsxs)("div",{className:"p-4 border-t flex gap-3",style:{backgroundColor:Ij,borderColor:Pj},children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3.5 rounded-xl font-medium",style:{backgroundColor:Bj,color:Ej},children:"Batal"}),(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:async()=>{if(!y)return i.nama_pelanggan.trim()?i.nominal_dp<=0&&u("Masukkan nominal DP"):u("Masukkan nama pelanggan"),m(!0),void setTimeout(()=>m(!1),500);c(!0),u(null);try{var e,t,n;const r=localStorage.getItem("access_token"),a=localStorage.getItem("tenant_id")||"evlogia",s={transaction_type:"uang_muka_pelanggan",pihak_type:"pelanggan",nama_pihak:i.nama_pelanggan.trim(),kontak_pihak:(null===(e=i.kontak_pelanggan)||void 0===e?void 0:e.trim())||null,nominal:i.nominal_dp,total_amount:i.nominal_dp,tanggal_dp:i.tanggal_dp,barang_pesanan:(null===(t=i.barang_pesanan)||void 0===t?void 0:t.trim())||null,keterangan:(null===(n=i.keterangan)||void 0===n?void 0:n.trim())||"DP dari ".concat(i.nama_pelanggan)},l=await fetch("/api/tenant/".concat(a,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Uang Muka Pelanggan",session_id:"uang-muka-pelanggan-".concat(Date.now()),conversation_context:JSON.stringify({form_data:s})})});if(401===l.status)return void u("Sesi berakhir. Silakan login ulang.");if(!l.ok){const e=await l.json();throw new Error(e.detail||e.message||"Gagal menyimpan uang muka")}const c=await l.json(),d={success:!0,message:c.message||"Uang muka dari pelanggan berhasil dicatat",transaction_id:c.transaction_id||"",tipe:"pelanggan",nama_pihak:i.nama_pelanggan,nominal:i.nominal_dp};p(d),setTimeout(()=>{o(d)},1500)}catch(r){u(r.message||"Gagal menyimpan. Coba lagi."),console.error("[UangMukaPelangganForm] Submit error:",r)}finally{c(!1)}},disabled:l||!y,className:"flex-1 py-3.5 rounded-xl font-semibold disabled:opacity-50",style:{backgroundColor:Sj,color:Ij},children:l?"Menyimpan...":"Simpan DP Pelanggan"})]})]}):null},Oj=[{id:"ppn",label:"PPN",description:"Pajak Pertambahan Nilai"},{id:"pph21",label:"PPh 21",description:"Pajak Penghasilan Pasal 21 (Gaji)"},{id:"pph23",label:"PPh 23",description:"Pajak Penghasilan Pasal 23 (Jasa)"},{id:"pph_final",label:"PPh Final",description:"PPh Final UMKM 0.5%"},{id:"lainnya",label:"Lainnya",description:"Jenis pajak lainnya"}],Fj={jenis_pajak:"ppn",masa_pajak:"",nominal:0,tanggal_terutang:(new Date).toISOString().split("T")[0],jatuh_tempo:new Date(Date.now()+2592e6).toISOString().split("T")[0]},Lj=e=>new Intl.NumberFormat("id-ID").format(e),zj=e=>{const t=new Date;return t.setMonth(t.getMonth()+1),t.setDate(15),t.toISOString().split("T")[0]},Wj=e=>{const t=Oj.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.label)||e},Vj="#737373",Uj="#D4D4D4",Hj="#E5E5E5",Gj="#F5F5F5",Xj="#FFFFFF",Kj="#262626",Yj="#22C55E",qj="#EF4444",Zj={x:[0,-10,10,-10,10,0],transition:{duration:.4}},Jj=e=>{let{isOpen:n,onClose:r,onSuccess:o,editData:a}=e;const[i,s]=(0,t.useState)(Fj),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(!1),g=(0,t.useMemo)(()=>(()=>{const e=[],t=new Date,n=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];for(let r=0;r<12;r++){const o=new Date(t.getFullYear(),t.getMonth()-r,1),a=n[o.getMonth()],i=o.getFullYear();e.push("".concat(a," ").concat(i))}return e})(),[]);(0,t.useEffect)(()=>{n&&(s(a||qe(qe({},Fj),{},{masa_pajak:g[0]||"",tanggal_terutang:(new Date).toISOString().split("T")[0],jatuh_tempo:zj()})),u(null),p(null),m(!1))},[n,a,g]),(0,t.useEffect)(()=>{a||s(e=>qe(qe({},e),{},{jatuh_tempo:zj(e.jenis_pajak)}))},[i.jenis_pajak,a]);const x=(e,t)=>{s(n=>qe(qe({},n),{},{[e]:t})),u(null)},y=e=>{const t=(e=>parseInt(e.replace(/\D/g,""),10)||0)(e);x("nominal",t)},v=i.masa_pajak.trim()&&i.nominal>0;return n?h?(0,Fe.jsx)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:Xj},children:(0,Fe.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Fe.jsxs)(hc.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:15},className:"text-center px-6",children:[(0,Fe.jsx)(hc.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",damping:10},className:"w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"#DCFCE7"},children:(0,Fe.jsx)(hc.svg,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.4,duration:.5},className:"w-12 h-12",style:{color:Yj},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)(hc.path,{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)("h2",{className:"text-xl font-bold mb-2",style:{color:Kj},children:"Hutang Pajak Dicatat"}),(0,Fe.jsx)("p",{className:"text-lg mb-1",style:{color:Vj},children:Wj(h.jenis_pajak)}),(0,Fe.jsx)("p",{className:"text-sm mb-2",style:{color:Vj},children:h.masa_pajak}),(0,Fe.jsxs)("p",{className:"text-2xl font-bold",style:{color:qj},children:["Rp ",Lj(h.nominal)]})]})})}):(0,Fe.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col",style:{backgroundColor:Gj},children:[(0,Fe.jsxs)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:Xj,borderColor:Hj},children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:Uj},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:Kj},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsxs)("div",{className:"ml-2",children:[(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:Kj},children:"Hutang Pajak"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:Vj},children:"SAK EMKM 2104"})]})]}),(0,Fe.jsxs)(hc.div,{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",animate:f?Zj:{},children:[(0,Fe.jsx)(ct,{children:d&&(0,Fe.jsx)(hc.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 rounded-xl text-sm",style:{backgroundColor:"#FEE2E2",color:qj},children:d})}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:Xj,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:qj},children:"Jenis Pajak"}),(0,Fe.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Oj.slice(0,4).map(e=>(0,Fe.jsxs)("button",{type:"button",onClick:()=>x("jenis_pajak",e.id),className:"px-3 py-3 rounded-lg text-left transition-colors",style:{backgroundColor:i.jenis_pajak===e.id?qj:Gj,color:i.jenis_pajak===e.id?Xj:Kj},children:[(0,Fe.jsx)("div",{className:"font-medium text-sm",children:e.label}),(0,Fe.jsx)("div",{className:"text-xs mt-0.5",style:{color:i.jenis_pajak===e.id?"rgba(255,255,255,0.8)":Vj},children:e.description})]},e.id))})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:Xj,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:qj},children:"Periode & Nominal"}),(0,Fe.jsxs)("div",{className:"mb-4",children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:Kj},children:["Masa Pajak ",(0,Fe.jsx)("span",{style:{color:qj},children:"*"})]}),(0,Fe.jsx)("select",{value:i.masa_pajak,onChange:e=>x("masa_pajak",e.target.value),className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Xj,border:"1px solid ".concat(Hj),color:Kj},children:g.map(e=>(0,Fe.jsx)("option",{value:e,children:e},e))})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:Kj},children:["Nominal Pajak ",(0,Fe.jsx)("span",{style:{color:qj},children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:Vj},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:i.nominal>0?Lj(i.nominal):"",onChange:e=>y(e.target.value),placeholder:"0",className:"w-full pl-10 pr-3 py-3 text-lg font-semibold text-right rounded-lg",style:{backgroundColor:Xj,border:"1px solid ".concat(Hj),color:Kj}})]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:Xj,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:qj},children:"Tanggal"}),(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Kj},children:"Tanggal Terutang"}),(0,Fe.jsx)("input",{type:"date",value:i.tanggal_terutang,onChange:e=>x("tanggal_terutang",e.target.value),max:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Xj,border:"1px solid ".concat(Hj),color:Kj}})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Kj},children:"Jatuh Tempo"}),(0,Fe.jsx)("input",{type:"date",value:i.jatuh_tempo,onChange:e=>x("jatuh_tempo",e.target.value),className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:Xj,border:"1px solid ".concat(Hj),color:Kj}})]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:Kj},children:"Keterangan"}),(0,Fe.jsx)("textarea",{value:i.keterangan||"",onChange:e=>x("keterangan",e.target.value),placeholder:"Catatan tambahan...",rows:2,className:"w-full px-3 py-2.5 rounded-lg resize-none",style:{backgroundColor:Xj,border:"1px solid ".concat(Hj),color:Kj}})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4 flex items-start gap-3",style:{backgroundColor:"#FEE2E2"},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:qj},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:Xj},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:"#991B1B"},children:"Penting: Pembayaran Pajak"}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:"#991B1B"},children:"Pastikan pajak dibayar sebelum jatuh tempo untuk menghindari sanksi administrasi dan denda."})]})]}),(0,Fe.jsx)("div",{className:"h-24"})]}),(0,Fe.jsxs)("div",{className:"p-4 border-t flex gap-3",style:{backgroundColor:Xj,borderColor:Hj},children:[(0,Fe.jsx)("button",{onClick:r,className:"flex-1 py-3.5 rounded-xl font-medium",style:{backgroundColor:Gj,color:Vj},children:"Batal"}),(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:async()=>{if(!v)return i.masa_pajak.trim()?i.nominal<=0&&u("Masukkan nominal pajak"):u("Pilih masa pajak"),m(!0),void setTimeout(()=>m(!1),500);c(!0),u(null);try{var e;const t=localStorage.getItem("access_token"),n=localStorage.getItem("tenant_id")||"evlogia",r={transaction_type:"hutang_pajak",jenis_pajak:i.jenis_pajak,masa_pajak:i.masa_pajak,nominal:i.nominal,total_amount:i.nominal,tanggal_terutang:i.tanggal_terutang,jatuh_tempo:i.jatuh_tempo,keterangan:(null===(e=i.keterangan)||void 0===e?void 0:e.trim())||"Hutang ".concat(Wj(i.jenis_pajak)," ").concat(i.masa_pajak),status_pembayaran:"belum_lunas"},a=await fetch("/api/tenant/".concat(n,"/chat"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({message:"[FORM] Hutang Pajak",session_id:"hutang-pajak-".concat(Date.now()),conversation_context:JSON.stringify({form_data:r})})});if(401===a.status)return void u("Sesi berakhir. Silakan login ulang.");if(!a.ok){const e=await a.json();throw new Error(e.detail||e.message||"Gagal menyimpan hutang pajak")}const s=await a.json(),l={success:!0,message:s.message||"Hutang pajak berhasil dicatat",transaction_id:s.transaction_id||"",jenis_pajak:i.jenis_pajak,masa_pajak:i.masa_pajak,nominal:i.nominal};p(l),setTimeout(()=>{o(l)},1500)}catch(t){u(t.message||"Gagal menyimpan. Coba lagi."),console.error("[HutangPajakForm] Submit error:",t)}finally{c(!1)}},disabled:l||!v,className:"flex-1 py-3.5 rounded-xl font-semibold disabled:opacity-50",style:{backgroundColor:qj,color:Xj},children:l?"Menyimpan...":"Simpan Hutang Pajak"})]})]}):null},Qj="#F97316",$j="#FFF7ED",e_="#3B82F6",t_="#A855F7",n_="#737373",r_="#D4D4D4",o_="#E5E5E5",a_="#F5F5F5",i_="#FFFFFF",s_="#262626",l_="#22C55E",c_="#EF4444",d_=e=>{let{isOpen:n,onClose:r,isMobile:o=!1,isEmbedded:a=!1}=e;const[i,s]=(0,t.useState)("piutang"),[l,c]=(0,t.useState)("list"),[d,u]=(0,t.useState)("left"),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)({total_hutang:0,total_piutang:0,hutang_count:0,piutang_count:0,hutang_jatuh_tempo:0,piutang_jatuh_tempo:0}),[g,x]=(0,t.useState)(null),[y,v]=(0,t.useState)(!1),[b,w]=(0,t.useState)(null),[k,C]=(0,t.useState)(""),[j,_]=(0,t.useState)("tunai"),[N,S]=(0,t.useState)(""),[E,A]=(0,t.useState)(!1),[P,B]=(0,t.useState)(!1),[I,T]=(0,t.useState)(!1),[M,D]=(0,t.useState)(!1),[R,O]=(0,t.useState)(!1),[F,L]=(0,t.useState)(!1),[z,W]=(0,t.useState)(!1),V=(0,t.useCallback)(async()=>{v(!0),w(null);try{const e=await Ub("/api/debt/list");if(!e.ok)throw new Error("Gagal memuat data");const t=await e.json();p(t.debts||[]),m(t.summary||f)}catch(e){const t=[{id:"1",transaksi_id:"tx-001",tipe:"piutang",nama_pihak:"Toko Maju",kontak_pihak:"08123456789",nominal_awal:5e5,nominal_dibayar:2e5,sisa:3e5,status:"sebagian",jatuh_tempo:new Date(Date.now()+6048e5).toISOString(),keterangan:"Penjualan kredit",created_at:(new Date).toISOString()},{id:"2",transaksi_id:"tx-002",tipe:"hutang",nama_pihak:"Supplier ABC",kontak_pihak:"08987654321",nominal_awal:2e6,nominal_dibayar:0,sisa:2e6,status:"belum_lunas",jatuh_tempo:new Date(Date.now()-1728e5).toISOString(),keterangan:"Pembelian barang",created_at:(new Date).toISOString()},{id:"3",transaksi_id:"tx-003",tipe:"piutang",nama_pihak:"Bu Siti",nominal_awal:15e4,nominal_dibayar:15e4,sisa:0,status:"lunas",created_at:(new Date).toISOString()}];p(t),m({total_hutang:2e6,total_piutang:5e5,hutang_count:1,piutang_count:2,hutang_jatuh_tempo:1,piutang_jatuh_tempo:0})}finally{v(!1)}},[]);(0,t.useEffect)(()=>{n&&V()},[n,V]);const U=()=>{switch(i){case"piutang":return h.filter(e=>"piutang"===e.tipe&&"lunas"!==e.status);case"hutang":return h.filter(e=>"hutang"===e.tipe&&"lunas"!==e.status);default:return[]}},H=e=>{x(e),u("left"),c("detail")},G=()=>{C(""),_("tunai"),S(""),u("left"),c("payment")},X=()=>{u("right"),"payment"===l?c("detail"):(c("list"),x(null))},K=()=>{u("right"),c("list"),x(null)},Y=async()=>{if(!k||parseFloat(k)<=0)return void w("Masukkan nominal pembayaran");if(!g)return;const e=parseFloat(k);if(e>g.sisa)w("Nominal melebihi sisa tagihan");else{v(!0);try{const t=g.sisa-e,n=0===t?"lunas":"sebagian";p(r=>r.map(r=>r.id===g.id?qe(qe({},r),{},{nominal_dibayar:r.nominal_dibayar+e,sisa:t,status:n}):r)),x(r=>r?qe(qe({},r),{},{nominal_dibayar:r.nominal_dibayar+e,sisa:t,status:n}):null),X()}catch(t){w(t.message)}finally{v(!1)}}},q=a?"h-full flex flex-col":"fixed inset-0 z-50 flex flex-col";if(!n)return null;const Z=()=>{const e=U();return(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"flex-1 flex flex-col min-h-0",style:{backgroundColor:a_},children:[(0,Fe.jsx)("div",{className:"p-4",children:(0,Fe.jsxs)("div",{className:"rounded-xl p-4 text-center",style:{backgroundColor:l_},children:[(0,Fe.jsx)("div",{className:"text-sm text-white/80",children:"Total Piutang Aktif"}),(0,Fe.jsxs)("div",{className:"text-2xl font-bold text-white",children:["Rp ",oC(f.total_piutang)]}),(0,Fe.jsxs)("div",{className:"text-xs text-white/70 mt-1",children:[f.piutang_count," transaksi \u2022 ",f.piutang_jatuh_tempo," jatuh tempo"]})]})}),(0,Fe.jsxs)("div",{className:"flex-1 min-h-0 overflow-y-auto px-4 pb-24",children:[(0,Fe.jsx)("div",{className:"text-xs font-medium uppercase tracking-wider mb-2",style:{color:n_},children:"Daftar Piutang"}),0===e.length?(0,Fe.jsx)("div",{className:"text-center py-8",style:{color:n_},children:"Tidak ada piutang aktif"}):(0,Fe.jsx)("div",{className:"space-y-2",children:e.map((e,t)=>(0,Fe.jsxs)(hc.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},onClick:()=>H(e),className:"w-full rounded-xl p-4 flex items-center justify-between transition-all active:scale-[0.98]",style:{backgroundColor:i_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg",style:{backgroundColor:"#DCFCE7"},children:"\ud83d\udcb0"}),(0,Fe.jsxs)("div",{className:"text-left",children:[(0,Fe.jsx)("div",{className:"font-semibold",style:{color:s_},children:e.nama_pihak}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:n_},children:e.keterangan||"Piutang usaha"}),iC(e.jatuh_tempo)&&(0,Fe.jsx)("span",{className:"inline-block px-2 py-0.5 rounded text-xs font-medium mt-1",style:{backgroundColor:$j,color:Qj},children:"Jatuh Tempo!"})]})]}),(0,Fe.jsxs)("div",{className:"text-right flex items-center gap-2",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("div",{className:"font-bold",style:{color:l_},children:["Rp ",oC(e.sisa)]}),(0,Fe.jsx)("div",{className:"text-xs px-2 py-0.5 rounded mt-1",style:{backgroundColor:"sebagian"===e.status?"#FEF3C7":"#FEE2E2",color:"sebagian"===e.status?"#92400E":"#991B1B"},children:aC(e.status)})]}),(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:o_},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},e.id))})]}),(0,Fe.jsx)(hc.button,{initial:{scale:0},animate:{scale:1},whileTap:{scale:.9},onClick:()=>T(!0),className:"fixed bottom-6 right-6 w-14 h-14 rounded-full flex items-center justify-center shadow-lg z-10",style:{backgroundColor:l_},children:(0,Fe.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]},"piutang-tab")};return(0,Fe.jsxs)("div",{className:q,style:{backgroundColor:a_},children:["list"===l&&(0,Fe.jsxs)("div",{className:"flex items-center px-4 border-b",style:{height:"60px",backgroundColor:i_,borderColor:o_},children:[(0,Fe.jsxs)("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:r_},children:[(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}),(0,Fe.jsx)("svg",{className:"w-5 h-5 hidden",style:{color:s_},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Fe.jsx)("h1",{className:"text-lg font-semibold ml-2",style:{color:s_},children:"Hutang & Piutang"})]}),"list"===l&&(0,Fe.jsx)("div",{className:"flex border-b",style:{backgroundColor:i_,borderColor:o_},children:["piutang","hutang","uang_muka"].map(e=>(0,Fe.jsxs)("button",{onClick:()=>{s(e),c("list")},className:"flex-1 py-3 text-sm font-medium relative transition-colors",style:{color:i===e?Qj:n_},children:["piutang"===e&&"Piutang","hutang"===e&&"Hutang","uang_muka"===e&&"Uang Muka",i===e&&(0,Fe.jsx)(hc.div,{layoutId:"debtTabIndicator",className:"absolute bottom-0 left-0 right-0 h-0.5",style:{backgroundColor:Qj}})]},e))}),(0,Fe.jsx)(ct,{mode:"wait",children:(()=>{if("detail"===l)return(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"flex-1 flex flex-col",style:{backgroundColor:a_},children:[(0,Fe.jsxs)("div",{className:"p-4",style:{backgroundColor:"piutang"===(null===g||void 0===g?void 0:g.tipe)?l_:c_},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Fe.jsx)("button",{onClick:K,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"rgba(255,255,255,0.2)"},children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{e.currentTarget.style.display="none"}})}),(0,Fe.jsxs)("div",{className:"text-white",children:[(0,Fe.jsx)("h2",{className:"text-lg font-bold",children:null===g||void 0===g?void 0:g.nama_pihak}),(0,Fe.jsx)("div",{className:"text-sm opacity-80",children:"piutang"===(null===g||void 0===g?void 0:g.tipe)?"Piutang Usaha":"Hutang Usaha"})]})]}),(0,Fe.jsxs)("div",{className:"text-center text-white",children:[(0,Fe.jsx)("div",{className:"text-sm opacity-80",children:"Sisa Tagihan"}),(0,Fe.jsxs)("div",{className:"text-3xl font-bold",children:["Rp ",oC((null===g||void 0===g?void 0:g.sisa)||0)]})]})]}),(0,Fe.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4",children:g&&(0,Fe.jsxs)("div",{className:"space-y-4",children:[(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:i_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Fe.jsx)("span",{style:{color:n_},children:"Status"}),(0,Fe.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:"lunas"===g.status?"#DCFCE7":"sebagian"===g.status?"#FEF3C7":"#FEE2E2",color:"lunas"===g.status?"#166534":"sebagian"===g.status?"#92400E":"#991B1B"},children:aC(g.status)})]}),(0,Fe.jsxs)("div",{className:"space-y-2",children:[(0,Fe.jsxs)("div",{className:"flex justify-between py-2 border-b",style:{borderColor:a_},children:[(0,Fe.jsx)("span",{style:{color:n_},children:"Nominal Awal"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:s_},children:["Rp ",oC(g.nominal_awal)]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between py-2 border-b",style:{borderColor:a_},children:[(0,Fe.jsx)("span",{style:{color:n_},children:"Sudah Dibayar"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:l_},children:["Rp ",oC(g.nominal_dibayar)]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Fe.jsx)("span",{className:"font-medium",style:{color:s_},children:"Sisa"}),(0,Fe.jsxs)("span",{className:"font-bold text-lg",style:{color:"piutang"===g.tipe?l_:c_},children:["Rp ",oC(g.sisa)]})]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4 space-y-3",style:{backgroundColor:i_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[g.kontak_pihak&&(0,Fe.jsxs)("div",{className:"flex justify-between py-2",style:{borderBottom:"1px solid ".concat(a_)},children:[(0,Fe.jsx)("span",{style:{color:n_},children:"Kontak"}),(0,Fe.jsx)("a",{href:"tel:".concat(g.kontak_pihak),className:"font-medium",style:{color:e_},children:g.kontak_pihak})]}),g.jatuh_tempo&&(0,Fe.jsxs)("div",{className:"flex justify-between py-2",style:{borderBottom:"1px solid ".concat(a_)},children:[(0,Fe.jsx)("span",{style:{color:n_},children:"Jatuh Tempo"}),(0,Fe.jsx)("span",{className:"font-medium",style:{color:iC(g.jatuh_tempo)?c_:s_},children:new Date(g.jatuh_tempo).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})})]}),(0,Fe.jsxs)("div",{className:"flex justify-between py-2",style:{borderBottom:"1px solid ".concat(a_)},children:[(0,Fe.jsx)("span",{style:{color:n_},children:"Tanggal"}),(0,Fe.jsx)("span",{className:"font-medium",style:{color:s_},children:new Date(g.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})})]}),g.keterangan&&(0,Fe.jsxs)("div",{className:"flex justify-between py-2",children:[(0,Fe.jsx)("span",{style:{color:n_},children:"Keterangan"}),(0,Fe.jsx)("span",{className:"font-medium text-right",style:{color:s_},children:g.keterangan})]})]})]})}),g&&"lunas"!==g.status&&(0,Fe.jsx)("div",{className:"p-4 border-t",style:{backgroundColor:i_,borderColor:o_},children:(0,Fe.jsxs)(hc.button,{whileTap:{scale:.98},onClick:G,className:"w-full py-3.5 rounded-xl font-semibold flex items-center justify-center gap-2",style:{backgroundColor:Qj,color:i_},children:[(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Catat Pembayaran"]})})]},"detail-page");if("payment"===l)return(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"flex-1 flex flex-col",style:{backgroundColor:i_},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 border-b",style:{height:"60px",borderColor:o_},children:[(0,Fe.jsx)("button",{onClick:X,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:r_},children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",onError:e=>{e.currentTarget.style.display="none"}})}),(0,Fe.jsx)("h1",{className:"text-lg font-semibold",style:{color:s_},children:"Catat Pembayaran"})]}),(0,Fe.jsxs)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:[b&&(0,Fe.jsx)("div",{className:"p-3 rounded-lg text-sm",style:{backgroundColor:"#FEF2F2",color:c_},children:b}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:"piutang"===(null===g||void 0===g?void 0:g.tipe)?"#DCFCE7":"#FEE2E2"},children:[(0,Fe.jsxs)("div",{className:"text-sm",style:{color:"piutang"===(null===g||void 0===g?void 0:g.tipe)?l_:c_},children:["Sisa tagihan untuk ",null===g||void 0===g?void 0:g.nama_pihak]}),(0,Fe.jsxs)("div",{className:"text-2xl font-bold",style:{color:"piutang"===(null===g||void 0===g?void 0:g.tipe)?"#166534":"#991B1B"},children:["Rp ",oC((null===g||void 0===g?void 0:g.sisa)||0)]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:s_},children:["Nominal Pembayaran ",(0,Fe.jsx)("span",{style:{color:c_},children:"*"})]}),(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:n_},children:"Rp"}),(0,Fe.jsx)("input",{type:"text",inputMode:"numeric",value:k,onChange:e=>C(e.target.value.replace(/\D/g,"")),placeholder:"0",className:"w-full pl-10 pr-3 py-3 text-lg rounded-lg",style:{backgroundColor:i_,border:"1px solid ".concat(o_),color:s_}})]}),g&&(0,Fe.jsxs)("button",{onClick:()=>C(g.sisa.toString()),className:"mt-2 text-sm font-medium",style:{color:Qj},children:["Lunasi semua (Rp ",oC(g.sisa),")"]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:s_},children:"Metode Pembayaran"}),(0,Fe.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["tunai","transfer","ewallet"].map(e=>(0,Fe.jsx)("button",{onClick:()=>_(e),className:"py-2.5 rounded-lg text-sm font-medium transition-colors capitalize",style:{backgroundColor:j===e?Qj:a_,color:j===e?i_:n_},children:"ewallet"===e?"E-Wallet":e},e))})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:s_},children:"Catatan (opsional)"}),(0,Fe.jsx)("input",{type:"text",value:N,onChange:e=>S(e.target.value),placeholder:"Keterangan pembayaran",className:"w-full px-3 py-2.5 rounded-lg",style:{backgroundColor:i_,border:"1px solid ".concat(o_),color:s_}})]})]}),(0,Fe.jsx)("div",{className:"p-4 border-t",style:{borderColor:o_},children:(0,Fe.jsx)(hc.button,{whileTap:{scale:.98},onClick:Y,disabled:y,className:"w-full py-3.5 rounded-xl font-semibold disabled:opacity-50",style:{backgroundColor:Qj,color:i_},children:y?"Memproses...":"Simpan Pembayaran"})})]},"payment-page");switch(i){case"piutang":default:return Z();case"hutang":return(()=>{const e=U();return(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"flex-1 flex flex-col min-h-0",style:{backgroundColor:a_},children:[(0,Fe.jsx)("div",{className:"p-4",children:(0,Fe.jsxs)("div",{className:"rounded-xl p-4 text-center",style:{backgroundColor:c_},children:[(0,Fe.jsx)("div",{className:"text-sm text-white/80",children:"Total Hutang Aktif"}),(0,Fe.jsxs)("div",{className:"text-2xl font-bold text-white",children:["Rp ",oC(f.total_hutang)]}),(0,Fe.jsxs)("div",{className:"text-xs text-white/70 mt-1",children:[f.hutang_count," transaksi \u2022 ",f.hutang_jatuh_tempo," jatuh tempo"]})]})}),(0,Fe.jsxs)("div",{className:"px-4 grid grid-cols-2 gap-2 mb-3",children:[(0,Fe.jsx)("button",{onClick:()=>A(!0),className:"flex items-center justify-center gap-2 px-3 py-2.5 rounded-lg font-medium transition-colors text-sm",style:{backgroundColor:$j,color:Qj},children:"\ud83c\udfe6 Hutang Bank"}),(0,Fe.jsx)("button",{onClick:()=>B(!0),className:"flex items-center justify-center gap-2 px-3 py-2.5 rounded-lg font-medium transition-colors text-sm",style:{backgroundColor:"#FAF5FF",color:t_},children:"\ud83d\udc65 Hutang Gaji"})]}),(0,Fe.jsxs)("div",{className:"flex-1 min-h-0 overflow-y-auto px-4 pb-24",children:[(0,Fe.jsx)("div",{className:"text-xs font-medium uppercase tracking-wider mb-2",style:{color:n_},children:"Daftar Hutang"}),0===e.length?(0,Fe.jsx)("div",{className:"text-center py-8",style:{color:n_},children:"Tidak ada hutang aktif"}):(0,Fe.jsx)("div",{className:"space-y-2",children:e.map((e,t)=>(0,Fe.jsxs)(hc.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},onClick:()=>H(e),className:"w-full rounded-xl p-4 flex items-center justify-between transition-all active:scale-[0.98]",style:{backgroundColor:i_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg",style:{backgroundColor:"#FEE2E2"},children:"\ud83d\udccb"}),(0,Fe.jsxs)("div",{className:"text-left",children:[(0,Fe.jsx)("div",{className:"font-semibold",style:{color:s_},children:e.nama_pihak}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:n_},children:e.keterangan||"Hutang usaha"}),iC(e.jatuh_tempo)&&(0,Fe.jsx)("span",{className:"inline-block px-2 py-0.5 rounded text-xs font-medium mt-1",style:{backgroundColor:$j,color:Qj},children:"Jatuh Tempo!"})]})]}),(0,Fe.jsxs)("div",{className:"text-right flex items-center gap-2",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("div",{className:"font-bold",style:{color:c_},children:["Rp ",oC(e.sisa)]}),(0,Fe.jsx)("div",{className:"text-xs px-2 py-0.5 rounded mt-1",style:{backgroundColor:"sebagian"===e.status?"#FEF3C7":"#FEE2E2",color:"sebagian"===e.status?"#92400E":"#991B1B"},children:aC(e.status)})]}),(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:o_},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},e.id))})]}),(0,Fe.jsx)(hc.button,{initial:{scale:0},animate:{scale:1},whileTap:{scale:.9},onClick:()=>D(!0),className:"fixed bottom-6 right-6 w-14 h-14 rounded-full flex items-center justify-center shadow-lg z-10",style:{backgroundColor:c_},children:(0,Fe.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]},"hutang-tab")})();case"uang_muka":return(0,Fe.jsxs)(hc.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"flex-1 flex flex-col min-h-0",style:{backgroundColor:a_},children:[(0,Fe.jsxs)("div",{className:"p-4 space-y-3",children:[(0,Fe.jsx)(hc.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},onClick:()=>L(!0),className:"w-full rounded-xl p-4 transition-all active:scale-[0.98]",style:{backgroundColor:i_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("span",{className:"text-3xl",children:"\ud83d\udce6"}),(0,Fe.jsxs)("div",{className:"text-left",children:[(0,Fe.jsx)("h3",{className:"font-medium",style:{color:s_},children:"Uang Muka Pembelian"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:n_},children:"DP ke supplier (SAK 1106)"})]})]}),(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fe.jsxs)("div",{className:"text-right",children:[(0,Fe.jsx)("div",{className:"font-bold",style:{color:e_},children:"Rp 0"}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:n_},children:"Aset"})]}),(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:o_},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),(0,Fe.jsx)(hc.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},onClick:()=>W(!0),className:"w-full rounded-xl p-4 transition-all active:scale-[0.98]",style:{backgroundColor:i_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("span",{className:"text-3xl",children:"\ud83e\uddfe"}),(0,Fe.jsxs)("div",{className:"text-left",children:[(0,Fe.jsx)("h3",{className:"font-medium",style:{color:s_},children:"Uang Muka dari Pelanggan"}),(0,Fe.jsx)("p",{className:"text-xs",style:{color:n_},children:"DP dari customer (SAK 2103)"})]})]}),(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fe.jsxs)("div",{className:"text-right",children:[(0,Fe.jsx)("div",{className:"font-bold",style:{color:t_},children:"Rp 0"}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:n_},children:"Kewajiban"})]}),(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:o_},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})]}),(0,Fe.jsx)("div",{className:"px-4 mt-2",children:(0,Fe.jsxs)("div",{className:"p-4 rounded-xl flex items-start gap-3",style:{backgroundColor:"#EFF6FF"},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:e_},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",style:{color:i_},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium",style:{color:e_},children:"Tentang Uang Muka"}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:"#1E40AF"},children:"Uang muka pembelian adalah DP yang dibayar ke supplier (aset). Uang muka pelanggan adalah DP yang diterima dari customer sebelum barang dikirim (kewajiban)."})]})]})}),(0,Fe.jsxs)("div",{className:"px-4 mt-4 grid grid-cols-2 gap-3",children:[(0,Fe.jsxs)("button",{onClick:()=>L(!0),className:"py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-all active:scale-[0.98]",style:{backgroundColor:e_,color:i_},children:[(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"DP Supplier"]}),(0,Fe.jsxs)("button",{onClick:()=>W(!0),className:"py-3 rounded-xl font-medium flex items-center justify-center gap-2 transition-all active:scale-[0.98]",style:{backgroundColor:t_,color:i_},children:[(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"DP Customer"]})]}),(0,Fe.jsx)(hc.button,{initial:{scale:0},animate:{scale:1},whileTap:{scale:.9},onClick:()=>L(!0),className:"fixed bottom-6 right-6 w-14 h-14 rounded-full flex items-center justify-center shadow-lg z-10",style:{backgroundColor:e_},children:(0,Fe.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]},"uang-muka-tab")}})()}),(0,Fe.jsx)(CC,{isOpen:E,onClose:()=>A(!1),onSuccess:()=>{A(!1),V()}}),(0,Fe.jsx)(zC,{isOpen:P,onClose:()=>B(!1),onSuccess:()=>{B(!1),V()}}),(0,Fe.jsx)($C,{isOpen:I,onClose:()=>T(!1),onSuccess:()=>{T(!1),V()}}),(0,Fe.jsx)(hj,{isOpen:M,onClose:()=>D(!1),onSuccess:()=>{D(!1),V()}}),(0,Fe.jsx)(Jj,{isOpen:R,onClose:()=>O(!1),onSuccess:()=>{O(!1),V()}}),(0,Fe.jsx)(Nj,{isOpen:F,onClose:()=>L(!1),onSuccess:()=>{L(!1),V()}}),(0,Fe.jsx)(Rj,{isOpen:z,onClose:()=>W(!1),onSuccess:()=>{W(!1),V()}})]})},u_=e=>new Intl.NumberFormat("id-ID").format(e),h_=e=>e?e.startsWith("08")?e.replace(/(\d{4})(\d{4})(\d+)/,"$1-$2-$3"):e:"-",p_=e=>"pelanggan"===e?"Pelanggan":"Supplier",f_={duration:.3,ease:[.4,0,.2,1]},m_=e=>{let{isOpen:n,onClose:r,isMobile:o=!1,isEmbedded:a=!1}=e;const[i,s]=(0,t.useState)("list"),[l,c]=(0,t.useState)("left"),[d,u]=(0,t.useState)("all"),[h,p]=(0,t.useState)(""),[f,m]=(0,t.useState)([]),[g,x]=(0,t.useState)(null),[y,v]=(0,t.useState)([]),[b,w]=(0,t.useState)({total_pelanggan:0,total_supplier:0,total_piutang:0,total_hutang:0}),[k,C]=(0,t.useState)(!1),[j,_]=(0,t.useState)(null),[N,S]=(0,t.useState)({nama:"",tipe:"pelanggan",telepon:"",alamat:"",email:""}),E=(0,t.useCallback)(async()=>{C(!0),_(null);try{const e=await Ub("/api/members/list?limit=100");if(!e.ok)throw new Error("Gagal memuat data");const t=await e.json(),n=(t.members||[]).map(e=>({id:e.id,nama:e.nama,tipe:e.tipe,telepon:e.telepon,alamat:e.alamat,email:e.email,nomor_member:e.nomor_member,points:e.points||0,total_transaksi:e.total_transaksi||0,total_nilai:e.total_nilai||0,saldo_hutang:e.saldo_hutang||0,last_transaction_at:e.last_transaction_at,created_at:e.created_at||(new Date).toISOString()}));m(n),t.summary&&w({total_pelanggan:t.summary.total_pelanggan||0,total_supplier:t.summary.total_supplier||0,total_piutang:t.summary.total_piutang||0,total_hutang:t.summary.total_hutang||0})}catch(e){console.error("Error fetching customers:",e),_("Gagal memuat data pelanggan"),m([]),w({total_pelanggan:0,total_supplier:0,total_piutang:0,total_hutang:0})}finally{C(!1)}},[]),A=(0,t.useCallback)(async e=>{C(!0);try{const t=await Ub("/api/customer/".concat(e,"/transactions"));if(!t.ok)throw new Error("Gagal memuat transaksi");const n=await t.json();v(n.transactions||[])}catch(t){v([{id:"1",jenis_transaksi:"penjualan",total_nominal:25e4,status_pembayaran:"lunas",created_at:(new Date).toISOString()},{id:"2",jenis_transaksi:"penjualan",total_nominal:15e4,status_pembayaran:"kredit",sisa_hutang:15e4,created_at:new Date(Date.now()-864e5).toISOString()}])}finally{C(!1)}},[]);(0,t.useEffect)(()=>{n&&E()},[n,E]);const P=(0,t.useMemo)(()=>f.filter(e=>{if("all"!==d&&e.tipe!==d)return!1;if(h){const t=[e.nama,e.telepon||"",e.alamat||"",e.email||""].join(" ");return((e,t)=>{if(!e)return!0;const n=e.toLowerCase(),r=t.toLowerCase();if(r.includes(n))return!0;let o=0;for(let a=0;a<r.length&&o<n.length;a++)r[a]===n[o]&&o++;return o===n.length})(h,t)}return!0}),[f,d,h]),B=()=>{S({nama:"",tipe:"pelanggan",telepon:"",alamat:"",email:""}),c("left"),s("add")},I=()=>{g&&S({nama:g.nama,tipe:g.tipe,telepon:g.telepon||"",alamat:g.alamat||"",email:g.email||""}),c("left"),s("edit")},T=()=>{c("right"),"edit"===i?s("detail"):(s("list"),x(null))},M=()=>{c("right"),s("list"),x(null)},D=async()=>{if(N.nama.trim())if(N.telepon&&N.telepon.trim()){C(!0),_(null);try{if("add"===i){const e={id:Date.now().toString(),nama:N.nama,tipe:N.tipe,telepon:N.telepon,alamat:N.alamat||void 0,email:N.email||void 0,total_transaksi:0,total_nilai:0,saldo_hutang:0,created_at:(new Date).toISOString()};m(t=>[e,...t]),M()}else if("edit"===i&&g){const e=qe(qe({},g),{},{nama:N.nama,tipe:N.tipe,telepon:N.telepon,alamat:N.alamat||void 0,email:N.email||void 0});m(t=>t.map(t=>t.id===g.id?e:t)),x(e),T()}}catch(e){_(e.message)}finally{C(!1)}}else _("Nomor telepon wajib diisi");else _("Nama wajib diisi")},R=a?"h-full bg-gray-50 flex flex-col":"fixed inset-0 z-50 bg-gray-50 flex flex-col";if(!n)return null;const O=()=>(0,Fe.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,Fe.jsxs)("div",{className:"bg-purple-600 text-white px-4 py-4",children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,Fe.jsx)("button",{onClick:r,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:(0,Fe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Fe.jsx)("h1",{className:"text-xl font-bold",children:"Pelanggan & Supplier"})]}),(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fe.jsx)("button",{onClick:B,className:"p-2 bg-white/20 rounded-lg hover:bg-white/30 transition-colors",children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),!a&&(0,Fe.jsx)("button",{onClick:r,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:(0,Fe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,Fe.jsxs)("div",{className:"mt-4 relative",children:[(0,Fe.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Fe.jsx)("input",{type:"text",value:h,onChange:e=>p(e.target.value),placeholder:"Cari nama, telepon, alamat...",className:"w-full pl-10 pr-4 py-2.5 bg-white/10 border border-white/20 rounded-lg text-white placeholder-purple-200 focus:outline-none focus:ring-2 focus:ring-white/30"})]}),(0,Fe.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[(0,Fe.jsxs)("div",{className:"bg-white/10 rounded-lg p-3",children:[(0,Fe.jsx)("div",{className:"text-xs opacity-80",children:"Total Pelanggan"}),(0,Fe.jsx)("div",{className:"text-2xl font-bold",children:b.total_pelanggan}),(0,Fe.jsxs)("div",{className:"text-xs opacity-70",children:["Piutang: Rp ",u_(b.total_piutang)]})]}),(0,Fe.jsxs)("div",{className:"bg-white/10 rounded-lg p-3",children:[(0,Fe.jsx)("div",{className:"text-xs opacity-80",children:"Total Supplier"}),(0,Fe.jsx)("div",{className:"text-2xl font-bold",children:b.total_supplier}),(0,Fe.jsxs)("div",{className:"text-xs opacity-70",children:["Hutang: Rp ",u_(b.total_hutang)]})]})]})]}),(0,Fe.jsx)("div",{className:"bg-white border-b px-4 py-2",children:(0,Fe.jsx)("div",{className:"flex gap-2",children:["all","pelanggan","supplier"].map(e=>(0,Fe.jsx)("button",{onClick:()=>u(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(d===e?"bg-purple-600 text-white":"bg-gray-100 text-gray-600"),children:"all"===e?"Semua":p_(e)},e))})}),(0,Fe.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4",children:k?(0,Fe.jsx)("div",{className:"text-center text-gray-500 py-8",children:"Memuat data..."}):0===P.length?(0,Fe.jsx)("div",{className:"text-center text-gray-500 py-8",children:h?"Tidak ditemukan":"Belum ada data"}):(0,Fe.jsx)("div",{className:"space-y-3",children:P.map(e=>(0,Fe.jsx)("button",{onClick:()=>(e=>{x(e),A(e.id),c("left"),s("detail")})(e),className:"w-full bg-white rounded-xl p-4 shadow-sm text-left hover:shadow-md transition-shadow",children:(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold ".concat("pelanggan"===e.tipe?"bg-purple-100 text-purple-600":"bg-orange-100 text-orange-600"),children:e.nama.charAt(0).toUpperCase()}),(0,Fe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Fe.jsx)("div",{className:"font-semibold text-gray-900 truncate",children:e.nama}),(0,Fe.jsx)("div",{className:"text-sm text-gray-500",children:h_(e.telepon)}),e.saldo_hutang>0&&(0,Fe.jsxs)("div",{className:"text-xs mt-1 ".concat("pelanggan"===e.tipe?"text-green-600":"text-red-600"),children:["pelanggan"===e.tipe?"Piutang":"Hutang",": Rp ",u_(e.saldo_hutang)]})]}),(0,Fe.jsxs)("div",{className:"text-right",children:[(0,Fe.jsx)("div",{className:"text-xs px-2 py-1 rounded ".concat("pelanggan"===e.tipe?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"),children:p_(e.tipe)}),(0,Fe.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:[e.total_transaksi," transaksi"]})]})]})},e.id))})})]});return(0,Fe.jsx)("div",{className:R,children:(0,Fe.jsx)(ct,{mode:"wait",custom:l,children:(0,Fe.jsx)(hc.div,{custom:l,variants:{enter:e=>({x:"left"===e?"100%":"-100%"}),center:{x:0},exit:e=>({x:"left"===e?"-100%":"100%"})},initial:"enter",animate:"center",exit:"exit",transition:f_,className:"flex-1 flex flex-col overflow-hidden",children:(()=>{switch(i){case"list":default:return O();case"detail":return(0,Fe.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Fe.jsx)("div",{className:"bg-purple-600 text-white px-4 py-4",children:(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("button",{onClick:M,className:"p-1",children:(0,Fe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h1",{className:"text-xl font-bold",children:null===g||void 0===g?void 0:g.nama}),(0,Fe.jsx)("div",{className:"text-sm opacity-80",children:g&&p_(g.tipe)})]})]}),(0,Fe.jsx)("button",{onClick:I,className:"p-2 bg-white/20 rounded-lg",children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})}),(0,Fe.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:g&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-sm space-y-3",children:[g.telepon&&(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsx)("span",{className:"text-gray-500",children:"Telepon"}),(0,Fe.jsxs)("a",{href:"tel:".concat(g.telepon),className:"text-purple-600 font-medium flex items-center gap-2",children:[(0,Fe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),h_(g.telepon)]})]}),g.alamat&&(0,Fe.jsxs)("div",{className:"flex justify-between",children:[(0,Fe.jsx)("span",{className:"text-gray-500",children:"Alamat"}),(0,Fe.jsx)("span",{className:"text-right font-medium text-gray-900",children:g.alamat})]}),g.email&&(0,Fe.jsxs)("div",{className:"flex justify-between",children:[(0,Fe.jsx)("span",{className:"text-gray-500",children:"Email"}),(0,Fe.jsx)("a",{href:"mailto:".concat(g.email),className:"text-purple-600 font-medium",children:g.email})]})]}),(0,Fe.jsxs)("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"text-sm text-gray-500",children:"Total Transaksi"}),(0,Fe.jsx)("div",{className:"text-xl font-bold text-gray-900",children:g.total_transaksi})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"text-sm text-gray-500",children:"Total Nilai"}),(0,Fe.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["Rp ",u_(g.total_nilai)]})]})]}),g.saldo_hutang>0&&(0,Fe.jsx)("div",{className:"mt-3 pt-3 border-t",children:(0,Fe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fe.jsx)("span",{className:"text-gray-500",children:"pelanggan"===g.tipe?"Piutang":"Hutang"}),(0,Fe.jsxs)("span",{className:"font-bold text-lg ".concat("pelanggan"===g.tipe?"text-green-600":"text-red-600"),children:["Rp ",u_(g.saldo_hutang)]})]})})]}),(0,Fe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm",children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",children:(0,Fe.jsx)("h3",{className:"font-semibold text-gray-900",children:"Transaksi Terakhir"})}),0===y.length?(0,Fe.jsx)("div",{className:"p-4 text-center text-gray-500 text-sm",children:"Belum ada transaksi"}):(0,Fe.jsx)("div",{className:"divide-y",children:y.slice(0,5).map(e=>(0,Fe.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"font-medium text-gray-900 capitalize",children:e.jenis_transaksi}),(0,Fe.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("id-ID")})]}),(0,Fe.jsxs)("div",{className:"text-right",children:[(0,Fe.jsxs)("div",{className:"font-medium",children:["Rp ",u_(e.total_nominal)]}),e.sisa_hutang&&e.sisa_hutang>0&&(0,Fe.jsxs)("div",{className:"text-xs text-orange-600",children:["Sisa: Rp ",u_(e.sisa_hutang)]})]})]},e.id))})]})]})}),g&&g.telepon&&(0,Fe.jsx)("div",{className:"p-4 border-t bg-white",children:(0,Fe.jsxs)("a",{href:"https://wa.me/".concat(g.telepon.replace(/^0/,"62").replace(/\D/g,"")),target:"_blank",rel:"noopener noreferrer",className:"w-full py-3 bg-green-500 text-white rounded-xl font-semibold flex items-center justify-center gap-2 hover:bg-green-600 transition-colors",children:[(0,Fe.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,Fe.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Hubungi via WhatsApp"]})})]});case"add":case"edit":return(0,Fe.jsxs)("div",{className:"flex-1 flex flex-col bg-white",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 py-4 border-b",children:[(0,Fe.jsx)("button",{onClick:T,className:"p-1",children:(0,Fe.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Fe.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"add"===i?"Tambah Kontak":"Edit Kontak"})]}),(0,Fe.jsxs)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:[j&&(0,Fe.jsx)("div",{className:"p-3 bg-red-50 text-red-700 rounded-lg text-sm",children:j}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipe"}),(0,Fe.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["pelanggan","supplier"].map(e=>(0,Fe.jsx)("button",{onClick:()=>S(t=>qe(qe({},t),{},{tipe:e})),className:"py-3 rounded-lg text-sm font-medium transition-colors ".concat(N.tipe===e?"bg-purple-600 text-white":"bg-gray-100 text-gray-700"),children:p_(e)},e))})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nama ",(0,Fe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Fe.jsx)("input",{type:"text",value:N.nama,onChange:e=>S(t=>qe(qe({},t),{},{nama:e.target.value})),placeholder:"Nama pelanggan/supplier",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nomor Telepon ",(0,Fe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Fe.jsx)("input",{type:"tel",value:N.telepon,onChange:e=>S(t=>qe(qe({},t),{},{telepon:e.target.value})),placeholder:"081234567890",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat"}),(0,Fe.jsx)("textarea",{value:N.alamat,onChange:e=>S(t=>qe(qe({},t),{},{alamat:e.target.value})),placeholder:"Alamat lengkap (opsional)",rows:2,className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Fe.jsx)("input",{type:"email",value:N.email,onChange:e=>S(t=>qe(qe({},t),{},{email:e.target.value})),placeholder:"email@example.com (opsional)",className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})]}),(0,Fe.jsx)("div",{className:"p-4 border-t",children:(0,Fe.jsx)("button",{onClick:D,disabled:k,className:"w-full py-3 bg-purple-600 text-white rounded-xl font-semibold hover:bg-purple-700 disabled:opacity-50 transition-colors",children:k?"Menyimpan...":"Simpan"})})]})}})()},i)})})},g_=e=>Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"jt":Math.abs(e)>=1e3?(e/1e3).toFixed(0)+"rb":new Intl.NumberFormat("id-ID").format(e),x_=e=>new Intl.NumberFormat("id-ID").format(e),y_=e=>{switch(e){case"today":return"Hari Ini";case"week":return"Minggu Ini";case"month":return"Bulan Ini";case"year":return"Tahun Ini";default:return e}},v_=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new Intl.NumberFormat("id-ID").format(Math.abs(e));return t&&0!==e?e>=0?"+".concat(n):"(".concat(n,")"):e<0?"(".concat(n,")"):n},b_=e=>{const t=new Intl.NumberFormat("id-ID").format(Math.abs(e));return e<0?"(".concat(t,")"):t},w_="#F97316",k_="#FFF7ED",C_="#3B82F6",j_="#A855F7",__="#737373",N_="#D4D4D4",S_="#F5F5F5",E_="#FFFFFF",A_="#262626",P_="#22C55E",B_="#EF4444",I_={duration:.3,ease:[.4,0,.2,1]},T_=e=>{let{isOpen:n,onClose:r,isEmbedded:o=!1}=e;const[a,i]=(0,t.useState)("overview"),[s,l]=(0,t.useState)("left"),[c,d]=(0,t.useState)("month"),[u,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[x,y]=(0,t.useState)(null),[v,b]=(0,t.useState)(!1),[w,k]=(0,t.useState)(!1),C=e=>{let{onClick:n,light:r=!1}=e;const[o,a]=(0,t.useState)(!1);return o?(0,Fe.jsx)("button",{onClick:n,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:r?"rgba(255,255,255,0.2)":N_},children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:r?"white":A_,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}):(0,Fe.jsx)("button",{onClick:n,className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:r?"rgba(255,255,255,0.2)":N_},children:(0,Fe.jsx)("img",{src:"/icons/backbutton-v2.png",alt:"Back",className:"w-9 h-9 object-contain",style:{filter:r?"none":"invert(1)"},onError:()=>a(!0)})})},j=e=>{const t=[],n="today"===e?8:"week"===e?7:"month"===e?30:12;for(let r=0;r<n;r++)t.push({date:new Date(Date.now()-24*(n-r-1)*60*60*1e3/("today"===e?8:1)).toISOString(),label:"today"===e?"".concat(8+2*r,":00"):"week"===e?["Sen","Sel","Rab","Kam","Jum","Sab","Min"][r]:"".concat(r+1),penjualan:Math.floor(8e5+7e5*Math.random())/("today"===e?8:1),pembelian:Math.floor(4e5+4e5*Math.random())/("today"===e?8:1),laba_kotor:Math.floor(3e5+3e5*Math.random())/("today"===e?8:1)});return t},_=(0,t.useCallback)(async e=>{b(!0);try{const t=await Ub("/api/insight?period=".concat(e));if(!t.ok)throw new Error("Gagal memuat data");const n=await t.json();h(n.data)}catch(sN){const n={period:e,period_label:y_(e),summary:{total_penjualan:"today"===e?15e5:"week"===e?85e5:"month"===e?35e6:42e7,total_pembelian:"today"===e?8e5:"week"===e?45e5:"month"===e?18e6:21e7,total_beban:"today"===e?2e5:"week"===e?1e6:"month"===e?5e6:6e7,laba_kotor:"today"===e?7e5:"week"===e?4e6:"month"===e?17e6:21e7,laba_bersih:"today"===e?5e5:"week"===e?3e6:"month"===e?12e6:15e7,transaksi_count:"today"===e?15:"week"===e?85:"month"===e?350:4200},trends:j(e),top_products:[{id:"1",nama_produk:"Indomie Goreng",qty_terjual:120,total_penjualan:36e4,margin_persen:25},{id:"2",nama_produk:"Aqua 600ml",qty_terjual:95,total_penjualan:285e3,margin_persen:20},{id:"3",nama_produk:"Teh Pucuk 350ml",qty_terjual:80,total_penjualan:24e4,margin_persen:22},{id:"4",nama_produk:"Minyak Goreng 1L",qty_terjual:45,total_penjualan:81e4,margin_persen:15},{id:"5",nama_produk:"Gula Pasir 1kg",qty_terjual:35,total_penjualan:525e3,margin_persen:18}],transaction_breakdown:[{jenis:"penjualan",count:250,total:35e6,percentage:65},{jenis:"pembelian",count:45,total:18e6,percentage:25},{jenis:"beban",count:30,total:5e6,percentage:10}],cash_flow:{kas_masuk:"month"===e?35e6:85e5,kas_keluar:"month"===e?23e6:55e5,net_flow:"month"===e?12e6:3e6,by_category:[{category:"Penjualan Tunai",amount:28e6,type:"masuk"},{category:"Terima Piutang",amount:7e6,type:"masuk"},{category:"Pembelian",amount:18e6,type:"keluar"},{category:"Operasional",amount:5e6,type:"keluar"}]}};h(n)}finally{b(!1)}},[]),N=(0,t.useCallback)(async e=>{k(!0);try{const t=await Ub("/api/reports/laba-rugi/".concat(e));if(!t.ok)throw new Error("Gagal memuat laporan");const n=await t.json();y(n)}catch(t){y((e=>{const t={penjualan:85e6,diskon_penjualan:25e5,retur_penjualan:15e5,pendapatan_lainnya:5e5,total_pendapatan_bersih:815e5},n={persediaan_awal:3e7,pembelian:45e6,diskon_pembelian:15e5,retur_pembelian:5e5,ongkos_angkut:5e5,barang_tersedia_dijual:735e5,persediaan_akhir:35e6,total_hpp:385e5},r=t.total_pendapatan_bersih-n.total_hpp,o={beban_gaji:12e6,beban_sewa:5e6,beban_listrik_air:15e5,beban_telepon_internet:5e5,beban_perlengkapan:8e5,beban_penyusutan:15e5,beban_transportasi:2e6,beban_administrasi:5e5,beban_lainnya:7e5,total_beban_operasional:245e5},a=r-o.total_beban_operasional,i={pendapatan_bunga:25e4,pendapatan_lainnya:0,beban_bunga:15e5,beban_pajak:0,total_non_operasional:-125e4},s=a+i.total_non_operasional;return{periode:e,tanggal_awal:"1 Desember 2024",tanggal_akhir:"31 Desember 2024",pendapatan:t,hpp:n,laba_kotor:r,beban_operasional:o,laba_operasi:a,non_operasional:i,laba_sebelum_pajak:s,pajak_penghasilan:0,laba_bersih:s-0}})(y_(c)))}finally{k(!1)}},[c]),S=(0,t.useCallback)(async e=>{k(!0);try{const t=await Ub("/api/reports/neraca/".concat(e));if(!t.ok)throw new Error("Gagal memuat laporan");const n=await t.json(),r={periode:n.periode,tanggal:n.tanggal,aset:{aset_lancar:{kas:n.aset_lancar.kas,bank:n.aset_lancar.bank,persediaan:n.aset_lancar.persediaan,piutang_usaha:n.aset_lancar.piutang_usaha,beban_dibayar_dimuka:n.aset_lancar.beban_dibayar_dimuka,uang_muka_pembelian:n.aset_lancar.uang_muka_pembelian,total:n.aset_lancar.total},aset_tetap:{peralatan:n.aset_tetap.peralatan,akum_penyusutan_peralatan:n.aset_tetap.akum_penyusutan_peralatan,kendaraan:n.aset_tetap.kendaraan,akum_penyusutan_kendaraan:n.aset_tetap.akum_penyusutan_kendaraan,bangunan:n.aset_tetap.bangunan,akum_penyusutan_bangunan:n.aset_tetap.akum_penyusutan_bangunan,tanah:n.aset_tetap.tanah,total:n.aset_tetap.total,total_neto:n.aset_tetap.total_neto},total:n.total_aset},kewajiban:{jangka_pendek:{hutang_usaha:n.kewajiban_jangka_pendek.hutang_usaha,hutang_bank_jangka_pendek:n.kewajiban_jangka_pendek.hutang_bank_jangka_pendek,uang_muka_pelanggan:n.kewajiban_jangka_pendek.uang_muka_pelanggan,hutang_pajak:n.kewajiban_jangka_pendek.hutang_pajak,hutang_gaji:n.kewajiban_jangka_pendek.hutang_gaji,total:n.kewajiban_jangka_pendek.total},jangka_panjang:{hutang_bank:n.kewajiban_jangka_panjang.hutang_bank,total:n.kewajiban_jangka_panjang.total},total:n.total_kewajiban},ekuitas:{modal_awal:n.ekuitas.modal_awal,setor_modal:n.ekuitas.setor_modal,prive:n.ekuitas.prive,laba_ditahan:n.ekuitas.laba_ditahan,laba_periode_berjalan:n.ekuitas.laba_periode_berjalan,total:n.ekuitas.total},is_balanced:n.is_balanced};f(r)}catch(t){f((e=>{const t={kas:15e6,bank:25e6,persediaan:35e6,piutang_usaha:85e5,beban_dibayar_dimuka:2e6,uang_muka_pembelian:15e5,total:87e6},n={peralatan:2e7,akum_penyusutan_peralatan:4e6,kendaraan:75e6,akum_penyusutan_kendaraan:15e6,bangunan:0,akum_penyusutan_bangunan:0,tanah:0,total:95e6,total_neto:76e6},r={hutang_usaha:12e6,hutang_bank_jangka_pendek:5e6,uang_muka_pelanggan:25e5,hutang_pajak:15e5,hutang_gaji:3e6,total:24e6},o={hutang_bank:3e7,total:3e7},a={modal_awal:8e7,setor_modal:1e7,prive:5e6,laba_ditahan:12e6,laba_periode_berjalan:12e6,total:109e6},i=t.total+n.total_neto,s=r.total+o.total;return{periode:e,tanggal:(new Date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),aset:{aset_lancar:t,aset_tetap:n,total:i},kewajiban:{jangka_pendek:r,jangka_panjang:o,total:s},ekuitas:a,is_balanced:Math.abs(i-(s+a.total))<1e3}})(y_(c)))}finally{k(!1)}},[c]),E=(0,t.useCallback)(async e=>{k(!0);try{const t=await Ub("/api/reports/arus-kas/".concat(e));if(!t.ok)throw new Error("Gagal memuat laporan");const n=await t.json(),r={periode:n.periode,tanggal_awal:n.tanggal_awal,tanggal_akhir:n.tanggal_akhir,operasi:{penerimaan_penjualan:n.operasi.penerimaan_penjualan,penerimaan_piutang:n.operasi.penerimaan_piutang,penerimaan_lainnya:n.operasi.penerimaan_lainnya,total_penerimaan:n.operasi.total_penerimaan,pembayaran_kulakan:n.operasi.pembayaran_kulakan,pembayaran_beban_operasi:n.operasi.pembayaran_beban_operasi,pembayaran_gaji:n.operasi.pembayaran_gaji,pembayaran_pajak:n.operasi.pembayaran_pajak,pembayaran_lainnya:n.operasi.pembayaran_lainnya,total_pengeluaran:n.operasi.total_pengeluaran,net_arus_kas_operasi:n.operasi.net_arus_kas_operasi},investasi:{penjualan_aset_tetap:n.investasi.penjualan_aset_tetap,penerimaan_investasi:n.investasi.penerimaan_investasi,total_penerimaan:n.investasi.total_penerimaan,pembelian_aset_tetap:n.investasi.pembelian_aset_tetap,pengeluaran_investasi:n.investasi.pengeluaran_investasi,total_pengeluaran:n.investasi.total_pengeluaran,net_arus_kas_investasi:n.investasi.net_arus_kas_investasi},pendanaan:{setor_modal:n.pendanaan.setor_modal,penerimaan_pinjaman:n.pendanaan.penerimaan_pinjaman,total_penerimaan:n.pendanaan.total_penerimaan,prive:n.pendanaan.prive,pembayaran_pinjaman:n.pendanaan.pembayaran_pinjaman,pembayaran_bunga:n.pendanaan.pembayaran_bunga,total_pengeluaran:n.pendanaan.total_pengeluaran,net_arus_kas_pendanaan:n.pendanaan.net_arus_kas_pendanaan},kenaikan_bersih_kas:n.kenaikan_bersih_kas,kas_awal_periode:n.kas_awal_periode,kas_akhir_periode:n.kas_akhir_periode};g(r)}catch(t){g((e=>{const t={penerimaan_penjualan:85e6,penerimaan_piutang:12e6,penerimaan_lainnya:5e5,total_penerimaan:975e5,pembayaran_kulakan:45e6,pembayaran_beban_operasi:15e6,pembayaran_gaji:8e6,pembayaran_pajak:25e5,pembayaran_lainnya:1e6,total_pengeluaran:715e5,net_arus_kas_operasi:26e6},n={penjualan_aset_tetap:0,penerimaan_investasi:0,total_penerimaan:0,pembelian_aset_tetap:5e6,pengeluaran_investasi:0,total_pengeluaran:5e6,net_arus_kas_investasi:-5e6},r={setor_modal:0,penerimaan_pinjaman:0,total_penerimaan:0,prive:5e6,pembayaran_pinjaman:3e6,pembayaran_bunga:15e5,total_pengeluaran:95e5,net_arus_kas_pendanaan:-95e5},o=t.net_arus_kas_operasi+n.net_arus_kas_investasi+r.net_arus_kas_pendanaan;return{periode:e,tanggal_awal:"1 Desember 2024",tanggal_akhir:"31 Desember 2024",operasi:t,investasi:n,pendanaan:r,kenaikan_bersih_kas:o,kas_awal_periode:285e5,kas_akhir_periode:285e5+o}})(y_(c)))}finally{k(!1)}},[c]),A=e=>{const t=new Date;return"year"===e?"".concat(t.getFullYear()):"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"))};(0,t.useEffect)(()=>{n&&_(c)},[n,c,_]);const P=e=>{l("left"),i(e)},B=()=>{l("right"),i("overview")},I=o?"h-full bg-gray-50 flex flex-col":"fixed inset-0 z-50 bg-gray-50 flex flex-col";if(!n)return null;const T=(e,t)=>{const n=Math.max(...e.map(e=>e[t]));return(0,Fe.jsx)("div",{className:"flex items-end gap-1 h-32",children:e.slice(-7).map((e,r)=>(0,Fe.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,Fe.jsx)("div",{className:"w-full rounded-t",style:{height:"".concat(e[t]/n*100,"%"),minHeight:"4px",backgroundColor:"penjualan"===t?w_:P_}}),(0,Fe.jsx)("span",{className:"text-xs mt-1",style:{color:__},children:e.label})]},r))})},M=()=>(0,Fe.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Fe.jsxs)("div",{style:{backgroundColor:w_},className:"text-white px-4 py-4",children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[o&&(0,Fe.jsx)(C,{onClick:r,light:!0}),(0,Fe.jsx)("h1",{className:"text-xl font-bold",children:"Insight Bisnis"})]}),!o&&(0,Fe.jsx)("button",{onClick:r,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:(0,Fe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Fe.jsx)("div",{className:"mt-4 flex gap-2 overflow-x-auto pb-2",children:["today","week","month","year"].map(e=>(0,Fe.jsx)("button",{onClick:()=>d(e),className:"px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap transition-colors",style:{backgroundColor:c===e?E_:"rgba(255,255,255,0.2)",color:c===e?w_:E_},children:y_(e)},e))})]}),(0,Fe.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:v?(0,Fe.jsx)("div",{className:"text-center py-8",style:{color:__},children:"Memuat data..."}):u?(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:__},children:"Penjualan"}),(0,Fe.jsxs)("div",{className:"text-xl font-bold",style:{color:A_},children:["Rp ",g_(u.summary.total_penjualan)]}),(0,Fe.jsx)("div",{className:"text-xs mt-1",style:{color:P_},children:"+12% dari periode lalu"})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:__},children:"Laba Bersih"}),(0,Fe.jsxs)("div",{className:"text-xl font-bold",style:{color:P_},children:["Rp ",g_(u.summary.laba_bersih)]}),(0,Fe.jsx)("div",{className:"text-xs mt-1",style:{color:P_},children:"+8% dari periode lalu"})]})]}),(0,Fe.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,Fe.jsxs)("div",{className:"rounded-xl p-3 text-center",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"text-2xl font-bold",style:{color:A_},children:u.summary.transaksi_count}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:__},children:"Transaksi"})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-3 text-center",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{className:"text-lg font-bold",style:{color:B_},children:["-Rp ",g_(u.summary.total_pembelian)]}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:__},children:"Pembelian"})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-3 text-center",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{className:"text-lg font-bold",style:{color:w_},children:["-Rp ",g_(u.summary.total_beban)]}),(0,Fe.jsx)("div",{className:"text-xs",style:{color:__},children:"Beban"})]})]}),(0,Fe.jsxs)("button",{onClick:()=>P("sales"),className:"w-full rounded-xl p-4 text-left hover:shadow-md transition-shadow",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Fe.jsx)("h3",{className:"font-semibold",style:{color:A_},children:"Tren Penjualan"}),(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:__,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),u.trends.length>0&&T(u.trends,"penjualan")]}),(0,Fe.jsxs)("button",{onClick:()=>P("products"),className:"w-full rounded-xl p-4 text-left hover:shadow-md transition-shadow",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Fe.jsx)("h3",{className:"font-semibold",style:{color:A_},children:"Produk Terlaris"}),(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:__,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),(0,Fe.jsx)("div",{className:"space-y-2",children:u.top_products.slice(0,3).map((e,t)=>(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fe.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:0===t?k_:S_,color:0===t?w_:__},children:t+1}),(0,Fe.jsx)("span",{className:"text-sm",style:{color:A_},children:e.nama_produk})]}),(0,Fe.jsxs)("span",{className:"text-sm font-medium",children:[e.qty_terjual," terjual"]})]},e.id))})]}),(0,Fe.jsxs)("button",{onClick:()=>P("cashflow"),className:"w-full rounded-xl p-4 text-left hover:shadow-md transition-shadow",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Fe.jsx)("h3",{className:"font-semibold",style:{color:A_},children:"Arus Kas"}),(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:__,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),(0,Fe.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"text-xs",style:{color:__},children:"Masuk"}),(0,Fe.jsxs)("div",{className:"text-sm font-bold",style:{color:P_},children:["+",g_(u.cash_flow.kas_masuk)]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"text-xs",style:{color:__},children:"Keluar"}),(0,Fe.jsxs)("div",{className:"text-sm font-bold",style:{color:B_},children:["-",g_(u.cash_flow.kas_keluar)]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"text-xs",style:{color:__},children:"Net"}),(0,Fe.jsxs)("div",{className:"text-sm font-bold",style:{color:u.cash_flow.net_flow>=0?P_:B_},children:[u.cash_flow.net_flow>=0?"+":"",g_(u.cash_flow.net_flow)]})]})]})]}),(0,Fe.jsxs)("div",{className:"pt-4",children:[(0,Fe.jsx)("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3",style:{color:__},children:"Laporan Keuangan SAK EMKM"}),(0,Fe.jsx)("button",{onClick:async()=>{await N(A(c)),P("labarugi")},disabled:w,className:"w-full rounded-xl p-4 mb-3 text-left hover:shadow-md transition-shadow disabled:opacity-50",style:{backgroundColor:k_,border:"1px solid ".concat(w_,"20")},children:(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:w_+"20"},children:(0,Fe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:w_,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h4",{className:"font-semibold",style:{color:A_},children:"Laporan Laba Rugi"}),(0,Fe.jsx)("p",{className:"text-sm",style:{color:__},children:"Income Statement (4xxx-7xxx)"})]})]}),(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:__,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),(0,Fe.jsx)("button",{onClick:async()=>{await S(A(c)),P("neraca")},disabled:w,className:"w-full rounded-xl p-4 mb-3 text-left hover:shadow-md transition-shadow disabled:opacity-50",style:{backgroundColor:C_+"10",border:"1px solid ".concat(C_,"20")},children:(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:C_+"20"},children:(0,Fe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:C_,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h4",{className:"font-semibold",style:{color:A_},children:"Laporan Posisi Keuangan"}),(0,Fe.jsx)("p",{className:"text-sm",style:{color:__},children:"Balance Sheet (1xxx-3xxx)"})]})]}),(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:__,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),(0,Fe.jsx)("button",{onClick:async()=>{await E(A(c)),P("aruskas")},disabled:w,className:"w-full rounded-xl p-4 text-left hover:shadow-md transition-shadow disabled:opacity-50",style:{backgroundColor:P_+"10",border:"1px solid ".concat(P_,"20")},children:(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:P_+"20"},children:(0,Fe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:P_,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h4",{className:"font-semibold",style:{color:A_},children:"Laporan Arus Kas"}),(0,Fe.jsx)("p",{className:"text-sm",style:{color:__},children:"Cash Flow (1101, 1102)"})]})]}),(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:__,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]}):(0,Fe.jsx)("div",{className:"text-center py-8",style:{color:__},children:"Tidak ada data"})})]});return(0,Fe.jsx)("div",{className:I,children:(0,Fe.jsx)(ct,{mode:"wait",custom:s,children:(0,Fe.jsx)(hc.div,{custom:s,variants:{enter:e=>({x:"left"===e?"100%":"-100%"}),center:{x:0},exit:e=>({x:"left"===e?"-100%":"100%"})},initial:"enter",animate:"center",exit:"exit",transition:I_,className:"flex-1 flex flex-col overflow-hidden",children:(()=>{switch(a){case"overview":default:return M();case"sales":return(0,Fe.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 py-4 border-b",style:{backgroundColor:E_},children:[(0,Fe.jsx)(C,{onClick:B}),(0,Fe.jsx)("h1",{className:"text-xl font-bold",style:{color:A_},children:"Detail Penjualan"})]}),(0,Fe.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:u&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsxs)("div",{className:"text-sm mb-1",style:{color:__},children:["Total Penjualan (",y_(c),")"]}),(0,Fe.jsxs)("div",{className:"text-3xl font-bold",style:{color:A_},children:["Rp ",x_(u.summary.total_penjualan)]}),(0,Fe.jsx)("div",{className:"text-sm mt-1",style:{color:P_},children:"+12.5% dari periode sebelumnya"})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("h3",{className:"font-semibold mb-4",style:{color:A_},children:"Grafik Penjualan"}),T(u.trends,"penjualan")]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("h3",{className:"font-semibold mb-3",style:{color:A_},children:"Breakdown"}),(0,Fe.jsxs)("div",{className:"space-y-2",children:[(0,Fe.jsxs)("div",{className:"flex justify-between",children:[(0,Fe.jsx)("span",{style:{color:__},children:"Penjualan Tunai"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",x_(.8*u.summary.total_penjualan)]})]}),(0,Fe.jsxs)("div",{className:"flex justify-between",children:[(0,Fe.jsx)("span",{style:{color:__},children:"Penjualan Kredit"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",x_(.2*u.summary.total_penjualan)]})]}),(0,Fe.jsxs)("div",{className:"border-t pt-2 flex justify-between",children:[(0,Fe.jsx)("span",{style:{color:__},children:"Jumlah Transaksi"}),(0,Fe.jsx)("span",{className:"font-medium",children:u.summary.transaksi_count})]}),(0,Fe.jsxs)("div",{className:"flex justify-between",children:[(0,Fe.jsx)("span",{style:{color:__},children:"Rata-rata per Transaksi"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",x_(Math.floor(u.summary.total_penjualan/u.summary.transaksi_count))]})]})]})]})]})})]});case"products":return(0,Fe.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 py-4 border-b",style:{backgroundColor:E_},children:[(0,Fe.jsx)(C,{onClick:B}),(0,Fe.jsx)("h1",{className:"text-xl font-bold",style:{color:A_},children:"Produk Terlaris"})]}),(0,Fe.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto",children:u&&(0,Fe.jsx)("div",{className:"divide-y",children:u.top_products.map((e,t)=>(0,Fe.jsxs)("div",{className:"px-4 py-4 flex items-center gap-4",style:{backgroundColor:E_},children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-lg font-bold",style:{backgroundColor:0===t?k_:S_,color:0===t?w_:__},children:t+1}),(0,Fe.jsxs)("div",{className:"flex-1",children:[(0,Fe.jsx)("div",{className:"font-semibold",style:{color:A_},children:e.nama_produk}),(0,Fe.jsxs)("div",{className:"text-sm",style:{color:__},children:[e.qty_terjual," terjual"]})]}),(0,Fe.jsxs)("div",{className:"text-right",children:[(0,Fe.jsxs)("div",{className:"font-bold",style:{color:A_},children:["Rp ",g_(e.total_penjualan)]}),e.margin_persen&&(0,Fe.jsxs)("div",{className:"text-xs",style:{color:P_},children:["Margin ",e.margin_persen,"%"]})]})]},e.id))})})]});case"cashflow":return(0,Fe.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3 px-4 py-4 border-b",style:{backgroundColor:E_},children:[(0,Fe.jsx)(C,{onClick:B}),(0,Fe.jsx)("h1",{className:"text-xl font-bold",style:{color:A_},children:"Arus Kas"})]}),(0,Fe.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:u&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:P_+"10"},children:[(0,Fe.jsx)("div",{className:"text-xs mb-1",style:{color:P_},children:"Kas Masuk"}),(0,Fe.jsxs)("div",{className:"text-lg font-bold",style:{color:P_},children:["+Rp ",g_(u.cash_flow.kas_masuk)]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:B_+"10"},children:[(0,Fe.jsx)("div",{className:"text-xs mb-1",style:{color:B_},children:"Kas Keluar"}),(0,Fe.jsxs)("div",{className:"text-lg font-bold",style:{color:B_},children:["-Rp ",g_(u.cash_flow.kas_keluar)]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:u.cash_flow.net_flow>=0?P_+"10":B_+"10"},children:[(0,Fe.jsx)("div",{className:"text-xs mb-1",style:{color:u.cash_flow.net_flow>=0?P_:B_},children:"Net Flow"}),(0,Fe.jsxs)("div",{className:"text-lg font-bold",style:{color:u.cash_flow.net_flow>=0?P_:B_},children:[u.cash_flow.net_flow>=0?"+":"","Rp ",g_(u.cash_flow.net_flow)]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:P_+"10"},children:(0,Fe.jsx)("h3",{className:"font-semibold",style:{color:P_},children:"Kas Masuk"})}),(0,Fe.jsx)("div",{className:"divide-y",children:u.cash_flow.by_category.filter(e=>"masuk"===e.type).map((e,t)=>(0,Fe.jsxs)("div",{className:"px-4 py-3 flex justify-between items-center",children:[(0,Fe.jsx)("span",{style:{color:__},children:e.category}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["+Rp ",g_(e.amount)]})]},t))})]}),(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:B_+"10"},children:(0,Fe.jsx)("h3",{className:"font-semibold",style:{color:B_},children:"Kas Keluar"})}),(0,Fe.jsx)("div",{className:"divide-y",children:u.cash_flow.by_category.filter(e=>"keluar"===e.type).map((e,t)=>(0,Fe.jsxs)("div",{className:"px-4 py-3 flex justify-between items-center",children:[(0,Fe.jsx)("span",{style:{color:__},children:e.category}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["-Rp ",g_(e.amount)]})]},t))})]})]})})]});case"labarugi":return(0,Fe.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Fe.jsx)("div",{style:{backgroundColor:w_},className:"text-white px-4 py-4",children:(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)(C,{onClick:B,light:!0}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h1",{className:"text-xl font-bold",children:"Laporan Laba Rugi"}),(0,Fe.jsxs)("p",{className:"text-sm opacity-80",children:[null===x||void 0===x?void 0:x.tanggal_awal," - ",null===x||void 0===x?void 0:x.tanggal_akhir]})]})]})}),(0,Fe.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:x&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:P_+"10"},children:(0,Fe.jsx)("h3",{className:"font-bold",style:{color:P_},children:"PENDAPATAN (4xxx)"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Penjualan (4101)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.pendapatan.penjualan)]})]}),x.pendapatan.diskon_penjualan>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Diskon Penjualan (4102)"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(x.pendapatan.diskon_penjualan),")"]})]}),x.pendapatan.retur_penjualan>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Retur Penjualan (4103)"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(x.pendapatan.retur_penjualan),")"]})]}),x.pendapatan.pendapatan_lainnya>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Pendapatan Lainnya (4104)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.pendapatan.pendapatan_lainnya)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",style:{backgroundColor:P_+"10"},children:[(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Pendapatan Bersih"}),(0,Fe.jsxs)("span",{className:"font-bold",children:["Rp ",v_(x.pendapatan.total_pendapatan_bersih)]})]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:B_+"10"},children:(0,Fe.jsx)("h3",{className:"font-bold",style:{color:B_},children:"HARGA POKOK PENJUALAN (5xxx)"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Persediaan Awal"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.hpp.persediaan_awal)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Pembelian (5101)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.hpp.pembelian)]})]}),x.hpp.diskon_pembelian>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Diskon Pembelian (5102)"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["(",v_(x.hpp.diskon_pembelian),")"]})]}),x.hpp.retur_pembelian>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Retur Pembelian (5103)"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["(",v_(x.hpp.retur_pembelian),")"]})]}),x.hpp.ongkos_angkut>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Ongkos Angkut (5104)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.hpp.ongkos_angkut)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",style:{backgroundColor:S_},children:[(0,Fe.jsx)("span",{className:"pl-4 font-medium",style:{color:A_},children:"Barang Tersedia Dijual"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.hpp.barang_tersedia_dijual)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Persediaan Akhir"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["(",v_(x.hpp.persediaan_akhir),")"]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",style:{backgroundColor:B_+"10"},children:[(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Total HPP"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:B_},children:["(",v_(x.hpp.total_hpp),")"]})]})]})]}),(0,Fe.jsx)("div",{className:"rounded-xl p-4",style:{backgroundColor:P_+"20",border:"1px solid ".concat(P_,"40")},children:(0,Fe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fe.jsx)("span",{className:"font-bold text-lg",style:{color:A_},children:"LABA KOTOR"}),(0,Fe.jsxs)("span",{className:"font-bold text-xl",style:{color:P_},children:["Rp ",v_(x.laba_kotor)]})]})}),(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:w_+"10"},children:(0,Fe.jsx)("h3",{className:"font-bold",style:{color:w_},children:"BEBAN OPERASIONAL (6xxx)"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[x.beban_operasional.beban_gaji>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Gaji (6101)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.beban_operasional.beban_gaji)]})]}),x.beban_operasional.beban_sewa>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Sewa (6102)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.beban_operasional.beban_sewa)]})]}),x.beban_operasional.beban_listrik_air>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Listrik & Air (6103)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.beban_operasional.beban_listrik_air)]})]}),x.beban_operasional.beban_telepon_internet>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Telepon & Internet (6104)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.beban_operasional.beban_telepon_internet)]})]}),x.beban_operasional.beban_perlengkapan>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Perlengkapan (6105)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.beban_operasional.beban_perlengkapan)]})]}),x.beban_operasional.beban_penyusutan>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Penyusutan (6106)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.beban_operasional.beban_penyusutan)]})]}),x.beban_operasional.beban_transportasi>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Transportasi (6107)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.beban_operasional.beban_transportasi)]})]}),x.beban_operasional.beban_administrasi>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Administrasi (6108)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.beban_operasional.beban_administrasi)]})]}),x.beban_operasional.beban_lainnya>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Lainnya (6109)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(x.beban_operasional.beban_lainnya)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",style:{backgroundColor:w_+"10"},children:[(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Total Beban Operasional"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:w_},children:["(",v_(x.beban_operasional.total_beban_operasional),")"]})]})]})]}),(0,Fe.jsx)("div",{className:"rounded-xl p-4",style:{backgroundColor:C_+"10",border:"1px solid ".concat(C_,"40")},children:(0,Fe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fe.jsx)("span",{className:"font-bold",style:{color:A_},children:"LABA OPERASI"}),(0,Fe.jsxs)("span",{className:"font-bold text-lg",style:{color:C_},children:["Rp ",v_(x.laba_operasi)]})]})}),(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:j_+"10"},children:(0,Fe.jsx)("h3",{className:"font-bold",style:{color:j_},children:"PENDAPATAN & BEBAN LAIN (7xxx)"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[x.non_operasional.pendapatan_bunga>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Pendapatan Bunga (7101)"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["Rp ",v_(x.non_operasional.pendapatan_bunga)]})]}),x.non_operasional.pendapatan_lainnya>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Pendapatan Lainnya (7102)"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["Rp ",v_(x.non_operasional.pendapatan_lainnya)]})]}),x.non_operasional.beban_bunga>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Bunga (7201)"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(x.non_operasional.beban_bunga),")"]})]}),x.non_operasional.beban_pajak>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Pajak (7202)"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(x.non_operasional.beban_pajak),")"]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",style:{backgroundColor:j_+"10"},children:[(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Total Non-Operasional"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:x.non_operasional.total_non_operasional>=0?P_:B_},children:["Rp ",b_(x.non_operasional.total_non_operasional)]})]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl p-4",style:{backgroundColor:x.laba_bersih>=0?P_:B_},children:[(0,Fe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fe.jsx)("span",{className:"font-bold text-lg text-white",children:"LABA BERSIH"}),(0,Fe.jsxs)("span",{className:"font-bold text-2xl text-white",children:["Rp ",v_(x.laba_bersih)]})]}),(0,Fe.jsxs)("div",{className:"text-sm text-white/80 mt-1",children:["Margin: ",(x.laba_bersih/x.pendapatan.total_pendapatan_bersih*100).toFixed(1),"%"]})]})]})})]});case"neraca":return(0,Fe.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Fe.jsx)("div",{style:{backgroundColor:C_},className:"text-white px-4 py-4",children:(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)(C,{onClick:B,light:!0}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h1",{className:"text-xl font-bold",children:"Laporan Posisi Keuangan"}),(0,Fe.jsxs)("p",{className:"text-sm opacity-80",children:["Per ",(null===p||void 0===p?void 0:p.tanggal)||"-"]})]})]})}),(0,Fe.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:p&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:C_+"10"},children:(0,Fe.jsx)("h3",{className:"font-bold",style:{color:C_},children:"ASET (1xxx)"})}),(0,Fe.jsxs)("div",{className:"border-b",children:[(0,Fe.jsx)("div",{className:"px-4 py-2",style:{backgroundColor:S_},children:(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Aset Lancar"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Kas (1101)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.aset.aset_lancar.kas)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Bank (1102)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.aset.aset_lancar.bank)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Persediaan (1103)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.aset.aset_lancar.persediaan)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Piutang Usaha (1104)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.aset.aset_lancar.piutang_usaha)]})]}),p.aset.aset_lancar.beban_dibayar_dimuka>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Dibayar di Muka (1105)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.aset.aset_lancar.beban_dibayar_dimuka)]})]}),p.aset.aset_lancar.uang_muka_pembelian>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Uang Muka Pembelian (1106)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.aset.aset_lancar.uang_muka_pembelian)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",style:{backgroundColor:C_+"10"},children:[(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Total Aset Lancar"}),(0,Fe.jsxs)("span",{className:"font-bold",children:["Rp ",v_(p.aset.aset_lancar.total)]})]})]})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("div",{className:"px-4 py-2",style:{backgroundColor:S_},children:(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Aset Tetap"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[p.aset.aset_tetap.peralatan>0&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Peralatan (1201)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.aset.aset_tetap.peralatan)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-8 text-sm",style:{color:__},children:"Akum. Penyusutan"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(p.aset.aset_tetap.akum_penyusutan_peralatan),")"]})]})]}),p.aset.aset_tetap.kendaraan>0&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Kendaraan (1202)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.aset.aset_tetap.kendaraan)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-8 text-sm",style:{color:__},children:"Akum. Penyusutan"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(p.aset.aset_tetap.akum_penyusutan_kendaraan),")"]})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",style:{backgroundColor:C_+"10"},children:[(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Total Aset Tetap (Neto)"}),(0,Fe.jsxs)("span",{className:"font-bold",children:["Rp ",v_(p.aset.aset_tetap.total_neto)]})]})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 flex justify-between",style:{backgroundColor:C_+"20"},children:[(0,Fe.jsx)("span",{className:"font-bold",style:{color:C_},children:"TOTAL ASET"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:C_},children:["Rp ",v_(p.aset.total)]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:B_+"10"},children:(0,Fe.jsx)("h3",{className:"font-bold",style:{color:B_},children:"KEWAJIBAN (2xxx)"})}),(0,Fe.jsxs)("div",{className:"border-b",children:[(0,Fe.jsx)("div",{className:"px-4 py-2",style:{backgroundColor:S_},children:(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Kewajiban Jangka Pendek"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Hutang Usaha (2101)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.kewajiban.jangka_pendek.hutang_usaha)]})]}),p.kewajiban.jangka_pendek.hutang_bank_jangka_pendek>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Hutang Bank JK Pendek (2102)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.kewajiban.jangka_pendek.hutang_bank_jangka_pendek)]})]}),p.kewajiban.jangka_pendek.uang_muka_pelanggan>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Uang Muka Pelanggan (2103)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.kewajiban.jangka_pendek.uang_muka_pelanggan)]})]}),p.kewajiban.jangka_pendek.hutang_pajak>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Hutang Pajak (2104)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.kewajiban.jangka_pendek.hutang_pajak)]})]}),p.kewajiban.jangka_pendek.hutang_gaji>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Hutang Gaji (2105)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.kewajiban.jangka_pendek.hutang_gaji)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",style:{backgroundColor:B_+"10"},children:[(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Total Kewajiban JK Pendek"}),(0,Fe.jsxs)("span",{className:"font-bold",children:["Rp ",v_(p.kewajiban.jangka_pendek.total)]})]})]})]}),p.kewajiban.jangka_panjang.total>0&&(0,Fe.jsxs)("div",{className:"border-b",children:[(0,Fe.jsx)("div",{className:"px-4 py-2",style:{backgroundColor:S_},children:(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Kewajiban Jangka Panjang"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Hutang Bank (2201)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.kewajiban.jangka_panjang.hutang_bank)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",style:{backgroundColor:B_+"10"},children:[(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Total Kewajiban JK Panjang"}),(0,Fe.jsxs)("span",{className:"font-bold",children:["Rp ",v_(p.kewajiban.jangka_panjang.total)]})]})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 flex justify-between",style:{backgroundColor:B_+"20"},children:[(0,Fe.jsx)("span",{className:"font-bold",style:{color:B_},children:"TOTAL KEWAJIBAN"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:B_},children:["Rp ",v_(p.kewajiban.total)]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:j_+"10"},children:(0,Fe.jsx)("h3",{className:"font-bold",style:{color:j_},children:"EKUITAS (3xxx)"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Modal Awal (3101)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.ekuitas.modal_awal)]})]}),p.ekuitas.setor_modal>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Setor Modal (3102)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.ekuitas.setor_modal)]})]}),p.ekuitas.prive>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Prive (3103)"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(p.ekuitas.prive),")"]})]}),p.ekuitas.laba_ditahan>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Laba Ditahan (3104)"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(p.ekuitas.laba_ditahan)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Laba Periode Berjalan (3105)"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:p.ekuitas.laba_periode_berjalan>=0?P_:B_},children:["Rp ",v_(p.ekuitas.laba_periode_berjalan)]})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 flex justify-between",style:{backgroundColor:j_+"20"},children:[(0,Fe.jsx)("span",{className:"font-bold",style:{color:j_},children:"TOTAL EKUITAS"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:j_},children:["Rp ",v_(p.ekuitas.total)]})]})]}),(0,Fe.jsx)("div",{className:"rounded-xl p-4",style:{backgroundColor:p.is_balanced?P_+"10":B_+"10",border:"1px solid ".concat(p.is_balanced?P_:B_,"40")},children:(0,Fe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-2",children:[p.is_balanced?(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:P_,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:B_,viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Fe.jsx)("span",{className:"font-semibold",style:{color:p.is_balanced?P_:B_},children:p.is_balanced?"Balance OK":"Tidak Balance"})]}),(0,Fe.jsxs)("div",{className:"text-right",children:[(0,Fe.jsx)("div",{className:"text-sm",style:{color:__},children:"Kewajiban + Ekuitas"}),(0,Fe.jsxs)("div",{className:"font-bold",children:["Rp ",v_(p.kewajiban.total+p.ekuitas.total)]})]})]})})]})})]});case"aruskas":return(0,Fe.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Fe.jsx)("div",{style:{backgroundColor:P_},className:"text-white px-4 py-4",children:(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)(C,{onClick:B,light:!0}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h1",{className:"text-xl font-bold",children:"Laporan Arus Kas"}),(0,Fe.jsxs)("p",{className:"text-sm opacity-80",children:[null===m||void 0===m?void 0:m.tanggal_awal," - ",null===m||void 0===m?void 0:m.tanggal_akhir]})]})]})}),(0,Fe.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 space-y-4",children:m&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:C_+"10"},children:(0,Fe.jsx)("h3",{className:"font-bold",style:{color:C_},children:"ARUS KAS AKTIVITAS OPERASI"})}),(0,Fe.jsxs)("div",{className:"border-b",children:[(0,Fe.jsx)("div",{className:"px-4 py-2",style:{backgroundColor:S_},children:(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Penerimaan Kas"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Penerimaan dari Penjualan"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["Rp ",v_(m.operasi.penerimaan_penjualan)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Penerimaan Piutang"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["Rp ",v_(m.operasi.penerimaan_piutang)]})]}),m.operasi.penerimaan_lainnya>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Penerimaan Lainnya"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["Rp ",v_(m.operasi.penerimaan_lainnya)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",style:{backgroundColor:P_+"10"},children:[(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Total Penerimaan"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:P_},children:["Rp ",v_(m.operasi.total_penerimaan)]})]})]})]}),(0,Fe.jsxs)("div",{className:"border-b",children:[(0,Fe.jsx)("div",{className:"px-4 py-2",style:{backgroundColor:S_},children:(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Pengeluaran Kas"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Pembayaran ke Supplier"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(m.operasi.pembayaran_kulakan),")"]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Beban Operasional"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(m.operasi.pembayaran_beban_operasi),")"]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Pembayaran Gaji"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(m.operasi.pembayaran_gaji),")"]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Pembayaran Pajak"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(m.operasi.pembayaran_pajak),")"]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",style:{backgroundColor:B_+"10"},children:[(0,Fe.jsx)("span",{className:"font-semibold",style:{color:A_},children:"Total Pengeluaran"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:B_},children:["(",v_(m.operasi.total_pengeluaran),")"]})]})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 flex justify-between",style:{backgroundColor:m.operasi.net_arus_kas_operasi>=0?C_+"20":w_+"20"},children:[(0,Fe.jsx)("span",{className:"font-bold",style:{color:A_},children:"Arus Kas Bersih - Operasi"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:m.operasi.net_arus_kas_operasi>=0?C_:w_},children:["Rp ",b_(m.operasi.net_arus_kas_operasi)]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:j_+"10"},children:(0,Fe.jsx)("h3",{className:"font-bold",style:{color:j_},children:"ARUS KAS AKTIVITAS INVESTASI"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[m.investasi.penjualan_aset_tetap>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Penjualan Aset Tetap"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["Rp ",v_(m.investasi.penjualan_aset_tetap)]})]}),m.investasi.pembelian_aset_tetap>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Pembelian Aset Tetap"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(m.investasi.pembelian_aset_tetap),")"]})]}),0===m.investasi.total_penerimaan&&0===m.investasi.total_pengeluaran&&(0,Fe.jsx)("div",{className:"px-4 py-3 text-center",style:{color:__},children:"Tidak ada aktivitas investasi"})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 flex justify-between",style:{backgroundColor:j_+"20"},children:[(0,Fe.jsx)("span",{className:"font-bold",style:{color:A_},children:"Arus Kas Bersih - Investasi"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:m.investasi.net_arus_kas_investasi>=0?P_:B_},children:["Rp ",b_(m.investasi.net_arus_kas_investasi)]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:w_+"10"},children:(0,Fe.jsx)("h3",{className:"font-bold",style:{color:w_},children:"ARUS KAS AKTIVITAS PENDANAAN"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[m.pendanaan.setor_modal>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Setoran Modal"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["Rp ",v_(m.pendanaan.setor_modal)]})]}),m.pendanaan.penerimaan_pinjaman>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Penerimaan Pinjaman"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:P_},children:["Rp ",v_(m.pendanaan.penerimaan_pinjaman)]})]}),m.pendanaan.prive>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Prive / Penarikan"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(m.pendanaan.prive),")"]})]}),m.pendanaan.pembayaran_pinjaman>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Pembayaran Pinjaman"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(m.pendanaan.pembayaran_pinjaman),")"]})]}),m.pendanaan.pembayaran_bunga>0&&(0,Fe.jsxs)("div",{className:"px-4 py-2 flex justify-between",children:[(0,Fe.jsx)("span",{className:"pl-4",style:{color:__},children:"Pembayaran Bunga"}),(0,Fe.jsxs)("span",{className:"font-medium",style:{color:B_},children:["(",v_(m.pendanaan.pembayaran_bunga),")"]})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 flex justify-between",style:{backgroundColor:w_+"20"},children:[(0,Fe.jsx)("span",{className:"font-bold",style:{color:A_},children:"Arus Kas Bersih - Pendanaan"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:m.pendanaan.net_arus_kas_pendanaan>=0?P_:B_},children:["Rp ",b_(m.pendanaan.net_arus_kas_pendanaan)]})]})]}),(0,Fe.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:E_,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:P_+"10"},children:(0,Fe.jsx)("h3",{className:"font-bold",style:{color:P_},children:"RINGKASAN"})}),(0,Fe.jsxs)("div",{className:"divide-y",children:[(0,Fe.jsxs)("div",{className:"px-4 py-3 flex justify-between",children:[(0,Fe.jsx)("span",{style:{color:__},children:"Kenaikan (Penurunan) Bersih Kas"}),(0,Fe.jsxs)("span",{className:"font-bold",style:{color:m.kenaikan_bersih_kas>=0?P_:B_},children:["Rp ",b_(m.kenaikan_bersih_kas)]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-3 flex justify-between",children:[(0,Fe.jsx)("span",{style:{color:__},children:"Kas Awal Periode"}),(0,Fe.jsxs)("span",{className:"font-medium",children:["Rp ",v_(m.kas_awal_periode)]})]})]}),(0,Fe.jsxs)("div",{className:"px-4 py-4 flex justify-between",style:{backgroundColor:P_},children:[(0,Fe.jsx)("span",{className:"font-bold text-white",children:"KAS AKHIR PERIODE"}),(0,Fe.jsxs)("span",{className:"font-bold text-white text-lg",children:["Rp ",v_(m.kas_akhir_periode)]})]})]})]})})]})}})()},a)})})},M_={duration:.3,ease:[.4,0,.2,1]},D_=()=>(0,Fe.jsxs)("div",{className:"flex gap-1",children:[(0,Fe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"1.4s"}}),(0,Fe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"200ms",animationDuration:"1.4s"}}),(0,Fe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"400ms",animationDuration:"1.4s"}})]}),R_=e=>{let{activeTenant:n,onBack:r,isMobile:o=!1,onPanelToggle:a,activePanel:i="none",externalTransactionMessage:s,onPOSPrefillData:l}=e;const c=Q(),d=Z(),u=Qv(),[h,p]=(0,t.useState)(""),[f,m]=(0,t.useState)([]),[g,x]=(0,t.useState)(!1),[y,v]=(0,t.useState)(!1),[b,w]=(0,t.useState)(!1),[k,C]=(0,t.useState)(!1),[j,_]=(0,t.useState)(!1),[N,S]=(0,t.useState)(""),[E,A]=(0,t.useState)(""),[P,B]=(0,t.useState)(null),I=()=>"undefined"!==typeof window&&window.innerWidth<768&&localStorage.getItem("mobile_active_panel")||"none",[T,M]=(0,t.useState)(()=>"expense"===I()),[D,R]=(0,t.useState)(()=>"pos"===I()),[O,F]=(0,t.useState)(()=>"pembelian"===I()),[L,z]=(0,t.useState)(()=>"inventory"===I()),[W,V]=(0,t.useState)(()=>"kasbank"===I()),[U,H]=(0,t.useState)(()=>"debt"===I()),[G,X]=(0,t.useState)(()=>"customer"===I()),[K,Y]=(0,t.useState)(()=>"insight"===I()),[q,J]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if("undefined"===typeof window||window.innerWidth>=768)return;let e="none";D?e="pos":O?e="pembelian":T?e="expense":L?e="inventory":W?e="kasbank":U?e="debt":G?e="customer":K&&(e="insight"),localStorage.setItem("mobile_active_panel",e)},[D,O,T,L,W,U,G,K]);const[$,ee]=(0,t.useState)(null);(0,t.useEffect)(()=>{const e=new URLSearchParams(d.search);if("openPurchaseForm"===e.get("action")){const t=d.state;console.log("[ChatPanel] openPurchaseForm action, state:",t),"purchase"===(null===t||void 0===t?void 0:t.action)&&null!==t&&void 0!==t&&t.productData&&(console.log("[ChatPanel] Setting scannedProductData:",t.productData),B(t.productData)),u&&a?a("purchase"):C(!0),e.delete("action");const n=e.toString();c(d.pathname+(n?"?"+n:""),{replace:!0,state:{}})}},[d.search,d.pathname,c,d.state]);const[te,ne]=(0,t.useState)(!1),[re,oe]=(0,t.useState)(!1),[ae,ie]=(0,t.useState)(!1),[se,le]=(0,t.useState)(!1),[ce,de]=(0,t.useState)(""),[ue,he]=(0,t.useState)(""),[pe,fe]=(0,t.useState)(""),me=(0,t.useRef)(""),ge=(0,t.useRef)(null),xe=(0,t.useRef)(null),ye=(0,t.useRef)(null),{handleTouchStart:ve,handleTouchMove:be,handleTouchEnd:we}=Nc({onSwipe:()=>J(!0),enabled:o&&!u,edgeThreshold:30,swipeThreshold:50});(0,t.useEffect)(()=>{const e=e=>{const t=e.target;if(console.log("[ChatPanel] Click detected on:",t.tagName,t.className),t.classList.contains("barcode-register-btn")){e.preventDefault(),e.stopPropagation();const n=t.getAttribute("data-product-id"),r=t.getAttribute("data-product-name");console.log("[ChatPanel] Barcode button clicked! ProductId:",n,"ProductName:",r),n&&r&&""!==n.trim()&&"None"!==n&&""!==r.trim()?(console.log("[ChatPanel] Opening barcode modal..."),S(n),A(r),_(!0)):(console.error("[ChatPanel] Missing or invalid productId/productName:",{productId:n,productName:r}),alert("\u26a0\ufe0f Product ID tidak tersedia.\n\nFitur registrasi barcode hanya tersedia untuk produk yang sudah terdaftar di sistem.\n\nSaran: Produk ini kemungkinan baru pertama kali dibeli. Lakukan pembelian lagi untuk produk yang sama, maka barcode bisa didaftarkan."))}},t=xe.current;return t?(console.log("[ChatPanel] Adding barcode click listener to container"),t.addEventListener("click",e)):console.warn("[ChatPanel] Messages container ref not available"),()=>{t&&(console.log("[ChatPanel] Removing barcode click listener"),t.removeEventListener("click",e))}},[]);const ke=["pembelian","kulak","beli","belanja"],Ce=["karton","dus","box","slop","bal","koli","pack","lusin"],je=["pcs","unit","buah","biji","butir","lembar","batang","bungkus","sachet","botol"],_e=e=>{var t;const n="".concat(h.trim()," ").concat(e," harga ");p(n),fe(e),ie(!1),me.current=n,null===(t=ye.current)||void 0===t||t.focus()},Ne=e=>{console.log("[ChatPanel] Transaction completed, adding to chat:",e);const t={id:"tx-".concat(Date.now()),sender:"assistant",content:e,timestamp:(new Date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1})};m(e=>[...e,t]),setTimeout(()=>{Ae()},100)};(0,t.useEffect)(()=>{s&&Ne(s)},[s]),(0,t.useEffect)(()=>{(async()=>{if(console.log("[ChatPanel] \ud83d\udccb loadChatHistory called, activeTenant:",null===n||void 0===n?void 0:n.id),!n||"milky-assistant"===n.id)return console.log("[ChatPanel] \u23ed\ufe0f Skipping: no tenant or milky-assistant"),void m([]);const e=Te(),t=Me();if(console.log("[ChatPanel] \ud83d\udd11 Auth check:",{userId:e,isAuth:t,hasToken:!!localStorage.getItem("access_token")}),!e||!t)return console.log("[ChatPanel] \u26a0\ufe0f Not authenticated, skipping history load"),void m([]);v(!0),console.log("[ChatPanel] \ud83d\udd04 Loading history for:",{userId:e,tenantId:n.id});try{var r,o,a,i,s,l;const t=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=await kc("/chat/history?user_id=".concat(e,"&tenant_id=").concat(t,"&limit=").concat(n,"&offset=").concat(r),{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok){let e="Failed to fetch chat history: ".concat(o.status);try{const t=await o.text();t&&(e+=" - ".concat(t.substring(0,200)))}catch(iN){}throw new Error(e)}const a=await o.text();let i;console.log("[fetchChatHistory] Raw response text:",a.substring(0,500));try{i=JSON.parse(a)}catch(iN){throw console.error("[fetchChatHistory] Failed to parse JSON:",iN),console.error("[fetchChatHistory] Response text:",a),new Error("Invalid JSON response: ".concat(a.substring(0,200)))}return console.log("[fetchChatHistory] Parsed response:",i),"success"===i.status&&i.data?i.data:i.messages?{messages:i.messages,total_count:i.total_count||i.messages.length,has_more:i.has_more||!1,limit:n,offset:r}:i.messages||i.data?i:(console.warn("[fetchChatHistory] No messages in response:",i),{messages:[],total_count:0,has_more:!1,limit:n,offset:r})}(e,n.id,50,0);console.log("[ChatPanel] \u2705 History response:",{messageCount:(null===t||void 0===t||null===(r=t.messages)||void 0===r?void 0:r.length)||0,totalCount:null===t||void 0===t?void 0:t.total_count,hasMore:null===t||void 0===t?void 0:t.has_more,firstMsgId:null===t||void 0===t||null===(o=t.messages)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.id,lastMsgId:null===t||void 0===t||null===(i=t.messages)||void 0===i||null===(s=i[(null===t||void 0===t||null===(l=t.messages)||void 0===l?void 0:l.length)-1])||void 0===s?void 0:s.id});const c=[];[...t.messages||[]].reverse().forEach(e=>{let t="Now";if(e.created_at)try{const n="number"===typeof e.created_at?e.created_at:parseInt(e.created_at,10);if(!isNaN(n)&&n>0){t=(n<1e10?new Date(1e3*n):new Date(n)).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1})}}catch(iN){console.warn("[ChatPanel] Failed to parse timestamp:",e.created_at,iN)}c.push({id:"".concat(e.id,"-user"),sender:"user",content:e.message||"",timestamp:t}),e.response&&c.push({id:"".concat(e.id,"-assistant"),sender:"assistant",content:e.response,timestamp:t})}),console.log("[ChatPanel] Transformed messages:",c.length),m(c)}catch(c){console.error("[ChatPanel] \u274c Failed to load chat history:",c),console.error("[ChatPanel] Error details:",c.message,c.stack),console.error("[ChatPanel] Auth state:",{hasToken:!!localStorage.getItem("access_token"),userId:Te(),isAuth:Me()}),m([])}finally{v(!1)}})()},[null===n||void 0===n?void 0:n.id]);const[Se,Ee]=(0,t.useState)(!1),Ae=()=>{xe.current&&setTimeout(()=>{var e;null===(e=xe.current)||void 0===e||e.scrollTo({top:xe.current.scrollHeight,behavior:"smooth"}),Ee(!1)},100)};(0,t.useEffect)(()=>{Ae()},[f]),(0,t.useEffect)(()=>{if(ye.current){ye.current.style.height="auto";const e=ye.current.scrollHeight,t=120,n=Math.min(e,t);ye.current.style.height="".concat(n,"px"),ye.current.style.overflowY=e>t?"auto":"hidden"}},[h]);const Pe=async()=>{if(!h.trim()||!n||g)return;const e=h.trim();p("");const t={id:Date.now().toString(),sender:"user",content:e,timestamp:(new Date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1})};m(e=>[...e,t]),w(!0),x(!0);try{if(Me()){var r,o;const t=await(async(e,t)=>{const n=await kc("/api/tenant/".concat(e,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})});if(!n.ok)throw new Error("API call failed: ".concat(n.status));return n.json()})(n.id,e);w(!1);const i={id:Date.now().toString(),sender:"assistant",content:t.milky_response||t.message||"Maaf, terjadi kesalahan.",timestamp:(new Date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1})};if(m(e=>[...e,i]),"open_pos"===(null===(r=t.action)||void 0===r?void 0:r.type)&&null!==(o=t.action)&&void 0!==o&&o.payload){const{items:e,paymentMethod:n}=t.action.payload;console.log("[ChatPanel] Detected sales intent action:",{items:e,paymentMethod:n}),u&&a?(null===l||void 0===l||l({items:e,paymentMethod:n}),a("pos")):(ee({items:e,paymentMethod:n}),R(!0))}}else{w(!1);const e={id:Date.now().toString(),sender:"assistant",content:"Silakan login terlebih dahulu.",timestamp:(new Date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1})};m(t=>[...t,e])}}catch(i){console.error("Error sending message:",i),w(!1),m(e=>[...e,{id:Date.now().toString(),sender:"assistant",content:"Maaf, terjadi kesalahan. Silakan coba lagi.",timestamp:"Now"}])}finally{x(!1)}};return n?(0,Fe.jsxs)("div",{className:"flex flex-col w-full ".concat(o?"h-screen":"h-full"),onTouchStart:ve,onTouchMove:be,onTouchEnd:we,style:{height:o?"100dvh":"100%",width:o?"100vw":"100%",maxWidth:o?"100vw":"100%",overflow:"hidden",position:o?"fixed":"relative",top:o?0:void 0,left:o?0:void 0,right:o?0:void 0,bottom:o?0:void 0,backgroundColor:"#E5E5E5",isolation:"isolate"},children:[(0,Fe.jsx)("div",{className:"px-4 py-3 ".concat(o?"fixed":"absolute"," top-0 left-0 right-0 z-50"),style:{backgroundColor:"transparent",paddingTop:o?"calc(12px + env(safe-area-inset-top))":"12px"},children:(0,Fe.jsxs)("div",{className:"bg-white/65 backdrop-blur-md rounded-xl flex items-center border border-neutral-200/60 py-3",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("button",{onClick:r,className:"md:hidden flex items-center justify-center pl-4 pr-5","aria-label":"Back to workspace",children:(0,Fe.jsx)("span",{className:"text-neutral-400 text-4xl font-light leading-none",children:"\u2039"})}),(0,Fe.jsxs)("div",{onClick:()=>null===a||void 0===a?void 0:a("settings"),className:"flex items-center gap-3 flex-1 pr-4 md:pl-4 cursor-pointer",children:[(0,Fe.jsx)("div",{className:"w-9 h-9 bg-red-400 rounded-full flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:n.name.charAt(0).toUpperCase()}),(0,Fe.jsx)("span",{className:"font-semibold text-neutral-800",children:n.name})]})]})}),(0,Fe.jsxs)("div",{ref:xe,onScroll:()=>{if(xe.current){const{scrollTop:e,scrollHeight:t,clientHeight:n}=xe.current;Ee(t-e-n>150)}},className:"flex-1 min-h-0 overflow-y-auto space-y-3",style:{position:"absolute",top:0,bottom:0,left:0,right:0,paddingTop:o?"calc(76px + env(safe-area-inset-top))":"76px",paddingBottom:o?"calc(76px + env(safe-area-inset-bottom))":"76px",paddingLeft:"16px",paddingRight:"16px",width:"100%",maxWidth:"100%",overflowX:"hidden",overflowY:"auto",backgroundColor:"transparent",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:[y&&(0,Fe.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,Fe.jsxs)("div",{className:"flex gap-3 animate-pulse",children:[(0,Fe.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex-shrink-0"}),(0,Fe.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,Fe.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,Fe.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},e))}),!y&&0===f.length&&n&&"milky-assistant"!==n.id&&(0,Fe.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 py-12",children:[(0,Fe.jsx)("svg",{className:"w-16 h-16 mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,Fe.jsx)("p",{className:"text-sm text-gray-500",children:"Belum ada pesan"}),(0,Fe.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Mulai percakapan dengan mengirim pesan"})]}),!y&&f.map(e=>(0,Fe.jsx)("div",{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"," ").concat("user"===e.sender?"pr-2":"pl-2"),children:e.content.includes("<table")||e.content.includes("<div")||e.content.includes("milky-receipt")?(0,Fe.jsxs)("div",{className:"max-w-[90%]",children:[(0,Fe.jsxs)("div",{className:"bg-white rounded-2xl px-4 py-3",style:{boxShadow:"0 1px 4px rgba(0,0,0,0.06)"},children:[(0,Fe.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content},className:"receipt-card text-sm text-left"}),(0,Fe.jsx)("div",{className:"text-xs text-neutral-400 mt-1 text-right",children:e.timestamp})]}),(0,Fe.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Fe.jsxs)("div",{className:"bg-white rounded-xl px-4 py-3 flex items-center gap-3 w-full",style:{boxShadow:"0 1px 4px rgba(0,0,0,0.06)"},children:[(0,Fe.jsx)("div",{className:"w-10 h-10 flex-shrink-0",children:(0,Fe.jsx)("img",{src:"/icons/insight.png",alt:"Insight",className:"w-full h-full object-contain",onError:e=>{e.target.style.display="none"}})}),(0,Fe.jsx)("span",{className:"flex-1 text-sm text-neutral-700",children:"Cek produk paling laris 30 hari terakhir"}),(0,Fe.jsx)("span",{className:"text-neutral-400 text-3xl font-light leading-none",children:"\u203a"})]})})]}):(0,Fe.jsxs)("div",{className:"max-w-[80%] px-3 py-2 rounded-2xl ".concat("user"===e.sender?"bg-amber-100 text-gray-900":"bg-white text-gray-900 border border-gray-200"),style:{boxShadow:"0 1px 4px rgba(0,0,0,0.06)"},children:[(0,Fe.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words text-left",children:e.content}),(0,Fe.jsx)("p",{className:"text-xs mt-1 text-left ".concat("user"===e.sender?"text-gray-600":"text-gray-500"),children:e.timestamp})]})},e.id)),b&&(0,Fe.jsx)("div",{className:"flex justify-start pl-2",children:(0,Fe.jsx)("div",{className:"max-w-[80%] px-4 py-3 rounded-lg bg-white shadow-sm border border-gray-200",children:(0,Fe.jsx)(D_,{})})}),(0,Fe.jsx)("div",{ref:ge,style:{height:"1px"}})]}),Se&&(0,Fe.jsx)("div",{className:"absolute z-40 left-0 right-0 flex justify-center pointer-events-none ".concat(o?"bottom-[calc(76px+env(safe-area-inset-bottom))]":"bottom-20"),children:(0,Fe.jsx)("button",{onClick:Ae,className:"pointer-events-auto bg-white/80 backdrop-blur-md rounded-full p-2 shadow-md border border-neutral-200/60 hover:bg-white/90 transition-all duration-200",style:{animation:"fadeInUp 0.2s ease-out"},"aria-label":"Scroll to bottom",children:(0,Fe.jsx)("svg",{className:"w-5 h-5 text-neutral-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})}),(0,Fe.jsxs)("div",{className:"px-4 py-3 ".concat(o?"fixed":"absolute"," bottom-0 left-0 right-0 z-50"),style:{backgroundColor:"transparent",paddingBottom:o?"max(12px, env(safe-area-inset-bottom))":"12px"},children:[(0,Fe.jsxs)("div",{className:"relative",children:[te&&(0,Fe.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-60 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:(0,Fe.jsx)(Tv,{value:ce,onChange:(e,t)=>{t&&(e=>{var t;const n=h.toLowerCase(),r=ke.find(e=>n.startsWith(e))||"Pembelian",o="".concat(r.charAt(0).toUpperCase()+r.slice(1)," ").concat(e," sejumlah ");p(o),ne(!1),null===(t=ye.current)||void 0===t||t.focus()})(t.name)},placeholder:"",disabled:!1})}),ae&&(0,Fe.jsxs)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-48 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-2",children:[(0,Fe.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:"Pilih Satuan:"}),(0,Fe.jsx)("div",{className:"text-xs font-semibold text-gray-600 px-2 py-1",children:"Wholesales:"}),Ce.map(e=>(0,Fe.jsx)("button",{onClick:()=>_e(e),className:"w-full text-left px-3 py-2 hover:bg-purple-50 rounded text-sm",children:e},e)),(0,Fe.jsx)("div",{className:"text-xs font-semibold text-gray-600 px-2 py-1 mt-2",children:"Retail:"}),je.map(e=>(0,Fe.jsx)("button",{onClick:()=>_e(e),className:"w-full text-left px-3 py-2 hover:bg-purple-50 rounded text-sm",children:e},e))]}),se&&(0,Fe.jsxs)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-48 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-2",children:[(0,Fe.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:"Metode Pembayaran:"}),["tunai","transfer","kredit","debit","qris"].map(e=>(0,Fe.jsx)("button",{onClick:()=>(e=>{var t;const n="".concat(h.trim()," ").concat(e," dari ");p(n),le(!1),null===(t=ye.current)||void 0===t||t.focus()})(e),className:"w-full text-left px-3 py-2 hover:bg-purple-50 rounded text-sm capitalize",children:e},e))]}),re&&(0,Fe.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-60 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:(0,Fe.jsx)(Mv,{value:ue,onChange:e=>{(e=>{var t;const n=h.substring(0,h.toLowerCase().lastIndexOf("dari")+4),r="".concat(n," ").concat(e);p(r),oe(!1),null===(t=ye.current)||void 0===t||t.focus()})(e)},placeholder:"",disabled:!1})}),(0,Fe.jsxs)("div",{className:"bg-white/65 backdrop-blur-md rounded-xl px-4 py-3 flex items-end gap-3 border border-neutral-200/60",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[(0,Fe.jsx)("div",{className:"flex-shrink-0 mb-1",children:(0,Fe.jsx)(_c,{isMobile:o,onMenuItemClick:e=>{console.log("[ChatPanel] Action menu item clicked:",e),"purchase_goods"===e?u&&a?a("pembelian"):F(!0):"sales_product"===e?u&&a?a("pos"):R(!0):"expense"===e?u&&a?a("expense"):M(!0):"inventory_update"===e?u&&a?a("inventory"):z(!0):"cash_bank"===e?u&&a?a("kasbank"):V(!0):"debt_receivable"===e?u&&a?a("debt"):H(!0):"customer"===e?u&&a?a("customer"):X(!0):"insight"===e&&(u&&a?a("insight"):Y(!0))},isOpen:q,onOpenChange:J})}),(0,Fe.jsx)("textarea",{ref:ye,value:h,onChange:e=>{p(e.target.value),(e=>{const t=e.toLowerCase(),n=ke.some(e=>t.startsWith(e));if(!n)return ne(!1),oe(!1),ie(!1),void le(!1);if(ke.find(e=>t==="".concat(e," "))&&e!==me.current)return de(""),ne(!0),oe(!1),ie(!1),le(!1),void(me.current=e);if(n&&!t.includes("sejumlah")){const n=ke.find(e=>t.startsWith(e));if(n){const t=e.substring(n.length).trim();if(t.length>=2)return de(t),ne(!0),oe(!1),ie(!1),void le(!1)}}if(t.match(/sejumlah\s+(\d+)\s+$/)&&e!==me.current)return ie(!0),ne(!1),oe(!1),le(!1),void(me.current=e);const r=e.match(/sejumlah\s+\d+\s+(\w+)\s+$/i);if(r&&!t.includes("harga")&&e!==me.current){const t=r[1].toLowerCase();if([...Ce,...je].includes(t)){const n="".concat(e.trim()," harga ");return p(n),fe(t),ie(!1),void(me.current=n)}}const o=e.match(/harga\s+(\d+(?:\.\d+)?)\s*(r|ri|rb|rib|ribu|k|jt|juta)?\s+$/i);if(o&&e!==me.current){var a;const t=parseFloat(o[1].replace(/\./g,"")),n=(null===(a=o[2])||void 0===a?void 0:a.toLowerCase())||"";let r=t;n.includes("jt")||n.includes("juta")?r=1e6*t:n.match(/^(r|ri|rb|rib|ribu|k)$/)&&(r=1e3*t);const i=new Intl.NumberFormat("id-ID").format(r),s=pe||"unit",l=e.substring(0,e.toLowerCase().lastIndexOf("harga")),c="".concat(l,"harga Rp").concat(i," per ").concat(s," isi ");return p(c),me.current=c,ie(!1),void ne(!1)}if(e.match(/isi\s+(\d+)\s+$/i)&&!t.includes("dari")&&e!==me.current){const t="".concat(e.trim()," per pcs dari ");return p(t),me.current=t,oe(!0),ne(!1),ie(!1),void le(!1)}const i=t.match(/dari\s+(.*)$/);if(i){if(0===i[1].length&&e!==me.current)return he(""),oe(!0),ne(!1),ie(!1),le(!1),void(me.current=e);if(i[1].length>=2)return he(i[1]),oe(!0),ne(!1),ie(!1),void le(!1)}ne(!1),oe(!1),ie(!1),le(!1)})(e.target.value)},onKeyPress:e=>{/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Pe())},placeholder:"Ketik pesan...",rows:1,className:"flex-1 bg-transparent border-none outline-none focus:ring-0 focus:outline-none resize-none text-sm text-neutral-800 placeholder-neutral-400",style:{minHeight:"24px",maxHeight:"120px",border:"none",outline:"none",boxShadow:"none",lineHeight:"1.5"}}),(0,Fe.jsx)("button",{onClick:h.trim()?Pe:()=>{u&&a?a("pos"):R(!0)},disabled:!!h.trim()&&g,className:"flex-shrink-0 flex items-center justify-center disabled:opacity-50 transition-all",style:{width:"29px",height:"29px",marginBottom:"0px"},"aria-label":h.trim()?"Send message":"Scan product",children:(0,Fe.jsx)("img",{src:h.trim()?"/icons/sendbutton.png":"/icons/CAM.png",alt:h.trim()?"Send":"Camera",style:{width:"29px",height:"29px",objectFit:"contain"}})})]})]}),(0,Fe.jsx)("style",{children:'\n          @keyframes fadeInScale {\n            from {\n              opacity: 0;\n              transform: scale(0.8);\n            }\n            to {\n              opacity: 1;\n              transform: scale(1);\n            }\n          }\n\n          @keyframes fadeInUp {\n            from {\n              opacity: 0;\n              transform: translateY(8px);\n            }\n            to {\n              opacity: 1;\n              transform: translateY(0);\n            }\n          }\n\n          /* Receipt card styling - labels left, values right */\n          .receipt-card table {\n            width: 100%;\n            text-align: left;\n          }\n          .receipt-card td:first-child {\n            text-align: left;\n            color: #666;\n          }\n          .receipt-card td:last-child {\n            text-align: right;\n            font-weight: 500;\n          }\n          .receipt-card tr {\n            border-bottom: 1px solid #e5e7eb;\n          }\n          .receipt-card tr td {\n            padding: 6px 0;\n          }\n          /* GRAND TOTAL with lime underline */\n          .receipt-card div[style*="GRAND TOTAL"],\n          .receipt-card span:contains("GRAND TOTAL"),\n          .receipt-card td:contains("GRAND TOTAL") {\n            border-bottom: 2px solid #65a30d;\n            padding-bottom: 8px;\n          }\n          /* Force milky-receipt to be transparent with no padding */\n          .milky-receipt {\n            background: transparent !important;\n            padding: 0 !important;\n            border-radius: 0 !important;\n          }\n          /* Compact receipt header */\n          .milky-receipt > div:first-child {\n            margin-bottom: 12px !important;\n            padding-bottom: 12px !important;\n          }\n        '})]}),(0,Fe.jsx)(ct,{children:k&&!u&&(0,Fe.jsx)(hc.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:M_,className:"fixed inset-0 z-50",children:(0,Fe.jsx)(Jx,{isOpen:!0,onClose:()=>{C(!1),B(null)},isMobile:o,isEmbedded:!0,onTransactionComplete:Ne,scannedProductData:P})},"purchase-modal")}),(0,Fe.jsx)(ct,{children:T&&!u&&(0,Fe.jsx)(hc.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:M_,className:"fixed inset-0 z-50",children:(0,Fe.jsx)(Wy,{tenantId:(null===n||void 0===n?void 0:n.id)||"",onClose:()=>M(!1),onTransactionComplete:Ne})},"beban-modal")}),!u&&(0,Fe.jsx)($w,{isOpen:L,onClose:()=>z(!1),isMobile:o}),(0,Fe.jsx)(ct,{children:W&&!u&&(0,Fe.jsx)(hc.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:M_,className:"fixed inset-0 z-50",children:(0,Fe.jsx)(rC,{isOpen:W,onClose:()=>V(!1),isMobile:o})},"kasbank-modal")}),(0,Fe.jsx)(ct,{children:U&&!u&&(0,Fe.jsx)(hc.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:M_,className:"fixed inset-0 z-50",children:(0,Fe.jsx)(d_,{isOpen:U,onClose:()=>H(!1),isMobile:o})},"debt-modal")}),(0,Fe.jsx)(ct,{children:G&&!u&&(0,Fe.jsx)(hc.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:M_,className:"fixed inset-0 z-50",children:(0,Fe.jsx)(m_,{isOpen:G,onClose:()=>X(!1),isMobile:o})},"customer-modal")}),(0,Fe.jsx)(ct,{children:K&&!u&&(0,Fe.jsx)(hc.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:M_,className:"fixed inset-0 z-50",children:(0,Fe.jsx)(T_,{isOpen:K,onClose:()=>Y(!1),isMobile:o})},"insight-modal")}),(0,Fe.jsx)(Rv,{isOpen:j,productId:N,productName:E,onClose:()=>_(!1),onSuccess:e=>{console.log("[ChatPanel] Barcode registered:",e),m(t=>t.map(t=>{if(t.content.includes('data-product-id="'.concat(N,'"'))){const n=t.content.replace(/<div data-product-id="[^"]*" data-product-name="[^"]*"[^>]*class="barcode-register-btn"[^>]*>\u274e Daftarkan Barcode<\/div>/,'<div style="font-size:12px;color:#10b981;margin-top:4px">\u2705 Barcode: '.concat(e,"</div>"));return qe(qe({},t),{},{content:n})}return t})),_(!1)}}),(0,Fe.jsx)(ct,{children:D&&n&&!u&&(0,Fe.jsx)(hc.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:M_,className:"fixed inset-0 z-50 bg-white",children:(0,Fe.jsx)(qv,{tenantId:n.id,onClose:()=>{R(!1),ee(null)},onTransactionComplete:Ne,initialItems:null===$||void 0===$?void 0:$.items,initialPaymentMethod:null===$||void 0===$?void 0:$.paymentMethod,onPrefillProcessed:()=>ee(null)})},"pos-mobile")}),(0,Fe.jsx)(ct,{children:O&&n&&(0,Fe.jsx)(hc.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:M_,className:"fixed inset-0 z-50 bg-white",children:(0,Fe.jsx)(Ab,{tenantId:n.id,onClose:()=>F(!1),onTransactionComplete:Ne})},"pembelian-mobile")})]}):(0,Fe.jsxs)("div",{className:"flex flex-col items-center justify-center h-full bg-white text-gray-400",children:[(0,Fe.jsx)("svg",{className:"w-16 h-16 mb-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,Fe.jsx)("p",{className:"text-sm",children:"Select a tenant to start chatting"})]})},O_={profile:["Owner","Manager","Kasir","Staff","Bendahara"],team:["Owner","Manager"],settings:["Owner","Manager"],data:["Owner","Manager","Bendahara"],billing:["Owner"],dangerZone:["Owner"]},F_=e=>{let{tenantId:t,tenantName:n,userRole:r,onClose:o,isEmbedded:a=!1}=e;const i=e=>{var t,n;return null!==(t=null===(n=O_[e])||void 0===n?void 0:n.includes(r))&&void 0!==t&&t},s=[{id:"leave",icon:"\ud83d\udeaa",label:"Keluar Tenant",description:"Lepas akses dari tenant ini",show:"Owner"!==r},{id:"delete",icon:"\ud83d\uddd1\ufe0f",label:"Hapus Tenant",description:"Hapus permanen tenant ini",show:"Owner"===r}];return(0,Fe.jsxs)("div",{className:"flex flex-col bg-white h-full ".concat(a?"rounded-l-2xl shadow-xl":""),style:{minWidth:a?"320px":"100%"},children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 border-b border-neutral-100",children:[(0,Fe.jsx)("h2",{className:"text-lg font-semibold text-neutral-800",children:"Settings"}),(0,Fe.jsx)("button",{onClick:o,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-neutral-100 transition-colors",children:(0,Fe.jsx)("svg",{className:"w-5 h-5 text-neutral-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Fe.jsx)("div",{className:"px-4 py-4",children:(0,Fe.jsxs)("div",{className:"bg-neutral-50 rounded-xl p-4 flex items-center gap-3",children:[(0,Fe.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-500 rounded-xl flex items-center justify-center text-white text-xl font-bold shadow-sm",children:n.charAt(0).toUpperCase()}),(0,Fe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Fe.jsx)("div",{className:"font-semibold text-neutral-800 truncate",children:n}),(0,Fe.jsxs)("div",{className:"text-sm text-neutral-500 flex items-center gap-1",children:[(0,Fe.jsx)("span",{className:"text-yellow-500",children:"\u2b50"}),(0,Fe.jsx)("span",{children:r})]})]})]})}),(0,Fe.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:[(0,Fe.jsx)("div",{className:"space-y-1",children:[{id:"profile",icon:"\ud83d\udc64",label:"Profil Toko",description:"Nama, logo, alamat"},{id:"team",icon:"\ud83d\udc65",label:"Tim & Akses",description:"Kelola collaborator"},{id:"settings",icon:"\u2699\ufe0f",label:"Pengaturan",description:"Notifikasi, format"},{id:"data",icon:"\ud83d\udcca",label:"Data & Laporan",description:"Export, backup"},{id:"billing",icon:"\ud83d\udcb3",label:"Langganan",description:"Plan & billing"}].map(e=>i(e.id)?(0,Fe.jsxs)("button",{className:"w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-neutral-50 transition-colors text-left group",children:[(0,Fe.jsx)("span",{className:"text-xl",children:e.icon}),(0,Fe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Fe.jsx)("div",{className:"font-medium text-neutral-800 group-hover:text-orange-600 transition-colors",children:e.label}),(0,Fe.jsx)("div",{className:"text-xs text-neutral-400",children:e.description})]}),(0,Fe.jsx)("svg",{className:"w-4 h-4 text-neutral-300 group-hover:text-neutral-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},e.id):null)}),i("dangerZone")&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("div",{className:"my-4 border-t border-neutral-100"}),(0,Fe.jsx)("div",{className:"space-y-1",children:s.map(e=>e.show?(0,Fe.jsxs)("button",{className:"w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-red-50 transition-colors text-left group",children:[(0,Fe.jsx)("span",{className:"text-xl",children:e.icon}),(0,Fe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Fe.jsx)("div",{className:"font-medium text-red-600",children:e.label}),(0,Fe.jsx)("div",{className:"text-xs text-neutral-400",children:e.description})]})]},e.id):null)})]})]}),(0,Fe.jsx)("div",{className:"px-4 py-3 border-t border-neutral-100",children:(0,Fe.jsxs)("div",{className:"text-xs text-neutral-400 text-center",children:["Tenant ID: ",(0,Fe.jsx)("span",{className:"font-mono",children:t})]})})]})},L_=e=>{let{active:t}=e;return(0,Fe.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:t?"#262626":"#737373",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:t?1:.6},children:(0,Fe.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})},z_=[{id:"promo",icon:"/icons/PROMO.png",iconActive:"/icons/PROMO_HOVER.png",label:"Promo"},{id:"tautan",icon:"/icons/TAUTAN.png",iconActive:"/icons/TAUTA_HOVER.png",label:"Tautan"},{id:"chat",icon:"",iconActive:"",label:"Chat",isSvg:!0},{id:"setting",icon:"/icons/SETTING.png",iconActive:"/icons/SETTING_HOVER.png",label:"Setting"}],W_=e=>{let{activeTab:t,onTabChange:n}=e;return(0,Fe.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 px-4 py-3",style:{backgroundColor:"transparent",paddingBottom:"max(12px, env(safe-area-inset-bottom))"},children:(0,Fe.jsx)("div",{className:"bg-white/65 backdrop-blur-md rounded-xl flex items-center justify-around border border-neutral-200/60",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.08)",height:"56px"},children:z_.map(e=>{const r=t===e.id;return(0,Fe.jsxs)("button",{onClick:()=>n(e.id),className:"flex flex-col items-center justify-center flex-1 h-full relative transition-all",children:[e.isSvg?(0,Fe.jsx)(L_,{active:r}):(0,Fe.jsx)("img",{src:r?e.iconActive:e.icon,alt:e.label,className:"w-6 h-6",style:{opacity:r?1:.6}}),(0,Fe.jsx)("span",{className:"text-xs mt-0.5",style:{color:r?"#262626":fc},children:e.label})]},e.id)})})})};var V_=n(361),U_=n.n(V_);const H_=e=>{let{isOpen:n,onClose:r,onScanSuccess:o}=e;const[a,i]=(0,t.useState)("idle"),[s,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(null),p=(0,t.useRef)(null),f=(0,t.useRef)(null),m=(0,t.useRef)(null),g=(0,t.useCallback)(async()=>{try{d(null),i("scanning"),l("Arahkan kamera ke QR code");const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});m.current=e,h(e)}catch(e){console.error("Camera error:",e),d("NotAllowedError"===e.name?"Izinkan akses kamera untuk scan QR code":"Gagal mengakses kamera"),i("error")}},[]),x=(0,t.useCallback)(()=>{const e=document.createElement("canvas"),t=e.getContext("2d");f.current=setInterval(()=>{if(p.current&&4===p.current.readyState&&t){e.width=p.current.videoWidth,e.height=p.current.videoHeight,t.drawImage(p.current,0,0);try{const n=t.getImageData(0,0,e.width,e.height),r=U_()(n.data,e.width,e.height);r&&r.data&&(console.log("[QRScanner] QR detected:",r.data),y(r.data))}catch(iN){}}},300)},[]),y=async e=>{f.current&&(clearInterval(f.current),f.current=null),i("approving"),l("QR code terdeteksi! Login otomatis...");const t=e.match(/milkyhoop:\/\/login\?token=([^&]+)/);if(!t)return i("error"),void l("QR code tidak valid. Silakan scan QR dari halaman login desktop.");const n=t[1];try{const e=Ae(),t=await fetch("/api/auth/qr/scan",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({token:n})}),a=await t.json();if(!t.ok||!a.success)return i("error"),void l(a.detail||"Gagal memproses QR code");const s=await fetch("/api/auth/qr/approve",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({token:n,approved:!0})}),c=await s.json();s.ok&&c.success?(i("approved"),l("Login berhasil! Desktop akan masuk otomatis."),null===o||void 0===o||o(),setTimeout(()=>r(),1500)):(i("error"),l(c.detail||"Gagal menyetujui login"))}catch(a){console.error("Auto-approve error:",a),i("error"),l("Terjadi kesalahan. Silakan coba lagi.")}},v=async e=>{if(!e.trim())return;let t=e.trim();const n=t.match(/token=([^&]+)/);n&&(t=n[1]),y("milkyhoop://login?token=".concat(t))};return(0,t.useEffect)(()=>{(async()=>{if("scanning"===a&&u&&p.current)try{p.current.srcObject=u,await p.current.play(),x()}catch(iN){console.error("Error playing video:",iN)}})()},[a,u,x]),(0,t.useEffect)(()=>(n?g():(f.current&&(clearInterval(f.current),f.current=null),m.current&&(console.log("[QRScanner] Stopping camera stream on close"),m.current.getTracks().forEach(e=>e.stop()),m.current=null),h(null),i("idle"),l(""),d(null)),()=>{f.current&&(clearInterval(f.current),f.current=null)}),[n,g]),(0,t.useEffect)(()=>()=>{m.current&&(console.log("[QRScanner] Cleanup on unmount"),m.current.getTracks().forEach(e=>e.stop()),m.current=null)},[]),n?(0,Fe.jsx)("div",{className:"fixed inset-0 bg-black/80 z-[10000] flex items-center justify-center p-4",children:(0,Fe.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden",children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,Fe.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"approved"===a?"Login Berhasil":"approving"===a?"Memproses...":"Scan QR Code"}),(0,Fe.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Fe.jsxs)("div",{className:"p-4",children:["scanning"===a&&(0,Fe.jsxs)("div",{className:"relative aspect-square bg-black rounded-lg overflow-hidden mb-4",children:[(0,Fe.jsx)("video",{ref:p,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),(0,Fe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Fe.jsxs)("div",{className:"w-48 h-48 border-2 border-white rounded-lg relative",children:[(0,Fe.jsx)("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-purple-500 rounded-tl-lg"}),(0,Fe.jsx)("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-purple-500 rounded-tr-lg"}),(0,Fe.jsx)("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-purple-500 rounded-bl-lg"}),(0,Fe.jsx)("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-purple-500 rounded-br-lg"}),(0,Fe.jsx)("div",{className:"absolute left-0 right-0 h-0.5 bg-purple-500 animate-pulse",style:{top:"50%"}})]})})]}),c&&(0,Fe.jsxs)("div",{className:"text-center py-8",children:[(0,Fe.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Fe.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,Fe.jsx)("p",{className:"text-red-600 font-medium",children:c}),(0,Fe.jsx)("button",{onClick:g,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Coba Lagi"})]}),"approving"===a&&(0,Fe.jsxs)("div",{className:"text-center py-8",children:[(0,Fe.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full mx-auto mb-4"}),(0,Fe.jsx)("p",{className:"text-gray-600",children:s})]}),"approved"===a&&(0,Fe.jsxs)("div",{className:"text-center py-8",children:[(0,Fe.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Fe.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Fe.jsx)("p",{className:"text-green-600 font-medium",children:s})]}),"error"===a&&!c&&(0,Fe.jsxs)("div",{className:"text-center py-8",children:[(0,Fe.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Fe.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Fe.jsx)("p",{className:"text-red-600 font-medium",children:s}),(0,Fe.jsx)("button",{onClick:()=>{i("scanning"),l("Arahkan kamera ke QR code"),x()},className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Scan Ulang"})]}),"scanning"===a&&(0,Fe.jsx)("p",{className:"text-center text-gray-600 text-sm",children:s}),"scanning"===a&&(0,Fe.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,Fe.jsx)("p",{className:"text-xs text-gray-500 text-center mb-2",children:"Tidak bisa scan? Masukkan kode token:"}),(0,Fe.jsxs)("div",{className:"flex gap-2",children:[(0,Fe.jsx)("input",{type:"text",placeholder:"Token atau URL QR",className:"flex-1 px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",onKeyDown:e=>{"Enter"===e.key&&v(e.target.value)}}),(0,Fe.jsx)("button",{onClick:e=>{const t=e.currentTarget.previousElementSibling;v(t.value)},className:"px-4 py-2 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700",children:"OK"})]})]})]})]})}):null},G_=e=>{let{isOpen:n,onClose:r}=e;const[o,a]=(0,t.useState)([]),[i,s]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),f=(0,t.useCallback)(async()=>{s(!0),c(null);try{const e=Ae(),t=await fetch("/api/devices",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch devices");const n=await t.json();if(!n.success)throw new Error(n.detail||"Failed to fetch devices");a(n.devices)}catch(e){console.error("Fetch devices error:",e),c(e.message||"Gagal memuat daftar perangkat")}finally{s(!1)}},[]),m=e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime(),r=Math.floor(n/6e4),o=Math.floor(n/36e5),a=Math.floor(n/864e5);return r<1?"Baru saja":r<60?"".concat(r," menit lalu"):o<24?"".concat(o," jam lalu"):a<7?"".concat(a," hari lalu"):t.toLocaleDateString("id-ID")};if((0,t.useEffect)(()=>{n&&f()},[n,f]),!n)return null;const g=o.filter(e=>"mobile"===e.device_type),x=o.filter(e=>"web"===e.device_type);return(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center p-4",children:(0,Fe.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0",children:[(0,Fe.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Perangkat Terhubung"}),(0,Fe.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Fe.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:i?(0,Fe.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Fe.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-purple-200 border-t-purple-600 rounded-full"})}):l?(0,Fe.jsxs)("div",{className:"text-center py-8",children:[(0,Fe.jsx)("p",{className:"text-red-600 mb-4",children:l}),(0,Fe.jsx)("button",{onClick:f,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Coba Lagi"})]}):(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("button",{onClick:()=>u(!0),className:"w-full flex items-center justify-center gap-2 p-4 bg-purple-50 text-purple-600 rounded-xl hover:bg-purple-100 transition-colors mb-6",children:[(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,Fe.jsx)("span",{className:"font-medium",children:"Hubungkan Perangkat Baru"})]}),(0,Fe.jsxs)("div",{className:"mb-6",children:[(0,Fe.jsx)("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Perangkat Utama"}),0===g.length?(0,Fe.jsx)("p",{className:"text-gray-500 text-sm py-4 text-center",children:"Tidak ada perangkat mobile"}):(0,Fe.jsx)("div",{className:"space-y-2",children:g.map(e=>(0,Fe.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,Fe.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("p",{className:"font-medium text-gray-900",children:[e.device_name||"Mobile",e.is_current&&(0,Fe.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"Perangkat ini"})]}),(0,Fe.jsxs)("p",{className:"text-sm text-gray-500",children:["Aktif ",m(e.last_active_at)]})]})]}),e.is_primary&&(0,Fe.jsx)("span",{className:"text-xs text-purple-600 bg-purple-50 px-2 py-1 rounded",children:"Primary"})]},e.id))})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Fe.jsxs)("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide",children:["Perangkat Web (",x.length,")"]}),x.length>0&&(0,Fe.jsx)("button",{onClick:async()=>{if(window.confirm("Logout semua perangkat web? Semua sesi desktop akan diakhiri.")){p("all-web");try{const e=Ae(),t=await fetch("/api/devices/logout-all-web",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}),n=await t.json();t.ok&&n.success?(await f(),alert("".concat(n.count," perangkat web berhasil di-logout"))):alert(n.detail||"Gagal logout perangkat web")}catch(e){console.error("Logout all web error:",e),alert("Terjadi kesalahan")}finally{p(null)}}},disabled:"all-web"===h,className:"text-sm text-red-600 hover:text-red-700 font-medium disabled:opacity-50",children:"all-web"===h?"Loading...":"Logout Semua"})]}),0===x.length?(0,Fe.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,Fe.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,Fe.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,Fe.jsx)("p",{className:"text-gray-500 text-sm",children:"Tidak ada sesi web aktif"}),(0,Fe.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"Scan QR di desktop untuk menghubungkan"})]}):(0,Fe.jsx)("div",{className:"space-y-2",children:x.map(e=>(0,Fe.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,Fe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fe.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,Fe.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("p",{className:"font-medium text-gray-900",children:e.device_name||"Web Browser"}),(0,Fe.jsxs)("p",{className:"text-sm text-gray-500",children:["Aktif ",m(e.last_active_at)]})]})]}),(0,Fe.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Logout perangkat ini?")){p(e);try{const t=Ae(),n=await fetch("/api/devices/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(n.ok)await f();else{const e=await n.json();alert(e.detail||"Gagal logout perangkat")}}catch(t){console.error("Logout device error:",t),alert("Terjadi kesalahan")}finally{p(null)}}})(e.id),disabled:h===e.id,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",children:h===e.id?(0,Fe.jsx)("div",{className:"animate-spin w-5 h-5 border-2 border-red-200 border-t-red-600 rounded-full"}):(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]},e.id))})]})]})}),(0,Fe.jsx)("div",{className:"p-4 border-t bg-gray-50 flex-shrink-0",children:(0,Fe.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Perangkat web akan otomatis logout setelah 30 hari tidak aktif"})})]})}),(0,Fe.jsx)(H_,{isOpen:d,onClose:()=>u(!1),onScanSuccess:()=>{u(!1),f()}})]})},X_=e=>{let{isOpen:t,onStayHere:n,onGoToBlog:r}=e;return t?(0,Fe.jsx)("div",{className:"fixed inset-0 bg-white z-[99999] flex items-center justify-center p-4",children:(0,Fe.jsxs)("div",{className:"max-w-sm w-full text-center",children:[(0,Fe.jsx)("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,Fe.jsx)("svg",{className:"w-10 h-10 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,Fe.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Milkyhoop dibuka di tab lain"}),(0,Fe.jsx)("p",{className:"text-gray-600 mb-8",children:"Kamu ingin tetap buka di sini?"}),(0,Fe.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,Fe.jsx)("button",{onClick:n,className:"w-full py-3 bg-orange-500 text-white font-semibold rounded-lg hover:bg-orange-600 transition-colors",children:"Ya, buka di sini"}),(0,Fe.jsx)("button",{onClick:r,className:"w-full py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-colors",children:"Tidak, tutup tab ini"})]})]})}):null};function K_(){const[e,n]=(0,t.useState)(!1),r=(0,t.useRef)(null),o=(0,t.useRef)("tab_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))),a=(0,t.useRef)(!0);const i=(0,t.useCallback)(()=>{if(r.current){const e={type:"SESSION_ACTIVE",tabId:o.current,timestamp:Date.now()};r.current.postMessage(e),a.current=!0,n(!1)}},[]),s=(0,t.useCallback)(()=>{i()},[i]),l=(0,t.useCallback)(()=>{window.location.href="/blog"},[]);return(0,t.useEffect)(()=>{if("undefined"===typeof BroadcastChannel)return void console.warn("[SessionSync] BroadcastChannel not supported");const e=new BroadcastChannel("milkyhoop_session");r.current=e,e.onmessage=e=>{const t=e.data;"SESSION_ACTIVE"===t.type&&t.tabId!==o.current&&(console.log("[SessionSync] Session taken by another tab:",t.tabId),a.current=!1,n(!0)),"SESSION_RECLAIM"===t.type&&t.tabId!==o.current&&(console.log("[SessionSync] Session reclaimed by another tab:",t.tabId),a.current=!1,n(!0))};const t=setTimeout(()=>{i()},100),s=()=>{"visible"===document.visibilityState&&a.current};return document.addEventListener("visibilitychange",s),()=>{clearTimeout(t),document.removeEventListener("visibilitychange",s),e.close(),r.current=null}},[i]),{isSessionTakenOver:e,handleStayHere:s,handleGoToBlog:l}}const Y_={duration:.3,ease:[.4,0,.2,1]},q_=()=>{const e=Z(),[n,r]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0),[i,s]=(0,t.useState)(()=>{if(window.innerWidth>=768){const e=localStorage.getItem("activePanel");if(e&&["none","pos","inventory","kasbank","debt","customer","insight","purchase","expense","pembelian","settings"].includes(e))return e}return"none"}),l="pos"===i,c="inventory"===i,d="kasbank"===i,u="debt"===i,h="customer"===i,p="insight"===i,f="purchase"===i,m="expense"===i,g="pembelian"===i,x="settings"===i,y="none"!==i,[v,b]=(0,t.useState)(null),[w,k]=(0,t.useState)(null),[C,j]=(0,t.useState)("chat"),[_,N]=(0,t.useState)(!1),[S,E]=(0,t.useState)(!1),A=window.innerWidth<768,P=window.innerWidth>=1024,{isSessionTakenOver:B,handleStayHere:I,handleGoToBlog:T}=K_(),M=!!P&&B,{showForceLogoutModal:D,handleStayHere:R,handleGoToBlog:O}=function(){const[e,n]=(0,t.useState)(!1),[r,o]=(0,t.useState)(""),a=(0,t.useCallback)(()=>{console.log("[ForceLogout] Performing logout"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_timestamp"),localStorage.removeItem("user_info"),localStorage.removeItem("device_id"),window.location.reload()},[]),i=(0,t.useCallback)(()=>{console.log("[ForceLogout] User chose to stay here - clearing and reloading"),a()},[a]),s=(0,t.useCallback)(()=>{console.log("[ForceLogout] User chose to go to blog"),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_timestamp"),localStorage.removeItem("user_info"),localStorage.removeItem("device_id"),window.location.href="/blog"},[]);return(0,t.useEffect)(()=>{const e=e=>{var t;const r=e;console.log("[ForceLogout] Received force_logout event from App root"),o((null===(t=r.detail)||void 0===t?void 0:t.reason)||"Session digantikan oleh login baru"),n(!0)};return window.addEventListener("deviceForceLogout",e),()=>{window.removeEventListener("deviceForceLogout",e)}},[]),{showForceLogoutModal:e,forceLogoutReason:r,handleStayHere:i,handleGoToBlog:s}}(),F=D?"ws":M?"sync":null,L=null!==F,z="ws"===F?R:"sync"===F?I:()=>{},W="ws"===F?O:"sync"===F?T:()=>{};(0,t.useEffect)(()=>{A||localStorage.setItem("activePanel",i)},[i,A]);const[V,U]=(0,t.useState)(()=>{if(!A){const e=localStorage.getItem("activeTenantId");return e?{id:e,name:"Loading..."}:null}const e=new URLSearchParams(window.location.search).get("tenant"),t=localStorage.getItem("mobile_active_tenant");return e?{id:e,name:"Loading..."}:t?{id:t,name:"Loading..."}:null}),[H,G]=(0,t.useState)(()=>{if(!A)return!1;const e=new URLSearchParams(window.location.search),t=e.get("tenant"),n=e.get("action"),r=localStorage.getItem("mobile_chat_state");return!(!t&&!n)||"chat"===r});(0,t.useEffect)(()=>{if(!A)return;const t=new URLSearchParams(e.search),n=t.get("tenant"),r=t.get("action");r&&n&&(console.log("[Dashboard] Detected action parameter, ensuring chat is shown:",r),G(!0),localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",n))},[e.search,A]),(0,t.useEffect)(()=>{(async()=>{try{a(!0);const e=await(async()=>{try{var e;const t=await kc("/api/user/tenants",{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)return t.status,await Cc();const n=await t.json();console.log("[getUserTenants] API response:",n);const r=(null===(e=n.tenants)||void 0===e?void 0:e.map(e=>{var t,n;return{id:e.tenant_id||e.id,name:e.display_name||e.name||e.tenant_id,avatar:e.avatar,status:e.status||"offline",lastMessage:(null===(t=e.last_message)||void 0===t?void 0:t.content)||"",lastMessageTime:(null===(n=e.last_message)||void 0===n?void 0:n.timestamp)||"Now",role:e.role||"Owner",isPrivate:e.is_private}}))||[];return console.log("[getUserTenants] Mapped tenants:",r),r}catch(t){return await Cc()}})();console.log("[Dashboard] Fetched tenants from API:",e);const t=[{id:"milky-assistant",name:"Milky Assistant",avatar:"\ud83e\udd16",status:"online",lastMessage:"Siap membantu Anda!",lastMessageTime:"Now"},...e];if(console.log("[Dashboard] All tenants (with Milky Assistant):",t.map(e=>({id:e.id,name:e.name}))),r(t),A){const e=new URLSearchParams(window.location.search),n=e.get("tenant"),r=e.get("action"),o=localStorage.getItem("mobile_active_tenant");if(n){const e=t.find(e=>e.id===n);if(e)U(e),G(!0),localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",n),console.log("[Dashboard] Set active tenant from URL:",e.id,"action:",r);else{console.log("[Dashboard] Tenant not in list, creating temp:",n);U({id:n,name:"Loading..."}),G(!0),localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",n)}}else if(o){const e=t.find(e=>e.id===o);if(e){U(e);const t=localStorage.getItem("mobile_chat_state");G("chat"===t)}}}else{const e=localStorage.getItem("activeTenantId");if(e){const n=t.find(t=>t.id===e);U(n||t[0])}else{const e=t.find(e=>"milky-assistant"!==e.id)||t[0];U(e)}}}catch(e){console.error("Failed to fetch tenants:",e);const t={id:"milky-assistant",name:"Milky Assistant",avatar:"\ud83e\udd16",status:"online"};r([t]),A||U(t)}finally{a(!1)}})()},[]),(0,t.useEffect)(()=>{V&&(A||localStorage.setItem("activeTenantId",V.id))},[V,A]);const X=e=>{let t=n.find(t=>t.id===e);t||(console.log("[handleTenantSelect] Creating temp tenant for:",e),t={id:e,name:e}),U(t),G(!0),A&&(localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",e))},K=()=>{G(!1),A&&(localStorage.setItem("mobile_chat_state","list"),localStorage.removeItem("mobile_active_tenant"))};return(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("div",{className:"md:hidden h-screen flex flex-col overflow-hidden",children:[(0,Fe.jsx)("div",{className:"flex-1 overflow-hidden",children:"profile"===C?(0,Fe.jsx)(F_,{tenantId:(null===V||void 0===V?void 0:V.id)||"",tenantName:(null===V||void 0===V?void 0:V.name)||"",userRole:(null===V||void 0===V?void 0:V.role)||"Owner",onClose:()=>j("chat"),isEmbedded:!1}):H?x?(0,Fe.jsx)(F_,{tenantId:(null===V||void 0===V?void 0:V.id)||"",tenantName:(null===V||void 0===V?void 0:V.name)||"",userRole:(null===V||void 0===V?void 0:V.role)||"Owner",onClose:()=>s("none"),isEmbedded:!1}):(0,Fe.jsx)(R_,{activeTenant:V,onBack:K,onPanelToggle:e=>s(e),activePanel:i,isMobile:!0}):(0,Fe.jsx)(vc,{tenants:n,activeTenant:V,onSelectTenant:X,isLoading:o})}),!H&&(0,Fe.jsx)(W_,{activeTab:C,onTabChange:e=>{j(e),"devices"===e&&N(!0),"tautan"===e&&E(!0)}})]}),(0,Fe.jsxs)("div",{className:"hidden md:block",style:{position:"relative",height:"100vh",width:"100vw",overflow:"hidden"},children:[(0,Fe.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"64px",height:"100%",overflow:"hidden"},children:(0,Fe.jsx)(mc,{})}),!(y&&P)&&(0,Fe.jsx)("div",{style:{position:"absolute",left:"64px",top:0,width:"400px",height:"100%",overflow:"hidden"},children:(0,Fe.jsx)(vc,{tenants:n,activeTenant:V,onSelectTenant:X,isLoading:o})}),(0,Fe.jsx)(ct,{mode:"wait",children:y&&P?(0,Fe.jsxs)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},style:{position:"absolute",left:"64px",right:0,top:0,height:"100%",overflow:"hidden",display:"flex"},children:[(0,Fe.jsxs)(hc.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:Y_,style:{width:"50%",height:"100%",borderRight:"1px solid #e5e7eb"},children:[l&&(0,Fe.jsx)(qv,{tenantId:(null===V||void 0===V?void 0:V.id)||"",onClose:()=>{s("none"),k(null)},isEmbedded:!0,onTransactionComplete:e=>{b(e),setTimeout(()=>b(null),100)},initialItems:null===w||void 0===w?void 0:w.items,initialPaymentMethod:null===w||void 0===w?void 0:w.paymentMethod,onPrefillProcessed:()=>k(null)}),c&&(0,Fe.jsx)($w,{isOpen:!0,onClose:()=>s("none"),isEmbedded:!0}),d&&(0,Fe.jsx)(rC,{isOpen:!0,onClose:()=>s("none"),isEmbedded:!0}),u&&(0,Fe.jsx)(d_,{isOpen:!0,onClose:()=>s("none"),isEmbedded:!0}),h&&(0,Fe.jsx)(m_,{isOpen:!0,onClose:()=>s("none"),isEmbedded:!0}),p&&(0,Fe.jsx)(T_,{isOpen:!0,onClose:()=>s("none"),isEmbedded:!0}),f&&(0,Fe.jsx)(Jx,{isOpen:!0,onClose:()=>s("none"),isEmbedded:!0,onTransactionComplete:e=>{b(e),setTimeout(()=>b(null),100)}}),m&&(0,Fe.jsx)(Wy,{tenantId:(null===V||void 0===V?void 0:V.id)||"",onClose:()=>s("none"),onTransactionComplete:e=>{b(e),setTimeout(()=>b(null),100)}}),g&&(0,Fe.jsx)(Ab,{tenantId:(null===V||void 0===V?void 0:V.id)||"",onClose:()=>s("none"),onTransactionComplete:e=>{b(e),setTimeout(()=>b(null),100)}}),x&&(0,Fe.jsx)(F_,{tenantId:(null===V||void 0===V?void 0:V.id)||"",tenantName:(null===V||void 0===V?void 0:V.name)||"",userRole:(null===V||void 0===V?void 0:V.role)||"Owner",onClose:()=>s("none"),isEmbedded:!0})]}),(0,Fe.jsx)("div",{style:{width:"50%",height:"100%"},children:(0,Fe.jsx)(R_,{activeTenant:V,onBack:K,onPanelToggle:e=>s(e),activePanel:i,externalTransactionMessage:v,onPOSPrefillData:k})})]},"".concat(i,"-layout")):(0,Fe.jsx)(hc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},style:{position:"absolute",left:"464px",right:0,top:0,height:"100%",overflow:"hidden"},children:(0,Fe.jsx)(R_,{activeTenant:V,onBack:K,onPanelToggle:e=>s(e),activePanel:i,onPOSPrefillData:k})},"normal-layout")})]}),(0,Fe.jsx)(G_,{isOpen:"devices"===C,onClose:()=>j("chat")}),(0,Fe.jsx)(Zv,{isOpen:S,onClose:()=>{E(!1),j("chat")},onBarcodeDetected:async e=>{const t=e.match(/milkyhoop:\/\/login\?token=([^&]+)/);if(!t)return void console.log("[Dashboard] Not a login QR code:",e);const n=t[1],r=Ae();try{if(!(await fetch("/api/auth/qr/scan",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({token:n})})).ok)return void console.error("[Dashboard] QR scan failed");(await fetch("/api/auth/qr/approve",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({token:n,approved:!0})})).ok&&(console.log("[Dashboard] QR login approved - desktop logged in"),E(!1),j("chat"))}catch(o){console.error("[Dashboard] QR login error:",o)}},scannerText:"Find a qr code to scan"}),(0,Fe.jsx)(X_,{isOpen:L,onStayHere:z,onGoToBlog:W})]})};class Z_{constructor(e,t){this.ws=null,this.token=void 0,this.onEvent=void 0,this.reconnectAttempts=0,this.maxReconnectAttempts=3,this.pingInterval=null,this.token=e,this.onEvent=t}connect(){const e="https:"===window.location.protocol?"wss:":"ws:",t="".concat(e,"//").concat(window.location.host,"/api/auth/qr/ws/").concat(this.token);console.log("[QRWebSocket] Connecting to:",t),this.ws=new WebSocket(t),this.ws.onopen=()=>{console.log("[QRWebSocket] Connected"),this.reconnectAttempts=0,this.startPing()},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);console.log("[QRWebSocket] Event received:",t.event),this.onEvent(t),"approved"!==t.event&&"rejected"!==t.event&&"expired"!==t.event||this.disconnect()}catch(iN){console.error("[QRWebSocket] Failed to parse message:",iN)}},this.ws.onerror=e=>{console.error("[QRWebSocket] Error:",e),this.onEvent({event:"error",message:"WebSocket connection error"})},this.ws.onclose=e=>{console.log("[QRWebSocket] Closed:",e.code,e.reason),this.stopPing(),1e3!==e.code&&this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,console.log("[QRWebSocket] Reconnecting... attempt ".concat(this.reconnectAttempts)),setTimeout(()=>this.connect(),2e3))}}startPing(){this.pingInterval=setInterval(()=>{var e;(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&this.ws.send(JSON.stringify({event:"ping"}))},3e4)}stopPing(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}disconnect(){this.stopPing(),this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null)}isConnected(){var e;return(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}}const J_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return"https://api.qrserver.com/v1/create-qr-code/?size=".concat(t,"x").concat(t,"&data=").concat(encodeURIComponent(e))},Q_=()=>{const e=Q(),[n]=je(),[r,o]=(0,t.useState)("loading"),[a,i]=(0,t.useState)(null),[s,l]=(0,t.useState)("Memuat QR code..."),[c,d]=(0,t.useState)(120),u=(0,t.useRef)(null),h=(0,t.useRef)(null),p=n.get("reason"),f=(0,t.useCallback)(async()=>{o("loading"),l("Memuat QR code...");try{const e=Ne(),t=Se(),n=await fetch("/api/auth/qr/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fingerprint:e,browser_id:t})});if(!n.ok)throw new Error("Failed to generate QR code");const r=await n.json();if(r.success)return i({token:r.token,qr_url:r.qr_url,expires_at:r.expires_at,ttl_seconds:r.ttl_seconds}),d(r.ttl_seconds),o("ready"),l("Scan QR code dengan perangkat mobile Anda"),r.token;throw new Error(r.detail||"Failed to generate QR code")}catch(e){return console.error("QR generation error:",e),o("error"),l("Gagal memuat QR code. Klik untuk coba lagi."),null}},[]),m=(0,t.useCallback)(t=>{switch(t.event){case"connected":console.log("WebSocket connected");break;case"scanned":o("scanned"),l("QR code di-scan! Menunggu konfirmasi dari mobile...");break;case"approved":o("approved"),l("Login berhasil! Mengalihkan..."),Be(t.access_token,t.refresh_token),t.device_id&&localStorage.setItem("device_id",t.device_id),t.user&&localStorage.setItem("user_info",JSON.stringify(t.user)),window.dispatchEvent(new Event("login_success")),setTimeout(()=>{e("/")},500);break;case"rejected":o("rejected"),l("Login ditolak oleh pengguna mobile"),setTimeout(()=>f(),3e3);break;case"expired":o("expired"),l("QR code kadaluarsa. Klik untuk generate baru.");break;case"error":o("error"),l("Terjadi kesalahan koneksi")}},[e,f]);(0,t.useEffect)(()=>{let e=!0;return(async()=>{const t=await f();t&&e&&(u.current=new Z_(t,m),u.current.connect())})(),()=>{var t;e=!1,null===(t=u.current)||void 0===t||t.disconnect(),h.current&&clearInterval(h.current)}},[f,m]),(0,t.useEffect)(()=>("ready"===r&&c>0&&(h.current=setInterval(()=>{d(e=>e<=1?(o("expired"),l("QR code kadaluarsa. Klik untuk generate baru."),0):e-1)},1e3)),()=>{h.current&&clearInterval(h.current)}),[r]);const g=async()=>{if("expired"===r||"error"===r||"rejected"===r){var e;null===(e=u.current)||void 0===e||e.disconnect();const t=await f();t&&(u.current=new Z_(t,m),u.current.connect())}};return(0,Fe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-white flex items-center justify-center p-4",children:(0,Fe.jsxs)("div",{className:"max-w-md w-full",children:[(0,Fe.jsxs)("div",{className:"text-center mb-8",children:[(0,Fe.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-700 rounded-2xl mx-auto flex items-center justify-center shadow-lg mb-4",children:(0,Fe.jsx)("span",{className:"text-white text-3xl font-bold",children:"m"})}),(0,Fe.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"MilkyHoop"}),(0,Fe.jsx)("p",{className:"text-gray-500 mt-1",children:"Login dengan QR Code"})]}),p&&(0,Fe.jsxs)("div",{className:"mb-6 p-3 bg-amber-50 border border-amber-200 rounded-lg text-amber-800 text-sm text-center",children:["logged_out_remotely"===p&&"Sesi Anda telah diakhiri dari perangkat lain.","session_expired"===p&&"Sesi Anda telah berakhir. Silakan login kembali."]}),(0,Fe.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,Fe.jsx)("div",{className:"relative",children:"ready"===r&&a?(0,Fe.jsxs)("div",{className:"relative",children:[(0,Fe.jsx)("img",{src:J_(a.qr_url,250),alt:"QR Code",className:"w-full max-w-[250px] mx-auto rounded-lg"}),(0,Fe.jsx)("div",{className:"absolute top-2 right-2 bg-white/90 px-2 py-1 rounded-full text-sm font-medium text-gray-600",children:(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))})(c)})]}):(0,Fe.jsx)("div",{className:"w-full aspect-square max-w-[250px] mx-auto rounded-lg bg-gray-100 flex items-center justify-center ".concat("expired"===r||"error"===r?"cursor-pointer hover:bg-gray-200":""),onClick:g,children:(()=>{switch(r){case"loading":return(0,Fe.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full"});case"scanned":return(0,Fe.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,Fe.jsx)("svg",{className:"w-6 h-6 text-yellow-600 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"approved":return(0,Fe.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,Fe.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})});case"rejected":return(0,Fe.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,Fe.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})});case"expired":case"error":return(0,Fe.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200",onClick:g,children:(0,Fe.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})});default:return null}})()})}),(0,Fe.jsx)("div",{className:"mt-6 text-center",children:(0,Fe.jsx)("p",{className:"font-medium ".concat("approved"===r?"text-green-600":"rejected"===r||"error"===r?"text-red-600":"text-gray-700"),children:s})}),(0,Fe.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-100",children:[(0,Fe.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Cara login:"}),(0,Fe.jsxs)("ol",{className:"text-sm text-gray-600 space-y-2",children:[(0,Fe.jsxs)("li",{className:"flex items-start",children:[(0,Fe.jsx)("span",{className:"w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 text-xs font-medium mr-2 mt-0.5",children:"1"}),(0,Fe.jsx)("span",{children:"Buka MilkyHoop di HP Anda"})]}),(0,Fe.jsxs)("li",{className:"flex items-start",children:[(0,Fe.jsx)("span",{className:"w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 text-xs font-medium mr-2 mt-0.5",children:"2"}),(0,Fe.jsx)("span",{children:'Tap menu "Hubungkan Perangkat"'})]}),(0,Fe.jsxs)("li",{className:"flex items-start",children:[(0,Fe.jsx)("span",{className:"w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 text-xs font-medium mr-2 mt-0.5",children:"3"}),(0,Fe.jsx)("span",{children:"Scan QR code ini dengan kamera HP"})]}),(0,Fe.jsxs)("li",{className:"flex items-start",children:[(0,Fe.jsx)("span",{className:"w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 text-xs font-medium mr-2 mt-0.5",children:"4"}),(0,Fe.jsx)("span",{children:"Konfirmasi login di HP Anda"})]})]})]})]}),(0,Fe.jsxs)("p",{className:"text-center text-sm text-gray-500 mt-6",children:["Belum punya akun?"," ",(0,Fe.jsx)("a",{href:"https://milkyhoop.com",className:"text-purple-600 hover:underline",children:"Daftar di HP"})]})]})})};class $_{constructor(e){this.ws=null,this.deviceId=null,this.tabId=void 0,this.handler=null,this.reconnectAttempts=0,this.maxReconnect=10,this.baseBackoff=500,this.keepAliveTimer=null,this.tabId=e}static getInstance(e){return $_.instance||($_.instance=new $_(e)),$_.instance}setHandler(e){this.handler=e}connect(e){if(!e)return;if(this.ws&&this.deviceId===e&&this.ws.readyState===WebSocket.OPEN)return void console.log("[DeviceWS] Already connected to",e.slice(0,8));if(this.ws){console.log("[DeviceWS] Closing existing connection for reconnect");try{this.ws.close(1e3,"reconnect")}catch(sN){}this.cleanup()}this.deviceId=e;const t="https:"===window.location.protocol?"wss:":"ws:",n="".concat(t,"//").concat(window.location.host,"/api/devices/ws/").concat(encodeURIComponent(e),"?tab_id=").concat(encodeURIComponent(this.tabId));console.log("[DeviceWS] Connecting to:",n),this.ws=new WebSocket(n),this.ws.onopen=()=>{this.reconnectAttempts=0,this.startKeepAlive(),console.log("[DeviceWS] Connected successfully")},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);console.log("[DeviceWS] Message received:",t.event||t.type),this.handler&&this.handler(t);const n=t.event||t.type;if(n&&n.startsWith("remote_scan:")){const e=new CustomEvent("remoteScanEvent",{detail:t});window.dispatchEvent(e),console.log("[DeviceWS] Dispatched remoteScanEvent:",n)}}catch(iN){console.warn("[DeviceWS] Malformed message:",e.data)}},this.ws.onclose=e=>{console.warn("[DeviceWS] Closed - code:",e.code,"reason:",e.reason),this.cleanup(),1e3!==e.code&&4001!==e.code&&this.reconnectWithBackoff()},this.ws.onerror=e=>{console.error("[DeviceWS] Error:",e)}}reconnectWithBackoff(){if(this.reconnectAttempts>=this.maxReconnect)return void console.warn("[DeviceWS] Max reconnect attempts reached");const e=Math.min(this.baseBackoff*Math.pow(1.5,this.reconnectAttempts),3e3);this.reconnectAttempts++,console.log("[DeviceWS] Reconnecting in ".concat(e,"ms (attempt ").concat(this.reconnectAttempts,")")),setTimeout(()=>{this.deviceId&&this.connect(this.deviceId)},e)}startKeepAlive(){this.stopKeepAlive(),this.keepAliveTimer=window.setInterval(()=>{var e;(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&this.ws.send(JSON.stringify({event:"ping"}))},3e4)}stopKeepAlive(){this.keepAliveTimer&&(clearInterval(this.keepAliveTimer),this.keepAliveTimer=null)}close(){if(console.log("[DeviceWS] Closing connection (explicit)"),this.ws){try{this.ws.close(1e3,"client_close")}catch(e){}this.cleanup(),this.ws=null,this.deviceId=null}}cleanup(){this.stopKeepAlive()}isConnected(){var e;return(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}getDeviceId(){return this.deviceId}}$_.instance=null;const eN=e=>{let{children:t}=e;return Me()?(0,Fe.jsx)(he,{to:"/",replace:!0}):_e()?(0,Fe.jsx)(Fe.Fragment,{children:t}):(0,Fe.jsx)(he,{to:"/",replace:!0})},tN=()=>_e()?Me()?(0,Fe.jsx)(q_,{}):(0,Fe.jsx)(he,{to:"/login",replace:!0}):Me()?(0,Fe.jsx)(q_,{}):(0,Fe.jsx)(ze,{}),nN=()=>{const[e,n]=(0,t.useState)(!1),{scanId:r,sendResult:o,cancelScan:a}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[n,r]=(0,t.useState)(null),[o,a]=(0,t.useState)(!1),[i,s]=(0,t.useState)(!1),l=(0,t.useRef)(e);l.current=e,(0,t.useEffect)(()=>{const e=e=>{const t=e,{event:n,scan_id:o}=t.detail;var i,s,c,d;"remote_scan:request"===n&&o&&(console.log("[RemoteScanRequest] Received scan request:",o),r(o),a(!0),null===(i=(s=l.current).onScanRequested)||void 0===i||i.call(s,o)),"remote_scan:cancel"===n&&(console.log("[RemoteScanRequest] Scan cancelled by desktop"),r(null),a(!1),null===(c=(d=l.current).onScanCancelled)||void 0===c||c.call(d))};return window.addEventListener("remoteScanEvent",e),()=>{window.removeEventListener("remoteScanEvent",e)}},[]);const c=(0,t.useCallback)(async e=>{if(!n||i)return console.warn("[RemoteScanRequest] No active scan or already sending"),!1;s(!0);try{const t=Ae(),o=await fetch("/api/devices/remote-scan/result",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({scan_id:n,barcode:e})}),i=await o.json();return console.log("[RemoteScanRequest] Result sent:",i.success),r(null),a(!1),i.success}catch(t){return console.error("[RemoteScanRequest] Failed to send result:",t),!1}finally{s(!1)}},[n,i]),d=(0,t.useCallback)(async e=>{if(!n||i)return!1;s(!0);try{const t=Ae(),o=await fetch("/api/devices/remote-scan/result",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({scan_id:n,error:e})}),i=await o.json();return r(null),a(!1),i.success}catch(t){return console.error("[RemoteScanRequest] Failed to send error:",t),!1}finally{s(!1)}},[n,i]),u=(0,t.useCallback)(async()=>{if(!n||i)return!1;s(!0);try{const e=Ae(),t=await fetch("/api/devices/remote-scan/result",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({scan_id:n})}),o=await t.json();return r(null),a(!1),o.success}catch(e){return console.error("[RemoteScanRequest] Failed to cancel:",e),!1}finally{s(!1)}},[n,i]),h=(0,t.useCallback)(()=>{r(null),a(!1),s(!1)},[]);return{isRequested:o,scanId:n,sendResult:c,sendError:d,cancelScan:u,reset:h}}({onScanRequested:e=>{console.log("[MobileRemoteScan] Desktop requested scan:",e),navigator.vibrate&&navigator.vibrate(200),n(!0)},onScanCancelled:()=>{console.log("[MobileRemoteScan] Desktop cancelled scan"),n(!1)}});return(0,Fe.jsx)(Zv,{isOpen:e,onClose:async()=>{n(!1),r&&await a()},onBarcodeDetected:async e=>{console.log("[MobileRemoteScan] Barcode detected:",e),n(!1),await o(e)},scannerText:"Scan untuk Desktop"})};const rN=function(){const[e,n]=(0,t.useState)(Me());return(0,t.useEffect)(()=>(()=>{Oe&&Oe();const e=()=>{"visible"===document.visibilityState&&Me()&&Re("visibility")};document.addEventListener("visibilitychange",e);const t=setInterval(()=>{"visible"===document.visibilityState&&Me()&&Re("poll")},36e5);return console.log("[setupSessionEnforcement] Session enforcement active (visibilitychange + 1hr poll)"),Oe=()=>{document.removeEventListener("visibilitychange",e),clearInterval(t),console.log("[setupSessionEnforcement] Session enforcement cleaned up")},Oe})(),[]),(0,t.useEffect)(()=>{const e=()=>{const e=Me();console.log("[App] Auth state changed:",e),n(e)};return window.addEventListener("login_success",e),window.addEventListener("logout",e),window.addEventListener("storage",e),()=>{window.removeEventListener("login_success",e),window.removeEventListener("logout",e),window.removeEventListener("storage",e)}},[]),(0,t.useEffect)(()=>{const t=localStorage.getItem("device_id");if(t&&e){const e=Ee(),n=$_.getInstance(e);n.connect(t),console.log("[App] DeviceWebSocket connected for device:",t.slice(0,8));const r=()=>{n.close()};return window.addEventListener("logout",r),()=>{window.removeEventListener("logout",r)}}},[e]),(0,Fe.jsx)(we,{children:(0,Fe.jsxs)("div",{className:"App",children:[(0,Fe.jsxs)(me,{children:[(0,Fe.jsx)(pe,{path:"/login",element:(0,Fe.jsx)(eN,{children:(0,Fe.jsx)(Q_,{})})}),(0,Fe.jsx)(pe,{path:"/",element:(0,Fe.jsx)(tN,{})})]}),!_e()&&Me()&&(0,Fe.jsx)(nN,{})]})})},oN="milky_tab_id",aN="milky_browser_id";!function(){let e=sessionStorage.getItem(oN);e||(e="tab_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,11)),sessionStorage.setItem(oN,e),console.log("[Identifiers] Created new tab_id:",e))}(),function(){let e=localStorage.getItem(aN);e||(e="undefined"!==typeof crypto&&crypto.randomUUID?crypto.randomUUID():"browser_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,11)),localStorage.setItem(aN,e),console.log("[Identifiers] Created new browser_id:",e))}();o.createRoot(document.getElementById("root")).render((0,Fe.jsx)(t.StrictMode,{children:(0,Fe.jsx)(rN,{})})),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(e=>{for(const t of e)t.unregister(),console.log("[PWA] Service Worker unregistered")})})()})();
//# sourceMappingURL=main.5b9eafb4.js.map