SERVICE_NAME=notification-service
BINARY_NAME=main

build:
	go build -o bin/$(BINARY_NAME) ./cmd/server

run:
	go run ./cmd/server

proto:
	buf generate

tidy:
	go mod tidy



# ğŸ“¦ Makefile for notification-service MilkyHoop
# Modular, CI/CD ready, and reusable for any Go service using SQLC

SQLC_BIN ?= sqlc
SQLC_CONFIG ?= sqlc.yaml

# ğŸ’» Generate SQLC code
sqlc:
	@echo "ğŸ”§ Generating SQLC code from $(SQLC_CONFIG)..."
	@$(SQLC_BIN) generate -f $(SQLC_CONFIG)
	@echo "âœ… SQLC generate complete."

# ğŸ§ª Check if generated files exist
check-sqlc:
	@test -f internal/repo/db/queries.sql.go && echo "âœ… queries.sql.go exists." || echo "âŒ Missing queries.sql.go"
	@test -f internal/repo/db/models.go && echo "âœ… models.go exists." || echo "âŒ Missing models.go"

# ğŸ§¼ Clean generated code (optional)
clean-sqlc:
	@echo "ğŸ§¹ Cleaning SQLC generated files..."
	@rm -f internal/repo/db/*.go
	@echo "âœ… Clean complete."
