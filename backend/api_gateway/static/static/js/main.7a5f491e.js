/*! For license information please see main.7a5f491e.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=x.prototype;var b=y.prototype=new v;b.constructor=y,m(b,x.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,j={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var a,o={},i=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,a)&&!N.hasOwnProperty(a)&&(o[a]=t[a]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===o[a]&&(o[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:s,props:o,_owner:j.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===o?"."+M(l,0):o,w(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),E(i,t,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+M(s=e[c],c);l+=E(s,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=E(s=s.value,t,a,u=o+M(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],a=0;return E(e,r,"","",function(e){return t.call(n,e,a++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},A={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:A,ReactCurrentOwner:j};function T(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=a,t.Profiler=i,t.PureComponent=y,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=T,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),o=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=j.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!N.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:o,ref:i,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=T,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<a&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<a&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,A(k);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(S),S=-1),p=!0;var o=h;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!E());){var i=f.callback;if("function"===typeof i){f.callback=null,h=f.priorityLevel;var s=i(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&a(c),b(n)}else a(c);f=r(c)}if(null!==f)var l=!0;else{var d=r(u);null!==d&&D(w,d.startTime-n),l=!1}return l}finally{f=null,h=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,_=null,S=-1,C=5,M=-1;function E(){return!(t.unstable_now()-M<C)}function P(){if(null!==_){var e=t.unstable_now();M=e;var n=!0;try{n=_(!0,e)}finally{n?j():(N=!1,_=null)}}else N=!1}if("function"===typeof y)j=function(){y(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,O=R.port2;R.port1.onmessage=P,j=function(){O.postMessage(null)}}else j=function(){x(P,0)};function A(e){_=e,N||(N=!0,j())}function D(e,n){S=x(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,A(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(S),S=-1):g=!0,D(w,o-i))):(e.sortIndex=s,n(c,e),m||p||(m=!0,A(k))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var r=n(43),a=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,z=Object.assign;function I(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var B=!1;function F(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?I(e):""}function U(e){switch(e.tag){case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case k:return"Portal";case _:return"Profiler";case N:return"StrictMode";case E:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Y(e,t){J(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function oe(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var xe=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,je=null,Ne=null;function _e(e){if(e=ya(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=wa(t),ke(e.stateNode,e.type,t))}}function Se(e){je?Ne?Ne.push(e):Ne=[e]:je=e}function Ce(){if(je){var e=je,t=Ne;if(Ne=je=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Me(e,t){return e(t)}function Ee(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Me(e,t,n)}finally{Pe=!1,(null!==je||null!==Ne)&&(Ee(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ae=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Ae=!1}function Te(e,t,n,r,a,o,i,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,ze=null,Ie=!1,Be=null,Fe={onError:function(e){Le=!0,ze=e}};function Ue(e,t,n,r,a,o,i,s,l){Le=!1,ze=null,Te.apply(Fe,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(We(e)!==e)throw Error(o(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ve(a),e;if(i===r)return Ve(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Qe=a.unstable_scheduleCallback,Ke=a.unstable_cancelCallback,Ge=a.unstable_shouldYield,Xe=a.unstable_requestPaint,Je=a.unstable_now,Ye=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,ot=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~a;0!==s?r=dt(s):0!==(o&=i)&&(r=dt(o))}else 0!==(i=n&~a)?r=dt(i):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(o=t&-t)||16===a&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,jt,Nt,_t,St=!1,Ct=[],Mt=null,Et=null,Pt=null,Rt=new Map,Ot=new Map,At=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=ya(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function zt(e){var t=va(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void _t(e.priority,function(){jt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function It(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ya(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Bt(e,t,n){It(e)&&n.delete(t)}function Ft(){St=!1,null!==Mt&&It(Mt)&&(Mt=null),null!==Et&&It(Et)&&(Et=null),null!==Pt&&It(Pt)&&(Pt=null),Rt.forEach(Bt),Ot.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ft)))}function Wt(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&Ut(Mt,e),null!==Et&&Ut(Et,e),null!==Pt&&Ut(Pt,e),Rt.forEach(t),Ot.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)zt(n),null===n.blockedOn&&At.shift()}var Ht=b.ReactCurrentBatchConfig,Vt=!0;function $t(e,t,n,r){var a=yt,o=Ht.transition;Ht.transition=null;try{yt=1,Qt(e,t,n,r)}finally{yt=a,Ht.transition=o}}function qt(e,t,n,r){var a=yt,o=Ht.transition;Ht.transition=null;try{yt=4,Qt(e,t,n,r)}finally{yt=a,Ht.transition=o}}function Qt(e,t,n,r){if(Vt){var a=Gt(e,t,n,r);if(null===a)Vr(e,t,r,Kt,n),Tt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Mt=Lt(Mt,e,t,n,r,a),!0;case"dragenter":return Et=Lt(Et,e,t,n,r,a),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return Rt.set(o,Lt(Rt.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Ot.set(o,Lt(Ot.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Tt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==a;){var o=ya(a);if(null!==o&&wt(o),null===(o=Gt(e,t,n,r))&&Vr(e,t,r,Kt,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Kt=null;function Gt(e,t,n,r){if(Kt=null,null!==(e=va(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Yt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Yt,r=n.length,a="value"in Jt?Jt.value:Jt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=z({},cn,{view:0,detail:0}),fn=an(dn),hn=z({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(hn),mn=an(z({},hn,{dataTransfer:0})),gn=an(z({},dn,{relatedTarget:0})),xn=an(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=z({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(vn),bn=an(z({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function _n(){return Nn}var Sn=z({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Sn),Mn=an(z({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=an(z({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Pn=an(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=z({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Rn),An=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Tn=null;u&&"documentMode"in document&&(Tn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Tn,zn=u&&(!Dn||Tn&&8<Tn&&11>=Tn),In=String.fromCharCode(32),Bn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function $n(e,t,n,r){Se(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Qn=null;function Kn(e){Ir(e,0)}function Gn(e){if(Q(ba(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Yn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Yn=Zn}else Yn=!1;Jn=Yn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Qn=qn=null)}function nr(e){if("value"===e.propertyName&&Gn(Qn)){var t=[];$n(t,Qn,e,we(e)),Re(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Qn)}function or(e,t){if("click"===e)return Gn(t)}function ir(e,t){if("input"===e||"change"===e)return Gn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=ur(n,o);var i=ur(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,xr=null,vr=null,yr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=qr(xr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},jr={},Nr={};function _r(e){if(jr[e])return jr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return jr[e]=n[t];return e}u&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Sr=_r("animationend"),Cr=_r("animationiteration"),Mr=_r("animationstart"),Er=_r("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Pr.set(e,t),l(t,[e])}for(var Ar=0;Ar<Rr.length;Ar++){var Dr=Rr[Ar];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Sr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(Mr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function zr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,l,c){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(o(198));var u=ze;Le=!1,ze=null,Ie||(Ie=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Ir(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&a.isPropagationStopped())break e;zr(a,s,c),o=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,c=s.currentTarget,s=s.listener,l!==o&&a.isPropagationStopped())break e;zr(a,s,c),o=l}}}if(Ie)throw e=Be,Ie=!1,Be=null,e}function Br(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,i.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Fr(t,!1,e),Fr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Fr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Xt(t)){case 1:var a=$t;break;case 4:a=qt;break;default:a=Qt}n=a.bind(null,t,n,e),a=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=va(s)))return;if(5===(l=i.tag)||6===l){r=o=i;continue e}s=s.parentNode}}r=r.return}Re(function(){var r=o,a=we(n),i=[];e:{var s=Pr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Sr:case Cr:case Mr:l=xn;break;case Er:l=Pn;break;case"scroll":l=fn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var u=0!==(4&t),d=!u&&"scroll"===e,f=u?null!==s?s+"Capture":null:s;u=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==f&&(null!=(m=Oe(p,f))&&u.push($r(p,m,h)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,a),i.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!va(c)&&!c[pa])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?va(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Mn,m="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==l?s:ba(l),h=null==c?s:ba(c),(s=new u(m,p+"leave",l,n,a)).target=d,s.relatedTarget=h,m=null,va(a)===r&&((u=new u(f,p+"enter",c,n,a)).target=h,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(f=c,p=0,h=u=l;h;h=Qr(h))p++;for(h=0,m=f;m;m=Qr(m))h++;for(;0<p-h;)u=Qr(u),p--;for(;0<h-p;)f=Qr(f),h--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break e;u=Qr(u),f=Qr(f)}u=null}else u=null;null!==l&&Kr(i,s,l,u,!1),null!==c&&null!==d&&Kr(i,d,c,u,!0)}if("select"===(l=(s=r?ba(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xn;else if(Vn(s))if(Jn)g=ir;else{g=ar;var x=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?$n(i,g,n,a):(x&&x(e,s,r),"focusout"===e&&(x=s._wrapperState)&&x.controlled&&"number"===s.type&&ee(s,"number",s.value)),x=r?ba(r):window,e){case"focusin":(Vn(x)||"true"===x.contentEditable)&&(gr=x,xr=r,vr=null);break;case"focusout":vr=xr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(i,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(i,n,a)}var v;if(Dn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Wn?Fn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(zn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Wn&&(v=en()):(Yt="value"in(Jt=a)?Jt.value:Jt.textContent,Wn=!0)),0<(x=qr(r,y)).length&&(y=new bn(y,e,null,n,a),i.push({event:y,listeners:x}),v?y.data=v:null!==(v=Un(n))&&(y.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,In);case"textInput":return(e=t.data)===In&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Dn&&Fn(e,t)?(e=en(),Zt=Yt=Jt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(a=new bn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=v))}Ir(i,t)})}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=Oe(e,n))&&r.unshift($r(e,o,a)),null!=(o=Oe(e,t))&&r.push($r(e,o,a))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(l=Oe(n,o))&&i.unshift($r(n,l,s)):a||null!=(l=Oe(n,o))&&i.push($r(n,l,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Gr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Xr,"")}function Yr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Wt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),fa="__reactFiber$"+da,ha="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,xa="__reactHandles$"+da;function va(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[fa])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ya(e){return!(e=e[fa]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wa(e){return e[ha]||null}var ka=[],ja=-1;function Na(e){return{current:e}}function _a(e){0>ja||(e.current=ka[ja],ka[ja]=null,ja--)}function Sa(e,t){ja++,ka[ja]=e.current,e.current=t}var Ca={},Ma=Na(Ca),Ea=Na(!1),Pa=Ca;function Ra(e,t){var n=e.type.contextTypes;if(!n)return Ca;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Aa(){_a(Ea),_a(Ma)}function Da(e,t,n){if(Ma.current!==Ca)throw Error(o(168));Sa(Ma,t),Sa(Ea,n)}function Ta(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(o(108,H(e)||"Unknown",a));return z({},n,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,Pa=Ma.current,Sa(Ma,e),Sa(Ea,Ea.current),!0}function za(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ta(e,t,Pa),r.__reactInternalMemoizedMergedChildContext=e,_a(Ea),_a(Ma),Sa(Ma,e)):_a(Ea),Sa(Ea,n)}var Ia=null,Ba=!1,Fa=!1;function Ua(e){null===Ia?Ia=[e]:Ia.push(e)}function Wa(){if(!Fa&&null!==Ia){Fa=!0;var e=0,t=yt;try{var n=Ia;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ia=null,Ba=!1}catch(a){throw null!==Ia&&(Ia=Ia.slice(e+1)),Qe(Ze,Wa),a}finally{yt=t,Fa=!1}}return null}var Ha=[],Va=0,$a=null,qa=0,Qa=[],Ka=0,Ga=null,Xa=1,Ja="";function Ya(e,t){Ha[Va++]=qa,Ha[Va++]=$a,$a=e,qa=t}function Za(e,t,n){Qa[Ka++]=Xa,Qa[Ka++]=Ja,Qa[Ka++]=Ga,Ga=e;var r=Xa;e=Ja;var a=32-it(r)-1;r&=~(1<<a),n+=1;var o=32-it(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Xa=1<<32-it(t)+a|n<<a|r,Ja=o+e}else Xa=1<<o|n<<a|r,Ja=e}function eo(e){null!==e.return&&(Ya(e,1),Za(e,1,0))}function to(e){for(;e===$a;)$a=Ha[--Va],Ha[Va]=null,qa=Ha[--Va],Ha[Va]=null;for(;e===Ga;)Ga=Qa[--Ka],Qa[Ka]=null,Ja=Qa[--Ka],Qa[Ka]=null,Xa=Qa[--Ka],Qa[Ka]=null}var no=null,ro=null,ao=!1,oo=null;function io(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ga?{id:Xa,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ao){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ca(n.nextSibling);var r=no;t&&so(e,t)?io(r,n):(e.flags=-4097&e.flags|2,ao=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ao=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!ao)return uo(e),ao=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw ho(),Error(o(418));for(;t;)io(e,t),t=ca(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ca(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ro;e;)e=ca(e.nextSibling)}function po(){ro=no=null,ao=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function xo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yo(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===j?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&yo(o)===t.type)?((r=a(t,n.props)).ref=xo(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=xo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ic(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Tc(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=xo(e,null,t),n.return=e,n;case k:return(t=Ic(t,e.mode,n)).return=e,t;case O:return f(e,(0,t._init)(t._payload),n)}if(te(t)||T(t))return(t=Tc(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case k:return n.key===a?u(e,t,n,r):null;case O:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||T(n))return null!==a?null:d(e,t,n,r,null);vo(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case O:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||T(r))return d(t,e=e.get(n)||null,r,a,null);vo(t,r)}return null}function m(a,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var x=h(a,d,s[m],l);if(null===x){null===d&&(d=g);break}e&&d&&null===x.alternate&&t(a,d),o=i(x,o,m),null===u?c=x:u.sibling=x,u=x,d=g}if(m===s.length)return n(a,d),ao&&Ya(a,m),c;if(null===d){for(;m<s.length;m++)null!==(d=f(a,s[m],l))&&(o=i(d,o,m),null===u?c=d:u.sibling=d,u=d);return ao&&Ya(a,m),c}for(d=r(a,d);m<s.length;m++)null!==(g=p(d,a,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=i(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),ao&&Ya(a,m),c}function g(a,s,l,c){var u=T(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=s,g=s=0,x=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(x=m,m=null):x=m.sibling;var y=h(a,m,v.value,c);if(null===y){null===m&&(m=x);break}e&&m&&null===y.alternate&&t(a,m),s=i(y,s,g),null===d?u=y:d.sibling=y,d=y,m=x}if(v.done)return n(a,m),ao&&Ya(a,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=f(a,v.value,c))&&(s=i(v,s,g),null===d?u=v:d.sibling=v,d=v);return ao&&Ya(a,g),u}for(m=r(a,m);!v.done;g++,v=l.next())null!==(v=p(m,a,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=i(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(a,e)}),ao&&Ya(a,g),u}return function e(r,o,i,l){if("object"===typeof i&&null!==i&&i.type===j&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,u=o;null!==u;){if(u.key===c){if((c=i.type)===j){if(7===u.tag){n(r,u.sibling),(o=a(u,i.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&yo(c)===u.type){n(r,u.sibling),(o=a(u,i.props)).ref=xo(r,u,i),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===j?((o=Tc(i.props.children,r.mode,l,i.key)).return=r,r=o):((l=Dc(i.type,i.key,i.props,null,r.mode,l)).ref=xo(r,o,i),l.return=r,r=l)}return s(r);case k:e:{for(u=i.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(r,o.sibling),(o=a(o,i.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Ic(i,r.mode,l)).return=r,r=o}return s(r);case O:return e(r,o,(u=i._init)(i._payload),l)}if(te(i))return m(r,o,i,l);if(T(i))return g(r,o,i,l);vo(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(n(r,o.sibling),(o=a(o,i)).return=r,r=o):(n(r,o),(o=zc(i,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var wo=bo(!0),ko=bo(!1),jo=Na(null),No=null,_o=null,So=null;function Co(){So=_o=No=null}function Mo(e){var t=jo.current;_a(jo),e._currentValue=t}function Eo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Po(e,t){No=e,So=_o=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ys=!0),e.firstContext=null)}function Ro(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},null===_o){if(null===No)throw Error(o(308));_o=e,No.dependencies={lanes:0,firstContext:e}}else _o=_o.next=e;return t}var Oo=null;function Ao(e){null===Oo?Oo=[e]:Oo.push(e)}function Do(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ao(t)):(n.next=a.next,a.next=n),t.interleaved=n,To(e,r)}function To(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Lo=!1;function zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ml)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,To(e,n)}return null===(a=r.interleaved)?(t.next=t,Ao(r)):(t.next=a.next,a.next=t),r.interleaved=t,To(e,n)}function Uo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Wo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ho(e,t,n,r){var a=e.updateQueue;Lo=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===i?o=c:i.next=c,i=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=a.baseState;for(i=0,u=c=l=null,s=o;;){var f=s.lane,h=s.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(f=t,h=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=m.payload)?p.call(h,d,f):p)||void 0===f)break e;d=z({},d,f);break e;case 2:Lo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,i|=f;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===o&&(a.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=d}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var $o={},qo=Na($o),Qo=Na($o),Ko=Na($o);function Go(e){if(e===$o)throw Error(o(174));return e}function Xo(e,t){switch(Sa(Ko,t),Sa(Qo,e),Sa(qo,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_a(qo),Sa(qo,t)}function Jo(){_a(qo),_a(Qo),_a(Ko)}function Yo(e){Go(Ko.current);var t=Go(qo.current),n=le(t,e.type);t!==n&&(Sa(Qo,e),Sa(qo,n))}function Zo(e){Qo.current===e&&(_a(qo),_a(Qo))}var ei=Na(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var ai=b.ReactCurrentDispatcher,oi=b.ReactCurrentBatchConfig,ii=0,si=null,li=null,ci=null,ui=!1,di=!1,fi=0,hi=0;function pi(){throw Error(o(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,a,i){if(ii=i,si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Zi:es,e=n(r,a),di){i=0;do{if(di=!1,fi=0,25<=i)throw Error(o(301));i+=1,ci=li=null,t.updateQueue=null,ai.current=ts,e=n(r,a)}while(di)}if(ai.current=Yi,t=null!==li&&null!==li.next,ii=0,ci=li=si=null,ui=!1,t)throw Error(o(300));return e}function xi(){var e=0!==fi;return fi=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?si.memoizedState=ci=e:ci=ci.next=e,ci}function yi(){if(null===li){var e=si.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?si.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(o(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?si.memoizedState=ci=e:ci=ci.next=e}return ci}function bi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=yi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=li,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=s=null,c=null,u=i;do{var d=u.lane;if((ii&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,s=r):c=c.next=f,si.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==i);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(ys=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,si.lanes|=i,Ll|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ki(e){var t=yi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);sr(i,t.memoizedState)||(ys=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ji(){}function Ni(e,t){var n=si,r=yi(),a=t(),i=!sr(r.memoizedState,a);if(i&&(r.memoizedState=a,ys=!0),r=r.queue,Li(Ci.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,Ri(9,Si.bind(null,n,r,a,t),void 0,null),null===El)throw Error(o(349));0!==(30&ii)||_i(n,t,a)}return a}function _i(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Si(e,t,n,r){t.value=n,t.getSnapshot=r,Mi(t)&&Ei(e)}function Ci(e,t,n){return n(function(){Mi(t)&&Ei(e)})}function Mi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ei(e){var t=To(e,1);null!==t&&nc(t,e,1,-1)}function Pi(e){var t=vi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,si,e),[t.memoizedState,e]}function Ri(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oi(){return yi().memoizedState}function Ai(e,t,n,r){var a=vi();si.flags|=e,a.memoizedState=Ri(1|t,n,void 0,void 0===r?null:r)}function Di(e,t,n,r){var a=yi();r=void 0===r?null:r;var o=void 0;if(null!==li){var i=li.memoizedState;if(o=i.destroy,null!==r&&mi(r,i.deps))return void(a.memoizedState=Ri(t,n,o,r))}si.flags|=e,a.memoizedState=Ri(1|t,n,o,r)}function Ti(e,t){return Ai(8390656,8,e,t)}function Li(e,t){return Di(2048,8,e,t)}function zi(e,t){return Di(4,2,e,t)}function Ii(e,t){return Di(4,4,e,t)}function Bi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4,4,Bi.bind(null,t,e),n)}function Ui(){}function Wi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,ys=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),si.lanes|=n,Ll|=n,e.baseState=!0),t)}function $i(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=oi.transition;oi.transition={};try{e(!1),t()}finally{yt=n,oi.transition=r}}function qi(){return yi().memoizedState}function Qi(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gi(e))Xi(t,n);else if(null!==(n=Do(e,t,n,r))){nc(n,e,r,ec()),Ji(n,t,r)}}function Ki(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gi(e))Xi(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,i)){var l=t.interleaved;return null===l?(a.next=a,Ao(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Do(e,t,a,r))&&(nc(n,e,r,a=ec()),Ji(n,t,r))}}function Gi(e){var t=e.alternate;return e===si||null!==t&&t===si}function Xi(e,t){di=ui=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ji(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Yi={readContext:Ro,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Zi={readContext:Ro,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:Ro,useEffect:Ti,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ai(4194308,4,Bi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ai(4,2,e,t)},useMemo:function(e,t){var n=vi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qi.bind(null,si,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:Pi,useDebugValue:Ui,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=$i.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=si,a=vi();if(ao){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===El)throw Error(o(349));0!==(30&ii)||_i(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Ti(Ci.bind(null,r,i,e),[e]),r.flags|=2048,Ri(9,Si.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=vi(),t=El.identifierPrefix;if(ao){var n=Ja;t=":"+t+"R"+(n=(Xa&~(1<<32-it(Xa)-1)).toString(32)+n),0<(n=fi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ro,useCallback:Wi,useContext:Ro,useEffect:Li,useImperativeHandle:Fi,useInsertionEffect:zi,useLayoutEffect:Ii,useMemo:Hi,useReducer:wi,useRef:Oi,useState:function(){return wi(bi)},useDebugValue:Ui,useDeferredValue:function(e){return Vi(yi(),li.memoizedState,e)},useTransition:function(){return[wi(bi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:qi,unstable_isNewReconciler:!1},ts={readContext:Ro,useCallback:Wi,useContext:Ro,useEffect:Li,useImperativeHandle:Fi,useInsertionEffect:zi,useLayoutEffect:Ii,useMemo:Hi,useReducer:ki,useRef:Oi,useState:function(){return ki(bi)},useDebugValue:Ui,useDeferredValue:function(e){var t=yi();return null===li?t.memoizedState=e:Vi(t,li.memoizedState,e)},useTransition:function(){return[ki(bi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:qi,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var as={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),o=Bo(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Fo(e,o,a))&&(nc(t,e,a,r),Uo(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),o=Bo(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Fo(e,o,a))&&(nc(t,e,a,r),Uo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Bo(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Fo(e,a,r))&&(nc(t,e,r,n),Uo(t,e,r))}};function os(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,o))}function is(e,t,n){var r=!1,a=Ca,o=t.contextType;return"object"===typeof o&&null!==o?o=Ro(o):(a=Oa(t)?Pa:Ma.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ra(e,a):Ca),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=as,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&as.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},zo(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=Ro(o):(o=Oa(t)?Pa:Ma.current,a.context=Ra(e,o)),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&as.enqueueReplaceState(a,a.state,null),Ho(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,$l=r),ds(0,t)},n}function ps(e,t,n){(n=Bo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xs(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bo(-1,1)).tag=2,Fo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var vs=b.ReactCurrentOwner,ys=!1;function bs(e,t,n,r){t.child=null===e?ko(t,null,n,r):wo(t,e.child,n,r)}function ws(e,t,n,r,a){n=n.render;var o=t.ref;return Po(t,a),r=gi(e,t,n,r,o,a),n=xi(),null===e||ys?(ao&&n&&eo(t),t.flags|=1,bs(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vs(e,t,a))}function ks(e,t,n,r,a){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,js(e,t,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Vs(e,t,a)}return t.flags|=1,(e=Ac(o,r)).ref=t.ref,e.return=t,t.child=e}function js(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ys=!1,t.pendingProps=r=o,0===(e.lanes&a))return t.lanes=e.lanes,Vs(e,t,a);0!==(131072&e.flags)&&(ys=!0)}}return Ss(e,t,n,r,a)}function Ns(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Al,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Al,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Sa(Al,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Sa(Al,Ol),Ol|=r;return bs(e,t,a,n),t.child}function _s(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,r,a){var o=Oa(n)?Pa:Ma.current;return o=Ra(t,o),Po(t,a),n=gi(e,t,n,r,o,a),r=xi(),null===e||ys?(ao&&r&&eo(t),t.flags|=1,bs(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Vs(e,t,a))}function Cs(e,t,n,r,a){if(Oa(n)){var o=!0;La(t)}else o=!1;if(Po(t,a),null===t.stateNode)Hs(e,t),is(t,n,r),ls(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ro(c):c=Ra(t,c=Oa(n)?Pa:Ma.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,i,r,c),Lo=!1;var f=t.memoizedState;i.state=f,Ho(t,r,i,a),l=t.memoizedState,s!==r||f!==l||Ea.current||Lo?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Lo||os(t,n,s,r,f,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Io(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),i.props=c,d=t.pendingProps,f=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ro(l):l=Ra(t,l=Oa(n)?Pa:Ma.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||f!==l)&&ss(t,i,r,l),Lo=!1,f=t.memoizedState,i.state=f,Ho(t,r,i,a);var p=t.memoizedState;s!==d||f!==p||Ea.current||Lo?("function"===typeof h&&(rs(t,n,h,r),p=t.memoizedState),(c=Lo||os(t,n,c,r,f,p,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ms(e,t,n,r,o,a)}function Ms(e,t,n,r,a,o){_s(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&za(t,n,!1),Vs(e,t,o);r=t.stateNode,vs.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,s,o)):bs(e,t,s,o),t.memoizedState=r.state,a&&za(t,n,!0),t.child}function Es(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),Xo(e,t.containerInfo)}function Ps(e,t,n,r,a){return po(),mo(a),t.flags|=256,bs(e,t,n,r),t.child}var Rs,Os,As,Ds,Ts={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var r,a=t.pendingProps,i=ei.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sa(ei,1&i),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,s?(a=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Lc(l,a,0,null),e=Tc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Ts,e):Is(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Lc({mode:"visible",children:r.children},a,0,null),(i=Tc(i,a,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&wo(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=Ts,i);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Bs(e,t,s,r=us(i=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),ys||l){if(null!==(r=El)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==i.retryLane&&(i.retryLane=a,To(e,a),nc(r,e,a,-1))}return mc(),Bs(e,t,s,r=us(Error(o(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ro=ca(a.nextSibling),no=t,ao=!0,oo=null,null!==e&&(Qa[Ka++]=Xa,Qa[Ka++]=Ja,Qa[Ka++]=Ga,Xa=e.id,Ja=e.overflow,Ga=t),t=Is(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(s){s=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ac(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Ac(r,s):(s=Tc(s,l,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,l=null===(l=e.child.memoizedState)?Ls(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ts,a}return e=(s=e.child).sibling,a=Ac(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Is(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&mo(r),wo(t,e.child,null,n),(e=Is(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Eo(e.return,t,n)}function Us(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Ws(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=ei.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Sa(ei,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Us(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ti(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Us(t,!0,n,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ac(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ac(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $s(e,t){if(!ao)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Oa(t.type)&&Aa(),qs(t),null;case 3:return r=t.stateNode,Jo(),_a(Ea),_a(Ma),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ic(oo),oo=null))),Os(e,t),qs(t),null;case 5:Zo(t);var a=Go(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)As(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return qs(t),null}if(e=Go(qo.current),fo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[fa]=t,r[ha]=i,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(a=0;a<Tr.length;a++)Br(Tr[a],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":X(r,i),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Br("invalid",r);break;case"textarea":ae(r,i),Br("invalid",r)}for(var l in ve(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Yr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Yr(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":q(r),Z(r,i,!0);break;case"textarea":q(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fa]=t,e[ha]=r,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Br("cancel",e),Br("close",e),a=r;break;case"iframe":case"object":case"embed":Br("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Br(Tr[a],e);a=r;break;case"source":Br("error",e),a=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),a=r;break;case"details":Br("toggle",e),a=r;break;case"input":X(e,r),a=G(e,r),Br("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=z({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Br("invalid",e)}for(i in ve(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"===typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Br("scroll",e):null!=u&&y(e,i,u,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Go(Ko.current),Go(qo.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(i=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Yr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fa]=t,t.stateNode=r}return qs(t),null;case 13:if(_a(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ao&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))ho(),po(),t.flags|=98560,i=!1;else if(i=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[fa]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),i=!1}else null!==oo&&(ic(oo),oo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return Jo(),Os(e,t),null===e&&Wr(t.stateNode.containerInfo),qs(t),null;case 10:return Mo(t.type._context),qs(t),null;case 19:if(_a(ei),null===(i=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)$s(i,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,$s(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sa(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Wl&&(t.flags|=128,r=!0,$s(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$s(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!ao)return qs(t),null}else 2*Je()-i.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,$s(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=ei.current,Sa(ei,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ks(e,t){switch(to(t),t.tag){case 1:return Oa(t.type)&&Aa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jo(),_a(Ea),_a(Ma),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(_a(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _a(ei),null;case 4:return Jo(),null;case 10:return Mo(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},As=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Go(qo.current);var o,i=null;switch(n){case"input":a=G(e,a),r=G(e,r),i=[];break;case"select":a=z({},a,{value:void 0}),r=z({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gs=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Ys=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Nc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&el(t,n,o)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fa],delete t[ha],delete t[ma],delete t[ga],delete t[xa])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Xs||Zs(n,t);case 6:var r=ul,a=dl;ul=null,fl(e,t,n),dl=a,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Wt(e)):la(ul,n.stateNode));break;case 4:r=ul,a=dl,ul=n.stateNode.containerInfo,dl=!0,fl(e,t,n),ul=r,dl=a;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&el(n,t,i),a=a.next}while(a!==r)}fl(e,t,n);break;case 1:if(!Xs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Nc(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,fl(e,t,n),Xs=r):fl(e,t,n);break;default:fl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach(function(t){var r=Mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));hl(i,s,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Nc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),xl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Nc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:ml(t,e),xl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(ml(t,e),xl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(g){Nc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&J(a,i),ye(l,s);var u=ye(l,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];"style"===d?ge(a,f):"dangerouslySetInnerHTML"===d?de(a,f):"children"===d?fe(a,f):y(a,d,f,u)}switch(l){case"input":Y(a,i);break;case"textarea":oe(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(a,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[ha]=i}catch(g){Nc(e,e.return,g)}}break;case 6:if(ml(t,e),xl(e),4&r){if(null===e.stateNode)throw Error(o(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Nc(e,e.return,g)}}break;case 3:if(ml(t,e),xl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:ml(t,e),xl(e);break;case 13:ml(t,e),xl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Ul=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(u=Xs)||d,ml(t,e),Xs=u):ml(t,e),xl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Ys=e,d=e.child;null!==d;){for(f=Ys=d;null!==Ys;){switch(p=(h=Ys).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:Zs(h,h.return);var m=h.stateNode;if("function"===typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Nc(r,n,g)}}break;case 5:Zs(h,h.return);break;case 22:if(null!==h.memoizedState){wl(f);continue}}null!==p?(p.return=h,Ys=p):wl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{a=f.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Nc(e,e.return,g)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ml(t,e),xl(e),4&r&&pl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(fe(a,""),r.flags&=-33),cl(e,sl(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,sl(e),i);break;default:throw Error(o(161))}}catch(s){Nc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Ys=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Ys;){var a=Ys,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Gs;if(!i){var s=a.alternate,l=null!==s&&null!==s.memoizedState||Xs;s=Gs;var c=Xs;if(Gs=i,(Xs=l)&&!c)for(Ys=a;null!==Ys;)l=(i=Ys).child,22===i.tag&&null!==i.memoizedState?kl(a):null!==l?(l.return=i,Ys=l):kl(a);for(;null!==o;)Ys=o,yl(o,t,n),o=o.sibling;Ys=a,Gs=s,Xs=c}bl(e)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,Ys=o):bl(e)}}function bl(e){for(;null!==Ys;){var t=Ys;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Vo(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Wt(f)}}}break;default:throw Error(o(163))}Xs||512&t.flags&&al(t)}catch(h){Nc(t,t.return,h)}}if(t===e){Ys=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ys=n;break}Ys=t.return}}function wl(e){for(;null!==Ys;){var t=Ys;if(t===e){Ys=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ys=n;break}Ys=t.return}}function kl(e){for(;null!==Ys;){var t=Ys;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Nc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Nc(t,a,l)}}var o=t.return;try{al(t)}catch(l){Nc(t,o,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Nc(t,i,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Ys=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ys=s;break}Ys=t.return}}var jl,Nl=Math.ceil,_l=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Ml=0,El=null,Pl=null,Rl=0,Ol=0,Al=Na(0),Dl=0,Tl=null,Ll=0,zl=0,Il=0,Bl=null,Fl=null,Ul=0,Wl=1/0,Hl=null,Vl=!1,$l=null,ql=null,Ql=!1,Kl=null,Gl=0,Xl=0,Jl=null,Yl=-1,Zl=0;function ec(){return 0!==(6&Ml)?Je():-1!==Yl?Yl:Yl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Ml)&&0!==Rl?Rl&-Rl:null!==go.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(o(185));xt(e,n,r),0!==(2&Ml)&&e===El||(e===El&&(0===(2&Ml)&&(zl|=n),4===Dl&&sc(e,Rl)),rc(e,r),1===n&&0===Ml&&0===(1&t.mode)&&(Wl=Je()+500,Ba&&Wa()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-it(o),s=1<<i,l=a[i];-1===l?0!==(s&n)&&0===(s&r)||(a[i]=ht(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===El?Rl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ba=!0,Ua(e)}(lc.bind(null,e)):Ua(lc.bind(null,e)),ia(function(){0===(6&Ml)&&Wa()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ec(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Yl=-1,Zl=0,0!==(6&Ml))throw Error(o(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ft(e,e===El?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Ml;Ml|=2;var i=pc();for(El===e&&Rl===t||(Hl=null,Wl=Je()+500,fc(e,t));;)try{vc();break}catch(l){hc(e,l)}Co(),_l.current=i,Ml=a,null!==Pl?t=0:(El=null,Rl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t)throw n=Tl,fc(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!sr(o(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t))throw n=Tl,fc(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Fl,Hl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Ul+500-Je())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wc.bind(null,e,Fl,Hl),t);break}wc(e,Fl,Hl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>a&&(a=s),r&=~i}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=ra(wc.bind(null,e,Fl,Hl),r);break}wc(e,Fl,Hl);break;default:throw Error(o(329))}}}return rc(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Fl,Fl=n,null!==t&&ic(t)),e}function ic(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function sc(e,t){for(t&=~Il,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Ml))throw Error(o(327));kc();var t=ft(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Tl,fc(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Fl,Hl),rc(e,Je()),null}function cc(e,t){var n=Ml;Ml|=1;try{return e(t)}finally{0===(Ml=n)&&(Wl=Je()+500,Ba&&Wa())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Ml)&&kc();var t=Ml;Ml|=1;var n=Cl.transition,r=yt;try{if(Cl.transition=null,yt=1,e)return e()}finally{yt=r,Cl.transition=n,0===(6&(Ml=t))&&Wa()}}function dc(){Ol=Al.current,_a(Al)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Aa();break;case 3:Jo(),_a(Ea),_a(Ma),ri();break;case 5:Zo(r);break;case 4:Jo();break;case 13:case 19:_a(ei);break;case 10:Mo(r.type._context);break;case 22:case 23:dc()}n=n.return}if(El=e,Pl=e=Ac(e.current,null),Rl=Ol=t,Dl=0,Tl=null,Il=zl=Ll=0,Fl=Bl=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(r=(n=Oo[t]).interleaved)){n.interleaved=null;var a=r.next,o=n.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}n.pending=r}Oo=null}return e}function hc(e,t){for(;;){var n=Pl;try{if(Co(),ai.current=Yi,ui){for(var r=si.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ui=!1}if(ii=0,ci=li=si=null,di=!1,fi=0,Sl.current=null,null===n||null===n.return){Dl=1,Tl=t,Pl=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,xs(p,s,l,0,t),1&p.mode&&ms(i,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(i,u,t),mc();break e}c=Error(o(426))}else if(ao&&1&l.mode){var x=gs(s);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xs(x,s,l,0,t),mo(cs(c,l));break e}}i=c=cs(c,l),4!==Dl&&(Dl=2),null===Bl?Bl=[i]:Bl.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Wo(i,hs(0,c,t));break e;case 1:l=c;var v=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===ql||!ql.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Wo(i,ps(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var e=_l.current;return _l.current=Yi,null===e?Yi:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===El||0===(268435455&Ll)&&0===(268435455&zl)||sc(El,Rl)}function gc(e,t){var n=Ml;Ml|=2;var r=pc();for(El===e&&Rl===t||(Hl=null,fc(e,t));;)try{xc();break}catch(a){hc(e,a)}if(Co(),Ml=n,_l.current=r,null!==Pl)throw Error(o(261));return El=null,Rl=0,Dl}function xc(){for(;null!==Pl;)yc(Pl)}function vc(){for(;null!==Pl&&!Ge();)yc(Pl)}function yc(e){var t=jl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Dl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var r=yt,a=Cl.transition;try{Cl.transition=null,yt=1,function(e,t,n,r){do{kc()}while(null!==Kl);if(0!==(6&Ml))throw Error(o(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}(e,i),e===El&&(Pl=El=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Ec(tt,function(){return kc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var s=yt;yt=1;var l=Ml;Ml|=4,Sl.current=null,function(e,t){if(ea=Vt,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==a&&3!==f.nodeType||(l=s+a),f!==i||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===a&&(l=s),h===i&&++d===r&&(c=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Vt=!1,Ys=t;null!==Ys;)if(e=(t=Ys).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ys=e;else for(;null!==Ys;){t=Ys;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,x=m.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),x);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ys=e;break}Ys=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ta),Vt=!!ea,ta=ea=null,e.current=n,vl(n,e,a),Xe(),Ml=l,yt=s,Cl.transition=i}else e.current=n;if(Ql&&(Ql=!1,Kl=e,Gl=a),i=e.pendingLanes,0===i&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Vl)throw Vl=!1,e=$l,$l=null,e;0!==(1&Gl)&&0!==e.tag&&kc(),i=e.pendingLanes,0!==(1&i)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Wa()}(e,t,n,r)}finally{Cl.transition=a,yt=r}return null}function kc(){if(null!==Kl){var e=bt(Gl),t=Cl.transition,n=yt;try{if(Cl.transition=null,yt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Gl=0,0!==(6&Ml))throw Error(o(331));var a=Ml;for(Ml|=4,Ys=e.current;null!==Ys;){var i=Ys,s=i.child;if(0!==(16&Ys.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ys=u;null!==Ys;){var d=Ys;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var f=d.child;if(null!==f)f.return=d,Ys=f;else for(;null!==Ys;){var h=(d=Ys).sibling,p=d.return;if(ol(d),d===u){Ys=null;break}if(null!==h){h.return=p,Ys=h;break}Ys=p}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Ys=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,Ys=s;else e:for(;null!==Ys;){if(0!==(2048&(i=Ys).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Ys=v;break e}Ys=i.return}}var y=e.current;for(Ys=y;null!==Ys;){var b=(s=Ys).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Ys=b;else e:for(s=y;null!==Ys;){if(0!==(2048&(l=Ys).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Nc(l,l.return,k)}if(l===s){Ys=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ys=w;break e}Ys=l.return}}if(Ml=a,Wa(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{yt=n,Cl.transition=t}}return!1}function jc(e,t,n){e=Fo(e,t=hs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(xt(e,1,t),rc(e,t))}function Nc(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Fo(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(xt(t,1,e),rc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Rl&n)===n&&(4===Dl||3===Dl&&(130023424&Rl)===Rl&&500>Je()-Ul?fc(e,0):Il|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=To(e,t))&&(xt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Sc(e,n)}function Ec(e,t){return Qe(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case j:return Tc(n.children,a,i,t);case N:s=8,a|=8;break;case _:return(e=Rc(12,n,t,2|a)).elementType=_,e.lanes=i,e;case E:return(e=Rc(13,n,t,a)).elementType=E,e.lanes=i,e;case P:return(e=Rc(19,n,t,a)).elementType=P,e.lanes=i,e;case A:return Lc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case C:s=9;break e;case M:s=11;break e;case R:s=14;break e;case O:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Tc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Ic(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,r,a,o,i,s,l){return e=new Bc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Rc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zo(o),e}function Uc(e){if(!e)return Ca;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oa(n))return Ta(e,n,t)}return t}function Wc(e,t,n,r,a,o,i,s,l){return(e=Fc(n,r,!0,e,0,o,0,s,l)).context=Uc(null),n=e.current,(o=Bo(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Fo(n,o,a),e.current.lanes=a,xt(e,a,r),rc(e,r),e}function Hc(e,t,n,r){var a=t.current,o=ec(),i=tc(a);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bo(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fo(a,t,i))&&(nc(e,a,i,o),Uo(e,a,i)),i}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ea.current)ys=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ys=!1,function(e,t,n){switch(t.tag){case 3:Es(t),po();break;case 5:Yo(t);break;case 1:Oa(t.type)&&La(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Sa(jo,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Sa(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(Sa(ei,1&ei.current),null!==(e=Vs(e,t,n))?e.sibling:null);Sa(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,Ns(e,t,n)}return Vs(e,t,n)}(e,t,n);ys=0!==(131072&e.flags)}else ys=!1,ao&&0!==(1048576&t.flags)&&Za(t,qa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var a=Ra(t,Ma.current);Po(t,n),a=gi(null,t,r,e,a,n);var i=xi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oa(r)?(i=!0,La(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,zo(t),a.updater=as,t.stateNode=a,a._reactInternals=t,ls(t,r,e,n),t=Ms(null,t,r,!0,i,n)):(t.tag=0,ao&&i&&eo(t),bs(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===R)return 14}return 2}(r),e=ns(r,e),a){case 0:t=Ss(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ss(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 1:return r=t.type,a=t.pendingProps,Cs(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 3:e:{if(Es(t),null===e)throw Error(o(387));r=t.pendingProps,a=(i=t.memoizedState).element,Io(e,t),Ho(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ps(e,t,r,n,a=cs(Error(o(423)),t));break e}if(r!==a){t=Ps(e,t,r,n,a=cs(Error(o(424)),t));break e}for(ro=ca(t.stateNode.containerInfo.firstChild),no=t,ao=!0,oo=null,n=ko(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===a){t=Vs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return Yo(t),null===e&&co(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==i&&na(r,i)&&(t.flags|=32),_s(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return zs(e,t,n);case 4:return Xo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ws(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,Sa(jo,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===a.children&&!Ea.current){t=Vs(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){s=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Bo(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Eo(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Eo(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}bs(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Po(t,n),r=r(a=Ro(a)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return a=ns(r=t.type,t.pendingProps),ks(e,t,r,a=ns(r.type,a),n);case 15:return js(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ns(r,a),Hs(e,t),t.tag=1,Oa(r)?(e=!0,La(t)):e=!1,Po(t,n),is(t,r,a),ls(t,r,a,n),Ms(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Ns(e,t,n)}throw Error(o(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yc(){}function Zc(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if("function"===typeof a){var s=a;a=function(){var e=Vc(i);s.call(e)}}Hc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var o=r;r=function(){var e=Vc(i);o.call(e)}}var i=Wc(t,r,e,0,null,!1,0,"",Yc);return e._reactRootContainer=i,e[pa]=i.current,Wr(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Vc(l);s.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Yc);return e._reactRootContainer=l,e[pa]=l.current,Wr(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,n,r)}),l}(n,t,e,a,r);return Vc(i)}Gc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},Gc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[pa]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&zt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&Ml)&&(Wl=Je()+500,Wa()))}break;case 13:uc(function(){var t=To(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),qc(e,1)}},kt=function(e){if(13===e.tag){var t=To(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),n=To(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},Nt=function(){return yt},_t=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},ke=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(o(90));Q(r),Y(r,a)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=cc,Ee=uc;var eu={usingClientEntryPoint:!1,Events:[ya,ba,wa,Se,Ce,cc]},tu={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(o(299));var n=!1,r="",a=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Fc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,a,0,i,s),e[pa]=t.current,Wr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Gc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},749:e=>{window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=67)}([function(e,t,n){var r=n(52);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(52);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(8).default,a=n(140);e.exports=function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(32);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(136)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t){function n(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function s(e){n(i,a,o,s,l,"next",e)}function l(e){n(i,a,o,s,l,"throw",e)}s(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var r=n(141);function a(){return e.exports=a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var a=r(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports,a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(68),a=n(124)(function(e,t,n){r(e,t,n)});e.exports=a},function(e,t,n){var r=n(36),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var r=n(19),a=n(82),o=n(83),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},function(e,t,n){var r=n(70),a=n(71),o=n(72),i=n(73),s=n(74);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(18);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(13).Symbol;e.exports=r},function(e,t,n){var r=n(26)(Object,"create");e.exports=r},function(e,t,n){var r=n(96);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(111),a=n(14),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(11),a=n(148),o=n(149),i=n(152);e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:o(i(e))}},function(e,t,n){var r=n(142),a=n(143),o=n(50),i=n(144);e.exports=function(e){return r(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(80),a=n(87);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(15),a=n(9);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(39);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(27),a=n(31);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(15),a=n(14);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},function(e,t,n){var r=n(33);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){var r=n(26)(n(13),"Map");e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(81))},function(e,t,n){var r=n(88),a=n(95),o=n(97),i=n(98),s=n(99);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(28),a=n(18);e.exports=function(e,t,n){(void 0!==n&&!a(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},function(e,t,n){var r=n(26),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},function(e,t,n){var r=n(110)(Object.getPrototypeOf,Object);e.exports=r},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){(function(e){var r=n(13),a=n(113),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||a;e.exports=l}).call(this,n(29)(e))},function(e,t,n){var r=n(115),a=n(116),o=n(117),i=o&&o.isTypedArray,s=i?a(i):r;e.exports=s},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,n){var r=n(28),a=n(18),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];o.call(e,t)&&a(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(120),a=n(122),o=n(30);e.exports=function(e){return o(e)?r(e,!0):a(e)}},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(126),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,s=a(o.length-t,0),l=Array(s);++i<s;)l[i]=o[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=o[i];return c[t]=n(l),r(e,this,c)}}},function(e,t,n){var r=n(127),a=n(129)(r);e.exports=a},function(e,t,n){var r=n(51);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(8).default,a=n(135);e.exports=function(e){var t=a(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(55);function a(){var t,n,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.toStringTag||"@@toStringTag";function l(e,a,o,i){var s=a&&a.prototype instanceof u?a:u,l=Object.create(s.prototype);return r(l,"_invoke",function(e,r,a){var o,i,s,l=0,u=a||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return o=e,i=0,s=t,f.n=n,c}};function h(e,r){for(i=e,s=r,n=0;!d&&l&&!a&&n<u.length;n++){var a,o=u[n],h=f.p,p=o[2];e>3?(a=p===r)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=h&&((a=e<2&&h<o[1])?(i=0,f.v=r,f.n=o[1]):h<p&&(a=e<3||o[0]>r||r>p)&&(o[4]=e,o[5]=r,f.n=p,i=0))}if(a||e>1)return c;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,p),i=u,s=p;(n=i<2?t:s)||!d;){o||(i?i<3?(i>1&&(f.n=-1),h(i,s)):f.n=s:f.v=s);try{if(l=2,o){if(i||(a="next"),n=o[a]){if(!(n=n.call(o,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=o.return)&&n.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((n=(d=f.n<0)?s:e.call(r,f))!==c)break}catch(e){o=t,i=1,s=e}finally{l=1}}return{value:n,done:d}}}(e,o,i),!0),l}var c={};function u(){}function d(){}function f(){}n=Object.getPrototypeOf;var h=[][i]?n(n([][i]())):(r(n={},i,function(){return this}),n),p=f.prototype=u.prototype=Object.create(h);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,s,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=f,r(p,"constructor",f),r(f,"constructor",d),d.displayName="GeneratorFunction",r(f,s,"GeneratorFunction"),r(p),r(p,s,"Generator"),r(p,i,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(e.exports=a=function(){return{w:l,m:m}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t,r,a,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}e.exports=n=function(e,t,r,a){function o(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,n(t,r,a,o)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(54),a=n(57);e.exports=function(e,t,n,o,i){return new a(r().w(e,t,n,o),i||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(53),a=n(55);e.exports=function e(t,n){function o(e,a,i,s){try{var l=t[e](a),c=l.value;return c instanceof r?n.resolve(c.v).then(function(e){o("next",e,i,s)},function(e){o("throw",e,i,s)}):n.resolve(c).then(function(e){l.value=e,i(l)},function(e){return o("throw",e,i,s)})}catch(e){s(e)}}var i;this.next||(a(e.prototype),a(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),a(this,"_invoke",function(e,t,r){function a(){return new n(function(t,n){o(e,r,t,n)})}return i=i?i.then(a,a):a()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(132),a=n(133),o=n(50),i=n(134);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(145),a=n(159)(function(e,t){return null==e?{}:r(e,t)});e.exports=a},function(e,t,n){var r=n(1),a=n(32),o=n(164),i=n(165);function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return i(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},,,,,,,function(e,t,n){e.exports=n(167)},function(e,t,n){var r=n(69),a=n(38),o=n(100),i=n(102),s=n(9),l=n(46),c=n(44);e.exports=function e(t,n,u,d,f){t!==n&&o(n,function(o,l){if(f||(f=new r),s(o))i(t,n,l,u,e,d,f);else{var h=d?d(c(t,l),o,l+"",t,n,f):void 0;void 0===h&&(h=o),a(t,l,h)}},l)}},function(e,t,n){var r=n(16),a=n(75),o=n(76),i=n(77),s=n(78),l=n(79);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=l,e.exports=c},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(17),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(17);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(17);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(17);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},function(e,t,n){var r=n(16);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(16),a=n(35),o=n(37);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!a||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(i)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(27),a=n(84),o=n(9),i=n(86),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,f=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||a(e))&&(r(e)?f:s).test(i(e))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(19),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var a=i.call(e);return r&&(t?e[s]=n:delete e[s]),a}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,a=n(85),o=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(13)["__core-js_shared__"];e.exports=r},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(89),a=n(16),o=n(35);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||a),string:new r}}},function(e,t,n){var r=n(90),a=n(91),o=n(92),i=n(93),s=n(94);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(20);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(20),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(20),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},function(e,t,n){var r=n(20);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(21);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(21);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(21);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(21);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},function(e,t,n){var r=n(101)();e.exports=r},function(e,t){e.exports=function(e){return function(t,n,r){for(var a=-1,o=Object(t),i=r(t),s=i.length;s--;){var l=i[e?s:++a];if(!1===n(o[l],l,o))break}return t}}},function(e,t,n){var r=n(38),a=n(103),o=n(104),i=n(107),s=n(108),l=n(22),c=n(11),u=n(112),d=n(42),f=n(27),h=n(9),p=n(114),m=n(43),g=n(44),x=n(118);e.exports=function(e,t,n,v,y,b,w){var k=g(e,n),j=g(t,n),N=w.get(j);if(N)r(e,n,N);else{var _=b?b(k,j,n+"",e,t,w):void 0,S=void 0===_;if(S){var C=c(j),M=!C&&d(j),E=!C&&!M&&m(j);_=j,C||M||E?c(k)?_=k:u(k)?_=i(k):M?(S=!1,_=a(j,!0)):E?(S=!1,_=o(j,!0)):_=[]:p(j)||l(j)?(_=k,l(k)?_=x(k):h(k)&&!f(k)||(_=s(j))):S=!1}S&&(w.set(j,_),y(_,j,v,b,w),w.delete(j)),r(e,n,_)}}},function(e,t,n){(function(e){var r=n(13),a=t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,i=o&&o.exports===a?r.Buffer:void 0,s=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(29)(e))},function(e,t,n){var r=n(105);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(106);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){var r=n(13).Uint8Array;e.exports=r},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(109),a=n(40),o=n(41);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(a(e))}},function(e,t,n){var r=n(9),a=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(a)return a(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(15),a=n(14);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},function(e,t,n){var r=n(30),a=n(14);e.exports=function(e){return a(e)&&r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(15),a=n(40),o=n(14),i=Function.prototype,s=Object.prototype,l=i.toString,c=s.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=a(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},function(e,t,n){var r=n(15),a=n(31),o=n(14),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&a(e.length)&&!!i[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(36),a=t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,i=o&&o.exports===a&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s}).call(this,n(29)(e))},function(e,t,n){var r=n(119),a=n(46);e.exports=function(e){return r(e,a(e))}},function(e,t,n){var r=n(45),a=n(28);e.exports=function(e,t,n,o){var i=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],u=o?o(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),i?a(n,c,u):r(n,c,u)}return n}},function(e,t,n){var r=n(121),a=n(22),o=n(11),i=n(42),s=n(23),l=n(43),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&a(e),d=!n&&!u&&i(e),f=!n&&!u&&!d&&l(e),h=n||u||d||f,p=h?r(e.length,String):[],m=p.length;for(var g in e)!t&&!c.call(e,g)||h&&("length"==g||d&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(9),a=n(41),o=n(123),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=a(e),n=[];for(var s in e)("constructor"!=s||!t&&i.call(e,s))&&n.push(s);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(125),a=n(130);e.exports=function(e){return r(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&a(n[0],n[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var l=n[r];l&&e(t,l,r,i)}return t})}},function(e,t,n){var r=n(47),a=n(48),o=n(49);e.exports=function(e,t){return o(a(e,t,r),e+"")}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(128),a=n(39),o=n(47),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=i},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var a=n(),o=16-(a-r);if(r=a,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(18),a=n(30),o=n(23),i=n(9);e.exports=function(e,t,n){if(!i(n))return!1;var s=typeof t;return!!("number"==s?a(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},function(e,t){"undefined"!=typeof window&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)})),"function"!=typeof Math.imul&&(Math.imul=function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0}),"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!==r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t})},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(8).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(53),a=n(54),o=n(137),i=n(56),s=n(57),l=n(138),c=n(139);function u(){"use strict";var t=a(),n=t.m(u),d=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function f(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))}var h={throw:1,return:2,break:3,continue:3};function p(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,h[e],t)},delegateYield:function(e,a,o){return t.resultName=a,n(r.d,c(e),o)},finish:function(e){return n(r.f,e)}},n=function(e,n,a){r.p=t.prev,r.n=t.next;try{return e(n,a)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}return(e.exports=u=function(){return{wrap:function(e,n,r,a){return t.w(p(e),n,r,a&&a.reverse())},isGeneratorFunction:f,mark:t.m,awrap:function(e,t){return new r(e,t)},AsyncIterator:s,async:function(e,t,n,r,a){return(f(t)?i:o)(p(e),t,n,r,a)},keys:l,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(56);e.exports=function(e,t,n,a,o){var i=r(e,t,n,a,o);return i.next().then(function(e){return e.done?e.value:i.next()})},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(8).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(r(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(1);e.exports=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(51);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(146),a=n(156);e.exports=function(e,t){return r(e,t,function(t,n){return a(e,n)})}},function(e,t,n){var r=n(147),a=n(155),o=n(24);e.exports=function(e,t,n){for(var i=-1,s=t.length,l={};++i<s;){var c=t[i],u=r(e,c);n(u,c)&&a(l,o(c,e),u)}return l}},function(e,t,n){var r=n(24),a=n(34);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[a(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(11),a=n(33),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||i.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t,n){var r=n(150),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,function(e,n,r,a){t.push(r?a.replace(o,"$1"):n||e)}),t});e.exports=i},function(e,t,n){var r=n(151);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},function(e,t,n){var r=n(37);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i)||o,i};return n.cache=new(a.Cache||r),n}a.Cache=r,e.exports=a},function(e,t,n){var r=n(153);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(19),a=n(154),o=n(11),i=n(33),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return a(t,e)+"";if(i(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},function(e,t,n){var r=n(45),a=n(24),o=n(23),i=n(9),s=n(34);e.exports=function(e,t,n,l){if(!i(e))return e;for(var c=-1,u=(t=a(t,e)).length,d=u-1,f=e;null!=f&&++c<u;){var h=s(t[c]),p=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(c!=d){var m=f[h];void 0===(p=l?l(m,h,f):void 0)&&(p=i(m)?m:o(t[c+1])?[]:{})}r(f,h,p),f=f[h]}return e}},function(e,t,n){var r=n(157),a=n(158);e.exports=function(e,t){return null!=e&&a(e,t,r)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(24),a=n(22),o=n(11),i=n(23),s=n(31),l=n(34);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,d=!1;++c<u;){var f=l(t[c]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&s(u)&&i(f,u)&&(o(e)||a(e))}},function(e,t,n){var r=n(160),a=n(48),o=n(49);e.exports=function(e){return o(a(e,void 0,r),e+"")}},function(e,t,n){var r=n(161);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},function(e,t,n){var r=n(162),a=n(163);e.exports=function e(t,n,o,i,s){var l=-1,c=t.length;for(o||(o=a),s||(s=[]);++l<c;){var u=t[l];n>0&&o(u)?n>1?e(u,n-1,o,i,s):r(s,u):i||(s[s.length]=u)}return s}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},function(e,t,n){var r=n(19),a=n(22),o=n(11),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||a(e)||!!(i&&e&&e[i])}},function(e,t){e.exports=function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(166),a=n(32);e.exports=function(e,t,n){if(r())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var i=new(e.bind.apply(e,o));return n&&a(i,n.prototype),i},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(e.exports=n=function(){return!!t},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";n.r(t),n.d(t,"BarcodeDecoder",function(){return br}),n.d(t,"Readers",function(){return i}),n.d(t,"CameraAccess",function(){return Br}),n.d(t,"ImageDebug",function(){return nn}),n.d(t,"ImageWrapper",function(){return Jt}),n.d(t,"ResultCollector",function(){return Fr});var r={};n.r(r),n.d(r,"create",function(){return k}),n.d(r,"clone",function(){return j}),n.d(r,"copy",function(){return N}),n.d(r,"identity",function(){return _}),n.d(r,"fromValues",function(){return S}),n.d(r,"set",function(){return C}),n.d(r,"transpose",function(){return M}),n.d(r,"invert",function(){return E}),n.d(r,"adjoint",function(){return P}),n.d(r,"determinant",function(){return R}),n.d(r,"multiply",function(){return O}),n.d(r,"rotate",function(){return A}),n.d(r,"scale",function(){return D}),n.d(r,"fromRotation",function(){return T}),n.d(r,"fromScaling",function(){return L}),n.d(r,"str",function(){return z}),n.d(r,"frob",function(){return I}),n.d(r,"LDU",function(){return B}),n.d(r,"add",function(){return F}),n.d(r,"subtract",function(){return U}),n.d(r,"exactEquals",function(){return W}),n.d(r,"equals",function(){return H}),n.d(r,"multiplyScalar",function(){return V}),n.d(r,"multiplyScalarAndAdd",function(){return $}),n.d(r,"mul",function(){return q}),n.d(r,"sub",function(){return Q});var a={};n.r(a),n.d(a,"create",function(){return K}),n.d(a,"clone",function(){return G}),n.d(a,"fromValues",function(){return X}),n.d(a,"copy",function(){return J}),n.d(a,"set",function(){return Y}),n.d(a,"add",function(){return Z}),n.d(a,"subtract",function(){return ee}),n.d(a,"multiply",function(){return te}),n.d(a,"divide",function(){return ne}),n.d(a,"ceil",function(){return re}),n.d(a,"floor",function(){return ae}),n.d(a,"min",function(){return oe}),n.d(a,"max",function(){return ie}),n.d(a,"round",function(){return se}),n.d(a,"scale",function(){return le}),n.d(a,"scaleAndAdd",function(){return ce}),n.d(a,"distance",function(){return ue}),n.d(a,"squaredDistance",function(){return de}),n.d(a,"length",function(){return fe}),n.d(a,"squaredLength",function(){return he}),n.d(a,"negate",function(){return pe}),n.d(a,"inverse",function(){return me}),n.d(a,"normalize",function(){return ge}),n.d(a,"dot",function(){return xe}),n.d(a,"cross",function(){return ve}),n.d(a,"lerp",function(){return ye}),n.d(a,"random",function(){return be}),n.d(a,"transformMat2",function(){return we}),n.d(a,"transformMat2d",function(){return ke}),n.d(a,"transformMat3",function(){return je}),n.d(a,"transformMat4",function(){return Ne}),n.d(a,"rotate",function(){return _e}),n.d(a,"angle",function(){return Se}),n.d(a,"signedAngle",function(){return Ce}),n.d(a,"zero",function(){return Me}),n.d(a,"str",function(){return Ee}),n.d(a,"exactEquals",function(){return Pe}),n.d(a,"equals",function(){return Re}),n.d(a,"len",function(){return Ae}),n.d(a,"sub",function(){return De}),n.d(a,"mul",function(){return Te}),n.d(a,"div",function(){return Le}),n.d(a,"dist",function(){return ze}),n.d(a,"sqrDist",function(){return Ie}),n.d(a,"sqrLen",function(){return Be}),n.d(a,"forEach",function(){return Fe});var o={};n.r(o),n.d(o,"create",function(){return Ue}),n.d(o,"clone",function(){return We}),n.d(o,"length",function(){return He}),n.d(o,"fromValues",function(){return Ve}),n.d(o,"copy",function(){return $e}),n.d(o,"set",function(){return qe}),n.d(o,"add",function(){return Qe}),n.d(o,"subtract",function(){return Ke}),n.d(o,"multiply",function(){return Ge}),n.d(o,"divide",function(){return Xe}),n.d(o,"ceil",function(){return Je}),n.d(o,"floor",function(){return Ye}),n.d(o,"min",function(){return Ze}),n.d(o,"max",function(){return et}),n.d(o,"round",function(){return tt}),n.d(o,"scale",function(){return nt}),n.d(o,"scaleAndAdd",function(){return rt}),n.d(o,"distance",function(){return at}),n.d(o,"squaredDistance",function(){return ot}),n.d(o,"squaredLength",function(){return it}),n.d(o,"negate",function(){return st}),n.d(o,"inverse",function(){return lt}),n.d(o,"normalize",function(){return ct}),n.d(o,"dot",function(){return ut}),n.d(o,"cross",function(){return dt}),n.d(o,"lerp",function(){return ft}),n.d(o,"slerp",function(){return ht}),n.d(o,"hermite",function(){return pt}),n.d(o,"bezier",function(){return mt}),n.d(o,"random",function(){return gt}),n.d(o,"transformMat4",function(){return xt}),n.d(o,"transformMat3",function(){return vt}),n.d(o,"transformQuat",function(){return yt}),n.d(o,"rotateX",function(){return bt}),n.d(o,"rotateY",function(){return wt}),n.d(o,"rotateZ",function(){return kt}),n.d(o,"angle",function(){return jt}),n.d(o,"zero",function(){return Nt}),n.d(o,"str",function(){return _t}),n.d(o,"exactEquals",function(){return St}),n.d(o,"equals",function(){return Ct}),n.d(o,"sub",function(){return Mt}),n.d(o,"mul",function(){return Et}),n.d(o,"div",function(){return Pt}),n.d(o,"dist",function(){return Rt}),n.d(o,"sqrDist",function(){return Ot}),n.d(o,"len",function(){return At}),n.d(o,"sqrLen",function(){return Dt}),n.d(o,"forEach",function(){return Tt});var i={};n.r(i),n.d(i,"BarcodeReader",function(){return dn}),n.d(i,"TwoOfFiveReader",function(){return xn}),n.d(i,"NewCodabarReader",function(){return kn}),n.d(i,"Code128Reader",function(){return Nn}),n.d(i,"Code32Reader",function(){return Tn}),n.d(i,"Code39Reader",function(){return On}),n.d(i,"Code39VINReader",function(){return Bn}),n.d(i,"Code93Reader",function(){return Hn}),n.d(i,"EAN2Reader",function(){return er}),n.d(i,"EAN5Reader",function(){return rr}),n.d(i,"EAN8Reader",function(){return or}),n.d(i,"EANReader",function(){return Yn}),n.d(i,"I2of5Reader",function(){return sr}),n.d(i,"UPCEReader",function(){return dr}),n.d(i,"UPCReader",function(){return hr});var s=n(8),l=n.n(s),c=n(12),u=n.n(c),d=(n(131),n(58)),f=n.n(d),h=n(2),p=n.n(h),m=n(3),g=n.n(m),x=n(0),v=n.n(x),y="undefined"!=typeof Float32Array?Float32Array:Array,b=Math.random;function w(e){return e>=0?Math.round(e):e%.5==0?Math.floor(e):Math.round(e)}function k(){var e=new y(4);return y!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function j(e){var t=new y(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function N(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function _(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function S(e,t,n,r){var a=new y(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a}function C(e,t,n,r,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e}function M(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function E(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n*o-a*r;return i?(i=1/i,e[0]=o*i,e[1]=-r*i,e[2]=-a*i,e[3]=n*i,e):null}function P(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function R(e){return e[0]*e[3]-e[2]*e[1]}function O(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*s+o*l,e[1]=a*s+i*l,e[2]=r*c+o*u,e[3]=a*c+i*u,e}function A(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=a*l+i*s,e[2]=r*-s+o*l,e[3]=a*-s+i*l,e}function D(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=a*s,e[2]=o*l,e[3]=i*l,e}function T(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e}function L(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function z(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function I(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3])}function B(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]}function F(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function U(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function W(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function H(e,t){var n=e[0],r=e[1],a=e[2],o=e[3],i=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-i)<=1e-6*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=1e-6*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-l)<=1e-6*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-c)<=1e-6*Math.max(1,Math.abs(o),Math.abs(c))}function V(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function $(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}Math.PI,Math.PI;var q=O,Q=U;function K(){var e=new y(2);return y!=Float32Array&&(e[0]=0,e[1]=0),e}function G(e){var t=new y(2);return t[0]=e[0],t[1]=e[1],t}function X(e,t){var n=new y(2);return n[0]=e,n[1]=t,n}function J(e,t){return e[0]=t[0],e[1]=t[1],e}function Y(e,t,n){return e[0]=t,e[1]=n,e}function Z(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function ee(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function te(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function ne(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function re(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function ae(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function oe(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function ie(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function se(e,t){return e[0]=w(t[0]),e[1]=w(t[1]),e}function le(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function ce(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function ue(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function de(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function fe(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function he(e){var t=e[0],n=e[1];return t*t+n*n}function pe(e,t){return e[0]=-t[0],e[1]=-t[1],e}function me(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function ge(e,t){var n=t[0],r=t[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function xe(e,t){return e[0]*t[0]+e[1]*t[1]}function ve(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function ye(e,t,n,r){var a=t[0],o=t[1];return e[0]=a+r*(n[0]-a),e[1]=o+r*(n[1]-o),e}function be(e,t){t=void 0===t?1:t;var n=2*b()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function we(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a,e[1]=n[1]*r+n[3]*a,e}function ke(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a+n[4],e[1]=n[1]*r+n[3]*a+n[5],e}function je(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[3]*a+n[6],e[1]=n[1]*r+n[4]*a+n[7],e}function Ne(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[4]*a+n[12],e[1]=n[1]*r+n[5]*a+n[13],e}function _e(e,t,n,r){var a=t[0]-n[0],o=t[1]-n[1],i=Math.sin(r),s=Math.cos(r);return e[0]=a*s-o*i+n[0],e[1]=a*i+o*s+n[1],e}function Se(e,t){var n=e[0],r=e[1],a=t[0],o=t[1];return Math.abs(Math.atan2(r*a-n*o,n*a+r*o))}function Ce(e,t){var n=e[0],r=e[1],a=t[0],o=t[1];return Math.atan2(n*o-r*a,n*a+r*o)}function Me(e){return e[0]=0,e[1]=0,e}function Ee(e){return"vec2("+e[0]+", "+e[1]+")"}function Pe(e,t){return e[0]===t[0]&&e[1]===t[1]}function Re(e,t){var n=e[0],r=e[1],a=t[0],o=t[1];return Math.abs(n-a)<=1e-6*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=1e-6*Math.max(1,Math.abs(r),Math.abs(o))}var Oe,Ae=fe,De=ee,Te=te,Le=ne,ze=ue,Ie=de,Be=he,Fe=(Oe=K(),function(e,t,n,r,a,o){var i,s;for(t||(t=2),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,i=n;i<s;i+=t)Oe[0]=e[i],Oe[1]=e[i+1],a(Oe,Oe,o),e[i]=Oe[0],e[i+1]=Oe[1];return e});function Ue(){var e=new y(3);return y!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function We(e){var t=new y(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function He(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function Ve(e,t,n){var r=new y(3);return r[0]=e,r[1]=t,r[2]=n,r}function $e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qe(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Qe(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Ke(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ge(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Xe(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Je(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Ye(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Ze(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function et(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function tt(e,t){return e[0]=w(t[0]),e[1]=w(t[1]),e[2]=w(t[2]),e}function nt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function rt(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function at(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(n*n+r*r+a*a)}function ot(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function it(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function st(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function lt(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function ct(e,t){var n=t[0],r=t[1],a=t[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function ut(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function dt(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[0],s=n[1],l=n[2];return e[0]=a*l-o*s,e[1]=o*i-r*l,e[2]=r*s-a*i,e}function ft(e,t,n,r){var a=t[0],o=t[1],i=t[2];return e[0]=a+r*(n[0]-a),e[1]=o+r*(n[1]-o),e[2]=i+r*(n[2]-i),e}function ht(e,t,n,r){var a=Math.acos(Math.min(Math.max(ut(t,n),-1),1)),o=Math.sin(a),i=Math.sin((1-r)*a)/o,s=Math.sin(r*a)/o;return e[0]=i*t[0]+s*n[0],e[1]=i*t[1]+s*n[1],e[2]=i*t[2]+s*n[2],e}function pt(e,t,n,r,a,o){var i=o*o,s=i*(2*o-3)+1,l=i*(o-2)+o,c=i*(o-1),u=i*(3-2*o);return e[0]=t[0]*s+n[0]*l+r[0]*c+a[0]*u,e[1]=t[1]*s+n[1]*l+r[1]*c+a[1]*u,e[2]=t[2]*s+n[2]*l+r[2]*c+a[2]*u,e}function mt(e,t,n,r,a,o){var i=1-o,s=i*i,l=o*o,c=s*i,u=3*o*s,d=3*l*i,f=l*o;return e[0]=t[0]*c+n[0]*u+r[0]*d+a[0]*f,e[1]=t[1]*c+n[1]*u+r[1]*d+a[1]*f,e[2]=t[2]*c+n[2]*u+r[2]*d+a[2]*f,e}function gt(e,t){t=void 0===t?1:t;var n=2*b()*Math.PI,r=2*b()-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e}function xt(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,e[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,e[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,e}function vt(e,t,n){var r=t[0],a=t[1],o=t[2];return e[0]=r*n[0]+a*n[3]+o*n[6],e[1]=r*n[1]+a*n[4]+o*n[7],e[2]=r*n[2]+a*n[5]+o*n[8],e}function yt(e,t,n){var r=n[0],a=n[1],o=n[2],i=n[3],s=t[0],l=t[1],c=t[2],u=a*c-o*l,d=o*s-r*c,f=r*l-a*s;return u+=u,d+=d,f+=f,e[0]=s+i*u+a*f-o*d,e[1]=l+i*d+o*u-r*f,e[2]=c+i*f+r*d-a*u,e}function bt(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function wt(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function kt(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function jt(e,t){var n=e[0],r=e[1],a=e[2],o=t[0],i=t[1],s=t[2],l=Math.sqrt((n*n+r*r+a*a)*(o*o+i*i+s*s)),c=l&&ut(e,t)/l;return Math.acos(Math.min(Math.max(c,-1),1))}function Nt(e){return e[0]=0,e[1]=0,e[2]=0,e}function _t(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function St(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Ct(e,t){var n=e[0],r=e[1],a=e[2],o=t[0],i=t[1],s=t[2];return Math.abs(n-o)<=1e-6*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=1e-6*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-s)<=1e-6*Math.max(1,Math.abs(a),Math.abs(s))}var Mt=Ke,Et=Ge,Pt=Xe,Rt=at,Ot=ot,At=He,Dt=it,Tt=function(){var e=Ue();return function(t,n,r,a,o,i){var s,l;for(n||(n=3),r||(r=0),l=a?Math.min(a*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,i),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),Lt=function(e,t){e.fill(t)},zt=function(e){for(var t=0,n=0;n<e.length;n++)e[n]>e[t]&&(t=n);return t},It=function(e){for(var t=e.length,n=0;t--;)n+=e[t];return n},Bt=function(e,t){var n=[],r={rad:0,vec:a.clone([0,0])},o={};function i(e){o[e.id]=e,n.push(e)}function s(){var e,t=0;for(e=0;e<n.length;e++)t+=n[e].rad;r.rad=t/n.length,r.vec=a.clone([Math.cos(r.rad),Math.sin(r.rad)])}return i(e),s(),{add:function(e){o[e.id]||(i(e),s())},fits:function(e){return Math.abs(a.dot(e.point.vec,r.vec))>t},getPoints:function(){return n},getCenter:function(){return r}}},Ft=function(e,t,n){return{rad:e[n],point:e,id:t}};function Ut(e,t){return{x:e,y:t,toVec2:function(){return a.clone([this.x,this.y])},toVec3:function(){return o.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function Wt(e,t){t||(t=8);for(var n=e.data,r=n.length,a=8-t,o=new Int32Array(1<<t);r--;)o[n[r]>>a]++;return o}function Ht(e,t){var n=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=8-n;function a(e,n){for(var r=0,a=e;a<=n;a++)r+=t[a];return r}function o(e,n){for(var r=0,a=e;a<=n;a++)r+=a*t[a];return r}function i(){var r,i,s,l,c=[0],u=(1<<n)-1;t=Wt(e,n);for(var d=1;d<u;d++)0===(s=(r=a(0,d))*(i=a(d+1,u)))&&(s=1),l=o(0,d)*i-o(d+1,u)*r,c[d]=l*l/s;return zt(c)}return i()<<r}(e);return function(e,t,n){n||(n=e);for(var r=e.data,a=r.length,o=n.data;a--;)o[a]=r[a]<t?1:0}(e,n,t),n}function Vt(e,t,n){var r=e.length/4|0;if(n&&!0===n.singleChannel)for(var a=0;a<r;a++)t[a]=e[4*a+0];else for(var o=0;o<r;o++)t[o]=.299*e[4*o+0]+.587*e[4*o+1]+.114*e[4*o+2]}function $t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=e[0],r=e[1],a=e[2],o=a*r,i=o*(1-Math.abs(n/60%2-1)),s=a-o,l=0,c=0,u=0;return n<60?(l=o,c=i):n<120?(l=i,c=o):n<180?(c=o,u=i):n<240?(c=i,u=o):n<300?(l=i,u=o):n<360&&(l=o,u=i),t[0]=255*(l+s)|0,t[1]=255*(c+s)|0,t[2]=255*(u+s)|0,t}function qt(e){for(var t=[],n=[],r=1;r<Math.sqrt(e)+1;r++)e%r==0&&(n.push(r),r!==e/r&&t.unshift(Math.floor(e/r)));return n.concat(t)}function Qt(e,t){var n,r=qt(t.x),a=qt(t.y),o=Math.max(t.x,t.y),i=function(e,t){for(var n=0,r=0,a=[];n<e.length&&r<t.length;)e[n]===t[r]?(a.push(e[n]),n++,r++):e[n]>t[r]?r++:n++;return a}(r,a),s=[8,10,15,20,32,60,80],l={"x-small":5,small:4,medium:3,large:2,"x-large":1},c=l[e]||l.medium,u=s[c],d=Math.floor(o/u);function f(e){for(var t=0,n=e[Math.floor(e.length/2)];t<e.length-1&&e[t]<d;)t++;return t>0&&(n=Math.abs(e[t]-d)>Math.abs(e[t-1]-d)?e[t-1]:e[t]),d/n<s[c+1]/s[c]&&d/n>s[c-1]/s[c]?{x:n,y:n}:null}return(n=f(i))||(n=f(qt(o)))||(n=f(qt(d*u))),n}var Kt={top:function(e,t){return"%"===e.unit?Math.floor(t.height*(e.value/100)):null},right:function(e,t){return"%"===e.unit?Math.floor(t.width-t.width*(e.value/100)):null},bottom:function(e,t){return"%"===e.unit?Math.floor(t.height-t.height*(e.value/100)):null},left:function(e,t){return"%"===e.unit?Math.floor(t.width*(e.value/100)):null}};function Gt(e,t,n){var r={width:e,height:t},a=Object.keys(n).reduce(function(e,t){var a=function(e){return{value:parseFloat(e),unit:(e.indexOf("%"),e.length,"%")}}(n[t]),o=Kt[t](a,r);return e[t]=o,e},{});return{sx:a.left,sy:a.top,sw:a.right-a.left,sh:a.bottom-a.top}}function Xt(e){if(e<0)throw new Error("expected positive number, received ".concat(e))}var Jt=g()(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,a=arguments.length>3?arguments[3]:void 0;p()(this,e),v()(this,"data",void 0),v()(this,"size",void 0),v()(this,"indexMapping",void 0),n?this.data=n:(this.data=new r(t.x*t.y),a&&Lt(this.data,0)),this.size=t},[{key:"inImageWithBorder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Xt(t),e.x>=0&&e.y>=0&&e.x<this.size.x+2*t&&e.y<this.size.y+2*t}},{key:"subImageAsCopy",value:function(e,t){Xt(t.x),Xt(t.y);for(var n=e.size,r=n.x,a=n.y,o=0;o<r;o++)for(var i=0;i<a;i++)e.data[i*r+o]=this.data[(t.y+i)*this.size.x+t.x+o];return e}},{key:"get",value:function(e,t){return this.data[t*this.size.x+e]}},{key:"getSafe",value:function(e,t){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var n=0;n<this.size.x;n++)this.indexMapping.x[n]=n,this.indexMapping.x[n+this.size.x]=n;for(var r=0;r<this.size.y;r++)this.indexMapping.y[r]=r,this.indexMapping.y[r+this.size.y]=r}return this.data[this.indexMapping.y[t+this.size.y]*this.size.x+this.indexMapping.x[e+this.size.x]]}},{key:"set",value:function(e,t,n){return this.data[t*this.size.x+e]=n,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var e=this.size,t=e.x,n=e.y,r=0;r<t;r++)this.data[r]=this.data[(n-1)*t+r]=0;for(var a=1;a<n-1;a++)this.data[a*t]=this.data[a*t+(t-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(e){var t,n,r,o,i,s,l,c,u,d,f=this.data,h=this.size.y,p=this.size.x,m=[],g=[],x=Math.PI,v=x/4;if(e<=0)return g;for(i=0;i<e;i++)m[i]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(n=0;n<h;n++)for(o=n*n,t=0;t<p;t++)(r=f[n*p+t])>0&&((s=m[r-1]).m00+=1,s.m01+=n,s.m10+=t,s.m11+=t*n,s.m02+=o,s.m20+=t*t);for(i=0;i<e;i++)s=m[i],isNaN(s.m00)||0===s.m00||(c=s.m10/s.m00,u=s.m01/s.m00,l=s.m11/s.m00-c*u,d=(s.m02/s.m00-u*u-(s.m20/s.m00-c*c))/(2*l),d=.5*Math.atan(d)+(l>=0?v:-v)+x,s.theta=(180*d/x+90)%180-90,s.theta<0&&(s.theta+=180),s.rad=d>x?d-x:d,s.vec=a.clone([Math.cos(d),Math.sin(d)]),g.push(s));return g}},{key:"getAsRGBA",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Uint8ClampedArray(4*this.size.x*this.size.y),n=0;n<this.size.y;n++)for(var r=0;r<this.size.x;r++){var a=n*this.size.x+r,o=this.get(r,n)*e;t[4*a+0]=o,t[4*a+1]=o,t[4*a+2]=o,t[4*a+3]=255}return t}},{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var n=e.getContext("2d");if(!n)throw new Error("Unable to get canvas context");var r=n.getImageData(0,0,e.width,e.height),a=this.getAsRGBA(t);e.width=this.size.x,e.height=this.size.y;var o=new ImageData(a,r.width,r.height);n.putImageData(o,0,0)}},{key:"overlay",value:function(e,t,n){var r=t<0||t>360?360:t,a=[0,1,1],o=[0,0,0],i=[255,255,255],s=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var l=e.getContext("2d");if(!l)throw new Error("Unable to get canvas context");for(var c=l.getImageData(n.x,n.y,this.size.x,this.size.y),u=c.data,d=this.data.length;d--;){a[0]=this.data[d]*r;var h=4*d,p=a[0]<=0?i:a[0]>=360?s:$t(a,o),m=f()(p,3);u[h]=m[0],u[h+1]=m[1],u[h+2]=m[2],u[h+3]=255}l.putImageData(c,n.x,n.y)}}]),Yt=n(7),Zt=n.n(Yt),en=n(6),tn=n.n(en),nn={drawRect:function(e,t,n,r){n.strokeStyle=r.color,n.fillStyle=r.color,n.lineWidth=r.lineWidth||1,n.beginPath(),n.strokeRect(e.x,e.y,t.x,t.y)},drawPath:function(e,t,n,r){n.strokeStyle=r.color,n.fillStyle=r.color,n.lineWidth=r.lineWidth,n.beginPath(),n.moveTo(e[0][t.x],e[0][t.y]);for(var a=1;a<e.length;a++)n.lineTo(e[a][t.x],e[a][t.y]);n.closePath(),n.stroke()},drawImage:function(e,t,n){var r=n.getImageData(0,0,t.x,t.y),a=r.data,o=a.length,i=e.length;if(o/i!=4)return!1;for(;i--;){var s=e[i];a[--o]=255,a[--o]=s,a[--o]=s,a[--o]=s}return n.putImageData(r,0,0),!0}},rn=n(4),an=n.n(rn),on=n(1),sn=n.n(on),ln=n(5),cn=n.n(ln),un=function(e){return e[e.Forward=1]="Forward",e[e.Reverse=-1]="Reverse",e}({}),dn=g()(function e(t,n){p()(this,e),v()(this,"_row",[]),v()(this,"config",{}),v()(this,"supplements",[]),v()(this,"SINGLE_CODE_ERROR",0),v()(this,"FORMAT","unknown"),v()(this,"CONFIG_KEYS",{}),this._row=[],this.config=t||{},n&&(this.supplements=n)},[{key:"_nextUnset",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t<e.length;t++)if(!e[t])return t;return e.length}},{key:"_matchPattern",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.SINGLE_CODE_ERROR||1,r=0,a=0,o=0,i=0,s=0,l=0,c=0,u=0;u<e.length;u++)o+=e[u],i+=t[u];if(o<i)return Number.MAX_VALUE;n*=s=o/i;for(var d=0;d<e.length;d++){if(l=e[d],c=t[d]*s,(a=Math.abs(l-c)/c)>n)return Number.MAX_VALUE;r+=a}return r/i}},{key:"_nextSet",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t<e.length;t++)if(e[t])return t;return e.length}},{key:"_correctBars",value:function(e,t,n){for(var r=n.length,a=0;r--;)(a=e[n[r]]*(1-(1-t)/2))>1&&(e[n[r]]=a)}},{key:"decodePattern",value:function(e){this._row=e;var t=this.decode();return null===t?(this._row.reverse(),(t=this.decode())&&(t.direction=un.Reverse,t.start=this._row.length-t.start,t.end=this._row.length-t.end)):t.direction=un.Forward,t&&(t.format=this.FORMAT),t}},{key:"_matchRange",value:function(e,t,n){var r;for(r=e=e<0?0:e;r<t;r++)if(this._row[r]!==n)return!1;return!0}},{key:"_fillCounters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._nextUnset(this._row),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._row.length,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[],a=0;r[a]=0;for(var o=e;o<t;o++)this._row[o]^(n?1:0)?r[a]++:(r[++a]=1,n=!n);return r}},{key:"_toCounters",value:function(e,t){var n=t.length,r=this._row.length,a=!this._row[e],o=0;Lt(t,0);for(var i=e;i<r;i++)if(this._row[i]^(a?1:0))t[o]++;else{if(++o===n)break;t[o]=1,a=!a}return t}},{key:"decodeImage",value:function(e){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}]);function fn(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var hn=[3,1,3,1,1,1],pn=[3,1,1,1,3],mn=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],gn=hn.reduce(function(e,t){return e+t},0),xn=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=fn(this,t,[].concat(r)),v()(e,"barSpaceRatio",[1,1]),v()(e,"FORMAT","2of5"),v()(e,"SINGLE_CODE_ERROR",.78),v()(e,"AVG_CODE_ERROR",.3),e}return cn()(t,e),g()(t,[{key:"_findPattern",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[],o=0,i={error:Number.MAX_VALUE,code:-1,start:0,end:0},s=0,l=0,c=this.AVG_CODE_ERROR;t||(t=this._nextSet(this._row));for(var u=0;u<e.length;u++)a[u]=0;for(var d=t;d<this._row.length;d++)if(this._row[d]^(n?1:0))a[o]++;else{if(o===a.length-1){s=0;for(var f=0;f<a.length;f++)s+=a[f];if((l=this._matchPattern(a,e))<c)return i.error=l,i.start=d-s,i.end=d,i;if(!r)return null;for(var h=0;h<a.length-2;h++)a[h]=a[h+2];a[a.length-2]=0,a[a.length-1]=0,o--}else o++;a[o]=1,n=!n}return null}},{key:"_findStart",value:function(){for(var e=null,t=this._nextSet(this._row),n=1,r=0;!e;){if(!(e=this._findPattern(hn,t,!1,!0)))return null;if(n=Math.floor((e.end-e.start)/gn),(r=e.start-5*n)>=0&&this._matchRange(r,e.start,0))return e;t=e.end,e=null}return e}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start)/2;return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"_findEnd",value:function(){this._row.reverse();var e=this._nextSet(this._row),t=this._findPattern(pn,e,!1,!0);if(this._row.reverse(),null===t)return null;var n=t.start;return t.start=this._row.length-t.end,t.end=this._row.length-n,null!==t?this._verifyTrailingWhitespace(t):null}},{key:"_verifyCounterLength",value:function(e){return e.length%10==0}},{key:"_decodeCode",value:function(e){for(var t=this.AVG_CODE_ERROR,n={error:Number.MAX_VALUE,code:-1,start:0,end:0},r=0;r<mn.length;r++){var a=this._matchPattern(e,mn[r]);a<n.error&&(n.code=r,n.error=a)}return n.error<t?n:null}},{key:"_decodePayload",value:function(e,t,n){for(var r=0,a=e.length,o=[0,0,0,0,0],i=null;r<a;){for(var s=0;s<5;s++)o[s]=e[r]*this.barSpaceRatio[0],r+=2;if(!(i=this._decodeCode(o)))return null;t.push("".concat(i.code)),n.push(i)}return i}},{key:"decode",value:function(e,t){var n=this._findStart();if(!n)return null;var r=this._findEnd();if(!r)return null;var a=this._fillCounters(n.end,r.start,!1);if(!this._verifyCounterLength(a))return null;var o=[];o.push(n);var i=[];return this._decodePayload(a,i,o)?i.length<5?null:(o.push(r),{code:i.join(""),start:n.start,end:r.end,startInfo:n,decodedCodes:o,format:this.FORMAT}):null}}])}(dn);function vn(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var yn=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],bn=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],wn=[26,41,11,14],kn=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=vn(this,t,[].concat(r)),v()(e,"_counters",[]),v()(e,"FORMAT","codabar"),e}return cn()(t,e),g()(t,[{key:"_computeAlternatingThreshold",value:function(e,t){for(var n=Number.MAX_VALUE,r=0,a=0,o=e;o<t;o+=2)(a=this._counters[o])>r&&(r=a),a<n&&(n=a);return(n+r)/2|0}},{key:"_toPattern",value:function(e){var t=e+7;if(t>this._counters.length)return-1;for(var n=this._computeAlternatingThreshold(e,t),r=this._computeAlternatingThreshold(e+1,t),a=64,o=0,i=0,s=0;s<7;s++)o=0==(1&s)?n:r,this._counters[e+s]>o&&(i|=a),a>>=1;return i}},{key:"_isStartEnd",value:function(e){for(var t=0;t<wn.length;t++)if(wn[t]===e)return!0;return!1}},{key:"_sumCounters",value:function(e,t){for(var n=0,r=e;r<t;r++)n+=this._counters[r];return n}},{key:"_findStart",value:function(){for(var e=this._nextUnset(this._row),t=1;t<this._counters.length;t++){var n=this._toPattern(t);if(-1!==n&&this._isStartEnd(n))return{start:e+=this._sumCounters(0,t),end:e+this._sumCounters(t,t+8),startCounter:t,endCounter:t+8}}return null}},{key:"_patternToChar",value:function(e){for(var t=0;t<bn.length;t++)if(bn[t]===e)return String.fromCharCode(yn[t]);return null}},{key:"_calculatePatternLength",value:function(e){for(var t=0,n=e;n<e+7;n++)t+=this._counters[n];return t}},{key:"_verifyWhitespace",value:function(e,t){return(e-1<=0||this._counters[e-1]>=this._calculatePatternLength(e)/2)&&(t+8>=this._counters.length||this._counters[t+7]>=this._calculatePatternLength(t)/2)}},{key:"_charToPattern",value:function(e){for(var t=e.charCodeAt(0),n=0;n<yn.length;n++)if(yn[n]===t)return bn[n];return 0}},{key:"_thresholdResultPattern",value:function(e,t){for(var n,r={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},a=t,o=0;o<e.length;o++){n=this._charToPattern(e[o]);for(var i=6;i>=0;i--){var s=2==(1&i)?r.bar:r.space,l=1==(1&n)?s.wide:s.narrow;l.size+=this._counters[a+i],l.counts++,n>>=1}a+=8}return["space","bar"].forEach(function(e){var t=r[e];t.wide.min=Math.floor((t.narrow.size/t.narrow.counts+t.wide.size/t.wide.counts)/2),t.narrow.max=Math.ceil(t.wide.min),t.wide.max=Math.ceil((2*t.wide.size+1.5)/t.wide.counts)}),r}},{key:"_validateResult",value:function(e,t){for(var n,r=this._thresholdResultPattern(e,t),a=t,o=0;o<e.length;o++){n=this._charToPattern(e[o]);for(var i=6;i>=0;i--){var s=0==(1&i)?r.bar:r.space,l=1==(1&n)?s.wide:s.narrow,c=this._counters[a+i];if(c<l.min||c>l.max)return!1;n>>=1}a+=8}return!0}},{key:"decode",value:function(e,t){if(this._counters=this._fillCounters(),!(t=this._findStart()))return null;var n,r=t.startCounter,a=[];do{if((n=this._toPattern(r))<0)return null;var o=this._patternToChar(n);if(null===o)return null;if(a.push(o),r+=8,a.length>1&&this._isStartEnd(n))break}while(r<this._counters.length);if(a.length-2<4||!this._isStartEnd(n))return null;if(!this._verifyWhitespace(t.startCounter,r-8))return null;if(!this._validateResult(a,t.startCounter))return null;r=r>this._counters.length?this._counters.length:r;var i=t.start+this._sumCounters(t.startCounter,r-8);return{code:a.join(""),start:t.start,end:i,startInfo:t,decodedCodes:a,format:this.FORMAT}}}])}(dn);function jn(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var Nn=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=jn(this,t,[].concat(r)),v()(e,"CODE_SHIFT",98),v()(e,"CODE_C",99),v()(e,"CODE_B",100),v()(e,"CODE_A",101),v()(e,"START_CODE_A",103),v()(e,"START_CODE_B",104),v()(e,"START_CODE_C",105),v()(e,"STOP_CODE",106),v()(e,"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),v()(e,"SINGLE_CODE_ERROR",.64),v()(e,"AVG_CODE_ERROR",.3),v()(e,"FORMAT","code_128"),v()(e,"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),e}return cn()(t,e),g()(t,[{key:"_decodeCode",value:function(e,t){for(var n={error:Number.MAX_VALUE,code:-1,start:e,end:e,correction:{bar:1,space:1}},r=[0,0,0,0,0,0],a=e,o=!this._row[a],i=0,s=a;s<this._row.length;s++)if(this._row[s]^(o?1:0))r[i]++;else{if(i===r.length-1){t&&this._correct(r,t);for(var l=0;l<this.CODE_PATTERN.length;l++){var c=this._matchPattern(r,this.CODE_PATTERN[l]);c<n.error&&(n.code=l,n.error=c)}return n.end=s,-1===n.code||n.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[n.code]&&(n.correction.bar=this.calculateCorrection(this.CODE_PATTERN[n.code],r,this.MODULE_INDICES.bar),n.correction.space=this.calculateCorrection(this.CODE_PATTERN[n.code],r,this.MODULE_INDICES.space)),n)}r[++i]=1,o=!o}return null}},{key:"_correct",value:function(e,t){this._correctBars(e,t.bar,this.MODULE_INDICES.bar),this._correctBars(e,t.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var e=[0,0,0,0,0,0],t=this._nextSet(this._row),n={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},r=!1,a=0,o=t;o<this._row.length;o++)if(this._row[o]^(r?1:0))e[a]++;else{if(a===e.length-1){for(var i=e.reduce(function(e,t){return e+t},0),s=this.START_CODE_A;s<=this.START_CODE_C;s++){var l=this._matchPattern(e,this.CODE_PATTERN[s]);l<n.error&&(n.code=s,n.error=l)}if(n.error<this.AVG_CODE_ERROR)return n.start=o-i,n.end=o,n.correction.bar=this.calculateCorrection(this.CODE_PATTERN[n.code],e,this.MODULE_INDICES.bar),n.correction.space=this.calculateCorrection(this.CODE_PATTERN[n.code],e,this.MODULE_INDICES.space),n;for(var c=0;c<4;c++)e[c]=e[c+2];e[4]=0,e[5]=0,a--}else a++;e[a]=1,r=!r}return null}},{key:"decode",value:function(e,t){var n=this,r=this._findStart();if(null===r)return null;var a={code:r.code,start:r.start,end:r.end,correction:{bar:r.correction.bar,space:r.correction.space}},o=[];o.push(a);for(var i=a.code,s=function(e){switch(e){case n.START_CODE_A:return n.CODE_A;case n.START_CODE_B:return n.CODE_B;case n.START_CODE_C:return n.CODE_C;default:return null}}(a.code),l=!1,c=!1,u=c,d=!0,f=0,h=[],p=[];!l;){if(u=c,c=!1,null!==(a=this._decodeCode(a.end,a.correction)))switch(a.code!==this.STOP_CODE&&(d=!0),a.code!==this.STOP_CODE&&(h.push(a.code),i+=++f*a.code),o.push(a),s){case this.CODE_A:if(a.code<64)p.push(String.fromCharCode(32+a.code));else if(a.code<96)p.push(String.fromCharCode(a.code-64));else switch(a.code!==this.STOP_CODE&&(d=!1),a.code){case this.CODE_SHIFT:c=!0,s=this.CODE_B;break;case this.CODE_B:s=this.CODE_B;break;case this.CODE_C:s=this.CODE_C;break;case this.STOP_CODE:l=!0}break;case this.CODE_B:if(a.code<96)p.push(String.fromCharCode(32+a.code));else switch(a.code!==this.STOP_CODE&&(d=!1),a.code){case this.CODE_SHIFT:c=!0,s=this.CODE_A;break;case this.CODE_A:s=this.CODE_A;break;case this.CODE_C:s=this.CODE_C;break;case this.STOP_CODE:l=!0}break;case this.CODE_C:if(a.code<100)p.push(a.code<10?"0"+a.code:a.code);else switch(a.code!==this.STOP_CODE&&(d=!1),a.code){case this.CODE_A:s=this.CODE_A;break;case this.CODE_B:s=this.CODE_B;break;case this.STOP_CODE:l=!0}}else l=!0;u&&(s=s===this.CODE_A?this.CODE_B:this.CODE_A)}return null===a?null:(a.end=this._nextUnset(this._row,a.end),this._verifyTrailingWhitespace(a)?(i-=f*h[h.length-1])%103!==h[h.length-1]?null:p.length?(d&&p.splice(p.length-1,1),{code:p.join(""),start:r.start,end:a.end,codeset:s,startInfo:r,decodedCodes:o,endInfo:a,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(e){var t;return(t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"calculateCorrection",value:function(e,t,n){for(var r=n.length,a=0,o=0;r--;)o+=e[n[r]],a+=t[n[r]];return o/a}}])}(dn),_n=n(10),Sn=n.n(_n),Cn=n(25),Mn=n.n(Cn);function En(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var Pn=new Uint16Array(Mn()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map(function(e){return e.charCodeAt(0)})),Rn=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),On=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=En(this,t,[].concat(r)),v()(e,"FORMAT","code_39"),e}return cn()(t,e),g()(t,[{key:"_findStart",value:function(){for(var e=this._nextSet(this._row),t=e,n=new Uint16Array([0,0,0,0,0,0,0,0,0]),r=0,a=!1,o=e;o<this._row.length;o++)if(this._row[o]^(a?1:0))n[r]++;else{if(r===n.length-1){if(148===this._toPattern(n)){var i=Math.floor(Math.max(0,t-(o-t)/4));if(this._matchRange(i,t,0))return{start:t,end:o}}t+=n[0]+n[1];for(var s=0;s<7;s++)n[s]=n[s+2];n[7]=0,n[8]=0,r--}else r++;n[r]=1,a=!a}return null}},{key:"_toPattern",value:function(e){for(var t=e.length,n=0,r=t,a=0;r>3;){n=this._findNextWidth(e,n),r=0;for(var o=0,i=0;i<t;i++)e[i]>n&&(o|=1<<t-1-i,r++,a+=e[i]);if(3===r){for(var s=0;s<t&&r>0;s++)if(e[s]>n&&(r--,2*e[s]>=a))return-1;return o}}return-1}},{key:"_findNextWidth",value:function(e,t){for(var n=Number.MAX_VALUE,r=0;r<e.length;r++)e[r]<n&&e[r]>t&&(n=e[r]);return n}},{key:"_patternToChar",value:function(e){for(var t=0;t<Rn.length;t++)if(Rn[t]===e)return String.fromCharCode(Pn[t]);return null}},{key:"_verifyTrailingWhitespace",value:function(e,t,n){var r=It(n);return 3*(t-e-r)>=r}},{key:"decode",value:function(){var e=new Uint16Array([0,0,0,0,0,0,0,0,0]),t=[],n=this._findStart();if(!n)return null;var r,a,o=this._nextSet(this._row,n.end);do{e=this._toCounters(o,e);var i=this._toPattern(e);if(i<0)return null;if(null===(r=this._patternToChar(i)))return null;t.push(r),a=o,o+=It(e),o=this._nextSet(this._row,o)}while("*"!==r);return t.pop(),t.length&&this._verifyTrailingWhitespace(a,o,e)?{code:t.join(""),start:n.start,end:o,startInfo:n,decodedCodes:t,format:this.FORMAT}:null}}])}(dn);function An(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var Dn=/[AEIO]/g,Tn=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=An(this,t,[].concat(r)),v()(e,"FORMAT","code_32_reader"),e}return cn()(t,e),g()(t,[{key:"_decodeCode32",value:function(e){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(e))return null;for(var t=0,n=0;n<e.length;n++)t=32*t+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(e[n]);var r="".concat(t);return r.length<9&&(r=("000000000"+r).slice(-9)),"A"+r}},{key:"_checkChecksum",value:function(e){return!!e}},{key:"decode",value:function(){var e,n,r,a,o,i=(e=t,n="decode",r=this,a=3,o=Sn()(sn()(1&a?e.prototype:e),n,r),2&a&&"function"==typeof o?function(e){return o.apply(r,e)}:o)([]);if(!i)return null;var s=i.code;if(!s)return null;if(s=s.replace(Dn,""),!this._checkChecksum(s))return null;var l=this._decodeCode32(s);return l?(i.code=l,i):null}}])}(On);function Ln(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var zn=/[IOQ]/g,In=/[A-Z0-9]{17}/,Bn=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Ln(this,t,[].concat(r)),v()(e,"FORMAT","code_39_vin"),e}return cn()(t,e),g()(t,[{key:"_checkChecksum",value:function(e){return!!e}},{key:"decode",value:function(){var e,n,r,a,o,i=(e=t,n="decode",r=this,a=3,o=Sn()(sn()(1&a?e.prototype:e),n,r),2&a&&"function"==typeof o?function(e){return o.apply(r,e)}:o)([]);if(!i)return null;var s=i.code;return s&&(s=s.replace(zn,"")).match(In)&&this._checkChecksum(s)?(i.code=s,i):null}}])}(On);function Fn(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var Un=new Uint16Array(Mn()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map(function(e){return e.charCodeAt(0)})),Wn=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),Hn=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Fn(this,t,[].concat(r)),v()(e,"FORMAT","code_93"),e}return cn()(t,e),g()(t,[{key:"_patternToChar",value:function(e){for(var t=0;t<Wn.length;t++)if(Wn[t]===e)return String.fromCharCode(Un[t]);return null}},{key:"_toPattern",value:function(e){for(var t=e.length,n=e.reduce(function(e,t){return e+t},0),r=0,a=0;a<t;a++){var o=Math.round(9*e[a]/n);if(o<1||o>4)return-1;if(0==(1&a))for(var i=0;i<o;i++)r=r<<1|1;else r<<=o}return r}},{key:"_findStart",value:function(){for(var e=this._nextSet(this._row),t=e,n=new Uint16Array([0,0,0,0,0,0]),r=0,a=!1,o=e;o<this._row.length;o++)if(this._row[o]^(a?1:0))n[r]++;else{if(r===n.length-1){if(350===this._toPattern(n)){var i=Math.floor(Math.max(0,t-(o-t)/4));if(this._matchRange(i,t,0))return{start:t,end:o}}t+=n[0]+n[1];for(var s=0;s<4;s++)n[s]=n[s+2];n[4]=0,n[5]=0,r--}else r++;n[r]=1,a=!a}return null}},{key:"_verifyEnd",value:function(e,t){return!(e===t||!this._row[t])}},{key:"_decodeExtended",value:function(e){for(var t=e.length,n=[],r=0;r<t;r++){var a=e[r];if(a>="a"&&a<="d"){if(r>t-2)return null;var o=e[++r],i=o.charCodeAt(0),s=void 0;switch(a){case"a":if(!(o>="A"&&o<="Z"))return null;s=String.fromCharCode(i-64);break;case"b":if(o>="A"&&o<="E")s=String.fromCharCode(i-38);else if(o>="F"&&o<="J")s=String.fromCharCode(i-11);else if(o>="K"&&o<="O")s=String.fromCharCode(i+16);else if(o>="P"&&o<="S")s=String.fromCharCode(i+43);else{if(!(o>="T"&&o<="Z"))return null;s=String.fromCharCode(127)}break;case"c":if(o>="A"&&o<="O")s=String.fromCharCode(i-32);else{if("Z"!==o)return null;s=":"}break;case"d":if(!(o>="A"&&o<="Z"))return null;s=String.fromCharCode(i+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",s),null}n.push(s)}else n.push(a)}return n}},{key:"_matchCheckChar",value:function(e,t,n){var r=e.slice(0,t),a=r.length,o=r.reduce(function(e,t,r){return e+((-1*r+(a-1))%n+1)*Un.indexOf(t.charCodeAt(0))},0);return Un[o%47]===e[t].charCodeAt(0)}},{key:"_verifyChecksums",value:function(e){return this._matchCheckChar(e,e.length-2,20)&&this._matchCheckChar(e,e.length-1,15)}},{key:"decode",value:function(e,t){if(!(t=this._findStart()))return null;var n,r,a=new Uint16Array([0,0,0,0,0,0]),o=[],i=this._nextSet(this._row,t.end);do{a=this._toCounters(i,a);var s=this._toPattern(a);if(s<0)return null;if(null===(r=this._patternToChar(s)))return null;o.push(r),n=i,i+=It(a),i=this._nextSet(this._row,i)}while("*"!==r);return o.pop(),o.length&&this._verifyEnd(n,i)&&this._verifyChecksums(o)?(o=o.slice(0,o.length-2),null===(o=this._decodeExtended(o))?null:{code:o.join(""),start:t.start,end:i,startInfo:t,decodedCodes:o,format:this.FORMAT}):null}}])}(dn);function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach(function(t){v()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qn(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var Qn=[1,1,1],Kn=[1,1,1,1,1],Gn=[1,1,2],Xn=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],Jn=[0,11,13,14,19,25,28,21,22,26],Yn=function(e){function t(e,n){var r;return p()(this,t),r=qn(this,t,[u()({supplements:[]},e),n]),v()(r,"FORMAT","ean_13"),v()(r,"SINGLE_CODE_ERROR",.7),v()(r,"STOP_PATTERN",[1,1,1]),r}return cn()(t,e),g()(t,[{key:"_findPattern",value:function(e,t,n,r){var a=new Array(e.length).fill(0),o={error:Number.MAX_VALUE,start:0,end:0},i=0;t||(t=this._nextSet(this._row));for(var s=!1,l=t;l<this._row.length;l++)if(this._row[l]^(n?1:0))a[i]+=1;else{if(i===a.length-1){var c=this._matchPattern(a,e);if(c<.48&&o.error&&c<o.error)return s=!0,o.error=c,o.start=l-a.reduce(function(e,t){return e+t},0),o.end=l,o;if(r){for(var u=0;u<a.length-2;u++)a[u]=a[u+2];a[a.length-2]=0,a[a.length-1]=0,i--}}else i++;a[i]=1,n=!n}return s?o:null}},{key:"_decodeCode",value:function(e,t){var n=[0,0,0,0],r=e,a={error:Number.MAX_VALUE,code:-1,start:e,end:e},o=!this._row[r],i=0;t||(t=Xn.length);for(var s=r;s<this._row.length;s++)if(this._row[s]^(o?1:0))n[i]++;else{if(i===n.length-1){for(var l=0;l<t;l++){var c=this._matchPattern(n,Xn[l]);a.end=s,c<a.error&&(a.code=l,a.error=c)}return a.error>.48?null:a}n[++i]=1,o=!o}return null}},{key:"_findStart",value:function(){for(var e=this._nextSet(this._row),t=null;!t;){if(!(t=this._findPattern(Qn,e,!1,!0)))return null;var n=t.start-(t.end-t.start);if(n>=0&&this._matchRange(n,t.start,0))return t;e=t.end,t=null}return null}},{key:"_calculateFirstDigit",value:function(e){for(var t=0;t<Jn.length;t++)if(e===Jn[t])return t;return null}},{key:"_decodePayload",value:function(e,t,n){for(var r=$n({},e),a=0,o=0;o<6;o++){if(!(r=this._decodeCode(r.end)))return null;r.code>=10?(r.code-=10,a|=1<<5-o):a|=0<<5-o,t.push(r.code),n.push(r)}var i=this._calculateFirstDigit(a);if(null===i)return null;t.unshift(i);var s=this._findPattern(Kn,r.end,!0,!1);if(null===s||!s.end)return null;n.push(s);for(var l=0;l<6;l++){if(!(s=this._decodeCode(s.end,10)))return null;n.push(s),t.push(s.code)}return s}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start);return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"_findEnd",value:function(e,t){var n=this._findPattern(this.STOP_PATTERN,e,t,!1);return null!==n?this._verifyTrailingWhitespace(n):null}},{key:"_checksum",value:function(e){for(var t=0,n=e.length-2;n>=0;n-=2)t+=e[n];t*=3;for(var r=e.length-1;r>=0;r-=2)t+=e[r];return t%10==0}},{key:"_decodeExtensions",value:function(e){var t=this._nextSet(this._row,e),n=this._findPattern(Gn,t,!1,!1);if(null===n)return null;for(var r=0;r<this.supplements.length;r++)try{var a=this.supplements[r].decode(this._row,n.end);if(null!==a)return{code:a.code,start:t,startInfo:n,end:a.end,decodedCodes:a.decodedCodes,format:this.supplements[r].FORMAT}}catch(e){console.error("* decodeExtensions error in ",this.supplements[r],": ",e)}return null}},{key:"decode",value:function(e,t){var n=new Array,r=new Array,a={},o=this._findStart();if(!o)return null;var i={start:o.start,end:o.end};if(r.push(i),!(i=this._decodePayload(i,n,r)))return null;if(!(i=this._findEnd(i.end,!1)))return null;if(r.push(i),!this._checksum(n))return null;if(this.supplements.length>0){var s=this._decodeExtensions(i.end);if(!s)return null;if(!s.decodedCodes)return null;var l=s.decodedCodes[s.decodedCodes.length-1],c={start:l.start+((l.end-l.start)/2|0),end:l.end};if(!this._verifyTrailingWhitespace(c))return null;a={supplement:s,code:n.join("")+s.code}}return $n($n({code:n.join(""),start:o.start,end:i.end,startInfo:o,decodedCodes:r},a),{},{format:this.FORMAT})}}])}(dn);function Zn(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var er=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Zn(this,t,[].concat(r)),v()(e,"FORMAT","ean_2"),e}return cn()(t,e),g()(t,[{key:"decode",value:function(e,t){e&&(this._row=e);var n=0,r=t,a=this._row.length,o=[],i=[],s=null;if(void 0===r)return null;for(var l=0;l<2&&r<a;l++){if(!(s=this._decodeCode(r)))return null;i.push(s),o.push(s.code%10),s.code>=10&&(n|=1<<1-l),1!==l&&(r=this._nextSet(this._row,s.end),r=this._nextUnset(this._row,r))}if(2!==o.length||parseInt(o.join(""))%4!==n)return null;var c=this._findStart();return{code:o.join(""),decodedCodes:i,end:s.end,format:this.FORMAT,startInfo:c,start:c.start}}}])}(Yn);function tr(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var nr=[24,20,18,17,12,6,3,10,9,5],rr=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=tr(this,t,[].concat(r)),v()(e,"FORMAT","ean_5"),e}return cn()(t,e),g()(t,[{key:"decode",value:function(e,t){if(void 0===t)return null;e&&(this._row=e);for(var n=0,r=t,a=this._row.length,o=null,i=[],s=[],l=0;l<5&&r<a;l++){if(!(o=this._decodeCode(r)))return null;s.push(o),i.push(o.code%10),o.code>=10&&(n|=1<<4-l),4!==l&&(r=this._nextSet(this._row,o.end),r=this._nextUnset(this._row,r))}if(5!==i.length)return null;if(function(e){for(var t=e.length,n=0,r=t-2;r>=0;r-=2)n+=e[r];n*=3;for(var a=t-1;a>=0;a-=2)n+=e[a];return(n*=3)%10}(i)!==function(e){for(var t=0;t<10;t++)if(e===nr[t])return t;return null}(n))return null;var c=this._findStart();return{code:i.join(""),decodedCodes:s,end:o.end,format:this.FORMAT,startInfo:c,start:c.start}}}])}(Yn);function ar(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var or=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=ar(this,t,[].concat(r)),v()(e,"FORMAT","ean_8"),e}return cn()(t,e),g()(t,[{key:"_decodePayload",value:function(e,t,n){for(var r=e,a=0;a<4;a++){if(!(r=this._decodeCode(r.end,10)))return null;t.push(r.code),n.push(r)}if(null===(r=this._findPattern(Kn,r.end,!0,!1)))return null;n.push(r);for(var o=0;o<4;o++){if(!(r=this._decodeCode(r.end,10)))return null;n.push(r),t.push(r.code)}return r}}])}(Yn);function ir(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var sr=function(e){function t(e){var n;return p()(this,t),n=ir(this,t,[u()({normalizeBarSpaceWidth:!1},e)]),v()(n,"barSpaceRatio",[1,1]),v()(n,"SINGLE_CODE_ERROR",.78),v()(n,"AVG_CODE_ERROR",.38),v()(n,"START_PATTERN",[1,1,1,1]),v()(n,"STOP_PATTERN",[1,1,3]),v()(n,"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),v()(n,"MAX_CORRECTION_FACTOR",5),v()(n,"FORMAT","i2of5"),e.normalizeBarSpaceWidth&&(n.SINGLE_CODE_ERROR=.38,n.AVG_CODE_ERROR=.09),n.config=e,an()(n,n)}return cn()(t,e),g()(t,[{key:"_matchPattern",value:function(e,n){if(this.config.normalizeBarSpaceWidth){for(var r=[0,0],a=[0,0],o=[0,0],i=this.MAX_CORRECTION_FACTOR,s=1/i,l=0;l<e.length;l++)r[l%2]+=e[l],a[l%2]+=n[l];o[0]=a[0]/r[0],o[1]=a[1]/r[1],o[0]=Math.max(Math.min(o[0],i),s),o[1]=Math.max(Math.min(o[1],i),s),this.barSpaceRatio=o;for(var c=0;c<e.length;c++)e[c]*=this.barSpaceRatio[c%2]}return(u=t,d="_matchPattern",f=this,h=3,p=Sn()(sn()(1&h?u.prototype:u),d,f),2&h&&"function"==typeof p?function(e){return p.apply(f,e)}:p)([e,n]);var u,d,f,h,p}},{key:"_findPattern",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array(e.length).fill(0),o=0,i={error:Number.MAX_VALUE,start:0,end:0},s=this.AVG_CODE_ERROR;n=n||!1,r=r||!1,t||(t=this._nextSet(this._row));for(var l=t;l<this._row.length;l++)if(this._row[l]^(n?1:0))a[o]++;else{if(o===a.length-1){var c=a.reduce(function(e,t){return e+t},0),u=this._matchPattern(a,e);if(u<s)return i.error=u,i.start=l-c,i.end=l,i;if(!r)return null;for(var d=0;d<a.length-2;d++)a[d]=a[d+2];a[a.length-2]=0,a[a.length-1]=0,o--}else o++;a[o]=1,n=!n}return null}},{key:"_findStart",value:function(){for(var e=0,t=this._nextSet(this._row),n=null,r=1;!n;){if(!(n=this._findPattern(this.START_PATTERN,t,!1,!0)))return null;if(r=Math.floor((n.end-n.start)/4),(e=n.start-10*r)>=0&&this._matchRange(e,n.start,0))return n;t=n.end,n=null}return null}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start)/2;return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"_findEnd",value:function(){this._row.reverse();var e=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),null===e)return null;var t=e.start;return e.start=this._row.length-e.end,e.end=this._row.length-t,null!==e?this._verifyTrailingWhitespace(e):null}},{key:"_decodePair",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=this._decodeCode(e[n]);if(!r)return null;t.push(r)}return t}},{key:"_decodeCode",value:function(e){for(var t=this.AVG_CODE_ERROR,n={error:Number.MAX_VALUE,code:-1,start:0,end:0},r=0;r<this.CODE_PATTERN.length;r++){var a=this._matchPattern(e,this.CODE_PATTERN[r]);a<n.error&&(n.code=r,n.error=a)}return n.error<t?n:null}},{key:"_decodePayload",value:function(e,t,n){for(var r=0,a=e.length,o=[[0,0,0,0,0],[0,0,0,0,0]],i=null;r<a;){for(var s=0;s<5;s++)o[0][s]=e[r]*this.barSpaceRatio[0],o[1][s]=e[r+1]*this.barSpaceRatio[1],r+=2;if(!(i=this._decodePair(o)))return null;for(var l=0;l<i.length;l++)t.push(i[l].code+""),n.push(i[l])}return i}},{key:"_verifyCounterLength",value:function(e){return e.length%10==0}},{key:"decode",value:function(e,t){var n=new Array,r=new Array,a=this._findStart();if(!a)return null;r.push(a);var o=this._findEnd();if(!o)return null;var i=this._fillCounters(a.end,o.start,!1);return this._verifyCounterLength(i)&&this._decodePayload(i,n,r)?n.length%2!=0||n.length<6?null:(r.push(o),{code:n.join(""),start:a.start,end:o.end,startInfo:a,decodedCodes:r,format:this.FORMAT}):null}}])}(dn);function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cr(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}function ur(e,t,n,r){var a=Sn()(sn()(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof a?function(e){return a.apply(n,e)}:a}var dr=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=cr(this,t,[].concat(r)),v()(e,"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),v()(e,"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),v()(e,"FORMAT","upc_e"),e}return cn()(t,e),g()(t,[{key:"_decodePayload",value:function(e,t,n){for(var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach(function(t){v()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),a=0,o=0;o<6;o++){if(!(r=this._decodeCode(r.end)))return null;r.code>=10&&(r.code=r.code-10,a|=1<<5-o),t.push(r.code),n.push(r)}return this._determineParity(a,t)?r:null}},{key:"_determineParity",value:function(e,t){for(var n=0;n<this.CODE_FREQUENCY.length;n++)for(var r=0;r<this.CODE_FREQUENCY[n].length;r++)if(e===this.CODE_FREQUENCY[n][r])return t.unshift(n),t.push(r),!0;return!1}},{key:"_convertToUPCA",value:function(e){var t=[e[0]],n=e[e.length-2];return(t=n<=2?t.concat(e.slice(1,3)).concat([n,0,0,0,0]).concat(e.slice(3,6)):3===n?t.concat(e.slice(1,4)).concat([0,0,0,0,0]).concat(e.slice(4,6)):4===n?t.concat(e.slice(1,5)).concat([0,0,0,0,0,e[5]]):t.concat(e.slice(1,6)).concat([0,0,0,0,n])).push(e[e.length-1]),t}},{key:"_checksum",value:function(e){return ur(t,"_checksum",this,3)([this._convertToUPCA(e)])}},{key:"_findEnd",value:function(e,n){return ur(t,"_findEnd",this,3)([e,!0])}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start)/2;return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}}])}(Yn);function fr(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var hr=function(e){function t(){var e;p()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=fr(this,t,[].concat(r)),v()(e,"FORMAT","upc_a"),e}return cn()(t,e),g()(t,[{key:"decode",value:function(e,t){var n=Yn.prototype.decode.call(this);return n&&n.code&&13===n.code.length&&"0"===n.code.charAt(0)?(n.code=n.code.substring(1),n):null}}])}(Yn),pr={},mr={UP:1,DOWN:-1};pr.getBarcodeLine=function(e,t,n){var r,a,o,i,s,l=0|t.x,c=0|t.y,u=0|n.x,d=0|n.y,f=Math.abs(d-c)>Math.abs(u-l),h=[],p=e.data,m=e.size.x,g=255,x=0;function v(e,t){s=p[t*m+e],g=s<g?s:g,x=s>x?s:x,h.push(s)}f&&(o=l,l=c,c=o,o=u,u=d,d=o),l>u&&(o=l,l=u,u=o,o=c,c=d,d=o);var y=u-l,b=Math.abs(d-c);r=y/2|0,a=c;var w=c<d?1:-1;for(i=l;i<u;i++)f?v(a,i):v(i,a),(r-=b)<0&&(a+=w,r+=y);return{line:h,min:g,max:x}},pr.toBinaryLine=function(e){var t,n,r,a,o,i,s=e.min,l=e.max,c=e.line,u=s+(l-s)/2,d=[],f=(l-s)/12,h=-f;for(r=c[0]>u?mr.UP:mr.DOWN,d.push({pos:0,val:c[0]}),o=0;o<c.length-2;o++)r!==(a=(t=c[o+1]-c[o])+(n=c[o+2]-c[o+1])<h&&c[o+1]<1.5*u?mr.DOWN:t+n>f&&c[o+1]>.5*u?mr.UP:r)&&(d.push({pos:o,val:c[o]}),r=a);for(d.push({pos:c.length,val:c[c.length-1]}),i=d[0].pos;i<d[1].pos;i++)c[i]=c[i]>u?0:1;for(o=1;o<d.length-1;o++)for(f=d[o+1].val>d[o].val?d[o].val+(d[o+1].val-d[o].val)/3*2|0:d[o+1].val+(d[o].val-d[o+1].val)/3|0,i=d[o].pos;i<d[o+1].pos;i++)c[i]=c[i]>f?0:1;return{line:c,threshold:f}},pr.debug={printFrequency:function(e,t){var n,r=t.getContext("2d");for(t.width=e.length,t.height=256,r.beginPath(),r.strokeStyle="blue",n=0;n<e.length;n++)r.moveTo(n,255),r.lineTo(n,255-e[n]);r.stroke(),r.closePath()},printPattern:function(e,t){var n,r=t.getContext("2d");for(t.width=e.length,r.fillColor="black",n=0;n<e.length;n++)1===e[n]&&r.fillRect(n,0,1,100)}};var gr=pr;function xr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var yr={code_128_reader:Nn,ean_reader:Yn,ean_5_reader:rr,ean_2_reader:er,ean_8_reader:or,code_39_reader:On,code_39_vin_reader:Bn,codabar_reader:kn,upc_reader:hr,upc_e_reader:dr,i2of5_reader:sr,"2of5_reader":xn,code_93_reader:Hn,code_32_reader:Tn},br={registerReader:function(e,t){yr[e]=t},create:function(e,t){var n={frequency:null,pattern:null,overlay:null},r=[];function a(){e.readers.forEach(function(e){var t,n={},a=[];"object"===l()(e)?(t=e.format,n=e.config):"string"==typeof e&&(t=e),n.supplements&&(a=n.supplements.map(function(e){return new yr[e]}));try{var o=new yr[t](n,a);r.push(o)}catch(e){throw console.error("* Error constructing reader ",t,e),e}})}function o(e){var n,a=null,o=gr.getBarcodeLine(t,e[0],e[1]);for(gr.toBinaryLine(o),n=0;n<r.length&&null===a;n++)a=r[n].decodePattern(o.line);return null===a?null:{codeResult:a,barcodeLine:o}}function i(e){return s.apply(this,arguments)}function s(){return(s=Zt()(tn.a.mark(function e(t){var n,a,o,i,s;return tn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=null,a=xr(r),e.prev=1,a.s();case 2:if((o=a.n()).done){e.next=5;break}if(!(i=o.value).decodeImage){e.next=4;break}return e.next=3,i.decodeImage(t);case 3:if(!(n=e.sent)){e.next=4;break}return e.abrupt("continue",5);case 4:e.next=2;break;case 5:e.next=7;break;case 6:e.prev=6,s=e.catch(1),a.e(s);case 7:return e.prev=7,a.f(),e.finish(7);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e,null,[[1,6,7,8]])}))).apply(this,arguments)}function c(e){var r,a;n.overlay;var i=function(e){return Math.sqrt(Math.pow(Math.abs(e[1].y-e[0].y),2)+Math.pow(Math.abs(e[1].x-e[0].x),2))}(r=function(e){return[{x:(e[1][0]-e[0][0])/2+e[0][0],y:(e[1][1]-e[0][1])/2+e[0][1]},{x:(e[3][0]-e[2][0])/2+e[2][0],y:(e[3][1]-e[2][1])/2+e[2][1]}]}(e)),s=Math.atan2(r[1].y-r[0].y,r[1].x-r[0].x);return null===(r=function(e,n,r){function a(t){var r=t*Math.sin(n),a=t*Math.cos(n);e[0].y-=r,e[0].x-=a,e[1].y+=r,e[1].x+=a}for(a(r);r>1&&(!t.inImageWithBorder(e[0])||!t.inImageWithBorder(e[1]));)a(-(r-=Math.ceil(r/2)));return e}(r,s,Math.floor(.1*i)))?null:(null===(a=o(r))&&(a=function(e,t,n){var r,a,i,s=Math.sqrt(Math.pow(e[1][0]-e[0][0],2)+Math.pow(e[1][1]-e[0][1],2)),l=null,c=Math.sin(n),u=Math.cos(n);for(r=1;r<16&&null===l;r++)i={y:(a=s/16*r*(r%2==0?-1:1))*c,x:a*u},t[0].y+=i.x,t[0].x-=i.y,t[1].y+=i.x,t[1].x-=i.y,l=o(t);return l}(e,r,s)),null===a?null:{codeResult:a.codeResult,line:r,angle:s,pattern:a.barcodeLine.line,threshold:a.barcodeLine.threshold})}return a(),{decodeFromBoundingBox:function(e){return c(e)},decodeFromBoundingBoxes:function(t){var n,r,a=[],o=e.multiple;for(n=0;n<t.length;n++){var i=t[n];if((r=c(i)||{}).box=i,o)a.push(r);else if(r.codeResult)return r}return{barcodes:a}},decodeFromImage:function(e){return Zt()(tn.a.mark(function t(){var n;return tn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,i(e);case 1:return n=t.sent,t.abrupt("return",n);case 2:case"end":return t.stop()}},t)}))()},registerReader:function(e,t){if(yr[e])throw new Error("cannot register existing reader",e);yr[e]=t},setReaders:function(t){e.readers=t,r.length=0,a()}}}},wr=function(){var e={};function t(t){return e[t]||(e[t]={subscribers:[]}),e[t]}function n(e,t){e.async?setTimeout(function(){e.callback(t)},4):e.callback(t)}function r(e,n,r){var a;if("function"==typeof n)a={callback:n,async:r};else if(!(a=n).callback)throw new Error("Callback was not specified on options");t(e).subscribers.push(a)}return{subscribe:function(e,t,n){return r(e,t,n)},publish:function(e,r){var a=t(e),o=a.subscribers;o.filter(function(e){return!!e.once}).forEach(function(e){n(e,r)}),a.subscribers=o.filter(function(e){return!e.once}),a.subscribers.forEach(function(e){n(e,r)})},once:function(e,t){r(e,{callback:t,async:arguments.length>2&&void 0!==arguments[2]&&arguments[2],once:!0})},unsubscribe:function(n,r){if(n){var a=t(n);a.subscribers=a&&r?a.subscribers.filter(function(e){return e.callback!==r}):[]}else e={}}}}(),kr=n(59),jr=n.n(kr),Nr=n(60);function _r(e,t,n){return t=sn()(t),an()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return!!e}()?Reflect.construct(t,n||[],sn()(e).constructor):t.apply(e,n))}var Sr,Cr=function(e){function t(e,n){var r;return p()(this,t),r=_r(this,t,[e]),v()(r,"code",void 0),r.code=n,Object.setPrototypeOf(r,t.prototype),r}return cn()(t,e),g()(t)}(n.n(Nr)()(Error)),Mr="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function Er(){try{return navigator.mediaDevices.enumerateDevices()}catch(t){var e=new Cr("enumerateDevices is not defined. ".concat(Mr),-1);return Promise.reject(e)}}function Pr(e){try{return navigator.mediaDevices.getUserMedia(e)}catch(e){var t=new Cr("getUserMedia is not defined. ".concat(Mr),-1);return Promise.reject(t)}}function Rr(e){return new Promise(function(t,n){var r=10;!function a(){r>0?e.videoWidth>10&&e.videoHeight>10?t():window.setTimeout(a,500):n(new Cr("Unable to play video stream. Is webcam working?",-1)),r--}()})}function Or(e,t){return Ar.apply(this,arguments)}function Ar(){return(Ar=Zt()(tn.a.mark(function e(t,n){var r;return tn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,Pr(n);case 1:if(r=e.sent,Sr=r,!t){e.next=2;break}return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t.srcObject=r,t.addEventListener("loadedmetadata",function(){t.play().catch(function(e){console.warn("* Error while trying to play video stream:",e)})}),e.abrupt("return",Rr(t));case 2:return e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dr(e){var t=jr()(e,["width","height","facingMode","aspectRatio","deviceId"]);return void 0!==e.minAspectRatio&&e.minAspectRatio>0&&(t.aspectRatio=e.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),void 0!==e.facing&&(t.facingMode=e.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),t}function Tr(){var e=Dr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return e&&e.deviceId&&e.facingMode&&delete e.facingMode,Promise.resolve({audio:!1,video:e})}function Lr(){return(Lr=Zt()(tn.a.mark(function e(){var t;return tn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,Er();case 1:return t=e.sent,e.abrupt("return",t.filter(function(e){return"videoinput"===e.kind}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zr(){if(!Sr)return null;var e=Sr.getVideoTracks();return e&&null!=e&&e.length?e[0]:null}var Ir={requestedVideoElement:null,request:function(e,t){return Zt()(tn.a.mark(function n(){var r;return tn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Ir.requestedVideoElement=e,n.next=1,Tr(t);case 1:return r=n.sent,n.abrupt("return",Or(e,r));case 2:case"end":return n.stop()}},n)}))()},release:function(){var e=Sr&&Sr.getVideoTracks();return null!==Ir.requestedVideoElement&&Ir.requestedVideoElement.pause(),new Promise(function(t){setTimeout(function(){e&&e.length&&e.forEach(function(e){return e.stop()}),Sr=null,Ir.requestedVideoElement=null,t()},0)})},enumerateVideoDevices:function(){return Lr.apply(this,arguments)},getActiveStreamLabel:function(){var e=zr();return e?e.label:""},getActiveTrack:zr,disableTorch:function(){return Zt()(tn.a.mark(function e(){var t,n;return tn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=zr())){e.next=4;break}return e.prev=1,e.next=2,t.applyConstraints({advanced:[{torch:!1}]});case 2:e.next=4;break;case 3:throw e.prev=3,(n=e.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),n;case 4:case"end":return e.stop()}},e,null,[[1,3]])}))()},enableTorch:function(){return Zt()(tn.a.mark(function e(){var t,n;return tn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=zr())){e.next=4;break}return e.prev=1,e.next=2,t.applyConstraints({advanced:[{torch:!0}]});case 2:e.next=4;break;case 3:throw e.prev=3,(n=e.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),n;case 4:case"end":return e.stop()}},e,null,[[1,3]])}))()}},Br=Ir,Fr={create:function(e){var t,n=document.createElement("canvas"),r=n.getContext("2d",{willReadFrequently:!!e.willReadFrequently}),a=[],o=null!==(t=e.capacity)&&void 0!==t?t:20,i=!0===e.capture;function s(t){return!!o&&t&&!function(e,t){return t&&t.some(function(t){return Object.keys(t).every(function(n){return t[n]===e[n]})})}(t,e.blacklist)&&function(e,t){return"function"!=typeof t||t(e)}(t,e.filter)}return{addResult:function(e,t,l){var c={};s(l)&&(o--,c.codeResult=l,i&&(n.width=t.x,n.height=t.y,nn.drawImage(e,t,r),c.frame=n.toDataURL()),a.push(c))},getResults:function(){return a}}}},Ur={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},Wr=Math.PI/180,Hr={create:function(e,t){var n,r={},a=e.getConfig(),o=(Ut(e.getRealWidth(),e.getRealHeight()),e.getCanvasSize()),i=Ut(e.getWidth(),e.getHeight()),s=e.getTopRight(),l=s.x,c=s.y,u=null,d=null,f=a.willReadFrequently;return(n=t||document.createElement("canvas")).width=o.x,n.height=o.y,u=n.getContext("2d",{willReadFrequently:!!f}),d=new Uint8Array(i.x*i.y),r.attachData=function(e){d=e},r.getData=function(){return d},r.grab=function(){var t,r=a.halfSample,s=e.getFrame(),f=s,h=0;if(f){if(function(e,t){e.width!==t.x&&(e.width=t.x),e.height!==t.y&&(e.height=t.y)}(n,o,a.debug),"ImageStream"===a.type&&(f=s.img,s.tags&&s.tags.orientation))switch(s.tags.orientation){case 6:h=90*Wr;break;case 8:h=-90*Wr}return 0!==h?(u.translate(o.x/2,o.y/2),u.rotate(h),u.drawImage(f,-o.y/2,-o.x/2,o.y,o.x),u.rotate(-h),u.translate(-o.x/2,-o.y/2)):u.drawImage(f,0,0,o.x,o.y),t=u.getImageData(l,c,i.x,i.y).data,r?function(e,t,n){for(var r,a=0,o=t.x,i=Math.floor(e.length/4),s=t.x/2,l=0,c=t.x;o<i;){for(r=0;r<s;r++)n[l]=(.299*e[4*a+0]+.587*e[4*a+1]+.114*e[4*a+2]+(.299*e[4*(a+1)+0]+.587*e[4*(a+1)+1]+.114*e[4*(a+1)+2])+(.299*e[4*o+0]+.587*e[4*o+1]+.114*e[4*o+2])+(.299*e[4*(o+1)+0]+.587*e[4*(o+1)+1]+.114*e[4*(o+1)+2]))/4,l++,a+=2,o+=2;a+=c,o+=c}}(t,i,d):Vt(t,d,a),!0}return!1},r.getSize=function(){return i},r}},Vr=Hr,$r={274:"orientation"},qr=Object.keys($r).map(function(e){return $r[e]});function Qr(e){return new Promise(function(t){var n=new FileReader;n.onload=function(e){return t(e.target.result)},n.readAsArrayBuffer(e)})}function Kr(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onreadystatechange=function(){r.readyState!==XMLHttpRequest.DONE||200!==r.status&&0!==r.status||t(this.response)},r.onerror=n,r.send()})}function Gr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qr,n=new DataView(e),r=e.byteLength,a=t.reduce(function(e,t){var n=Object.keys($r).filter(function(e){return $r[e]===t})[0];return n&&(e[n]=t),e},{}),o=2;if(255!==n.getUint8(0)||216!==n.getUint8(1))return!1;for(;o<r;){if(255!==n.getUint8(o))return!1;if(225===n.getUint8(o+1))return Xr(n,o+4,a);o+=2+n.getUint16(o+2)}return!1}function Xr(e,t,n){if("Exif"!==function(e,t,n){for(var r="",a=t;a<t+n;a++)r+=String.fromCharCode(e.getUint8(a));return r}(e,t,4))return!1;var r,a=t+6;if(18761===e.getUint16(a))r=!1;else{if(19789!==e.getUint16(a))return!1;r=!0}if(42!==e.getUint16(a+2,!r))return!1;var o=e.getUint32(a+4,!r);return!(o<8)&&function(e,t,n,r,a){for(var o=e.getUint16(n,!a),i={},s=0;s<o;s++){var l=n+12*s+2,c=r[e.getUint16(l,!a)];c&&(i[c]=Jr(e,l,t,n,a))}return i}(e,a,a+o,n,r)}function Jr(e,t,n,r,a){var o=e.getUint16(t+2,!a),i=e.getUint32(t+4,!a);return 3===o&&1===i?e.getUint16(t+8,!a):null}var Yr={};function Zr(e,t){e.onload=function(){t.loaded(this)}}Yr.load=function(e,t,n,r,a,o){var i,s,l,c=new Array(r),u=new Array(c.length);if(!1===a)c[0]=e;else for(i=0;i<c.length;i++)l=n+i,c[i]="".concat(e,"image-").concat("00".concat(l).slice(-3),".jpg");for(u.notLoaded=[],u.addImage=function(e){u.notLoaded.push(e)},u.loaded=function(n){for(var r=u.notLoaded,o=0;o<r.length;o++)if(r[o]===n){r.splice(o,1);for(var i=0;i<c.length;i++){var s=c[i].substr(c[i].lastIndexOf("/"));if(-1!==n.src.lastIndexOf(s)){u[i]={img:n};break}}break}0===r.length&&(!1===a?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qr;return/^blob:/i.test(e)?Kr(e).then(Qr).then(function(e){return Gr(e,t)}):Promise.resolve(null)}(e,["orientation"]).then(function(e){u[0].tags=e,t(u)}).catch(function(e){console.log(e),t(u)}):t(u))},i=0;i<c.length;i++)s=new Image,u.addImage(s),Zr(s,u),s.src=c[i]};var ea,ta,na,ra,aa,oa,ia,sa,la,ca,ua,da,fa=Yr,ha={createVideoStream:function(e){console.warn("**** InputStreamBrowser createVideoStream");var t,n,r=null,a=["canrecord","ended"],o={},i={x:0,y:0,type:"Point"},s={x:0,y:0,type:"XYSize"},l={getRealWidth:function(){return e.videoWidth},getRealHeight:function(){return e.videoHeight},getWidth:function(){return t},getHeight:function(){return n},setWidth:function(e){t=e},setHeight:function(e){n=e},setInputStream:function(e){r=e,this.setAttribute("src",void 0!==e.src?e.src:"")},ended:function(){return e.ended},getConfig:function(){return r},setAttribute:function(t,n){e&&e.setAttribute(t,n)},pause:function(){e.pause()},play:function(){e.play()},setCurrentTime:function(e){var t;"LiveStream"!==(null===(t=r)||void 0===t?void 0:t.type)&&this.setAttribute("currentTime",e.toString())},addEventListener:function(t,n,r){-1!==a.indexOf(t)?(o[t]||(o[t]=[]),o[t].push(n)):e.addEventListener(t,n,r)},clearEventHandlers:function(){a.forEach(function(t){var n=o[t];n&&n.length>0&&n.forEach(function(n){e.removeEventListener(t,n)})})},trigger:function(a,i){var c,u,d,f,h,p=o[a];if("canrecord"===a&&(f=e.videoWidth,h=e.videoHeight,t=null!==(u=r)&&void 0!==u&&u.size?f/h>1?r.size:Math.floor(f/h*r.size):f,n=null!==(d=r)&&void 0!==d&&d.size?f/h>1?Math.floor(h/f*r.size):r.size:h,s.x=t,s.y=n),p&&p.length>0)for(c=0;c<p.length;c++)p[c].apply(l,i)},setTopRight:function(e){i.x=e.x,i.y=e.y},getTopRight:function(){return i},setCanvasSize:function(e){s.x=e.x,s.y=e.y},getCanvasSize:function(){return s},getFrame:function(){return e}};return l},createLiveStream:function(e){console.warn("**** InputStreamBrowser createLiveStream"),e&&e.setAttribute("autoplay","true");var t=ha.createVideoStream(e);return t.ended=function(){return!1},t},createImageStream:function(){var e,t,n=null,r=0,a=0,o=0,i=!0,s=!1,l=null,c=0,u=null,d=!1,f=["canrecord","ended"],h={},p={x:0,y:0,type:"Point"},m={x:0,y:0,type:"XYSize"};function g(e,t){var n,r=h[e];if(r&&r.length>0)for(n=0;n<r.length;n++)r[n].apply(x,t)}var x={trigger:g,getWidth:function(){return e},getHeight:function(){return t},setWidth:function(t){e=t},setHeight:function(e){t=e},getRealWidth:function(){return r},getRealHeight:function(){return a},setInputStream:function(i){var d;n=i,!1===i.sequence?(u=i.src,c=1):(u=i.src,c=i.length),s=!1,fa.load(u,function(i){var c,u;if(l=i,i[0].tags&&i[0].tags.orientation)switch(i[0].tags.orientation){case 6:case 8:r=i[0].img.height,a=i[0].img.width;break;default:r=i[0].img.width,a=i[0].img.height}else r=i[0].img.width,a=i[0].img.height;e=null!==(c=n)&&void 0!==c&&c.size?r/a>1?n.size:Math.floor(r/a*n.size):r,t=null!==(u=n)&&void 0!==u&&u.size?r/a>1?Math.floor(a/r*n.size):n.size:a,m.x=e,m.y=t,s=!0,o=0,setTimeout(function(){g("canrecord",[])},0)},1,c,null===(d=n)||void 0===d?void 0:d.sequence,n)},ended:function(){return d},setAttribute:function(){},getConfig:function(){return n},pause:function(){i=!0},play:function(){i=!1},setCurrentTime:function(e){o=e},addEventListener:function(e,t){-1!==f.indexOf(e)&&(h[e]||(h[e]=[]),h[e].push(t))},clearEventHandlers:function(){Object.keys(h).forEach(function(e){return delete h[e]})},setTopRight:function(e){p.x=e.x,p.y=e.y},getTopRight:function(){return p},setCanvasSize:function(e){m.x=e.x,m.y=e.y},getCanvasSize:function(){return m},getFrame:function(){var e,t;return s?(i||(e=null===(t=l)||void 0===t?void 0:t[o],o<c-1?o++:setTimeout(function(){d=!0,g("ended",[])},0)),e):null}};return x}},pa=ha,ma={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(e,t){var n,r=e.data,a=t.data,o=this.searchDirections,i=e.size.x;function s(e,t,s,l){var c,u,d;for(c=0;c<o.length;c++){if(u=e.cy+o[e.dir][0],d=e.cx+o[e.dir][1],r[n=u*i+d]===t&&(0===a[n]||a[n]===s))return a[n]=s,e.cy=u,e.cx=d,!0;0===a[n]&&(a[n]=l),e.dir=(e.dir+1)%8}return!1}function l(e,t,n){return{dir:n,x:e,y:t,next:null,prev:null}}return{trace:function(e,t,n,r){return s(e,t,n,r)},contourTracing:function(t,n,r,a,o){return function(t,n,r,a,o){var i,c,u,d=null,f={cx:n,cy:t,dir:0};if(s(f,a,r,o)){i=d=l(n,t,f.dir),u=f.dir,(c=l(f.cx,f.cy,0)).prev=i,i.next=c,c.next=null,i=c;var h=e.size.x*e.size.y,p=0;do{f.dir=(f.dir+6)%8,s(f,a,r,o),u!==f.dir?(i.dir=f.dir,(c=l(f.cx,f.cy,0)).prev=i,i.next=c,c.next=null,i=c):(i.dir=u,i.x=f.cx,i.y=f.cy),u=f.dir}while((f.cx!==n||f.cy!==t)&&++p<h);d.prev=i.prev,i.prev.next=d}return d}(t,n,r,a,o)}}}},ga={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(e,t){var n=e.data,r=t.data,a=e.size.x,o=e.size.y,i=ma.create(e,t);return{rasterize:function(e){var t,s,l,c,u,d,f,h,p,m,g,x,v=[],y=0;for(x=0;x<400;x++)v[x]=0;for(v[0]=n[0],p=null,d=1;d<o-1;d++)for(c=0,s=v[0],u=1;u<a-1;u++)if(0===r[g=d*a+u])if((t=n[g])!==s){if(0===c)v[l=y+1]=t,s=t,null!==(f=i.contourTracing(d,u,l,t,ga.DIR.OUTSIDE_EDGE))&&(y++,c=l,(h=ga.createContour2D()).dir=ga.CONTOUR_DIR.CW_DIR,h.index=c,h.firstVertex=f,h.nextpeer=p,h.insideContours=null,null!==p&&(p.prevpeer=h),p=h);else if(null!==(f=i.contourTracing(d,u,ga.DIR.INSIDE_EDGE,t,c))){for((h=ga.createContour2D()).firstVertex=f,h.insideContours=null,h.dir=0===e?ga.CONTOUR_DIR.CCW_DIR:ga.CONTOUR_DIR.CW_DIR,h.index=e,m=p;null!==m&&m.index!==c;)m=m.nextpeer;null!==m&&(h.nextpeer=m.insideContours,null!==m.insideContours&&(m.insideContours.prevpeer=h),m.insideContours=h)}}else r[g]=c;else r[g]===ga.DIR.OUTSIDE_EDGE||r[g]===ga.DIR.INSIDE_EDGE?(c=0,s=r[g]===ga.DIR.INSIDE_EDGE?n[g]:v[0]):s=v[c=r[g]];for(m=p;null!==m;)m.index=e,m=m.nextpeer;return{cc:p,count:y}},debug:{drawContour:function(e,t){var n,r,a,o=e.getContext("2d"),i=t;for(o.strokeStyle="red",o.fillStyle="red",o.lineWidth=1,n=null!==i?i.insideContours:null;null!==i;){switch(null!==n?(r=n,n=n.nextpeer):(r=i,n=null!==(i=i.nextpeer)?i.insideContours:null),r.dir){case ga.CONTOUR_DIR.CW_DIR:o.strokeStyle="red";break;case ga.CONTOUR_DIR.CCW_DIR:o.strokeStyle="blue";break;case ga.CONTOUR_DIR.UNKNOWN_DIR:o.strokeStyle="green"}a=r.firstVertex,o.beginPath(),o.moveTo(a.x,a.y);do{a=a.next,o.lineTo(a.x,a.y)}while(a!==r.firstVertex);o.stroke()}}}}}},xa=ga,va=function(e,t,n){"use asm";var r=new e.Uint8Array(n),a=t.size|0,o=e.Math.imul;function i(e,t){e=e|0;t=t|0;var n=0;var o=0;var i=0;var s=0;var l=0;var c=0;var u=0;var d=0;for(n=1;(n|0)<(a-1|0);n=n+1|0){d=d+a|0;for(o=1;(o|0)<(a-1|0);o=o+1|0){s=d-a|0;l=d+a|0;c=o-1|0;u=o+1|0;i=(r[e+s+c|0]|0)+(r[e+s+u|0]|0)+(r[e+d+o|0]|0)+(r[e+l+c|0]|0)+(r[e+l+u|0]|0)|0;if((i|0)==(5|0)){r[t+d+o|0]=1}else{r[t+d+o|0]=0}}}}function s(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=o(a,a)|0;while((i|0)>0){i=i-1|0;r[n+i|0]=(r[e+i|0]|0)-(r[t+i|0]|0)|0}}function l(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=o(a,a)|0;while((i|0)>0){i=i-1|0;r[n+i|0]=r[e+i|0]|0|(r[t+i|0]|0)|0}}function c(e){e=e|0;var t=0;var n=0;n=o(a,a)|0;while((n|0)>0){n=n-1|0;t=(t|0)+(r[e+n|0]|0)|0}return t|0}function u(e,t){e=e|0;t=t|0;var n=0;n=o(a,a)|0;while((n|0)>0){n=n-1|0;r[e+n|0]=t}}function d(e,t){e=e|0;t=t|0;var n=0;var o=0;var i=0;var s=0;var l=0;var c=0;var u=0;var d=0;for(n=1;(n|0)<(a-1|0);n=n+1|0){d=d+a|0;for(o=1;(o|0)<(a-1|0);o=o+1|0){s=d-a|0;l=d+a|0;c=o-1|0;u=o+1|0;i=(r[e+s+c|0]|0)+(r[e+s+u|0]|0)+(r[e+d+o|0]|0)+(r[e+l+c|0]|0)+(r[e+l+u|0]|0)|0;if((i|0)>(0|0)){r[t+d+o|0]=1}else{r[t+d+o|0]=0}}}}function f(e,t){e=e|0;t=t|0;var n=0;n=o(a,a)|0;while((n|0)>0){n=n-1|0;r[t+n|0]=r[e+n|0]|0}}function h(e){e=e|0;var t=0;var n=0;for(t=0;(t|0)<(a-1|0);t=t+1|0){r[e+t|0]=0;r[e+n|0]=0;n=n+a-1|0;r[e+n|0]=0;n=n+1|0}for(t=0;(t|0)<(a|0);t=t+1|0){r[e+n|0]=0;n=n+1|0}}function p(){var e=0;var t=0;var n=0;var r=0;var p=0;var m=0;t=o(a,a)|0;n=t+t|0;r=n+t|0;u(r,0);h(e);do{i(e,t);d(t,n);s(e,n,n);l(r,n,r);f(t,e);p=c(e)|0;m=(p|0)==0|0}while(!m)}return{skeletonize:p}},ya={ctx:{binary:null},dom:{binary:null}},ba={x:0,y:0};function wa(e){var t,n,o,i,s,l,c,u=la.size.x,d=la.size.y,f=-la.size.x,h=-la.size.y;for(t=0,n=0;n<e.length;n++)t+=(i=e[n]).rad;for((t=(180*(t/=e.length)/Math.PI+90)%180-90)<0&&(t+=180),t=(180-t)*Math.PI/180,s=r.copy(r.create(),[Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t)]),n=0;n<e.length;n++)for(i=e[n],o=0;o<4;o++)a.transformMat2(i.box[o],i.box[o],s);for(n=0;n<e.length;n++)for(i=e[n],o=0;o<4;o++)i.box[o][0]<u&&(u=i.box[o][0]),i.box[o][0]>f&&(f=i.box[o][0]),i.box[o][1]<d&&(d=i.box[o][1]),i.box[o][1]>h&&(h=i.box[o][1]);for(l=[[u,d],[f,d],[f,h],[u,h]],c=ea.halfSample?2:1,s=r.invert(s,s),o=0;o<4;o++)a.transformMat2(l[o],l[o],s);for(o=0;o<4;o++)a.scale(l[o],l[o],c);return l}function ka(e){var t=function(e,t,n){var r,a,o,i,s=0,l=0,c=[];for(r=0;r<t;r++)c[r]={score:0,item:null};for(r=0;r<e.length;r++)if((a=n.apply(this,[e[r]]))>l)for((o=c[s]).score=a,o.item=e[r],l=Number.MAX_VALUE,i=0;i<t;i++)c[i].score<l&&(l=c[i].score,s=i);return c}(function(e,t,n){var r,a,o,i,s=[];function l(e){var t=!1;for(a=0;a<s.length;a++)(o=s[a]).fits(e)&&(o.add(e),t=!0);return t}for(n||(n="rad"),r=0;r<e.length;r++)l(i=Ft(e[r],r,n))||s.push(Bt(i,t));return s}(e,.9),1,function(e){return e.getPoints().length}),n=[],r=[];if(1===t.length){n=t[0].item.getPoints();for(var a=0;a<n.length;a++)r.push(n[a].point)}return r}function ja(e,t){la.subImageAsCopy(ra,Ut(e,t)),da.skeletonize()}function Na(e,t,n,r){var o,i,s,l,c=[],u=[],d=Math.ceil(ca.x/3);if(e.length>=2){for(o=0;o<e.length;o++)e[o].m00>d&&c.push(e[o]);if(c.length>=2){for(s=ka(c),i=0,o=0;o<s.length;o++){var f,h;i+=null!==(f=null===(h=s[o])||void 0===h?void 0:h.rad)&&void 0!==f?f:0}s.length>1&&s.length>=c.length/4*3&&s.length>e.length/4&&(i/=s.length,l={index:t[1]*ba.x+t[0],pos:{x:n,y:r},box:[a.clone([n,r]),a.clone([n+ra.size.x,r]),a.clone([n+ra.size.x,r+ra.size.y]),a.clone([n,r+ra.size.y])],moments:s,rad:i,vec:a.clone([Math.cos(i),Math.sin(i)])},u.push(l))}}return u}var _a=function(e,t){ea=t,ua=e,function(){ta=ea.halfSample?new Jt({x:ua.size.x/2|0,y:ua.size.y/2|0}):ua,ca=Qt(ea.patchSize,ta.size),ba.x=ta.size.x/ca.x|0,ba.y=ta.size.y/ca.y|0,la=new Jt(ta.size,void 0,Uint8Array,!1),aa=new Jt(ca,void 0,Array,!0);var e=new ArrayBuffer(65536);ra=new Jt(ca,new Uint8Array(e,0,ca.x*ca.y)),na=new Jt(ca,new Uint8Array(e,ca.x*ca.y*3,ca.x*ca.y),void 0,!0),da=va({Math:Math,Uint8Array:Uint8Array},{size:ca.x},e),sa=new Jt({x:ta.size.x/ra.size.x|0,y:ta.size.y/ra.size.y|0},void 0,Array,!0),oa=new Jt(sa.size,void 0,void 0,!0),ia=new Jt(sa.size,void 0,Int32Array,!0)}(),function(){if(!ea.useWorker&&"undefined"!=typeof document){ya.dom.binary=document.createElement("canvas"),ya.dom.binary.className="binaryBuffer";var e=!!ea.willReadFrequently;ya.ctx.binary=ya.dom.binary.getContext("2d",{willReadFrequently:e}),ya.dom.binary.width=la.size.x,ya.dom.binary.height=la.size.y}}()},Sa=function(){ea.halfSample&&function(e,t){for(var n=e.data,r=e.size.x,a=t.data,o=0,i=r,s=n.length,l=r/2,c=0;i<s;){for(var u=0;u<l;u++)a[c]=Math.floor((n[o]+n[o+1]+n[i]+n[i+1])/4),c++,o+=2,i+=2;o+=r,i+=r}}(ua,ta),Ht(ta,la),la.zeroBorder();var e=function(){var e,t,n,r,a,o,i=[];for(e=0;e<ba.x;e++)for(t=0;t<ba.y;t++)ja(n=ra.size.x*e,r=ra.size.y*t),na.zeroBorder(),Lt(aa.data,0),o=xa.create(na,aa).rasterize(0),a=aa.moments(o.count),i=i.concat(Na(a,[e,t],n,r));return i}();if(e.length<ba.x*ba.y*.05)return null;var t=function(e){var t,n,r=0,o=0;function i(){var e;for(e=0;e<ia.data.length;e++)if(0===ia.data[e]&&1===oa.data[e])return e;return ia.data.length}function s(e){var t,n,o,i,l,c=e%ia.size.x,u=e/ia.size.x|0;if(e<ia.data.length)for(o=sa.data[e],ia.data[e]=r,l=0;l<ma.searchDirections.length;l++)n=u+ma.searchDirections[l][0],t=c+ma.searchDirections[l][1],i=n*ia.size.x+t,0!==oa.data[i]?0===ia.data[i]&&Math.abs(a.dot(sa.data[i].vec,o.vec))>.95&&s(i):ia.data[i]=Number.MAX_VALUE}for(Lt(oa.data,0),Lt(ia.data,0),Lt(sa.data,null),t=0;t<e.length;t++)n=e[t],sa.data[n.index]=n,oa.data[n.index]=1;for(oa.zeroBorder();(o=i())<ia.data.length;)r++,s(o);return r}(e);if(t<1)return null;var n=function(e){var t,n,r=[];for(t=0;t<e;t++)r.push(0);for(n=ia.data.length;n--;)ia.data[n]>0&&r[ia.data[n]-1]++;return(r=r.map(function(e,t){return{val:e,label:t+1}})).sort(function(e,t){return t.val-e.val}),r.filter(function(e){return e.val>=5})}(t);return 0===n.length?null:function(e){var t,n,r,a,o=[],i=[];for(t=0;t<e.length;t++){for(n=ia.data.length,o.length=0;n--;)ia.data[n]===e[t].label&&(r=sa.data[n],o.push(r));(a=wa(o))&&i.push(a)}return i}(n)},Ca=function(e,t){var n,r,a=e.getWidth(),o=e.getHeight(),i=t.halfSample?.5:1;e.getConfig().area&&(r=Gt(a,o,e.getConfig().area),e.setTopRight({x:r.sx,y:r.sy}),e.setCanvasSize({x:a,y:o}),a=r.sw,o=r.sh);var s={x:Math.floor(a*i),y:Math.floor(o*i)};if(n=Qt(t.patchSize,s),e.setWidth(Math.max(Math.floor(Math.floor(s.x/n.x)*(1/i)*n.x),n.x)),e.setHeight(Math.max(Math.floor(Math.floor(s.y/n.y)*(1/i)*n.y),n.y)),e.getWidth()%n.x==0&&e.getHeight()%n.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(a," )and height (").concat(o,") must a multiple of ").concat(n.x))},Ma=g()(function e(){p()(this,e),v()(this,"config",void 0),v()(this,"inputStream",void 0),v()(this,"framegrabber",void 0),v()(this,"inputImageWrapper",void 0),v()(this,"stopped",!1),v()(this,"boxSize",void 0),v()(this,"resultCollector",void 0),v()(this,"decoder",void 0),v()(this,"workerPool",[]),v()(this,"onUIThread",!0),v()(this,"canvasContainer",new Pa)}),Ea=g()(function e(){p()(this,e),v()(this,"image",void 0),v()(this,"overlay",void 0)}),Pa=g()(function e(){p()(this,e),v()(this,"ctx",void 0),v()(this,"dom",void 0),this.ctx=new Ea,this.dom=new Ea});function Ra(e){if("undefined"==typeof document)return null;if(e instanceof HTMLElement&&e.nodeName&&1===e.nodeType)return e;var t="string"==typeof e?e:"#interactive.viewport";return document.querySelector(t)}function Oa(e,t,n){var r=function(e,t){var n=document.querySelector(e);return n||((n=document.createElement("canvas")).className=t),n}(e,t),a=r.getContext("2d",{willReadFrequently:n.willReadFrequently});return{canvas:r,context:a}}function Aa(e){var t,n,r,a,o,i,s,l,c=Ra(null==e||null===(t=e.config)||void 0===t||null===(n=t.inputStream)||void 0===n?void 0:n.target),u=null==e||null===(r=e.config)||void 0===r||null===(a=r.inputStream)||void 0===a?void 0:a.type;if(!u)return null;var d=function(e,t){var n=t.willReadFrequently,r=t.debug;if("undefined"!=typeof document){var a=Oa("canvas.imgBuffer","imgBuffer",{willReadFrequently:n,debug:r}),o=Oa("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:n,debug:r});return a.canvas.width=o.canvas.width=e.x,a.canvas.height=o.canvas.height=e.y,{dom:{image:a.canvas,overlay:o.canvas},ctx:{image:a.context,overlay:o.context}}}return null}(e.inputStream.getCanvasSize(),{willReadFrequently:!(null==e||null===(o=e.config)||void 0===o||null===(i=o.inputStream)||void 0===i||!i.willReadFrequently),debug:null==e||null===(s=e.config)||void 0===s||null===(l=s.locator)||void 0===l?void 0:l.debug});if(!d)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var f=d.dom;return"undefined"!=typeof document&&c&&("ImageStream"!==u||c.contains(f.image)||c.appendChild(f.image),c.contains(f.overlay)||c.appendChild(f.overlay)),d}function Da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(n),!0).forEach(function(t){v()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Da(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var La=[];function za(e){return Ta(Ta({},e),{},{inputStream:Ta(Ta({},e.inputStream),{},{target:null})})}function Ia(e){if(e){var t=e().default;if(!t)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var n;function r(e){self.postMessage({event:"processed",imageData:n.data,result:e},[n.data.buffer])}function a(){self.postMessage({event:"initialized",imageData:n.data},[n.data.buffer])}self.onmessage=function(e){if("init"===e.data.cmd){var o=e.data.config;o.numOfWorkers=0,n=new t.ImageWrapper({x:e.data.size.x,y:e.data.size.y},new Uint8Array(e.data.imageData)),t.init(o,a,n),t.onProcessed(r)}else"process"===e.data.cmd?(n.data=new Uint8Array(e.data.imageData),t.start()):"setReaders"===e.data.cmd?t.setReaders(e.data.readers):"registerReader"===e.data.cmd&&t.registerReader(e.data.name,e.data.reader)}}function Ba(e,t,n){var r,a,o=("undefined"!=typeof __factorySource__&&(a=__factorySource__),r=new Blob(["("+Ia.toString()+")("+a+");"],{type:"text/javascript"}),window.URL.createObjectURL(r)),i={worker:new Worker(o),imageData:new Uint8Array(t.getWidth()*t.getHeight()),busy:!0};i.worker.onmessage=function(e){"initialized"===e.data.event?(URL.revokeObjectURL(o),i.busy=!1,i.imageData=new Uint8Array(e.data.imageData),n(i)):"processed"===e.data.event?(i.imageData=new Uint8Array(e.data.imageData),i.busy=!1,"undefined"!=typeof publishResult&&publishResult(e.data.result,i.imageData)):e.data.event},i.worker.postMessage({cmd:"init",size:{x:t.getWidth(),y:t.getHeight()},imageData:i.imageData,config:za(e)},[i.imageData.buffer])}function Fa(e,t,n,r){var a=e-La.length;if(0===a&&r)r();else if(a<0)La.slice(a).forEach(function(e){e.worker.terminate()}),La=La.slice(0,a),r&&r();else{var o=function(t){La.push(t),La.length>=e&&r&&r()};if(t)for(var i=0;i<a;i++)Ba(t,n,o)}}function Ua(e,t,n){for(var r=e.length;r--;)e[r][0]+=t,e[r][1]+=n}var Wa=function(){return g()(function e(){var t=this;p()(this,e),v()(this,"context",new Ma),v()(this,"canRecord",function(e){var n;t.context.config&&(Ca(t.context.inputStream,null===(n=t.context.config)||void 0===n?void 0:n.locator),t.initCanvas(),t.context.framegrabber=Vr.create(t.context.inputStream,t.context.canvasContainer.dom.image),void 0===t.context.config.numOfWorkers&&(t.context.config.numOfWorkers=0),Fa(t.context.config.numOfWorkers,t.context.config,t.context.inputStream,function(){var n;0===(null===(n=t.context.config)||void 0===n?void 0:n.numOfWorkers)&&t.initializeData(),t.ready(e)}))}),v()(this,"update",function(){if(t.context.onUIThread){var e,n=(a=t.context.framegrabber,La.length?!!(o=La.filter(function(e){return!e.busy})[0])&&(a.attachData(o.imageData),a.grab()&&(o.busy=!0,o.worker.postMessage({cmd:"process",imageData:o.imageData},[o.imageData.buffer])),!0):null);n||(t.context.framegrabber.attachData(null===(e=t.context.inputImageWrapper)||void 0===e?void 0:e.data),t.context.framegrabber.grab()&&(n||t.locateAndDecode()))}else{var r;t.context.framegrabber.attachData(null===(r=t.context.inputImageWrapper)||void 0===r?void 0:r.data),t.context.framegrabber.grab(),t.locateAndDecode()}var a,o})},[{key:"initBuffers",value:function(e){if(this.context.config){var t=function(e,t,n){var r=t||new Jt({x:e.getWidth(),y:e.getHeight(),type:"XYSize"}),o=[a.clone([0,0]),a.clone([0,r.size.y]),a.clone([r.size.x,r.size.y]),a.clone([r.size.x,0])];return _a(r,n),{inputImageWrapper:r,boxSize:o}}(this.context.inputStream,e,this.context.config.locator),n=t.inputImageWrapper,r=t.boxSize;this.context.inputImageWrapper=n,this.context.boxSize=r}}},{key:"initializeData",value:function(e){this.context.config&&(this.initBuffers(e),this.context.decoder=br.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?Ra(this.context.config.inputStream.target):null}},{key:"ready",value:function(e){this.context.inputStream.play(),e()}},{key:"initCanvas",value:function(){var e=Aa(this.context);if(e){var t=e.ctx,n=e.dom;this.context.canvasContainer.dom.image=n.image,this.context.canvasContainer.dom.overlay=n.overlay,this.context.canvasContainer.ctx.image=t.image,this.context.canvasContainer.ctx.overlay=t.overlay}}},{key:"initInputStream",value:function(e){if(this.context.config&&this.context.config.inputStream){var t=this.context.config.inputStream,n=t.type,r=t.constraints,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LiveStream",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;switch(e){case"VideoStream":var r=document.createElement("video");return{video:r,inputStream:n.createVideoStream(r)};case"ImageStream":return{inputStream:n.createImageStream()};case"LiveStream":var a=null;return t&&((a=t.querySelector("video"))||(a=document.createElement("video"),t.appendChild(a))),{video:a,inputStream:n.createLiveStream(a)};default:return console.error("* setupInputStream invalid type ".concat(e)),{video:null,inputStream:null}}}(n,this.getViewPort(),pa),o=a.video,i=a.inputStream;"LiveStream"===n&&o&&Br.request(o,r).then(function(){return i.trigger("canrecord")}).catch(function(t){return e(t)}),i&&(i.setAttribute("preload","auto"),i.setInputStream(this.context.config.inputStream),i.addEventListener("canrecord",this.canRecord.bind(void 0,e))),this.context.inputStream=i}}},{key:"getBoundingBoxes",value:function(){var e;return null!==(e=this.context.config)&&void 0!==e&&e.locate?Sa():[[a.clone(this.context.boxSize[0]),a.clone(this.context.boxSize[1]),a.clone(this.context.boxSize[2]),a.clone(this.context.boxSize[3])]]}},{key:"transformResult",value:function(e){var t=this,n=this.context.inputStream.getTopRight(),r=n.x,a=n.y;if((0!==r||0!==a)&&(e.barcodes&&e.barcodes.forEach(function(e){return t.transformResult(e)}),e.line&&2===e.line.length&&function(e,t,n){e[0].x+=t,e[0].y+=n,e[1].x+=t,e[1].y+=n}(e.line,r,a),e.box&&Ua(e.box,r,a),e.boxes&&e.boxes.length>0))for(var o=0;o<e.boxes.length;o++)Ua(e.boxes[o],r,a)}},{key:"addResult",value:function(e,t){var n=this;t&&this.context.resultCollector&&(e.barcodes?e.barcodes.filter(function(e){return e.codeResult}).forEach(function(e){return n.addResult(e,t)}):e.codeResult&&this.context.resultCollector.addResult(t,this.context.inputStream.getCanvasSize(),e.codeResult))}},{key:"hasCodeResult",value:function(e){return!(!e||!(e.barcodes?e.barcodes.some(function(e){return e.codeResult}):e.codeResult))}},{key:"publishResult",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=t;t&&this.context.onUIThread&&(this.transformResult(t),this.addResult(t,n),r=(null==t||null===(e=t.barcodes)||void 0===e?void 0:e.length)>0?t.barcodes:t),wr.publish("processed",r),this.hasCodeResult(t)&&wr.publish("detected",r)}},{key:"locateAndDecode",value:(t=Zt()(tn.a.mark(function e(){var t,n,r,a,o,i;return tn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getBoundingBoxes())){e.next=3;break}return e.next=1,this.context.decoder.decodeFromBoundingBoxes(t);case 1:if(i=e.sent){e.next=2;break}i={};case 2:(r=i).boxes=t,this.publishResult(r,null===(n=this.context.inputImageWrapper)||void 0===n?void 0:n.data),e.next=5;break;case 3:return e.next=4,this.context.decoder.decodeFromImage(this.context.inputImageWrapper);case 4:(a=e.sent)?this.publishResult(a,null===(o=this.context.inputImageWrapper)||void 0===o?void 0:o.data):this.publishResult();case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"startContinuousUpdate",value:function(){var e,t=this,n=null,r=1e3/((null===(e=this.context.config)||void 0===e?void 0:e.frequency)||60);this.context.stopped=!1;var a=this.context,o=function(e){n=n||e,a.stopped||(e>=n&&(n+=r,t.update()),window.requestAnimationFrame(o))};o(performance.now())}},{key:"start",value:function(){var e,t;this.context.onUIThread&&"LiveStream"===(null===(e=this.context.config)||void 0===e||null===(t=e.inputStream)||void 0===t?void 0:t.type)?this.startContinuousUpdate():this.update()}},{key:"stop",value:(e=Zt()(tn.a.mark(function e(){var t;return tn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.context.stopped=!0,Fa(0),null===(t=this.context.config)||void 0===t||!t.inputStream||"LiveStream"!==this.context.config.inputStream.type){e.next=2;break}return e.next=1,Br.release();case 1:this.context.inputStream.clearEventHandlers();case 2:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"setReaders",value:function(e){this.context.decoder&&this.context.decoder.setReaders(e),function(e){La.forEach(function(t){return t.worker.postMessage({cmd:"setReaders",readers:e})})}(e)}},{key:"registerReader",value:function(e,t){br.registerReader(e,t),this.context.decoder&&this.context.decoder.registerReader(e,t),function(e,t){La.forEach(function(n){return n.worker.postMessage({cmd:"registerReader",name:e,reader:t})})}(e,t)}}]);var e,t}(),Ha=new Wa,Va=Ha.context,$a={init:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ha;return t||(r=new Promise(function(e,n){t=function(t){t?n(t):e()}})),a.context.config=u()({},Ur,e),a.context.config.numOfWorkers>0&&(a.context.config.numOfWorkers=0),n?(a.context.onUIThread=!1,a.initializeData(n),t&&t()):a.initInputStream(t),r},start:function(){return Ha.start()},stop:function(){return Ha.stop()},pause:function(){Va.stopped=!0},onDetected:function(e){e&&("function"==typeof e||"object"===l()(e)&&e.callback)?wr.subscribe("detected",e):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(e){wr.unsubscribe("detected",e)},onProcessed:function(e){e&&("function"==typeof e||"object"===l()(e)&&e.callback)?wr.subscribe("processed",e):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(e){wr.unsubscribe("processed",e)},setReaders:function(e){e?Ha.setReaders(e):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(e,t){e?t?Ha.registerReader(e,t):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(e){e&&"function"==typeof e.addResult&&(Va.resultCollector=e)},get canvas(){return Va.canvasContainer},decodeSingle:function(e,t){var n=this,r=new Wa;return(e=u()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:e.src},numOfWorkers:1,locator:{halfSample:!1}},e)).numOfWorkers>0&&(e.numOfWorkers=0),e.numOfWorkers>0&&("undefined"==typeof Blob||"undefined"==typeof Worker)&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),e.numOfWorkers=0),new Promise(function(a,o){try{n.init(e,function(){wr.once("processed",function(e){r.stop(),t&&t.call(null,e),a(e)},!0),r.start()},null,r)}catch(e){o(e)}})},get default(){return $a},Readers:i,CameraAccess:Br,ImageDebug:nn,ImageWrapper:Jt,ResultCollector:Fr};t.default=$a}]).default},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(o,i),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t=n(43),r=n.t(t,2),a=n(391),o=n(950),i=n.t(o,2);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),s({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(t,n,r,a){void 0===a&&(a={});let{window:o=document.defaultView,v5Compat:i=!1}=a,u=o.history,p=e.Pop,m=null,g=x();function x(){return(u.state||{idx:null}).idx}function v(){p=e.Pop;let t=x(),n=null==t?null:t-g;g=t,m&&m({action:p,location:b.location,delta:n})}function y(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(s({},u.state,{idx:g}),""));let b={get action(){return p},get location(){return t(o,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(l,v),m=e,()=>{o.removeEventListener(l,v),m=null}},createHref:e=>n(o,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let a=f(b.location,t,n);r&&r(a,t),g=x()+1;let s=d(a,g),l=b.createHref(a);try{u.pushState(s,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;o.location.assign(l)}i&&m&&m({action:p,location:b.location,delta:1})},replace:function(t,n){p=e.Replace;let a=f(b.location,t,n);r&&r(a,t),g=x();let o=d(a,g),s=b.createHref(a);u.replaceState(o,"",s),i&&m&&m({action:p,location:b.location,delta:0})},go:e=>u.go(e)};return b}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let a=O(("string"===typeof t?p(t):t).pathname||"/",n);if(null==a)return null;let o=y(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let i=null;for(let s=0;null==i&&s<o.length;++s){let e=R(a);i=E(o[s],e,r)}return i}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,o)=>{let i={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(c(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let s=z([r,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),y(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:M(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))a(e,t,r);else a(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return a?[o,""]:[o];let i=b(r.join("/")),s=[];return s.push(...i.map(e=>""===e?o:[o,e].join("/"))),a&&s.push(...i),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,k=3,j=2,N=1,_=10,S=-2,C=e=>"*"===e;function M(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=S),t&&(r+=j),n.filter(e=>!C(e)).reduce((e,t)=>e+(w.test(t)?k:""===t?N:_),r)}function E(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,a={},o="/",i=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:z([o,u.pathname]),pathnameBase:I(z([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=z([o,u.pathnameBase]))}return i}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let o=new RegExp(a,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=s[n]||"";i=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:i,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function A(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function T(e,t){let n=D(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=p(e):(a=s({},e),c(!a.pathname||!a.pathname.includes("?"),A("?","pathname","search",a)),c(!a.pathname||!a.pathname.includes("#"),A("#","pathname","hash",a)),c(!a.search||!a.search.includes("#"),A("#","search","hash",a)));let o,i=""===e||""===a.pathname,l=i?"/":a.pathname;if(null==l)o=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"===typeof e?p(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:B(r),hash:F(a)}}(a,o),d=l&&"/"!==l&&l.endsWith("/"),f=(i||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!f||(u.pathname+="/"),u}const z=e=>e.join("/").replace(/\/\/+/g,"/"),I=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],H=(new Set(W),["get",...W]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const $=t.createContext(null);const q=t.createContext(null);const Q=t.createContext(null);const K=t.createContext(null);const G=t.createContext({outlet:null,matches:[],isDataRoute:!1});const X=t.createContext(null);function J(){return null!=t.useContext(K)}function Y(){return J()||c(!1),t.useContext(K).location}function Z(e){t.useContext(Q).static||t.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=t.useContext(G);return e?function(){let{router:e}=ue(le.UseNavigateStable),n=fe(ce.UseNavigateStable),r=t.useRef(!1);return Z(()=>{r.current=!0}),t.useCallback(function(t,a){void 0===a&&(a={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,V({fromRouteId:n},a)))},[e,n])}():function(){J()||c(!1);let e=t.useContext($),{basename:n,future:r,navigator:a}=t.useContext(Q),{matches:o}=t.useContext(G),{pathname:i}=Y(),s=JSON.stringify(T(o,r.v7_relativeSplatPath)),l=t.useRef(!1);return Z(()=>{l.current=!0}),t.useCallback(function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void a.go(t);let o=L(t,JSON.parse(s),i,"path"===r.relative);null==e&&"/"!==n&&(o.pathname="/"===o.pathname?n:z([n,o.pathname])),(r.replace?a.replace:a.push)(o,r.state,r)},[n,a,s,i,e])}()}function te(){let{matches:e}=t.useContext(G),n=e[e.length-1];return n?n.params:{}}function ne(n,r,a,o){J()||c(!1);let{navigator:i}=t.useContext(Q),{matches:s}=t.useContext(G),l=s[s.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let f,h=Y();if(r){var m;let e="string"===typeof r?p(r):r;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),f=e}else f=h;let g=f.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=x(n,{pathname:v});let b=se(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:z([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:z([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,a,o);return r&&b?t.createElement(K.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:e.Pop}},b):b}function re(){let e=function(){var e;let n=t.useContext(X),r=de(ce.UseRouteError),a=fe(ce.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[a]}(),n=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}const ae=t.createElement(re,null);class oe extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(G.Provider,{value:this.props.routeContext},t.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:n,match:r,children:a}=e,o=t.useContext($);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(G.Provider,{value:n},a)}function se(e,n,r,a){var o;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===a&&(a=null),null==e){var i;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(i=a)&&i.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let s=e,l=null==(o=r)?void 0:o.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),s=s.slice(0,Math.min(s.length,e+1))}let u=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let t=0;t<s.length;t++){let e=s[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){u=!0,s=d>=0?s.slice(0,d+1):[s[0]];break}}}return s.reduceRight((e,a,o)=>{let i,c=!1,f=null,h=null;var p;r&&(i=l&&a.route.id?l[a.route.id]:void 0,f=a.route.errorElement||ae,u&&(d<0&&0===o?(p="route-fallback",!1||he[p]||(he[p]=!0),c=!0,h=null):d===o&&(c=!0,h=a.route.hydrateFallbackElement||null)));let m=n.concat(s.slice(0,o+1)),g=()=>{let n;return n=i?f:c?h:a.route.Component?t.createElement(a.route.Component,null):a.route.element?a.route.element:e,t.createElement(ie,{match:a,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===o)?t.createElement(oe,{location:r.location,revalidation:r.revalidation,component:f,error:i,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let n=t.useContext($);return n||c(!1),n}function de(e){let n=t.useContext(q);return n||c(!1),n}function fe(e){let n=function(){let e=t.useContext(G);return e||c(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||c(!1),r.route.id}const he={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function me(e){c(!1)}function ge(n){let{basename:r="/",children:a=null,location:o,navigationType:i=e.Pop,navigator:s,static:l=!1,future:u}=n;J()&&c(!1);let d=r.replace(/^\/*/,"/"),f=t.useMemo(()=>({basename:d,navigator:s,static:l,future:V({v7_relativeSplatPath:!1},u)}),[d,u,s,l]);"string"===typeof o&&(o=p(o));let{pathname:h="/",search:m="",hash:g="",state:x=null,key:v="default"}=o,y=t.useMemo(()=>{let e=O(h,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:x,key:v},navigationType:i}},[d,h,m,g,x,v,i]);return null==y?null:t.createElement(Q.Provider,{value:f},t.createElement(K.Provider,{children:a,value:y}))}function xe(e){let{children:t,location:n}=e;return ne(ve(t),n)}new Promise(()=>{});t.Component;function ve(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,a)=>{if(!t.isValidElement(e))return;let o=[...n,a];if(e.type===t.Fragment)return void r.push.apply(r,ve(e.props.children,o));e.type!==me&&c(!1),e.props.index&&e.props.children&&c(!1);let i={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ve(e.props.children,o)),r.push(i)}),r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(mn){}new Map;const ye=r.startTransition;i.flushSync,r.useId;function be(e){let{basename:n,children:r,future:a,window:o}=e,i=t.useRef();var s;null==i.current&&(i.current=(void 0===(s={window:o,v5Compat:!0})&&(s={}),m(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return f("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,s)));let l=i.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:d}=a||{},p=t.useCallback(e=>{d&&ye?ye(()=>u(e)):u(e)},[u,d]);return t.useLayoutEffect(()=>l.listen(p),[l,p]),t.useEffect(()=>pe(a),[a]),t.createElement(ge,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:a})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var we,ke;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(we||(we={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ke||(ke={}));const je=()=>localStorage.getItem("access_token"),Ne=()=>localStorage.getItem("refresh_token"),_e=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=[1e3,2e3,4e3],n=Ne();if(!n)return Me("no_refresh_token"),!1;try{const r=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:n})});if(401===r.status||403===r.status)return console.error("[refreshAccessToken] Token invalid/expired, logging out"),Me("token_expired"),!1;if(!r.ok){if(e<3){const n=t[e];return console.warn("[refreshAccessToken] Server error (".concat(r.status,"), retrying in ").concat(n,"ms... (").concat(e+1,"/").concat(3,")")),await new Promise(e=>setTimeout(e,n)),_e(e+1)}return console.error("[refreshAccessToken] Max retries reached, logging out"),Me("refresh_failed"),!1}const a=await r.json();return a.success&&a.data.access_token?(((e,t)=>{localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t),localStorage.setItem("token_timestamp",Date.now().toString())})(a.data.access_token,a.data.refresh_token),console.log("[refreshAccessToken] Token refreshed successfully"),!0):(console.error("[refreshAccessToken] Unexpected response format"),Me("refresh_failed"),!1)}catch(r){if(e<3){const n=t[e];return console.warn("[refreshAccessToken] Network error, retrying in ".concat(n,"ms... (").concat(e+1,"/").concat(3,")"),r),await new Promise(e=>setTimeout(e,n)),_e(e+1)}return console.error("[refreshAccessToken] Max retries reached after network errors, logging out"),Me("network_error"),!1}},Se=()=>{const e=je();if(!e)return null;try{return JSON.parse(atob(e.split(".")[1])).user_id||null}catch(t){return null}},Ce=()=>!!je(),Me=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"manual";const t=Ne(),n=je();if(t&&n&&"manual"===e)try{const e=JSON.parse(atob(n.split(".")[1])).user_id;await fetch("/api/auth/logout?user_id=".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:t,logout_all_devices:!1})})}catch(r){console.error("[logout] Backend logout API call failed:",r)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_timestamp"),window.dispatchEvent(new CustomEvent("logout",{detail:{reason:e}})),console.log("[logout] User logged out, reason: ".concat(e))};var Ee=n(579);const Pe=e=>{let{isOpen:n,onClose:r,onLoginSuccess:a}=e;const[o,i]=(0,t.useState)(""),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),[d,f]=(0,t.useState)("");if(!n)return null;return(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Ee.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Login"}),(0,Ee.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ee.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),f("");try{const e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:s})}),t=await e.json();t.success&&t.data.access_token?(localStorage.setItem("access_token",t.data.access_token),localStorage.setItem("refresh_token",t.data.refresh_token),a(t.data.access_token),r()):f(t.message||"Login gagal")}catch(t){f("Terjadi kesalahan. Silakan coba lagi.")}finally{u(!1)}},className:"space-y-4",children:[d&&(0,Ee.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:d}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,Ee.jsx)("input",{type:"email",value:o,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"nama@email.com",required:!0})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Ee.jsx)("input",{type:"password",value:s,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0})]}),(0,Ee.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400 transition-colors",children:c?"Loading...":"Login"})]}),(0,Ee.jsx)("p",{className:"mt-4 text-sm text-gray-500 text-center",children:"Login untuk mengakses dashboard dan kelola tenant Anda"})]})})},Re=()=>{const e=ee(),[n,r]=(0,t.useState)(""),[a,o]=(0,t.useState)(!1),i=()=>{n.trim()&&o(!0)};return(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("div",{className:"min-h-screen bg-white flex flex-col",children:[(0,Ee.jsxs)("header",{className:"w-full py-5 px-6 flex items-center justify-between",children:[(0,Ee.jsx)("h1",{className:"text-2xl font-medium text-gray-900",children:"milkyhoop"}),(0,Ee.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),(0,Ee.jsx)("main",{className:"flex-1 flex items-center justify-center px-4 py-8",children:(0,Ee.jsxs)("div",{className:"w-full max-w-sm",children:[(0,Ee.jsxs)("div",{className:"mb-10 text-center",children:[(0,Ee.jsxs)("h2",{className:"text-5xl sm:text-6xl font-semibold text-gray-900 mb-3 leading-tight",children:["Financial",(0,Ee.jsx)("br",{}),"Automation Tools"]}),(0,Ee.jsx)("p",{className:"text-lg text-gray-600 font-light",children:"No Pain Still Gain"})]}),(0,Ee.jsxs)("div",{className:"space-y-2.5 mx-auto",style:{maxWidth:"70%"},children:[(0,Ee.jsxs)("button",{onClick:()=>{console.log("Google login clicked")},className:"w-full flex items-center justify-center gap-2.5 px-4 py-2 bg-white border border-gray-300 rounded-lg text-[15px] text-gray-900 font-normal hover:bg-gray-50 transition-colors duration-200",children:[(0,Ee.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Ee.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Ee.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Ee.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,Ee.jsx)("span",{children:"Continue with Google"})]}),(0,Ee.jsxs)("div",{className:"flex items-center gap-3 my-3",children:[(0,Ee.jsx)("div",{className:"flex-1 h-px bg-gray-200"}),(0,Ee.jsx)("span",{className:"text-sm text-gray-500 font-normal",children:"OR"}),(0,Ee.jsx)("div",{className:"flex-1 h-px bg-gray-200"})]}),(0,Ee.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),i())},placeholder:"Enter your email",className:"w-full px-3.5 py-2 bg-white border border-gray-300 rounded-lg text-[15px] text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 focus:ring-1 focus:ring-gray-400 transition-all duration-200"}),(0,Ee.jsx)("button",{onClick:i,disabled:!n.trim(),className:"w-full px-4 py-2 bg-gray-900 hover:bg-black disabled:bg-gray-300 disabled:cursor-not-allowed text-white text-[15px] font-normal rounded-lg transition-all duration-200",children:"Continue with email"}),(0,Ee.jsxs)("p",{className:"text-xs text-gray-500 text-center mt-2.5 leading-relaxed",children:["By continuing, you acknowledge",(0,Ee.jsx)("br",{}),"MilkyHoop's Privacy Policy."]})]})]})}),(0,Ee.jsx)("footer",{className:"w-full py-4 text-center",children:(0,Ee.jsx)("p",{className:"text-xs text-gray-400",children:"\xa9 2025 MilkyHoop. Financial Automation Tools."})})]}),(0,Ee.jsx)(Pe,{isOpen:a,onClose:()=>o(!1),onLoginSuccess:t=>{console.log("Login successful, redirecting to dashboard..."),e("/"),window.location.reload()}})]})},Oe=()=>(0,Ee.jsxs)("div",{className:"flex flex-col items-center py-6 w-full h-full bg-gray-200 border-r border-gray-300",children:[(0,Ee.jsx)("button",{className:"p-3 mb-6 rounded-lg bg-gray-200 hover:bg-gray-400 transition-colors",children:(0,Ee.jsx)("svg",{className:"w-6 h-6 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,Ee.jsx)("div",{className:"flex-1"}),(0,Ee.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-medium hover:bg-gray-400 transition-colors",children:(0,Ee.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]}),Ae=e=>{let{activeTab:t,onTabChange:n}=e;const r=[{id:"chat",icon:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),label:"Chat"},{id:"report",icon:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),label:"Report"},{id:"feed",icon:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),label:"Feed"},{id:"alert",icon:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),label:"Alert"},{id:"profile",icon:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),label:"Profile"}];return(0,Ee.jsxs)("nav",{className:"md:hidden flex-shrink-0 bg-white border-t border-gray-200 safe-area-bottom",children:[(0,Ee.jsx)("div",{className:"flex items-center justify-around h-14",children:r.map(e=>(0,Ee.jsxs)("button",{onClick:()=>n(e.id),className:"flex flex-col items-center justify-center flex-1 h-full relative transition-colors ".concat(t===e.id?"text-emerald-600":"text-gray-500 hover:text-gray-700"),children:[e.icon,(0,Ee.jsx)("span",{className:"text-xs mt-0.5",children:e.label}),t===e.id&&(0,Ee.jsx)("div",{className:"absolute bottom-1 w-1 h-1 bg-emerald-600 rounded-full"})]},e.id))}),(0,Ee.jsx)("style",{children:"\n        .safe-area-bottom {\n          padding-bottom: env(safe-area-inset-bottom, 0);\n        }\n      "})]})},De=()=>{const[e,n]=(0,t.useState)(!1),[r,a]=(0,t.useState)(null),[o,i]=(0,t.useState)(!1),[s,l]=(0,t.useState)("true"===localStorage.getItem("pwa-installed"));(0,t.useEffect)(()=>{const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;n(e);const t=e=>{e.preventDefault(),a(e)};return window.addEventListener("beforeinstallprompt",t),()=>{window.removeEventListener("beforeinstallprompt",t)}},[]);return window.matchMedia("(display-mode: standalone)").matches?null:(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"md:hidden bg-gradient-to-r from-emerald-500 to-emerald-600 text-white",children:(0,Ee.jsxs)("button",{onClick:()=>{s?window.location.href="/":e?i(!0):r&&(r.prompt(),r.userChoice.then(e=>{let{outcome:t}=e;"accepted"===t&&(localStorage.setItem("pwa-installed","true"),l(!0))}))},className:"w-full px-4 py-3 text-left flex items-center justify-between hover:bg-black/5 transition-colors",children:[(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsx)("div",{className:"font-medium text-[15px]",children:s?"Pakai di aplikasi lebih cepat":e?"Share and Add to Home Screen":"Install MilkyHoop"}),(0,Ee.jsx)("div",{className:"text-xs opacity-90 mt-0.5",children:s?"Kamu sudah install":"Akses lebih cepat!"})]}),(0,Ee.jsx)("svg",{className:"w-5 h-5 flex-shrink-0 ml-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),o&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-end md:items-center justify-center p-4",onClick:()=>i(!1),children:(0,Ee.jsxs)("div",{className:"bg-white rounded-t-2xl md:rounded-2xl p-6 max-w-sm w-full animate-slide-up",onClick:e=>e.stopPropagation(),children:[(0,Ee.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Cara Install MilkyHoop"}),(0,Ee.jsxs)("ol",{className:"space-y-3 text-sm text-gray-700",children:[(0,Ee.jsxs)("li",{className:"flex gap-3",children:[(0,Ee.jsx)("span",{className:"font-semibold text-emerald-600",children:"1."}),(0,Ee.jsxs)("span",{children:["Tap tombol ",(0,Ee.jsx)("strong",{children:"Share"})," (ikon \u2b06\ufe0f) di bawah browser"]})]}),(0,Ee.jsxs)("li",{className:"flex gap-3",children:[(0,Ee.jsx)("span",{className:"font-semibold text-emerald-600",children:"2."}),(0,Ee.jsxs)("span",{children:["Scroll dan pilih ",(0,Ee.jsx)("strong",{children:'"Add to Home Screen"'})]})]}),(0,Ee.jsxs)("li",{className:"flex gap-3",children:[(0,Ee.jsx)("span",{className:"font-semibold text-emerald-600",children:"3."}),(0,Ee.jsxs)("span",{children:["Tap ",(0,Ee.jsx)("strong",{children:'"Add"'})," di pojok kanan atas"]})]})]}),(0,Ee.jsx)("button",{onClick:()=>{i(!1),localStorage.setItem("pwa-installed","true"),l(!0)},className:"w-full mt-6 bg-emerald-600 text-white py-3 rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:"Mengerti"})]})}),(0,Ee.jsx)("style",{children:"\n        @keyframes slide-up {\n          from {\n            transform: translateY(100%);\n          }\n          to {\n            transform: translateY(0);\n          }\n        }\n        .animate-slide-up {\n          animation: slide-up 0.3s ease-out;\n        }\n      "})]})},Te=e=>{let{tenants:n,activeTenant:r,onSelectTenant:a,isLoading:o=!1}=e;const[i,s]=(0,t.useState)(""),[l,c]=(0,t.useState)("chat"),u=(0,t.useMemo)(()=>n.filter(e=>"milky-assistant"!==e.id).filter(e=>e.name.toLowerCase().includes(i.toLowerCase())),[n,i]);return(0,Ee.jsxs)("div",{className:"w-full h-full bg-white border-r border-gray-200",children:[(0,Ee.jsxs)("div",{className:"md:hidden flex flex-col w-full bg-white",style:{position:"fixed",inset:0,height:"100dvh",maxHeight:"100dvh",overflow:"hidden",overscrollBehavior:"none",touchAction:"none",backgroundColor:"#ffffff"},children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between px-6 border-b border-gray-200 bg-white",style:{height:"calc(56px + env(safe-area-inset-top))",paddingTop:"env(safe-area-inset-top)",position:"fixed",top:0,left:0,right:0,zIndex:50,backgroundColor:"#ffffff"},children:[(0,Ee.jsx)("h1",{className:"text-xl font-medium text-gray-900",children:"milkyhoop"}),(0,Ee.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,Ee.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]}),(0,Ee.jsxs)("div",{className:"bg-white",style:{position:"absolute",top:"calc(56px + env(safe-area-inset-top))",bottom:"calc(56px + env(safe-area-inset-bottom))",left:0,right:0,overflowY:"scroll",overflowX:"hidden",overscrollBehavior:"contain",touchAction:"pan-y",WebkitOverflowScrolling:"touch",backgroundColor:"#ffffff"},children:[(0,Ee.jsx)(De,{}),(0,Ee.jsx)("div",{className:"px-6 py-3 bg-white",children:(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"Search tenants...",className:"w-full pl-9 pr-3 py-2 text-sm bg-gray-100 rounded-lg focus:outline-none focus:bg-gray-200 transition-colors"}),(0,Ee.jsx)("svg",{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,Ee.jsx)("div",{onClick:()=>a("milky-assistant"),className:"px-6 py-4 cursor-pointer transition-colors ".concat("milky-assistant"===(null===r||void 0===r?void 0:r.id)?"bg-gray-100":"hover:bg-gray-50"),children:(0,Ee.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:(0,Ee.jsx)("span",{className:"text-xl",children:"\ud83d\udca1"})}),(0,Ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Milky Assistant"}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:"Now"})]}),(0,Ee.jsx)("p",{className:"text-xs text-gray-600 truncate",children:"Selamat datang! Mau buat tenant?"})]})]})}),o&&(0,Ee.jsx)("div",{className:"px-6 py-4 text-center text-gray-500 text-sm",children:"Loading tenants..."}),u.map(e=>(0,Ee.jsx)("div",{onClick:()=>a(e.id),className:"px-6 py-4 cursor-pointer transition-colors ".concat((null===r||void 0===r?void 0:r.id)===e.id?"bg-gray-100":"hover:bg-gray-50"),children:(0,Ee.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-medium flex-shrink-0 text-base",children:e.avatar||e.name.charAt(0)}),(0,Ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Ee.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.isPrivate&&(0,Ee.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500 flex-shrink-0",children:e.lastMessageTime||"Now"})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Ee.jsx)("p",{className:"text-xs text-gray-500 truncate flex-1",children:e.lastMessage}),e.unreadCount&&(0,Ee.jsx)("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-gray-900 text-white rounded-full flex-shrink-0",children:e.unreadCount})]}),e.role&&(0,Ee.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:["(",e.role,")"]})]})]})},e.id)),0===u.length&&i&&(0,Ee.jsxs)("div",{className:"px-4 py-8 text-center text-gray-500 text-sm",children:['No tenants found for "',i,'"']})]}),(0,Ee.jsx)("div",{style:{position:"fixed",bottom:0,left:0,right:0,zIndex:50,backgroundColor:"#ffffff",paddingBottom:"env(safe-area-inset-bottom)"},children:(0,Ee.jsx)(Ae,{activeTab:l,onTabChange:e=>{c(e)}})})]}),(0,Ee.jsxs)("div",{className:"hidden md:flex md:flex-col md:h-full",children:[(0,Ee.jsxs)("div",{className:"px-4 py-4 border-b border-gray-200",children:[(0,Ee.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"MilkyHoop"}),(0,Ee.jsxs)("div",{className:"relative mb-3",children:[(0,Ee.jsx)("input",{type:"text",value:i,onChange:e=>s(e.target.value),placeholder:"Cari atau mulai chat baru",className:"w-full pl-10 pr-3 py-2.5 text-sm bg-gray-100 rounded-lg focus:outline-none focus:bg-gray-200 transition-colors"}),(0,Ee.jsx)("svg",{className:"absolute left-3 top-3 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,Ee.jsxs)("div",{className:"flex gap-2",children:[(0,Ee.jsx)("button",{className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white rounded-full",children:"Semua"}),(0,Ee.jsx)("button",{className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-full transition-colors",children:"Belum dibaca"})]})]}),(0,Ee.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,Ee.jsx)("div",{onClick:()=>a("milky-assistant"),className:"px-6 py-4 cursor-pointer transition-colors ".concat("milky-assistant"===(null===r||void 0===r?void 0:r.id)?"bg-gray-100":"hover:bg-gray-50"),children:(0,Ee.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:(0,Ee.jsx)("span",{className:"text-xl",children:"\ud83d\udca1"})}),(0,Ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Milky Assistant"}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:"Now"})]}),(0,Ee.jsx)("p",{className:"text-xs text-gray-600 truncate",children:"Selamat datang! Mau buat tenant?"})]})]})}),o&&(0,Ee.jsx)("div",{className:"px-6 py-4 text-center text-gray-500 text-sm",children:"Loading tenants..."}),u.map(e=>(0,Ee.jsx)("div",{onClick:()=>a(e.id),className:"px-6 py-4 cursor-pointer transition-colors ".concat((null===r||void 0===r?void 0:r.id)===e.id?"bg-gray-100":"hover:bg-gray-50"),children:(0,Ee.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-medium flex-shrink-0 text-base",children:e.avatar||e.name.charAt(0)}),(0,Ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Ee.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.isPrivate&&(0,Ee.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500 flex-shrink-0",children:e.lastMessageTime||"Now"})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Ee.jsx)("p",{className:"text-xs text-gray-500 truncate flex-1",children:e.lastMessage}),e.unreadCount&&(0,Ee.jsx)("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-gray-900 text-white rounded-full flex-shrink-0",children:e.unreadCount})]}),e.role&&(0,Ee.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:["(",e.role,")"]})]})]})},e.id)),0===u.length&&i&&(0,Ee.jsxs)("div",{className:"px-4 py-8 text-center text-gray-500 text-sm",children:['No tenants found for "',i,'"']})]}),(0,Ee.jsx)("div",{className:"p-4",children:(0,Ee.jsxs)("button",{className:"w-full px-4 py-2.5 bg-gray-900 hover:bg-black text-white text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Buat Tenant Baru"]})})]})]})};function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function ze(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Le(t)?t:t+""}function Ie(e,t,n){return(t=ze(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach(function(t){Ie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Ue={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"",We=e=>e.startsWith("http")?e:Ue?"".concat(Ue).concat(e):e,He=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((()=>{const e=je();if(!e)return!0;try{const t=1e3*JSON.parse(atob(e.split(".")[1])).exp;return t-Date.now()<3e5}catch(t){return!0}})()){console.log("[fetchWithAuth] Token expiring soon, refreshing...");if(!await _e())throw new Error("Token refresh failed - user logged out")}const r=je(),a=We(e),o=await fetch(a,Fe(Fe({},t),{},{headers:Fe(Fe({},t.headers),r&&{Authorization:"Bearer ".concat(r)})}));if(401===o.status){if(n<2){console.log("[fetchWithAuth] Got 401, attempting token refresh (retry ".concat(n+1,"/").concat(2,")..."));if(await _e()){const n=je(),r=We(e);return fetch(r,Fe(Fe({},t),{},{headers:Fe(Fe({},t.headers),n&&{Authorization:"Bearer ".concat(n)})}))}throw new Error("Authentication failed - please login again")}throw console.error("[fetchWithAuth] Max retries reached for 401"),new Error("Authentication failed after retries")}return o},Ve=async e=>{if(!je())return!1;try{return(await He("/api/tenant/".concat(e,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"__check_access__"})})).ok}catch(t){return console.error("[checkTenantAccess] Failed:",t),!1}},$e=async(e,t)=>{const n=await He("/api/tenant/".concat(e,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})});if(!n.ok)throw new Error("API call failed: ".concat(n.status));return n.json()},qe=async()=>{const e=(()=>{const e=je();if(!e)return null;try{return JSON.parse(atob(e.split(".")[1])).tenant_id||null}catch(t){return null}})();if(!e)return[];try{const t=await(async e=>{const t="/api/tenant/".concat(e,"/info"),n=We(t),r=await fetch(n);if(!r.ok)throw new Error("Failed to fetch tenant info: ".concat(r.status));return r.json()})(e);return[{id:e,name:t.display_name||t.name||e.charAt(0).toUpperCase()+e.slice(1),avatar:t.avatar||"\ud83c\udfea",status:"online",lastMessage:"",lastMessageTime:"Now",role:"Owner",isPrivate:!0}]}catch(t){return[{id:e,name:e.charAt(0).toUpperCase()+e.slice(1),avatar:"\ud83c\udfea",status:"online",lastMessage:"",lastMessageTime:"Now",role:"Owner",isPrivate:!0}]}},Qe=[{id:"purchase_goods",label:"Beli Barang",icon:"/icons/Beli%20barang.png",disabled:!1},{id:"purchase_materials",label:"Beli Bahan",icon:"/icons/Beli%20bahan.png",disabled:!1},{id:"inventory_update",label:"Inventory",icon:"/icons/Update%20Stok.png",disabled:!1},{id:"sales_product",label:"Jual Produk",icon:"/icons/Jual%20produk.png",disabled:!1},{id:"sales_service",label:"Jual Jasa",icon:"/icons/Jual%20jasa.png",disabled:!1},{id:"expense",label:"Beban",icon:"/icons/Beban.png",disabled:!1},{id:"add_capital",label:"Modal",icon:"/icons/Modal.png",disabled:!1},{id:"withdraw",label:"Prive",icon:"/icons/Prive.png",disabled:!1},{id:"profit_loss",label:"Laba Rugi",icon:"/icons/Laba%20rugi.png",disabled:!1},{id:"balance_sheet",label:"Neraca",icon:"/icons/Neraca.png",disabled:!1},{id:"stock_report",label:"Stok Barang",icon:"/icons/Stok.png",disabled:!1}],Ke=e=>{let{isMobile:n=!1,onMenuItemClick:r}=e;const[a,o]=(0,t.useState)(!1),i=(0,t.useRef)(null);(0,t.useEffect)(()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&o(!1)};return a&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[a]);const s=e=>{console.log("[ActionMenuButton] Menu item clicked:",e),o(!1),null===r||void 0===r||r(e)};return(0,Ee.jsxs)("div",{ref:i,className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>o(!a),className:"w-10 h-10 flex items-center justify-center bg-transparent hover:bg-gray-200/50 text-gray-700 rounded-full transition-colors","aria-label":"Open action menu",children:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),a&&(0,Ee.jsx)(Ee.Fragment,{children:n?(0,Ee.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/20",onClick:()=>o(!1)}),(0,Ee.jsxs)("div",{className:"relative w-full bg-white rounded-t-2xl shadow-2xl animate-slide-up",style:{maxHeight:"70vh",paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[(0,Ee.jsx)("div",{className:"flex justify-center pt-3 pb-2",children:(0,Ee.jsx)("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),(0,Ee.jsx)("div",{className:"px-4 pb-6 pt-2",children:(0,Ee.jsx)("div",{className:"grid grid-cols-4 gap-3",children:Qe.map(e=>(0,Ee.jsxs)("button",{onClick:()=>s(e.id),disabled:e.disabled,className:"flex flex-col items-center justify-start text-center disabled:opacity-40 disabled:cursor-not-allowed",style:{minHeight:"80px"},children:[(0,Ee.jsx)("div",{className:"w-12 h-12 mb-2 flex items-center justify-center",children:(0,Ee.jsx)("img",{src:e.icon,alt:e.label,className:"w-full h-full object-contain"})}),(0,Ee.jsx)("div",{className:"text-xs font-normal text-gray-800 leading-tight px-1",children:e.label})]},e.id))})})]})]}):(0,Ee.jsx)("div",{className:"absolute bottom-full left-0 mb-2 bg-white rounded-2xl py-1 z-50 animate-popup-slide",style:{minWidth:"220px",maxWidth:"220px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15)"},children:Qe.map((e,t)=>(0,Ee.jsxs)("button",{onClick:()=>s(e.id),disabled:e.disabled,className:"w-full flex items-center gap-3 px-5 py-3 hover:bg-gray-50 transition-colors text-left disabled:opacity-40 disabled:cursor-not-allowed ".concat(0===t?"rounded-t-2xl":""," ").concat(t===Qe.length-1?"rounded-b-2xl":""),children:[(0,Ee.jsx)("div",{className:"w-6 h-6 flex-shrink-0",children:(0,Ee.jsx)("img",{src:e.icon,alt:e.label,className:"w-full h-full object-contain"})}),(0,Ee.jsx)("span",{className:"text-[15px] font-normal text-gray-800",children:e.label})]},e.id))})})]})},Ge="milkyhoop_draft_purchase",Xe={karton:"pcs",dus:"pcs",box:"pcs",slop:"bungkus",bal:"bungkus",koli:"pcs",pack:"pcs",lusin:"pcs",kg:"kg",liter:"liter"},Je=["karton","dus","box","slop","bal","koli","pack","lusin","kg","liter"],Ye=["pcs","lembar","unit","liter","mili liter","gram","kg","botol","sachet","bungkus"],Ze=e=>new Intl.NumberFormat("id-ID",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),et=e=>{const t=e.replace(/[^\d]/g,"");return parseInt(t,10)||0},tt=e=>e.toISOString().split("T")[0],nt=()=>{const e=new Date;return e.setDate(e.getDate()+1),tt(e)},rt=()=>({type:"wholesales",supplier:"",date:tt(new Date),product:"",qty:1,unit:"karton",unitsPerPack:void 0,pricePerUnit:0,discountType:"none",discountValue:void 0,notes:"",paymentMethod:"transfer",dueDate:void 0,includePPN:!1}),at=e=>{let{isOpen:n,onClose:r,isMobile:a=!1,onTransactionComplete:o,scannedProductData:i}=e;const s=ee(),[l,c]=(Y(),(0,t.useState)(1)),[u,d]=(0,t.useState)(rt()),[f,h]=(0,t.useState)({}),[p,m]=(0,t.useState)({}),[g,x]=(0,t.useState)(!1),[v,y]=(0,t.useState)("idle"),[b,w]=(0,t.useState)(!1),[k,j]=(0,t.useState)(!1),[N,_]=(0,t.useState)(""),[S,C]=(0,t.useState)(""),[M,E]=(0,t.useState)("right"),[P,R]=(0,t.useState)(!1),[O,A]=(0,t.useState)(null),[D,T]=(0,t.useState)(null),[L,z]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(console.log("[PurchaseForm] scannedProductData effect:",{isOpen:n,scannedProductData:i,lastProcessedBarcode:O}),n&&i){const{name:e,barcode:t,unit:n}=i;if(t===O)return void console.log("[PurchaseForm] Skipping - already processed barcode:",t);const r=setTimeout(()=>{console.log("[PurchaseForm] AUTO-FILLING from scan:",{name:e,barcode:t,unit:n}),d(t=>Fe(Fe({},t),{},{product:e},n?{unit:n}:{})),_(""),A(t),c(e=>1===e?2:e)},150);return()=>clearTimeout(r)}},[n,i,O]),(0,t.useEffect)(()=>{n||(console.log("[PurchaseForm] Form closed - resetting lastProcessedBarcode"),A(null))},[n]);const[I,B]=(0,t.useState)([]),[F,U]=(0,t.useState)([]),[W,H]=(0,t.useState)(!1),[V,$]=(0,t.useState)(!1),q=(0,t.useRef)(null),Q=(0,t.useRef)(null),K=(0,t.useRef)(null),G=(0,t.useRef)(null),X=(0,t.useRef)(null);(0,t.useEffect)(()=>(G.current&&clearTimeout(G.current),N&&b?G.current=setTimeout(()=>{(async e=>{if(e.length<1)B([]);else{H(!0);try{const t=localStorage.getItem("access_token"),n=await fetch("/api/products/search?q=".concat(encodeURIComponent(e),"&limit=10"),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();B(e.suggestions||[])}else B([])}catch(t){console.error("Failed to fetch product suggestions:",t),B([])}finally{H(!1)}}})(N)},300):B([]),()=>{G.current&&clearTimeout(G.current)}),[N,b]),(0,t.useEffect)(()=>(X.current&&clearTimeout(X.current),S&&k?X.current=setTimeout(()=>{(async e=>{if(e.length<1)U([]);else{$(!0);try{const t=localStorage.getItem("access_token"),n=await fetch("/api/suppliers/search?q=".concat(encodeURIComponent(e),"&limit=10"),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();U(e.suggestions||[])}else U([])}catch(t){console.error("Failed to fetch supplier suggestions:",t),U([])}finally{$(!1)}}})(S)},300):U([]),()=>{X.current&&clearTimeout(X.current)}),[S,k]);const J=(0,t.useMemo)(()=>{const e=u.qty*u.pricePerUnit;let t=0;"amount"===u.discountType&&u.discountValue?t=u.discountValue:"percentage"===u.discountType&&u.discountValue&&(t=e*u.discountValue/100);const n=Math.max(0,e-t),r=u.includePPN?.11*n:0;return{subtotal:n,ppn:r,total:n+r,discount:t}},[u.qty,u.pricePerUnit,u.discountType,u.discountValue,u.includePPN]),Z=(0,t.useMemo)(()=>{const e="wholesales"===u.type?Xe[u.unit]||"pcs":u.unit,t=u.unitsPerPack||1,n="wholesales"===u.type&&t>0?u.pricePerUnit/t:u.pricePerUnit,r="wholesales"===u.type?u.qty*t:u.qty,a=D?D-n:0;return{retailUnit:e,estimatedHppPerUnit:n,estimatedMargin:a,estimatedMarginPercent:n>0&&D?a/n*100:0,totalUnits:r,estimatedTotalProfit:a*r}},[u.type,u.unit,u.pricePerUnit,u.unitsPerPack,u.qty,D]),te=(0,t.useMemo)(()=>{const e=Z.retailUnit,t=Z.totalUnits,n=J.total,r=t>0?n/t:0,a=D?D-r:0;return{retailUnit:e,finalHppPerUnit:r,finalMargin:a,finalMarginPercent:r>0&&D?a/r*100:0,totalUnits:t,finalTotalProfit:a*t}},[J.total,Z.retailUnit,Z.totalUnits,D]);Z.retailUnit,Z.estimatedHppPerUnit,Z.estimatedMargin,Z.estimatedMarginPercent,Z.totalUnits,Z.estimatedTotalProfit;(0,t.useEffect)(()=>{if(n){const t=localStorage.getItem(Ge);if(t)try{const e=JSON.parse(t);Date.now()-e.timestamp<864e5?e.fromScan?(d(e.formData),c(e.currentStep),localStorage.removeItem(Ge)):R(!0):localStorage.removeItem(Ge)}catch(e){localStorage.removeItem(Ge)}}},[n]),(0,t.useEffect)(()=>{n&&setTimeout(()=>{1===l&&K.current?K.current.focus():Q.current&&Q.current.focus()},300)},[n,l]),(0,t.useEffect)(()=>{const e=e=>{"Escape"===e.key&&n&&r()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,r]),(0,t.useEffect)(()=>(document.body.style.overflow=n?"hidden":"",()=>{document.body.style.overflow=""}),[n]);const ne=e=>{const t={};return 1===e&&(u.type||(t.type="Tipe pembelian wajib dipilih"),u.date||(t.date="Tanggal wajib diisi")),2===e&&(u.product&&""!==u.product.trim()||(t.product="Produk wajib dipilih"),(!u.qty||u.qty<1)&&(t.qty="Qty minimal 1"),(!u.pricePerUnit||u.pricePerUnit<=0)&&(t.pricePerUnit="Harga wajib diisi"),"wholesales"===u.type&&(!u.unitsPerPack||u.unitsPerPack<=0)&&(t.unitsPerPack="Isi per unit wajib diisi untuk wholesales")),3===e&&("percentage"===u.discountType&&u.discountValue&&(u.discountValue<0||u.discountValue>100)&&(t.discountValue="Diskon harus 0-100%"),u.paymentMethod||(t.paymentMethod="Metode bayar wajib dipilih"),"kredit"!==u.paymentMethod||u.dueDate||(t.dueDate="Jatuh tempo wajib diisi")),h(t),0===Object.keys(t).length},re=e=>{m(t=>Fe(Fe({},t),{},{[e]:!0}))},ae=(e,t)=>{d(n=>Fe(Fe({},n),{},{[e]:t})),f[e]&&h(t=>Fe(Fe({},t),{},{[e]:void 0}))},oe=()=>{ne(l)&&(E("right"),c(e=>Math.min(e+1,4)))},ie=()=>{E("left"),c(e=>Math.max(e-1,1))},se=()=>{r(),setTimeout(()=>{d(rt()),c(1),m({}),h({}),y("idle"),_(""),C(""),R(!1),T(null),z(!1)},300)};if(!n)return null;const le=e=>{if(1===e)return!!u.type&&!!u.date;if(2===e){const e=!!u.product&&u.qty>=1&&u.pricePerUnit>0;return"wholesales"===u.type?e&&!!u.unitsPerPack&&u.unitsPerPack>0:e}return 3===e?!!u.paymentMethod&&("kredit"!==u.paymentMethod||!!u.dueDate):4===e};return(0,Ee.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/20",onClick:se}),P&&(0,Ee.jsx)("div",{className:"absolute inset-0 z-[101] flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-xl p-6 mx-4 max-w-sm shadow-2xl",children:[(0,Ee.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Lanjutkan Draft?"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Anda memiliki draft yang belum selesai. Lanjutkan atau mulai baru?"}),(0,Ee.jsxs)("div",{className:"flex gap-3",children:[(0,Ee.jsx)("button",{onClick:()=>{localStorage.removeItem(Ge),R(!1)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Mulai Baru"}),(0,Ee.jsx)("button",{onClick:()=>{const e=localStorage.getItem(Ge);if(e){const t=JSON.parse(e);d(t.formData),c(t.currentStep)}R(!1)},className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Lanjutkan"})]})]})}),(0,Ee.jsxs)("div",{ref:q,className:"relative w-full bg-white shadow-2xl animate-slide-up sm:animate-popup-slide ".concat(a?"rounded-t-2xl max-h-[90vh]":"rounded-2xl max-w-[600px] max-h-[85vh] mx-4"),style:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15)"},children:[(0,Ee.jsxs)("div",{className:"sticky top-0 bg-white rounded-t-2xl border-b border-gray-200 px-4 sm:px-6 py-4 flex items-center justify-between z-10",children:[(0,Ee.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ee.jsx)("span",{className:"text-xl",children:"\ud83d\udce6"}),(0,Ee.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"BELI BARANG"})]}),(0,Ee.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ee.jsxs)("span",{className:"text-xs text-gray-500",children:["Step ",l,"/",4]}),(0,Ee.jsx)("button",{onClick:se,className:"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close",children:(0,Ee.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,Ee.jsx)("div",{className:"px-4 sm:px-6 pt-3",children:(0,Ee.jsx)("div",{className:"h-1 bg-gray-200 rounded-full overflow-hidden",children:(0,Ee.jsx)("div",{className:"h-full bg-gray-800 transition-all duration-300 ease-out",style:{width:"".concat(l/4*100,"%")}})})}),(0,Ee.jsxs)("div",{className:"overflow-y-auto px-4 sm:px-6 py-4",style:{maxHeight:a?"calc(90vh - 180px)":"calc(85vh - 180px)"},children:[1===l&&(0,Ee.jsxs)("div",{className:"space-y-5 animate-fade-in",children:[(0,Ee.jsxs)("fieldset",{children:[(0,Ee.jsxs)("legend",{className:"text-sm font-medium text-gray-700 mb-3",children:["Tipe Pembelian ",(0,Ee.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ee.jsx)("div",{className:"grid grid-cols-2 gap-4",children:["wholesales","eceran"].map(e=>(0,Ee.jsxs)("button",{type:"button",ref:"wholesales"===e?K:void 0,onClick:()=>{ae("type",e),ae("unit","eceran"===e?"pcs":"karton")},className:"flex items-center justify-center gap-3 p-4 rounded-lg border-2 transition-all ".concat(u.type===e?"border-gray-800 bg-gray-50":"border-gray-200 hover:border-gray-300"),children:[(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center ".concat(u.type===e?"border-gray-800":"border-gray-400"),children:u.type===e&&(0,Ee.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-800"})}),(0,Ee.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"wholesales"===e?"Wholesales":"Eceran"})]},e))}),f.type&&(0,Ee.jsx)("p",{className:"mt-2 text-xs text-red-500",children:f.type})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsxs)("label",{htmlFor:"supplier",className:"block text-sm font-medium text-gray-700 mb-1",children:["Supplier ",(0,Ee.jsx)("span",{className:"text-gray-400 text-xs",children:"(opsional)"})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("input",{id:"supplier",type:"text",value:S||u.supplier,onChange:e=>{C(e.target.value),j(!0)},onFocus:()=>j(!0),onBlur:()=>setTimeout(()=>j(!1),200),placeholder:"Pilih supplier...",className:"w-full px-3 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500"}),(0,Ee.jsx)("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),k&&(0,Ee.jsxs)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[V?(0,Ee.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:(0,Ee.jsxs)("svg",{className:"animate-spin w-4 h-4 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ee.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):F.length>0?F.map((e,t)=>(0,Ee.jsxs)("button",{type:"button",onClick:()=>{ae("supplier",e.name),C(""),j(!1)},className:"w-full text-left px-3 py-3 text-sm text-gray-800 hover:bg-gray-50 transition-colors flex justify-between items-center",children:[(0,Ee.jsx)("span",{children:e.name}),(0,Ee.jsxs)("span",{className:"text-xs text-gray-400",children:[e.usage_count,"x"]})]},"".concat(e.name,"-").concat(t))):S&&S.length>0?(0,Ee.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:"Tidak ada supplier ditemukan"}):null,S&&!F.find(e=>e.name.toLowerCase()===S.toLowerCase())&&(0,Ee.jsxs)("button",{type:"button",onClick:()=>{ae("supplier",S),C(""),j(!1)},className:"w-full text-left px-3 py-3 text-sm text-blue-600 hover:bg-blue-50 transition-colors flex items-center gap-1 border-t border-gray-100",children:[(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),'Gunakan "',S,'"']})]})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:["Tanggal ",(0,Ee.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ee.jsx)("input",{id:"date",type:"date",value:u.date,onChange:e=>ae("date",e.target.value),onBlur:()=>re("date"),className:"w-full px-3 py-3 border rounded-lg text-sm text-gray-900 focus:outline-none focus:ring-1 ".concat(f.date&&p.date?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),f.date&&p.date&&(0,Ee.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.date})]})]}),2===l&&(0,Ee.jsxs)("div",{className:"space-y-4 animate-fade-in",children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("label",{htmlFor:"product",className:"block text-sm font-medium text-gray-700 mb-1",children:"Produk"}),(0,Ee.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ee.jsxs)("div",{className:"relative flex-1",children:[(0,Ee.jsx)("input",{id:"product",name:"product",ref:Q,type:"text",value:N||u.product,onChange:e=>{_(e.target.value),w(!0)},onFocus:()=>w(!0),onBlur:()=>{setTimeout(()=>w(!1),200),re("product")},placeholder:"Cari produk...","aria-invalid":!!f.product,className:"w-full px-3 py-3 pr-8 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(f.product&&p.product?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Ee.jsx)("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,Ee.jsx)("button",{type:"button",onClick:()=>{const e=new URLSearchParams(window.location.search).get("tenant"),t={formData:u,currentStep:l,timestamp:Date.now(),fromScan:!0};localStorage.setItem(Ge,JSON.stringify(t)),s("/sales/scan",{state:{context:"purchase",tenantId:e,returnTo:"/app?tenant=".concat(e,"&action=openPurchaseForm")}}),r()},className:"p-3 border border-gray-300 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-50 active:bg-gray-100 transition-colors","aria-label":"Scan barcode",title:"Scan barcode produk",children:(0,Ee.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),b&&(0,Ee.jsxs)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[W?(0,Ee.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:(0,Ee.jsxs)("svg",{className:"animate-spin w-4 h-4 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ee.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):I.length>0?I.map((e,t)=>(0,Ee.jsx)("button",{type:"button",onClick:()=>{ae("product",e.name),ae("unit",e.unit),e.last_price&&ae("pricePerUnit",e.last_price),_(""),w(!1)},className:"w-full text-left px-3 py-3 text-sm text-gray-800 hover:bg-gray-50 transition-colors",children:(0,Ee.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("div",{className:"font-medium",children:e.name}),(0,Ee.jsxs)("div",{className:"text-xs text-gray-500",children:[e.unit,e.last_price&&" \xb7 Rp ".concat(Ze(e.last_price))]})]}),(0,Ee.jsxs)("span",{className:"text-xs text-gray-400",children:[e.usage_count,"x"]})]})},"".concat(e.name,"-").concat(e.unit,"-").concat(t))):N&&N.length>0?(0,Ee.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:"Tidak ada produk ditemukan"}):null,N&&(0,Ee.jsxs)("button",{type:"button",onClick:()=>{ae("product",N),_(""),w(!1)},className:"w-full text-left px-3 py-3 text-sm text-blue-600 hover:bg-blue-50 transition-colors flex items-center gap-1 border-t border-gray-100",children:[(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),'Produk Baru: "',N,'"']})]}),f.product&&p.product&&(0,Ee.jsxs)("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[(0,Ee.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),f.product]})]}),(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{htmlFor:"qty",className:"block text-sm font-medium text-gray-700 mb-1",children:"Qty"}),(0,Ee.jsxs)("div",{className:"relative flex items-center",children:[(0,Ee.jsx)("button",{type:"button",onClick:()=>ae("qty",Math.max(1,u.qty-1)),className:"absolute left-0 h-full px-3 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Decrease quantity",children:(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,Ee.jsx)("input",{id:"qty",name:"qty",type:"number",min:"1",value:u.qty,onChange:e=>ae("qty",parseInt(e.target.value)||1),onBlur:()=>re("qty"),"aria-invalid":!!f.qty,className:"w-full px-10 py-3 border rounded-lg text-sm text-gray-900 text-center focus:outline-none focus:ring-1 ".concat(f.qty&&p.qty?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Ee.jsx)("button",{type:"button",onClick:()=>ae("qty",u.qty+1),className:"absolute right-0 h-full px-3 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Increase quantity",children:(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),f.qty&&p.qty&&(0,Ee.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.qty})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{htmlFor:"unit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Satuan"}),(0,Ee.jsx)("select",{id:"unit",value:u.unit,onChange:e=>ae("unit",e.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500 bg-white",children:("eceran"===u.type?Ye:Je).map(e=>(0,Ee.jsx)("option",{value:e,children:e},e))})]})]}),"wholesales"===u.type?(0,Ee.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("label",{htmlFor:"pricePerUnit",className:"block text-sm font-medium text-gray-700 mb-1",children:["Harga per ",u.unit]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Rp"}),(0,Ee.jsx)("input",{id:"pricePerUnit",name:"pricePerUnit",type:"text",inputMode:"numeric",value:u.pricePerUnit?Ze(u.pricePerUnit):"",onChange:e=>ae("pricePerUnit",et(e.target.value)),onBlur:()=>re("pricePerUnit"),placeholder:"0","aria-invalid":!!f.pricePerUnit,className:"w-full pl-10 pr-12 py-3 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(f.pricePerUnit&&p.pricePerUnit?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Ee.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["/",u.unit]})]}),f.pricePerUnit&&p.pricePerUnit&&(0,Ee.jsxs)("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[(0,Ee.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),f.pricePerUnit]})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("label",{htmlFor:"unitsPerPack",className:"block text-sm font-medium text-gray-700 mb-1",children:["Isi per ",u.unit]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("input",{id:"unitsPerPack",type:"number",min:"1",value:u.unitsPerPack||"",onChange:e=>ae("unitsPerPack",parseInt(e.target.value)||void 0),placeholder:"40",className:"w-full px-3 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500"}),(0,Ee.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["pcs/",u.unit]})]})]})]}):(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("label",{htmlFor:"pricePerUnit",className:"block text-sm font-medium text-gray-700 mb-1",children:["Harga per ",u.unit]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Rp"}),(0,Ee.jsx)("input",{id:"pricePerUnit",name:"pricePerUnit",type:"text",inputMode:"numeric",value:u.pricePerUnit?Ze(u.pricePerUnit):"",onChange:e=>ae("pricePerUnit",et(e.target.value)),onBlur:()=>re("pricePerUnit"),placeholder:"0","aria-invalid":!!f.pricePerUnit,className:"w-full pl-10 pr-20 py-3 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(f.pricePerUnit&&p.pricePerUnit?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Ee.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["/",u.unit]})]}),f.pricePerUnit&&p.pricePerUnit&&(0,Ee.jsxs)("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[(0,Ee.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),f.pricePerUnit]})]}),(0,Ee.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,Ee.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,Ee.jsx)("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Auto Calculate"})}),"wholesales"===u.type&&u.unitsPerPack&&u.unitsPerPack>0&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("div",{className:"flex justify-between items-center text-sm mb-1",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ud83d\udcb0 Est. HPP:"}),(0,Ee.jsxs)("span",{className:"font-medium text-gray-800",children:["Rp ",Ze(Math.round(Z.estimatedHppPerUnit)),"/",Z.retailUnit]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between items-center text-sm mb-1",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ud83d\udce6 Total:"}),(0,Ee.jsxs)("span",{className:"font-medium text-gray-800",children:[Ze(Z.totalUnits)," ",Z.retailUnit]})]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ud83d\udcb5 Subtotal:"}),(0,Ee.jsxs)("span",{className:"font-semibold text-gray-800",children:["Rp ",Ze(u.qty*u.pricePerUnit)]})]}),"wholesales"===u.type&&u.unitsPerPack&&u.unitsPerPack>0&&(0,Ee.jsx)("p",{className:"text-xs text-gray-400 mt-2 italic",children:"* HPP final dihitung setelah diskon & PPN di Step 3"})]})]}),4===l&&(0,Ee.jsxs)("div",{className:"space-y-4 animate-fade-in",children:[(0,Ee.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:(0,Ee.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,Ee.jsxs)("div",{className:"font-medium mb-1",children:["Produk: ",u.product]}),(0,Ee.jsxs)("div",{children:["\ud83d\udcb0 HPP Final per ",te.retailUnit,": ",(0,Ee.jsxs)("span",{className:"font-semibold",children:["Rp ",Ze(Math.round(te.finalHppPerUnit))]})]}),(0,Ee.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"(setelah diskon & PPN)"})]})}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("label",{htmlFor:"hargaJual",className:"block text-sm font-medium text-gray-700 mb-1",children:["Harga Jual ",(0,Ee.jsx)("span",{className:"text-gray-400 text-xs",children:"(opsional)"})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Rp"}),(0,Ee.jsx)("input",{id:"hargaJual",type:"text",inputMode:"numeric",value:D?Ze(D):"",onChange:e=>T(et(e.target.value)||null),disabled:L,placeholder:"Masukkan harga jual",className:"w-full pl-10 pr-16 py-3 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(L?"bg-gray-100 border-gray-200 text-gray-400":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Ee.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["/",te.retailUnit]})]})]}),D&&D>0&&!L&&(0,Ee.jsx)("div",{className:"rounded-lg p-4 border ".concat(te.finalMarginPercent<0?"bg-red-50 border-red-200":te.finalMarginPercent<10?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"),children:(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,Ee.jsxs)("span",{className:te.finalMarginPercent<0?"text-red-700":te.finalMarginPercent<10?"text-yellow-700":"text-green-700",children:["\ud83d\udcca Profit per ",te.retailUnit,":"]}),(0,Ee.jsxs)("span",{className:"font-semibold ".concat(te.finalMarginPercent<0?"text-red-800":te.finalMarginPercent<10?"text-yellow-800":"text-green-800"),children:["Rp ",Ze(Math.round(te.finalMargin))," (",te.finalMarginPercent.toFixed(1),"%)",te.finalMarginPercent>=10?" \u2705":""]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,Ee.jsx)("span",{className:te.finalMarginPercent<0?"text-red-700":te.finalMarginPercent<10?"text-yellow-700":"text-green-700",children:"\ud83d\udcb0 Total Profit:"}),(0,Ee.jsxs)("span",{className:"font-semibold ".concat(te.finalMarginPercent<0?"text-red-800":te.finalMarginPercent<10?"text-yellow-800":"text-green-800"),children:["Rp ",Ze(Math.round(te.finalTotalProfit))]})]}),te.finalMarginPercent<0&&(0,Ee.jsx)("p",{className:"text-xs text-red-600 mt-2",children:"\u26a0\ufe0f RUGI! Harga jual lebih rendah dari HPP."}),te.finalMarginPercent>=0&&te.finalMarginPercent<10&&(0,Ee.jsx)("p",{className:"text-xs text-yellow-600 mt-2",children:"\u26a0\ufe0f Margin rendah! Pertimbangkan naikkan harga."})]})}),(0,Ee.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer py-2",children:[(0,Ee.jsx)("input",{type:"checkbox",checked:L,onChange:e=>{z(e.target.checked),e.target.checked&&T(null)},className:"w-4 h-4 text-gray-800 border-gray-300 rounded focus:ring-gray-500"}),(0,Ee.jsx)("span",{className:"text-sm text-gray-700",children:"Isi harga jual nanti"})]}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500 bg-gray-50 rounded-lg p-3",children:"\ud83d\udca1 Isi harga jual biar checkout lebih cepat nanti"}),"success"===v&&(0,Ee.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[(0,Ee.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,Ee.jsx)("span",{className:"text-sm text-green-700",children:"Berhasil disimpan!"})]}),"error"===v&&(0,Ee.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[(0,Ee.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,Ee.jsx)("span",{className:"text-sm text-red-700",children:"Gagal menyimpan, coba lagi"})]}),"session_expired"===v&&(0,Ee.jsxs)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-2",children:[(0,Ee.jsx)("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,Ee.jsx)("span",{className:"text-sm text-yellow-700",children:"Session expired. Redirecting to login..."})]})]}),3===l&&(0,Ee.jsxs)("div",{className:"space-y-4 animate-fade-in",children:[(0,Ee.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("span",{className:"text-xs font-medium text-gray-600 block mb-2",children:"Diskon"}),(0,Ee.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,Ee.jsx)("input",{type:"checkbox",checked:"percentage"===u.discountType,onChange:e=>{e.target.checked?ae("discountType","percentage"):(ae("discountType","none"),ae("discountValue",void 0))},className:"sr-only peer"}),(0,Ee.jsx)("div",{className:"w-10 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800 relative"})]})]}),(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("span",{className:"text-xs font-medium text-gray-600 block mb-2",children:"PPN"}),(0,Ee.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,Ee.jsx)("input",{type:"checkbox",checked:u.includePPN,onChange:e=>ae("includePPN",e.target.checked),className:"sr-only peer"}),(0,Ee.jsx)("div",{className:"w-10 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800 relative"})]})]}),(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("span",{className:"text-xs font-medium text-gray-600 block mb-2",children:"Cara Bayar"}),(0,Ee.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,Ee.jsx)("input",{type:"checkbox",checked:"tunai"!==u.paymentMethod||!0===p.paymentMethod,onChange:e=>{e.target.checked?re("paymentMethod"):(ae("paymentMethod","tunai"),ae("dueDate",void 0),m(e=>Fe(Fe({},e),{},{paymentMethod:!1})))},className:"sr-only peer"}),(0,Ee.jsx)("div",{className:"w-10 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800 relative"})]})]})]}),"percentage"===u.discountType&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("input",{type:"number",inputMode:"numeric",min:"1",max:"99",value:u.discountValue||"",onChange:e=>{const t=parseInt(e.target.value);e.target.value?t>=1&&t<=99&&ae("discountValue",t):ae("discountValue",void 0)},placeholder:"0",className:"w-full px-3 pr-8 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500"}),(0,Ee.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"%"})]}),("tunai"!==u.paymentMethod||!0===p.paymentMethod)&&(0,Ee.jsx)("div",{className:"space-y-2",children:[{value:"tunai",label:"Tunai"},{value:"transfer",label:"Transfer"},{value:"kredit",label:"Tempo"}].map(e=>(0,Ee.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-gray-50",children:[(0,Ee.jsx)("input",{type:"radio",name:"paymentMethod",value:e.value,checked:u.paymentMethod===e.value,onChange:e=>{ae("paymentMethod",e.target.value),"kredit"!==e.target.value&&ae("dueDate",void 0)},className:"w-4 h-4 text-gray-800 border-gray-300 focus:ring-gray-500"}),(0,Ee.jsx)("span",{className:"text-sm text-gray-700",children:e.label})]},e.value))}),"kredit"===u.paymentMethod&&(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Jatuh Tempo"}),(0,Ee.jsx)("input",{id:"dueDate",name:"dueDate",type:"date",min:nt(),value:u.dueDate||"",onChange:e=>ae("dueDate",e.target.value),onBlur:()=>re("dueDate"),"aria-invalid":!!f.dueDate,className:"w-full px-3 py-3 border rounded-lg text-sm text-gray-900 focus:outline-none focus:ring-1 ".concat(f.dueDate&&p.dueDate?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),f.dueDate&&p.dueDate&&(0,Ee.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.dueDate})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:["Catatan ",(0,Ee.jsx)("span",{className:"text-gray-400 text-xs",children:"(opsional)"})]}),(0,Ee.jsx)("textarea",{id:"notes",value:u.notes,onChange:e=>ae("notes",e.target.value.slice(0,200)),placeholder:"Catatan tambahan...",rows:2,maxLength:200,className:"w-full px-3 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500 resize-none"}),(0,Ee.jsxs)("p",{className:"mt-1 text-xs text-gray-400 text-right",children:[(u.notes||"").length,"/200"]})]}),(0,Ee.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[(0,Ee.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Ee.jsx)("span",{className:"text-sm text-gray-500",children:"Subtotal:"}),(0,Ee.jsxs)("span",{className:"text-sm text-gray-600",children:["Rp ",Ze(u.qty*u.pricePerUnit)]})]}),J.discount>0&&(0,Ee.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Ee.jsx)("span",{className:"text-sm text-gray-500",children:"Diskon:"}),(0,Ee.jsxs)("span",{className:"text-sm text-green-600",children:["- Rp ",Ze(J.discount)]})]}),u.includePPN&&(0,Ee.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Ee.jsx)("span",{className:"text-sm text-gray-500",children:"PPN (11%):"}),(0,Ee.jsxs)("span",{className:"text-sm text-gray-600",children:["Rp ",Ze(J.ppn)]})]}),(0,Ee.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,Ee.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ee.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"TOTAL BAYAR:"}),(0,Ee.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["Rp ",Ze(J.total)]})]}),"wholesales"===u.type&&u.unitsPerPack&&u.unitsPerPack>0&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,Ee.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ee.jsxs)("span",{className:"text-sm text-gray-500",children:["\ud83d\udcb0 HPP Final per ",te.retailUnit,":"]}),(0,Ee.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Rp ",Ze(Math.round(te.finalHppPerUnit))]})]})]})]})]})]}),(0,Ee.jsxs)("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 rounded-b-2xl px-4 sm:px-6 py-4",children:[1===l&&(0,Ee.jsx)("div",{className:"flex justify-end",children:(0,Ee.jsxs)("button",{type:"button",onClick:oe,disabled:!le(1),className:"flex items-center gap-2 px-6 py-3 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Selanjutnya",(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),2===l&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsxs)("button",{type:"button",onClick:ie,className:"flex items-center gap-2 px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Kembali"]}),(0,Ee.jsxs)("button",{type:"button",onClick:oe,disabled:!le(2),className:"flex items-center gap-2 px-6 py-3 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Selanjutnya",(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),3===l&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsxs)("button",{type:"button",onClick:ie,className:"flex items-center gap-2 px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Kembali"]}),(0,Ee.jsxs)("button",{type:"button",onClick:oe,className:"flex items-center gap-2 px-6 py-3 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors",children:["Selanjutnya",(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),4===l&&(0,Ee.jsxs)("div",{className:"flex flex-row gap-2 w-full",children:[(0,Ee.jsxs)("button",{type:"button",onClick:ie,className:"flex-1 flex items-center justify-center gap-1 px-2 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,Ee.jsx)("span",{className:"hidden sm:inline",children:"Kembali"})]}),(0,Ee.jsxs)("button",{type:"button",onClick:async()=>{if(ne(4)){x(!0),y("idle");try{const e=localStorage.getItem("access_token");if(!e)return y("session_expired"),console.error("No auth token found - session expired"),void setTimeout(()=>{window.location.href="/login"},2e3);console.log("[PurchaseForm] Submitting transaction...");const t=await fetch("/api/transactions/purchase",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({product_name:u.product,quantity:u.qty,unit:u.unit,price_per_unit:u.pricePerUnit,payment_method:u.paymentMethod,vendor_name:u.supplier||null,notes:u.notes||null,discount_type:"none"===u.discountType?null:u.discountType,discount_value:u.discountValue||0,include_vat:u.includePPN,units_per_pack:u.unitsPerPack||null,purchase_type:u.type,purchase_date:u.date,due_date:u.dueDate||null,hpp_per_unit:te.finalHppPerUnit,harga_jual:L?null:D,margin:L?null:te.finalMargin,margin_percent:L?null:te.finalMarginPercent,retail_unit:te.retailUnit})});if(console.log("[PurchaseForm] Response status:",t.status),!t.ok)return console.error("[PurchaseForm] HTTP error:",t.status),void y("error");const n=await t.json();console.log("[PurchaseForm] Response data:",n),"success"===n.status?(localStorage.removeItem(Ge),y("success"),console.log("[PurchaseForm] Transaction saved:",n.transaction_id),o&&n.message&&o(n.message),se()):(console.error("[PurchaseForm] API error:",n.message),y("error"))}catch(e){console.error("[PurchaseForm] Submit error:",e),y("error")}finally{x(!1)}}},disabled:!le(4)||g,className:"flex-[2] flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[g?(0,Ee.jsxs)("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ee.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,Ee.jsx)("span",{children:"\ud83d\udcbe"}),"Simpan"]}),(0,Ee.jsx)("button",{type:"button",onClick:()=>{const e={formData:u,currentStep:l,timestamp:Date.now()};localStorage.setItem(Ge,JSON.stringify(e)),se()},className:"flex-1 flex items-center justify-center px-2 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Draft"}),(0,Ee.jsx)("button",{type:"button",onClick:se,className:"flex-1 flex items-center justify-center px-2 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Batal"})]})]})]})]})};function ot(e){return Array.isArray?Array.isArray(e):"[object Array]"===ft(e)}function it(e){return"string"===typeof e}function st(e){return"number"===typeof e}function lt(e){return!0===e||!1===e||function(e){return ct(e)&&null!==e}(e)&&"[object Boolean]"==ft(e)}function ct(e){return"object"===typeof e}function ut(e){return void 0!==e&&null!==e}function dt(e){return!e.trim().length}function ft(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ht=Object.prototype.hasOwnProperty;class pt{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let n=mt(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function mt(e){let t=null,n=null,r=null,a=1,o=null;if(it(e)||ot(e))r=e,t=gt(e),n=xt(e);else{if(!ht.call(e,"name"))throw new Error((e=>"Missing ".concat(e," property in key"))("name"));const i=e.name;if(r=i,ht.call(e,"weight")&&(a=e.weight,a<=0))throw new Error((e=>"Property 'weight' in key '".concat(e,"' must be a positive integer"))(i));t=gt(i),n=xt(i),o=e.getFn}return{path:t,id:n,weight:a,src:r,getFn:o}}function gt(e){return ot(e)?e:e.split(".")}function xt(e){return ot(e)?e.join("."):e}const vt={useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const a=(e,t,o)=>{if(ut(e))if(t[o]){const i=e[t[o]];if(!ut(i))return;if(o===t.length-1&&(it(i)||st(i)||lt(i)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(i));else if(ot(i)){r=!0;for(let e=0,n=i.length;e<n;e+=1)a(i[e],t,o+1)}else t.length&&a(i,t,o+1)}else n.push(e)};return a(e,it(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var yt=Fe(Fe(Fe(Fe({},{isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),vt);const bt=/[^ ]+/g;class wt{constructor(){let{getFn:e=yt.getFn,fieldNormWeight:t=yt.fieldNormWeight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.norm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=new Map,r=Math.pow(10,t);return{get(t){const a=t.match(bt).length;if(n.has(a))return n.get(a);const o=1/Math.pow(a,.5*e),i=parseFloat(Math.round(o*r)/r);return n.set(a,i),i},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}setIndexRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}setKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,it(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();it(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!ut(e)||dt(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((t,r)=>{let a=t.getFn?t.getFn(e):this.getFn(e,t.path);if(ut(a))if(ot(a)){let e=[];const t=[{nestedArrIndex:-1,value:a}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(ut(r))if(it(r)&&!dt(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else ot(r)&&r.forEach((e,n)=>{t.push({nestedArrIndex:n,value:e})})}n.$[r]=e}else if(it(a)&&!dt(a)){let e={v:a,n:this.norm.get(a)};n.$[r]=e}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function kt(e,t){let{getFn:n=yt.getFn,fieldNormWeight:r=yt.fieldNormWeight}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=new wt({getFn:n,fieldNormWeight:r});return a.setKeys(e.map(mt)),a.setSources(t),a.create(),a}function jt(e){let{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:a=yt.distance,ignoreLocation:o=yt.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t/e.length;if(o)return i;const s=Math.abs(r-n);return a?i+s/a:s?1:i}const Nt=32;function _t(e,t,n){let{location:r=yt.location,distance:a=yt.distance,threshold:o=yt.threshold,findAllMatches:i=yt.findAllMatches,minMatchCharLength:s=yt.minMatchCharLength,includeMatches:l=yt.includeMatches,ignoreLocation:c=yt.ignoreLocation}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length>Nt)throw new Error("Pattern length exceeds max of ".concat(Nt,"."));const u=t.length,d=e.length,f=Math.max(0,Math.min(r,d));let h=o,p=f;const m=s>1||l,g=m?Array(d):[];let x;for(;(x=e.indexOf(t,p))>-1;){let e=jt(t,{currentLocation:x,expectedLocation:f,distance:a,ignoreLocation:c});if(h=Math.min(e,h),p=x+u,m){let e=0;for(;e<u;)g[x+e]=1,e+=1}}p=-1;let v=[],y=1,b=u+d;const w=1<<u-1;for(let j=0;j<u;j+=1){let r=0,o=b;for(;r<o;){jt(t,{errors:j,currentLocation:f+o,expectedLocation:f,distance:a,ignoreLocation:c})<=h?r=o:b=o,o=Math.floor((b-r)/2+r)}b=o;let s=Math.max(1,f-o+1),l=i?d:Math.min(f+o,d)+u,x=Array(l+2);x[l+1]=(1<<j)-1;for(let i=l;i>=s;i-=1){let r=i-1,o=n[e.charAt(r)];if(m&&(g[r]=+!!o),x[i]=(x[i+1]<<1|1)&o,j&&(x[i]|=(v[i+1]|v[i])<<1|1|v[i+1]),x[i]&w&&(y=jt(t,{errors:j,currentLocation:r,expectedLocation:f,distance:a,ignoreLocation:c}),y<=h)){if(h=y,p=r,p<=f)break;s=Math.max(1,2*f-p)}}if(jt(t,{errors:j+1,currentLocation:f,expectedLocation:f,distance:a,ignoreLocation:c})>h)break;v=x}const k={isMatch:p>=0,score:Math.max(.001,y)};if(m){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yt.minMatchCharLength,n=[],r=-1,a=-1,o=0;for(let i=e.length;o<i;o+=1){let i=e[o];i&&-1===r?r=o:i||-1===r||(a=o-1,a-r+1>=t&&n.push([r,a]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}(g,s);e.length?l&&(k.indices=e):k.isMatch=!1}return k}function St(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const a=e.charAt(n);t[a]=(t[a]||0)|1<<r-n-1}return t}const Ct=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class Mt{constructor(e){let{location:t=yt.location,threshold:n=yt.threshold,distance:r=yt.distance,includeMatches:a=yt.includeMatches,findAllMatches:o=yt.findAllMatches,minMatchCharLength:i=yt.minMatchCharLength,isCaseSensitive:s=yt.isCaseSensitive,ignoreDiacritics:l=yt.ignoreDiacritics,ignoreLocation:c=yt.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options={location:t,threshold:n,distance:r,includeMatches:a,findAllMatches:o,minMatchCharLength:i,isCaseSensitive:s,ignoreDiacritics:l,ignoreLocation:c},e=s?e:e.toLowerCase(),e=l?Ct(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const u=(e,t)=>{this.chunks.push({pattern:e,alphabet:St(e),startIndex:t})},d=this.pattern.length;if(d>Nt){let e=0;const t=d%Nt,n=d-t;for(;e<n;)u(this.pattern.substr(e,Nt),e),e+=Nt;if(t){const e=d-Nt;u(this.pattern.substr(e),e)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r}=this.options;if(e=t?e:e.toLowerCase(),e=n?Ct(e):e,this.pattern===e){let t={isMatch:!0,score:0};return r&&(t.indices=[[0,e.length-1]]),t}const{location:a,distance:o,threshold:i,findAllMatches:s,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],d=0,f=!1;this.chunks.forEach(t=>{let{pattern:n,alphabet:h,startIndex:p}=t;const{isMatch:m,score:g,indices:x}=_t(e,n,h,{location:a+p,distance:o,threshold:i,findAllMatches:s,minMatchCharLength:l,includeMatches:r,ignoreLocation:c});m&&(f=!0),d+=g,m&&x&&(u=[...u,...x])});let h={isMatch:f,score:f?d/this.chunks.length:1};return f&&r&&(h.indices=u),h}}class Et{constructor(e){this.pattern=e}static isMultiMatch(e){return Pt(e,this.multiRegex)}static isSingleMatch(e){return Pt(e,this.singleRegex)}search(){}}function Pt(e,t){const n=e.match(t);return n?n[1]:null}class Rt extends Et{constructor(e){let{location:t=yt.location,threshold:n=yt.threshold,distance:r=yt.distance,includeMatches:a=yt.includeMatches,findAllMatches:o=yt.findAllMatches,minMatchCharLength:i=yt.minMatchCharLength,isCaseSensitive:s=yt.isCaseSensitive,ignoreDiacritics:l=yt.ignoreDiacritics,ignoreLocation:c=yt.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._bitapSearch=new Mt(e,{location:t,threshold:n,distance:r,includeMatches:a,findAllMatches:o,minMatchCharLength:i,isCaseSensitive:s,ignoreDiacritics:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ot extends Et{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const r=[],a=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+a,r.push([t,n-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const At=[class extends Et{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Ot,class extends Et{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends Et{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Et{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Et{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends Et{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Rt],Dt=At.length,Tt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const Lt=new Set([Rt.type,Ot.type]);class zt{constructor(e){let{isCaseSensitive:t=yt.isCaseSensitive,ignoreDiacritics:n=yt.ignoreDiacritics,includeMatches:r=yt.includeMatches,minMatchCharLength:a=yt.minMatchCharLength,ignoreLocation:o=yt.ignoreLocation,findAllMatches:i=yt.findAllMatches,location:s=yt.location,threshold:l=yt.threshold,distance:c=yt.distance}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:n,includeMatches:r,minMatchCharLength:a,findAllMatches:i,ignoreLocation:o,location:s,threshold:l,distance:c},e=t?e:e.toLowerCase(),e=n?Ct(e):e,this.pattern=e,this.query=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map(e=>{let n=e.trim().split(Tt).filter(e=>e&&!!e.trim()),r=[];for(let a=0,o=n.length;a<o;a+=1){const e=n[a];let o=!1,i=-1;for(;!o&&++i<Dt;){const n=At[i];let a=n.isMultiMatch(e);a&&(r.push(new n(a,t)),o=!0)}if(!o)for(i=-1;++i<Dt;){const n=At[i];let a=n.isSingleMatch(e);if(a){r.push(new n(a,t));break}}}return r})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r,ignoreDiacritics:a}=this.options;e=r?e:e.toLowerCase(),e=a?Ct(e):e;let o=0,i=[],s=0;for(let l=0,c=t.length;l<c;l+=1){const r=t[l];i.length=0,o=0;for(let t=0,a=r.length;t<a;t+=1){const a=r[t],{isMatch:l,indices:c,score:u}=a.search(e);if(!l){s=0,o=0,i.length=0;break}if(o+=1,s+=u,n){const e=a.constructor.type;Lt.has(e)?i=[...i,...c]:i.push(c)}}if(o){let e={isMatch:!0,score:s/o};return n&&(e.indices=i),e}}return{isMatch:!1,score:1}}}const It=[];function Bt(e,t){for(let n=0,r=It.length;n<r;n+=1){let r=It[n];if(r.condition(e,t))return new r(e,t)}return new Mt(e,t)}const Ft="$and",Ut="$or",Wt="$path",Ht="$val",Vt=e=>!(!e[Ft]&&!e[Ut]),$t=e=>({[Ft]:Object.keys(e).map(t=>({[t]:e[t]}))});function qt(e,t){let{auto:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e=>{let a=Object.keys(e);const o=(e=>!!e[Wt])(e);if(!o&&a.length>1&&!Vt(e))return r($t(e));if((e=>!ot(e)&&ct(e)&&!Vt(e))(e)){const r=o?e[Wt]:a[0],i=o?e[Ht]:e[r];if(!it(i))throw new Error((e=>"Invalid value for key ".concat(e))(r));const s={keyId:xt(r),pattern:i};return n&&(s.searcher=Bt(i,t)),s}let i={children:[],operator:a[0]};return a.forEach(t=>{const n=e[t];ot(n)&&n.forEach(e=>{i.children.push(r(e))})}),i};return Vt(e)||(e=$t(e)),r(e)}function Qt(e,t){const n=e.matches;t.matches=[],ut(n)&&n.forEach(e=>{if(!ut(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let a={indices:n,value:r};e.key&&(a.key=e.key.src),e.idx>-1&&(a.refIndex=e.idx),t.matches.push(a)})}function Kt(e,t){t.score=e.score}class Gt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.options=Fe(Fe({},yt),t),this.options.useExtendedSearch,this._keyStore=new pt(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof wt))throw new Error("Incorrect 'index' type");this._myIndex=t||kt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){ut(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1;const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const a=this._docs[n];e(a,n)&&(this.removeAt(n),n-=1,r-=1,t.push(a))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e){let{limit:t=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeMatches:n,includeScore:r,shouldSort:a,sortFn:o,ignoreFieldNorm:i}=this.options;let s=it(e)?it(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,t){let{ignoreFieldNorm:n=yt.ignoreFieldNorm}=t;e.forEach(e=>{let t=1;e.matches.forEach(e=>{let{key:r,norm:a,score:o}=e;const i=r?r.weight:null;t*=Math.pow(0===o&&i?Number.EPSILON:o,(i||1)*(n?1:a))}),e.score=t})}(s,{ignoreFieldNorm:i}),a&&s.sort(o),st(t)&&t>-1&&(s=s.slice(0,t)),function(e,t){let{includeMatches:n=yt.includeMatches,includeScore:r=yt.includeScore}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=[];return n&&a.push(Qt),r&&a.push(Kt),e.map(e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return a.length&&a.forEach(t=>{t(e,r)}),r})}(s,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=Bt(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(e=>{let{v:n,i:a,n:o}=e;if(!ut(n))return;const{isMatch:i,score:s,indices:l}=t.searchIn(n);i&&r.push({item:n,idx:a,matches:[{score:s,value:n,norm:o,indices:l}]})}),r}_searchLogical(e){const t=qt(e,this.options),n=(e,t,r)=>{if(!e.children){const{keyId:n,searcher:a}=e,o=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:a});return o&&o.length?[{idx:r,item:t,matches:o}]:[]}const a=[];for(let o=0,i=e.children.length;o<i;o+=1){const i=e.children[o],s=n(i,t,r);if(s.length)a.push(...s);else if(e.operator===Ft)return[]}return a},r=this._myIndex.records,a={},o=[];return r.forEach(e=>{let{$:r,i:i}=e;if(ut(r)){let e=n(t,r,i);e.length&&(a[i]||(a[i]={idx:i,item:r,matches:[]},o.push(a[i])),e.forEach(e=>{let{matches:t}=e;a[i].matches.push(...t)}))}}),o}_searchObjectList(e){const t=Bt(e,this.options),{keys:n,records:r}=this._myIndex,a=[];return r.forEach(e=>{let{$:r,i:o}=e;if(!ut(r))return;let i=[];n.forEach((e,n)=>{i.push(...this._findMatches({key:e,value:r[n],searcher:t}))}),i.length&&a.push({idx:o,item:r,matches:i})}),a}_findMatches(e){let{key:t,value:n,searcher:r}=e;if(!ut(n))return[];let a=[];if(ot(n))n.forEach(e=>{let{v:n,i:o,n:i}=e;if(!ut(n))return;const{isMatch:s,score:l,indices:c}=r.searchIn(n);s&&a.push({score:l,key:t,value:n,idx:o,norm:i,indices:c})});else{const{v:e,n:o}=n,{isMatch:i,score:s,indices:l}=r.searchIn(e);i&&a.push({score:s,key:t,value:e,norm:o,indices:l})}return a}}Gt.version="7.1.0",Gt.createIndex=kt,Gt.parseIndex=function(e){let{getFn:t=yt.getFn,fieldNormWeight:n=yt.fieldNormWeight}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{keys:r,records:a}=e,o=new wt({getFn:t,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(a),o},Gt.config=yt,Gt.parseQuery=qt,function(){It.push(...arguments)}(zt);const Xt=e=>{let{value:n,onChange:r,placeholder:a="Ketik nama produk...",className:o="",disabled:i=!1}=e;const[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!0),[d,f]=(0,t.useState)(-1),[h,p]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{u(!0);try{const e=localStorage.getItem("access_token"),t=await fetch("/api/products/all",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch products");const n=await t.json();l(n);const r=new Gt(n,{keys:["name"],threshold:.3,distance:100,minMatchCharLength:1});p(r)}catch(e){console.error("Failed to fetch products:",e)}finally{u(!1)}})()},[]);const m=(0,t.useMemo)(()=>{if(!n||!h)return s.slice(0,10);return h.search(n).map(e=>e.item).slice(0,10)},[n,h,s]);return c?(0,Ee.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Ee.jsxs)("svg",{className:"animate-spin h-5 w-5 mx-auto text-amber-500",fill:"none",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ee.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Ee.jsx)("div",{className:"mt-2 text-sm",children:"Loading produk..."})]}):0===m.length?(0,Ee.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Ee.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Ee.jsx)("div",{className:"text-sm",children:n?"Produk tidak ditemukan":"Belum ada produk"}),n&&(0,Ee.jsxs)("button",{onClick:()=>r(n),className:"mt-2 text-xs text-amber-600 hover:text-amber-700",children:['Tambah "',n,'" sebagai produk baru']})]}):(0,Ee.jsxs)("div",{className:"p-2 max-h-80 overflow-y-auto",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:n?"\ud83d\udd0d ".concat(m.length," hasil:"):"\ud83d\udd25 Produk Sering Dibeli:"}),(0,Ee.jsx)("div",{className:"space-y-0.5",children:m.map((e,t)=>{return(0,Ee.jsxs)("button",{onClick:()=>(e=>{r(e.name,e)})(e),className:"w-full px-3 py-2 text-left hover:bg-amber-50 flex items-center justify-between rounded transition-colors ".concat(t===d?"bg-amber-50":""),children:[(0,Ee.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ee.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,Ee.jsx)("div",{className:"text-xs text-gray-500",children:e.unit})]})]}),e.last_price&&(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:(n=e.last_price,n?n>=1e6?"".concat((n/1e6).toFixed(1),"jt"):n>=1e3?"".concat(Math.round(n/1e3),"rb"):n.toString():"")})]},"".concat(e.name,"-").concat(e.unit,"-").concat(t));var n})})]})},Jt=e=>{let{value:n,onChange:r,placeholder:a="Ketik nama supplier...",className:o="",disabled:i=!1}=e;const[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!0),[d,f]=(0,t.useState)(-1),[h,p]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{u(!0);try{const e=localStorage.getItem("access_token"),t=await fetch("/api/suppliers/all",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch suppliers");const n=await t.json();l(n);const r=new Gt(n,{keys:["name"],threshold:.3,distance:100,minMatchCharLength:1});p(r)}catch(e){console.error("Failed to fetch suppliers:",e)}finally{u(!1)}})()},[]);const m=(0,t.useMemo)(()=>{if(!n||!h)return s.slice(0,10);return h.search(n).map(e=>e.item).slice(0,10)},[n,h,s]);return c?(0,Ee.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Ee.jsxs)("svg",{className:"animate-spin h-5 w-5 mx-auto text-amber-500",fill:"none",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ee.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Ee.jsx)("div",{className:"mt-2 text-sm",children:"Loading supplier..."})]}):0===m.length?(0,Ee.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Ee.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Ee.jsx)("div",{className:"text-sm",children:n?"Supplier tidak ditemukan":"Belum ada supplier"}),n&&(0,Ee.jsxs)("button",{onClick:()=>r(n),className:"mt-2 text-xs text-amber-600 hover:text-amber-700",children:['Tambah "',n,'" sebagai supplier baru']})]}):(0,Ee.jsxs)("div",{className:"p-2 max-h-80 overflow-y-auto",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:n?"\ud83c\udfe2 ".concat(m.length," hasil:"):"\ud83d\udd25 Supplier Sering Dipakai:"}),(0,Ee.jsx)("div",{className:"space-y-0.5",children:m.map((e,t)=>(0,Ee.jsx)("button",{onClick:()=>(e=>{r(e.name)})(e),className:"w-full px-3 py-2 text-left hover:bg-amber-50 flex items-center justify-between rounded transition-colors ".concat(t===d?"bg-amber-50":""),children:(0,Ee.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ee.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("div",{className:"font-medium text-sm",children:e.name}),e.contact&&(0,Ee.jsx)("div",{className:"text-xs text-gray-500",children:e.contact})]})]})},"".concat(e.name,"-").concat(t)))})]})};var Yt=n(749),Zt=n.n(Yt);const en=e=>{let{isOpen:n,productId:r,productName:a,onClose:o,onSuccess:i}=e;const[s,l]=(0,t.useState)("choose"),[c,u]=(0,t.useState)(""),[d,f]=(0,t.useState)(!1),[h,p]=(0,t.useState)(""),[m,g]=(0,t.useState)(!1),[x,v]=(0,t.useState)("none"),[y,b]=(0,t.useState)(""),[w,k]=(0,t.useState)(null),[j,N]=(0,t.useState)(""),[_,S]=(0,t.useState)(!1),C=(0,t.useRef)(!0),M=(0,t.useRef)(!1),E=(0,t.useRef)(null);(0,t.useEffect)(()=>{n?(l("choose"),u(""),p(""),b(""),g(!1),k(null),N(""),S(!1),C.current=!0,M.current=!1):(P(),C.current=!1)},[n]),(0,t.useEffect)(()=>()=>{C.current=!1,P()},[]);const P=()=>{try{Zt().stop(),Zt().offDetected(),Zt().offProcessed(),console.log("\ud83d\uded1 [BarcodeModal] Quagga stopped")}catch(e){}},R=()=>{try{const e=document.querySelector("#barcode-scanner-container video");if(e&&e.srcObject){const t=e.srcObject.getVideoTracks()[0];t&&(async e=>{try{const t=e.getCapabilities();console.log("\ud83d\udcf7 [BarcodeModal] Camera capabilities:",t);const n={advanced:[]};if(t.torch&&(n.advanced.push({torch:!1}),console.log("\ud83d\udd26 [BarcodeModal] Torch disabled")),t.focusMode)if(t.focusMode.includes("manual")&&t.focusDistance){const e=.15,r=t.focusDistance.min||0,a=t.focusDistance.max||1,o=Math.max(r,Math.min(a,e));n.advanced.push({focusMode:"manual"}),n.advanced.push({focusDistance:o}),console.log("\ud83c\udfaf [BarcodeModal] Manual focus set to:",o)}else t.focusMode.includes("single-shot")?(n.advanced.push({focusMode:"single-shot"}),console.log("\ud83c\udfaf [BarcodeModal] Using single-shot focus (fallback)")):t.focusMode.includes("continuous")&&(n.advanced.push({focusMode:"continuous"}),console.log("\ud83c\udfaf [BarcodeModal] Using continuous focus (last resort)"));n.advanced.length>0&&(await e.applyConstraints(n),console.log("\u2705 [BarcodeModal] Camera constraints applied:",n.advanced)),E.current=e}catch(t){console.warn("\u26a0\ufe0f [BarcodeModal] Could not apply focus settings:",t)}})(t)}}catch(e){console.warn("\u26a0\ufe0f [BarcodeModal] Could not apply focus to Quagga stream:",e)}},O=e=>e?/^\d+$/.test(e)?13!==e.length?{valid:!1,message:"Barcode harus 13 digit (EAN-13). Terdeteksi ".concat(e.length," digit.")}:{valid:!0,message:""}:{valid:!1,message:"Barcode harus berupa angka saja"}:{valid:!1,message:"Barcode kosong"},A=async()=>{b(""),v("none"),k(null),N(""),S(!0),M.current=!1,console.log("\ud83d\udd27 [BarcodeModal] Initializing Quagga2 scanner..."),console.log("\ud83d\udd27 [BarcodeModal] User Agent:",navigator.userAgent);try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return console.error("\u274c [BarcodeModal] No mediaDevices support"),b("Browser tidak mendukung akses kamera."),void S(!1);try{const e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind);console.log("\ud83d\udcf7 [BarcodeModal] Available cameras:",e.length,e.map(e=>e.label||"unnamed"))}catch(e){console.warn("\u26a0\ufe0f [BarcodeModal] Could not enumerate devices:",e)}if(await new Promise(e=>setTimeout(e,100)),!C.current)return;const t=document.querySelector("#barcode-scanner-container");console.log("\ud83d\udcf7 [BarcodeModal] Target element:",t?"found":"NOT FOUND"),Zt().init({inputStream:{name:"Live",type:"LiveStream",target:t,constraints:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},area:{top:"5%",right:"5%",left:"5%",bottom:"10%"}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:Math.min(navigator.hardwareConcurrency||2,4),frequency:10,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"],multiple:!1},locate:!0},async e=>{var t;if(e)return console.error("\u274c [BarcodeModal] Quagga init error:",e),"NotAllowedError"===e.name||null!==(t=e.message)&&void 0!==t&&t.includes("Permission")?b("Akses kamera ditolak. Izinkan akses kamera di pengaturan browser."):"NotFoundError"===e.name?b("Kamera tidak ditemukan."):b("Gagal mengakses kamera: ".concat(e.message||"Unknown error")),void S(!1);console.log("\u2705 [BarcodeModal] Quagga initialized"),R(),Zt().start(),console.log("\ud83d\ude80 [BarcodeModal] Quagga started"),C.current&&(g(!0),S(!1))});let n=0;Zt().onProcessed(e=>{if(C.current&&!M.current){var t,r;if(n++,n%30===0)console.log("\ud83d\udcf9 [BarcodeModal] Frame ".concat(n,": processing..."),null!==e&&void 0!==e&&null!==(t=e.boxes)&&void 0!==t&&t.length?"".concat(e.boxes.length," boxes"):"no boxes",null!==e&&void 0!==e&&null!==(r=e.codeResult)&&void 0!==r&&r.code?"code: ".concat(e.codeResult.code):"");if(e)if(e.boxes&&e.boxes.length>0){const t=e.boxes[0];t&&t.length>=4&&e.codeResult&&e.codeResult.code?v("ready"):v("detecting")}else v("none")}});let r=0;Zt().onDetected(e=>{var t,n;if(!C.current||M.current)return;r++;const a=e.codeResult.code,o=e.codeResult.format;if(console.log("\ud83d\udd0d [BarcodeModal] Detection #".concat(r,": code=").concat(a,", format=").concat(o)),!a)return;const i=(null===(t=e.codeResult.decodedCodes)||void 0===t||null===(n=t.filter(e=>void 0!==e.error))||void 0===n?void 0:n.map(e=>e.error))||[],s=i.length>0?i.reduce((e,t)=>e+t,0)/i.length:1;if(s<.35){console.log("\ud83c\udfaf [BarcodeModal] BARCODE DETECTED:",a,"confidence:",(100*(1-s)).toFixed(0)+"%"),M.current=!0,P(),g(!1),navigator.vibrate&&navigator.vibrate(200);const e=O(a);k(a),e.valid?I(a):N(e.message)}else console.log("\u26a0\ufe0f [BarcodeModal] Detection rejected:",a,"error:",s.toFixed(2),"confidence:",(100*(1-s)).toFixed(0)+"%")})}catch(t){console.error("\u274c [BarcodeModal] Scanner error:",t),b("Gagal memulai scanner."),S(!1)}},D=async e=>{l(e),p(""),N(""),k(null),"scan"===e&&await A()},T=()=>{P(),g(!1),b(""),l("choose"),u(""),p(""),k(null),N("")},L=async()=>{k(null),N(""),M.current=!1,await A()},z=()=>{l("manual"),k(null),N(""),w&&u(w)},I=async e=>{const t=O(e);if(t.valid){f(!0),p("");try{const t=localStorage.getItem("access_token"),n=await fetch("/api/products/".concat(r,"/barcode"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({barcode:e})});if(!n.ok){const e=await n.json();throw new Error(e.detail||"Gagal menyimpan barcode")}i(e)}catch(n){console.error("[BarcodeModal] Submit error:",n),p(n.message||"Gagal menyimpan barcode")}finally{f(!1)}}else p(t.message)},B=()=>{switch(x){case"ready":return"border-green-500";case"detecting":return"border-yellow-500";default:return"border-red-500"}},F=()=>{switch(x){case"ready":return"rgba(34, 197, 94, 0.8)";case"detecting":return"rgba(234, 179, 8, 0.6)";default:return"rgba(239, 68, 68, 0.4)"}};return n?"scan"===s?(0,Ee.jsxs)("div",{className:"fixed inset-0 z-[200] bg-gray-900 flex flex-col",children:[(0,Ee.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center gap-3",children:[(0,Ee.jsx)("button",{onClick:T,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors active:bg-gray-200",children:(0,Ee.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsx)("h1",{className:"font-semibold text-lg",children:"Daftarkan Barcode"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-500 truncate",children:a})]}),(0,Ee.jsx)("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ee.jsxs)("div",{className:"flex-1 relative bg-black",children:[(0,Ee.jsx)("div",{id:"barcode-scanner-container",className:"absolute inset-0",style:{overflow:"hidden"}}),y&&(0,Ee.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white p-6 z-10 bg-black",children:(0,Ee.jsxs)("div",{className:"text-center max-w-md",children:[(0,Ee.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,Ee.jsx)("p",{className:"mb-4",children:y}),(0,Ee.jsxs)("button",{onClick:A,className:"px-6 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 active:bg-amber-700 transition-colors flex items-center gap-2 mx-auto",children:[(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Coba Lagi"]})]})}),_&&(0,Ee.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white z-10 bg-black",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsxs)("svg",{className:"w-12 h-12 mx-auto mb-3 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Ee.jsx)("p",{children:"Memulai scanner..."})]})}),m&&!w&&(0,Ee.jsx)("div",{className:"absolute inset-0 pointer-events-none z-10",children:(0,Ee.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"relative transition-all duration-200",style:{width:"85vw",height:"60vh",maxWidth:"500px",maxHeight:"400px",boxShadow:"0 0 20px ".concat(F())},children:[(0,Ee.jsx)("div",{className:"absolute top-0 left-0 w-10 h-10 border-t-4 border-l-4 ".concat(B()," transition-colors")}),(0,Ee.jsx)("div",{className:"absolute top-0 right-0 w-10 h-10 border-t-4 border-r-4 ".concat(B()," transition-colors")}),(0,Ee.jsx)("div",{className:"absolute bottom-0 left-0 w-10 h-10 border-b-4 border-l-4 ".concat(B()," transition-colors")}),(0,Ee.jsx)("div",{className:"absolute bottom-0 right-0 w-10 h-10 border-b-4 border-r-4 ".concat(B()," transition-colors")}),"ready"===x&&(0,Ee.jsx)("div",{className:"absolute left-2 right-2 h-0.5 bg-green-500",style:{boxShadow:"0 0 10px rgba(34, 197, 94, 0.8)",animation:"scanLine 1s ease-in-out infinite"}})]})})}),w&&j&&(0,Ee.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-30 bg-black/80",children:(0,Ee.jsx)("div",{className:"bg-white rounded-xl p-6 mx-4 max-w-sm w-full shadow-2xl",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("svg",{className:"w-10 h-10 mx-auto mb-3 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,Ee.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Barcode Tidak Valid"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:j}),(0,Ee.jsx)("p",{className:"text-xs text-gray-400 mb-4 font-mono",children:w}),(0,Ee.jsxs)("div",{className:"flex gap-2",children:[(0,Ee.jsx)("button",{onClick:L,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Scan Ulang"}),(0,Ee.jsx)("button",{onClick:z,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Input Manual"})]})]})})}),d&&(0,Ee.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-30 bg-black/80",children:(0,Ee.jsx)("div",{className:"bg-white rounded-xl p-6 mx-4 max-w-sm w-full shadow-2xl",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsxs)("svg",{className:"animate-spin w-8 h-8 mx-auto mb-3 text-gray-600",fill:"none",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ee.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600",children:"Menyimpan barcode..."})]})})}),(0,Ee.jsx)("style",{children:"\n            @keyframes scanLine {\n              0% { top: 10%; }\n              50% { top: 90%; }\n              100% { top: 10%; }\n            }\n\n            #barcode-scanner-container video {\n              width: 100% !important;\n              height: 100% !important;\n              object-fit: cover !important;\n            }\n\n            #barcode-scanner-container canvas {\n              display: none !important;\n            }\n          "}),m&&!w&&(0,Ee.jsxs)("div",{className:"absolute top-4 left-4 right-14 bg-black/60 backdrop-blur-sm rounded-lg p-3 text-white text-xs z-20",children:[(0,Ee.jsx)("p",{className:"font-semibold mb-1",children:"\ud83d\udcf7 Barcode Scanner"}),(0,Ee.jsxs)("ul",{className:"space-y-0.5 opacity-80",children:[(0,Ee.jsx)("li",{children:"\u2022 Posisikan barcode di dalam kotak"}),(0,Ee.jsxs)("li",{children:["\u2022 ",(0,Ee.jsx)("strong",{children:"Jarak tepat: 15cm"})," dari kamera"]}),(0,Ee.jsxs)("li",{children:["\u2022 ",(0,Ee.jsx)("span",{className:"text-red-400",children:"Merah"})," = tidak ada, ",(0,Ee.jsx)("span",{className:"text-yellow-400",children:"Kuning"})," = mendekat, ",(0,Ee.jsx)("span",{className:"text-green-400",children:"Hijau"})," = siap!"]})]})]}),m&&!w&&(0,Ee.jsx)("button",{onClick:()=>{const e="8997032821272";console.log("\ud83e\uddea [BarcodeModal] Manual test with barcode:",e),M.current=!0,P(),g(!1),navigator.vibrate&&navigator.vibrate(200);const t=O(e);k(e),t.valid?I(e):N(t.message)},className:"absolute top-4 right-4 px-3 py-1.5 bg-yellow-500 text-black text-xs font-medium rounded-lg z-30 shadow-lg",children:"\ud83e\uddea Test"}),m&&!w&&(0,Ee.jsx)("div",{className:"absolute bottom-32 left-0 right-0 text-center text-white z-20",children:(0,Ee.jsx)("div",{className:"inline-block px-6 py-3 rounded-full backdrop-blur-sm ".concat("ready"===x?"bg-green-500/60":"detecting"===x?"bg-yellow-500/60":"bg-black/60"),children:(0,Ee.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ee.jsx)("div",{className:"w-2 h-2 rounded-full animate-pulse ".concat("ready"===x||"detecting"===x?"bg-white":"bg-red-500")}),(0,Ee.jsx)("p",{className:"text-sm font-medium",children:"ready"===x?"Siap scan!":"detecting"===x?"Mendekat...":"Cari barcode..."})]})})})]}),(0,Ee.jsx)("div",{className:"bg-white border-t border-gray-200 p-4",children:(0,Ee.jsxs)("div",{className:"flex gap-3",children:[(0,Ee.jsx)("button",{onClick:T,className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 active:bg-gray-100 transition-colors font-medium",children:"Kembali"}),(0,Ee.jsx)("button",{onClick:z,className:"flex-1 px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-700 active:bg-gray-900 transition-colors font-medium",children:"Input Manual"})]})})]}):(0,Ee.jsx)("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/50",onClick:e=>{e.target===e.currentTarget&&"scan"!==s&&o()},children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md mx-4 overflow-hidden shadow-2xl",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,Ee.jsxs)("div",{className:"flex items-center gap-2",children:["manual"===s&&(0,Ee.jsx)("button",{onClick:T,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ee.jsx)("h3",{className:"font-semibold text-lg",children:"choose"===s?"Daftarkan Barcode":"Ketik Barcode"})]}),(0,Ee.jsx)("button",{onClick:o,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ee.jsxs)("div",{className:"p-4",children:["choose"===s&&(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("p",{className:"text-gray-600 mb-4",children:a}),(0,Ee.jsxs)("div",{className:"flex gap-3",children:[(0,Ee.jsxs)("button",{onClick:()=>D("scan"),className:"flex-1 py-4 px-4 border-2 border-gray-200 rounded-xl hover:border-gray-400 hover:bg-gray-50 transition-all flex flex-col items-center gap-2",children:[(0,Ee.jsx)("span",{className:"text-2xl",children:"\ud83d\udcf7"}),(0,Ee.jsx)("span",{className:"font-medium text-sm",children:"Scan"})]}),(0,Ee.jsxs)("button",{onClick:()=>D("manual"),className:"flex-1 py-4 px-4 border-2 border-gray-200 rounded-xl hover:border-gray-400 hover:bg-gray-50 transition-all flex flex-col items-center gap-2",children:[(0,Ee.jsx)("span",{className:"text-2xl",children:"\u2328\ufe0f"}),(0,Ee.jsx)("span",{className:"font-medium text-sm",children:"Ketik Manual"})]})]})]}),"manual"===s&&(0,Ee.jsxs)("form",{onSubmit:e=>{e.preventDefault(),I(c.trim())},children:[(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:["Produk: ",(0,Ee.jsx)("span",{className:"font-medium",children:a})]}),(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Masukkan kode barcode (13 digit):"}),(0,Ee.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:c,onChange:e=>u(e.target.value.replace(/\D/g,"")),placeholder:"8991234567890",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-400 text-center font-mono text-lg",maxLength:13,autoFocus:!0,disabled:d}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Format EAN-13: Harus tepat 13 digit angka"}),c&&13!==c.length&&(0,Ee.jsxs)("p",{className:"text-xs text-yellow-600 mt-1",children:[c.length," digit dimasukkan, butuh ",13-c.length," digit lagi"]})]}),h&&(0,Ee.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,Ee.jsx)("p",{className:"text-sm text-red-700",children:h})}),(0,Ee.jsx)("button",{type:"submit",disabled:d||!c||13!==c.length,className:"w-full py-3 bg-gray-800 text-white rounded-lg font-medium hover:bg-gray-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:d?(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ee.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Menyimpan..."]}):(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("span",{children:"\u2705"}),"Simpan Barcode"]})})]})]})]})}):null},tn=()=>(0,Ee.jsxs)("div",{className:"flex gap-1",children:[(0,Ee.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"1.4s"}}),(0,Ee.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"200ms",animationDuration:"1.4s"}}),(0,Ee.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"400ms",animationDuration:"1.4s"}})]}),nn=e=>{let{activeTenant:n,onBack:r,isMobile:a=!1}=e;const o=ee(),i=Y(),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)([]),[d,f]=(0,t.useState)(!1),[h,p]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1),[x,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(!1),[w,k]=(0,t.useState)(""),[j,N]=(0,t.useState)(""),[_,S]=(0,t.useState)(null);(0,t.useEffect)(()=>{const e=new URLSearchParams(i.search);if("openPurchaseForm"===e.get("action")){const t=i.state;console.log("[ChatPanel] openPurchaseForm action, state:",t),"purchase"===(null===t||void 0===t?void 0:t.action)&&null!==t&&void 0!==t&&t.productData&&(console.log("[ChatPanel] Setting scannedProductData:",t.productData),S(t.productData)),v(!0),e.delete("action");const n=e.toString();o(i.pathname+(n?"?"+n:""),{replace:!0,state:{}})}},[i.search,i.pathname,o,i.state]);const[C,M]=(0,t.useState)(!1),[E,P]=(0,t.useState)(!1),[R,O]=(0,t.useState)(!1),[A,D]=(0,t.useState)(!1),[T,L]=(0,t.useState)(""),[z,I]=(0,t.useState)(""),[B,F]=(0,t.useState)(""),U=(0,t.useRef)(""),W=(0,t.useRef)(null),H=(0,t.useRef)(null),V=(0,t.useRef)(null);(0,t.useEffect)(()=>{const e=e=>{const t=e.target;if(console.log("[ChatPanel] Click detected on:",t.tagName,t.className),t.classList.contains("barcode-register-btn")){e.preventDefault(),e.stopPropagation();const n=t.getAttribute("data-product-id"),r=t.getAttribute("data-product-name");console.log("[ChatPanel] Barcode button clicked! ProductId:",n,"ProductName:",r),n&&r&&""!==n.trim()&&"None"!==n&&""!==r.trim()?(console.log("[ChatPanel] Opening barcode modal..."),k(n),N(r),b(!0)):(console.error("[ChatPanel] Missing or invalid productId/productName:",{productId:n,productName:r}),alert("\u26a0\ufe0f Product ID tidak tersedia.\n\nFitur registrasi barcode hanya tersedia untuk produk yang sudah terdaftar di sistem.\n\nSaran: Produk ini kemungkinan baru pertama kali dibeli. Lakukan pembelian lagi untuk produk yang sama, maka barcode bisa didaftarkan."))}},t=H.current;return t?(console.log("[ChatPanel] Adding barcode click listener to container"),t.addEventListener("click",e)):console.warn("[ChatPanel] Messages container ref not available"),()=>{t&&(console.log("[ChatPanel] Removing barcode click listener"),t.removeEventListener("click",e))}},[]);const $=["kulakan","kulak","beli","belanja"],q=["karton","dus","box","slop","bal","koli","pack","lusin"],Q=["pcs","unit","buah","biji","butir","lembar","batang","bungkus","sachet","botol"],K=e=>{var t;const n="".concat(s.trim()," ").concat(e," harga ");l(n),F(e),O(!1),U.current=n,null===(t=V.current)||void 0===t||t.focus()};(0,t.useEffect)(()=>{(async()=>{if(console.log("[ChatPanel] \ud83d\udccb loadChatHistory called, activeTenant:",null===n||void 0===n?void 0:n.id),!n||"milky-assistant"===n.id)return console.log("[ChatPanel] \u23ed\ufe0f Skipping: no tenant or milky-assistant"),void u([]);const e=Se(),t=Ce();if(console.log("[ChatPanel] \ud83d\udd11 Auth check:",{userId:e,isAuth:t,hasToken:!!localStorage.getItem("access_token")}),!e||!t)return console.log("[ChatPanel] \u26a0\ufe0f Not authenticated, skipping history load"),void u([]);p(!0),console.log("[ChatPanel] \ud83d\udd04 Loading history for:",{userId:e,tenantId:n.id});try{var r,a,o,i,s,l;const t=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const a=await He("/chat/history?user_id=".concat(e,"&tenant_id=").concat(t,"&limit=").concat(n,"&offset=").concat(r),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok){let e="Failed to fetch chat history: ".concat(a.status);try{const t=await a.text();t&&(e+=" - ".concat(t.substring(0,200)))}catch(mn){}throw new Error(e)}const o=await a.text();let i;console.log("[fetchChatHistory] Raw response text:",o.substring(0,500));try{i=JSON.parse(o)}catch(mn){throw console.error("[fetchChatHistory] Failed to parse JSON:",mn),console.error("[fetchChatHistory] Response text:",o),new Error("Invalid JSON response: ".concat(o.substring(0,200)))}return console.log("[fetchChatHistory] Parsed response:",i),"success"===i.status&&i.data?i.data:i.messages?{messages:i.messages,total_count:i.total_count||i.messages.length,has_more:i.has_more||!1,limit:n,offset:r}:i.messages||i.data?i:(console.warn("[fetchChatHistory] No messages in response:",i),{messages:[],total_count:0,has_more:!1,limit:n,offset:r})}(e,n.id,50,0);console.log("[ChatPanel] \u2705 History response:",{messageCount:(null===t||void 0===t||null===(r=t.messages)||void 0===r?void 0:r.length)||0,totalCount:null===t||void 0===t?void 0:t.total_count,hasMore:null===t||void 0===t?void 0:t.has_more,firstMsgId:null===t||void 0===t||null===(a=t.messages)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.id,lastMsgId:null===t||void 0===t||null===(i=t.messages)||void 0===i||null===(s=i[(null===t||void 0===t||null===(l=t.messages)||void 0===l?void 0:l.length)-1])||void 0===s?void 0:s.id});const c=[];[...t.messages||[]].reverse().forEach(e=>{let t="Now";if(e.created_at)try{const n="number"===typeof e.created_at?e.created_at:parseInt(e.created_at,10);if(!isNaN(n)&&n>0){t=(n<1e10?new Date(1e3*n):new Date(n)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}}catch(mn){console.warn("[ChatPanel] Failed to parse timestamp:",e.created_at,mn)}c.push({id:"".concat(e.id,"-user"),sender:"user",content:e.message||"",timestamp:t}),e.response&&c.push({id:"".concat(e.id,"-assistant"),sender:"assistant",content:e.response,timestamp:t})}),console.log("[ChatPanel] Transformed messages:",c.length),u(c)}catch(c){console.error("[ChatPanel] \u274c Failed to load chat history:",c),console.error("[ChatPanel] Error details:",c.message,c.stack),console.error("[ChatPanel] Auth state:",{hasToken:!!localStorage.getItem("access_token"),userId:Se(),isAuth:Ce()}),u([])}finally{p(!1)}})()},[null===n||void 0===n?void 0:n.id]);const G=()=>{H.current&&setTimeout(()=>{var e;null===(e=H.current)||void 0===e||e.scrollTo({top:H.current.scrollHeight,behavior:"smooth"})},100)};(0,t.useEffect)(()=>{G()},[c]),(0,t.useEffect)(()=>{if(V.current){V.current.style.height="auto";const e=V.current.scrollHeight,t=120,n=Math.min(e,t);V.current.style.height="".concat(n,"px"),V.current.style.overflowY=e>t?"auto":"hidden"}},[s]);const X=async()=>{if(!s.trim()||!n||d)return;const e=s.trim();l("");const t={id:Date.now().toString(),sender:"user",content:e,timestamp:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};u(e=>[...e,t]),g(!0),f(!0);try{if(Ce()){const t=await $e(n.id,e);g(!1);const r={id:Date.now().toString(),sender:"assistant",content:t.milky_response||t.message||"Maaf, terjadi kesalahan.",timestamp:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};u(e=>[...e,r])}else{g(!1);const e={id:Date.now().toString(),sender:"assistant",content:"Silakan login terlebih dahulu.",timestamp:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};u(t=>[...t,e])}}catch(r){console.error("Error sending message:",r),g(!1),u(e=>[...e,{id:Date.now().toString(),sender:"assistant",content:"Maaf, terjadi kesalahan. Silakan coba lagi.",timestamp:"Now"}])}finally{f(!1)}};return n?(0,Ee.jsxs)("div",{className:"flex flex-col w-full bg-white ".concat(a?"h-screen":"h-full"),style:a?{height:"100dvh",width:"100vw",maxWidth:"100vw",overflow:"hidden",position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#ffffff",isolation:"isolate"}:{backgroundColor:"#ffffff"},children:[(0,Ee.jsx)("div",{className:"flex items-center justify-between px-4 border-b border-gray-200 bg-white ".concat(a?"fixed top-0 left-0 right-0 z-50":""),style:a?{height:"calc(60px + env(safe-area-inset-top))",paddingTop:"env(safe-area-inset-top)",width:"100vw",maxWidth:"100vw",boxSizing:"border-box",position:"fixed",top:0,left:0,right:0,zIndex:50,backgroundColor:"#ffffff"}:{height:"60px",backgroundColor:"#ffffff"},children:(0,Ee.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ee.jsx)("button",{onClick:r,className:"md:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Back to tenant list",children:(0,Ee.jsx)("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("h2",{className:"text-base font-medium text-gray-900",children:n.name}),"online"===n.status&&(0,Ee.jsx)("p",{className:"text-xs text-gray-500",children:"Online"})]})]})}),(0,Ee.jsxs)("div",{ref:H,className:"flex-1 overflow-y-auto space-y-3 bg-white ".concat(a?"":"py-4"),style:a?{position:"absolute",top:"calc(60px + env(safe-area-inset-top))",bottom:"calc(48px + 24px + env(safe-area-inset-bottom))",left:0,right:0,width:"100vw",maxWidth:"100vw",overflowX:"hidden",overflowY:"auto",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"20px",paddingRight:"20px",backgroundColor:"#ffffff",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"}:{paddingTop:"16px",paddingBottom:"16px",paddingLeft:"20px",paddingRight:"20px",backgroundColor:"#ffffff"},children:[h&&(0,Ee.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,Ee.jsxs)("div",{className:"flex gap-3 animate-pulse",children:[(0,Ee.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex-shrink-0"}),(0,Ee.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,Ee.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,Ee.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},e))}),!h&&0===c.length&&n&&"milky-assistant"!==n.id&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 py-12",children:[(0,Ee.jsx)("svg",{className:"w-16 h-16 mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,Ee.jsx)("p",{className:"text-sm text-gray-500",children:"Belum ada pesan"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Mulai percakapan dengan mengirim pesan"})]}),!h&&c.map(e=>(0,Ee.jsx)("div",{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"," ").concat("user"===e.sender?"pr-2":"pl-2"),children:(0,Ee.jsxs)("div",{className:"max-w-[80%] px-4 py-2.5 rounded-lg ".concat("user"===e.sender?"bg-yellow-100 text-gray-900 shadow-sm":"bg-white text-gray-900 shadow-sm border border-gray-200"),children:[e.content.includes("<table")||e.content.includes("<div")?(0,Ee.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content},className:"text-sm text-left"}):(0,Ee.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words text-left",children:e.content}),(0,Ee.jsx)("p",{className:"text-xs mt-1 text-left ".concat("user"===e.sender?"text-gray-600":"text-gray-500"),children:e.timestamp})]})},e.id)),m&&(0,Ee.jsx)("div",{className:"flex justify-start pl-2",children:(0,Ee.jsx)("div",{className:"max-w-[80%] px-4 py-3 rounded-lg bg-white shadow-sm border border-gray-200",children:(0,Ee.jsx)(tn,{})})}),(0,Ee.jsx)("div",{ref:W,style:{height:"1px"}})]}),(0,Ee.jsx)("div",{className:"bg-white border-t border-gray-200 ".concat(a?"fixed bottom-0 left-0 right-0 z-50":""),style:a?{padding:"12px 16px",paddingBottom:"max(12px, env(safe-area-inset-bottom))",width:"100vw",maxWidth:"100vw",boxSizing:"border-box",position:"fixed",bottom:0,left:0,right:0,zIndex:50,backgroundColor:"#ffffff"}:{padding:"12px 16px",paddingBottom:"12px",backgroundColor:"#ffffff"},children:(0,Ee.jsxs)("div",{className:"flex items-end gap-0",children:[(0,Ee.jsxs)("div",{className:"relative flex-1",children:[C&&(0,Ee.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-60 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:(0,Ee.jsx)(Xt,{value:T,onChange:(e,t)=>{t&&(e=>{var t;const n=s.toLowerCase(),r=$.find(e=>n.startsWith(e))||"Kulakan",a="".concat(r.charAt(0).toUpperCase()+r.slice(1)," ").concat(e," sejumlah ");l(a),M(!1),null===(t=V.current)||void 0===t||t.focus()})(t.name)},placeholder:"",disabled:!1})}),R&&(0,Ee.jsxs)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-48 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-2",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:"Pilih Satuan:"}),(0,Ee.jsx)("div",{className:"text-xs font-semibold text-gray-600 px-2 py-1",children:"Wholesales:"}),q.map(e=>(0,Ee.jsx)("button",{onClick:()=>K(e),className:"w-full text-left px-3 py-2 hover:bg-purple-50 rounded text-sm",children:e},e)),(0,Ee.jsx)("div",{className:"text-xs font-semibold text-gray-600 px-2 py-1 mt-2",children:"Retail:"}),Q.map(e=>(0,Ee.jsx)("button",{onClick:()=>K(e),className:"w-full text-left px-3 py-2 hover:bg-purple-50 rounded text-sm",children:e},e))]}),A&&(0,Ee.jsxs)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-48 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-2",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:"Metode Pembayaran:"}),["tunai","transfer","kredit","debit","qris"].map(e=>(0,Ee.jsx)("button",{onClick:()=>(e=>{var t;const n="".concat(s.trim()," ").concat(e," dari ");l(n),D(!1),null===(t=V.current)||void 0===t||t.focus()})(e),className:"w-full text-left px-3 py-2 hover:bg-purple-50 rounded text-sm capitalize",children:e},e))]}),E&&(0,Ee.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-60 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:(0,Ee.jsx)(Jt,{value:z,onChange:e=>{(e=>{var t;const n=s.substring(0,s.toLowerCase().lastIndexOf("dari")+4),r="".concat(n," ").concat(e);l(r),P(!1),null===(t=V.current)||void 0===t||t.focus()})(e)},placeholder:"",disabled:!1})}),(0,Ee.jsx)("textarea",{ref:V,value:s,onChange:e=>{l(e.target.value),(e=>{const t=e.toLowerCase(),n=$.some(e=>t.startsWith(e));if(!n)return M(!1),P(!1),O(!1),void D(!1);if($.find(e=>t==="".concat(e," "))&&e!==U.current)return L(""),M(!0),P(!1),O(!1),D(!1),void(U.current=e);if(n&&!t.includes("sejumlah")){const n=$.find(e=>t.startsWith(e));if(n){const t=e.substring(n.length).trim();if(t.length>=2)return L(t),M(!0),P(!1),O(!1),void D(!1)}}if(t.match(/sejumlah\s+(\d+)\s+$/)&&e!==U.current)return O(!0),M(!1),P(!1),D(!1),void(U.current=e);const r=e.match(/sejumlah\s+\d+\s+(\w+)\s+$/i);if(r&&!t.includes("harga")&&e!==U.current){const t=r[1].toLowerCase();if([...q,...Q].includes(t)){const n="".concat(e.trim()," harga ");return l(n),F(t),O(!1),void(U.current=n)}}const a=e.match(/harga\s+(\d+(?:\.\d+)?)\s*(r|ri|rb|rib|ribu|k|jt|juta)?\s+$/i);if(a&&e!==U.current){var o;const t=parseFloat(a[1].replace(/\./g,"")),n=(null===(o=a[2])||void 0===o?void 0:o.toLowerCase())||"";let r=t;n.includes("jt")||n.includes("juta")?r=1e6*t:n.match(/^(r|ri|rb|rib|ribu|k)$/)&&(r=1e3*t);const i=new Intl.NumberFormat("id-ID").format(r),s=B||"unit",c=e.substring(0,e.toLowerCase().lastIndexOf("harga")),u="".concat(c,"harga Rp").concat(i," per ").concat(s," isi ");return l(u),U.current=u,O(!1),void M(!1)}if(e.match(/isi\s+(\d+)\s+$/i)&&!t.includes("dari")&&e!==U.current){const t="".concat(e.trim()," per pcs dari ");return l(t),U.current=t,P(!0),M(!1),O(!1),void D(!1)}const i=t.match(/dari\s+(.*)$/);if(i){if(0===i[1].length&&e!==U.current)return I(""),P(!0),M(!1),O(!1),D(!1),void(U.current=e);if(i[1].length>=2)return I(i[1]),P(!0),M(!1),O(!1),void D(!1)}M(!1),P(!1),O(!1),D(!1)})(e.target.value)},onKeyPress:e=>{/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),X())},placeholder:"",rows:1,className:"w-full py-3 bg-gray-100 border border-gray-300 rounded-2xl resize-none focus:outline-none focus:border-gray-400 focus:bg-white text-sm text-gray-900 placeholder-gray-400",style:{minHeight:"48px",maxHeight:"120px",paddingLeft:"56px",paddingRight:"56px",boxSizing:"border-box",overflowX:"hidden",lineHeight:"1.5",wordWrap:"break-word",wordBreak:"break-word",transition:"height 0.2s ease"}}),(0,Ee.jsx)("div",{className:"absolute left-2 bottom-2",style:{position:"absolute",left:"8px",bottom:"8px"},children:(0,Ee.jsx)(Ke,{isMobile:a,onMenuItemClick:e=>{console.log("[ChatPanel] Action menu item clicked:",e),"purchase_goods"===e&&v(!0)}})}),s.trim()&&(0,Ee.jsx)("button",{onClick:X,disabled:d,className:"absolute bottom-2 right-2 w-10 h-10 flex items-center justify-center bg-amber-500 hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-full transition-all",style:{position:"absolute",bottom:"8px",right:"8px",width:"40px",height:"40px",minWidth:"40px",minHeight:"40px",animation:"fadeInScale 0.15s ease"},"aria-label":"Send message",children:(0,Ee.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),!s.trim()&&(0,Ee.jsx)("button",{onClick:()=>{o("/sales/scan",{state:{tenantId:null===n||void 0===n?void 0:n.id},replace:!1})},className:"flex items-center justify-center text-gray-700 hover:text-gray-900 active:text-amber-600 transition-all",style:{width:"48px",height:"48px",minWidth:"48px",minHeight:"48px",marginBottom:"4px",animation:"fadeInScale 0.15s ease"},"aria-label":"Scan product",children:(0,Ee.jsxs)("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,Ee.jsx)("style",{children:"\n            @keyframes fadeInScale {\n              from {\n                opacity: 0;\n                transform: scale(0.8);\n              }\n              to {\n                opacity: 1;\n                transform: scale(1);\n              }\n            }\n          "})]})}),(0,Ee.jsx)(at,{isOpen:x,onClose:()=>{v(!1),S(null)},isMobile:a,onTransactionComplete:e=>{console.log("[ChatPanel] Transaction completed, adding to chat:",e);const t={id:"tx-".concat(Date.now()),sender:"assistant",content:e,timestamp:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};u(e=>[...e,t]),setTimeout(()=>{G()},100)},scannedProductData:_}),(0,Ee.jsx)(en,{isOpen:y,productId:w,productName:j,onClose:()=>b(!1),onSuccess:e=>{console.log("[ChatPanel] Barcode registered:",e),u(t=>t.map(t=>{if(t.content.includes('data-product-id="'.concat(w,'"'))){const n=t.content.replace(/<div data-product-id="[^"]*" data-product-name="[^"]*"[^>]*class="barcode-register-btn"[^>]*>\u274e Daftarkan Barcode<\/div>/,'<div style="font-size:12px;color:#10b981;margin-top:4px">\u2705 Barcode: '.concat(e,"</div>"));return Fe(Fe({},t),{},{content:n})}return t})),b(!1)}})]}):(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center h-full bg-white text-gray-400",children:[(0,Ee.jsx)("svg",{className:"w-16 h-16 mb-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,Ee.jsx)("p",{className:"text-sm",children:"Select a tenant to start chatting"})]})},rn=()=>{const e=Y(),n=ee(),[r,a]=(0,t.useState)([]),[o,i]=(0,t.useState)(!0),s=window.innerWidth<768,[l,c]=(0,t.useState)(()=>{if(!s){const e=localStorage.getItem("activeTenantId");return e?{id:e,name:"Loading..."}:null}const e=new URLSearchParams(window.location.search).get("tenant"),t=localStorage.getItem("mobile_active_tenant");return e?{id:e,name:"Loading..."}:t?{id:t,name:"Loading..."}:null}),[u,d]=(0,t.useState)(()=>{if(!s)return!1;const e=new URLSearchParams(window.location.search),t=e.get("tenant"),n=e.get("action"),r=localStorage.getItem("mobile_chat_state");return!(!t&&!n)||"chat"===r});(0,t.useEffect)(()=>{if(!s)return;const t=new URLSearchParams(e.search),n=t.get("tenant"),r=t.get("action");r&&n&&(console.log("[Dashboard] Detected action parameter, ensuring chat is shown:",r),d(!0),localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",n))},[e.search,s]),(0,t.useEffect)(()=>{(async()=>{try{i(!0);const e=await(async()=>{try{var e;const t=await He("/api/user/tenants",{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)return t.status,await qe();const n=await t.json();console.log("[getUserTenants] API response:",n);const r=(null===(e=n.tenants)||void 0===e?void 0:e.map(e=>{var t,n;return{id:e.tenant_id||e.id,name:e.display_name||e.name||e.tenant_id,avatar:e.avatar,status:e.status||"offline",lastMessage:(null===(t=e.last_message)||void 0===t?void 0:t.content)||"",lastMessageTime:(null===(n=e.last_message)||void 0===n?void 0:n.timestamp)||"Now",role:e.role||"Owner",isPrivate:e.is_private}}))||[];return console.log("[getUserTenants] Mapped tenants:",r),r}catch(t){return await qe()}})();console.log("[Dashboard] Fetched tenants from API:",e);const t=[{id:"milky-assistant",name:"Milky Assistant",avatar:"\ud83e\udd16",status:"online",lastMessage:"Siap membantu Anda!",lastMessageTime:"Now"},...e];if(console.log("[Dashboard] All tenants (with Milky Assistant):",t.map(e=>({id:e.id,name:e.name}))),a(t),s){const e=new URLSearchParams(window.location.search),n=e.get("tenant"),r=e.get("action"),a=localStorage.getItem("mobile_active_tenant");if(n){const e=t.find(e=>e.id===n);if(e)c(e),d(!0),localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",n),console.log("[Dashboard] Set active tenant from URL:",e.id,"action:",r);else{console.log("[Dashboard] Tenant not in list, creating temp:",n);c({id:n,name:"Loading..."}),d(!0),localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",n)}}else if(a){const e=t.find(e=>e.id===a);if(e){c(e);const t=localStorage.getItem("mobile_chat_state");d("chat"===t)}}}else{const e=localStorage.getItem("activeTenantId");if(e){const n=t.find(t=>t.id===e);c(n||t[0])}else c(t[0])}}catch(e){console.error("Failed to fetch tenants:",e);const t={id:"milky-assistant",name:"Milky Assistant",avatar:"\ud83e\udd16",status:"online"};a([t]),s||c(t)}finally{i(!1)}})()},[]),(0,t.useEffect)(()=>{l&&(s||localStorage.setItem("activeTenantId",l.id))},[l,s]);const f=e=>{const t=r.find(t=>t.id===e);t?(c(t),d(!0),s&&(localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",e),n("/app?tenant=".concat(e),{replace:!0}))):console.error("[handleTenantSelect] Tenant not found:",e,"Available:",r.map(e=>e.id))},h=()=>{d(!1),s&&(localStorage.setItem("mobile_chat_state","list"),localStorage.removeItem("mobile_active_tenant"),n("/app",{replace:!0}))};return(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"md:hidden h-screen overflow-hidden",children:u?(0,Ee.jsx)(nn,{activeTenant:l,onBack:h,isMobile:!0}):(0,Ee.jsx)(Te,{tenants:r,activeTenant:l,onSelectTenant:f,isLoading:o})}),(0,Ee.jsxs)("div",{className:"hidden md:block",style:{position:"relative",height:"100vh",width:"100vw",overflow:"hidden"},children:[(0,Ee.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"64px",height:"100%",overflow:"hidden"},children:(0,Ee.jsx)(Oe,{})}),(0,Ee.jsx)("div",{style:{position:"absolute",left:"64px",top:0,width:"400px",height:"100%",overflow:"hidden"},children:(0,Ee.jsx)(Te,{tenants:r,activeTenant:l,onSelectTenant:f,isLoading:o})}),(0,Ee.jsx)("div",{style:{position:"absolute",left:"464px",right:0,top:0,height:"100%",overflow:"hidden"},children:(0,Ee.jsx)(nn,{activeTenant:l,onBack:h})})]})]})},an=()=>{const e=ee(),n=Y(),r=(0,t.useRef)(!0),a=(0,t.useRef)(!1),o=(0,t.useRef)(null),i=n.state,s=new URLSearchParams(n.search),l=(null===i||void 0===i?void 0:i.context)||s.get("context")||"sale",c=(null===i||void 0===i?void 0:i.tenantId)||s.get("tenant"),u=(null===i||void 0===i?void 0:i.returnTo)||"/app?tenant=".concat(c,"&action=openPurchaseForm"),[d,f]=(0,t.useState)(null),[h,p]=(0,t.useState)(""),[m,g]=(0,t.useState)(!0),[x,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null),[w,k]=(0,t.useState)(!1),[j,N]=(0,t.useState)(""),[_,S]=(0,t.useState)(!1),[C,M]=(0,t.useState)("none");(0,t.useEffect)(()=>(r.current=!0,a.current=!1,R(),()=>{r.current=!1,E()}),[]);const E=()=>{try{Zt().stop(),Zt().offDetected(),Zt().offProcessed(),console.log("\ud83d\uded1 [Scanner] Quagga stopped")}catch(e){console.error("Scanner cleanup error:",e)}},P=()=>{try{const e=document.querySelector("#scanner-container video");if(e&&e.srcObject){const t=e.srcObject.getVideoTracks()[0];t&&(async e=>{try{const t=e.getCapabilities();console.log("\ud83d\udcf7 [Scanner] Camera capabilities:",t);const n={advanced:[]};if(t.torch&&(n.advanced.push({torch:!1}),console.log("\ud83d\udd26 [Scanner] Torch disabled")),t.focusMode)if(t.focusMode.includes("manual")&&t.focusDistance){const e=.15,r=t.focusDistance.min||0,a=t.focusDistance.max||1,o=Math.max(r,Math.min(a,e));n.advanced.push({focusMode:"manual"}),n.advanced.push({focusDistance:o}),console.log("\ud83c\udfaf [Scanner] Manual focus set to:",o)}else t.focusMode.includes("single-shot")?(n.advanced.push({focusMode:"single-shot"}),console.log("\ud83c\udfaf [Scanner] Using single-shot focus (fallback)")):t.focusMode.includes("continuous")&&(n.advanced.push({focusMode:"continuous"}),console.log("\ud83c\udfaf [Scanner] Using continuous focus (last resort)"));n.advanced.length>0&&(await e.applyConstraints(n),console.log("\u2705 [Scanner] Camera constraints applied:",n.advanced)),o.current=e}catch(t){console.warn("\u26a0\ufe0f [Scanner] Could not apply focus settings:",t)}})(t)}}catch(e){console.warn("\u26a0\ufe0f [Scanner] Could not apply focus to Quagga stream:",e)}},R=async()=>{console.log("\ud83d\udd27 [Scanner] Initializing Quagga2 scanner..."),g(!0),p(""),M("none");try{if(console.log("\ud83d\udcf7 [Scanner] Requesting camera permission (user-triggered)..."),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return p("Browser tidak mendukung akses kamera."),f(!1),void g(!1);if(await new Promise(e=>setTimeout(e,100)),!r.current)return;Zt().init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#scanner-container"),constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}},area:{top:"5%",right:"5%",left:"5%",bottom:"10%"}},locator:{patchSize:"large",halfSample:!1},numOfWorkers:navigator.hardwareConcurrency||4,frequency:5,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"],multiple:!1},locate:!0},async e=>{var t;if(e)return console.error("\u274c [Scanner] Quagga init error:",e),"NotAllowedError"===e.name||null!==(t=e.message)&&void 0!==t&&t.includes("Permission")?p("Akses kamera ditolak. Mohon izinkan akses kamera di pengaturan browser."):"NotFoundError"===e.name?p("Kamera tidak ditemukan. Pastikan perangkat memiliki kamera."):p("Gagal mengakses kamera: ".concat(e.message||"Unknown error")),f(!1),void g(!1);console.log("\u2705 [Scanner] Quagga initialized - camera permission granted"),f(!0),P(),Zt().start(),console.log("\ud83d\ude80 [Scanner] Quagga started"),r.current&&(v(!0),g(!1))}),Zt().onProcessed(e=>{if(r.current&&!a.current&&e)if(e.boxes&&e.boxes.length>0){const t=e.boxes[0];t&&t.length>=4&&e.codeResult&&e.codeResult.code?M("ready"):M("detecting")}else M("none")}),Zt().onDetected(e=>{var t,n;if(!r.current||a.current)return;const o=e.codeResult.code;if(!o)return;const i=(null===(t=e.codeResult.decodedCodes)||void 0===t||null===(n=t.filter(e=>void 0!==e.error))||void 0===n?void 0:n.map(e=>e.error))||[],s=i.length>0?i.reduce((e,t)=>e+t,0)/i.length:1;s<.25?(console.log("\ud83c\udfaf [Scanner] BARCODE DETECTED:",o,"confidence:",(100*(1-s)).toFixed(0)+"%"),a.current=!0,O(o)):console.log("\u26a0\ufe0f [Scanner] Detection rejected:",o,"error:",s.toFixed(2),"confidence:",(100*(1-s)).toFixed(0)+"%")})}catch(e){if(console.error("\u274c [Scanner] Initialization error:",e),!r.current)return;f(!1),g(!1),"NotAllowedError"===e.name?p("Akses kamera ditolak. Mohon izinkan akses kamera di pengaturan browser."):"NotFoundError"===e.name?p("Kamera tidak ditemukan. Pastikan perangkat memiliki kamera."):p("Gagal mengakses kamera: ".concat(e.message||"Unknown error"))}},O=async e=>{r.current&&!y&&(console.log("\ud83c\udfaf [Scanner] Processing barcode:",e),b(e),v(!1),M("none"),E(),navigator.vibrate&&navigator.vibrate(200),await A(e))},A=async t=>{k(!0),N("");try{const n=localStorage.getItem("access_token"),a=await fetch("/api/products/barcode/".concat(t,"?tenant_id=").concat(c),{headers:{Authorization:"Bearer ".concat(n)}});if(a.ok){const n=await a.json();if(console.log("[SalesScanPage] Product found:",n),S(!0),k(!1),await new Promise(e=>setTimeout(e,800)),!r.current)return;e(u,{state:{action:"purchase",productData:{name:n.nama_produk||n.name,barcode:t,unit:n.satuan||n.unit}},replace:!0})}else 404===a.status?(N("Produk tidak ditemukan untuk barcode: ".concat(t)),k(!1)):(N("Gagal mencari produk. Silakan coba lagi."),k(!1))}catch(n){console.error("[SalesScanPage] Product lookup error:",n),N("Gagal mencari produk. Silakan coba lagi."),k(!1)}},D=()=>{"purchase"===l&&c?e("/app?tenant=".concat(c,"&action=openPurchaseForm"),{replace:!0}):c?e("/app?tenant=".concat(c),{replace:!0}):e(-1)},T=()=>{"purchase"===l&&c?e("/app?tenant=".concat(c,"&action=openPurchaseForm"),{replace:!0}):c?e("/app?tenant=".concat(c),{replace:!0}):e(-1)},L=()=>{switch(C){case"ready":return"border-green-500";case"detecting":return"border-yellow-500";default:return"border-red-500"}};return(0,Ee.jsxs)("div",{className:"min-h-screen bg-gray-900 flex flex-col",children:[(0,Ee.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center gap-3",children:[(0,Ee.jsx)("button",{onClick:D,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors active:bg-gray-200",children:(0,Ee.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsx)("h1",{className:"font-semibold text-lg",children:"purchase"===l?"Scan Produk Pembelian":"Scan Produk"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-500",children:"Arahkan kamera ke barcode produk"})]})]}),(0,Ee.jsxs)("div",{className:"flex-1 relative bg-black",children:[(0,Ee.jsx)("div",{id:"scanner-container",className:"absolute inset-0",style:{overflow:"hidden"}}),x&&!y&&(0,Ee.jsx)("div",{className:"absolute inset-0 pointer-events-none z-10",children:(0,Ee.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"relative transition-all duration-200",style:{width:"85vw",height:"60vh",maxWidth:"500px",maxHeight:"400px",boxShadow:"0 0 20px ".concat((()=>{switch(C){case"ready":return"rgba(34, 197, 94, 0.8)";case"detecting":return"rgba(234, 179, 8, 0.6)";default:return"rgba(239, 68, 68, 0.4)"}})())},children:[(0,Ee.jsx)("div",{className:"absolute top-0 left-0 w-10 h-10 border-t-4 border-l-4 ".concat(L()," transition-colors")}),(0,Ee.jsx)("div",{className:"absolute top-0 right-0 w-10 h-10 border-t-4 border-r-4 ".concat(L()," transition-colors")}),(0,Ee.jsx)("div",{className:"absolute bottom-0 left-0 w-10 h-10 border-b-4 border-l-4 ".concat(L()," transition-colors")}),(0,Ee.jsx)("div",{className:"absolute bottom-0 right-0 w-10 h-10 border-b-4 border-r-4 ".concat(L()," transition-colors")}),"ready"===C&&(0,Ee.jsx)("div",{className:"absolute left-2 right-2 h-0.5 bg-green-500",style:{boxShadow:"0 0 10px rgba(34, 197, 94, 0.8)",animation:"scanLine 1s ease-in-out infinite"}})]})})}),m&&(0,Ee.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white z-10 bg-black",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsxs)("svg",{className:"w-12 h-12 mx-auto mb-3 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Ee.jsx)("p",{children:"Memulai scanner..."})]})}),!m&&!1===d&&(0,Ee.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white p-6 z-10 bg-black",children:(0,Ee.jsxs)("div",{className:"text-center max-w-md",children:[(0,Ee.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,Ee.jsx)("p",{className:"mb-4",children:h}),(0,Ee.jsxs)("button",{onClick:R,className:"px-6 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 active:bg-amber-700 transition-colors flex items-center gap-2 mx-auto",children:[(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Coba Lagi"]}),(0,Ee.jsx)("button",{onClick:D,className:"mt-3 px-6 py-2 text-sm text-gray-400 hover:text-white transition-colors block mx-auto",children:"Kembali"})]})}),y&&(0,Ee.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-30 bg-black/80",children:(0,Ee.jsx)("div",{className:"bg-white rounded-xl p-6 mx-4 max-w-sm w-full shadow-2xl",children:w?(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsxs)("svg",{className:"animate-spin w-8 h-8 mx-auto mb-3 text-gray-600",fill:"none",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ee.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600",children:"Mencari produk..."}),(0,Ee.jsx)("p",{className:"text-xs text-gray-400 mt-1 font-mono",children:y})]}):_?(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("svg",{className:"w-10 h-10 mx-auto mb-3 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,Ee.jsx)("p",{className:"text-sm text-gray-700 font-medium",children:"Produk ditemukan!"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-400 font-mono",children:y})]}):j?(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("svg",{className:"w-10 h-10 mx-auto mb-3 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,Ee.jsx)("p",{className:"text-sm text-gray-700 mb-1",children:j}),(0,Ee.jsx)("p",{className:"text-xs text-gray-400 mb-4 font-mono",children:y}),(0,Ee.jsxs)("div",{className:"flex gap-2",children:[(0,Ee.jsx)("button",{onClick:async()=>{b(null),N(""),S(!1),a.current=!1,await R()},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Scan Ulang"}),(0,Ee.jsx)("button",{onClick:T,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Input Manual"})]})]}):(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("svg",{className:"w-10 h-10 mx-auto mb-3 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,Ee.jsx)("p",{className:"text-sm text-gray-700",children:"Barcode terdeteksi!"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-400 font-mono",children:y})]})})}),(0,Ee.jsx)("style",{children:"\n          @keyframes scanLine {\n            0% { top: 10%; }\n            50% { top: 90%; }\n            100% { top: 10%; }\n          }\n\n          /* Style Quagga video element */\n          #scanner-container video {\n            width: 100% !important;\n            height: 100% !important;\n            object-fit: cover !important;\n          }\n\n          #scanner-container canvas {\n            display: none !important;\n          }\n        "}),x&&!y&&(0,Ee.jsxs)("div",{className:"absolute top-4 left-4 right-4 bg-black/60 backdrop-blur-sm rounded-lg p-3 text-white text-xs z-20",children:[(0,Ee.jsx)("p",{className:"font-semibold mb-1",children:"\ud83d\udcf7 Barcode Scanner"}),(0,Ee.jsxs)("ul",{className:"space-y-0.5 opacity-80",children:[(0,Ee.jsx)("li",{children:"\u2022 Posisikan barcode di dalam kotak"}),(0,Ee.jsxs)("li",{children:["\u2022 ",(0,Ee.jsx)("strong",{children:"Jarak tepat: 15cm"})," dari kamera"]}),(0,Ee.jsxs)("li",{children:["\u2022 ",(0,Ee.jsx)("span",{className:"text-red-400",children:"Merah"})," = tidak ada, ",(0,Ee.jsx)("span",{className:"text-yellow-400",children:"Kuning"})," = mendekat, ",(0,Ee.jsx)("span",{className:"text-green-400",children:"Hijau"})," = siap!"]})]})]}),x&&!y&&(0,Ee.jsx)("button",{onClick:()=>{const e="5061011083487";console.log("\ud83e\uddea [Scanner] Manual test with barcode:",e),a.current=!0,O(e)},className:"absolute top-4 right-4 px-3 py-1.5 bg-yellow-500 text-black text-xs font-medium rounded-lg z-30 shadow-lg",children:"\ud83e\uddea Test"}),x&&!y&&(0,Ee.jsx)("div",{className:"absolute bottom-32 left-0 right-0 text-center text-white z-20",children:(0,Ee.jsx)("div",{className:"inline-block px-6 py-3 rounded-full backdrop-blur-sm ".concat("ready"===C?"bg-green-500/60":"detecting"===C?"bg-yellow-500/60":"bg-black/60"),children:(0,Ee.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ee.jsx)("div",{className:"w-2 h-2 rounded-full animate-pulse ".concat("ready"===C||"detecting"===C?"bg-white":"bg-red-500")}),(0,Ee.jsx)("p",{className:"text-sm font-medium",children:"ready"===C?"Siap scan!":"detecting"===C?"Mendekat...":"Cari barcode..."})]})})})]}),(0,Ee.jsx)("div",{className:"bg-white border-t border-gray-200 p-4",children:(0,Ee.jsxs)("div",{className:"flex gap-3",children:[(0,Ee.jsx)("button",{onClick:D,className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 active:bg-gray-100 transition-colors font-medium",children:"Kembali"}),(0,Ee.jsx)("button",{onClick:T,className:"flex-1 px-6 py-3 bg-gray-800 text-white rounded-lg hover:bg-gray-700 active:bg-gray-900 transition-colors font-medium",children:"Input Manual"})]})})]})},on=()=>{var e;const n=ee(),r=(null===(e=Y().state)||void 0===e?void 0:e.initialMessage)||"",[a,o]=(0,t.useState)([]),[i,s]=(0,t.useState)(""),[l,c]=(0,t.useState)(!1);(0,t.useEffect)(()=>{r&&u(r)},[]);const u=async e=>{if(!e.trim())return;const t={id:Date.now().toString(),text:e,sender:"user",timestamp:new Date};o(e=>[...e,t]),s(""),c(!0);try{await new Promise(e=>setTimeout(e,1e3));const e={id:(Date.now()+1).toString(),text:"Hai! Saya Milky \ud83d\ude0a Saya sedang dalam tahap development untuk setup mode. Fitur ini akan segera hadir untuk membantu kamu membuat akun dan generate URL unik untuk bisnis kamu!",sender:"milky",timestamp:new Date};o(t=>[...t,e])}catch(n){console.error("Error:",n)}finally{c(!1)}};return(0,Ee.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50",children:[(0,Ee.jsxs)("header",{className:"bg-white shadow-sm border-b px-4 py-3 flex items-center space-x-3",children:[(0,Ee.jsx)("button",{onClick:()=>n("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ee.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center",children:(0,Ee.jsx)("span",{className:"text-white font-bold",children:"m"})}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsx)("h1",{className:"font-semibold text-gray-900",children:"Milky - Setup Assistant"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500",children:"Bantu kamu setup bisnis"})]})]}),(0,Ee.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",children:[0===a.length&&(0,Ee.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,Ee.jsx)("span",{className:"text-3xl",children:"\ud83d\udc4b"})}),(0,Ee.jsx)("p",{className:"text-sm",children:"Hai! Ada yang bisa Milky bantu?"})]}),a.map(e=>(0,Ee.jsx)("div",{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"),children:(0,Ee.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-3 rounded-2xl ".concat("user"===e.sender?"bg-purple-600 text-white":"bg-white text-gray-800 shadow-sm"),children:[(0,Ee.jsx)("p",{className:"text-sm leading-relaxed",children:e.text}),(0,Ee.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.sender?"text-purple-200":"text-gray-400"),children:e.timestamp.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]})},e.id)),l&&(0,Ee.jsx)("div",{className:"flex justify-start",children:(0,Ee.jsx)("div",{className:"bg-white rounded-2xl px-4 py-3 shadow-sm",children:(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),(0,Ee.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Ee.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),(0,Ee.jsx)("div",{className:"bg-white border-t px-4 py-3",children:(0,Ee.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,Ee.jsx)("div",{className:"flex items-center space-x-3",children:(0,Ee.jsxs)("div",{className:"flex-1 relative",children:[(0,Ee.jsx)("input",{value:i,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u(i))},placeholder:"Ketik pesan...",disabled:l,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:bg-gray-100"}),(0,Ee.jsx)("button",{onClick:()=>u(i),disabled:!i.trim()||l,className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})})})]})},sn=()=>{const e=ee(),[n,r]=t.useState(""),a=t=>{t.trim()&&e("/konsultanpsikologi/chat",{state:{initialMessage:t.trim()}})};return(0,Ee.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Ee.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>e("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("h1",{className:"text-xl font-bold",children:"Konsultan Psikologi"}),(0,Ee.jsx)("div",{className:"w-8 h-8 bg-purple-400 rounded-lg flex items-center justify-center",children:(0,Ee.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})})})]}),(0,Ee.jsx)("div",{className:"w-6"})]})}),(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6 pb-24",children:[(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-purple-600 rounded-xl flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"text-purple-600 font-bold text-sm",children:"KP"})})}),(0,Ee.jsx)("div",{children:(0,Ee.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Konsultan Psikologi"})})]}),(0,Ee.jsx)("div",{className:"relative mb-6",children:(0,Ee.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 rounded-lg p-8 text-white",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Layanan Konseling Profesional"}),(0,Ee.jsx)("p",{className:"text-purple-100",children:"Solusi kesehatan mental terpercaya"})]}),(0,Ee.jsx)("div",{className:"w-32 h-20 bg-white/20 rounded-lg flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-10 bg-white/30 rounded mb-2"}),(0,Ee.jsx)("div",{className:"text-xs",children:"Konseling"})]})})]})})})]}),(0,Ee.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[{title:"Konseling Individu",desc:"Rp 150.000/sesi"},{title:"Konseling Pasangan",desc:"Rp 250.000/sesi"},{title:"Konseling Keluarga",desc:"Rp 300.000/sesi"},{title:"Konseling Online",desc:"Fleksibel"}].map((e,t)=>(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,Ee.jsx)("div",{className:"w-full h-24 bg-gradient-to-br from-purple-500 to-purple-700 rounded-lg mb-3 flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"text-white text-sm font-medium text-center",children:e.title})}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600",children:e.desc})]},t))})]}),(0,Ee.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-lg",children:(0,Ee.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsx)("div",{className:"w-10 h-10 bg-purple-400 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Ee.jsx)("span",{className:"text-white font-bold text-sm",children:"m"})}),(0,Ee.jsxs)("div",{className:"flex-1 relative",children:[(0,Ee.jsx)("input",{value:n,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),a(n))},placeholder:"Chat dengan konsultan...",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,Ee.jsx)("button",{onClick:()=>a(n),disabled:!n.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})})})]})},ln=()=>{const e=ee(),n=Y(),[r,a]=(0,t.useState)([]),[o,i]=(0,t.useState)(""),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[d,f]=(0,t.useState)(!0),[h,p]=(0,t.useState)(!1),m=(0,t.useRef)(null);(0,t.useEffect)(()=>{(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[r]),(0,t.useEffect)(()=>{(async()=>{if(Ce())try{const e=await Ve("konsultanpsikologi");u(e)}catch(e){console.error("Access check failed:",e),u(!1)}else u(!1);f(!1)})()},[]),(0,t.useEffect)(()=>{var e;const t=null===(e=n.state)||void 0===e?void 0:e.initialMessage;t&&!d&&g(t)},[n.state,d]);const g=async e=>{if(!e.trim()||s)return;const t={id:Date.now().toString(),text:e,isUser:!0,timestamp:new Date};a(e=>[...e,t]),i(""),l(!0);try{let t;if(c)t=await $e("konsultanpsikologi",e);else{const n=await fetch("/tenant/konsultanpsikologi/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});t=await n.json()}const n={id:(Date.now()+1).toString(),text:t.milky_response||t.message||"Maaf, terjadi kesalahan.",isUser:!1,timestamp:new Date};a(e=>[...e,n])}catch(n){console.error("Error sending message:",n);const e={id:(Date.now()+1).toString(),text:"Maaf, terjadi kesalahan. Silakan coba lagi.",isUser:!1,timestamp:new Date};a(t=>[...t,e])}finally{l(!1)}};return d?(0,Ee.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):(0,Ee.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50",children:[(0,Ee.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>e("/konsultanpsikologi"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("h1",{className:"text-xl font-bold",children:"Konsultan Psikologi"}),c&&(0,Ee.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs font-semibold rounded-full",children:"Tenant Mode"})]}),c?(0,Ee.jsx)("button",{onClick:()=>{Me(),window.location.reload()},className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Logout"}):(0,Ee.jsx)("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700",children:"Login"})]})}),c&&(0,Ee.jsx)("div",{className:"bg-purple-50 border-b border-purple-100 px-4 py-3",children:(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center space-x-2 overflow-x-auto",children:[(0,Ee.jsx)("button",{onClick:()=>g("produk apa yang paling laku?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udcca Top Products"}),(0,Ee.jsx)("button",{onClick:()=>g("produk mana yang kurang laku?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\u26a0\ufe0f Low Sellers"}),(0,Ee.jsx)("button",{onClick:()=>g("cek stok ballpoint"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udce6 Check Stock"}),(0,Ee.jsx)("button",{onClick:()=>g("untung bulan ini berapa?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udcb0 Monthly Profit"})]})}),(0,Ee.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto space-y-4",children:[r.map(e=>(0,Ee.jsx)("div",{className:"flex ".concat(e.isUser?"justify-end":"justify-start"),children:(0,Ee.jsxs)("div",{className:"max-w-[80%] rounded-2xl px-4 py-3 ".concat(e.isUser?"bg-purple-600 text-white":"bg-white text-gray-800 shadow-sm"),children:[(0,Ee.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.text}),(0,Ee.jsx)("p",{className:"text-xs mt-1 ".concat(e.isUser?"text-purple-200":"text-gray-400"),children:e.timestamp.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]})},e.id)),s&&(0,Ee.jsx)("div",{className:"flex justify-start",children:(0,Ee.jsx)("div",{className:"bg-white rounded-2xl px-4 py-3 shadow-sm",children:(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,Ee.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Ee.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,Ee.jsx)("div",{ref:m})]})}),(0,Ee.jsx)("div",{className:"bg-white border-t p-4",children:(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto flex items-end space-x-3",children:[(0,Ee.jsx)("div",{className:"flex-1",children:(0,Ee.jsx)("textarea",{value:o,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g(o))},placeholder:"Ketik pesan Anda...",className:"w-full px-4 py-3 border border-gray-300 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:1,disabled:s})}),(0,Ee.jsx)("button",{onClick:()=>g(o),disabled:!o.trim()||s,className:"w-12 h-12 bg-purple-400 text-white rounded-full flex items-center justify-center hover:bg-purple-500 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:(0,Ee.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})}),(0,Ee.jsx)(Pe,{isOpen:h,onClose:()=>p(!1),onLoginSuccess:async()=>{p(!1),f(!0);try{const e=await Ve("konsultanpsikologi");u(e)}catch(e){console.error("Access check failed:",e),u(!1)}f(!1)}})]})},cn=()=>{const e=ee(),{tenantId:n}=te(),[r,a]=(0,t.useState)(""),[o,i]=(0,t.useState)(null),[s,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)("");(0,t.useEffect)(()=>{console.log("[DEBUG] useEffect triggered, tenantId:",n);(async()=>{if(n){console.log("[DEBUG] Starting fetch for tenant:",n);try{const e=await fetch("".concat("https://dev.milkyhoop.com","/api/tenant/").concat(n,"/info"));if(console.log("[DEBUG] Response status:",e.status,"ok:",e.ok),!e.ok)throw new Error("Tenant not found");const t=await e.json();console.log("[DEBUG] Data received:",t);let r=t.data.menu_items;if("string"===typeof r)try{r=JSON.parse(r)}catch(mn){console.log("[DEBUG] Failed to parse menu_items, using empty array"),r=[]}const a=Fe(Fe({},t.data),{},{menu_items:Array.isArray(r)?r:[]});console.log("[DEBUG] Setting tenant info:",a),i(a)}catch(e){console.error("[DEBUG] Error in fetchTenantInfo:",e),u("Tenant not found")}finally{console.log("[DEBUG] Fetch complete, setting loading to false"),l(!1)}}else console.log("[DEBUG] No tenantId provided")})()},[n]);const d=t=>{t.trim()&&e("/".concat(n,"/chat"),{state:{initialMessage:t.trim()}})};return s?(console.log("[DEBUG] Rendering loading state"),(0,Ee.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})})):c||!o?(console.log("[DEBUG] Rendering error state. error:",c,"tenantInfo:",o),(0,Ee.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"404"}),(0,Ee.jsx)("p",{className:"text-gray-600 mb-4",children:"Tenant not found"}),(0,Ee.jsx)("button",{onClick:()=>e("/"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Go Home"})]})})):(console.log("[DEBUG] Rendering main content with tenant:",o),(0,Ee.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Ee.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>e("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("h1",{className:"text-xl font-bold",children:o.display_name}),(0,Ee.jsx)("div",{className:"w-8 h-8 bg-purple-400 rounded-lg flex items-center justify-center",children:(0,Ee.jsx)("span",{className:"text-white font-bold text-sm",children:o.display_name.substring(0,2).toUpperCase()})})]}),(0,Ee.jsx)("div",{className:"w-6"})]})}),(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6 pb-24",children:[(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-purple-600 rounded-xl flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"text-purple-600 font-bold text-sm",children:o.display_name.substring(0,2).toUpperCase()})})}),(0,Ee.jsx)("div",{children:(0,Ee.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:o.display_name})})]}),(0,Ee.jsx)("div",{className:"relative mb-6",children:(0,Ee.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 rounded-lg p-8 text-white",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("h3",{className:"text-xl font-semibold mb-2",children:["Welcome to ",o.display_name]}),(0,Ee.jsx)("p",{className:"text-purple-100",children:"Chat with us to get started"})]}),(0,Ee.jsx)("div",{className:"w-32 h-20 bg-white/20 rounded-lg flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-10 bg-white/30 rounded mb-2"}),(0,Ee.jsx)("div",{className:"text-xs",children:"Chat Now"})]})})]})})})]}),o.menu_items&&o.menu_items.length>0?(0,Ee.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:o.menu_items.map((e,t)=>(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,Ee.jsx)("div",{className:"w-full h-24 bg-gradient-to-br from-purple-500 to-purple-700 rounded-lg mb-3 flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"text-white text-sm font-medium text-center",children:e.name||e.service||"Item"})}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600",children:e.price?"Rp ".concat(e.price.toLocaleString()):e.desc||"Available"})]},t))}):(0,Ee.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[{title:"Product 1",desc:"Available"},{title:"Product 2",desc:"Available"},{title:"Product 3",desc:"Available"},{title:"Product 4",desc:"Available"}].map((e,t)=>(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,Ee.jsx)("div",{className:"w-full h-24 bg-gradient-to-br from-purple-500 to-purple-700 rounded-lg mb-3 flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"text-white text-sm font-medium text-center",children:e.title})}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600",children:e.desc})]},t))})]}),(0,Ee.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-lg",children:(0,Ee.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsx)("div",{className:"w-10 h-10 bg-purple-400 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Ee.jsx)("span",{className:"text-white font-bold text-sm",children:"m"})}),(0,Ee.jsxs)("div",{className:"flex-1 relative",children:[(0,Ee.jsx)("input",{value:r,onChange:e=>a(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d(r))},placeholder:"Chat dengan ".concat(o.display_name,"..."),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,Ee.jsx)("button",{onClick:()=>d(r),disabled:!r.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})})})]}))};function un(e){let{content:t}=e;return(0,Ee.jsx)("p",{className:"text-sm whitespace-pre-wrap",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:t})}function dn(e){let{content:t}=e;return(0,Ee.jsx)("div",{className:"text-sm text-left whitespace-pre-wrap",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontVariantNumeric:"tabular-nums"},children:t})}function fn(e){let{message:t}=e;const n=t.isFromUser,r="financial_report"===t.type||t.text.includes("\u251c\u2500")||t.text.includes("\u2514\u2500"),a=t.text.includes("<table")||t.text.includes("<div")||t.text.includes("<br");return(0,Ee.jsxs)("div",{className:"flex flex-col mb-4 ".concat(n?"items-end":"items-start"),children:[(0,Ee.jsx)("div",{className:"rounded-2xl px-4 py-2 max-w-[80%] ".concat(n?"bg-purple-600 text-white ml-auto":"bg-gray-100 text-gray-900 mr-auto"),children:a?(0,Ee.jsx)("div",{dangerouslySetInnerHTML:{__html:t.text},className:"text-sm leading-relaxed"}):r?(0,Ee.jsx)(dn,{content:t.text}):(0,Ee.jsx)(un,{content:t.text})}),t.timestamp&&(0,Ee.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:t.timestamp})]})}const hn=()=>{const e=ee(),n=Y(),{tenantId:r}=te(),[a,o]=(0,t.useState)([]),[i,s]=(0,t.useState)(""),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(!1),[f,h]=(0,t.useState)(!0),[p,m]=(0,t.useState)(!1),[g,x]=(0,t.useState)(null),v=(0,t.useRef)(null);(0,t.useEffect)(()=>{(()=>{var e;null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[a]),(0,t.useEffect)(()=>{(async()=>{if(r)try{const e=await fetch("/api/tenant/".concat(r,"/info"));if(e.ok){const t=await e.json();x(t.data)}}catch(e){console.error("Failed to fetch tenant info:",e)}})()},[r]),(0,t.useEffect)(()=>{(async()=>{if(r){if(Ce())try{const e=await Ve(r);d(e)}catch(e){console.error("Access check failed:",e),d(!1)}else d(!1);h(!1)}else h(!1)})()},[r]),(0,t.useEffect)(()=>{var e;const t=null===(e=n.state)||void 0===e?void 0:e.initialMessage;t&&!f&&y(t)},[n.state,f]);const y=async e=>{if(!e.trim()||l||!r)return;const t={id:Date.now().toString(),text:e,isUser:!0,timestamp:new Date};o(e=>[...e,t]),s(""),c(!0);try{let t;if(u)t=await $e(r,e);else{const n=await fetch("/tenant/".concat(r,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});t=await n.json()}const n={id:(Date.now()+1).toString(),text:t.milky_response||t.message||"Maaf, terjadi kesalahan.",isUser:!1,timestamp:new Date};o(e=>[...e,n])}catch(n){console.error("Error sending message:",n);const e={id:(Date.now()+1).toString(),text:"Maaf, terjadi kesalahan. Silakan coba lagi.",isUser:!1,timestamp:new Date};o(t=>[...t,e])}finally{c(!1)}};return f?(0,Ee.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):(0,Ee.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50",children:[(0,Ee.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>e("/".concat(r)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("h1",{className:"text-xl font-bold",children:(null===g||void 0===g?void 0:g.display_name)||"Chat"}),u&&(0,Ee.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs font-semibold rounded-full",children:"Tenant Mode"})]}),u?(0,Ee.jsx)("button",{onClick:()=>{Me(),window.location.reload()},className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Logout"}):(0,Ee.jsx)("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700",children:"Login"})]})}),u&&(0,Ee.jsx)("div",{className:"bg-purple-50 border-b border-purple-100 px-4 py-3",children:(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center space-x-2 overflow-x-auto",children:[(0,Ee.jsx)("button",{onClick:()=>y("produk apa yang paling laku?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udcca Top Products"}),(0,Ee.jsx)("button",{onClick:()=>y("produk mana yang kurang laku?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\u26a0\ufe0f Low Sellers"}),(0,Ee.jsx)("button",{onClick:()=>y("cek stok ballpoint"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udce6 Check Stock"}),(0,Ee.jsx)("button",{onClick:()=>y("untung bulan ini berapa?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udcb0 Monthly Profit"})]})}),(0,Ee.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto space-y-4",children:[a.map(e=>(0,Ee.jsx)(fn,{message:{text:e.text,isFromUser:e.isUser,timestamp:e.timestamp.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}},e.id)),l&&(0,Ee.jsx)("div",{className:"flex justify-start",children:(0,Ee.jsx)("div",{className:"bg-white rounded-2xl px-4 py-3 shadow-sm",children:(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,Ee.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Ee.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,Ee.jsx)("div",{ref:v})]})}),(0,Ee.jsx)("div",{className:"bg-white border-t p-4",children:(0,Ee.jsxs)("div",{className:"max-w-4xl mx-auto flex items-end space-x-3",children:[(0,Ee.jsx)("div",{className:"flex-1",children:(0,Ee.jsx)("textarea",{value:i,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y(i))},placeholder:"Ketik pesan Anda...",className:"w-full px-4 py-3 border border-gray-300 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:1,disabled:l})}),(0,Ee.jsx)("button",{onClick:()=>y(i),disabled:!i.trim()||l,className:"w-12 h-12 bg-purple-400 text-white rounded-full flex items-center justify-center hover:bg-purple-500 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:(0,Ee.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})}),(0,Ee.jsx)(Pe,{isOpen:p,onClose:()=>m(!1),onLoginSuccess:async()=>{if(m(!1),h(!0),r)try{const e=await Ve(r);d(e)}catch(e){console.error("Access check failed:",e),d(!1)}h(!1)}})]})};const pn=function(){const e=Ce();return(0,Ee.jsx)(be,{children:(0,Ee.jsx)("div",{className:"App",children:(0,Ee.jsxs)(xe,{children:[(0,Ee.jsx)(me,{path:"/",element:e?(0,Ee.jsx)(rn,{}):(0,Ee.jsx)(Re,{})}),(0,Ee.jsx)(me,{path:"/app",element:(0,Ee.jsx)(rn,{})}),(0,Ee.jsx)(me,{path:"/sales/scan",element:(0,Ee.jsx)(an,{})}),(0,Ee.jsx)(me,{path:"/chat",element:(0,Ee.jsx)(on,{})}),(0,Ee.jsx)(me,{path:"/konsultanpsikologi",element:(0,Ee.jsx)(sn,{})}),(0,Ee.jsx)(me,{path:"/konsultanpsikologi/chat",element:(0,Ee.jsx)(ln,{})}),(0,Ee.jsx)(me,{path:"/:tenantId",element:(0,Ee.jsx)(cn,{})}),(0,Ee.jsx)(me,{path:"/:tenantId/chat",element:(0,Ee.jsx)(hn,{})})]})})})};a.createRoot(document.getElementById("root")).render((0,Ee.jsx)(t.StrictMode,{children:(0,Ee.jsx)(pn,{})})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("[PWA] Service Worker registered:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&(console.log("[PWA] New content available, refresh to update"),window.dispatchEvent(new CustomEvent("sw-update-available")))})})}).catch(e=>{console.error("[PWA] Service Worker registration failed:",e)})})})()})();
//# sourceMappingURL=main.7a5f491e.js.map