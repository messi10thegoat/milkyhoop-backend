/*! For license information please see main.f3f1e4da.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,r)=>{e.exports=r(202)},153:(e,t,r)=>{var n=r(43),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,i={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!l.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||p}function v(){}function w(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,g(b,y.prototype),b.isPureReactComponent=!0;var x=Array.isArray,C=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,o)&&!E.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:r,type:e,key:a,ref:s,props:i,_owner:_.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var N=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function k(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return a=a(l=e),e=""===i?"."+I(l,0):i,x(a)?(o="",null!=e&&(o=e.replace(N,"$&/")+"/"),k(a,t,o,"",function(e){return e})):null!=a&&(A(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var u=i+I(s=e[c],c);l+=k(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=k(s=s.value,t,o,u=i+I(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,r){if(null==e)return e;var n=[],o=0;return k(e,n,"","",function(e){return t.call(r,e,o++)}),n}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},M={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:M,ReactCurrentOwner:_};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=w,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=j,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)C.call(t,c)&&!E.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:r,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,r){return R.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,r){return R.current.useReducer(e,t,r)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return R.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,o=e[n];if(!(0<i(o,t)))break e;e[n]=t,e[r]=o,r=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length,a=o>>>1;n<a;){var s=2*(n+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,r))c<o&&0>i(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[s]=r,n=s);else{if(!(c<o&&0>i(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function x(e){if(m=!1,b(e),!g)if(null!==n(c))g=!0,M(C);else{var t=n(u);null!==t&&P(x,t.startTime-e)}}function C(e,r){g=!1,m&&(m=!1,v(A),A=-1),p=!0;var i=h;try{for(b(r),f=n(c);null!==f&&(!(f.expirationTime>r)||e&&!k());){var a=f.callback;if("function"===typeof a){f.callback=null,h=f.priorityLevel;var s=a(f.expirationTime<=r);r=t.unstable_now(),"function"===typeof s?f.callback=s:f===n(c)&&o(c),b(r)}else o(c);f=n(c)}if(null!==f)var l=!0;else{var d=n(u);null!==d&&P(x,d.startTime-r),l=!1}return l}finally{f=null,h=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,S=null,A=-1,N=5,I=-1;function k(){return!(t.unstable_now()-I<N)}function T(){if(null!==S){var e=t.unstable_now();I=e;var r=!0;try{r=S(!0,e)}finally{r?_():(E=!1,S=null)}}else E=!1}if("function"===typeof w)_=function(){w(T)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=T,_=function(){R.postMessage(null)}}else _=function(){y(T,0)};function M(e){S=e,E||(E=!0,_())}function P(e,r){A=y(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,M(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,r(u,e),null===n(c)&&e===n(u)&&(m?(v(A),A=-1):m=!0,P(x,i-a))):(e.sortIndex=s,r(c,e),g||p||(g=!0,M(C))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}},391:(e,t,r)=>{var n=r(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},579:(e,t,r)=>{e.exports=r(153)},730:(e,t,r)=>{var n=r(43),o=r(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function g(e,t,r,n,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,r,n){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,o,n)&&(r=null),n||null===o?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=null===r?3!==o.type&&"":r:(t=o.attributeName,n=o.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(o=o.type)||4===o&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),C=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var D,B=Object.assign;function L(e){if(void 0===D)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=n.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?L(e):""}function z(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case C:return"Portal";case S:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return V(e(t))}catch(r){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=G(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var r=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function Q(e,t){$(e,t);var r=W(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&K(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,o=0;o<e.length;o++){if(e[o].value===r)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(i(92));if(te(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function ie(e,t){var r=W(t.value),n=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function fe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),o=ge(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,_e=null,Ee=null;function Se(e){if(e=bo(e)){if("function"!==typeof Ce)throw Error(i(280));var t=e.stateNode;t&&(t=Co(t),Ce(e.stateNode,e.type,t))}}function Ae(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ne(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function ke(){}var Te=!1;function Oe(e,t,r){if(Te)return e(t,r);Te=!0;try{return Ie(e,t,r)}finally{Te=!1,(null!==_e||null!==Ee)&&(ke(),Ne())}}function Re(e,t){var r=e.stateNode;if(null===r)return null;var n=Co(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(i(231,t,typeof r));return r}var Me=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Me=!1}function je(e,t,r,n,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var De=!1,Be=null,Le=!1,Fe=null,Ue={onError:function(e){De=!0,Be=e}};function ze(e,t,r,n,o,i,a,s,l){De=!1,Be=null,je.apply(Ue,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(n=o.return)){r=n;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===r)return We(o),e;if(a===n)return We(o),t;a=a.sibling}throw Error(i(188))}if(r.return!==n.return)r=o,n=a;else{for(var s=!1,l=o.child;l;){if(l===r){s=!0,r=o,n=a;break}if(l===n){s=!0,n=o,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,n=o;break}if(l===n){s=!0,n=a,r=o;break}l=l.sibling}if(!s)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=o.unstable_scheduleCallback,Ke=o.unstable_cancelCallback,Ze=o.unstable_shouldYield,qe=o.unstable_requestPaint,$e=o.unstable_now,Qe=o.unstable_getCurrentPriorityLevel,Je=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,rt=o.unstable_LowPriority,nt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&r;if(0!==a){var s=a&~o;0!==s?n=dt(s):0!==(i&=a)&&(n=dt(i))}else 0!==(a=r&~o)?n=dt(a):0!==i&&(n=dt(i));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&o)&&((o=n&-n)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)o=1<<(r=31-at(t)),n|=e[r],t&=~o;return n}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-at(r),o=1<<n;o&t|e[n]&t&&(e[n]|=t),r&=~o}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Ct,_t,Et,St,At=!1,Nt=[],It=null,kt=null,Tt=null,Ot=new Map,Rt=new Map,Mt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Dt(e,t,r,n,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&Ct(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Bt(e){var t=wo(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=He(r)))return e.blockedOn=t,void St(e.priority,function(){_t(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bo(r))&&Ct(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Ft(e,t,r){Lt(e)&&r.delete(t)}function Ut(){At=!1,null!==It&&Lt(It)&&(It=null),null!==kt&&Lt(kt)&&(kt=null),null!==Tt&&Lt(Tt)&&(Tt=null),Ot.forEach(Ft),Rt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return zt(t,e)}if(0<Nt.length){zt(Nt[0],e);for(var r=1;r<Nt.length;r++){var n=Nt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==It&&zt(It,e),null!==kt&&zt(kt,e),null!==Tt&&zt(Tt,e),Ot.forEach(t),Rt.forEach(t),r=0;r<Mt.length;r++)(n=Mt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Mt.length&&null===(r=Mt[0]).blockedOn;)Bt(r),null===r.blockedOn&&Mt.shift()}var Ht=b.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,r,n){var o=wt,i=Ht.transition;Ht.transition=null;try{wt=1,Yt(e,t,r,n)}finally{wt=o,Ht.transition=i}}function Xt(e,t,r,n){var o=wt,i=Ht.transition;Ht.transition=null;try{wt=4,Yt(e,t,r,n)}finally{wt=o,Ht.transition=i}}function Yt(e,t,r,n){if(Wt){var o=Zt(e,t,r,n);if(null===o)Wn(e,t,n,Kt,r),jt(e,n);else if(function(e,t,r,n,o){switch(t){case"focusin":return It=Dt(It,e,t,r,n,o),!0;case"dragenter":return kt=Dt(kt,e,t,r,n,o),!0;case"mouseover":return Tt=Dt(Tt,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return Ot.set(i,Dt(Ot.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,Rt.set(i,Dt(Rt.get(i)||null,e,t,r,n,o)),!0}return!1}(o,e,t,r,n))n.stopPropagation();else if(jt(e,n),4&t&&-1<Pt.indexOf(e)){for(;null!==o;){var i=bo(o);if(null!==i&&xt(i),null===(i=Zt(e,t,r,n))&&Wn(e,t,n,Kt,r),i===o)break;o=i}null!==o&&n.stopPropagation()}else Wn(e,t,n,null,r)}}var Kt=null;function Zt(e,t,r,n){if(Kt=null,null!==(e=wo(e=xe(n))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var $t=null,Qt=null,Jt=null;function er(){if(Jt)return Jt;var e,t,r=Qt,n=r.length,o="value"in $t?$t.value:$t.textContent,i=o.length;for(e=0;e<n&&r[e]===o[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===o[i-t];t++);return Jt=o.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function or(e){function t(t,r,n,o,i){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ir,ar,sr,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=or(lr),ur=B({},lr,{view:0,detail:0}),dr=or(ur),fr=B({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(ir=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=ir=0,sr=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),hr=or(fr),pr=or(B({},fr,{dataTransfer:0})),gr=or(B({},ur,{relatedTarget:0})),mr=or(B({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=B({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=or(yr),wr=or(B({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cr[e])&&!!t[e]}function Er(){return _r}var Sr=B({},ur,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ar=or(Sr),Nr=or(B({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ir=or(B({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er})),kr=or(B({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=B({},fr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Or=or(Tr),Rr=[9,13,27,32],Mr=u&&"CompositionEvent"in window,Pr=null;u&&"documentMode"in document&&(Pr=document.documentMode);var jr=u&&"TextEvent"in window&&!Pr,Dr=u&&(!Mr||Pr&&8<Pr&&11>=Pr),Br=String.fromCharCode(32),Lr=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Rr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function Wr(e,t,r,n){Ae(n),0<(t=Xn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Gr=null,Xr=null;function Yr(e){Ln(e,0)}function Kr(e){if(Y(xo(e)))return e}function Zr(e,t){if("change"===e)return t}var qr=!1;if(u){var $r;if(u){var Qr="oninput"in document;if(!Qr){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),Qr="function"===typeof Jr.oninput}$r=Qr}else $r=!1;qr=$r&&(!document.documentMode||9<document.documentMode)}function en(){Gr&&(Gr.detachEvent("onpropertychange",tn),Xr=Gr=null)}function tn(e){if("value"===e.propertyName&&Kr(Xr)){var t=[];Wr(t,Xr,e,xe(e)),Oe(Yr,t)}}function rn(e,t,r){"focusin"===e?(en(),Xr=r,(Gr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kr(Xr)}function on(e,t){if("click"===e)return Kr(t)}function an(e,t){if("input"===e||"change"===e)return Kr(t)}var sn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(sn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!d.call(t,o)||!sn(e[o],t[o]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fn(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=K((e=t.contentWindow).document)}return t}function hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=fn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&hn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=r.textContent.length,i=Math.min(n.start,o);n=void 0===n.end?i:Math.min(n.end,o),!e.extend&&i>n&&(o=n,n=i,i=o),o=un(r,i);var a=un(r,n);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gn=u&&"documentMode"in document&&11>=document.documentMode,mn=null,yn=null,vn=null,wn=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;wn||null==mn||mn!==K(n)||("selectionStart"in(n=mn)&&hn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=Xn(yn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=mn)))}function xn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Cn={animationend:xn("Animation","AnimationEnd"),animationiteration:xn("Animation","AnimationIteration"),animationstart:xn("Animation","AnimationStart"),transitionend:xn("Transition","TransitionEnd")},_n={},En={};function Sn(e){if(_n[e])return _n[e];if(!Cn[e])return e;var t,r=Cn[e];for(t in r)if(r.hasOwnProperty(t)&&t in En)return _n[e]=r[t];return e}u&&(En=document.createElement("div").style,"AnimationEvent"in window||(delete Cn.animationend.animation,delete Cn.animationiteration.animation,delete Cn.animationstart.animation),"TransitionEvent"in window||delete Cn.transitionend.transition);var An=Sn("animationend"),Nn=Sn("animationiteration"),In=Sn("animationstart"),kn=Sn("transitionend"),Tn=new Map,On="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(e,t){Tn.set(e,t),l(t,[e])}for(var Mn=0;Mn<On.length;Mn++){var Pn=On[Mn];Rn(Pn.toLowerCase(),"on"+(Pn[0].toUpperCase()+Pn.slice(1)))}Rn(An,"onAnimationEnd"),Rn(Nn,"onAnimationIteration"),Rn(In,"onAnimationStart"),Rn("dblclick","onDoubleClick"),Rn("focusin","onFocus"),Rn("focusout","onBlur"),Rn(kn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dn=new Set("cancel close invalid load scroll toggle".split(" ").concat(jn));function Bn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,o,a,s,l,c){if(ze.apply(this,arguments),De){if(!De)throw Error(i(198));var u=Be;De=!1,Be=null,Le||(Le=!0,Fe=u)}}(n,t,void 0,e),e.currentTarget=null}function Ln(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;Bn(o,s,c),i=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;Bn(o,s,c),i=l}}}if(Le)throw e=Fe,Le=!1,Fe=null,e}function Fn(e,t){var r=t[mo];void 0===r&&(r=t[mo]=new Set);var n=e+"__bubble";r.has(n)||(Hn(t,e,2,!1),r.add(n))}function Un(e,t,r){var n=0;t&&(n|=4),Hn(r,e,n,t)}var zn="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[zn]){e[zn]=!0,a.forEach(function(t){"selectionchange"!==t&&(Dn.has(t)||Un(t,!1,e),Un(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zn]||(t[zn]=!0,Un("selectionchange",!1,t))}}function Hn(e,t,r,n){switch(qt(t)){case 1:var o=Gt;break;case 4:o=Xt;break;default:o=Yt}r=o.bind(null,t,r,e),o=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),n?void 0!==o?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):void 0!==o?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Wn(e,t,r,n,o){var i=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=wo(s)))return;if(5===(l=a.tag)||6===l){n=i=a;continue e}s=s.parentNode}}n=n.return}Oe(function(){var n=i,o=xe(r),a=[];e:{var s=Tn.get(e);if(void 0!==s){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Ar;break;case"focusin":c="focus",l=gr;break;case"focusout":c="blur",l=gr;break;case"beforeblur":case"afterblur":l=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ir;break;case An:case Nn:case In:l=mr;break;case kn:l=kr;break;case"scroll":l=dr;break;case"wheel":l=Or;break;case"copy":case"cut":case"paste":l=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nr}var u=0!==(4&t),d=!u&&"scroll"===e,f=u?null!==s?s+"Capture":null:s;u=[];for(var h,p=n;null!==p;){var g=(h=p).stateNode;if(5===h.tag&&null!==g&&(h=g,null!==f&&(null!=(g=Re(p,f))&&u.push(Gn(p,g,h)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,r,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!wo(c)&&!c[go])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?wo(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=hr,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nr,g="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==l?s:xo(l),h=null==c?s:xo(c),(s=new u(g,p+"leave",l,r,o)).target=d,s.relatedTarget=h,g=null,wo(o)===n&&((u=new u(f,p+"enter",c,r,o)).target=h,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(f=c,p=0,h=u=l;h;h=Yn(h))p++;for(h=0,g=f;g;g=Yn(g))h++;for(;0<p-h;)u=Yn(u),p--;for(;0<h-p;)f=Yn(f),h--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break e;u=Yn(u),f=Yn(f)}u=null}else u=null;null!==l&&Kn(a,s,l,u,!1),null!==c&&null!==d&&Kn(a,d,c,u,!0)}if("select"===(l=(s=n?xo(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Zr;else if(Hr(s))if(qr)m=an;else{m=nn;var y=rn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=on);switch(m&&(m=m(e,n))?Wr(a,m,r,o):(y&&y(e,s,n),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=n?xo(n):window,e){case"focusin":(Hr(y)||"true"===y.contentEditable)&&(mn=y,yn=n,vn=null);break;case"focusout":vn=yn=mn=null;break;case"mousedown":wn=!0;break;case"contextmenu":case"mouseup":case"dragend":wn=!1,bn(a,r,o);break;case"selectionchange":if(gn)break;case"keydown":case"keyup":bn(a,r,o)}var v;if(Mr)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zr?Fr(e,r)&&(w="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(w="onCompositionStart");w&&(Dr&&"ko"!==r.locale&&(zr||"onCompositionStart"!==w?"onCompositionEnd"===w&&zr&&(v=er()):(Qt="value"in($t=o)?$t.value:$t.textContent,zr=!0)),0<(y=Xn(n,w)).length&&(w=new wr(w,e,null,r,o),a.push({event:w,listeners:y}),v?w.data=v:null!==(v=Ur(r))&&(w.data=v))),(v=jr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Lr=!0,Br);case"textInput":return(e=t.data)===Br&&Lr?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Mr&&Fr(e,t)?(e=er(),Jt=Qt=$t=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Xn(n,"onBeforeInput")).length&&(o=new wr("onBeforeInput","beforeinput",null,r,o),a.push({event:o,listeners:n}),o.data=v))}Ln(a,t)})}function Gn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xn(e,t){for(var r=t+"Capture",n=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Re(e,r))&&n.unshift(Gn(e,i,o)),null!=(i=Re(e,t))&&n.push(Gn(e,i,o))),e=e.return}return n}function Yn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kn(e,t,r,n,o){for(var i=t._reactName,a=[];null!==r&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Re(r,i))&&a.unshift(Gn(r,l,s)):o||null!=(l=Re(r,i))&&a.push(Gn(r,l,s))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var Zn=/\r\n?/g,qn=/\u0000|\uFFFD/g;function $n(e){return("string"===typeof e?e:""+e).replace(Zn,"\n").replace(qn,"")}function Qn(e,t,r){if(t=$n(t),$n(e)!==t&&r)throw Error(i(425))}function Jn(){}var eo=null,to=null;function ro(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var no="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:no;function so(e){setTimeout(function(){throw e})}function lo(e,t){var r=t,n=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&8===o.nodeType)if("/$"===(r=o.data)){if(0===n)return e.removeChild(o),void Vt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=o}while(r);Vt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),ho="__reactFiber$"+fo,po="__reactProps$"+fo,go="__reactContainer$"+fo,mo="__reactEvents$"+fo,yo="__reactListeners$"+fo,vo="__reactHandles$"+fo;function wo(e){var t=e[ho];if(t)return t;for(var r=e.parentNode;r;){if(t=r[go]||r[ho]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=uo(e);null!==e;){if(r=e[ho])return r;e=uo(e)}return t}r=(e=r).parentNode}return null}function bo(e){return!(e=e[ho]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Co(e){return e[po]||null}var _o=[],Eo=-1;function So(e){return{current:e}}function Ao(e){0>Eo||(e.current=_o[Eo],_o[Eo]=null,Eo--)}function No(e,t){Eo++,_o[Eo]=e.current,e.current=t}var Io={},ko=So(Io),To=So(!1),Oo=Io;function Ro(e,t){var r=e.type.contextTypes;if(!r)return Io;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in r)i[o]=t[o];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Po(){Ao(To),Ao(ko)}function jo(e,t,r){if(ko.current!==Io)throw Error(i(168));No(ko,t),No(To,r)}function Do(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var o in n=n.getChildContext())if(!(o in t))throw Error(i(108,H(e)||"Unknown",o));return B({},r,n)}function Bo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Io,Oo=ko.current,No(ko,e),No(To,To.current),!0}function Lo(e,t,r){var n=e.stateNode;if(!n)throw Error(i(169));r?(e=Do(e,t,Oo),n.__reactInternalMemoizedMergedChildContext=e,Ao(To),Ao(ko),No(ko,e)):Ao(To),No(To,r)}var Fo=null,Uo=!1,zo=!1;function Vo(e){null===Fo?Fo=[e]:Fo.push(e)}function Ho(){if(!zo&&null!==Fo){zo=!0;var e=0,t=wt;try{var r=Fo;for(wt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Fo=null,Uo=!1}catch(o){throw null!==Fo&&(Fo=Fo.slice(e+1)),Ye(Je,Ho),o}finally{wt=t,zo=!1}}return null}var Wo=[],Go=0,Xo=null,Yo=0,Ko=[],Zo=0,qo=null,$o=1,Qo="";function Jo(e,t){Wo[Go++]=Yo,Wo[Go++]=Xo,Xo=e,Yo=t}function ei(e,t,r){Ko[Zo++]=$o,Ko[Zo++]=Qo,Ko[Zo++]=qo,qo=e;var n=$o;e=Qo;var o=32-at(n)-1;n&=~(1<<o),r+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(n&(1<<a)-1).toString(32),n>>=a,o-=a,$o=1<<32-at(t)+o|r<<o|n,Qo=i+e}else $o=1<<i|r<<o|n,Qo=e}function ti(e){null!==e.return&&(Jo(e,1),ei(e,1,0))}function ri(e){for(;e===Xo;)Xo=Wo[--Go],Wo[Go]=null,Yo=Wo[--Go],Wo[Go]=null;for(;e===qo;)qo=Ko[--Zo],Ko[Zo]=null,Qo=Ko[--Zo],Ko[Zo]=null,$o=Ko[--Zo],Ko[Zo]=null}var ni=null,oi=null,ii=!1,ai=null;function si(e,t){var r=Oc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function li(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==qo?{id:$o,overflow:Qo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Oc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ni=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var r=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(r.nextSibling);var n=ni;t&&li(e,t)?si(n,r):(e.flags=-4097&e.flags|2,ii=!1,ni=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ni=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function fi(e){if(e!==ni)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ro(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw hi(),Error(i(418));for(;t;)si(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}oi=null}}else oi=ni?co(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=oi;e;)e=co(e.nextSibling)}function pi(){oi=ni=null,ii=!1}function gi(e){null===ai?ai=[e]:ai.push(e)}var mi=b.ReactCurrentBatchConfig;function yi(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(i(309));var n=r.stateNode}if(!n)throw Error(i(147,e));var o=n,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Bc(r,e.mode,n)).return=e,t):((t=o(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===_?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&wi(i)===t.type)?((n=o(t,r.props)).ref=yi(e,t,r),n.return=e,n):((n=Pc(r.type,r.key,r.props,null,e.mode,n)).ref=yi(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Lc(r,e.mode,n)).return=e,t):((t=o(t,r.children||[])).return=e,t)}function d(e,t,r,n,i){return null===t||7!==t.tag?((t=jc(r,e.mode,n,i)).return=e,t):((t=o(t,r)).return=e,t)}function f(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(r=Pc(t.type,t.key,t.props,null,e.mode,r)).ref=yi(e,null,t),r.return=e,r;case C:return(t=Lc(t,e.mode,r)).return=e,t;case R:return f(e,(0,t._init)(t._payload),r)}if(te(t)||j(t))return(t=jc(t,e.mode,r,null)).return=e,t;vi(e,t)}return null}function h(e,t,r,n){var o=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==o?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return r.key===o?c(e,t,r,n):null;case C:return r.key===o?u(e,t,r,n):null;case R:return h(e,t,(o=r._init)(r._payload),n)}if(te(r)||j(r))return null!==o?null:d(e,t,r,n,null);vi(e,r)}return null}function p(e,t,r,n,o){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return c(t,e=e.get(null===n.key?r:n.key)||null,n,o);case C:return u(t,e=e.get(null===n.key?r:n.key)||null,n,o);case R:return p(e,t,r,(0,n._init)(n._payload),o)}if(te(n)||j(n))return d(t,e=e.get(r)||null,n,o,null);vi(t,n)}return null}function g(o,i,s,l){for(var c=null,u=null,d=i,g=i=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=h(o,d,s[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(o,d),i=a(y,i,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===s.length)return r(o,d),ii&&Jo(o,g),c;if(null===d){for(;g<s.length;g++)null!==(d=f(o,s[g],l))&&(i=a(d,i,g),null===u?c=d:u.sibling=d,u=d);return ii&&Jo(o,g),c}for(d=n(o,d);g<s.length;g++)null!==(m=p(d,o,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),i=a(m,i,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(o,e)}),ii&&Jo(o,g),c}function m(o,s,l,c){var u=j(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,g=s,m=s=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var w=h(o,g,v.value,c);if(null===w){null===g&&(g=y);break}e&&g&&null===w.alternate&&t(o,g),s=a(w,s,m),null===d?u=w:d.sibling=w,d=w,g=y}if(v.done)return r(o,g),ii&&Jo(o,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=f(o,v.value,c))&&(s=a(v,s,m),null===d?u=v:d.sibling=v,d=v);return ii&&Jo(o,m),u}for(g=n(o,g);!v.done;m++,v=l.next())null!==(v=p(g,o,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=a(v,s,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach(function(e){return t(o,e)}),ii&&Jo(o,m),u}return function e(n,i,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===_){if(7===u.tag){r(n,u.sibling),(i=o(u,a.props.children)).return=n,n=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&wi(c)===u.type){r(n,u.sibling),(i=o(u,a.props)).ref=yi(n,u,a),i.return=n,n=i;break e}r(n,u);break}t(n,u),u=u.sibling}a.type===_?((i=jc(a.props.children,n.mode,l,a.key)).return=n,n=i):((l=Pc(a.type,a.key,a.props,null,n.mode,l)).ref=yi(n,i,a),l.return=n,n=l)}return s(n);case C:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){r(n,i.sibling),(i=o(i,a.children||[])).return=n,n=i;break e}r(n,i);break}t(n,i),i=i.sibling}(i=Lc(a,n.mode,l)).return=n,n=i}return s(n);case R:return e(n,i,(u=a._init)(a._payload),l)}if(te(a))return g(n,i,a,l);if(j(a))return m(n,i,a,l);vi(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(r(n,i.sibling),(i=o(i,a)).return=n,n=i):(r(n,i),(i=Bc(a,n.mode,l)).return=n,n=i),s(n)):r(n,i)}}var xi=bi(!0),Ci=bi(!1),_i=So(null),Ei=null,Si=null,Ai=null;function Ni(){Ai=Si=Ei=null}function Ii(e){var t=_i.current;Ao(_i),e._currentValue=t}function ki(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ti(e,t){Ei=e,Ai=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Oi(e){var t=e._currentValue;if(Ai!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===Ei)throw Error(i(308));Si=e,Ei.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Ri=null;function Mi(e){null===Ri?Ri=[e]:Ri.push(e)}function Pi(e,t,r,n){var o=t.interleaved;return null===o?(r.next=r,Mi(t)):(r.next=o.next,o.next=r),t.interleaved=r,ji(e,n)}function ji(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Di=!1;function Bi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Il)){var o=n.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),n.pending=t,ji(e,r)}return null===(o=n.interleaved)?(t.next=t,Mi(n)):(t.next=o.next,o.next=t),n.interleaved=t,ji(e,r)}function zi(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Vi(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var o=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?o=i=a:i=i.next=a,r=r.next}while(null!==r);null===i?o=i=t:i=i.next=t}else o=i=t;return r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Hi(e,t,r,n){var o=e.updateQueue;Di=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,u=c=l=null,s=i;;){var f=s.lane,h=s.eventTime;if((n&f)===f){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(f=t,h=r,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=g.payload)?p.call(h,d,f):p)||void 0===f)break e;d=B({},d,f);break e;case 2:Di=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=o.effects)?o.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,a|=f;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(f=s).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Dl|=a,e.lanes=a,e.memoizedState=d}}function Wi(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(null!==o){if(n.callback=null,n=r,"function"!==typeof o)throw Error(i(191,o));o.call(n)}}}var Gi={},Xi=So(Gi),Yi=So(Gi),Ki=So(Gi);function Zi(e){if(e===Gi)throw Error(i(174));return e}function qi(e,t){switch(No(Ki,t),No(Yi,e),No(Xi,Gi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ao(Xi),No(Xi,t)}function $i(){Ao(Xi),Ao(Yi),Ao(Ki)}function Qi(e){Zi(Ki.current);var t=Zi(Xi.current),r=le(t,e.type);t!==r&&(No(Yi,e),No(Xi,r))}function Ji(e){Yi.current===e&&(Ao(Xi),Ao(Yi))}var ea=So(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function na(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var oa=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,fa=0,ha=0;function pa(){throw Error(i(321))}function ga(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function ma(e,t,r,n,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Ja:es,e=r(n,o),da){a=0;do{if(da=!1,fa=0,25<=a)throw Error(i(301));a+=1,ca=la=null,t.updateQueue=null,oa.current=ts,e=r(n,o)}while(da)}if(oa.current=Qa,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(i(300));return e}function ya(){var e=0!==fa;return fa=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function wa(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(i(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function ba(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=wa(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=la,o=n.baseQueue,a=r.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}n.baseQueue=o=a,r.pending=null}if(null!==o){a=o.next,n=n.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,s=n):c=c.next=f,sa.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=n:c.next=l,sn(n,t.memoizedState)||(ws=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,Dl|=a,o=o.next}while(o!==e)}else null===o&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ca(e){var t=wa(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,a=t.memoizedState;if(null!==o){r.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sn(a,t.memoizedState)||(ws=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function _a(){}function Ea(e,t){var r=sa,n=wa(),o=t(),a=!sn(n.memoizedState,o);if(a&&(n.memoizedState=o,ws=!0),n=n.queue,Da(Na.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(r.flags|=2048,Oa(9,Aa.bind(null,r,n,o,t),void 0,null),null===kl)throw Error(i(349));0!==(30&aa)||Sa(r,t,o)}return o}function Sa(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Aa(e,t,r,n){t.value=r,t.getSnapshot=n,Ia(t)&&ka(e)}function Na(e,t,r){return r(function(){Ia(t)&&ka(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch(n){return!0}}function ka(e){var t=ji(e,1);null!==t&&rc(t,e,1,-1)}function Ta(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,sa,e),[t.memoizedState,e]}function Oa(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ra(){return wa().memoizedState}function Ma(e,t,r,n){var o=va();sa.flags|=e,o.memoizedState=Oa(1|t,r,void 0,void 0===n?null:n)}function Pa(e,t,r,n){var o=wa();n=void 0===n?null:n;var i=void 0;if(null!==la){var a=la.memoizedState;if(i=a.destroy,null!==n&&ga(n,a.deps))return void(o.memoizedState=Oa(t,r,i,n))}sa.flags|=e,o.memoizedState=Oa(1|t,r,i,n)}function ja(e,t){return Ma(8390656,8,e,t)}function Da(e,t){return Pa(2048,8,e,t)}function Ba(e,t){return Pa(4,2,e,t)}function La(e,t){return Pa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Pa(4,4,Fa.bind(null,t,e),r)}function za(){}function Va(e,t){var r=wa();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ga(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ha(e,t){var r=wa();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ga(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Wa(e,t,r){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=r):(sn(r,t)||(r=gt(),sa.lanes|=r,Dl|=r,e.baseState=!0),t)}function Ga(e,t){var r=wt;wt=0!==r&&4>r?r:4,e(!0);var n=ia.transition;ia.transition={};try{e(!1),t()}finally{wt=r,ia.transition=n}}function Xa(){return wa().memoizedState}function Ya(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Za(e))qa(t,r);else if(null!==(r=Pi(e,t,r,n))){rc(r,e,n,ec()),$a(r,t,n)}}function Ka(e,t,r){var n=tc(e),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Za(e))qa(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,r);if(o.hasEagerState=!0,o.eagerState=s,sn(s,a)){var l=t.interleaved;return null===l?(o.next=o,Mi(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(r=Pi(e,t,o,n))&&(rc(r,e,n,o=ec()),$a(r,t,n))}}function Za(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function qa(e,t){da=ua=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $a(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}var Qa={readContext:Oi,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:Oi,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Oi,useEffect:ja,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ma(4194308,4,Fa.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var r=va();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=va();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Ya.bind(null,sa,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ta,useDebugValue:za,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=Ga.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=sa,o=va();if(ii){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===kl)throw Error(i(349));0!==(30&aa)||Sa(n,t,r)}o.memoizedState=r;var a={value:r,getSnapshot:t};return o.queue=a,ja(Na.bind(null,n,a,e),[e]),n.flags|=2048,Oa(9,Aa.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=va(),t=kl.identifierPrefix;if(ii){var r=Qo;t=":"+t+"R"+(r=($o&~(1<<32-at($o)-1)).toString(32)+r),0<(r=fa++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Oi,useCallback:Va,useContext:Oi,useEffect:Da,useImperativeHandle:Ua,useInsertionEffect:Ba,useLayoutEffect:La,useMemo:Ha,useReducer:xa,useRef:Ra,useState:function(){return xa(ba)},useDebugValue:za,useDeferredValue:function(e){return Wa(wa(),la.memoizedState,e)},useTransition:function(){return[xa(ba)[0],wa().memoizedState]},useMutableSource:_a,useSyncExternalStore:Ea,useId:Xa,unstable_isNewReconciler:!1},ts={readContext:Oi,useCallback:Va,useContext:Oi,useEffect:Da,useImperativeHandle:Ua,useInsertionEffect:Ba,useLayoutEffect:La,useMemo:Ha,useReducer:Ca,useRef:Ra,useState:function(){return Ca(ba)},useDebugValue:za,useDeferredValue:function(e){var t=wa();return null===la?t.memoizedState=e:Wa(t,la.memoizedState,e)},useTransition:function(){return[Ca(ba)[0],wa().memoizedState]},useMutableSource:_a,useSyncExternalStore:Ea,useId:Xa,unstable_isNewReconciler:!1};function rs(e,t){if(e&&e.defaultProps){for(var r in t=B({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ns(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:B({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),o=tc(e),i=Fi(n,o);i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Ui(e,i,o))&&(rc(t,e,o,n),zi(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),o=tc(e),i=Fi(n,o);i.tag=1,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Ui(e,i,o))&&(rc(t,e,o,n),zi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),o=Fi(r,n);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Ui(e,o,n))&&(rc(t,e,n,r),zi(t,e,n))}};function is(e,t,r,n,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(o,i))}function as(e,t,r){var n=!1,o=Io,i=t.contextType;return"object"===typeof i&&null!==i?i=Oi(i):(o=Mo(t)?Oo:ko.current,i=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ro(e,o):Io),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function ls(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},Bi(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Oi(i):(i=Mo(t)?Oo:ko.current,o.context=Ro(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ns(e,t,i,r),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),Hi(e,r,o,n),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var r="",n=t;do{r+=z(n),n=n.return}while(n);var o=r}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function us(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,r){(r=Fi(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wl||(Wl=!0,Gl=n),ds(0,t)},r}function ps(e,t,r){(r=Fi(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var o=t.value;r.payload=function(){return n(o)},r.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(r.callback=function(){ds(0,t),"function"!==typeof n&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function gs(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new fs;var o=new Set;n.set(t,o)}else void 0===(o=n.get(t))&&(o=new Set,n.set(t,o));o.has(r)||(o.add(r),e=Sc.bind(null,e,t,r),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,r,n,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Fi(-1,1)).tag=2,Ui(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var vs=b.ReactCurrentOwner,ws=!1;function bs(e,t,r,n){t.child=null===e?Ci(t,null,r,n):xi(t,e.child,r,n)}function xs(e,t,r,n,o){r=r.render;var i=t.ref;return Ti(t,o),n=ma(e,t,r,n,i,o),r=ya(),null===e||ws?(ii&&r&&ti(t),t.flags|=1,bs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function Cs(e,t,r,n,o){if(null===e){var i=r.type;return"function"!==typeof i||Rc(i)||void 0!==i.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Pc(r.type,null,n,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,_s(e,t,i,n,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(a,n)&&e.ref===t.ref)return Ws(e,t,o)}return t.flags|=1,(e=Mc(i,n)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,r,n,o){if(null!==e){var i=e.memoizedProps;if(ln(i,n)&&e.ref===t.ref){if(ws=!1,t.pendingProps=n=i,0===(e.lanes&o))return t.lanes=e.lanes,Ws(e,t,o);0!==(131072&e.flags)&&(ws=!0)}}return As(e,t,r,n,o)}function Es(e,t,r){var n=t.pendingProps,o=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},No(Ml,Rl),Rl|=r;else{if(0===(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,No(Ml,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==i?i.baseLanes:r,No(Ml,Rl),Rl|=n}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,No(Ml,Rl),Rl|=n;return bs(e,t,o,r),t.child}function Ss(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function As(e,t,r,n,o){var i=Mo(r)?Oo:ko.current;return i=Ro(t,i),Ti(t,o),r=ma(e,t,r,n,i,o),n=ya(),null===e||ws?(ii&&n&&ti(t),t.flags|=1,bs(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function Ns(e,t,r,n,o){if(Mo(r)){var i=!0;Bo(t)}else i=!1;if(Ti(t,o),null===t.stateNode)Hs(e,t),as(t,r,n),ls(t,r,n,o),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=r.contextType;"object"===typeof c&&null!==c?c=Oi(c):c=Ro(t,c=Mo(r)?Oo:ko.current);var u=r.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==c)&&ss(t,a,n,c),Di=!1;var f=t.memoizedState;a.state=f,Hi(t,n,a,o),l=t.memoizedState,s!==n||f!==l||To.current||Di?("function"===typeof u&&(ns(t,r,u,n),l=t.memoizedState),(s=Di||is(t,r,s,n,f,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Li(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:rs(t.type,s),a.props=c,d=t.pendingProps,f=a.context,"object"===typeof(l=r.contextType)&&null!==l?l=Oi(l):l=Ro(t,l=Mo(r)?Oo:ko.current);var h=r.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||f!==l)&&ss(t,a,n,l),Di=!1,f=t.memoizedState,a.state=f,Hi(t,n,a,o);var p=t.memoizedState;s!==d||f!==p||To.current||Di?("function"===typeof h&&(ns(t,r,h,n),p=t.memoizedState),(c=Di||is(t,r,c,n,f,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=l,n=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Is(e,t,r,n,i,o)}function Is(e,t,r,n,o,i){Ss(e,t);var a=0!==(128&t.flags);if(!n&&!a)return o&&Lo(t,r,!1),Ws(e,t,i);n=t.stateNode,vs.current=t;var s=a&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,s,i)):bs(e,t,s,i),t.memoizedState=n.state,o&&Lo(t,r,!0),t.child}function ks(e){var t=e.stateNode;t.pendingContext?jo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&jo(0,t.context,!1),qi(e,t.containerInfo)}function Ts(e,t,r,n,o){return pi(),gi(o),t.flags|=256,bs(e,t,r,n),t.child}var Os,Rs,Ms,Ps,js={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,r){var n,o=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),No(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Dc(l,o,0,null),e=jc(e,o,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ds(r),t.memoizedState=js,e):Ls(t,l));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,r,n,o,a,s){if(r)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,n=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,o=t.mode,n=Dc({mode:"visible",children:n.children},o,0,null),(a=jc(a,o,s,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!==(1&t.mode)&&xi(t,e.child,null,s),t.child.memoizedState=Ds(s),t.memoizedState=js,a);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===o.data){if(n=o.nextSibling&&o.nextSibling.dataset)var l=n.dgst;return n=l,Fs(e,t,s,n=us(a=Error(i(419)),n,void 0))}if(l=0!==(s&e.childLanes),ws||l){if(null!==(n=kl)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(n.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,ji(e,o),rc(n,e,o,-1))}return gc(),Fs(e,t,s,n=us(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ni=t,ii=!0,ai=null,null!==e&&(Ko[Zo++]=$o,Ko[Zo++]=Qo,Ko[Zo++]=qo,$o=e.id,Qo=e.overflow,qo=t),t=Ls(t,n.children),t.flags|=4096,t)}(e,t,l,o,n,a,r);if(s){s=o.fallback,l=t.mode,n=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==n?s=Mc(n,s):(s=jc(s,l,r,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Ds(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,t.memoizedState=js,o}return e=(s=e.child).sibling,o=Mc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=r),o.return=t,o.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function Ls(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,r,n){return null!==n&&gi(n),xi(t,e.child,null,r),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ki(e.return,t,r)}function zs(e,t,r,n,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=o)}function Vs(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(bs(e,t,n.children,r),0!==(2&(n=ea.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,r,t);else if(19===e.tag)Us(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(No(ea,n),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;null!==r;)null!==(e=r.alternate)&&null===ta(e)&&(o=r),r=r.sibling;null===(r=o)?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),zs(t,!1,o,r,i);break;case"backwards":for(r=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}zs(t,!0,r,null,i);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Mc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Mc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Gs(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var o=e.child;null!==o;)r|=o.lanes|o.childLanes,n|=14680064&o.subtreeFlags,n|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ys(e,t,r){var n=t.pendingProps;switch(ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:case 17:return Mo(t.type)&&Po(),Xs(t),null;case 3:return n=t.stateNode,$i(),Ao(To),Ao(ko),na(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(fi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(ac(ai),ai=null))),Rs(e,t),Xs(t),null;case 5:Ji(t);var o=Zi(Ki.current);if(r=t.type,null!==e&&null!=t.stateNode)Ms(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(i(166));return Xs(t),null}if(e=Zi(Xi.current),fi(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[ho]=t,n[po]=a,e=0!==(1&t.mode),r){case"dialog":Fn("cancel",n),Fn("close",n);break;case"iframe":case"object":case"embed":Fn("load",n);break;case"video":case"audio":for(o=0;o<jn.length;o++)Fn(jn[o],n);break;case"source":Fn("error",n);break;case"img":case"image":case"link":Fn("error",n),Fn("load",n);break;case"details":Fn("toggle",n);break;case"input":q(n,a),Fn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Fn("invalid",n);break;case"textarea":oe(n,a),Fn("invalid",n)}for(var l in ve(r,a),o=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qn(n.textContent,c,e),o=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qn(n.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fn("scroll",n)}switch(r){case"input":X(n),J(n,a,!0);break;case"textarea":X(n),ae(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=Jn)}n=o,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[ho]=t,e[po]=n,Os(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(r,n),r){case"dialog":Fn("cancel",e),Fn("close",e),o=n;break;case"iframe":case"object":case"embed":Fn("load",e),o=n;break;case"video":case"audio":for(o=0;o<jn.length;o++)Fn(jn[o],e);o=n;break;case"source":Fn("error",e),o=n;break;case"img":case"image":case"link":Fn("error",e),Fn("load",e),o=n;break;case"details":Fn("toggle",e),o=n;break;case"input":q(e,n),o=Z(e,n),Fn("invalid",e);break;case"option":default:o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=B({},n,{value:void 0}),Fn("invalid",e);break;case"textarea":oe(e,n),o=ne(e,n),Fn("invalid",e)}for(a in ve(r,o),c=o)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==r||""!==u)&&fe(e,u):"number"===typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fn("scroll",e):null!=u&&w(e,a,u,l))}switch(r){case"input":X(e),J(e,n,!1);break;case"textarea":X(e),ae(e);break;case"option":null!=n.value&&e.setAttribute("value",""+W(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?re(e,!!n.multiple,a,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Jn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(e&&null!=t.stateNode)Ps(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(i(166));if(r=Zi(Ki.current),Zi(Xi.current),fi(t)){if(n=t.stateNode,r=t.memoizedProps,n[ho]=t,(a=n.nodeValue!==r)&&null!==(e=ni))switch(e.tag){case 3:Qn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qn(n.nodeValue,r,0!==(1&e.mode))}a&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ho]=t,t.stateNode=n}return Xs(t),null;case 13:if(Ao(ea),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))hi(),pi(),t.flags|=98560,a=!1;else if(a=fi(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ho]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xs(t),a=!1}else null!==ai&&(ac(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Pl&&(Pl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Xs(t),null);case 4:return $i(),Rs(e,t),null===e&&Vn(t.stateNode.containerInfo),Xs(t),null;case 10:return Ii(t.type._context),Xs(t),null;case 19:if(Ao(ea),null===(a=t.memoizedState))return Xs(t),null;if(n=0!==(128&t.flags),null===(l=a.rendering))if(n)Gs(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Gs(a,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(a=r).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return No(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Vl&&(t.flags|=128,n=!0,Gs(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ta(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ii)return Xs(t),null}else 2*$e()-a.renderingStartTime>Vl&&1073741824!==r&&(t.flags|=128,n=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=a.last)?r.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,r=ea.current,No(ea,n?1&r|2:1&r),t):(Xs(t),null);case 22:case 23:return dc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Xs(t),6&t.subtreeFlags&&(t.flags|=8192)):Xs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ks(e,t){switch(ri(t),t.tag){case 1:return Mo(t.type)&&Po(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $i(),Ao(To),Ao(ko),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(Ao(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ao(ea),null;case 4:return $i(),null;case 10:return Ii(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Os=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Rs=function(){},Ms=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,Zi(Xi.current);var i,a=null;switch(r){case"input":o=Z(e,o),n=Z(e,n),a=[];break;case"select":o=B({},o,{value:void 0}),n=B({},n,{value:void 0}),a=[];break;case"textarea":o=ne(e,o),n=ne(e,n),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof n.onClick&&(e.onclick=Jn)}for(u in ve(r,n),r=null,o)if(!n.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=o?o[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fn("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ps=function(e,t,r,n){r!==n&&(t.flags|=4)};var Zs=!1,qs=!1,$s="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Js(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Ec(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){Ec(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var o=n=n.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&el(t,r,i)}o=o.next}while(o!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ol(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ho],delete t[po],delete t[mo],delete t[yo],delete t[vo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Jn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var ul=null,dl=!1;function fl(e,t,r){for(r=r.child;null!==r;)hl(e,t,r),r=r.sibling}function hl(e,t,r){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,r)}catch(s){}switch(r.tag){case 5:qs||Js(r,t);case 6:var n=ul,o=dl;ul=null,fl(e,t,r),dl=o,null!==(ul=n)&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):ul.removeChild(r.stateNode));break;case 18:null!==ul&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?lo(e.parentNode,r):1===e.nodeType&&lo(e,r),Vt(e)):lo(ul,r.stateNode));break;case 4:n=ul,o=dl,ul=r.stateNode.containerInfo,dl=!0,fl(e,t,r),ul=n,dl=o;break;case 0:case 11:case 14:case 15:if(!qs&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){o=n=n.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(r,t,a),o=o.next}while(o!==n)}fl(e,t,r);break;case 1:if(!qs&&(Js(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Ec(r,t,s)}fl(e,t,r);break;case 21:fl(e,t,r);break;case 22:1&r.mode?(qs=(n=qs)||null!==r.memoizedState,fl(e,t,r),qs=n):fl(e,t,r);break;default:fl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new $s),t.forEach(function(t){var n=Ic.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function gl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var o=r[n];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));hl(a,s,o),ul=null,dl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){Ec(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(m){Ec(e,e.return,m)}try{rl(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&n&&null!==r&&Js(r,r.return);break;case 5:if(gl(t,e),yl(e),512&n&&null!==r&&Js(r,r.return),32&e.flags){var o=e.stateNode;try{fe(o,"")}catch(m){Ec(e,e.return,m)}}if(4&n&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==r?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(o,a),we(l,s);var u=we(l,a);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];"style"===d?me(o,f):"dangerouslySetInnerHTML"===d?de(o,f):"children"===d?fe(o,f):w(o,d,f,u)}switch(l){case"input":Q(o,a);break;case"textarea":ie(o,a);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?re(o,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?re(o,!!a.multiple,a.defaultValue,!0):re(o,!!a.multiple,a.multiple?[]:"",!1))}o[po]=a}catch(m){Ec(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&n){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(m){Ec(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(zl=$e())),4&n&&pl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(qs=(u=qs)||d,gl(t,e),qs=u):gl(t,e),yl(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Qs=e,d=e.child;null!==d;){for(f=Qs=d;null!==Qs;){switch(p=(h=Qs).child,h.tag){case 0:case 11:case 14:case 15:rl(4,h,h.return);break;case 1:Js(h,h.return);var g=h.stateNode;if("function"===typeof g.componentWillUnmount){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ec(n,r,m)}}break;case 5:Js(h,h.return);break;case 22:if(null!==h.memoizedState){xl(f);continue}}null!==p?(p.return=h,Qs=p):xl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{o=f.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(m){Ec(e,e.return,m)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gl(t,e),yl(e),4&n&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(al(r)){var n=r;break e}r=r.return}throw Error(i(160))}switch(n.tag){case 5:var o=n.stateNode;32&n.flags&&(fe(o,""),n.flags&=-33),cl(e,sl(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(i(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,r){Qs=e,wl(e,t,r)}function wl(e,t,r){for(var n=0!==(1&e.mode);null!==Qs;){var o=Qs,i=o.child;if(22===o.tag&&n){var a=null!==o.memoizedState||Zs;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||qs;s=Zs;var c=qs;if(Zs=a,(qs=l)&&!c)for(Qs=o;null!==Qs;)l=(a=Qs).child,22===a.tag&&null!==a.memoizedState?Cl(o):null!==l?(l.return=a,Qs=l):Cl(o);for(;null!==i;)Qs=i,wl(i,t,r),i=i.sibling;Qs=o,Zs=s,qs=c}bl(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Qs=i):bl(e)}}function bl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qs||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!qs)if(null===r)n.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:rs(t.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Wi(t,a,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Wi(t,s,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Vt(f)}}}break;default:throw Error(i(163))}qs||512&t.flags&&ol(t)}catch(h){Ec(t,t.return,h)}}if(t===e){Qs=null;break}if(null!==(r=t.sibling)){r.return=t.return,Qs=r;break}Qs=t.return}}function xl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Qs=r;break}Qs=t.return}}function Cl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){Ec(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var o=t.return;try{n.componentDidMount()}catch(l){Ec(t,o,l)}}var i=t.return;try{ol(t)}catch(l){Ec(t,i,l)}break;case 5:var a=t.return;try{ol(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var _l,El=Math.ceil,Sl=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,Nl=b.ReactCurrentBatchConfig,Il=0,kl=null,Tl=null,Ol=0,Rl=0,Ml=So(0),Pl=0,jl=null,Dl=0,Bl=0,Ll=0,Fl=null,Ul=null,zl=0,Vl=1/0,Hl=null,Wl=!1,Gl=null,Xl=null,Yl=!1,Kl=null,Zl=0,ql=0,$l=null,Ql=-1,Jl=0;function ec(){return 0!==(6&Il)?$e():-1!==Ql?Ql:Ql=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Ol?Ol&-Ol:null!==mi.transition?(0===Jl&&(Jl=gt()),Jl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:qt(e.type)}function rc(e,t,r,n){if(50<ql)throw ql=0,$l=null,Error(i(185));yt(e,r,n),0!==(2&Il)&&e===kl||(e===kl&&(0===(2&Il)&&(Bl|=r),4===Pl&&sc(e,Ol)),nc(e,n),1===r&&0===Il&&0===(1&t.mode)&&(Vl=$e()+500,Uo&&Ho()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,l=o[a];-1===l?0!==(s&r)&&0===(s&n)||(o[a]=ht(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var n=ft(e,e===kl?Ol:0);if(0===n)null!==r&&Ke(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ke(r),1===t)0===e.tag?function(e){Uo=!0,Vo(e)}(lc.bind(null,e)):Vo(lc.bind(null,e)),ao(function(){0===(6&Il)&&Ho()}),r=null;else{switch(bt(n)){case 1:r=Je;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=kc(r,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function oc(e,t){if(Ql=-1,Jl=0,0!==(6&Il))throw Error(i(327));var r=e.callbackNode;if(Cc()&&e.callbackNode!==r)return null;var n=ft(e,e===kl?Ol:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=mc(e,n);else{t=n;var o=Il;Il|=2;var a=pc();for(kl===e&&Ol===t||(Hl=null,Vl=$e()+500,fc(e,t));;)try{vc();break}catch(l){hc(e,l)}Ni(),Sl.current=a,Il=o,null!==Tl?t=0:(kl=null,Ol=0,t=Pl)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(n=o,t=ic(e,o))),1===t)throw r=jl,fc(e,0),sc(e,n),nc(e,$e()),r;if(6===t)sc(e,n);else{if(o=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var o=r[n],i=o.getSnapshot;o=o.value;try{if(!sn(i(),o))return!1}catch(s){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=mc(e,n))&&(0!==(a=pt(e))&&(n=a,t=ic(e,a))),1===t))throw r=jl,fc(e,0),sc(e,n),nc(e,$e()),r;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,Ul,Hl);break;case 3:if(sc(e,n),(130023424&n)===n&&10<(t=zl+500-$e())){if(0!==ft(e,0))break;if(((o=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=no(xc.bind(null,e,Ul,Hl),t);break}xc(e,Ul,Hl);break;case 4:if(sc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,o=-1;0<n;){var s=31-at(n);a=1<<s,(s=t[s])>o&&(o=s),n&=~a}if(n=o,10<(n=(120>(n=$e()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*El(n/1960))-n)){e.timeoutHandle=no(xc.bind(null,e,Ul,Hl),n);break}xc(e,Ul,Hl);break;default:throw Error(i(329))}}}return nc(e,$e()),e.callbackNode===r?oc.bind(null,e):null}function ic(e,t){var r=Fl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ul,Ul=r,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function sc(e,t){for(t&=~Ll,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-at(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&Il))throw Error(i(327));Cc();var t=ft(e,0);if(0===(1&t))return nc(e,$e()),null;var r=mc(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=ic(e,n))}if(1===r)throw r=jl,fc(e,0),sc(e,t),nc(e,$e()),r;if(6===r)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,Hl),nc(e,$e()),null}function cc(e,t){var r=Il;Il|=1;try{return e(t)}finally{0===(Il=r)&&(Vl=$e()+500,Uo&&Ho())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Il)&&Cc();var t=Il;Il|=1;var r=Nl.transition,n=wt;try{if(Nl.transition=null,wt=1,e)return e()}finally{wt=n,Nl.transition=r,0===(6&(Il=t))&&Ho()}}function dc(){Rl=Ml.current,Ao(Ml)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,oo(r)),null!==Tl)for(r=Tl.return;null!==r;){var n=r;switch(ri(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Po();break;case 3:$i(),Ao(To),Ao(ko),na();break;case 5:Ji(n);break;case 4:$i();break;case 13:case 19:Ao(ea);break;case 10:Ii(n.type._context);break;case 22:case 23:dc()}r=r.return}if(kl=e,Tl=e=Mc(e.current,null),Ol=Rl=t,Pl=0,jl=null,Ll=Bl=Dl=0,Ul=Fl=null,null!==Ri){for(t=0;t<Ri.length;t++)if(null!==(n=(r=Ri[t]).interleaved)){r.interleaved=null;var o=n.next,i=r.pending;if(null!==i){var a=i.next;i.next=o,n.next=a}r.pending=n}Ri=null}return e}function hc(e,t){for(;;){var r=Tl;try{if(Ni(),oa.current=Qa,ua){for(var n=sa.memoizedState;null!==n;){var o=n.queue;null!==o&&(o.pending=null),n=n.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,fa=0,Al.current=null,null===r||null===r.return){Pl=1,jl=t,Tl=null;break}e:{var a=e,s=r.return,l=r,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&gs(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){gs(a,u,t),gc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var y=ms(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),gi(cs(c,l));break e}}a=c=cs(c,l),4!==Pl&&(Pl=2),null===Fl?Fl=[a]:Fl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vi(a,hs(0,c,t));break e;case 1:l=c;var v=a.type,w=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Xl||!Xl.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t,Vi(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}bc(r)}catch(b){t=b,Tl===r&&null!==r&&(Tl=r=r.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Qa,null===e?Qa:e}function gc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===kl||0===(268435455&Dl)&&0===(268435455&Bl)||sc(kl,Ol)}function mc(e,t){var r=Il;Il|=2;var n=pc();for(kl===e&&Ol===t||(Hl=null,fc(e,t));;)try{yc();break}catch(o){hc(e,o)}if(Ni(),Il=r,Sl.current=n,null!==Tl)throw Error(i(261));return kl=null,Ol=0,Pl}function yc(){for(;null!==Tl;)wc(Tl)}function vc(){for(;null!==Tl&&!Ze();)wc(Tl)}function wc(e){var t=_l(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Al.current=null}function bc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ys(r,t,Rl)))return void(Tl=r)}else{if(null!==(r=Ks(r,t)))return r.flags&=32767,void(Tl=r);if(null===e)return Pl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Pl&&(Pl=5)}function xc(e,t,r){var n=wt,o=Nl.transition;try{Nl.transition=null,wt=1,function(e,t,r,n){do{Cc()}while(null!==Kl);if(0!==(6&Il))throw Error(i(327));r=e.finishedWork;var o=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-at(r),i=1<<o;t[o]=0,n[o]=-1,e[o]=-1,r&=~i}}(e,a),e===kl&&(Tl=kl=null,Ol=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Yl||(Yl=!0,kc(tt,function(){return Cc(),null})),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=Nl.transition,Nl.transition=null;var s=wt;wt=1;var l=Il;Il|=4,Al.current=null,function(e,t){if(eo=Wt,hn(e=fn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var o=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(x){r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||0!==o&&3!==f.nodeType||(l=s+o),f!==a||0!==n&&3!==f.nodeType||(c=s+n),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===o&&(l=s),h===a&&++d===n&&(c=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(to={focusedElem:e,selectionRange:r},Wt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:rs(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(x){Ec(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}g=tl,tl=!1}(e,r),ml(r,e),pn(to),Wt=!!eo,to=eo=null,e.current=r,vl(r,e,o),qe(),Il=l,wt=s,Nl.transition=a}else e.current=r;if(Yl&&(Yl=!1,Kl=e,Zl=o),a=e.pendingLanes,0===a&&(Xl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,$e()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&Zl)&&0!==e.tag&&Cc(),a=e.pendingLanes,0!==(1&a)?e===$l?ql++:(ql=0,$l=e):ql=0,Ho()}(e,t,r,n)}finally{Nl.transition=o,wt=n}return null}function Cc(){if(null!==Kl){var e=bt(Zl),t=Nl.transition,r=wt;try{if(Nl.transition=null,wt=16>e?16:e,null===Kl)var n=!1;else{if(e=Kl,Kl=null,Zl=0,0!==(6&Il))throw Error(i(331));var o=Il;for(Il|=4,Qs=e.current;null!==Qs;){var a=Qs,s=a.child;if(0!==(16&Qs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qs=u;null!==Qs;){var d=Qs;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var f=d.child;if(null!==f)f.return=d,Qs=f;else for(;null!==Qs;){var h=(d=Qs).sibling,p=d.return;if(il(d),d===u){Qs=null;break}if(null!==h){h.return=p,Qs=h;break}Qs=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Qs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(a=Qs).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Qs=v;break e}Qs=a.return}}var w=e.current;for(Qs=w;null!==Qs;){var b=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Qs=b;else e:for(s=w;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(C){Ec(l,l.return,C)}if(l===s){Qs=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Qs=x;break e}Qs=l.return}}if(Il=o,Ho(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(C){}n=!0}return n}finally{wt=r,Nl.transition=t}}return!1}function _c(e,t,r){e=Ui(e,t=hs(0,t=cs(r,t),1),1),t=ec(),null!==e&&(yt(e,1,t),nc(e,t))}function Ec(e,t,r){if(3===e.tag)_c(e,e,r);else for(;null!==t;){if(3===t.tag){_c(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Xl||!Xl.has(n))){t=Ui(t,e=ps(t,e=cs(r,e),1),1),e=ec(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,kl===e&&(Ol&r)===r&&(4===Pl||3===Pl&&(130023424&Ol)===Ol&&500>$e()-zl?fc(e,0):Ll|=r),nc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=ec();null!==(e=ji(e,t))&&(yt(e,t,r),nc(e,r))}function Nc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Ac(e,r)}function Ic(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;null!==o&&(r=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(i(314))}null!==n&&n.delete(t),Ac(e,r)}function kc(e,t){return Ye(e,t)}function Tc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,r,n){return new Tc(e,t,r,n)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var r=e.alternate;return null===r?((r=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pc(e,t,r,n,o,a){var s=2;if(n=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return jc(r.children,o,a,t);case E:s=8,o|=8;break;case S:return(e=Oc(12,r,t,2|o)).elementType=S,e.lanes=a,e;case k:return(e=Oc(13,r,t,o)).elementType=k,e.lanes=a,e;case T:return(e=Oc(19,r,t,o)).elementType=T,e.lanes=a,e;case M:return Dc(r,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case N:s=9;break e;case I:s=11;break e;case O:s=14;break e;case R:s=16,n=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Oc(s,r,t,o)).elementType=e,t.type=n,t.lanes=a,t}function jc(e,t,r,n){return(e=Oc(7,e,n,t)).lanes=r,e}function Dc(e,t,r,n){return(e=Oc(22,e,n,t)).elementType=M,e.lanes=r,e.stateNode={isHidden:!1},e}function Bc(e,t,r){return(e=Oc(6,e,null,t)).lanes=r,e}function Lc(e,t,r){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,r,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,n,o,i,a,s,l){return e=new Fc(e,t,r,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Oc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bi(i),e}function zc(e){if(!e)return Io;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var r=e.type;if(Mo(r))return Do(e,r,t)}return t}function Vc(e,t,r,n,o,i,a,s,l){return(e=Uc(r,n,!0,e,0,i,0,s,l)).context=zc(null),r=e.current,(i=Fi(n=ec(),o=tc(r))).callback=void 0!==t&&null!==t?t:null,Ui(r,i,o),e.current.lanes=o,yt(e,o,n),nc(e,n),e}function Hc(e,t,r,n){var o=t.current,i=ec(),a=tc(o);return r=zc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Fi(i,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ui(o,t,a))&&(rc(e,o,a,i),zi(e,o,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Xc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}_l=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||To.current)ws=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return ws=!1,function(e,t,r){switch(t.tag){case 3:ks(t),pi();break;case 5:Qi(t);break;case 1:Mo(t.type)&&Bo(t);break;case 4:qi(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;No(_i,n._currentValue),n._currentValue=o;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(No(ea,1&ea.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Bs(e,t,r):(No(ea,1&ea.current),null!==(e=Ws(e,t,r))?e.sibling:null);No(ea,1&ea.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Vs(e,t,r);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),No(ea,ea.current),n)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,r)}return Ws(e,t,r)}(e,t,r);ws=0!==(131072&e.flags)}else ws=!1,ii&&0!==(1048576&t.flags)&&ei(t,Yo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Hs(e,t),e=t.pendingProps;var o=Ro(t,ko.current);Ti(t,r),o=ma(null,t,n,e,o,r);var a=ya();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mo(n)?(a=!0,Bo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Bi(t),o.updater=os,t.stateNode=o,o._reactInternals=t,ls(t,n,e,r),t=Is(null,t,n,!0,a,r)):(t.tag=0,ii&&a&&ti(t),bs(null,t,o,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,n=(o=n._init)(n._payload),t.type=n,o=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===O)return 14}return 2}(n),e=rs(n,e),o){case 0:t=As(null,t,n,e,r);break e;case 1:t=Ns(null,t,n,e,r);break e;case 11:t=xs(null,t,n,e,r);break e;case 14:t=Cs(null,t,n,rs(n.type,e),r);break e}throw Error(i(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,As(e,t,n,o=t.elementType===n?o:rs(n,o),r);case 1:return n=t.type,o=t.pendingProps,Ns(e,t,n,o=t.elementType===n?o:rs(n,o),r);case 3:e:{if(ks(t),null===e)throw Error(i(387));n=t.pendingProps,o=(a=t.memoizedState).element,Li(e,t),Hi(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ts(e,t,n,r,o=cs(Error(i(423)),t));break e}if(n!==o){t=Ts(e,t,n,r,o=cs(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ni=t,ii=!0,ai=null,r=Ci(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(pi(),n===o){t=Ws(e,t,r);break e}bs(e,t,n,r)}t=t.child}return t;case 5:return Qi(t),null===e&&ui(t),n=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,ro(n,o)?s=null:null!==a&&ro(n,a)&&(t.flags|=32),Ss(e,t),bs(e,t,s,r),t.child;case 6:return null===e&&ui(t),null;case 13:return Bs(e,t,r);case 4:return qi(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=xi(t,null,n,r):bs(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,xs(e,t,n,o=t.elementType===n?o:rs(n,o),r);case 7:return bs(e,t,t.pendingProps,r),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,No(_i,n._currentValue),n._currentValue=s,null!==a)if(sn(a.value,s)){if(a.children===o.children&&!To.current){t=Ws(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===a.tag){(c=Fi(-1,r&-r)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),ki(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),ki(s,r,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,Ti(t,r),n=n(o=Oi(o)),t.flags|=1,bs(e,t,n,r),t.child;case 14:return o=rs(n=t.type,t.pendingProps),Cs(e,t,n,o=rs(n.type,o),r);case 15:return _s(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:rs(n,o),Hs(e,t),t.tag=1,Mo(n)?(e=!0,Bo(t)):e=!1,Ti(t,r),as(t,n,o),ls(t,n,o,r),Is(null,t,n,!0,e,r);case 19:return Vs(e,t,r);case 22:return Es(e,t,r)}throw Error(i(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Jc(e,t,r,n,o){var i=r._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Wc(a);s.call(e)}}Hc(t,a,e,o)}else a=function(e,t,r,n,o){if(o){if("function"===typeof n){var i=n;n=function(){var e=Wc(a);i.call(e)}}var a=Vc(t,n,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[go]=a.current,Vn(8===e.nodeType?e.parentNode:e),uc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof n){var s=n;n=function(){var e=Wc(l);s.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[go]=l.current,Vn(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,r,n)}),l}(r,t,e,o,n);return Wc(a)}Zc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hc(e,t,null,null)},Zc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[go]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Mt.length&&0!==t&&t<Mt[r].priority;r++);Mt.splice(r,0,e),0===r&&Bt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(vt(t,1|r),nc(t,$e()),0===(6&Il)&&(Vl=$e()+500,Ho()))}break;case 13:uc(function(){var t=ji(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Xc(e,1)}},Ct=function(e){if(13===e.tag){var t=ji(e,134217728);if(null!==t)rc(t,e,134217728,ec());Xc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),r=ji(e,t);if(null!==r)rc(r,e,t,ec());Xc(e,t)}},Et=function(){return wt},St=function(e,t){var r=wt;try{return wt=e,t()}finally{wt=r}},Ce=function(e,t,r){switch(t){case"input":if(Q(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=Co(n);if(!o)throw Error(i(90));Y(n),Q(n,o)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ie=cc,ke=uc;var eu={usingClientEntryPoint:!1,Events:[bo,xo,Co,Ae,Ne,cc]},tu={findFiberByHostInstance:wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{ot=nu.inject(ru),it=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qc(t))throw Error(i(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!qc(e))throw Error(i(299));var r=!1,n="",o=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,n,o),e[go]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,r){if(!$c(t))throw Error(i(200));return Jc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!qc(e))throw Error(i(405));var n=null!=r&&r.hydratedSources||null,o=!1,a="",s=Yc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(o=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Vc(t,null,e,1,null!=r?r:null,o,0,a,s),e[go]=t.current,Vn(e),n)for(e=0;e<n.length;e++)o=(o=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Zc(t)},t.render=function(e,t,r){if(!$c(t))throw Error(i(200));return Jc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Jc(null,null,e,!1,function(){e._reactRootContainer=null,e[go]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$c(r))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Jc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,r)=>{e.exports=r(234)},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var i=Object.create(null);r.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&n;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>n[e]);return a.default=()=>n,r.d(i,a),i}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n,o=r(43),i=r.t(o,2),a=r(391),s=r(950),l=r.t(s,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,r,n){return void 0===r&&(r=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function m(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function y(e,t,r,o){void 0===o&&(o={});let{window:i=document.defaultView,v5Compat:a=!1}=o,s=i.history,l=n.Pop,f=null,m=y();function y(){return(s.state||{idx:null}).idx}function v(){l=n.Pop;let e=y(),t=null==e?null:e-m;m=e,f&&f({action:l,location:b.location,delta:t})}function w(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,r="string"===typeof e?e:g(e);return r=r.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==m&&(m=0,s.replaceState(c({},s.state,{idx:m}),""));let b={get action(){return l},get location(){return e(i,s)},listen(e){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(u,v),f=e,()=>{i.removeEventListener(u,v),f=null}},createHref:e=>t(i,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=n.Push;let o=p(b.location,e,t);r&&r(o,e),m=y()+1;let c=h(o,m),u=b.createHref(o);try{s.pushState(c,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;i.location.assign(u)}a&&f&&f({action:l,location:b.location,delta:1})},replace:function(e,t){l=n.Replace;let o=p(b.location,e,t);r&&r(o,e),m=y();let i=h(o,m),c=b.createHref(o);s.replaceState(i,"",c),a&&f&&f({action:l,location:b.location,delta:0})},go:e=>s.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,r){return void 0===r&&(r="/"),b(e,t,r,!1)}function b(e,t,r,n){let o=P(("string"===typeof t?m(t):t).pathname||"/",r);if(null==o)return null;let i=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let s=0;null==a&&s<i.length;++s){let e=M(o);a=O(i[s],e,n)}return a}function x(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let o=(e,o,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(d(a.relativePath.startsWith(n),'Absolute route path "'+a.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(n.length));let s=F([n,a.relativePath]),l=r.concat(a);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),x(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:T(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of C(e.path))o(e,t,n);else o(e,t)}),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,o=r.endsWith("?"),i=r.replace(/\?$/,"");if(0===n.length)return o?[i,""]:[i];let a=C(n.join("/")),s=[];return s.push(...a.map(e=>""===e?i:[i,e].join("/"))),o&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const _=/^:[\w-]+$/,E=3,S=2,A=1,N=10,I=-2,k=e=>"*"===e;function T(e,t){let r=e.split("/"),n=r.length;return r.some(k)&&(n+=I),t&&(n+=S),r.filter(e=>!k(e)).reduce((e,t)=>e+(_.test(t)?E:""===t?A:N),n)}function O(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,o={},i="/",a=[];for(let s=0;s<n.length;++s){let e=n[s],l=s===n.length-1,c="/"===i?t:t.slice(i.length)||"/",u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(o,u.params),a.push({params:o,pathname:F([i,u.pathname]),pathnameBase:U(F([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=F([i,u.pathnameBase]))}return a}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,n]}(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:o}=t;if("*"===n){let e=s[r]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[r];return e[n]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function M(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function j(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function B(e,t){let r=D(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function L(e,t,r,n){let o;void 0===n&&(n=!1),"string"===typeof e?o=m(e):(o=c({},e),d(!o.pathname||!o.pathname.includes("?"),j("?","pathname","search",o)),d(!o.pathname||!o.pathname.includes("#"),j("#","pathname","hash",o)),d(!o.search||!o.search.includes("#"),j("#","search","hash",o)));let i,a=""===e||""===o.pathname,s=a?"/":o.pathname;if(null==s)i=r;else{let e=t.length-1;if(!n&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:o=""}="string"===typeof e?m(e):e,i=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:i,search:z(n),hash:V(o)}}(o,i),u=s&&"/"!==s&&s.endsWith("/"),f=(a||"."===s)&&r.endsWith("/");return l.pathname.endsWith("/")||!u&&!f||(l.pathname+="/"),l}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],G=(new Set(W),["get",...W]);new Set(G),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X.apply(this,arguments)}const Y=o.createContext(null);const K=o.createContext(null);const Z=o.createContext(null);const q=o.createContext(null);const $=o.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=o.createContext(null);function J(){return null!=o.useContext(q)}function ee(){return J()||d(!1),o.useContext(q).location}function te(e){o.useContext(Z).static||o.useLayoutEffect(e)}function re(){let{isDataRoute:e}=o.useContext($);return e?function(){let{router:e}=fe(ue.UseNavigateStable),t=pe(de.UseNavigateStable),r=o.useRef(!1);return te(()=>{r.current=!0}),o.useCallback(function(n,o){void 0===o&&(o={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,X({fromRouteId:t},o)))},[e,t])}():function(){J()||d(!1);let e=o.useContext(Y),{basename:t,future:r,navigator:n}=o.useContext(Z),{matches:i}=o.useContext($),{pathname:a}=ee(),s=JSON.stringify(B(i,r.v7_relativeSplatPath)),l=o.useRef(!1);return te(()=>{l.current=!0}),o.useCallback(function(r,o){if(void 0===o&&(o={}),!l.current)return;if("number"===typeof r)return void n.go(r);let i=L(r,JSON.parse(s),a,"path"===o.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:F([t,i.pathname])),(o.replace?n.replace:n.push)(i,o.state,o)},[t,n,s,a,e])}()}function ne(){let{matches:e}=o.useContext($),t=e[e.length-1];return t?t.params:{}}function oe(e,t,r,i){J()||d(!1);let{navigator:a}=o.useContext(Z),{matches:s}=o.useContext($),l=s[s.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let f,h=ee();if(t){var p;let e="string"===typeof t?m(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),f=e}else f=h;let g=f.pathname||"/",y=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=w(e,{pathname:y});let b=ce(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:F([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,r,i);return t&&b?o.createElement(q.Provider,{value:{location:X({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:n.Pop}},b):b}function ie(){let e=function(){var e;let t=o.useContext(Q),r=he(de.UseRouteError),n=pe(de.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=H(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),r?o.createElement("pre",{style:i},r):null,null)}const ae=o.createElement(ie,null);class se extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?o.createElement($.Provider,{value:this.props.routeContext},o.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:r,children:n}=e,i=o.useContext(Y);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),o.createElement($.Provider,{value:t},n)}function ce(e,t,r,n){var i;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===n&&(n=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=n)&&a.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let s=e,l=null==(i=r)?void 0:i.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let o=0;o<s.length;o++){let e=s[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=o),e.route.id){let{loaderData:t,errors:n}=r,o=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||o){c=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight((e,n,i)=>{let a,d=!1,f=null,h=null;var p;r&&(a=l&&n.route.id?l[n.route.id]:void 0,f=n.route.errorElement||ae,c&&(u<0&&0===i?(p="route-fallback",!1||ge[p]||(ge[p]=!0),d=!0,h=null):u===i&&(d=!0,h=n.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,i+1)),m=()=>{let t;return t=a?f:d?h:n.route.Component?o.createElement(n.route.Component,null):n.route.element?n.route.element:e,o.createElement(le,{match:n,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===i)?o.createElement(se,{location:r.location,revalidation:r.revalidation,component:f,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function fe(e){let t=o.useContext(Y);return t||d(!1),t}function he(e){let t=o.useContext(K);return t||d(!1),t}function pe(e){let t=function(){let e=o.useContext($);return e||d(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||d(!1),r.route.id}const ge={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ye(e){d(!1)}function ve(e){let{basename:t="/",children:r=null,location:i,navigationType:a=n.Pop,navigator:s,static:l=!1,future:c}=e;J()&&d(!1);let u=t.replace(/^\/*/,"/"),f=o.useMemo(()=>({basename:u,navigator:s,static:l,future:X({v7_relativeSplatPath:!1},c)}),[u,c,s,l]);"string"===typeof i&&(i=m(i));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:v="default"}=i,w=o.useMemo(()=>{let e=P(h,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:y,key:v},navigationType:a}},[u,h,p,g,y,v,a]);return null==w?null:o.createElement(Z.Provider,{value:f},o.createElement(q.Provider,{children:r,value:w}))}function we(e){let{children:t,location:r}=e;return oe(be(t),r)}new Promise(()=>{});o.Component;function be(e,t){void 0===t&&(t=[]);let r=[];return o.Children.forEach(e,(e,n)=>{if(!o.isValidElement(e))return;let i=[...t,n];if(e.type===o.Fragment)return void r.push.apply(r,be(e.props.children,i));e.type!==ye&&d(!1),e.props.index&&e.props.children&&d(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,i)),r.push(a)}),r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Au){}new Map;const xe=i.startTransition;l.flushSync,i.useId;function Ce(e){let{basename:t,children:r,future:n,window:i}=e,a=o.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:i,v5Compat:!0})&&(s={}),y(function(e,t){let{pathname:r,search:n,hash:o}=e.location;return p("",{pathname:r,search:n,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:g(t)},null,s)));let l=a.current,[c,u]=o.useState({action:l.action,location:l.location}),{v7_startTransition:d}=n||{},f=o.useCallback(e=>{d&&xe?xe(()=>u(e)):u(e)},[u,d]);return o.useLayoutEffect(()=>l.listen(f),[l,f]),o.useEffect(()=>me(n),[n]),o.createElement(ve,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:l,future:n})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var _e,Ee;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_e||(_e={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ee||(Ee={}));const Se=()=>localStorage.getItem("access_token"),Ae=()=>localStorage.getItem("refresh_token"),Ne=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=[1e3,2e3,4e3],r=Ae();if(!r)return Te("no_refresh_token"),!1;try{const n=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:r})});if(401===n.status||403===n.status)return console.error("[refreshAccessToken] Token invalid/expired, logging out"),Te("token_expired"),!1;if(!n.ok){if(e<3){const r=t[e];return console.warn("[refreshAccessToken] Server error (".concat(n.status,"), retrying in ").concat(r,"ms... (").concat(e+1,"/").concat(3,")")),await new Promise(e=>setTimeout(e,r)),Ne(e+1)}return console.error("[refreshAccessToken] Max retries reached, logging out"),Te("refresh_failed"),!1}const o=await n.json();return o.success&&o.data.access_token?(((e,t)=>{localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t),localStorage.setItem("token_timestamp",Date.now().toString())})(o.data.access_token,o.data.refresh_token),console.log("[refreshAccessToken] Token refreshed successfully"),!0):(console.error("[refreshAccessToken] Unexpected response format"),Te("refresh_failed"),!1)}catch(n){if(e<3){const r=t[e];return console.warn("[refreshAccessToken] Network error, retrying in ".concat(r,"ms... (").concat(e+1,"/").concat(3,")"),n),await new Promise(e=>setTimeout(e,r)),Ne(e+1)}return console.error("[refreshAccessToken] Max retries reached after network errors, logging out"),Te("network_error"),!1}},Ie=()=>{const e=Se();if(!e)return null;try{return JSON.parse(atob(e.split(".")[1])).user_id||null}catch(t){return null}},ke=()=>!!Se(),Te=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"manual";const t=Ae(),r=Se();if(t&&r&&"manual"===e)try{const e=JSON.parse(atob(r.split(".")[1])).user_id;await fetch("/api/auth/logout?user_id=".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:t,logout_all_devices:!1})})}catch(n){console.error("[logout] Backend logout API call failed:",n)}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_timestamp"),window.dispatchEvent(new CustomEvent("logout",{detail:{reason:e}})),console.log("[logout] User logged out, reason: ".concat(e))};var Oe=r(579);const Re=e=>{let{isOpen:t,onClose:r,onLoginSuccess:n}=e;const[i,a]=(0,o.useState)(""),[s,l]=(0,o.useState)(""),[c,u]=(0,o.useState)(!1),[d,f]=(0,o.useState)("");if(!t)return null;return(0,Oe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Oe.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Oe.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Login"}),(0,Oe.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Oe.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),f("");try{const e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:s})}),t=await e.json();t.success&&t.data.access_token?(localStorage.setItem("access_token",t.data.access_token),localStorage.setItem("refresh_token",t.data.refresh_token),n(t.data.access_token),r()):f(t.message||"Login gagal")}catch(t){f("Terjadi kesalahan. Silakan coba lagi.")}finally{u(!1)}},className:"space-y-4",children:[d&&(0,Oe.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:d}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,Oe.jsx)("input",{type:"email",value:i,onChange:e=>a(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"nama@email.com",required:!0})]}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Oe.jsx)("input",{type:"password",value:s,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0})]}),(0,Oe.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-400 transition-colors",children:c?"Loading...":"Login"})]}),(0,Oe.jsx)("p",{className:"mt-4 text-sm text-gray-500 text-center",children:"Login untuk mengakses dashboard dan kelola tenant Anda"})]})})},Me=()=>{const e=re(),[t,r]=(0,o.useState)(""),[n,i]=(0,o.useState)(!1),a=()=>{t.trim()&&i(!0)};return(0,Oe.jsxs)(Oe.Fragment,{children:[(0,Oe.jsxs)("div",{className:"min-h-screen bg-white flex flex-col",children:[(0,Oe.jsxs)("header",{className:"w-full py-5 px-6 flex items-center justify-between",children:[(0,Oe.jsx)("h1",{className:"text-2xl font-medium text-gray-900",children:"milkyhoop"}),(0,Oe.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Oe.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),(0,Oe.jsx)("main",{className:"flex-1 flex items-center justify-center px-4 py-8",children:(0,Oe.jsxs)("div",{className:"w-full max-w-sm",children:[(0,Oe.jsxs)("div",{className:"mb-10 text-center",children:[(0,Oe.jsxs)("h2",{className:"text-5xl sm:text-6xl font-semibold text-gray-900 mb-3 leading-tight",children:["Financial",(0,Oe.jsx)("br",{}),"Automation Tools"]}),(0,Oe.jsx)("p",{className:"text-lg text-gray-600 font-light",children:"No Pain Still Gain"})]}),(0,Oe.jsxs)("div",{className:"space-y-2.5 mx-auto",style:{maxWidth:"70%"},children:[(0,Oe.jsxs)("button",{onClick:()=>{console.log("Google login clicked")},className:"w-full flex items-center justify-center gap-2.5 px-4 py-2 bg-white border border-gray-300 rounded-lg text-[15px] text-gray-900 font-normal hover:bg-gray-50 transition-colors duration-200",children:[(0,Oe.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Oe.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Oe.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Oe.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,Oe.jsx)("span",{children:"Continue with Google"})]}),(0,Oe.jsxs)("div",{className:"flex items-center gap-3 my-3",children:[(0,Oe.jsx)("div",{className:"flex-1 h-px bg-gray-200"}),(0,Oe.jsx)("span",{className:"text-sm text-gray-500 font-normal",children:"OR"}),(0,Oe.jsx)("div",{className:"flex-1 h-px bg-gray-200"})]}),(0,Oe.jsx)("input",{type:"email",value:t,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),a())},placeholder:"Enter your email",className:"w-full px-3.5 py-2 bg-white border border-gray-300 rounded-lg text-[15px] text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 focus:ring-1 focus:ring-gray-400 transition-all duration-200"}),(0,Oe.jsx)("button",{onClick:a,disabled:!t.trim(),className:"w-full px-4 py-2 bg-gray-900 hover:bg-black disabled:bg-gray-300 disabled:cursor-not-allowed text-white text-[15px] font-normal rounded-lg transition-all duration-200",children:"Continue with email"}),(0,Oe.jsxs)("p",{className:"text-xs text-gray-500 text-center mt-2.5 leading-relaxed",children:["By continuing, you acknowledge",(0,Oe.jsx)("br",{}),"MilkyHoop's Privacy Policy."]})]})]})}),(0,Oe.jsx)("footer",{className:"w-full py-4 text-center",children:(0,Oe.jsx)("p",{className:"text-xs text-gray-400",children:"\xa9 2025 MilkyHoop. Financial Automation Tools."})})]}),(0,Oe.jsx)(Re,{isOpen:n,onClose:()=>i(!1),onLoginSuccess:t=>{console.log("Login successful, redirecting to dashboard..."),e("/"),window.location.reload()}})]})},Pe=()=>(0,Oe.jsxs)("div",{className:"flex flex-col items-center py-6 w-full h-full bg-gray-200 border-r border-gray-300",children:[(0,Oe.jsx)("button",{className:"p-3 mb-6 rounded-lg bg-gray-200 hover:bg-gray-400 transition-colors",children:(0,Oe.jsx)("svg",{className:"w-6 h-6 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,Oe.jsx)("div",{className:"flex-1"}),(0,Oe.jsx)("button",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-medium hover:bg-gray-400 transition-colors",children:(0,Oe.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]}),je=e=>{let{activeTab:t,onTabChange:r}=e;const n=[{id:"chat",icon:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),label:"Chat"},{id:"report",icon:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),label:"Report"},{id:"feed",icon:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),label:"Feed"},{id:"alert",icon:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),label:"Alert"},{id:"profile",icon:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),label:"Profile"}];return(0,Oe.jsxs)("nav",{className:"md:hidden flex-shrink-0 bg-white border-t border-gray-200 safe-area-bottom",children:[(0,Oe.jsx)("div",{className:"flex items-center justify-around h-14",children:n.map(e=>(0,Oe.jsxs)("button",{onClick:()=>r(e.id),className:"flex flex-col items-center justify-center flex-1 h-full relative transition-colors ".concat(t===e.id?"text-emerald-600":"text-gray-500 hover:text-gray-700"),children:[e.icon,(0,Oe.jsx)("span",{className:"text-xs mt-0.5",children:e.label}),t===e.id&&(0,Oe.jsx)("div",{className:"absolute bottom-1 w-1 h-1 bg-emerald-600 rounded-full"})]},e.id))}),(0,Oe.jsx)("style",{children:"\n        .safe-area-bottom {\n          padding-bottom: env(safe-area-inset-bottom, 0);\n        }\n      "})]})},De=()=>{const[e,t]=(0,o.useState)(!1),[r,n]=(0,o.useState)(null),[i,a]=(0,o.useState)(!1),[s,l]=(0,o.useState)("true"===localStorage.getItem("pwa-installed"));(0,o.useEffect)(()=>{const e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;t(e);const r=e=>{e.preventDefault(),n(e)};return window.addEventListener("beforeinstallprompt",r),()=>{window.removeEventListener("beforeinstallprompt",r)}},[]);return window.matchMedia("(display-mode: standalone)").matches?null:(0,Oe.jsxs)(Oe.Fragment,{children:[(0,Oe.jsx)("div",{className:"md:hidden bg-gradient-to-r from-emerald-500 to-emerald-600 text-white",children:(0,Oe.jsxs)("button",{onClick:()=>{s?window.location.href="/":e?a(!0):r&&(r.prompt(),r.userChoice.then(e=>{let{outcome:t}=e;"accepted"===t&&(localStorage.setItem("pwa-installed","true"),l(!0))}))},className:"w-full px-4 py-3 text-left flex items-center justify-between hover:bg-black/5 transition-colors",children:[(0,Oe.jsxs)("div",{className:"flex-1",children:[(0,Oe.jsx)("div",{className:"font-medium text-[15px]",children:s?"Pakai di aplikasi lebih cepat":e?"Share and Add to Home Screen":"Install MilkyHoop"}),(0,Oe.jsx)("div",{className:"text-xs opacity-90 mt-0.5",children:s?"Kamu sudah install":"Akses lebih cepat!"})]}),(0,Oe.jsx)("svg",{className:"w-5 h-5 flex-shrink-0 ml-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),i&&(0,Oe.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-end md:items-center justify-center p-4",onClick:()=>a(!1),children:(0,Oe.jsxs)("div",{className:"bg-white rounded-t-2xl md:rounded-2xl p-6 max-w-sm w-full animate-slide-up",onClick:e=>e.stopPropagation(),children:[(0,Oe.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Cara Install MilkyHoop"}),(0,Oe.jsxs)("ol",{className:"space-y-3 text-sm text-gray-700",children:[(0,Oe.jsxs)("li",{className:"flex gap-3",children:[(0,Oe.jsx)("span",{className:"font-semibold text-emerald-600",children:"1."}),(0,Oe.jsxs)("span",{children:["Tap tombol ",(0,Oe.jsx)("strong",{children:"Share"})," (ikon \u2b06\ufe0f) di bawah browser"]})]}),(0,Oe.jsxs)("li",{className:"flex gap-3",children:[(0,Oe.jsx)("span",{className:"font-semibold text-emerald-600",children:"2."}),(0,Oe.jsxs)("span",{children:["Scroll dan pilih ",(0,Oe.jsx)("strong",{children:'"Add to Home Screen"'})]})]}),(0,Oe.jsxs)("li",{className:"flex gap-3",children:[(0,Oe.jsx)("span",{className:"font-semibold text-emerald-600",children:"3."}),(0,Oe.jsxs)("span",{children:["Tap ",(0,Oe.jsx)("strong",{children:'"Add"'})," di pojok kanan atas"]})]})]}),(0,Oe.jsx)("button",{onClick:()=>{a(!1),localStorage.setItem("pwa-installed","true"),l(!0)},className:"w-full mt-6 bg-emerald-600 text-white py-3 rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:"Mengerti"})]})}),(0,Oe.jsx)("style",{children:"\n        @keyframes slide-up {\n          from {\n            transform: translateY(100%);\n          }\n          to {\n            transform: translateY(0);\n          }\n        }\n        .animate-slide-up {\n          animation: slide-up 0.3s ease-out;\n        }\n      "})]})},Be=e=>{let{tenants:t,activeTenant:r,onSelectTenant:n,isLoading:i=!1}=e;const[a,s]=(0,o.useState)(""),[l,c]=(0,o.useState)("chat"),u=(0,o.useMemo)(()=>t.filter(e=>"milky-assistant"!==e.id).filter(e=>e.name.toLowerCase().includes(a.toLowerCase())),[t,a]);return(0,Oe.jsxs)("div",{className:"w-full h-full bg-white border-r border-gray-200",children:[(0,Oe.jsxs)("div",{className:"md:hidden flex flex-col w-full bg-white",style:{position:"fixed",inset:0,height:"100dvh",maxHeight:"100dvh",overflow:"hidden",overscrollBehavior:"none",touchAction:"none",backgroundColor:"#ffffff"},children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between px-6 border-b border-gray-200 bg-white",style:{height:"calc(56px + env(safe-area-inset-top))",paddingTop:"env(safe-area-inset-top)",position:"fixed",top:0,left:0,right:0,zIndex:50,backgroundColor:"#ffffff"},children:[(0,Oe.jsx)("h1",{className:"text-xl font-medium text-gray-900",children:"milkyhoop"}),(0,Oe.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,Oe.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]}),(0,Oe.jsxs)("div",{className:"bg-white",style:{position:"absolute",top:"calc(56px + env(safe-area-inset-top))",bottom:"calc(56px + env(safe-area-inset-bottom))",left:0,right:0,overflowY:"scroll",overflowX:"hidden",overscrollBehavior:"contain",touchAction:"pan-y",WebkitOverflowScrolling:"touch",backgroundColor:"#ffffff"},children:[(0,Oe.jsx)(De,{}),(0,Oe.jsx)("div",{className:"px-6 py-3 bg-white",children:(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsx)("input",{type:"text",value:a,onChange:e=>s(e.target.value),placeholder:"Search tenants...",className:"w-full pl-9 pr-3 py-2 text-sm bg-gray-100 rounded-lg focus:outline-none focus:bg-gray-200 transition-colors"}),(0,Oe.jsx)("svg",{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,Oe.jsx)("div",{onClick:()=>n("milky-assistant"),className:"px-6 py-4 cursor-pointer transition-colors ".concat("milky-assistant"===(null===r||void 0===r?void 0:r.id)?"bg-gray-100":"hover:bg-gray-50"),children:(0,Oe.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Oe.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:(0,Oe.jsx)("span",{className:"text-xl",children:"\ud83d\udca1"})}),(0,Oe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Oe.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Milky Assistant"}),(0,Oe.jsx)("span",{className:"text-xs text-gray-500",children:"Now"})]}),(0,Oe.jsx)("p",{className:"text-xs text-gray-600 truncate",children:"Selamat datang! Mau buat tenant?"})]})]})}),i&&(0,Oe.jsx)("div",{className:"px-6 py-4 text-center text-gray-500 text-sm",children:"Loading tenants..."}),u.map(e=>(0,Oe.jsx)("div",{onClick:()=>n(e.id),className:"px-6 py-4 cursor-pointer transition-colors ".concat((null===r||void 0===r?void 0:r.id)===e.id?"bg-gray-100":"hover:bg-gray-50"),children:(0,Oe.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Oe.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-medium flex-shrink-0 text-base",children:e.avatar||e.name.charAt(0)}),(0,Oe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Oe.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Oe.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.isPrivate&&(0,Oe.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]}),(0,Oe.jsx)("span",{className:"text-xs text-gray-500 flex-shrink-0",children:e.lastMessageTime||"Now"})]}),(0,Oe.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Oe.jsx)("p",{className:"text-xs text-gray-500 truncate flex-1",children:e.lastMessage}),e.unreadCount&&(0,Oe.jsx)("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-gray-900 text-white rounded-full flex-shrink-0",children:e.unreadCount})]}),e.role&&(0,Oe.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:["(",e.role,")"]})]})]})},e.id)),0===u.length&&a&&(0,Oe.jsxs)("div",{className:"px-4 py-8 text-center text-gray-500 text-sm",children:['No tenants found for "',a,'"']})]}),(0,Oe.jsx)("div",{style:{position:"fixed",bottom:0,left:0,right:0,zIndex:50,backgroundColor:"#ffffff",paddingBottom:"env(safe-area-inset-bottom)"},children:(0,Oe.jsx)(je,{activeTab:l,onTabChange:e=>{c(e)}})})]}),(0,Oe.jsxs)("div",{className:"hidden md:flex md:flex-col md:h-full",children:[(0,Oe.jsxs)("div",{className:"px-4 py-4 border-b border-gray-200",children:[(0,Oe.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"MilkyHoop"}),(0,Oe.jsxs)("div",{className:"relative mb-3",children:[(0,Oe.jsx)("input",{type:"text",value:a,onChange:e=>s(e.target.value),placeholder:"Cari atau mulai chat baru",className:"w-full pl-10 pr-3 py-2.5 text-sm bg-gray-100 rounded-lg focus:outline-none focus:bg-gray-200 transition-colors"}),(0,Oe.jsx)("svg",{className:"absolute left-3 top-3 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,Oe.jsxs)("div",{className:"flex gap-2",children:[(0,Oe.jsx)("button",{className:"px-3 py-1.5 text-sm font-medium bg-gray-900 text-white rounded-full",children:"Semua"}),(0,Oe.jsx)("button",{className:"px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-full transition-colors",children:"Belum dibaca"})]})]}),(0,Oe.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,Oe.jsx)("div",{onClick:()=>n("milky-assistant"),className:"px-6 py-4 cursor-pointer transition-colors ".concat("milky-assistant"===(null===r||void 0===r?void 0:r.id)?"bg-gray-100":"hover:bg-gray-50"),children:(0,Oe.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Oe.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:(0,Oe.jsx)("span",{className:"text-xl",children:"\ud83d\udca1"})}),(0,Oe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Oe.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Milky Assistant"}),(0,Oe.jsx)("span",{className:"text-xs text-gray-500",children:"Now"})]}),(0,Oe.jsx)("p",{className:"text-xs text-gray-600 truncate",children:"Selamat datang! Mau buat tenant?"})]})]})}),i&&(0,Oe.jsx)("div",{className:"px-6 py-4 text-center text-gray-500 text-sm",children:"Loading tenants..."}),u.map(e=>(0,Oe.jsx)("div",{onClick:()=>n(e.id),className:"px-6 py-4 cursor-pointer transition-colors ".concat((null===r||void 0===r?void 0:r.id)===e.id?"bg-gray-100":"hover:bg-gray-50"),children:(0,Oe.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Oe.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-gray-700 font-medium flex-shrink-0 text-base",children:e.avatar||e.name.charAt(0)}),(0,Oe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Oe.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Oe.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.isPrivate&&(0,Oe.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]}),(0,Oe.jsx)("span",{className:"text-xs text-gray-500 flex-shrink-0",children:e.lastMessageTime||"Now"})]}),(0,Oe.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Oe.jsx)("p",{className:"text-xs text-gray-500 truncate flex-1",children:e.lastMessage}),e.unreadCount&&(0,Oe.jsx)("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-gray-900 text-white rounded-full flex-shrink-0",children:e.unreadCount})]}),e.role&&(0,Oe.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:["(",e.role,")"]})]})]})},e.id)),0===u.length&&a&&(0,Oe.jsxs)("div",{className:"px-4 py-8 text-center text-gray-500 text-sm",children:['No tenants found for "',a,'"']})]}),(0,Oe.jsx)("div",{className:"p-4",children:(0,Oe.jsxs)("button",{className:"w-full px-4 py-2.5 bg-gray-900 hover:bg-black text-white text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Buat Tenant Baru"]})})]})]})};function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Fe(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Le(t)?t:t+""}function Ue(e,t,r){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(r),!0).forEach(function(t){Ue(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const He={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"",We=e=>e.startsWith("http")?e:He?"".concat(He).concat(e):e,Ge=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((()=>{const e=Se();if(!e)return!0;try{const t=1e3*JSON.parse(atob(e.split(".")[1])).exp;return t-Date.now()<3e5}catch(t){return!0}})()){console.log("[fetchWithAuth] Token expiring soon, refreshing...");if(!await Ne())throw new Error("Token refresh failed - user logged out")}const n=Se(),o=We(e),i=await fetch(o,Ve(Ve({},t),{},{headers:Ve(Ve({},t.headers),n&&{Authorization:"Bearer ".concat(n)})}));if(401===i.status){if(r<2){console.log("[fetchWithAuth] Got 401, attempting token refresh (retry ".concat(r+1,"/").concat(2,")..."));if(await Ne()){const r=Se(),n=We(e);return fetch(n,Ve(Ve({},t),{},{headers:Ve(Ve({},t.headers),r&&{Authorization:"Bearer ".concat(r)})}))}throw new Error("Authentication failed - please login again")}throw console.error("[fetchWithAuth] Max retries reached for 401"),new Error("Authentication failed after retries")}return i},Xe=async e=>{if(!Se())return!1;try{return(await Ge("/api/tenant/".concat(e,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"__check_access__"})})).ok}catch(t){return console.error("[checkTenantAccess] Failed:",t),!1}},Ye=async(e,t)=>{const r=await Ge("/api/tenant/".concat(e,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})});if(!r.ok)throw new Error("API call failed: ".concat(r.status));return r.json()},Ke=async()=>{const e=(()=>{const e=Se();if(!e)return null;try{return JSON.parse(atob(e.split(".")[1])).tenant_id||null}catch(t){return null}})();if(!e)return[];try{const t=await(async e=>{const t="/api/tenant/".concat(e,"/info"),r=We(t),n=await fetch(r);if(!n.ok)throw new Error("Failed to fetch tenant info: ".concat(n.status));return n.json()})(e);return[{id:e,name:t.display_name||t.name||e.charAt(0).toUpperCase()+e.slice(1),avatar:t.avatar||"\ud83c\udfea",status:"online",lastMessage:"",lastMessageTime:"Now",role:"Owner",isPrivate:!0}]}catch(t){return[{id:e,name:e.charAt(0).toUpperCase()+e.slice(1),avatar:"\ud83c\udfea",status:"online",lastMessage:"",lastMessageTime:"Now",role:"Owner",isPrivate:!0}]}},Ze=[{id:"sales_product",label:"POS",icon:"/icons/Jual%20produk.png",disabled:!1},{id:"purchase_goods",label:"Kulakan",icon:"/icons/Beli%20barang.png",disabled:!1},{id:"expense",label:"Beban",icon:"/icons/Beban.png",disabled:!1},{id:"inventory_update",label:"Inventory",icon:"/icons/Update%20Stok.png",disabled:!1},{id:"cash_bank",label:"Kas & Bank",icon:"/icons/Modal.png",disabled:!1},{id:"debt_receivable",label:"Hutang/\nPiutang",icon:"/icons/Neraca.png",disabled:!1},{id:"customer",label:"Pelanggan",icon:"/icons/Prive.png",disabled:!1},{id:"insight",label:"Insight",icon:"/icons/Laba%20rugi.png",disabled:!1}],qe=e=>{let{isMobile:t=!1,onMenuItemClick:r}=e;const[n,i]=(0,o.useState)(!1),a=(0,o.useRef)(null);(0,o.useEffect)(()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&i(!1)};return n&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[n]);const s=e=>{console.log("[ActionMenuButton] Menu item clicked:",e),i(!1),null===r||void 0===r||r(e)};return(0,Oe.jsxs)("div",{ref:a,className:"relative",children:[(0,Oe.jsx)("button",{onClick:()=>i(!n),className:"w-10 h-10 flex items-center justify-center bg-transparent hover:bg-gray-200/50 text-gray-700 rounded-full transition-colors","aria-label":"Open action menu",children:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),n&&(0,Oe.jsx)(Oe.Fragment,{children:t?(0,Oe.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end",children:[(0,Oe.jsx)("div",{className:"absolute inset-0 bg-black/20",onClick:()=>i(!1)}),(0,Oe.jsxs)("div",{className:"relative w-full bg-white rounded-t-2xl shadow-2xl animate-slide-up",style:{maxHeight:"70vh",paddingBottom:"env(safe-area-inset-bottom, 16px)"},children:[(0,Oe.jsx)("div",{className:"flex justify-center pt-3 pb-2",children:(0,Oe.jsx)("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),(0,Oe.jsx)("div",{className:"px-4 pb-6 pt-2",children:(0,Oe.jsx)("div",{className:"grid grid-cols-4 gap-3",children:Ze.map(e=>(0,Oe.jsxs)("button",{onClick:()=>s(e.id),disabled:e.disabled,className:"flex flex-col items-center justify-start text-center disabled:opacity-40 disabled:cursor-not-allowed",style:{minHeight:"80px"},children:[(0,Oe.jsx)("div",{className:"w-12 h-12 mb-2 flex items-center justify-center",children:(0,Oe.jsx)("img",{src:e.icon,alt:e.label,className:"w-full h-full object-contain"})}),(0,Oe.jsx)("div",{className:"text-xs font-normal text-gray-800 leading-tight px-1 whitespace-pre-line",children:e.label})]},e.id))})})]})]}):(0,Oe.jsx)("div",{className:"absolute bottom-full left-0 mb-2 bg-white rounded-2xl py-1 z-50 animate-popup-slide",style:{minWidth:"220px",maxWidth:"220px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15)"},children:Ze.map((e,t)=>(0,Oe.jsxs)("button",{onClick:()=>s(e.id),disabled:e.disabled,className:"w-full flex items-center gap-3 px-5 py-3 hover:bg-gray-50 transition-colors text-left disabled:opacity-40 disabled:cursor-not-allowed ".concat(0===t?"rounded-t-2xl":""," ").concat(t===Ze.length-1?"rounded-b-2xl":""),children:[(0,Oe.jsx)("div",{className:"w-6 h-6 flex-shrink-0",children:(0,Oe.jsx)("img",{src:e.icon,alt:e.label,className:"w-full h-full object-contain"})}),(0,Oe.jsx)("span",{className:"text-[15px] font-normal text-gray-800",children:e.label})]},e.id))})})]})},$e="milkyhoop_draft_purchase",Qe={karton:"pcs",dus:"pcs",box:"pcs",slop:"bungkus",bal:"bungkus",koli:"pcs",pack:"pcs",lusin:"pcs",kg:"kg",liter:"liter"},Je=["karton","dus","box","slop","bal","koli","pack","lusin","kg","liter"],et=["pcs","lembar","unit","liter","mili liter","gram","kg","botol","sachet","bungkus"],tt=e=>new Intl.NumberFormat("id-ID",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),rt=e=>{const t=e.replace(/[^\d]/g,"");return parseInt(t,10)||0},nt=e=>e.toISOString().split("T")[0],ot=()=>{const e=new Date;return e.setDate(e.getDate()+1),nt(e)},it=()=>({type:"wholesales",supplier:"",date:nt(new Date),product:"",qty:1,unit:"karton",unitsPerPack:void 0,pricePerUnit:0,discountType:"none",discountValue:void 0,notes:"",paymentMethod:"transfer",dueDate:void 0,includePPN:!1}),at=e=>{let{isOpen:t,onClose:r,isMobile:n=!1,onTransactionComplete:i,scannedProductData:a}=e;const s=re(),[l,c]=(ee(),(0,o.useState)(1)),[u,d]=(0,o.useState)(it()),[f,h]=(0,o.useState)({}),[p,g]=(0,o.useState)({}),[m,y]=(0,o.useState)(!1),[v,w]=(0,o.useState)("idle"),[b,x]=(0,o.useState)(!1),[C,_]=(0,o.useState)(!1),[E,S]=(0,o.useState)(""),[A,N]=(0,o.useState)(""),[I,k]=(0,o.useState)("right"),[T,O]=(0,o.useState)(!1),[R,M]=(0,o.useState)(null),[P,j]=(0,o.useState)(null);(0,o.useEffect)(()=>{if(console.log("[PurchaseForm] scannedProductData effect:",{isOpen:t,scannedProductData:a,lastProcessedBarcode:R}),t&&a){const{name:e,barcode:t,unit:r,units_per_pack:n,harga_jual:o,last_price:i}=a;if(t===R)return void console.log("[PurchaseForm] Skipping - already processed barcode:",t);const s=setTimeout(()=>{console.log("[PurchaseForm] AUTO-FILLING from scan:",{name:e,barcode:t,unit:r,units_per_pack:n,harga_jual:o,last_price:i}),d(t=>Ve(Ve(Ve(Ve({},t),{},{product:e},r?{unit:r}:{}),n&&n>0?{unitsPerPack:n}:{}),i&&i>0?{pricePerUnit:i}:{})),S(""),M(t),o&&o>0&&j(o),c(e=>1===e?2:e)},150);return()=>clearTimeout(s)}},[t,a,R]),(0,o.useEffect)(()=>{t||(console.log("[PurchaseForm] Form closed - resetting lastProcessedBarcode"),M(null))},[t]);const[D,B]=(0,o.useState)([]),[L,F]=(0,o.useState)([]),[U,z]=(0,o.useState)(!1),[V,H]=(0,o.useState)(!1),W=(0,o.useRef)(null),G=(0,o.useRef)(null),X=(0,o.useRef)(null),Y=(0,o.useRef)(null),K=(0,o.useRef)(null);(0,o.useEffect)(()=>{var e;const t=()=>{const e=window.visualViewport;if(e&&e.height<.75*window.innerHeight){const e=document.activeElement;!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center"})},100)}};return null===(e=window.visualViewport)||void 0===e||e.addEventListener("resize",t),()=>{var e;return null===(e=window.visualViewport)||void 0===e?void 0:e.removeEventListener("resize",t)}},[]);(0,o.useEffect)(()=>(Y.current&&clearTimeout(Y.current),E&&b?Y.current=setTimeout(()=>{(async e=>{if(e.length<1)B([]);else{z(!0);try{const t=localStorage.getItem("access_token"),r=await fetch("/api/products/search?q=".concat(encodeURIComponent(e),"&limit=10"),{headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){const e=await r.json();B(e.suggestions||[])}else B([])}catch(t){console.error("Failed to fetch product suggestions:",t),B([])}finally{z(!1)}}})(E)},300):B([]),()=>{Y.current&&clearTimeout(Y.current)}),[E,b]),(0,o.useEffect)(()=>(K.current&&clearTimeout(K.current),A&&C?K.current=setTimeout(()=>{(async e=>{if(e.length<1)F([]);else{H(!0);try{const t=localStorage.getItem("access_token"),r=await fetch("/api/suppliers/search?q=".concat(encodeURIComponent(e),"&limit=10"),{headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){const e=await r.json();F(e.suggestions||[])}else F([])}catch(t){console.error("Failed to fetch supplier suggestions:",t),F([])}finally{H(!1)}}})(A)},300):F([]),()=>{K.current&&clearTimeout(K.current)}),[A,C]);const Z=(0,o.useMemo)(()=>{const e=u.qty*u.pricePerUnit;let t=0;"amount"===u.discountType&&u.discountValue?t=u.discountValue:"percentage"===u.discountType&&u.discountValue&&(t=e*u.discountValue/100);const r=Math.max(0,e-t),n=u.includePPN?.11*r:0;return{subtotal:r,ppn:n,total:r+n,discount:t}},[u.qty,u.pricePerUnit,u.discountType,u.discountValue,u.includePPN]),q=(0,o.useMemo)(()=>{const e="wholesales"===u.type?Qe[u.unit]||"pcs":u.unit,t=u.unitsPerPack||1,r="wholesales"===u.type&&t>0?u.pricePerUnit/t:u.pricePerUnit,n="wholesales"===u.type?u.qty*t:u.qty,o=P?P-r:0;return{retailUnit:e,estimatedHppPerUnit:r,estimatedMargin:o,estimatedMarginPercent:r>0&&P?o/r*100:0,totalUnits:n,estimatedTotalProfit:o*n}},[u.type,u.unit,u.pricePerUnit,u.unitsPerPack,u.qty,P]),$=(0,o.useMemo)(()=>{const e=q.retailUnit,t=q.totalUnits,r=Z.total,n=t>0?r/t:0,o=P?P-n:0;return{retailUnit:e,finalHppPerUnit:n,finalMargin:o,finalMarginPercent:n>0&&P?o/n*100:0,totalUnits:t,finalTotalProfit:o*t}},[Z.total,q.retailUnit,q.totalUnits,P]);q.retailUnit,q.estimatedHppPerUnit,q.estimatedMargin,q.estimatedMarginPercent,q.totalUnits,q.estimatedTotalProfit;(0,o.useEffect)(()=>{if(4===l&&!P&&$.finalHppPerUnit>0){const e=Math.round(1.1*$.finalHppPerUnit);j(e)}},[l,$.finalHppPerUnit]),(0,o.useEffect)(()=>{if(t){const t=localStorage.getItem($e);if(t)try{const e=JSON.parse(t);Date.now()-e.timestamp<864e5?e.fromScan?(d(e.formData),c(e.currentStep),localStorage.removeItem($e)):O(!0):localStorage.removeItem($e)}catch(e){localStorage.removeItem($e)}}},[t]),(0,o.useEffect)(()=>{t&&setTimeout(()=>{1===l&&X.current?X.current.focus():G.current&&G.current.focus()},300)},[t,l]),(0,o.useEffect)(()=>{const e=e=>{"Escape"===e.key&&t&&r()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,r]),(0,o.useEffect)(()=>(document.body.style.overflow=t?"hidden":"",()=>{document.body.style.overflow=""}),[t]);const Q=e=>{const t={};return 1===e&&(u.type||(t.type="Tipe pembelian wajib dipilih"),u.date||(t.date="Tanggal wajib diisi")),2===e&&(u.product&&""!==u.product.trim()||(t.product="Produk wajib dipilih"),(!u.qty||u.qty<1)&&(t.qty="Qty minimal 1"),(!u.pricePerUnit||u.pricePerUnit<=0)&&(t.pricePerUnit="Harga wajib diisi"),"wholesales"===u.type&&(!u.unitsPerPack||u.unitsPerPack<=0)&&(t.unitsPerPack="Isi per unit wajib diisi untuk wholesales")),3===e&&("percentage"===u.discountType&&u.discountValue&&(u.discountValue<0||u.discountValue>100)&&(t.discountValue="Diskon harus 0-100%"),u.paymentMethod||(t.paymentMethod="Metode bayar wajib dipilih"),"kredit"!==u.paymentMethod||u.dueDate||(t.dueDate="Jatuh tempo wajib diisi")),h(t),0===Object.keys(t).length},J=e=>{g(t=>Ve(Ve({},t),{},{[e]:!0}))},te=(e,t)=>{d(r=>Ve(Ve({},r),{},{[e]:t})),f[e]&&h(t=>Ve(Ve({},t),{},{[e]:void 0}))},ne=()=>{Q(l)&&(k("right"),c(e=>Math.min(e+1,4)))},oe=()=>{k("left"),c(e=>Math.max(e-1,1))},ie=()=>{r(),setTimeout(()=>{d(it()),c(1),g({}),h({}),w("idle"),S(""),N(""),O(!1),j(null)},300)};if(!t)return null;const ae=e=>{if(1===e)return!!u.type&&!!u.date;if(2===e){const e=!!u.product&&u.product.trim().length>0,t=u.qty>=1,r=u.pricePerUnit>0,n=e&&t&&r;if("wholesales"===u.type){const e="number"===typeof u.unitsPerPack&&u.unitsPerPack>0;return n&&e}return n}return 3===e?!!u.paymentMethod&&("kredit"!==u.paymentMethod||!!u.dueDate):4===e};return(0,Oe.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center",children:[(0,Oe.jsx)("div",{className:"absolute inset-0 bg-black/20",onClick:ie}),T&&(0,Oe.jsx)("div",{className:"absolute inset-0 z-[101] flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"bg-white rounded-xl p-6 mx-4 max-w-sm shadow-2xl",children:[(0,Oe.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Lanjutkan Draft?"}),(0,Oe.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Anda memiliki draft yang belum selesai. Lanjutkan atau mulai baru?"}),(0,Oe.jsxs)("div",{className:"flex gap-3",children:[(0,Oe.jsx)("button",{onClick:()=>{localStorage.removeItem($e),O(!1)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Mulai Baru"}),(0,Oe.jsx)("button",{onClick:()=>{const e=localStorage.getItem($e);if(e){const t=JSON.parse(e);d(t.formData),c(t.currentStep)}O(!1)},className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Lanjutkan"})]})]})}),(0,Oe.jsxs)("div",{ref:W,className:"relative w-full bg-white shadow-2xl animate-slide-up sm:animate-popup-slide ".concat(n?"rounded-t-2xl max-h-[90vh]":"rounded-2xl max-w-[600px] max-h-[85vh] mx-4"),style:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15)"},children:[(0,Oe.jsxs)("div",{className:"sticky top-0 bg-white rounded-t-2xl border-b border-gray-200 px-4 sm:px-6 py-4 flex items-center justify-between z-10",children:[(0,Oe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Oe.jsx)("span",{className:"text-xl",children:"\ud83d\udce6"}),(0,Oe.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"BELI BARANG"})]}),(0,Oe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Oe.jsxs)("span",{className:"text-xs text-gray-500",children:["Step ",l,"/",4]}),(0,Oe.jsx)("button",{onClick:ie,className:"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close",children:(0,Oe.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,Oe.jsx)("div",{className:"px-4 sm:px-6 pt-3",children:(0,Oe.jsx)("div",{className:"h-1 bg-gray-200 rounded-full overflow-hidden",children:(0,Oe.jsx)("div",{className:"h-full bg-gray-800 transition-all duration-300 ease-out",style:{width:"".concat(l/4*100,"%")}})})}),(0,Oe.jsxs)("div",{className:"overflow-y-auto px-4 sm:px-6 py-4",style:{maxHeight:n?"calc(90vh - 180px)":"calc(85vh - 180px)"},children:[1===l&&(0,Oe.jsxs)("div",{className:"space-y-5 animate-fade-in",children:[(0,Oe.jsxs)("fieldset",{children:[(0,Oe.jsxs)("legend",{className:"text-sm font-medium text-gray-700 mb-3",children:["Tipe Pembelian ",(0,Oe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Oe.jsx)("div",{className:"grid grid-cols-2 gap-4",children:["wholesales","eceran"].map(e=>(0,Oe.jsxs)("button",{type:"button",ref:"wholesales"===e?X:void 0,onClick:()=>{te("type",e),te("unit","eceran"===e?"pcs":"karton")},className:"flex items-center justify-center gap-3 p-4 rounded-lg border-2 transition-all ".concat(u.type===e?"border-gray-800 bg-gray-50":"border-gray-200 hover:border-gray-300"),children:[(0,Oe.jsx)("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center ".concat(u.type===e?"border-gray-800":"border-gray-400"),children:u.type===e&&(0,Oe.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-800"})}),(0,Oe.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"wholesales"===e?"Wholesales":"Eceran"})]},e))}),f.type&&(0,Oe.jsx)("p",{className:"mt-2 text-xs text-red-500",children:f.type})]}),(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsxs)("label",{htmlFor:"supplier",className:"block text-sm font-medium text-gray-700 mb-1",children:["Supplier ",(0,Oe.jsx)("span",{className:"text-gray-400 text-xs",children:"(opsional)"})]}),(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsx)("input",{id:"supplier",type:"text",value:A||u.supplier,onChange:e=>{N(e.target.value),_(!0)},onFocus:()=>_(!0),onBlur:()=>setTimeout(()=>_(!1),200),placeholder:"Pilih supplier...",className:"w-full px-3 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500"}),(0,Oe.jsx)("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),C&&(0,Oe.jsxs)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[V?(0,Oe.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:(0,Oe.jsxs)("svg",{className:"animate-spin w-4 h-4 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Oe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):L.length>0?L.map((e,t)=>(0,Oe.jsxs)("button",{type:"button",onClick:()=>{te("supplier",e.name),N(""),_(!1)},className:"w-full text-left px-3 py-3 text-sm text-gray-800 hover:bg-gray-50 transition-colors flex justify-between items-center",children:[(0,Oe.jsx)("span",{children:e.name}),(0,Oe.jsxs)("span",{className:"text-xs text-gray-400",children:[e.usage_count,"x"]})]},"".concat(e.name,"-").concat(t))):A&&A.length>0?(0,Oe.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:"Tidak ada supplier ditemukan"}):null,A&&!L.find(e=>e.name.toLowerCase()===A.toLowerCase())&&(0,Oe.jsxs)("button",{type:"button",onClick:()=>{te("supplier",A),N(""),_(!1)},className:"w-full text-left px-3 py-3 text-sm text-blue-600 hover:bg-blue-50 transition-colors flex items-center gap-1 border-t border-gray-100",children:[(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),'Gunakan "',A,'"']})]})]}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsxs)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:["Tanggal ",(0,Oe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Oe.jsx)("input",{id:"date",type:"date",value:u.date,onChange:e=>te("date",e.target.value),onBlur:()=>J("date"),className:"w-full px-3 py-3 border rounded-lg text-sm text-gray-900 focus:outline-none focus:ring-1 ".concat(f.date&&p.date?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),f.date&&p.date&&(0,Oe.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.date})]})]}),2===l&&(0,Oe.jsxs)("div",{className:"space-y-4 animate-fade-in",children:[(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsx)("label",{htmlFor:"product",className:"block text-sm font-medium text-gray-700 mb-1",children:"Produk"}),(0,Oe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Oe.jsxs)("div",{className:"relative flex-1",children:[(0,Oe.jsx)("input",{id:"product",name:"product",ref:G,type:"text",value:E||u.product,onChange:e=>{S(e.target.value),x(!0)},onFocus:()=>x(!0),onBlur:()=>{setTimeout(()=>x(!1),200),J("product")},placeholder:"Cari produk...","aria-invalid":!!f.product,className:"w-full px-3 py-3 pr-8 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(f.product&&p.product?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Oe.jsx)("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,Oe.jsx)("button",{type:"button",onClick:()=>{const e=new URLSearchParams(window.location.search).get("tenant"),t={formData:u,currentStep:l,timestamp:Date.now(),fromScan:!0};localStorage.setItem($e,JSON.stringify(t)),s("/sales/scan",{state:{context:"purchase",tenantId:e,returnTo:"/app?tenant=".concat(e,"&action=openPurchaseForm")}}),r()},className:"p-3 border border-gray-300 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-50 active:bg-gray-100 transition-colors","aria-label":"Scan barcode",title:"Scan barcode produk",children:(0,Oe.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),b&&(0,Oe.jsxs)("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[U?(0,Oe.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:(0,Oe.jsxs)("svg",{className:"animate-spin w-4 h-4 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Oe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):D.length>0?D.map((e,t)=>(0,Oe.jsx)("button",{type:"button",onClick:()=>{te("product",e.name),te("unit",e.unit),e.last_price&&te("pricePerUnit",e.last_price),e.units_per_pack&&e.units_per_pack>0&&te("unitsPerPack",e.units_per_pack),e.harga_jual&&e.harga_jual>0&&j(e.harga_jual),S(""),x(!1)},className:"w-full text-left px-3 py-3 text-sm text-gray-800 hover:bg-gray-50 transition-colors",children:(0,Oe.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("div",{className:"font-medium",children:e.name}),(0,Oe.jsxs)("div",{className:"text-xs text-gray-500",children:[e.unit,e.last_price&&" \xb7 Rp ".concat(tt(e.last_price))]})]}),(0,Oe.jsxs)("span",{className:"text-xs text-gray-400",children:[e.usage_count,"x"]})]})},"".concat(e.name,"-").concat(e.unit,"-").concat(t))):E&&E.length>0?(0,Oe.jsx)("div",{className:"px-3 py-3 text-sm text-gray-500 text-center",children:"Tidak ada produk ditemukan"}):null,E&&(0,Oe.jsxs)("button",{type:"button",onClick:()=>{te("product",E),S(""),x(!1)},className:"w-full text-left px-3 py-3 text-sm text-blue-600 hover:bg-blue-50 transition-colors flex items-center gap-1 border-t border-gray-100",children:[(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),'Produk Baru: "',E,'"']})]}),f.product&&p.product&&(0,Oe.jsxs)("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[(0,Oe.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Oe.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),f.product]})]}),(0,Oe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("label",{htmlFor:"qty",className:"block text-sm font-medium text-gray-700 mb-1",children:"Qty"}),(0,Oe.jsxs)("div",{className:"relative flex items-center",children:[(0,Oe.jsx)("button",{type:"button",onClick:()=>te("qty",Math.max(1,u.qty-1)),className:"absolute left-0 h-full px-3 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Decrease quantity",children:(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,Oe.jsx)("input",{id:"qty",name:"qty",type:"number",min:"1",value:u.qty,onChange:e=>te("qty",parseInt(e.target.value)||1),onBlur:()=>J("qty"),"aria-invalid":!!f.qty,className:"w-full px-10 py-3 border rounded-lg text-sm text-gray-900 text-center focus:outline-none focus:ring-1 ".concat(f.qty&&p.qty?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Oe.jsx)("button",{type:"button",onClick:()=>te("qty",u.qty+1),className:"absolute right-0 h-full px-3 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Increase quantity",children:(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),f.qty&&p.qty&&(0,Oe.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.qty})]}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("label",{htmlFor:"unit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Satuan"}),(0,Oe.jsx)("select",{id:"unit",value:u.unit,onChange:e=>te("unit",e.target.value),className:"w-full px-3 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500 bg-white",children:("eceran"===u.type?et:Je).map(e=>(0,Oe.jsx)("option",{value:e,children:e},e))})]})]}),"wholesales"===u.type?(0,Oe.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,Oe.jsxs)("div",{children:[(0,Oe.jsxs)("label",{htmlFor:"pricePerUnit",className:"block text-sm font-medium text-gray-700 mb-1",children:["Harga per ",u.unit]}),(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Rp"}),(0,Oe.jsx)("input",{id:"pricePerUnit",name:"pricePerUnit",type:"text",inputMode:"numeric",value:u.pricePerUnit?tt(u.pricePerUnit):"",onChange:e=>te("pricePerUnit",rt(e.target.value)),onBlur:()=>J("pricePerUnit"),placeholder:"0","aria-invalid":!!f.pricePerUnit,className:"w-full pl-10 pr-12 py-3 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(f.pricePerUnit&&p.pricePerUnit?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Oe.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["/",u.unit]})]}),f.pricePerUnit&&p.pricePerUnit&&(0,Oe.jsxs)("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[(0,Oe.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Oe.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),f.pricePerUnit]})]}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsxs)("label",{htmlFor:"unitsPerPack",className:"block text-sm font-medium text-gray-700 mb-1",children:["Isi per ",u.unit," ",(0,Oe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsx)("input",{id:"unitsPerPack",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:u.unitsPerPack||"",onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");te("unitsPerPack",t?parseInt(t):void 0)},placeholder:"40",className:"w-full px-3 pr-16 py-3 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(f.unitsPerPack?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Oe.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["pcs/",u.unit]})]}),f.unitsPerPack&&(0,Oe.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.unitsPerPack})]})]}):(0,Oe.jsxs)("div",{children:[(0,Oe.jsxs)("label",{htmlFor:"pricePerUnit",className:"block text-sm font-medium text-gray-700 mb-1",children:["Harga per ",u.unit]}),(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Rp"}),(0,Oe.jsx)("input",{id:"pricePerUnit",name:"pricePerUnit",type:"text",inputMode:"numeric",value:u.pricePerUnit?tt(u.pricePerUnit):"",onChange:e=>te("pricePerUnit",rt(e.target.value)),onBlur:()=>J("pricePerUnit"),placeholder:"0","aria-invalid":!!f.pricePerUnit,className:"w-full pl-10 pr-20 py-3 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 ".concat(f.pricePerUnit&&p.pricePerUnit?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),(0,Oe.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["/",u.unit]})]}),f.pricePerUnit&&p.pricePerUnit&&(0,Oe.jsxs)("p",{className:"mt-1 text-xs text-red-500 flex items-center gap-1",children:[(0,Oe.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Oe.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),f.pricePerUnit]})]}),(0,Oe.jsxs)("div",{className:"rounded-lg p-3 border ".concat(ae(2)?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"),children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Oe.jsx)("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Auto Calculate"}),ae(2)?(0,Oe.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"\u2713 Siap lanjut"}):(0,Oe.jsx)("span",{className:"text-xs text-gray-400",children:"Lengkapi form"})]}),"wholesales"===u.type&&u.unitsPerPack&&u.unitsPerPack>0&&(0,Oe.jsxs)(Oe.Fragment,{children:[(0,Oe.jsxs)("div",{className:"flex justify-between items-center text-sm mb-1",children:[(0,Oe.jsx)("span",{className:"text-gray-600",children:"\ud83d\udcb0 Est. HPP:"}),(0,Oe.jsxs)("span",{className:"font-medium text-gray-800",children:["Rp ",tt(Math.round(q.estimatedHppPerUnit)),"/",q.retailUnit]})]}),(0,Oe.jsxs)("div",{className:"flex justify-between items-center text-sm mb-1",children:[(0,Oe.jsx)("span",{className:"text-gray-600",children:"\ud83d\udce6 Total:"}),(0,Oe.jsxs)("span",{className:"font-medium text-gray-800",children:[tt(q.totalUnits)," ",q.retailUnit]})]})]}),(0,Oe.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,Oe.jsx)("span",{className:"text-gray-600",children:"\ud83d\udcb5 Subtotal:"}),(0,Oe.jsxs)("span",{className:"font-semibold text-gray-800",children:["Rp ",tt(u.qty*u.pricePerUnit)]})]}),"wholesales"===u.type&&u.unitsPerPack&&u.unitsPerPack>0&&(0,Oe.jsx)("p",{className:"text-xs text-gray-400 mt-2 italic",children:"* HPP final dihitung setelah diskon & PPN di Step 3"})]})]}),4===l&&(0,Oe.jsxs)("div",{className:"space-y-4 animate-fade-in",children:[(0,Oe.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:(0,Oe.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,Oe.jsxs)("div",{className:"font-medium mb-1",children:["Produk: ",u.product]}),(0,Oe.jsxs)("div",{children:["\ud83d\udcb0 HPP Final per ",$.retailUnit,": ",(0,Oe.jsxs)("span",{className:"font-semibold",children:["Rp ",tt(Math.round($.finalHppPerUnit))]})]}),(0,Oe.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"(setelah diskon & PPN)"})]})}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsxs)("label",{htmlFor:"hargaJual",className:"block text-sm font-medium text-gray-700 mb-1",children:["Harga Jual ",(0,Oe.jsx)("span",{className:"text-gray-400 text-xs",children:"(ketik manual atau geser slider)"})]}),(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"Rp"}),(0,Oe.jsx)("input",{id:"hargaJual",type:"text",inputMode:"numeric",value:P?tt(P):"",onChange:e=>j(rt(e.target.value)||null),placeholder:"Masukkan harga jual",className:"w-full pl-10 pr-16 py-3 border rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-1 border-gray-300 focus:border-gray-500 focus:ring-gray-500"}),(0,Oe.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400",children:["/",$.retailUnit]})]})]}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Oe.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\ud83d\udcca Margin"}),(0,Oe.jsxs)("span",{className:"text-lg font-bold text-green-600",children:[P&&$.finalHppPerUnit>0?Math.round((P-$.finalHppPerUnit)/$.finalHppPerUnit*100):0,"%"]})]}),(0,Oe.jsx)("input",{type:"range",min:"1",max:"100",value:P&&$.finalHppPerUnit>0?Math.max(1,Math.min(100,Math.round((P-$.finalHppPerUnit)/$.finalHppPerUnit*100))):10,onChange:e=>{const t=parseInt(e.target.value),r=Math.round($.finalHppPerUnit*(1+t/100));j(r)},className:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-gradient-to-r from-red-300 via-yellow-300 to-green-400",style:{accentColor:"#16a34a"}}),(0,Oe.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[(0,Oe.jsx)("span",{children:"1%"}),(0,Oe.jsx)("span",{children:"50%"}),(0,Oe.jsx)("span",{children:"100%"})]})]}),P&&P>0&&(0,Oe.jsx)("div",{className:"rounded-lg p-4 border ".concat($.finalMarginPercent<0?"bg-red-50 border-red-200":$.finalMarginPercent<10?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"),children:(0,Oe.jsxs)("div",{className:"space-y-2",children:[(0,Oe.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,Oe.jsxs)("span",{className:$.finalMarginPercent<0?"text-red-700":$.finalMarginPercent<10?"text-yellow-700":"text-green-700",children:["\ud83d\udcca Profit per ",$.retailUnit,":"]}),(0,Oe.jsxs)("span",{className:"font-semibold ".concat($.finalMarginPercent<0?"text-red-800":$.finalMarginPercent<10?"text-yellow-800":"text-green-800"),children:["Rp ",tt(Math.round($.finalMargin))," (",$.finalMarginPercent.toFixed(1),"%)",$.finalMarginPercent>=10?" \u2705":""]})]}),(0,Oe.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,Oe.jsx)("span",{className:$.finalMarginPercent<0?"text-red-700":$.finalMarginPercent<10?"text-yellow-700":"text-green-700",children:"\ud83d\udcb0 Total Profit:"}),(0,Oe.jsxs)("span",{className:"font-semibold ".concat($.finalMarginPercent<0?"text-red-800":$.finalMarginPercent<10?"text-yellow-800":"text-green-800"),children:["Rp ",tt(Math.round($.finalTotalProfit))]})]}),$.finalMarginPercent<0&&(0,Oe.jsx)("p",{className:"text-xs text-red-600 mt-2",children:"\u26a0\ufe0f RUGI! Harga jual lebih rendah dari HPP."}),$.finalMarginPercent>=0&&$.finalMarginPercent<10&&(0,Oe.jsx)("p",{className:"text-xs text-yellow-600 mt-2",children:"\u26a0\ufe0f Margin rendah! Pertimbangkan naikkan harga."})]})}),"success"===v&&(0,Oe.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[(0,Oe.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Oe.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,Oe.jsx)("span",{className:"text-sm text-green-700",children:"Berhasil disimpan!"})]}),"error"===v&&(0,Oe.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[(0,Oe.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Oe.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,Oe.jsx)("span",{className:"text-sm text-red-700",children:"Gagal menyimpan, coba lagi"})]}),"session_expired"===v&&(0,Oe.jsxs)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-2",children:[(0,Oe.jsx)("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Oe.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,Oe.jsx)("span",{className:"text-sm text-yellow-700",children:"Session expired. Redirecting to login..."})]})]}),3===l&&(0,Oe.jsxs)("div",{className:"space-y-4 animate-fade-in",children:[(0,Oe.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("span",{className:"text-xs font-medium text-gray-600 block mb-2",children:"Diskon"}),(0,Oe.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,Oe.jsx)("input",{type:"checkbox",checked:"percentage"===u.discountType,onChange:e=>{e.target.checked?te("discountType","percentage"):(te("discountType","none"),te("discountValue",void 0))},className:"sr-only peer"}),(0,Oe.jsx)("div",{className:"w-10 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800 relative"})]})]}),(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("span",{className:"text-xs font-medium text-gray-600 block mb-2",children:"PPN"}),(0,Oe.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,Oe.jsx)("input",{type:"checkbox",checked:u.includePPN,onChange:e=>te("includePPN",e.target.checked),className:"sr-only peer"}),(0,Oe.jsx)("div",{className:"w-10 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800 relative"})]})]}),(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("span",{className:"text-xs font-medium text-gray-600 block mb-2",children:"Cara Bayar"}),(0,Oe.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,Oe.jsx)("input",{type:"checkbox",checked:"tunai"!==u.paymentMethod||!0===p.paymentMethod,onChange:e=>{e.target.checked?J("paymentMethod"):(te("paymentMethod","tunai"),te("dueDate",void 0),g(e=>Ve(Ve({},e),{},{paymentMethod:!1})))},className:"sr-only peer"}),(0,Oe.jsx)("div",{className:"w-10 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-gray-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-800 relative"})]})]})]}),"percentage"===u.discountType&&(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsx)("input",{type:"number",inputMode:"numeric",min:"1",max:"99",value:u.discountValue||"",onChange:e=>{const t=parseInt(e.target.value);e.target.value?t>=1&&t<=99&&te("discountValue",t):te("discountValue",void 0)},placeholder:"0",className:"w-full px-3 pr-8 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500"}),(0,Oe.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"%"})]}),("tunai"!==u.paymentMethod||!0===p.paymentMethod)&&(0,Oe.jsx)("div",{className:"space-y-2",children:[{value:"tunai",label:"Tunai"},{value:"transfer",label:"Transfer"},{value:"kredit",label:"Tempo"}].map(e=>(0,Oe.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-gray-50",children:[(0,Oe.jsx)("input",{type:"radio",name:"paymentMethod",value:e.value,checked:u.paymentMethod===e.value,onChange:e=>{te("paymentMethod",e.target.value),"kredit"!==e.target.value&&te("dueDate",void 0)},className:"w-4 h-4 text-gray-800 border-gray-300 focus:ring-gray-500"}),(0,Oe.jsx)("span",{className:"text-sm text-gray-700",children:e.label})]},e.value))}),"kredit"===u.paymentMethod&&(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Jatuh Tempo"}),(0,Oe.jsx)("input",{id:"dueDate",name:"dueDate",type:"date",min:ot(),value:u.dueDate||"",onChange:e=>te("dueDate",e.target.value),onBlur:()=>J("dueDate"),"aria-invalid":!!f.dueDate,className:"w-full px-3 py-3 border rounded-lg text-sm text-gray-900 focus:outline-none focus:ring-1 ".concat(f.dueDate&&p.dueDate?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-gray-500 focus:ring-gray-500")}),f.dueDate&&p.dueDate&&(0,Oe.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.dueDate})]}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsxs)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:["Catatan ",(0,Oe.jsx)("span",{className:"text-gray-400 text-xs",children:"(opsional)"})]}),(0,Oe.jsx)("textarea",{id:"notes",value:u.notes,onChange:e=>te("notes",e.target.value.slice(0,200)),placeholder:"Catatan tambahan...",rows:2,maxLength:200,className:"w-full px-3 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-500 focus:ring-1 focus:ring-gray-500 resize-none"}),(0,Oe.jsxs)("p",{className:"mt-1 text-xs text-gray-400 text-right",children:[(u.notes||"").length,"/200"]})]}),(0,Oe.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[(0,Oe.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Oe.jsx)("span",{className:"text-sm text-gray-500",children:"Subtotal:"}),(0,Oe.jsxs)("span",{className:"text-sm text-gray-600",children:["Rp ",tt(u.qty*u.pricePerUnit)]})]}),Z.discount>0&&(0,Oe.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Oe.jsx)("span",{className:"text-sm text-gray-500",children:"Diskon:"}),(0,Oe.jsxs)("span",{className:"text-sm text-green-600",children:["- Rp ",tt(Z.discount)]})]}),u.includePPN&&(0,Oe.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Oe.jsx)("span",{className:"text-sm text-gray-500",children:"PPN (11%):"}),(0,Oe.jsxs)("span",{className:"text-sm text-gray-600",children:["Rp ",tt(Z.ppn)]})]}),(0,Oe.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,Oe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Oe.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"TOTAL BAYAR:"}),(0,Oe.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["Rp ",tt(Z.total)]})]}),"wholesales"===u.type&&u.unitsPerPack&&u.unitsPerPack>0&&(0,Oe.jsxs)(Oe.Fragment,{children:[(0,Oe.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,Oe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Oe.jsxs)("span",{className:"text-sm text-gray-500",children:["\ud83d\udcb0 HPP Final per ",$.retailUnit,":"]}),(0,Oe.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Rp ",tt(Math.round($.finalHppPerUnit))]})]})]})]})]})]}),(0,Oe.jsxs)("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 rounded-b-2xl px-4 sm:px-6 py-4",children:[1===l&&(0,Oe.jsx)("div",{className:"flex justify-end",children:(0,Oe.jsxs)("button",{type:"button",onClick:ne,disabled:!ae(1),className:"flex items-center gap-2 px-6 py-3 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Selanjutnya",(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),2===l&&(0,Oe.jsxs)("div",{className:"flex justify-between",children:[(0,Oe.jsxs)("button",{type:"button",onClick:oe,className:"flex items-center gap-2 px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Kembali"]}),(0,Oe.jsxs)("button",{type:"button",onClick:ne,disabled:!ae(2),className:"flex items-center gap-2 px-6 py-3 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Selanjutnya",(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),3===l&&(0,Oe.jsxs)("div",{className:"flex justify-between",children:[(0,Oe.jsxs)("button",{type:"button",onClick:oe,className:"flex items-center gap-2 px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Kembali"]}),(0,Oe.jsxs)("button",{type:"button",onClick:ne,className:"flex items-center gap-2 px-6 py-3 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors",children:["Selanjutnya",(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),4===l&&(0,Oe.jsxs)("div",{className:"flex flex-row gap-2 w-full",children:[(0,Oe.jsxs)("button",{type:"button",onClick:oe,className:"flex-1 flex items-center justify-center gap-1 px-2 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,Oe.jsx)("span",{className:"hidden sm:inline",children:"Kembali"})]}),(0,Oe.jsxs)("button",{type:"button",onClick:async()=>{if(Q(4)){y(!0),w("idle");try{const e=localStorage.getItem("access_token");if(!e)return w("session_expired"),console.error("No auth token found - session expired"),void setTimeout(()=>{window.location.href="/login"},2e3);console.log("[PurchaseForm] Submitting transaction...");const t=await fetch("/api/transactions/purchase",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({product_name:u.product,quantity:u.qty,unit:u.unit,price_per_unit:u.pricePerUnit,payment_method:u.paymentMethod,vendor_name:u.supplier||null,notes:u.notes||null,discount_type:"none"===u.discountType?null:u.discountType,discount_value:u.discountValue||0,include_vat:u.includePPN,units_per_pack:u.unitsPerPack||null,purchase_type:u.type,purchase_date:u.date,due_date:u.dueDate||null,hpp_per_unit:$.finalHppPerUnit,harga_jual:P,margin:$.finalMargin,margin_percent:$.finalMarginPercent,retail_unit:$.retailUnit})});if(console.log("[PurchaseForm] Response status:",t.status),!t.ok)return console.error("[PurchaseForm] HTTP error:",t.status),void w("error");const r=await t.json();console.log("[PurchaseForm] Response data:",r),"success"===r.status?(localStorage.removeItem($e),w("success"),console.log("[PurchaseForm] Transaction saved:",r.transaction_id),i&&r.message&&i(r.message),ie()):(console.error("[PurchaseForm] API error:",r.message),w("error"))}catch(e){console.error("[PurchaseForm] Submit error:",e),w("error")}finally{y(!1)}}},disabled:!ae(4)||m,className:"flex-[2] flex items-center justify-center gap-2 px-4 py-3 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[m?(0,Oe.jsxs)("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Oe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,Oe.jsx)("span",{children:"\ud83d\udcbe"}),"Simpan"]}),(0,Oe.jsx)("button",{type:"button",onClick:()=>{const e={formData:u,currentStep:l,timestamp:Date.now()};localStorage.setItem($e,JSON.stringify(e)),ie()},className:"flex-1 flex items-center justify-center px-2 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Draft"}),(0,Oe.jsx)("button",{type:"button",onClick:ie,className:"flex-1 flex items-center justify-center px-2 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Batal"})]})]})]})]})};function st(e){return Array.isArray?Array.isArray(e):"[object Array]"===pt(e)}function lt(e){return"string"===typeof e}function ct(e){return"number"===typeof e}function ut(e){return!0===e||!1===e||function(e){return dt(e)&&null!==e}(e)&&"[object Boolean]"==pt(e)}function dt(e){return"object"===typeof e}function ft(e){return void 0!==e&&null!==e}function ht(e){return!e.trim().length}function pt(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const gt=Object.prototype.hasOwnProperty;class mt{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let r=yt(e);this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function yt(e){let t=null,r=null,n=null,o=1,i=null;if(lt(e)||st(e))n=e,t=vt(e),r=wt(e);else{if(!gt.call(e,"name"))throw new Error((e=>"Missing ".concat(e," property in key"))("name"));const a=e.name;if(n=a,gt.call(e,"weight")&&(o=e.weight,o<=0))throw new Error((e=>"Property 'weight' in key '".concat(e,"' must be a positive integer"))(a));t=vt(a),r=wt(a),i=e.getFn}return{path:t,id:r,weight:o,src:n,getFn:i}}function vt(e){return st(e)?e:e.split(".")}function wt(e){return st(e)?e.join("."):e}const bt={useExtendedSearch:!1,getFn:function(e,t){let r=[],n=!1;const o=(e,t,i)=>{if(ft(e))if(t[i]){const a=e[t[i]];if(!ft(a))return;if(i===t.length-1&&(lt(a)||ct(a)||ut(a)))r.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(a));else if(st(a)){n=!0;for(let e=0,r=a.length;e<r;e+=1)o(a[e],t,i+1)}else t.length&&o(a,t,i+1)}else r.push(e)};return o(e,lt(t)?t.split("."):t,0),n?r:r[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var xt=Ve(Ve(Ve(Ve({},{isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),bt);const Ct=/[^ ]+/g;class _t{constructor(){let{getFn:e=xt.getFn,fieldNormWeight:t=xt.fieldNormWeight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.norm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const r=new Map,n=Math.pow(10,t);return{get(t){const o=t.match(Ct).length;if(r.has(o))return r.get(o);const i=1/Math.pow(o,.5*e),a=parseFloat(Math.round(i*n)/n);return r.set(o,a),a},clear(){r.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}setIndexRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}setKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,lt(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();lt(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!ft(e)||ht(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((t,n)=>{let o=t.getFn?t.getFn(e):this.getFn(e,t.path);if(ft(o))if(st(o)){let e=[];const t=[{nestedArrIndex:-1,value:o}];for(;t.length;){const{nestedArrIndex:r,value:n}=t.pop();if(ft(n))if(lt(n)&&!ht(n)){let t={v:n,i:r,n:this.norm.get(n)};e.push(t)}else st(n)&&n.forEach((e,r)=>{t.push({nestedArrIndex:r,value:e})})}r.$[n]=e}else if(lt(o)&&!ht(o)){let e={v:o,n:this.norm.get(o)};r.$[n]=e}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Et(e,t){let{getFn:r=xt.getFn,fieldNormWeight:n=xt.fieldNormWeight}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new _t({getFn:r,fieldNormWeight:n});return o.setKeys(e.map(yt)),o.setSources(t),o.create(),o}function St(e){let{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:o=xt.distance,ignoreLocation:i=xt.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=t/e.length;if(i)return a;const s=Math.abs(n-r);return o?a+s/o:s?1:a}const At=32;function Nt(e,t,r){let{location:n=xt.location,distance:o=xt.distance,threshold:i=xt.threshold,findAllMatches:a=xt.findAllMatches,minMatchCharLength:s=xt.minMatchCharLength,includeMatches:l=xt.includeMatches,ignoreLocation:c=xt.ignoreLocation}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length>At)throw new Error("Pattern length exceeds max of ".concat(At,"."));const u=t.length,d=e.length,f=Math.max(0,Math.min(n,d));let h=i,p=f;const g=s>1||l,m=g?Array(d):[];let y;for(;(y=e.indexOf(t,p))>-1;){let e=St(t,{currentLocation:y,expectedLocation:f,distance:o,ignoreLocation:c});if(h=Math.min(e,h),p=y+u,g){let e=0;for(;e<u;)m[y+e]=1,e+=1}}p=-1;let v=[],w=1,b=u+d;const x=1<<u-1;for(let _=0;_<u;_+=1){let n=0,i=b;for(;n<i;){St(t,{errors:_,currentLocation:f+i,expectedLocation:f,distance:o,ignoreLocation:c})<=h?n=i:b=i,i=Math.floor((b-n)/2+n)}b=i;let s=Math.max(1,f-i+1),l=a?d:Math.min(f+i,d)+u,y=Array(l+2);y[l+1]=(1<<_)-1;for(let a=l;a>=s;a-=1){let n=a-1,i=r[e.charAt(n)];if(g&&(m[n]=+!!i),y[a]=(y[a+1]<<1|1)&i,_&&(y[a]|=(v[a+1]|v[a])<<1|1|v[a+1]),y[a]&x&&(w=St(t,{errors:_,currentLocation:n,expectedLocation:f,distance:o,ignoreLocation:c}),w<=h)){if(h=w,p=n,p<=f)break;s=Math.max(1,2*f-p)}}if(St(t,{errors:_+1,currentLocation:f,expectedLocation:f,distance:o,ignoreLocation:c})>h)break;v=y}const C={isMatch:p>=0,score:Math.max(.001,w)};if(g){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt.minMatchCharLength,r=[],n=-1,o=-1,i=0;for(let a=e.length;i<a;i+=1){let a=e[i];a&&-1===n?n=i:a||-1===n||(o=i-1,o-n+1>=t&&r.push([n,o]),n=-1)}return e[i-1]&&i-n>=t&&r.push([n,i-1]),r}(m,s);e.length?l&&(C.indices=e):C.isMatch=!1}return C}function It(e){let t={};for(let r=0,n=e.length;r<n;r+=1){const o=e.charAt(r);t[o]=(t[o]||0)|1<<n-r-1}return t}const kt=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class Tt{constructor(e){let{location:t=xt.location,threshold:r=xt.threshold,distance:n=xt.distance,includeMatches:o=xt.includeMatches,findAllMatches:i=xt.findAllMatches,minMatchCharLength:a=xt.minMatchCharLength,isCaseSensitive:s=xt.isCaseSensitive,ignoreDiacritics:l=xt.ignoreDiacritics,ignoreLocation:c=xt.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options={location:t,threshold:r,distance:n,includeMatches:o,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:s,ignoreDiacritics:l,ignoreLocation:c},e=s?e:e.toLowerCase(),e=l?kt(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const u=(e,t)=>{this.chunks.push({pattern:e,alphabet:It(e),startIndex:t})},d=this.pattern.length;if(d>At){let e=0;const t=d%At,r=d-t;for(;e<r;)u(this.pattern.substr(e,At),e),e+=At;if(t){const e=d-At;u(this.pattern.substr(e),e)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:r,includeMatches:n}=this.options;if(e=t?e:e.toLowerCase(),e=r?kt(e):e,this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:o,distance:i,threshold:a,findAllMatches:s,minMatchCharLength:l,ignoreLocation:c}=this.options;let u=[],d=0,f=!1;this.chunks.forEach(t=>{let{pattern:r,alphabet:h,startIndex:p}=t;const{isMatch:g,score:m,indices:y}=Nt(e,r,h,{location:o+p,distance:i,threshold:a,findAllMatches:s,minMatchCharLength:l,includeMatches:n,ignoreLocation:c});g&&(f=!0),d+=m,g&&y&&(u=[...u,...y])});let h={isMatch:f,score:f?d/this.chunks.length:1};return f&&n&&(h.indices=u),h}}class Ot{constructor(e){this.pattern=e}static isMultiMatch(e){return Rt(e,this.multiRegex)}static isSingleMatch(e){return Rt(e,this.singleRegex)}search(){}}function Rt(e,t){const r=e.match(t);return r?r[1]:null}class Mt extends Ot{constructor(e){let{location:t=xt.location,threshold:r=xt.threshold,distance:n=xt.distance,includeMatches:o=xt.includeMatches,findAllMatches:i=xt.findAllMatches,minMatchCharLength:a=xt.minMatchCharLength,isCaseSensitive:s=xt.isCaseSensitive,ignoreDiacritics:l=xt.ignoreDiacritics,ignoreLocation:c=xt.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._bitapSearch=new Tt(e,{location:t,threshold:r,distance:n,includeMatches:o,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:s,ignoreDiacritics:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Pt extends Ot{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,r=0;const n=[],o=this.pattern.length;for(;(t=e.indexOf(this.pattern,r))>-1;)r=t+o,n.push([t,r-1]);const i=!!n.length;return{isMatch:i,score:i?0:1,indices:n}}}const jt=[class extends Ot{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Pt,class extends Ot{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends Ot{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Ot{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Ot{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends Ot{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Mt],Dt=jt.length,Bt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const Lt=new Set([Mt.type,Pt.type]);class Ft{constructor(e){let{isCaseSensitive:t=xt.isCaseSensitive,ignoreDiacritics:r=xt.ignoreDiacritics,includeMatches:n=xt.includeMatches,minMatchCharLength:o=xt.minMatchCharLength,ignoreLocation:i=xt.ignoreLocation,findAllMatches:a=xt.findAllMatches,location:s=xt.location,threshold:l=xt.threshold,distance:c=xt.distance}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:r,includeMatches:n,minMatchCharLength:o,findAllMatches:a,ignoreLocation:i,location:s,threshold:l,distance:c},e=t?e:e.toLowerCase(),e=r?kt(e):e,this.pattern=e,this.query=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map(e=>{let r=e.trim().split(Bt).filter(e=>e&&!!e.trim()),n=[];for(let o=0,i=r.length;o<i;o+=1){const e=r[o];let i=!1,a=-1;for(;!i&&++a<Dt;){const r=jt[a];let o=r.isMultiMatch(e);o&&(n.push(new r(o,t)),i=!0)}if(!i)for(a=-1;++a<Dt;){const r=jt[a];let o=r.isSingleMatch(e);if(o){n.push(new r(o,t));break}}}return n})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:n,ignoreDiacritics:o}=this.options;e=n?e:e.toLowerCase(),e=o?kt(e):e;let i=0,a=[],s=0;for(let l=0,c=t.length;l<c;l+=1){const n=t[l];a.length=0,i=0;for(let t=0,o=n.length;t<o;t+=1){const o=n[t],{isMatch:l,indices:c,score:u}=o.search(e);if(!l){s=0,i=0,a.length=0;break}if(i+=1,s+=u,r){const e=o.constructor.type;Lt.has(e)?a=[...a,...c]:a.push(c)}}if(i){let e={isMatch:!0,score:s/i};return r&&(e.indices=a),e}}return{isMatch:!1,score:1}}}const Ut=[];function zt(e,t){for(let r=0,n=Ut.length;r<n;r+=1){let n=Ut[r];if(n.condition(e,t))return new n(e,t)}return new Tt(e,t)}const Vt="$and",Ht="$or",Wt="$path",Gt="$val",Xt=e=>!(!e[Vt]&&!e[Ht]),Yt=e=>({[Vt]:Object.keys(e).map(t=>({[t]:e[t]}))});function Kt(e,t){let{auto:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e=>{let o=Object.keys(e);const i=(e=>!!e[Wt])(e);if(!i&&o.length>1&&!Xt(e))return n(Yt(e));if((e=>!st(e)&&dt(e)&&!Xt(e))(e)){const n=i?e[Wt]:o[0],a=i?e[Gt]:e[n];if(!lt(a))throw new Error((e=>"Invalid value for key ".concat(e))(n));const s={keyId:wt(n),pattern:a};return r&&(s.searcher=zt(a,t)),s}let a={children:[],operator:o[0]};return o.forEach(t=>{const r=e[t];st(r)&&r.forEach(e=>{a.children.push(n(e))})}),a};return Xt(e)||(e=Yt(e)),n(e)}function Zt(e,t){const r=e.matches;t.matches=[],ft(r)&&r.forEach(e=>{if(!ft(e.indices)||!e.indices.length)return;const{indices:r,value:n}=e;let o={indices:r,value:n};e.key&&(o.key=e.key.src),e.idx>-1&&(o.refIndex=e.idx),t.matches.push(o)})}function qt(e,t){t.score=e.score}class $t{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.options=Ve(Ve({},xt),t),this.options.useExtendedSearch,this._keyStore=new mt(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof _t))throw new Error("Incorrect 'index' type");this._myIndex=t||Et(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){ft(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1;const t=[];for(let r=0,n=this._docs.length;r<n;r+=1){const o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,n-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e){let{limit:t=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeMatches:r,includeScore:n,shouldSort:o,sortFn:i,ignoreFieldNorm:a}=this.options;let s=lt(e)?lt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,t){let{ignoreFieldNorm:r=xt.ignoreFieldNorm}=t;e.forEach(e=>{let t=1;e.matches.forEach(e=>{let{key:n,norm:o,score:i}=e;const a=n?n.weight:null;t*=Math.pow(0===i&&a?Number.EPSILON:i,(a||1)*(r?1:o))}),e.score=t})}(s,{ignoreFieldNorm:a}),o&&s.sort(i),ct(t)&&t>-1&&(s=s.slice(0,t)),function(e,t){let{includeMatches:r=xt.includeMatches,includeScore:n=xt.includeScore}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=[];return r&&o.push(Zt),n&&o.push(qt),e.map(e=>{const{idx:r}=e,n={item:t[r],refIndex:r};return o.length&&o.forEach(t=>{t(e,n)}),n})}(s,this._docs,{includeMatches:r,includeScore:n})}_searchStringList(e){const t=zt(e,this.options),{records:r}=this._myIndex,n=[];return r.forEach(e=>{let{v:r,i:o,n:i}=e;if(!ft(r))return;const{isMatch:a,score:s,indices:l}=t.searchIn(r);a&&n.push({item:r,idx:o,matches:[{score:s,value:r,norm:i,indices:l}]})}),n}_searchLogical(e){const t=Kt(e,this.options),r=(e,t,n)=>{if(!e.children){const{keyId:r,searcher:o}=e,i=this._findMatches({key:this._keyStore.get(r),value:this._myIndex.getValueForItemAtKeyId(t,r),searcher:o});return i&&i.length?[{idx:n,item:t,matches:i}]:[]}const o=[];for(let i=0,a=e.children.length;i<a;i+=1){const a=e.children[i],s=r(a,t,n);if(s.length)o.push(...s);else if(e.operator===Vt)return[]}return o},n=this._myIndex.records,o={},i=[];return n.forEach(e=>{let{$:n,i:a}=e;if(ft(n)){let e=r(t,n,a);e.length&&(o[a]||(o[a]={idx:a,item:n,matches:[]},i.push(o[a])),e.forEach(e=>{let{matches:t}=e;o[a].matches.push(...t)}))}}),i}_searchObjectList(e){const t=zt(e,this.options),{keys:r,records:n}=this._myIndex,o=[];return n.forEach(e=>{let{$:n,i:i}=e;if(!ft(n))return;let a=[];r.forEach((e,r)=>{a.push(...this._findMatches({key:e,value:n[r],searcher:t}))}),a.length&&o.push({idx:i,item:n,matches:a})}),o}_findMatches(e){let{key:t,value:r,searcher:n}=e;if(!ft(r))return[];let o=[];if(st(r))r.forEach(e=>{let{v:r,i:i,n:a}=e;if(!ft(r))return;const{isMatch:s,score:l,indices:c}=n.searchIn(r);s&&o.push({score:l,key:t,value:r,idx:i,norm:a,indices:c})});else{const{v:e,n:i}=r,{isMatch:a,score:s,indices:l}=n.searchIn(e);a&&o.push({score:s,key:t,value:e,norm:i,indices:l})}return o}}$t.version="7.1.0",$t.createIndex=Et,$t.parseIndex=function(e){let{getFn:t=xt.getFn,fieldNormWeight:r=xt.fieldNormWeight}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{keys:n,records:o}=e,i=new _t({getFn:t,fieldNormWeight:r});return i.setKeys(n),i.setIndexRecords(o),i},$t.config=xt,$t.parseQuery=Kt,function(){Ut.push(...arguments)}(Ft);const Qt=e=>{let{value:t,onChange:r,placeholder:n="Ketik nama produk...",className:i="",disabled:a=!1}=e;const[s,l]=(0,o.useState)([]),[c,u]=(0,o.useState)(!0),[d,f]=(0,o.useState)(-1),[h,p]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{u(!0);try{const e=localStorage.getItem("access_token"),t=await fetch("/api/products/all",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch products");const r=await t.json();l(r);const n=new $t(r,{keys:["name"],threshold:.3,distance:100,minMatchCharLength:1});p(n)}catch(e){console.error("Failed to fetch products:",e)}finally{u(!1)}})()},[]);const g=(0,o.useMemo)(()=>{if(!t||!h)return s.slice(0,10);return h.search(t).map(e=>e.item).slice(0,10)},[t,h,s]);return c?(0,Oe.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Oe.jsxs)("svg",{className:"animate-spin h-5 w-5 mx-auto text-amber-500",fill:"none",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Oe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Oe.jsx)("div",{className:"mt-2 text-sm",children:"Loading produk..."})]}):0===g.length?(0,Oe.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Oe.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Oe.jsx)("div",{className:"text-sm",children:t?"Produk tidak ditemukan":"Belum ada produk"}),t&&(0,Oe.jsxs)("button",{onClick:()=>r(t),className:"mt-2 text-xs text-amber-600 hover:text-amber-700",children:['Tambah "',t,'" sebagai produk baru']})]}):(0,Oe.jsxs)("div",{className:"p-2 max-h-80 overflow-y-auto",children:[(0,Oe.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:t?"\ud83d\udd0d ".concat(g.length," hasil:"):"\ud83d\udd25 Produk Sering Dibeli:"}),(0,Oe.jsx)("div",{className:"space-y-0.5",children:g.map((e,t)=>{return(0,Oe.jsxs)("button",{onClick:()=>(e=>{r(e.name,e)})(e),className:"w-full px-3 py-2 text-left hover:bg-amber-50 flex items-center justify-between rounded transition-colors ".concat(t===d?"bg-amber-50":""),children:[(0,Oe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Oe.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,Oe.jsx)("div",{className:"text-xs text-gray-500",children:e.unit})]})]}),e.last_price&&(0,Oe.jsx)("span",{className:"text-xs text-gray-500",children:(n=e.last_price,n?n>=1e6?"".concat((n/1e6).toFixed(1),"jt"):n>=1e3?"".concat(Math.round(n/1e3),"rb"):n.toString():"")})]},"".concat(e.name,"-").concat(e.unit,"-").concat(t));var n})})]})},Jt=e=>{let{value:t,onChange:r,placeholder:n="Ketik nama supplier...",className:i="",disabled:a=!1}=e;const[s,l]=(0,o.useState)([]),[c,u]=(0,o.useState)(!0),[d,f]=(0,o.useState)(-1),[h,p]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{u(!0);try{const e=localStorage.getItem("access_token"),t=await fetch("/api/suppliers/all",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch suppliers");const r=await t.json();l(r);const n=new $t(r,{keys:["name"],threshold:.3,distance:100,minMatchCharLength:1});p(n)}catch(e){console.error("Failed to fetch suppliers:",e)}finally{u(!1)}})()},[]);const g=(0,o.useMemo)(()=>{if(!t||!h)return s.slice(0,10);return h.search(t).map(e=>e.item).slice(0,10)},[t,h,s]);return c?(0,Oe.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Oe.jsxs)("svg",{className:"animate-spin h-5 w-5 mx-auto text-amber-500",fill:"none",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Oe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Oe.jsx)("div",{className:"mt-2 text-sm",children:"Loading supplier..."})]}):0===g.length?(0,Oe.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Oe.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Oe.jsx)("div",{className:"text-sm",children:t?"Supplier tidak ditemukan":"Belum ada supplier"}),t&&(0,Oe.jsxs)("button",{onClick:()=>r(t),className:"mt-2 text-xs text-amber-600 hover:text-amber-700",children:['Tambah "',t,'" sebagai supplier baru']})]}):(0,Oe.jsxs)("div",{className:"p-2 max-h-80 overflow-y-auto",children:[(0,Oe.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:t?"\ud83c\udfe2 ".concat(g.length," hasil:"):"\ud83d\udd25 Supplier Sering Dipakai:"}),(0,Oe.jsx)("div",{className:"space-y-0.5",children:g.map((e,t)=>(0,Oe.jsx)("button",{onClick:()=>(e=>{r(e.name)})(e),className:"w-full px-3 py-2 text-left hover:bg-amber-50 flex items-center justify-between rounded transition-colors ".concat(t===d?"bg-amber-50":""),children:(0,Oe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Oe.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("div",{className:"font-medium text-sm",children:e.name}),e.contact&&(0,Oe.jsx)("div",{className:"text-xs text-gray-500",children:e.contact})]})]})},"".concat(e.name,"-").concat(t)))})]})};function er(e,t){void 0===t&&(t=e.constructor);var r=Error.captureStackTrace;r&&r(e,t)}var tr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rr=function(e){function t(t,r){var n=this.constructor,o=e.call(this,t,r)||this;return Object.defineProperty(o,"name",{value:n.name,enumerable:!1,configurable:!0}),function(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}(o,n.prototype),er(o),o}return tr(t,e),t}(Error);var nr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const or=function(e){function t(t){void 0===t&&(t=void 0);var r=e.call(this,t)||this;return r.message=t,r}return nr(t,e),t.prototype.getKind=function(){return this.constructor.kind},t.kind="Exception",t}(rr);var ir=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const ar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ir(t,e),t.kind="ArgumentException",t}(or);var sr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sr(t,e),t.kind="IllegalArgumentException",t}(or);const cr=function(){function e(e){if(this.binarizer=e,null===e)throw new lr("Binarizer must be non-null.")}return e.prototype.getWidth=function(){return this.binarizer.getWidth()},e.prototype.getHeight=function(){return this.binarizer.getHeight()},e.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},e.prototype.getBlackMatrix=function(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},e.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},e.prototype.crop=function(t,r,n,o){var i=this.binarizer.getLuminanceSource().crop(t,r,n,o);return new e(this.binarizer.createBinarizer(i))},e.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},e.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new e(this.binarizer.createBinarizer(t))},e.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new e(this.binarizer.createBinarizer(t))},e.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(Au){return""}},e}();var ur=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const dr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ur(t,e),t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(or);const fr=function(){function e(e){this.source=e}return e.prototype.getLuminanceSource=function(){return this.source},e.prototype.getWidth=function(){return this.source.getWidth()},e.prototype.getHeight=function(){return this.source.getHeight()},e}();var hr=function(){function e(){}return e.arraycopy=function(e,t,r,n,o){for(;o--;)r[n++]=e[t++]},e.currentTimeMillis=function(){return Date.now()},e}();const pr=hr;var gr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const mr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gr(t,e),t.kind="IndexOutOfBoundsException",t}(or);var yr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const vr=function(e){function t(t,r){void 0===t&&(t=void 0),void 0===r&&(r=void 0);var n=e.call(this,r)||this;return n.index=t,n.message=r,n}return yr(t,e),t.kind="ArrayIndexOutOfBoundsException",t}(mr);var wr=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},br=function(){function e(){}return e.fill=function(e,t){for(var r=0,n=e.length;r<n;r++)e[r]=t},e.fillWithin=function(t,r,n,o){e.rangeCheck(t.length,r,n);for(var i=r;i<n;i++)t[i]=o},e.rangeCheck=function(e,t,r){if(t>r)throw new lr("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new vr(t);if(r>e)throw new vr(r)},e.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},e.create=function(e,t,r){return Array.from({length:e}).map(function(e){return Array.from({length:t}).fill(r)})},e.createInt32Array=function(e,t,r){return Array.from({length:e}).map(function(e){return Int32Array.from({length:t}).fill(r)})},e.equals=function(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0},e.hashCode=function(e){var t,r;if(null===e)return 0;var n=1;try{for(var o=wr(e),i=o.next();!i.done;i=o.next()){n=31*n+i.value}}catch(a){t={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},e.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},e.copyOf=function(e,t){return e.slice(0,t)},e.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},e.copyOfRange=function(e,t,r){var n=r-t,o=new Int32Array(n);return pr.arraycopy(e,t,o,0,n),o},e.binarySearch=function(t,r,n){void 0===n&&(n=e.numberComparator);for(var o=0,i=t.length-1;o<=i;){var a=i+o>>1,s=n(r,t[a]);if(s>0)o=a+1;else{if(!(s<0))return a;i=a-1}}return-o-1},e.numberComparator=function(e,t){return e-t},e}();const xr=br;const Cr=function(){function e(){}return e.numberOfTrailingZeros=function(e){var t;if(0===e)return 32;var r=31;return 0!==(t=e<<16)&&(r-=16,e=t),0!==(t=e<<8)&&(r-=8,e=t),0!==(t=e<<4)&&(r-=4,e=t),0!==(t=e<<2)&&(r-=2,e=t),r-(e<<1>>>31)},e.numberOfLeadingZeros=function(e){if(0===e)return 32;var t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31},e.toHexString=function(e){return e.toString(16)},e.toBinaryString=function(e){return String(parseInt(String(e),2))},e.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)},e.truncDivision=function(e,t){return Math.trunc(e/t)},e.parseInt=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e.MIN_VALUE_32_BITS=-2147483648,e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}();const _r=function(){function e(t,r){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=void 0===r||null===r?e.makeArray(t):r)}return e.prototype.getSize=function(){return this.size},e.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},e.prototype.ensureCapacity=function(t){if(t>32*this.bits.length){var r=e.makeArray(t);pr.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},e.prototype.get=function(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))},e.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},e.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},e.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,n=Math.floor(e/32),o=r[n];o&=~((1<<(31&e))-1);for(var i=r.length;0===o;){if(++n===i)return t;o=r[n]}var a=32*n+Cr.numberOfTrailingZeros(o);return a>t?t:a},e.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,n=Math.floor(e/32),o=~r[n];o&=~((1<<(31&e))-1);for(var i=r.length;0===o;){if(++n===i)return t;o=~r[n]}var a=32*n+Cr.numberOfTrailingZeros(o);return a>t?t:a},e.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},e.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new lr;if(t!==e){t--;for(var r=Math.floor(e/32),n=Math.floor(t/32),o=this.bits,i=r;i<=n;i++){var a=(2<<(i<n?31:31&t))-(1<<(i>r?0:31&e));o[i]|=a}}},e.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},e.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new lr;if(t===e)return!0;t--;for(var n=Math.floor(e/32),o=Math.floor(t/32),i=this.bits,a=n;a<=o;a++){var s=(2<<(a<o?31:31&t))-(1<<(a>n?0:31&e))&4294967295;if((i[a]&s)!==(r?s:0))return!1}return!0},e.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},e.prototype.appendBits=function(e,t){if(t<0||t>32)throw new lr("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit(1===(e>>r-1&1))},e.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},e.prototype.xor=function(e){if(this.size!==e.size)throw new lr("Sizes don't match");for(var t=this.bits,r=0,n=t.length;r<n;r++)t[r]^=e.bits[r]},e.prototype.toBytes=function(e,t,r,n){for(var o=0;o<n;o++){for(var i=0,a=0;a<8;a++)this.get(e)&&(i|=1<<7-a),e++;t[r+o]=i}},e.prototype.getBitArray=function(){return this.bits},e.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,n=this.bits,o=0;o<r;o++){var i=n[o];i=(i=(i=(i=(i=i>>1&1431655765|(1431655765&i)<<1)>>2&858993459|(858993459&i)<<2)>>4&252645135|(252645135&i)<<4)>>8&16711935|(16711935&i)<<8)>>16&65535|(65535&i)<<16,e[t-o]=i}if(this.size!==32*r){var a=32*r-this.size,s=e[0]>>>a;for(o=1;o<r;o++){var l=e[o];s|=l<<32-a,e[o-1]=s,s=l>>>a}e[r-1]=s}this.bits=e},e.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.size===r.size&&xr.equals(this.bits,r.bits)},e.prototype.hashCode=function(){return 31*this.size+xr.hashCode(this.bits)},e.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e},e.prototype.clone=function(){return new e(this.size,this.bits.slice())},e.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},e}();var Er;!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",e[e.ASSUME_GS1=8]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"}(Er||(Er={}));const Sr=Er;var Ar=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Nr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ar(t,e),t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(or);var Ir,kr=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(Ir||(Ir={}));var Tr=function(){function e(t,r,n){for(var o,i,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=t,this.name=n,this.values="number"===typeof r?Int32Array.from([r]):r,this.otherEncodingNames=a,e.VALUE_IDENTIFIER_TO_ECI.set(t,this),e.NAME_TO_ECI.set(n,this);for(var l=this.values,c=0,u=l.length;c!==u;c++){var d=l[c];e.VALUES_TO_ECI.set(d,this)}try{for(var f=kr(a),h=f.next();!h.done;h=f.next()){var p=h.value;e.NAME_TO_ECI.set(p,this)}}catch(g){o={error:g}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}}return e.prototype.getValueIdentifier=function(){return this.valueIdentifier},e.prototype.getName=function(){return this.name},e.prototype.getValue=function(){return this.values[0]},e.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new Nr("incorect value");var r=e.VALUES_TO_ECI.get(t);if(void 0===r)throw new Nr("incorect value");return r},e.getCharacterSetECIByName=function(t){var r=e.NAME_TO_ECI.get(t);if(void 0===r)throw new Nr("incorect value");return r},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.getName()===r.getName()},e.VALUE_IDENTIFIER_TO_ECI=new Map,e.VALUES_TO_ECI=new Map,e.NAME_TO_ECI=new Map,e.Cp437=new e(Ir.Cp437,Int32Array.from([0,2]),"Cp437"),e.ISO8859_1=new e(Ir.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),e.ISO8859_2=new e(Ir.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),e.ISO8859_3=new e(Ir.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),e.ISO8859_4=new e(Ir.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),e.ISO8859_5=new e(Ir.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),e.ISO8859_6=new e(Ir.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),e.ISO8859_7=new e(Ir.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),e.ISO8859_8=new e(Ir.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),e.ISO8859_9=new e(Ir.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),e.ISO8859_10=new e(Ir.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),e.ISO8859_11=new e(Ir.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),e.ISO8859_13=new e(Ir.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),e.ISO8859_14=new e(Ir.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),e.ISO8859_15=new e(Ir.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),e.ISO8859_16=new e(Ir.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),e.SJIS=new e(Ir.SJIS,20,"SJIS","Shift_JIS"),e.Cp1250=new e(Ir.Cp1250,21,"Cp1250","windows-1250"),e.Cp1251=new e(Ir.Cp1251,22,"Cp1251","windows-1251"),e.Cp1252=new e(Ir.Cp1252,23,"Cp1252","windows-1252"),e.Cp1256=new e(Ir.Cp1256,24,"Cp1256","windows-1256"),e.UnicodeBigUnmarked=new e(Ir.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),e.UTF8=new e(Ir.UTF8,26,"UTF8","UTF-8"),e.ASCII=new e(Ir.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),e.Big5=new e(Ir.Big5,28,"Big5"),e.GB18030=new e(Ir.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),e.EUC_KR=new e(Ir.EUC_KR,30,"EUC_KR","EUC-KR"),e}();const Or=Tr;var Rr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Mr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rr(t,e),t.kind="UnsupportedOperationException",t}(or);const Pr=function(){function e(){}return e.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},e.shouldDecodeOnFallback=function(t){return!e.isBrowser()&&"ISO-8859-1"===t},e.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)},e.isBrowser=function(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)},e.encodingName=function(e){return"string"===typeof e?e:e.getName()},e.encodingCharacterSet=function(e){return e instanceof Or?e:Or.getCharacterSetECIByName(e)},e.decodeFallback=function(t,r){var n=this.encodingCharacterSet(r);if(e.isDecodeFallbackSupported(n)){for(var o="",i=0,a=t.length;i<a;i++){var s=t[i].toString(16);s.length<2&&(s="0"+s),o+="%"+s}return decodeURIComponent(o)}if(n.equals(Or.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new Mr("Encoding "+this.encodingName(r)+" not supported by fallback.")},e.isDecodeFallbackSupported=function(e){return e.equals(Or.UTF8)||e.equals(Or.ISO8859_1)||e.equals(Or.ASCII)},e.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))).split(""),r=[],n=0;n<t.length;n++)r.push(t[n].charCodeAt(0));return new Uint8Array(r)},e}();const jr=function(){function e(){}return e.castAsNonUtf8Char=function(e,t){void 0===t&&(t=null);var r=t?t.getName():this.ISO88591;return Pr.decode(new Uint8Array([e]),r)},e.guessEncoding=function(t,r){if(null!==r&&void 0!==r&&void 0!==r.get(Sr.CHARACTER_SET))return r.get(Sr.CHARACTER_SET).toString();for(var n=t.length,o=!0,i=!0,a=!0,s=0,l=0,c=0,u=0,d=0,f=0,h=0,p=0,g=0,m=0,y=0,v=t.length>3&&239===t[0]&&187===t[1]&&191===t[2],w=0;w<n&&(o||i||a);w++){var b=255&t[w];a&&(s>0?0===(128&b)?a=!1:s--:0!==(128&b)&&(0===(64&b)?a=!1:(s++,0===(32&b)?l++:(s++,0===(16&b)?c++:(s++,0===(8&b)?u++:a=!1))))),o&&(b>127&&b<160?o=!1:b>159&&(b<192||215===b||247===b)&&y++),i&&(d>0?b<64||127===b||b>252?i=!1:d--:128===b||160===b||b>239?i=!1:b>160&&b<224?(f++,p=0,++h>g&&(g=h)):b>127?(d++,h=0,++p>m&&(m=p)):(h=0,p=0))}return a&&s>0&&(a=!1),i&&d>0&&(i=!1),a&&(v||l+c+u>0)?e.UTF8:i&&(e.ASSUME_SHIFT_JIS||g>=3||m>=3)?e.SHIFT_JIS:o&&i?2===g&&2===f||10*y>=n?e.SHIFT_JIS:e.ISO88591:o?e.ISO88591:i?e.SHIFT_JIS:a?e.UTF8:e.PLATFORM_DEFAULT_ENCODING},e.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,r,o,i,a,s){if("%%"===e)return"%";if(void 0!==t[++n]){e=i?parseInt(i.substr(1)):void 0;var l,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);for(var u=parseInt(o),d=o&&o[0]+""==="0"?"0":" ";l.length<u;)l=void 0!==r?l+d:d+l;return l}})},e.getBytes=function(e,t){return Pr.encode(e,t)},e.getCharCode=function(e,t){return void 0===t&&(t=0),e.charCodeAt(t)},e.getCharAt=function(e){return String.fromCharCode(e)},e.SHIFT_JIS=Or.SJIS.getName(),e.GB2312="GB2312",e.ISO88591=Or.ISO8859_1.getName(),e.EUC_JP="EUC_JP",e.UTF8=Or.UTF8.getName(),e.PLATFORM_DEFAULT_ENCODING=e.UTF8,e.ASSUME_SHIFT_JIS=!1,e}();const Dr=function(){function e(e){void 0===e&&(e=""),this.value=e}return e.prototype.enableDecoding=function(e){return this.encoding=e,this},e.prototype.append=function(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=jr.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},e.prototype.appendChars=function(e,t,r){for(var n=t;t<t+r;n++)this.append(e[n]);return this},e.prototype.length=function(){return this.value.length},e.prototype.charAt=function(e){return this.value.charAt(e)},e.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},e.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},e.prototype.substring=function(e,t){return this.value.substring(e,t)},e.prototype.setLengthToZero=function(){this.value=""},e.prototype.toString=function(){return this.value},e.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},e}();const Br=function(){function e(e,t,r,n){if(this.width=e,this.height=t,this.rowSize=r,this.bits=n,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new lr("Both dimensions must be greater than 0");void 0!==r&&null!==r||(r=Math.floor((e+31)/32)),this.rowSize=r,void 0!==n&&null!==n||(this.bits=new Int32Array(this.rowSize*this.height))}return e.parseFromBooleanArray=function(t){for(var r=t.length,n=t[0].length,o=new e(n,r),i=0;i<r;i++)for(var a=t[i],s=0;s<n;s++)a[s]&&o.set(s,i);return o},e.parseFromString=function(t,r,n){if(null===t)throw new lr("stringRepresentation cannot be null");for(var o=new Array(t.length),i=0,a=0,s=-1,l=0,c=0;c<t.length;)if("\n"===t.charAt(c)||"\r"===t.charAt(c)){if(i>a){if(-1===s)s=i-a;else if(i-a!==s)throw new lr("row lengths do not match");a=i,l++}c++}else if(t.substring(c,c+r.length)===r)c+=r.length,o[i]=!0,i++;else{if(t.substring(c,c+n.length)!==n)throw new lr("illegal character encountered: "+t.substring(c));c+=n.length,o[i]=!1,i++}if(i>a){if(-1===s)s=i-a;else if(i-a!==s)throw new lr("row lengths do not match");l++}for(var u=new e(s,l),d=0;d<i;d++)o[d]&&u.set(Math.floor(d%s),Math.floor(d/s));return u},e.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[r]>>>(31&e)&1)},e.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(31&e)&4294967295},e.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(31&e)&4294967295)},e.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(31&e)&4294967295},e.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new lr("input matrix dimensions do not match");for(var t=new _r(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits,o=0,i=this.height;o<i;o++)for(var a=o*r,s=e.getRow(o,t).getBitArray(),l=0;l<r;l++)n[a+l]^=s[l]},e.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},e.prototype.setRegion=function(e,t,r,n){if(t<0||e<0)throw new lr("Left and top must be nonnegative");if(n<1||r<1)throw new lr("Height and width must be at least 1");var o=e+r,i=t+n;if(i>this.height||o>this.width)throw new lr("The region must fit inside the matrix");for(var a=this.rowSize,s=this.bits,l=t;l<i;l++)for(var c=l*a,u=e;u<o;u++)s[c+Math.floor(u/32)]|=1<<(31&u)&4294967295},e.prototype.getRow=function(e,t){null===t||void 0===t||t.getSize()<this.width?t=new _r(this.width):t.clear();for(var r=this.rowSize,n=this.bits,o=e*r,i=0;i<r;i++)t.setBulk(32*i,n[o+i]);return t},e.prototype.setRow=function(e,t){pr.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},e.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new _r(e),n=new _r(e),o=0,i=Math.floor((t+1)/2);o<i;o++)r=this.getRow(o,r),n=this.getRow(t-1-o,n),r.reverse(),n.reverse(),this.setRow(o,n),this.setRow(t-1-o,r)},e.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,n=this.bits,o=e,i=t,a=-1,s=-1,l=0;l<t;l++)for(var c=0;c<r;c++){var u=n[l*r+c];if(0!==u){if(l<i&&(i=l),l>s&&(s=l),32*c<o){for(var d=0;0===(u<<31-d&4294967295);)d++;32*c+d<o&&(o=32*c+d)}if(32*c+31>a){for(d=31;u>>>d===0;)d--;32*c+d>a&&(a=32*c+d)}}}return a<o||s<i?null:Int32Array.from([o,i,a-o+1,s-i+1])},e.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&0===t[r];)r++;if(r===t.length)return null;for(var n=r/e,o=r%e*32,i=t[r],a=0;0===(i<<31-a&4294967295);)a++;return o+=a,Int32Array.from([o,n])},e.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&0===t[r];)r--;if(r<0)return null;for(var n=Math.floor(r/e),o=32*Math.floor(r%e),i=t[r],a=31;i>>>a===0;)a--;return o+=a,Int32Array.from([o,n])},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRowSize=function(){return this.rowSize},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&xr.equals(this.bits,r.bits)},e.prototype.hashCode=function(){var e=this.width;return e=31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+xr.hashCode(this.bits)},e.prototype.toString=function(e,t,r){return void 0===e&&(e="X "),void 0===t&&(t="  "),void 0===r&&(r="\n"),this.buildToString(e,t,r)},e.prototype.buildToString=function(e,t,r){for(var n=new Dr,o=0,i=this.height;o<i;o++){for(var a=0,s=this.width;a<s;a++)n.append(this.get(a,o)?e:t);n.append(r)}return n.toString()},e.prototype.clone=function(){return new e(this.width,this.height,this.rowSize,this.bits.slice())},e}();var Lr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Fr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lr(t,e),t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(or);var Ur=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const zr=function(e){function t(r){var n=e.call(this,r)||this;return n.luminances=t.EMPTY,n.buckets=new Int32Array(t.LUMINANCE_BUCKETS),n}return Ur(t,e),t.prototype.getBlackRow=function(e,r){var n=this.getLuminanceSource(),o=n.getWidth();void 0===r||null===r||r.getSize()<o?r=new _r(o):r.clear(),this.initArrays(o);for(var i=n.getRow(e,this.luminances),a=this.buckets,s=0;s<o;s++)a[(255&i[s])>>t.LUMINANCE_SHIFT]++;var l=t.estimateBlackPoint(a);if(o<3)for(s=0;s<o;s++)(255&i[s])<l&&r.set(s);else{var c=255&i[0],u=255&i[1];for(s=1;s<o-1;s++){var d=255&i[s+1];(4*u-c-d)/2<l&&r.set(s),c=u,u=d}}return r},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),r=e.getWidth(),n=e.getHeight(),o=new Br(r,n);this.initArrays(r);for(var i=this.buckets,a=1;a<5;a++)for(var s=Math.floor(n*a/5),l=e.getRow(s,this.luminances),c=Math.floor(4*r/5),u=Math.floor(r/5);u<c;u++){i[(255&l[u])>>t.LUMINANCE_SHIFT]++}var d=t.estimateBlackPoint(i),f=e.getMatrix();for(a=0;a<n;a++){var h=a*r;for(u=0;u<r;u++){(255&f[h+u])<d&&o.set(u,a)}}return o},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var r=this.buckets,n=0;n<t.LUMINANCE_BUCKETS;n++)r[n]=0},t.estimateBlackPoint=function(e){for(var r=e.length,n=0,o=0,i=0,a=0;a<r;a++)e[a]>i&&(o=a,i=e[a]),e[a]>n&&(n=e[a]);var s=0,l=0;for(a=0;a<r;a++){var c=a-o;(h=e[a]*c*c)>l&&(s=a,l=h)}if(o>s){var u=o;o=s,s=u}if(s-o<=r/16)throw new Fr;var d=s-1,f=-1;for(a=s-1;a>o;a--){var h,p=a-o;(h=p*p*(s-a)*(n-e[a]))>f&&(d=a,f=h)}return d<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(fr);var Vr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Hr=function(e){function t(t){var r=e.call(this,t)||this;return r.matrix=null,r}return Vr(t,e),t.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),o=r.getHeight();if(n>=t.MINIMUM_DIMENSION&&o>=t.MINIMUM_DIMENSION){var i=r.getMatrix(),a=n>>t.BLOCK_SIZE_POWER;0!==(n&t.BLOCK_SIZE_MASK)&&a++;var s=o>>t.BLOCK_SIZE_POWER;0!==(o&t.BLOCK_SIZE_MASK)&&s++;var l=t.calculateBlackPoints(i,a,s,n,o),c=new Br(n,o);t.calculateThresholdForBlock(i,a,s,n,o,l,c),this.matrix=c}else this.matrix=e.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,r,n,o,i,a,s){for(var l=i-t.BLOCK_SIZE,c=o-t.BLOCK_SIZE,u=0;u<n;u++){var d=u<<t.BLOCK_SIZE_POWER;d>l&&(d=l);for(var f=t.cap(u,2,n-3),h=0;h<r;h++){var p=h<<t.BLOCK_SIZE_POWER;p>c&&(p=c);for(var g=t.cap(h,2,r-3),m=0,y=-2;y<=2;y++){var v=a[f+y];m+=v[g-2]+v[g-1]+v[g]+v[g+1]+v[g+2]}var w=m/25;t.thresholdBlock(e,p,d,w,o,s)}}},t.cap=function(e,t,r){return e<t?t:e>r?r:e},t.thresholdBlock=function(e,r,n,o,i,a){for(var s=0,l=n*i+r;s<t.BLOCK_SIZE;s++,l+=i)for(var c=0;c<t.BLOCK_SIZE;c++)(255&e[l+c])<=o&&a.set(r+c,n+s)},t.calculateBlackPoints=function(e,r,n,o,i){for(var a=i-t.BLOCK_SIZE,s=o-t.BLOCK_SIZE,l=new Array(n),c=0;c<n;c++){l[c]=new Int32Array(r);var u=c<<t.BLOCK_SIZE_POWER;u>a&&(u=a);for(var d=0;d<r;d++){var f=d<<t.BLOCK_SIZE_POWER;f>s&&(f=s);for(var h=0,p=255,g=0,m=0,y=u*o+f;m<t.BLOCK_SIZE;m++,y+=o){for(var v=0;v<t.BLOCK_SIZE;v++){var w=255&e[y+v];h+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>t.MIN_DYNAMIC_RANGE)for(m++,y+=o;m<t.BLOCK_SIZE;m++,y+=o)for(v=0;v<t.BLOCK_SIZE;v++)h+=255&e[y+v]}var b=h>>2*t.BLOCK_SIZE_POWER;if(g-p<=t.MIN_DYNAMIC_RANGE&&(b=p/2,c>0&&d>0)){var x=(l[c-1][d]+2*l[c][d-1]+l[c-1][d-1])/4;p<x&&(b=x)}l[c][d]=b}}return l},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=5*t.BLOCK_SIZE,t.MIN_DYNAMIC_RANGE=24,t}(zr);const Wr=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.isCropSupported=function(){return!1},e.prototype.crop=function(e,t,r,n){throw new Mr("This luminance source does not support cropping.")},e.prototype.isRotateSupported=function(){return!1},e.prototype.rotateCounterClockwise=function(){throw new Mr("This luminance source does not support rotation by 90 degrees.")},e.prototype.rotateCounterClockwise45=function(){throw new Mr("This luminance source does not support rotation by 45 degrees.")},e.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Dr,r=0;r<this.height;r++){for(var n=this.getRow(r,e),o=0;o<this.width;o++){var i=255&n[o],a=void 0;a=i<64?"#":i<128?"+":i<192?".":" ",t.append(a)}t.append("\n")}return t.toString()},e}();var Gr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Xr=function(e){function t(t){var r=e.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return Gr(t,e),t.prototype.getRow=function(e,t){for(var r=this.delegate.getRow(e,t),n=this.getWidth(),o=0;o<n;o++)r[o]=255-(255&r[o]);return r},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(t),n=0;n<t;n++)r[n]=255-(255&e[n]);return r},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,r,n,o){return new t(this.delegate.crop(e,r,n,o))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(Wr);var Yr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kr=function(e){function t(r,n){void 0===n&&(n=!1);var o=e.call(this,r.width,r.height)||this;return o.canvas=r,o.tempCanvasElement=null,o.buffer=t.makeBufferFromCanvasImageData(r,n),o}return Yr(t,e),t.makeBufferFromCanvasImageData=function(e,r){void 0===r&&(r=!1);var n=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(n.data,e.width,e.height,r)},t.toGrayscaleBuffer=function(e,r,n,o){void 0===o&&(o=!1);var i=new Uint8ClampedArray(r*n);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!o)for(var a=0,s=0,l=e.length;a<l;a+=4,s++){var c=void 0;if(0===e[a+3])c=255;else c=306*e[a]+601*e[a+1]+117*e[a+2]+512>>10;i[s]=c}else{a=0,s=0;for(var u=e.length;a<u;a+=4,s++){c=void 0;if(0===e[a+3])c=255;else c=306*e[a]+601*e[a+1]+117*e[a+2]+512>>10;i[s]=255-c}}return i},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new lr("Requested row is outside the image: "+e);var r=this.getWidth(),n=e*r;return null===t?t=this.buffer.slice(n,n+r):(t.length<r&&(t=new Uint8ClampedArray(r)),t.set(this.buffer.slice(n,n+r))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,r,n,o){return e.prototype.crop.call(this,t,r,n,o),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var r=this.getTempCanvasElement(),n=r.getContext("2d"),o=e*t.DEGREE_TO_RADIANS,i=this.canvas.width,a=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(o))*i+Math.abs(Math.sin(o))*a),l=Math.ceil(Math.abs(Math.sin(o))*i+Math.abs(Math.cos(o))*a);return r.width=s,r.height=l,n.translate(s/2,l/2),n.rotate(o),n.drawImage(this.canvas,i/-2,a/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.prototype.invert=function(){return new Xr(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(Wr),Zr=function(){function e(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return e.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},e}(),qr=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(Au){i(Au)}}function s(e){try{l(n.throw(e))}catch(Au){i(Au)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},$r=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(Au){i=[6,Au],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Qr=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jr=function(){function e(e,t,r){void 0===t&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(e.prototype,"hasNavigator",{get:function(){return"undefined"!==typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),e.prototype.listVideoInputDevices=function(){return qr(this,void 0,void 0,function(){var e,t,r,n,o,i,a,s,l,c,u,d;return $r(this,function(f){switch(f.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=f.sent(),t=[];try{for(r=Qr(e),n=r.next();!n.done;n=r.next())o=n.value,"videoinput"===(i="video"===o.kind?"videoinput":o.kind)&&(a=o.deviceId||o.id,s=o.label||"Video device "+(t.length+1),l=o.groupId,c={deviceId:a,label:s,kind:i,groupId:l},t.push(c))}catch(h){u={error:h}}finally{try{n&&!n.done&&(d=r.return)&&d.call(r)}finally{if(u)throw u.error}}return[2,t]}})})},e.prototype.getVideoInputDevices=function(){return qr(this,void 0,void 0,function(){return $r(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,e.sent().map(function(e){return new Zr(e.deviceId,e.label)})]}})})},e.prototype.findDeviceById=function(e){return qr(this,void 0,void 0,function(){var t;return $r(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(t=r.sent())?[2,t.find(function(t){return t.deviceId===e})]:[2,null]}})})},e.prototype.decodeFromInputVideoDevice=function(e,t){return qr(this,void 0,void 0,function(){return $r(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},e.prototype.decodeOnceFromVideoDevice=function(e,t){return qr(this,void 0,void 0,function(){var r;return $r(this,function(n){switch(n.label){case 0:return this.reset(),r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(r,t)];case 1:return[2,n.sent()]}})})},e.prototype.decodeOnceFromConstraints=function(e,t){return qr(this,void 0,void 0,function(){var r;return $r(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,n.sent()]}})})},e.prototype.decodeOnceFromStream=function(e,t){return qr(this,void 0,void 0,function(){var r;return $r(this,function(n){switch(n.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=n.sent(),[4,this.decodeOnce(r)];case 2:return[2,n.sent()]}})})},e.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return qr(this,void 0,void 0,function(){return $r(this,function(n){switch(n.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,n.sent()]}})})},e.prototype.decodeFromVideoDevice=function(e,t,r){return qr(this,void 0,void 0,function(){var n;return $r(this,function(o){switch(o.label){case 0:return n={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(n,t,r)];case 1:return[2,o.sent()]}})})},e.prototype.decodeFromConstraints=function(e,t,r){return qr(this,void 0,void 0,function(){var n;return $r(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=o.sent(),[4,this.decodeFromStream(n,t,r)];case 2:return[2,o.sent()]}})})},e.prototype.decodeFromStream=function(e,t,r){return qr(this,void 0,void 0,function(){var n;return $r(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=o.sent(),[4,this.decodeContinuously(n,r)];case 2:return[2,o.sent()]}})})},e.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},e.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},e.prototype.attachStreamToVideo=function(e,t){return qr(this,void 0,void 0,function(){var r;return $r(this,function(n){switch(n.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return n.sent(),[2,r]}})})},e.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,n){return t.playVideoOnLoad(e,function(){return r()})})},e.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},e.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},e.prototype.tryPlayVideo=function(e){return qr(this,void 0,void 0,function(){return $r(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},e.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new ar("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new ar("element with id '"+e+"' must be an "+t+" element");return r},e.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new ar("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},e.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new ar("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},e.prototype.decodeFromVideoContinuously=function(e,t,r){if(void 0===e&&void 0===t)throw new ar("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},e.prototype.decodeFromImageElement=function(e){if(!e)throw new ar("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)},e.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},e.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},e.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ar("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},e.prototype.decodeFromImageUrl=function(e){if(!e)throw new ar("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},e.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ar("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},e.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new ar("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,t);return r.src=e,n},e.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,n){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,n)},e.addEventListener("load",t.imageLoadedListener)})},e.prototype._decodeOnLoadVideo=function(e){return qr(this,void 0,void 0,function(){return $r(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},e.prototype._decodeOnLoadVideoContinuously=function(e,t){return qr(this,void 0,void 0,function(){return $r(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},e.prototype.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.prototype.prepareImageElement=function(e){var t;return"undefined"===typeof e&&((t=document.createElement("img")).width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},e.prototype.prepareVideoElement=function(e){var t;return e||"undefined"===typeof document||((t=document.createElement("video")).width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},e.prototype.decodeOnce=function(e,t,r){var n=this;void 0===t&&(t=!0),void 0===r&&(r=!0),this._stopAsyncDecode=!1;var o=function(i,a){if(n._stopAsyncDecode)return a(new Fr("Video stream has ended before any code could be detected.")),void(n._stopAsyncDecode=void 0);try{i(n.decode(e))}catch(Au){if(t&&Au instanceof Fr||(Au instanceof dr||Au instanceof Nr)&&r)return setTimeout(o,n._timeBetweenDecodingAttempts,i,a);a(Au)}};return new Promise(function(e,t){return o(e,t)})},e.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var n=function(){if(r._stopContinuousDecode)r._stopContinuousDecode=void 0;else try{var o=r.decode(e);t(o,null),setTimeout(n,r.timeBetweenScansMillis)}catch(Au){t(null,Au),(Au instanceof dr||Au instanceof Nr||Au instanceof Fr)&&setTimeout(n,r._timeBetweenDecodingAttempts)}};n()},e.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},e.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),n=new Kr(r,t),o=new Hr(n);return new cr(o)},e.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch(Au){r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},e.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},e.prototype.drawFrameOnCanvas=function(e,t,r){void 0===t&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),void 0===r&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},e.prototype.drawImageOnCanvas=function(e,t,r){void 0===t&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),void 0===r&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},e.prototype.createCaptureCanvas=function(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;var t,r,n=document.createElement("canvas");return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(t=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(t=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),n.style.width=t+"px",n.style.height=r+"px",n.width=t,n.height=r,n},e.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},e.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},e.prototype._destroyVideoElement=function(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},e.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},e.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},e.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch(r){e.src=URL.createObjectURL(t)}},e.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")},e}(),en=function(){function e(e,t,r,n,o,i){void 0===r&&(r=null==t?0:8*t.length),void 0===i&&(i=pr.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=n,this.format=o,this.timestamp=i,this.text=e,this.rawBytes=t,this.numBits=void 0===r||null===r?null===t||void 0===t?0:8*t.length:r,this.resultPoints=n,this.format=o,this.resultMetadata=null,this.timestamp=void 0===i||null===i?pr.currentTimeMillis():i}return e.prototype.getText=function(){return this.text},e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.getBarcodeFormat=function(){return this.format},e.prototype.getResultMetadata=function(){return this.resultMetadata},e.prototype.putMetadata=function(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},e.prototype.putAllMetadata=function(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))},e.prototype.addResultPoints=function(e){var t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){var r=new Array(t.length+e.length);pr.arraycopy(t,0,r,0,t.length),pr.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.toString=function(){return this.text},e}();const tn=en;var rn;!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(rn||(rn={}));const nn=rn;var on;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(on||(on={}));const an=on;const sn=function(){function e(e,t,r,n,o,i){void 0===o&&(o=-1),void 0===i&&(i=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=i,this.numBits=void 0===e||null===e?0:8*e.length}return e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.setNumBits=function(e){this.numBits=e},e.prototype.getText=function(){return this.text},e.prototype.getByteSegments=function(){return this.byteSegments},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getErrorsCorrected=function(){return this.errorsCorrected},e.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},e.prototype.getErasures=function(){return this.erasures},e.prototype.setErasures=function(e){this.erasures=e},e.prototype.getOther=function(){return this.other},e.prototype.setOther=function(e){this.other=e},e.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},e.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},e.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},e}();const ln=function(){function e(){}return e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new lr;return this.logTable[e]},e.addOrSubtract=function(e,t){return e^t},e}();const cn=function(){function e(e,t){if(0===t.length)throw new lr;this.field=e;var r=t.length;if(r>1&&0===t[0]){for(var n=1;n<r&&0===t[n];)n++;n===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-n),pr.arraycopy(t,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var t,r=this.coefficients;if(1===e){t=0;for(var n=0,o=r.length;n!==o;n++){var i=r[n];t=ln.addOrSubtract(t,i)}return t}t=r[0];var a=r.length,s=this.field;for(n=1;n<a;n++)t=ln.addOrSubtract(s.multiply(e,t),r[n]);return t},e.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new lr("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var r=this.coefficients,n=t.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var i=new Int32Array(n.length),a=n.length-r.length;pr.arraycopy(n,0,i,0,a);for(var s=a;s<n.length;s++)i[s]=ln.addOrSubtract(r[s-a],n[s]);return new e(this.field,i)},e.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new lr("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,o=t.coefficients,i=o.length,a=new Int32Array(n+i-1),s=this.field,l=0;l<n;l++)for(var c=r[l],u=0;u<i;u++)a[l+u]=ln.addOrSubtract(a[l+u],s.multiply(c,o[u]));return new e(s,a)},e.prototype.multiplyScalar=function(t){if(0===t)return this.field.getZero();if(1===t)return this;for(var r=this.coefficients.length,n=this.field,o=new Int32Array(r),i=this.coefficients,a=0;a<r;a++)o[a]=n.multiply(i[a],t);return new e(n,o)},e.prototype.multiplyByMonomial=function(t,r){if(t<0)throw new lr;if(0===r)return this.field.getZero();for(var n=this.coefficients,o=n.length,i=new Int32Array(o+t),a=this.field,s=0;s<o;s++)i[s]=a.multiply(n[s],r);return new e(a,i)},e.prototype.divide=function(e){if(!this.field.equals(e.field))throw new lr("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new lr("Divide by 0");for(var t=this.field,r=t.getZero(),n=this,o=e.getCoefficient(e.getDegree()),i=t.inverse(o);n.getDegree()>=e.getDegree()&&!n.isZero();){var a=n.getDegree()-e.getDegree(),s=t.multiply(n.getCoefficient(n.getDegree()),i),l=e.multiplyByMonomial(a,s),c=t.buildMonomial(a,s);r=r.addOrSubtract(c),n=n.addOrSubtract(l)}return[r,n]},e.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(0!==r){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),0===t||1!==r){var n=this.field.log(r);0===n?e+="1":1===n?e+="a":(e+="a^",e+=n)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e},e}();var un=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return un(t,e),t.kind="ArithmeticException",t}(or);var fn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const hn=function(e){function t(t,r,n){var o=e.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=n;for(var i=new Int32Array(r),a=1,s=0;s<r;s++)i[s]=a,(a*=2)>=r&&(a^=t,a&=r-1);o.expTable=i;var l=new Int32Array(r);for(s=0;s<r-1;s++)l[i[s]]=s;return o.logTable=l,o.zero=new cn(o,Int32Array.from([0])),o.one=new cn(o,Int32Array.from([1])),o}return fn(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new lr;if(0===t)return this.zero;var r=new Int32Array(e+1);return r[0]=t,new cn(this,r)},t.prototype.inverse=function(e){if(0===e)throw new dn;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+Cr.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(ln);var pn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.kind="ReedSolomonException",t}(or);var mn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mn(t,e),t.kind="IllegalStateException",t}(or);const vn=function(){function e(e){this.field=e}return e.prototype.decode=function(e,t){for(var r=this.field,n=new cn(r,e),o=new Int32Array(t),i=!0,a=0;a<t;a++){var s=n.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=s,0!==s&&(i=!1)}if(!i){var l=new cn(r,o),c=this.runEuclideanAlgorithm(r.buildMonomial(t,1),l,t),u=c[0],d=c[1],f=this.findErrorLocations(u),h=this.findErrorMagnitudes(d,f);for(a=0;a<f.length;a++){var p=e.length-1-r.log(f[a]);if(p<0)throw new gn("Bad error location");e[p]=hn.addOrSubtract(e[p],h[a])}}},e.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var n=e;e=t,t=n}for(var o=this.field,i=e,a=t,s=o.getZero(),l=o.getOne();a.getDegree()>=(r/2|0);){var c=i,u=s;if(s=l,(i=a).isZero())throw new gn("r_{i-1} was zero");a=c;for(var d=o.getZero(),f=i.getCoefficient(i.getDegree()),h=o.inverse(f);a.getDegree()>=i.getDegree()&&!a.isZero();){var p=a.getDegree()-i.getDegree(),g=o.multiply(a.getCoefficient(a.getDegree()),h);d=d.addOrSubtract(o.buildMonomial(p,g)),a=a.addOrSubtract(i.multiplyByMonomial(p,g))}if(l=d.multiply(s).addOrSubtract(u),a.getDegree()>=i.getDegree())throw new yn("Division algorithm failed to reduce polynomial?")}var m=l.getCoefficient(0);if(0===m)throw new gn("sigmaTilde(0) was zero");var y=o.inverse(m);return[l.multiplyScalar(y),a.multiplyScalar(y)]},e.prototype.findErrorLocations=function(e){var t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),n=0,o=this.field,i=1;i<o.getSize()&&n<t;i++)0===e.evaluateAt(i)&&(r[n]=o.inverse(i),n++);if(n!==t)throw new gn("Error locator degree does not match number of roots");return r},e.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,n=new Int32Array(r),o=this.field,i=0;i<r;i++){for(var a=o.inverse(t[i]),s=1,l=0;l<r;l++)if(i!==l){var c=o.multiply(t[l],a),u=0===(1&c)?1|c:-2&c;s=o.multiply(s,u)}n[i]=o.multiply(e.evaluateAt(a),o.inverse(s)),0!==o.getGeneratorBase()&&(n[i]=o.multiply(n[i],a))}return n},e}();var wn;!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(wn||(wn={}));const bn=function(){function e(){}return e.prototype.decode=function(t){this.ddata=t;var r=t.getBits(),n=this.extractBits(r),o=this.correctBits(n),i=e.convertBoolArrayToByteArray(o),a=e.getEncodedData(o),s=new sn(i,a,null,null);return s.setNumBits(o.length),s},e.highLevelDecode=function(e){return this.getEncodedData(e)},e.getEncodedData=function(t){for(var r=t.length,n=wn.UPPER,o=wn.UPPER,i="",a=0;a<r;)if(o===wn.BINARY){if(r-a<5)break;var s=e.readCode(t,a,5);if(a+=5,0===s){if(r-a<11)break;s=e.readCode(t,a,11)+31,a+=11}for(var l=0;l<s;l++){if(r-a<8){a=r;break}var c=e.readCode(t,a,8);i+=jr.castAsNonUtf8Char(c),a+=8}o=n}else{var u=o===wn.DIGIT?4:5;if(r-a<u)break;c=e.readCode(t,a,u);a+=u;var d=e.getCharacter(o,c);d.startsWith("CTRL_")?(n=o,o=e.getTable(d.charAt(5)),"L"===d.charAt(6)&&(n=o)):(i+=d,o=n)}return i},e.getTable=function(e){switch(e){case"L":return wn.LOWER;case"P":return wn.PUNCT;case"M":return wn.MIXED;case"D":return wn.DIGIT;case"B":return wn.BINARY;default:return wn.UPPER}},e.getCharacter=function(t,r){switch(t){case wn.UPPER:return e.UPPER_TABLE[r];case wn.LOWER:return e.LOWER_TABLE[r];case wn.MIXED:return e.MIXED_TABLE[r];case wn.PUNCT:return e.PUNCT_TABLE[r];case wn.DIGIT:return e.DIGIT_TABLE[r];default:throw new yn("Bad table")}},e.prototype.correctBits=function(t){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=hn.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=hn.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=hn.AZTEC_DATA_10):(n=12,r=hn.AZTEC_DATA_12);var o=this.ddata.getNbDatablocks(),i=t.length/n;if(i<o)throw new Nr;for(var a=t.length%n,s=new Int32Array(i),l=0;l<i;l++,a+=n)s[l]=e.readCode(t,a,n);try{new vn(r).decode(s,i-o)}catch(g){throw new Nr(g)}var c=(1<<n)-1,u=0;for(l=0;l<o;l++){if(0===(h=s[l])||h===c)throw new Nr;1!==h&&h!==c-1||u++}var d=new Array(o*n-u),f=0;for(l=0;l<o;l++){var h;if(1===(h=s[l])||h===c-1)d.fill(h>1,f,f+n-1),f+=n-1;else for(var p=n-1;p>=0;--p)d[f++]=0!==(h&1<<p)}return d},e.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(t?11:14)+4*r,o=new Int32Array(n),i=new Array(this.totalBitsInLayer(r,t));if(t)for(var a=0;a<o.length;a++)o[a]=a;else{var s=n+1+2*Cr.truncDivision(Cr.truncDivision(n,2)-1,15),l=n/2,c=Cr.truncDivision(s,2);for(a=0;a<l;a++){var u=a+Cr.truncDivision(a,15);o[l-a-1]=c-u-1,o[l+a]=c+u+1}}a=0;for(var d=0;a<r;a++){for(var f=4*(r-a)+(t?9:12),h=2*a,p=n-1-h,g=0;g<f;g++)for(var m=2*g,y=0;y<2;y++)i[d+m+y]=e.get(o[h+y],o[h+g]),i[d+2*f+m+y]=e.get(o[h+g],o[p-y]),i[d+4*f+m+y]=e.get(o[p-y],o[p-g]),i[d+6*f+m+y]=e.get(o[p-g],o[h+y]);d+=8*f}return i},e.readCode=function(e,t,r){for(var n=0,o=t;o<t+r;o++)n<<=1,e[o]&&(n|=1);return n},e.readByte=function(t,r){var n=t.length-r;return n>=8?e.readCode(t,r,8):e.readCode(t,r,n)<<8-n},e.convertBoolArrayToByteArray=function(t){for(var r=new Uint8Array((t.length+7)/8),n=0;n<r.length;n++)r[n]=e.readByte(t,8*n);return r},e.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],e.MIXED_TABLE=["CTRL_PS"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],e.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],e}();const xn=function(){function e(){}return e.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},e.distance=function(e,t,r,n){var o=e-r,i=t-n;return Math.sqrt(o*o+i*i)},e.sum=function(e){for(var t=0,r=0,n=e.length;r!==n;r++){t+=e[r]}return t},e}();const Cn=function(){function e(){}return e.floatToIntBits=function(e){return e},e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}();const _n=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.equals=function(t){if(t instanceof e){var r=t;return this.x===r.x&&this.y===r.y}return!1},e.prototype.hashCode=function(){return 31*Cn.floatToIntBits(this.x)+Cn.floatToIntBits(this.y)},e.prototype.toString=function(){return"("+this.x+","+this.y+")"},e.orderBestPatterns=function(e){var t,r,n,o=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);if(i>=o&&i>=a?(r=e[0],t=e[1],n=e[2]):a>=i&&a>=o?(r=e[1],t=e[0],n=e[2]):(r=e[2],t=e[0],n=e[1]),this.crossProductZ(t,r,n)<0){var s=t;t=n,n=s}e[0]=t,e[1]=r,e[2]=n},e.distance=function(e,t){return xn.distance(e.x,e.y,t.x,t.y)},e.crossProductZ=function(e,t,r){var n=t.x,o=t.y;return(r.x-n)*(e.y-o)-(r.y-o)*(e.x-n)},e}();const En=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}();var Sn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const An=function(e){function t(t,r,n,o,i){var a=e.call(this,t,r)||this;return a.compact=n,a.nbDatablocks=o,a.nbLayers=i,a}return Sn(t,e),t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(En);const Nn=function(){function e(t,r,n,o){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),void 0!==r&&null!==r||(r=e.INIT_SIZE),void 0!==n&&null!==n||(n=t.getWidth()/2|0),void 0!==o&&null!==o||(o=t.getHeight()/2|0);var i=r/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=o-i,this.downInit=o+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Fr}return e.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,n=this.downInit,o=!1,i=!0,a=!1,s=!1,l=!1,c=!1,u=!1,d=this.width,f=this.height;i;){i=!1;for(var h=!0;(h||!s)&&t<d;)(h=this.containsBlackPoint(r,n,t,!1))?(t++,i=!0,s=!0):s||t++;if(t>=d){o=!0;break}for(var p=!0;(p||!l)&&n<f;)(p=this.containsBlackPoint(e,t,n,!0))?(n++,i=!0,l=!0):l||n++;if(n>=f){o=!0;break}for(var g=!0;(g||!c)&&e>=0;)(g=this.containsBlackPoint(r,n,e,!1))?(e--,i=!0,c=!0):c||e--;if(e<0){o=!0;break}for(var m=!0;(m||!u)&&r>=0;)(m=this.containsBlackPoint(e,t,r,!0))?(r--,i=!0,u=!0):u||r--;if(r<0){o=!0;break}i&&(a=!0)}if(!o&&a){for(var y=t-e,v=null,w=1;null===v&&w<y;w++)v=this.getBlackPointOnSegment(e,n-w,e+w,n);if(null==v)throw new Fr;var b=null;for(w=1;null===b&&w<y;w++)b=this.getBlackPointOnSegment(e,r+w,e+w,r);if(null==b)throw new Fr;var x=null;for(w=1;null===x&&w<y;w++)x=this.getBlackPointOnSegment(t,r+w,t-w,r);if(null==x)throw new Fr;var C=null;for(w=1;null===C&&w<y;w++)C=this.getBlackPointOnSegment(t,n-w,t-w,n);if(null==C)throw new Fr;return this.centerEdges(C,v,x,b)}throw new Fr},e.prototype.getBlackPointOnSegment=function(e,t,r,n){for(var o=xn.round(xn.distance(e,t,r,n)),i=(r-e)/o,a=(n-t)/o,s=this.image,l=0;l<o;l++){var c=xn.round(e+l*i),u=xn.round(t+l*a);if(s.get(c,u))return new _n(c,u)}return null},e.prototype.centerEdges=function(t,r,n,o){var i=t.getX(),a=t.getY(),s=r.getX(),l=r.getY(),c=n.getX(),u=n.getY(),d=o.getX(),f=o.getY(),h=e.CORR;return i<this.width/2?[new _n(d-h,f+h),new _n(s+h,l+h),new _n(c-h,u-h),new _n(i+h,a-h)]:[new _n(d+h,f+h),new _n(s+h,l-h),new _n(c-h,u+h),new _n(i-h,a-h)]},e.prototype.containsBlackPoint=function(e,t,r,n){var o=this.image;if(n){for(var i=e;i<=t;i++)if(o.get(i,r))return!0}else for(var a=e;a<=t;a++)if(o.get(r,a))return!0;return!1},e.INIT_SIZE=10,e.CORR=1,e}();const In=function(){function e(){}return e.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),n=e.getHeight(),o=!0,i=0;i<t.length&&o;i+=2){var a=Math.floor(t[i]),s=Math.floor(t[i+1]);if(a<-1||a>r||s<-1||s>n)throw new Fr;o=!1,-1===a?(t[i]=0,o=!0):a===r&&(t[i]=r-1,o=!0),-1===s?(t[i+1]=0,o=!0):s===n&&(t[i+1]=n-1,o=!0)}o=!0;for(i=t.length-2;i>=0&&o;i-=2){a=Math.floor(t[i]),s=Math.floor(t[i+1]);if(a<-1||a>r||s<-1||s>n)throw new Fr;o=!1,-1===a?(t[i]=0,o=!0):a===r&&(t[i]=r-1,o=!0),-1===s?(t[i+1]=0,o=!0):s===n&&(t[i+1]=n-1,o=!0)}},e}();const kn=function(){function e(e,t,r,n,o,i,a,s,l){this.a11=e,this.a21=t,this.a31=r,this.a12=n,this.a22=o,this.a32=i,this.a13=a,this.a23=s,this.a33=l}return e.quadrilateralToQuadrilateral=function(t,r,n,o,i,a,s,l,c,u,d,f,h,p,g,m){var y=e.quadrilateralToSquare(t,r,n,o,i,a,s,l);return e.squareToQuadrilateral(c,u,d,f,h,p,g,m).times(y)},e.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,n=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,u=this.a33,d=0;d<t;d+=2){var f=e[d],h=e[d+1],p=o*f+s*h+u;e[d]=(r*f+i*h+l)/p,e[d+1]=(n*f+a*h+c)/p}},e.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,n=this.a12,o=this.a13,i=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,u=this.a33,d=e.length,f=0;f<d;f++){var h=e[f],p=t[f],g=o*h+s*p+u;e[f]=(r*h+i*p+l)/g,t[f]=(n*h+a*p+c)/g}},e.squareToQuadrilateral=function(t,r,n,o,i,a,s,l){var c=t-n+i-s,u=r-o+a-l;if(0===c&&0===u)return new e(n-t,i-n,t,o-r,a-o,r,0,0,1);var d=n-i,f=s-i,h=o-a,p=l-a,g=d*p-f*h,m=(c*p-f*u)/g,y=(d*u-c*h)/g;return new e(n-t+m*n,s-t+y*s,t,o-r+m*o,l-r+y*l,r,m,y,1)},e.quadrilateralToSquare=function(t,r,n,o,i,a,s,l){return e.squareToQuadrilateral(t,r,n,o,i,a,s,l).buildAdjoint()},e.prototype.buildAdjoint=function(){return new e(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},e.prototype.times=function(t){return new e(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},e}();var Tn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const On=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tn(t,e),t.prototype.sampleGrid=function(e,t,r,n,o,i,a,s,l,c,u,d,f,h,p,g,m,y,v){var w=kn.quadrilateralToQuadrilateral(n,o,i,a,s,l,c,u,d,f,h,p,g,m,y,v);return this.sampleGridWithTransform(e,t,r,w)},t.prototype.sampleGridWithTransform=function(e,t,r,n){if(t<=0||r<=0)throw new Fr;for(var o=new Br(t,r),i=new Float32Array(2*t),a=0;a<r;a++){for(var s=i.length,l=a+.5,c=0;c<s;c+=2)i[c]=c/2+.5,i[c+1]=l;n.transformPoints(i),In.checkAndNudgePoints(e,i);try{for(c=0;c<s;c+=2)e.get(Math.floor(i[c]),Math.floor(i[c+1]))&&o.set(c/2,a)}catch(u){throw new Fr}}return o},t}(In);const Rn=function(){function e(){}return e.setGridSampler=function(t){e.gridSampler=t},e.getInstance=function(){return e.gridSampler},e.gridSampler=new On,e}();var Mn=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.toResultPoint=function(){return new _n(this.getX(),this.getY())},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e}();const Pn=function(){function e(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return e.prototype.detect=function(){return this.detectMirror(!1)},e.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var n=r[0];r[0]=r[2],r[2]=n}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),i=this.getMatrixCornerPoints(r);return new An(o,i,this.compact,this.nbDataBlocks,this.nbLayers)},e.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Fr;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var n=0,o=0;o<4;o++){var i=r[(this.shift+o)%4];this.compact?(n<<=7,n+=i>>1&127):(n<<=10,n+=(i>>2&992)+(i>>1&31))}var a=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=1+(a>>6),this.nbDataBlocks=1+(63&a)):(this.nbLayers=1+(a>>11),this.nbDataBlocks=1+(2047&a))},e.prototype.getRotation=function(e,t){var r=0;e.forEach(function(e,n,o){r=(r<<3)+((e>>t-2<<1)+(1&e))}),r=((1&r)<<11)+(r>>1);for(var n=0;n<4;n++)if(Cr.bitCount(r^this.EXPECTED_CORNER_BITS[n])<=2)return n;throw new Fr},e.prototype.getCorrectedParameterData=function(e,t){var r,n;t?(r=7,n=2):(r=10,n=4);for(var o=r-n,i=new Int32Array(r),a=r-1;a>=0;--a)i[a]=15&e,e>>=4;try{new vn(hn.AZTEC_PARAM).decode(i,o)}catch(l){throw new Fr}var s=0;for(a=0;a<n;a++)s=(s<<4)+i[a];return s},e.prototype.getBullsEyeCorners=function(e){var t=e,r=e,n=e,o=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,i,1,-1),s=this.getFirstDifferent(r,i,1,1),l=this.getFirstDifferent(n,i,-1,1),c=this.getFirstDifferent(o,i,-1,-1);if(this.nbCenterLayers>2){var u=this.distancePoint(c,a)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(u<.75||u>1.25||!this.isWhiteOrBlackRectangle(a,s,l,c))break}t=a,r=s,n=l,o=c,i=!i}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new Fr;this.compact=5===this.nbCenterLayers;var d=new _n(t.getX()+.5,t.getY()-.5),f=new _n(r.getX()+.5,r.getY()+.5),h=new _n(n.getX()-.5,n.getY()+.5),p=new _n(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,f,h,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},e.prototype.getMatrixCenter=function(){var e,t,r,n;try{e=(l=new Nn(this.image).detect())[0],t=l[1],r=l[2],n=l[3]}catch(Au){var o=this.image.getWidth()/2,i=this.image.getHeight()/2;e=this.getFirstDifferent(new Mn(o+7,i-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Mn(o+7,i+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Mn(o-7,i+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new Mn(o-7,i-7),!1,-1,-1).toResultPoint()}var a=xn.round((e.getX()+n.getX()+t.getX()+r.getX())/4),s=xn.round((e.getY()+n.getY()+t.getY()+r.getY())/4);try{var l;e=(l=new Nn(this.image,15,a,s).detect())[0],t=l[1],r=l[2],n=l[3]}catch(Au){e=this.getFirstDifferent(new Mn(a+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Mn(a+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Mn(a-7,s+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new Mn(a-7,s-7),!1,-1,-1).toResultPoint()}return a=xn.round((e.getX()+n.getX()+t.getX()+r.getX())/4),s=xn.round((e.getY()+n.getY()+t.getY()+r.getY())/4),new Mn(a,s)},e.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},e.prototype.sampleGrid=function(e,t,r,n,o){var i=Rn.getInstance(),a=this.getDimension(),s=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return i.sampleGrid(e,a,a,s,s,l,s,l,l,s,l,t.getX(),t.getY(),r.getX(),r.getY(),n.getX(),n.getY(),o.getX(),o.getY())},e.prototype.sampleLine=function(e,t,r){for(var n=0,o=this.distanceResultPoint(e,t),i=o/r,a=e.getX(),s=e.getY(),l=i*(t.getX()-e.getX())/o,c=i*(t.getY()-e.getY())/o,u=0;u<r;u++)this.image.get(xn.round(a+u*l),xn.round(s+u*c))&&(n|=1<<r-u-1);return n},e.prototype.isWhiteOrBlackRectangle=function(e,t,r,n){e=new Mn(e.getX()-3,e.getY()+3),t=new Mn(t.getX()-3,t.getY()-3),r=new Mn(r.getX()+3,r.getY()-3),n=new Mn(n.getX()+3,n.getY()+3);var o=this.getColor(n,e);if(0===o)return!1;var i=this.getColor(e,t);return i===o&&((i=this.getColor(t,r))===o&&(i=this.getColor(r,n))===o)},e.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),n=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,i=0,a=e.getX(),s=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(r),u=0;u<c;u++)a+=n,s+=o,this.image.get(xn.round(a),xn.round(s))!==l&&i++;var d=i/r;return d>.1&&d<.9?0:d<=.1===l?1:-1},e.prototype.getFirstDifferent=function(e,t,r,n){for(var o=e.getX()+r,i=e.getY()+n;this.isValid(o,i)&&this.image.get(o,i)===t;)o+=r,i+=n;for(o-=r,i-=n;this.isValid(o,i)&&this.image.get(o,i)===t;)o+=r;for(o-=r;this.isValid(o,i)&&this.image.get(o,i)===t;)i+=n;return new Mn(o,i-=n)},e.prototype.expandSquare=function(e,t,r){var n=r/(2*t),o=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,l=new _n(a+n*o,s+n*i),c=new _n(a-n*o,s-n*i);return o=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,s=(e[1].getY()+e[3].getY())/2,[l,new _n(a+n*o,s+n*i),c,new _n(a-n*o,s-n*i)]},e.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},e.prototype.isValidPoint=function(e){var t=xn.round(e.getX()),r=xn.round(e.getY());return this.isValid(t,r)},e.prototype.distancePoint=function(e,t){return xn.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.distanceResultPoint=function(e,t){return xn.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Cr.truncDivision(this.nbLayers-4,8)+1)+15},e}();const jn=function(){function e(){}return e.prototype.decode=function(e,t){void 0===t&&(t=null);var r=null,n=new Pn(e.getBlackMatrix()),o=null,i=null;try{o=(a=n.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(t,o),i=(new bn).decode(a)}catch(Au){r=Au}if(null==i)try{var a;o=(a=n.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(t,o),i=(new bn).decode(a)}catch(Au){if(null!=r)throw r;throw Au}var s=new tn(i.getText(),i.getRawBytes(),i.getNumBits(),o,nn.AZTEC,pr.currentTimeMillis()),l=i.getByteSegments();null!=l&&s.putMetadata(an.BYTE_SEGMENTS,l);var c=i.getECLevel();return null!=c&&s.putMetadata(an.ERROR_CORRECTION_LEVEL,c),s},e.prototype.reportFoundResultPoints=function(e,t){if(null!=e){var r=e.get(Sr.NEED_RESULT_POINT_CALLBACK);null!=r&&t.forEach(function(e,t,n){r.foundPossibleResultPoint(e)})}},e.prototype.reset=function(){},e}();var Dn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){function t(t){return void 0===t&&(t=500),e.call(this,new jn,t)||this}Dn(t,e)}(Jr);const Bn=function(){function e(){}return e.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch(c){if(t&&!0===t.get(Sr.TRY_HARDER)&&e.isRotateSupported()){var r=e.rotateCounterClockwise(),n=this.doDecode(r,t),o=n.getResultMetadata(),i=270;null!==o&&!0===o.get(an.ORIENTATION)&&(i+=o.get(an.ORIENTATION)%360),n.putMetadata(an.ORIENTATION,i);var a=n.getResultPoints();if(null!==a)for(var s=r.getHeight(),l=0;l<a.length;l++)a[l]=new _n(s-a[l].getY()-1,a[l].getX());return n}throw new Fr}},e.prototype.reset=function(){},e.prototype.doDecode=function(e,t){var r,n=e.getWidth(),o=e.getHeight(),i=new _r(n),a=t&&!0===t.get(Sr.TRY_HARDER),s=Math.max(1,o>>(a?8:5));r=a?o:15;for(var l=Math.trunc(o/2),c=0;c<r;c++){var u=Math.trunc((c+1)/2),d=l+s*(0===(1&c)?u:-u);if(d<0||d>=o)break;try{i=e.getBlackRow(d,i)}catch(m){continue}for(var f=function(e){if(1===e&&(i.reverse(),t&&!0===t.get(Sr.NEED_RESULT_POINT_CALLBACK))){var r=new Map;t.forEach(function(e,t){return r.set(t,e)}),r.delete(Sr.NEED_RESULT_POINT_CALLBACK),t=r}try{var o=h.decodeRow(d,i,t);if(1===e){o.putMetadata(an.ORIENTATION,180);var a=o.getResultPoints();null!==a&&(a[0]=new _n(n-a[0].getX()-1,a[0].getY()),a[1]=new _n(n-a[1].getX()-1,a[1].getY()))}return{value:o}}catch(s){}},h=this,p=0;p<2;p++){var g=f(p);if("object"===typeof g)return g.value}}throw new Fr},e.recordPattern=function(e,t,r){for(var n=r.length,o=0;o<n;o++)r[o]=0;var i=e.getSize();if(t>=i)throw new Fr;for(var a=!e.get(t),s=0,l=t;l<i;){if(e.get(l)!==a)r[s]++;else{if(++s===n)break;r[s]=1,a=!a}l++}if(s!==n&&(s!==n-1||l!==i))throw new Fr},e.recordPatternInReverse=function(t,r,n){for(var o=n.length,i=t.get(r);r>0&&o>=0;)t.get(--r)!==i&&(o--,i=!i);if(o>=0)throw new Fr;e.recordPattern(t,r+1,n)},e.patternMatchVariance=function(e,t,r){for(var n=e.length,o=0,i=0,a=0;a<n;a++)o+=e[a],i+=t[a];if(o<i)return Number.POSITIVE_INFINITY;var s=o/i;r*=s;for(var l=0,c=0;c<n;c++){var u=e[c],d=t[c]*s,f=u>d?u-d:d-u;if(f>r)return Number.POSITIVE_INFINITY;l+=f}return l/o},e}();var Ln=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ln(t,e),t.findStartPattern=function(e){for(var r=e.getSize(),n=e.getNextSet(0),o=0,i=Int32Array.from([0,0,0,0,0,0]),a=n,s=!1,l=n;l<r;l++)if(e.get(l)!==s)i[o]++;else{if(5===o){for(var c=t.MAX_AVG_VARIANCE,u=-1,d=t.CODE_START_A;d<=t.CODE_START_C;d++){var f=Bn.patternMatchVariance(i,t.CODE_PATTERNS[d],t.MAX_INDIVIDUAL_VARIANCE);f<c&&(c=f,u=d)}if(u>=0&&e.isRange(Math.max(0,a-(l-a)/2),a,!1))return Int32Array.from([a,l,u]);a+=i[0]+i[1],(i=i.slice(2,i.length))[o-1]=0,i[o]=0,o--}else o++;i[o]=1,s=!s}throw new Fr},t.decodeCode=function(e,r,n){Bn.recordPattern(e,n,r);for(var o=t.MAX_AVG_VARIANCE,i=-1,a=0;a<t.CODE_PATTERNS.length;a++){var s=t.CODE_PATTERNS[a],l=this.patternMatchVariance(r,s,t.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,i=a)}if(i>=0)return i;throw new Fr},t.prototype.decodeRow=function(e,r,n){var o,i=n&&!0===n.get(Sr.ASSUME_GS1),a=t.findStartPattern(r),s=a[2],l=0,c=new Uint8Array(20);switch(c[l++]=s,s){case t.CODE_START_A:o=t.CODE_CODE_A;break;case t.CODE_START_B:o=t.CODE_CODE_B;break;case t.CODE_START_C:o=t.CODE_CODE_C;break;default:throw new Nr}for(var u=!1,d=!1,f="",h=a[0],p=a[1],g=Int32Array.from([0,0,0,0,0,0]),m=0,y=0,v=s,w=0,b=!0,x=!1,C=!1;!u;){var _=d;switch(d=!1,m=y,y=t.decodeCode(r,g,p),c[l++]=y,y!==t.CODE_STOP&&(b=!0),y!==t.CODE_STOP&&(v+=++w*y),h=p,p+=g.reduce(function(e,t){return e+t},0),y){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new Nr}switch(o){case t.CODE_CODE_A:if(y<64)f+=C===x?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),C=!1;else if(y<96)f+=C===x?String.fromCharCode(y-64):String.fromCharCode(y+64),C=!1;else switch(y!==t.CODE_STOP&&(b=!1),y){case t.CODE_FNC_1:i&&(0===f.length?f+="]C1":f+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!x&&C?(x=!0,C=!1):x&&C?(x=!1,C=!1):C=!0;break;case t.CODE_SHIFT:d=!0,o=t.CODE_CODE_B;break;case t.CODE_CODE_B:o=t.CODE_CODE_B;break;case t.CODE_CODE_C:o=t.CODE_CODE_C;break;case t.CODE_STOP:u=!0}break;case t.CODE_CODE_B:if(y<96)f+=C===x?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),C=!1;else switch(y!==t.CODE_STOP&&(b=!1),y){case t.CODE_FNC_1:i&&(0===f.length?f+="]C1":f+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!x&&C?(x=!0,C=!1):x&&C?(x=!1,C=!1):C=!0;break;case t.CODE_SHIFT:d=!0,o=t.CODE_CODE_A;break;case t.CODE_CODE_A:o=t.CODE_CODE_A;break;case t.CODE_CODE_C:o=t.CODE_CODE_C;break;case t.CODE_STOP:u=!0}break;case t.CODE_CODE_C:if(y<100)y<10&&(f+="0"),f+=y;else switch(y!==t.CODE_STOP&&(b=!1),y){case t.CODE_FNC_1:i&&(0===f.length?f+="]C1":f+=String.fromCharCode(29));break;case t.CODE_CODE_A:o=t.CODE_CODE_A;break;case t.CODE_CODE_B:o=t.CODE_CODE_B;break;case t.CODE_STOP:u=!0}}_&&(o=o===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var E=p-h;if(p=r.getNextUnset(p),!r.isRange(p,Math.min(r.getSize(),p+(p-h)/2),!1))throw new Fr;if((v-=w*m)%103!==m)throw new dr;var S=f.length;if(0===S)throw new Fr;S>0&&b&&(f=o===t.CODE_CODE_C?f.substring(0,S-2):f.substring(0,S-1));for(var A=(a[1]+a[0])/2,N=h+E/2,I=c.length,k=new Uint8Array(I),T=0;T<I;T++)k[T]=c[T];var O=[new _n(A,e),new _n(N,e)];return new tn(f,k,0,O,nn.CODE_128,(new Date).getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(Bn);var Un=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zn=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Vn=function(e){function t(t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=e.call(this)||this;return n.usingCheckDigit=t,n.extendedMode=r,n.decodeRowResult="",n.counters=new Int32Array(9),n}return Un(t,e),t.prototype.decodeRow=function(e,r,n){var o,i,a,s,l=this.counters;l.fill(0),this.decodeRowResult="";var c,u,d=t.findAsteriskPattern(r,l),f=r.getNextSet(d[1]),h=r.getSize();do{t.recordPattern(r,f,l);var p=t.toNarrowWidePattern(l);if(p<0)throw new Fr;c=t.patternToChar(p),this.decodeRowResult+=c,u=f;try{for(var g=(o=void 0,zn(l)),m=g.next();!m.done;m=g.next()){f+=m.value}}catch(A){o={error:A}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}f=r.getNextSet(f)}while("*"!==c);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var y,v=0;try{for(var w=zn(l),b=w.next();!b.done;b=w.next()){v+=b.value}}catch(N){a={error:N}}finally{try{b&&!b.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}if(f!==h&&2*(f-u-v)<v)throw new Fr;if(this.usingCheckDigit){for(var x=this.decodeRowResult.length-1,C=0,_=0;_<x;_++)C+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(_));if(this.decodeRowResult.charAt(x)!==t.ALPHABET_STRING.charAt(C%43))throw new dr;this.decodeRowResult=this.decodeRowResult.substring(0,x)}if(0===this.decodeRowResult.length)throw new Fr;y=this.extendedMode?t.decodeExtended(this.decodeRowResult):this.decodeRowResult;var E=(d[1]+d[0])/2,S=u+v/2;return new tn(y,null,0,[new _n(E,e),new _n(S,e)],nn.CODE_39,(new Date).getTime())},t.findAsteriskPattern=function(e,r){for(var n=e.getSize(),o=e.getNextSet(0),i=0,a=o,s=!1,l=r.length,c=o;c<n;c++)if(e.get(c)!==s)r[i]++;else{if(i===l-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,a-Math.floor((c-a)/2)),a,!1))return[a,c];a+=r[0]+r[1],r.copyWithin(0,2,2+i-1),r[i-1]=0,r[i]=0,i--}else i++;r[i]=1,s=!s}throw new Fr},t.toNarrowWidePattern=function(e){var t,r,n,o=e.length,i=0;do{var a=2147483647;try{for(var s=(t=void 0,zn(e)),l=s.next();!l.done;l=s.next()){(f=l.value)<a&&f>i&&(a=f)}}catch(h){t={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}i=a,n=0;for(var c=0,u=0,d=0;d<o;d++){(f=e[d])>i&&(u|=1<<o-1-d,n++,c+=f)}if(3===n){for(d=0;d<o&&n>0;d++){var f;if((f=e[d])>i&&(n--,2*f>=c))return-1}return u}}while(n>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new Fr},t.decodeExtended=function(e){for(var t=e.length,r="",n=0;n<t;n++){var o=e.charAt(n);if("+"===o||"$"===o||"%"===o||"/"===o){var i=e.charAt(n+1),a="\0";switch(o){case"+":if(!(i>="A"&&i<="Z"))throw new Nr;a=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new Nr;a=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\0";else if("V"===i)a="@";else if("W"===i)a="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new Nr;a="\x7f"}break;case"/":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new Nr;a=":"}}r+=a,n++}else r+=o}return r},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(Bn);const Hn=Vn;var Wn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gn=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xn=function(e){function t(){var t=e.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return Wn(t,e),t.prototype.decodeRow=function(e,r,n){var o,i,a,s,l,c,u=this.findAsteriskPattern(r),d=r.getNextSet(u[1]),f=r.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";do{t.recordPattern(r,d,h);var p=this.toPattern(h);if(p<0)throw new Fr;l=this.patternToChar(p),this.decodeRowResult+=l,c=d;try{for(var g=(o=void 0,Gn(h)),m=g.next();!m.done;m=g.next()){d+=m.value}}catch(_){o={error:_}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}d=r.getNextSet(d)}while("*"!==l);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var y=0;try{for(var v=Gn(h),w=v.next();!w.done;w=v.next()){y+=w.value}}catch(E){a={error:E}}finally{try{w&&!w.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}if(d===f||!r.get(d))throw new Fr;if(this.decodeRowResult.length<2)throw new Fr;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var b=this.decodeExtended(this.decodeRowResult),x=(u[1]+u[0])/2,C=c+y/2;return new tn(b,null,0,[new _n(x,e),new _n(C,e)],nn.CODE_93,(new Date).getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),n=e.getNextSet(0);this.counters.fill(0);for(var o=this.counters,i=n,a=!1,s=o.length,l=0,c=n;c<r;c++)if(e.get(c)!==a)o[l]++;else{if(l===s-1){if(this.toPattern(o)===t.ASTERISK_ENCODING)return new Int32Array([i,c]);i+=o[0]+o[1],o.copyWithin(0,2,2+l-1),o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,a=!a}throw new Fr},t.prototype.toPattern=function(e){var t,r,n=0;try{for(var o=Gn(e),i=o.next();!i.done;i=o.next()){n+=i.value}}catch(d){t={error:d}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}for(var a=0,s=e.length,l=0;l<s;l++){var c=Math.round(9*e[l]/n);if(c<1||c>4)return-1;if(0===(1&l))for(var u=0;u<c;u++)a=a<<1|1;else a<<=c}return a},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new Fr},t.prototype.decodeExtended=function(e){for(var t=e.length,r="",n=0;n<t;n++){var o=e.charAt(n);if(o>="a"&&o<="d"){if(n>=t-1)throw new Nr;var i=e.charAt(n+1),a="\0";switch(o){case"d":if(!(i>="A"&&i<="Z"))throw new Nr;a=String.fromCharCode(i.charCodeAt(0)+32);break;case"a":if(!(i>="A"&&i<="Z"))throw new Nr;a=String.fromCharCode(i.charCodeAt(0)-64);break;case"b":if(i>="A"&&i<="E")a=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")a=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")a=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)a="\0";else if("V"===i)a="@";else if("W"===i)a="`";else{if(!(i>="X"&&i<="Z"))throw new Nr;a=String.fromCharCode(127)}break;case"c":if(i>="A"&&i<="O")a=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new Nr;a=":"}}r+=a,n++}else r+=o}return r},t.prototype.checkChecksums=function(e){var t=e.length;this.checkOneChecksum(e,t-2,20),this.checkOneChecksum(e,t-1,15)},t.prototype.checkOneChecksum=function(e,r,n){for(var o=1,i=0,a=r-1;a>=0;a--)i+=o*t.ALPHABET_STRING.indexOf(e.charAt(a)),++o>n&&(o=1);if(e.charAt(r)!==t.ALPHABET_STRING[i%47])throw new dr},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t}(Bn);const Yn=Xn;var Kn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zn=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return Kn(t,e),t.prototype.decodeRow=function(e,r,n){var o,i,a=this.decodeStart(r),s=this.decodeEnd(r),l=new Dr;t.decodeMiddle(r,a[1],s[0],l);var c=l.toString(),u=null;null!=n&&(u=n.get(Sr.ALLOWED_LENGTHS)),null==u&&(u=t.DEFAULT_ALLOWED_LENGTHS);var d=c.length,f=!1,h=0;try{for(var p=Zn(u),g=p.next();!g.done;g=p.next()){var m=g.value;if(d===m){f=!0;break}m>h&&(h=m)}}catch(v){o={error:v}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}if(!f&&d>h&&(f=!0),!f)throw new Nr;var y=[new _n(a[1],e),new _n(s[0],e)];return new tn(c,null,0,y,nn.ITF,(new Date).getTime())},t.decodeMiddle=function(e,r,n,o){var i=new Int32Array(10),a=new Int32Array(5),s=new Int32Array(5);for(i.fill(0),a.fill(0),s.fill(0);r<n;){Bn.recordPattern(e,r,i);for(var l=0;l<5;l++){var c=2*l;a[l]=i[c],s[l]=i[c+1]}var u=t.decodeDigit(a);o.append(u.toString()),u=this.decodeDigit(s),o.append(u.toString()),i.forEach(function(e){r+=e})}},t.prototype.decodeStart=function(e){var r=t.skipWhiteSpace(e),n=t.findGuardPattern(e,r,t.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n},t.prototype.validateQuietZone=function(e,t){var r=10*this.narrowLineWidth;r=r<t?r:t;for(var n=t-1;r>0&&n>=0&&!e.get(n);n--)r--;if(0!==r)throw new Fr},t.skipWhiteSpace=function(e){var t=e.getSize(),r=e.getNextSet(0);if(r===t)throw new Fr;return r},t.prototype.decodeEnd=function(e){e.reverse();try{var r=t.skipWhiteSpace(e),n=void 0;try{n=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[0])}catch(i){i instanceof Fr&&(n=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);var o=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-o,n}finally{e.reverse()}},t.findGuardPattern=function(e,r,n){var o=n.length,i=new Int32Array(o),a=e.getSize(),s=!1,l=0,c=r;i.fill(0);for(var u=r;u<a;u++)if(e.get(u)!==s)i[l]++;else{if(l===o-1){if(Bn.patternMatchVariance(i,n,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[c,u];c+=i[0]+i[1],pr.arraycopy(i,2,i,0,l-1),i[l-1]=0,i[l]=0,l--}else l++;i[l]=1,s=!s}throw new Fr},t.decodeDigit=function(e){for(var r=t.MAX_AVG_VARIANCE,n=-1,o=t.PATTERNS.length,i=0;i<o;i++){var a=t.PATTERNS[i],s=Bn.patternMatchVariance(e,a,t.MAX_INDIVIDUAL_VARIANCE);s<r?(r=s,n=i):s===r&&(n=-1)}if(n>=0)return n%10;throw new Fr},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(Bn);const $n=qn;var Qn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Jn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return Qn(t,e),t.findStartGuardPattern=function(e){for(var r,n=!1,o=0,i=Int32Array.from([0,0,0]);!n;){i=Int32Array.from([0,0,0]);var a=(r=t.findGuardPattern(e,o,!1,this.START_END_PATTERN,i))[0],s=a-((o=r[1])-a);s>=0&&(n=e.isRange(s,a,!1))}return r},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(0===r)return!1;var n=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===n},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,r=0,n=t-1;n>=0;n-=2){if((o=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new Nr;r+=o}r*=3;for(n=t-2;n>=0;n-=2){var o;if((o=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new Nr;r+=o}return(1e3-r)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,t,r,n){return this.findGuardPattern(e,t,r,n,new Int32Array(n.length))},t.findGuardPattern=function(e,r,n,o,i){for(var a=e.getSize(),s=0,l=r=n?e.getNextUnset(r):e.getNextSet(r),c=o.length,u=n,d=r;d<a;d++)if(e.get(d)!==u)i[s]++;else{if(s===c-1){if(Bn.patternMatchVariance(i,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([l,d]);l+=i[0]+i[1];for(var f=i.slice(2,i.length),h=0;h<s-1;h++)i[h]=f[h];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,u=!u}throw new Fr},t.decodeDigit=function(e,r,n,o){this.recordPattern(e,n,r);for(var i=this.MAX_AVG_VARIANCE,a=-1,s=o.length,l=0;l<s;l++){var c=o[l],u=Bn.patternMatchVariance(r,c,t.MAX_INDIVIDUAL_VARIANCE);u<i&&(i=u,a=l)}if(a>=0)return a;throw new Fr},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(Bn);var eo=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},to=function(){function e(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,r,n){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,o),a=o.toString(),s=e.parseExtensionString(a),l=[new _n((n[0]+n[1])/2,t),new _n(i,t)],c=new tn(a,null,0,l,nn.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c},e.prototype.decodeMiddle=function(t,r,n){var o,i,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=t.getSize(),l=r[1],c=0,u=0;u<5&&l<s;u++){var d=Jn.decodeDigit(t,a,l,Jn.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var f=(o=void 0,eo(a)),h=f.next();!h.done;h=f.next()){l+=h.value}}catch(g){o={error:g}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}d>=10&&(c|=1<<4-u),4!==u&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(5!==n.length)throw new Fr;var p=this.determineCheckDigit(c);if(e.extensionChecksum(n.toString())!==p)throw new Fr;return l},e.extensionChecksum=function(e){for(var t=e.length,r=0,n=t-2;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(n=t-1;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);return(r*=3)%10},e.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new Fr},e.parseExtensionString=function(t){if(5!==t.length)return null;var r=e.parseExtension5String(t);return null==r?null:new Map([[an.SUGGESTED_PRICE,r]])},e.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}var r=parseInt(e.substring(1)),n=r%100;return t+(r/100).toString()+"."+(n<10?"0"+n:n.toString())},e}();const ro=to;var no=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},oo=function(){function e(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,r,n){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,o),a=o.toString(),s=e.parseExtensionString(a),l=[new _n((n[0]+n[1])/2,t),new _n(i,t)],c=new tn(a,null,0,l,nn.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c},e.prototype.decodeMiddle=function(e,t,r){var n,o,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=e.getSize(),s=t[1],l=0,c=0;c<2&&s<a;c++){var u=Jn.decodeDigit(e,i,s,Jn.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+u%10);try{for(var d=(n=void 0,no(i)),f=d.next();!f.done;f=d.next()){s+=f.value}}catch(h){n={error:h}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}u>=10&&(l|=1<<1-c),1!==c&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==r.length)throw new Fr;if(parseInt(r.toString())%4!==l)throw new Fr;return s},e.parseExtensionString=function(e){return 2!==e.length?null:new Map([[an.ISSUE_NUMBER,parseInt(e)]])},e}();const io=oo;const ao=function(){function e(){}return e.decodeRow=function(e,t,r){var n=Jn.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new ro).decodeRow(e,t,n)}catch(o){return(new io).decodeRow(e,t,n)}},e.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),e}();var so=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lo=function(e){function t(){var r=e.call(this)||this;r.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(e){return Int32Array.from(e)});for(var n=10;n<20;n++){for(var o=t.L_PATTERNS[n-10],i=new Int32Array(o.length),a=0;a<o.length;a++)i[a]=o[o.length-a-1];t.L_AND_G_PATTERNS[n]=i}return r}return so(t,e),t.prototype.decodeRow=function(e,r,n){var o=t.findStartGuardPattern(r),i=null==n?null:n.get(Sr.NEED_RESULT_POINT_CALLBACK);if(null!=i){var a=new _n((o[0]+o[1])/2,e);i.foundPossibleResultPoint(a)}var s=this.decodeMiddle(r,o,this.decodeRowStringBuffer),l=s.rowOffset,c=s.resultString;if(null!=i){var u=new _n(l,e);i.foundPossibleResultPoint(u)}var d=t.decodeEnd(r,l);if(null!=i){var f=new _n((d[0]+d[1])/2,e);i.foundPossibleResultPoint(f)}var h=d[1],p=h+(h-d[0]);if(p>=r.getSize()||!r.isRange(h,p,!1))throw new Fr;var g=c.toString();if(g.length<8)throw new Nr;if(!t.checkChecksum(g))throw new dr;var m=(o[1]+o[0])/2,y=(d[1]+d[0])/2,v=this.getBarcodeFormat(),w=[new _n(m,e),new _n(y,e)],b=new tn(g,null,0,w,v,(new Date).getTime()),x=0;try{var C=ao.decodeRow(e,r,d[1]);b.putMetadata(an.UPC_EAN_EXTENSION,C.getText()),b.putAllMetadata(C.getResultMetadata()),b.addResultPoints(C.getResultPoints()),x=C.getText().length}catch(A){}var _=null==n?null:n.get(Sr.ALLOWED_EAN_EXTENSIONS);if(null!=_){var E=!1;for(var S in _)if(x.toString()===S){E=!0;break}if(!E)throw new Fr}return v===nn.EAN_13||nn.UPC_A,b},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(0===r)return!1;var n=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===n},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,r=0,n=t-1;n>=0;n-=2){if((o=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new Nr;r+=o}r*=3;for(n=t-2;n>=0;n-=2){var o;if((o=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0))<0||o>9)throw new Nr;r+=o}return(1e3-r)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(Jn);const co=lo;var uo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fo=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ho=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return uo(t,e),t.prototype.decodeMiddle=function(e,r,n){var o,i,a,s,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=e.getSize(),u=r[1],d=0,f=0;f<6&&u<c;f++){var h=co.decodeDigit(e,l,u,co.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+h%10);try{for(var p=(o=void 0,fo(l)),g=p.next();!g.done;g=p.next()){u+=g.value}}catch(v){o={error:v}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}h>=10&&(d|=1<<5-f)}n=t.determineFirstDigit(n,d),u=co.findGuardPattern(e,u,!0,co.MIDDLE_PATTERN,new Int32Array(co.MIDDLE_PATTERN.length).fill(0))[1];for(f=0;f<6&&u<c;f++){h=co.decodeDigit(e,l,u,co.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+h);try{for(var m=(a=void 0,fo(l)),y=m.next();!y.done;y=m.next()){u+=y.value}}catch(w){a={error:w}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}}return{rowOffset:u,resultString:n}},t.prototype.getBarcodeFormat=function(){return nn.EAN_13},t.determineFirstDigit=function(e,t){for(var r=0;r<10;r++)if(t===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode("0".charCodeAt(0)+r)+e;throw new Fr},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(co);const po=ho;var go=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mo=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yo=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return go(t,e),t.prototype.decodeMiddle=function(e,t,r){var n,o,i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=e.getSize(),c=t[1],u=0;u<4&&c<l;u++){var d=co.decodeDigit(e,s,c,co.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d);try{for(var f=(n=void 0,mo(s)),h=f.next();!h.done;h=f.next()){c+=h.value}}catch(m){n={error:m}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}c=co.findGuardPattern(e,c,!0,co.MIDDLE_PATTERN,new Int32Array(co.MIDDLE_PATTERN.length).fill(0))[1];for(u=0;u<4&&c<l;u++){d=co.decodeDigit(e,s,c,co.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d);try{for(var p=(i=void 0,mo(s)),g=p.next();!g.done;g=p.next()){c+=g.value}}catch(y){i={error:y}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}return{rowOffset:c,resultString:r}},t.prototype.getBarcodeFormat=function(){return nn.EAN_8},t}(co);const vo=yo;var wo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const bo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ean13Reader=new po,t}return wo(t,e),t.prototype.getBarcodeFormat=function(){return nn.UPC_A},t.prototype.decode=function(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,t,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,r))},t.prototype.decodeMiddle=function(e,t,r){return this.ean13Reader.decodeMiddle(e,t,r)},t.prototype.maybeReturnResult=function(e){var t=e.getText();if("0"===t.charAt(0)){var r=new tn(t.substring(1),null,null,e.getResultPoints(),nn.UPC_A);return null!=e.getResultMetadata()&&r.putAllMetadata(e.getResultMetadata()),r}throw new Fr},t.prototype.reset=function(){this.ean13Reader.reset()},t}(co);var xo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Co=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_o=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return xo(t,e),t.prototype.decodeMiddle=function(e,r,n){var o,i,a=this.decodeMiddleCounters.map(function(e){return e});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=r[1],c=0,u=0;u<6&&l<s;u++){var d=t.decodeDigit(e,a,l,t.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var f=(o=void 0,Co(a)),h=f.next();!h.done;h=f.next()){l+=h.value}}catch(p){o={error:p}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}d>=10&&(c|=1<<5-u)}return t.determineNumSysAndCheckDigit(new Dr(n),c),l},t.prototype.decodeEnd=function(e,r){return t.findGuardPatternWithoutCounters(e,r,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return co.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,t){for(var r=0;r<=1;r++)for(var n=0;n<10;n++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n])return e.insert(0,"0"+r),void e.append("0"+n);throw Fr.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return nn.UPC_E},t.convertUPCEtoUPCA=function(e){var t=e.slice(1,7).split("").map(function(e){return e.charCodeAt(0)}),r=new Dr;r.append(e.charAt(0));var n=t[5];switch(n){case 0:case 1:case 2:r.appendChars(t,0,2),r.append(n),r.append("0000"),r.appendChars(t,2,3);break;case 3:r.appendChars(t,0,3),r.append("00000"),r.appendChars(t,3,2);break;case 4:r.appendChars(t,0,4),r.append("00000"),r.append(t[4]);break;default:r.appendChars(t,0,5),r.append("0000"),r.append(n)}return e.length>=8&&r.append(e.charAt(7)),r.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(co);const Eo=_o;var So=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ao=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},No=function(e){function t(t){var r=e.call(this)||this,n=null==t?null:t.get(Sr.POSSIBLE_FORMATS),o=[];return null!=n&&(n.indexOf(nn.EAN_13)>-1&&o.push(new po),n.indexOf(nn.UPC_A)>-1&&o.push(new bo),n.indexOf(nn.EAN_8)>-1&&o.push(new vo),n.indexOf(nn.UPC_E)>-1&&o.push(new Eo)),0===o.length&&(o.push(new po),o.push(new bo),o.push(new vo),o.push(new Eo)),r.readers=o,r}return So(t,e),t.prototype.decodeRow=function(e,t,r){var n,o;try{for(var i=Ao(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{var l=s.decodeRow(e,t,r),c=l.getBarcodeFormat()===nn.EAN_13&&"0"===l.getText().charAt(0),u=null==r?null:r.get(Sr.POSSIBLE_FORMATS),d=null==u||u.includes(nn.UPC_A);if(c&&d){var f=l.getRawBytes(),h=new tn(l.getText().substring(1),f,f?f.length:null,l.getResultPoints(),nn.UPC_A);return h.putAllMetadata(l.getResultMetadata()),h}return l}catch(p){}}}catch(g){n={error:g}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}throw new Fr},t.prototype.reset=function(){var e,t;try{for(var r=Ao(this.readers),n=r.next();!n.done;n=r.next()){n.value.reset()}}catch(o){e={error:o}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t}(Bn);const Io=No;var ko=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),To=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return ko(t,e),t.prototype.decodeRow=function(e,t,r){var n=this.getValidRowData(t);if(!n)throw new Fr;var o=this.codaBarDecodeRow(n.row);if(!o)throw new Fr;return new tn(o,null,0,[new _n(n.left,e),new _n(n.right,e)],nn.CODABAR,(new Date).getTime())},t.prototype.getValidRowData=function(e){var t=e.toArray(),r=t.indexOf(!0);if(-1===r)return null;var n=t.lastIndexOf(!0);if(n<=r)return null;for(var o=[],i=(t=t.slice(r,n+1))[0],a=1,s=1;s<t.length;s++)t[s]===i?a++:(i=t[s],o.push(a),a=1);return o.push(a),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:r,right:n}},t.prototype.codaBarDecodeRow=function(e){for(var t=[],r=Math.ceil(e.reduce(function(e,t){return(e+t)/2},0));e.length>0;){var n=e.splice(0,8).splice(0,7).map(function(e){return e<r?"n":"w"}).join("");if(void 0===this.CODA_BAR_CHAR_SET[n])return null;t.push(this.CODA_BAR_CHAR_SET[n])}var o=t.join("");return this.validCodaBarString(o)?o:null},t.prototype.validCodaBarString=function(e){return/^[A-D].{1,}[A-D]$/.test(e)},t}(Bn);const Oo=To;var Ro=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mo=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Po=function(e){function t(){var t=e.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return Ro(t,e),t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,r){for(var n=0;n<r.length;n++)if(Bn.patternMatchVariance(e,r[n],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return n;throw new Fr},t.count=function(e){return xn.sum(new Int32Array(e))},t.increment=function(e,t){for(var r=0,n=t[0],o=1;o<e.length;o++)t[o]>n&&(n=t[o],r=o);e[r]++},t.decrement=function(e,t){for(var r=0,n=t[0],o=1;o<e.length;o++)t[o]<n&&(n=t[o],r=o);e[r]--},t.isFinderPattern=function(e){var r,n,o=e[0]+e[1],i=o/(o+e[2]+e[3]);if(i>=t.MIN_FINDER_PATTERN_RATIO&&i<=t.MAX_FINDER_PATTERN_RATIO){var a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;try{for(var l=Mo(e),c=l.next();!c.done;c=l.next()){var u=c.value;u>s&&(s=u),u<a&&(a=u)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return s<10*a}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(Bn);const jo=Po;const Do=function(){function e(e,t){this.value=e,this.checksumPortion=t}return e.prototype.getValue=function(){return this.value},e.prototype.getChecksumPortion=function(){return this.checksumPortion},e.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion},e.prototype.hashCode=function(){return this.value^this.checksumPortion},e}();const Bo=function(){function e(e,t,r,n,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new _n(r,o)),this.resultPoints.push(new _n(n,o))}return e.prototype.getValue=function(){return this.value},e.prototype.getStartEnd=function(){return this.startEnd},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.value===r.value},e.prototype.hashCode=function(){return this.value},e}();var Lo=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fo=function(){function e(){}return e.getRSSvalue=function(t,r,n){var o,i,a=0;try{for(var s=Lo(t),l=s.next();!l.done;l=s.next()){a+=l.value}}catch(y){o={error:y}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}for(var c=0,u=0,d=t.length,f=0;f<d-1;f++){var h=void 0;for(h=1,u|=1<<f;h<t[f];h++,u&=~(1<<f)){var p=e.combins(a-h-1,d-f-2);if(n&&0===u&&a-h-(d-f-1)>=d-f-1&&(p-=e.combins(a-h-(d-f),d-f-2)),d-f-1>1){for(var g=0,m=a-h-(d-f-2);m>r;m--)g+=e.combins(a-h-m-1,d-f-3);p-=g*(d-1-f)}else a-h>r&&p--;c+=p}a-=h}return c},e.combins=function(e,t){var r,n;e-t>t?(n=t,r=e-t):(n=e-t,r=t);for(var o=1,i=1,a=e;a>r;a--)o*=a,i<=n&&(o/=i,i++);for(;i<=n;)o/=i,i++;return o},e}();const Uo=Fo;const zo=function(){function e(){}return e.buildBitArray=function(e){var t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);for(var r=new _r(12*t),n=0,o=e[0].getRightChar().getValue(),i=11;i>=0;--i)0!==(o&1<<i)&&r.set(n),n++;for(i=1;i<e.length;++i){for(var a=e[i],s=a.getLeftChar().getValue(),l=11;l>=0;--l)0!==(s&1<<l)&&r.set(n),n++;if(null!==a.getRightChar()){var c=a.getRightChar().getValue();for(l=11;l>=0;--l)0!==(c&1<<l)&&r.set(n),n++}}return r},e}();const Vo=function(){function e(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return e.prototype.getDecodedInformation=function(){return this.decodedInformation},e.prototype.isFinished=function(){return this.finished},e}();const Ho=function(){function e(e){this.newPosition=e}return e.prototype.getNewPosition=function(){return this.newPosition},e}();var Wo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Go=function(e){function t(t,r){var n=e.call(this,t)||this;return n.value=r,n}return Wo(t,e),t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(Ho);var Xo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Yo=function(e){function t(t,r,n){var o=e.call(this,t)||this;return n?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return Xo(t,e),t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(Ho);var Ko=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Zo=function(e){function t(t,r,n){var o=e.call(this,t)||this;if(r<0||r>10||n<0||n>10)throw new Nr;return o.firstDigit=r,o.secondDigit=n,o}return Ko(t,e),t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(Ho);var qo=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$o=function(){function e(){}return e.parseFieldsInGeneralPurpose=function(t){var r,n,o,i,a,s,l,c;if(!t)return null;if(t.length<2)throw new Fr;var u=t.substring(0,2);try{for(var d=qo(e.TWO_DIGIT_DATA_LENGTH),f=d.next();!f.done;f=d.next()){if((x=f.value)[0]===u)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(2,x[2],t):e.processFixedAI(2,x[1],t)}}catch(C){r={error:C}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}if(t.length<3)throw new Fr;var h=t.substring(0,3);try{for(var p=qo(e.THREE_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){if((x=g.value)[0]===h)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(3,x[2],t):e.processFixedAI(3,x[1],t)}}catch(_){o={error:_}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}try{for(var m=qo(e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=m.next();!y.done;y=m.next()){if((x=y.value)[0]===h)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,x[2],t):e.processFixedAI(4,x[1],t)}}catch(E){a={error:E}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(t.length<4)throw new Fr;var v=t.substring(0,4);try{for(var w=qo(e.FOUR_DIGIT_DATA_LENGTH),b=w.next();!b.done;b=w.next()){var x;if((x=b.value)[0]===v)return x[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,x[2],t):e.processFixedAI(4,x[1],t)}}catch(S){l={error:S}}finally{try{b&&!b.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}throw new Fr},e.processFixedAI=function(t,r,n){if(n.length<t)throw new Fr;var o=n.substring(0,t);if(n.length<t+r)throw new Fr;var i=n.substring(t,t+r),a=n.substring(t+r),s="("+o+")"+i,l=e.parseFieldsInGeneralPurpose(a);return null==l?s:s+l},e.processVariableAI=function(t,r,n){var o,i=n.substring(0,t);o=n.length<t+r?n.length:t+r;var a=n.substring(t,o),s=n.substring(o),l="("+i+")"+a,c=e.parseFieldsInGeneralPurpose(s);return null==c?l:l+c},e.VARIABLE_LENGTH=[],e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",e.VARIABLE_LENGTH,20],["22",e.VARIABLE_LENGTH,29],["30",e.VARIABLE_LENGTH,8],["37",e.VARIABLE_LENGTH,8],["90",e.VARIABLE_LENGTH,30],["91",e.VARIABLE_LENGTH,30],["92",e.VARIABLE_LENGTH,30],["93",e.VARIABLE_LENGTH,30],["94",e.VARIABLE_LENGTH,30],["95",e.VARIABLE_LENGTH,30],["96",e.VARIABLE_LENGTH,30],["97",e.VARIABLE_LENGTH,3],["98",e.VARIABLE_LENGTH,30],["99",e.VARIABLE_LENGTH,30]],e.THREE_DIGIT_DATA_LENGTH=[["240",e.VARIABLE_LENGTH,30],["241",e.VARIABLE_LENGTH,30],["242",e.VARIABLE_LENGTH,6],["250",e.VARIABLE_LENGTH,30],["251",e.VARIABLE_LENGTH,30],["253",e.VARIABLE_LENGTH,17],["254",e.VARIABLE_LENGTH,20],["400",e.VARIABLE_LENGTH,30],["401",e.VARIABLE_LENGTH,30],["402",17],["403",e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",e.VARIABLE_LENGTH,20],["421",e.VARIABLE_LENGTH,15],["422",3],["423",e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",e.VARIABLE_LENGTH,15],["391",e.VARIABLE_LENGTH,18],["392",e.VARIABLE_LENGTH,15],["393",e.VARIABLE_LENGTH,18],["703",e.VARIABLE_LENGTH,30]],e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",e.VARIABLE_LENGTH,20],["8003",e.VARIABLE_LENGTH,30],["8004",e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",e.VARIABLE_LENGTH,30],["8008",e.VARIABLE_LENGTH,12],["8018",18],["8020",e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",e.VARIABLE_LENGTH,70],["8200",e.VARIABLE_LENGTH,70]],e}();const Qo=$o;const Jo=function(){function e(e){this.buffer=new Dr,this.information=e}return e.prototype.decodeAllCodes=function(e,t){for(var r=t,n=null;;){var o=this.decodeGeneralPurposeField(r,n),i=Qo.parseFieldsInGeneralPurpose(o.getNewString());if(null!=i&&e.append(i),n=o.isRemaining()?""+o.getRemainingValue():null,r===o.getNewPosition())break;r=o.getNewPosition()}return e.toString()},e.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},e.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return new Zo(this.information.getSize(),0===t?Zo.FNC1:t-1,Zo.FNC1)}var r=this.extractNumericValueFromBitArray(e,7);return new Zo(e+7,(r-8)/11,(r-8)%11)},e.prototype.extractNumericValueFromBitArray=function(t,r){return e.extractNumericValueFromBitArray(this.information,t,r)},e.extractNumericValueFromBitArray=function(e,t,r){for(var n=0,o=0;o<r;++o)e.get(t+o)&&(n|=1<<r-o-1);return n},e.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return null!=r&&r.isRemaining()?new Yo(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Yo(this.current.getPosition(),this.buffer.toString())},e.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),!(r!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()},e.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return t=e.isSecondDigitFNC1()?new Yo(this.current.getPosition(),this.buffer.toString()):new Yo(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Vo(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){t=new Yo(this.current.getPosition(),this.buffer.toString());return new Vo(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Vo(!1)},e.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Yo(this.current.getPosition(),this.buffer.toString());return new Vo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Vo(!1)},e.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Yo(this.current.getPosition(),this.buffer.toString());return new Vo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Vo(!1)},e.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,8);return n>=232&&n<253},e.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Go(e+5,Go.FNC1);if(t>=5&&t<15)return new Go(e+5,"0"+(t-5));var r,n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Go(e+7,""+(n+1));if(n>=90&&n<116)return new Go(e+7,""+(n+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new Nr}return new Go(e+8,r)},e.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},e.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Go(e+5,Go.FNC1);if(t>=5&&t<15)return new Go(e+5,"0"+(t-5));var r,n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Go(e+6,""+(n+33));switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new yn("Decoding invalid alphanumeric value: "+n)}return new Go(e+6,r)},e.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},e.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},e.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},e}();const ei=function(){function e(e){this.information=e,this.generalDecoder=new Jo(e)}return e.prototype.getInformation=function(){return this.information},e.prototype.getGeneralDecoder=function(){return this.generalDecoder},e}();var ti=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const ri=function(e){function t(t){return e.call(this,t)||this}return ti(t,e),t.prototype.encodeCompressedGtin=function(e,t){e.append("(01)");var r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,r)},t.prototype.encodeCompressedGtinWithoutAI=function(e,r,n){for(var o=0;o<4;++o){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i)}t.appendCheckDigit(e,n)},t.appendCheckDigit=function(e,t){for(var r=0,n=0;n<13;n++){var o=e.charAt(n+t).charCodeAt(0)-"0".charCodeAt(0);r+=0===(1&n)?3*o:o}10===(r=10-r%10)&&(r=0),e.append(r)},t.GTIN_SIZE=40,t}(ei);var ni=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const oi=function(e){function t(t){return e.call(this,t)||this}return ni(t,e),t.prototype.parseInformation=function(){var e=new Dr;e.append("(01)");var r=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(ri);var ii=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const ai=function(e){function t(t){return e.call(this,t)||this}return ii(t,e),t.prototype.parseInformation=function(){var e=new Dr;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(ei);var si=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const li=function(e){function t(t){return e.call(this,t)||this}return si(t,e),t.prototype.encodeCompressedWeight=function(e,t,r){var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,r);this.addWeightCode(e,n);for(var o=this.checkWeight(n),i=1e5,a=0;a<5;++a)o/i===0&&e.append("0"),i/=10;e.append(o)},t}(ri);var ci=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const ui=function(e){function t(t){return e.call(this,t)||this}return ci(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+li.GTIN_SIZE+t.WEIGHT_SIZE)throw new Fr;var e=new Dr;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+li.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(li);var di=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const fi=function(e){function t(t){return e.call(this,t)||this}return di(t,e),t.prototype.addWeightCode=function(e,t){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(ui);var hi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const pi=function(e){function t(t){return e.call(this,t)||this}return hi(t,e),t.prototype.addWeightCode=function(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(ui);var gi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const mi=function(e){function t(t){return e.call(this,t)||this}return gi(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+ri.GTIN_SIZE)throw new Fr;var e=new Dr;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+ri.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");var n=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+ri.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(ri);var yi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const vi=function(e){function t(t){return e.call(this,t)||this}return yi(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+ri.GTIN_SIZE)throw new Fr;var e=new Dr;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+ri.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+ri.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n);var o=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+ri.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(o.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(ri);var wi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const bi=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.dateCode=n,o.firstAIdigits=r,o}return wi(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new Fr;var e=new Dr;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,r){var n=this.getGeneralDecoder().extractNumericValueFromBitArray(r,t.DATE_SIZE);if(38400!==n){e.append("("),e.append(this.dateCode),e.append(")");var o=n%32,i=(n/=32)%12+1,a=n/=12;a/10===0&&e.append("0"),e.append(a),i/10===0&&e.append("0"),e.append(i),o/10===0&&e.append("0"),e.append(o)}},t.prototype.addWeightCode=function(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(li);const xi=function(){function e(e,t,r,n){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=n}return e.prototype.mayBeLast=function(){return this.maybeLast},e.prototype.getLeftChar=function(){return this.leftchar},e.prototype.getRightChar=function(){return this.rightchar},e.prototype.getFinderPattern=function(){return this.finderpattern},e.prototype.mustBeLast=function(){return null==this.rightchar},e.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},e.equals=function(t,r){return t instanceof e&&(e.equalsOrNull(t.leftchar,r.leftchar)&&e.equalsOrNull(t.rightchar,r.rightchar)&&e.equalsOrNull(t.finderpattern,r.finderpattern))},e.equalsOrNull=function(t,r){return null===t?null===r:e.equals(t,r)},e.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},e}();const Ci=function(){function e(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return e.prototype.getPairs=function(){return this.pairs},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.isReversed=function(){return this.wasReversed},e.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},e.prototype.toString=function(){return"{ "+this.pairs+" }"},e.prototype.equals=function(t,r){return t instanceof e&&(this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed)},e.prototype.checkEqualitity=function(e,t){var r;if(e&&t)return e.forEach(function(e,n){t.forEach(function(t){e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(r=!0)})}),r},e}();var _i=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ei=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Si=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.pairs=new Array(t.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return _i(t,e),t.prototype.decodeRow=function(e,r,n){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,r))}catch(Au){}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,r))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,t){for(var r,n=!1;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof Fr){if(!this.pairs.length)throw new Fr;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(e,!1),r){var o=this.checkRowsBoolean(!1);if(null!=o)return o;if(null!=(o=this.checkRowsBoolean(!0)))return o}throw new Fr},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var t=null;try{t=this.checkRows(new Array,0)}catch(Au){console.log(Au)}return e&&(this.rows=this.rows.reverse()),t},t.prototype.checkRows=function(e,r){for(var n,o,i=r;i<this.rows.length;i++){var a=this.rows[i];this.pairs.length=0;try{for(var s=(n=void 0,Ei(e)),l=s.next();!l.done;l=s.next()){var c=l.value;this.pairs.push(c.getPairs())}}catch(d){n={error:d}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}if(this.pairs.push(a.getPairs()),t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var u=new Array(e);u.push(a);try{return this.checkRows(u,i+1)}catch(Au){console.log(Au)}}}throw new Fr},t.isValidSequence=function(e){var r,n;try{for(var o=Ei(t.FINDER_PATTERN_SEQUENCES),i=o.next();!i.done;i=o.next()){var a=i.value;if(!(e.length>a.length)){for(var s=!0,l=0;l<e.length;l++)if(e[l].getFinderPattern().getValue()!==a[l]){s=!1;break}if(s)return!0}}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1},t.prototype.storeRow=function(e,r){for(var n=0,o=!1,i=!1;n<this.rows.length;){var a=this.rows[n];if(a.getRowNumber()>e){i=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),n++}i||o||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new Ci(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,t){var r,n,o,i,a,s;try{for(var l=Ei(t),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getPairs().length!==e.length){try{for(var d=(o=void 0,Ei(u.getPairs())),f=d.next();!f.done;f=d.next()){var h=f.value,p=!1;try{for(var g=(a=void 0,Ei(e)),m=g.next();!m.done;m=g.next()){var y=m.value;if(xi.equals(h,y)){p=!0;break}}}catch(v){a={error:v}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}p||!1}}catch(w){o={error:w}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}}}}catch(b){r={error:b}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}},t.isPartialRow=function(e,t){var r,n,o,i,a,s;try{for(var l=Ei(t),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0;try{for(var f=(o=void 0,Ei(e)),h=f.next();!h.done;h=f.next()){var p=h.value,g=!1;try{for(var m=(a=void 0,Ei(u.getPairs())),y=m.next();!y.done;y=m.next()){var v=y.value;if(p.equals(v)){g=!0;break}}}catch(w){a={error:w}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!g){d=!1;break}}}catch(b){o={error:b}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}if(d)return!0}}catch(x){r={error:x}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var t=function(e){try{if(e.get(1))return new oi(e);if(!e.get(2))return new ai(e);switch(Jo.extractNumericValueFromBitArray(e,1,4)){case 4:return new fi(e);case 5:return new pi(e)}switch(Jo.extractNumericValueFromBitArray(e,1,5)){case 12:return new mi(e);case 13:return new vi(e)}switch(Jo.extractNumericValueFromBitArray(e,1,7)){case 56:return new bi(e,"310","11");case 57:return new bi(e,"320","11");case 58:return new bi(e,"310","13");case 59:return new bi(e,"320","13");case 60:return new bi(e,"310","15");case 61:return new bi(e,"320","15");case 62:return new bi(e,"310","17");case 63:return new bi(e,"320","17")}}catch(Au){throw console.log(Au),new yn("unknown decoder: "+e)}}(zo.buildBitArray(e)).parseInformation(),r=e[0].getFinderPattern().getResultPoints(),n=e[e.length-1].getFinderPattern().getResultPoints(),o=[r[0],r[1],n[0],n[1]];return new tn(t,null,null,o,nn.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),t=e.getLeftChar(),r=e.getRightChar();if(null===r)return!1;for(var n=r.getChecksumPortion(),o=2,i=1;i<this.pairs.size();++i){var a=this.pairs.get(i);n+=a.getLeftChar().getChecksumPortion(),o++;var s=a.getRightChar();null!=s&&(n+=s.getChecksumPortion(),o++)}return 211*(o-4)+(n%=211)===t.getValue()},t.getNextSecondBar=function(e,t){var r;return e.get(t)?(r=e.getNextUnset(t),r=e.getNextSet(r)):(r=e.getNextSet(t),r=e.getNextUnset(r)),r},t.prototype.retrieveNextPair=function(e,r,n){var o,i=r.length%2===0;this.startFromEven&&(i=!i);var a=!0,s=-1;do{this.findNextPair(e,r,s),null===(o=this.parseFoundFinderPattern(e,n,i))?s=t.getNextSecondBar(e,this.startEnd[0]):a=!1}while(a);var l,c=this.decodeDataCharacter(e,o,i,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new Fr;try{l=this.decodeDataCharacter(e,o,i,!1)}catch(Au){l=null,console.log(Au)}return new xi(c,l,o,!0)},t.prototype.isEmptyPair=function(e){return 0===e.length},t.prototype.findNextPair=function(e,r,n){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var i,a=e.getSize();if(n>=0)i=n;else if(this.isEmptyPair(r))i=0;else{i=r[r.length-1].getFinderPattern().getStartEnd()[1]}var s=r.length%2!==0;this.startFromEven&&(s=!s);for(var l=!1;i<a&&(l=!e.get(i));)i++;for(var c=0,u=i,d=i;d<a;d++)if(e.get(d)!==l)o[c]++;else{if(3===c){if(s&&t.reverseCounters(o),t.isFinderPattern(o))return this.startEnd[0]=u,void(this.startEnd[1]=d);s&&t.reverseCounters(o),u+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,c--}else c++;o[c]=1,l=!l}throw new Fr},t.reverseCounters=function(e){for(var t=e.length,r=0;r<t/2;++r){var n=e[r];e[r]=e[t-r-1],e[t-r-1]=n}},t.prototype.parseFoundFinderPattern=function(e,r,n){var o,i,a;if(n){for(var s=this.startEnd[0]-1;s>=0&&!e.get(s);)s--;s++,o=this.startEnd[0]-s,i=s,a=this.startEnd[1]}else i=this.startEnd[0],o=(a=e.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var l,c=this.getDecodeFinderCounters();pr.arraycopy(c,0,c,1,c.length-1),c[0]=o;try{l=this.parseFinderValue(c,t.FINDER_PATTERNS)}catch(Au){return null}return new Bo(l,[i,a],i,a,r)},t.prototype.decodeDataCharacter=function(e,r,n,o){for(var i=this.getDataCharacterCounters(),a=0;a<i.length;a++)i[a]=0;if(o)t.recordPatternInReverse(e,r.getStartEnd()[0],i);else{t.recordPattern(e,r.getStartEnd()[1],i);for(var s=0,l=i.length-1;s<l;s++,l--){var c=i[s];i[s]=i[l],i[l]=c}}var u=xn.sum(new Int32Array(i))/17,d=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(u-d)/d>.3)throw new Fr;var f=this.getOddCounts(),h=this.getEvenCounts(),p=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors();for(s=0;s<i.length;s++){var m=1*i[s]/u,y=m+.5;if(y<1){if(m<.3)throw new Fr;y=1}else if(y>8){if(m>8.7)throw new Fr;y=8}var v=s/2;0===(1&s)?(f[v]=y,p[v]=m-y):(h[v]=y,g[v]=m-y)}this.adjustOddEvenCounts(17);var w=4*r.getValue()+(n?0:2)+(o?0:1)-1,b=0,x=0;for(s=f.length-1;s>=0;s--){if(t.isNotA1left(r,n,o)){var C=t.WEIGHTS[w][2*s];x+=f[s]*C}b+=f[s]}var _=0;for(s=h.length-1;s>=0;s--)if(t.isNotA1left(r,n,o)){C=t.WEIGHTS[w][2*s+1];_+=h[s]*C}var E=x+_;if(0!==(1&b)||b>13||b<4)throw new Fr;var S=(13-b)/2,A=t.SYMBOL_WIDEST[S],N=9-A,I=Uo.getRSSvalue(f,A,!0),k=Uo.getRSSvalue(h,N,!1),T=t.EVEN_TOTAL_SUBSET[S],O=t.GSUM[S];return new Do(I*T+k+O,E)},t.isNotA1left=function(e,t,r){return!(0===e.getValue()&&t&&r)},t.prototype.adjustOddEvenCounts=function(e){var r=xn.sum(new Int32Array(this.getOddCounts())),n=xn.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1;r>13?i=!0:r<4&&(o=!0);var a=!1,s=!1;n>13?s=!0:n<4&&(a=!0);var l=r+n-e,c=1===(1&r),u=0===(1&n);if(1===l)if(c){if(u)throw new Fr;i=!0}else{if(!u)throw new Fr;s=!0}else if(-1===l)if(c){if(u)throw new Fr;o=!0}else{if(!u)throw new Fr;a=!0}else{if(0!==l)throw new Fr;if(c){if(!u)throw new Fr;r<n?(o=!0,s=!0):(i=!0,a=!0)}else if(u)throw new Fr}if(o){if(i)throw new Fr;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new Fr;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(jo);const Ai=Si;var Ni=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Ii=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o.count=0,o.finderPattern=n,o}return Ni(t,e),t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(Do);var ki=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ti=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Oi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return ki(t,e),t.prototype.decodeRow=function(e,r,n){var o,i,a,s,l=this.decodePair(r,!1,e,n);t.addOrTally(this.possibleLeftPairs,l),r.reverse();var c=this.decodePair(r,!0,e,n);t.addOrTally(this.possibleRightPairs,c),r.reverse();try{for(var u=Ti(this.possibleLeftPairs),d=u.next();!d.done;d=u.next()){var f=d.value;if(f.getCount()>1)try{for(var h=(a=void 0,Ti(this.possibleRightPairs)),p=h.next();!p.done;p=h.next()){var g=p.value;if(g.getCount()>1&&t.checkChecksum(f,g))return t.constructResult(f,g)}}catch(m){a={error:m}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}}catch(y){o={error:y}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}throw new Fr},t.addOrTally=function(e,t){var r,n;if(null!=t){var o=!1;try{for(var i=Ti(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.getValue()===t.getValue()){s.incrementCount(),o=!0;break}}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}o||e.push(t)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,t){for(var r=4537077*e.getValue()+t.getValue(),n=new String(r).toString(),o=new Dr,i=13-n.length;i>0;i--)o.append("0");o.append(n);var a=0;for(i=0;i<13;i++){var s=o.charAt(i).charCodeAt(0)-"0".charCodeAt(0);a+=0===(1&i)?3*s:s}10===(a=10-a%10)&&(a=0),o.append(a.toString());var l=e.getFinderPattern().getResultPoints(),c=t.getFinderPattern().getResultPoints();return new tn(o.toString(),null,0,[l[0],l[1],c[0],c[1]],nn.RSS_14,(new Date).getTime())},t.checkChecksum=function(e,t){var r=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,n=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n},t.prototype.decodePair=function(e,t,r,n){try{var o=this.findFinderPattern(e,t),i=this.parseFoundFinderPattern(e,r,t,o),a=null==n?null:n.get(Sr.NEED_RESULT_POINT_CALLBACK);if(null!=a){var s=(o[0]+o[1])/2;t&&(s=e.getSize()-1-s),a.foundPossibleResultPoint(new _n(s,r))}var l=this.decodeDataCharacter(e,i,!0),c=this.decodeDataCharacter(e,i,!1);return new Ii(1597*l.getValue()+c.getValue(),l.getChecksumPortion()+4*c.getChecksumPortion(),i)}catch(u){return null}},t.prototype.decodeDataCharacter=function(e,r,n){for(var o=this.getDataCharacterCounters(),i=0;i<o.length;i++)o[i]=0;if(n)Bn.recordPatternInReverse(e,r.getStartEnd()[0],o);else{Bn.recordPattern(e,r.getStartEnd()[1]+1,o);for(var a=0,s=o.length-1;a<s;a++,s--){var l=o[a];o[a]=o[s],o[s]=l}}var c=n?16:15,u=xn.sum(new Int32Array(o))/c,d=this.getOddCounts(),f=this.getEvenCounts(),h=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors();for(a=0;a<o.length;a++){var g=o[a]/u,m=Math.floor(g+.5);m<1?m=1:m>8&&(m=8);var y=Math.floor(a/2);0===(1&a)?(d[y]=m,h[y]=g-m):(f[y]=m,p[y]=g-m)}this.adjustOddEvenCounts(n,c);var v=0,w=0;for(a=d.length-1;a>=0;a--)w*=9,w+=d[a],v+=d[a];var b=0,x=0;for(a=f.length-1;a>=0;a--)b*=9,b+=f[a],x+=f[a];var C=w+3*b;if(n){if(0!==(1&v)||v>12||v<4)throw new Fr;var _=(12-v)/2,E=9-(k=t.OUTSIDE_ODD_WIDEST[_]),S=Uo.getRSSvalue(d,k,!1),A=Uo.getRSSvalue(f,E,!0),N=t.OUTSIDE_EVEN_TOTAL_SUBSET[_],I=t.OUTSIDE_GSUM[_];return new Do(S*N+A+I,C)}if(0!==(1&x)||x>10||x<4)throw new Fr;_=(10-x)/2,E=9-(k=t.INSIDE_ODD_WIDEST[_]),S=Uo.getRSSvalue(d,k,!0),A=Uo.getRSSvalue(f,E,!1);var k,T=t.INSIDE_ODD_TOTAL_SUBSET[_];I=t.INSIDE_GSUM[_];return new Do(A*T+S+I,C)},t.prototype.findFinderPattern=function(e,t){var r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;for(var n=e.getSize(),o=!1,i=0;i<n&&t!==(o=!e.get(i));)i++;for(var a=0,s=i,l=i;l<n;l++)if(e.get(l)!==o)r[a]++;else{if(3===a){if(jo.isFinderPattern(r))return[s,l];s+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,a--}else a++;r[a]=1,o=!o}throw new Fr},t.prototype.parseFoundFinderPattern=function(e,r,n,o){for(var i=e.get(o[0]),a=o[0]-1;a>=0&&i!==e.get(a);)a--;a++;var s=o[0]-a,l=this.getDecodeFinderCounters(),c=new Int32Array(l.length);pr.arraycopy(l,0,c,1,l.length-1),c[0]=s;var u=this.parseFinderValue(c,t.FINDER_PATTERNS),d=a,f=o[1];return n&&(d=e.getSize()-1-d,f=e.getSize()-1-f),new Bo(u,[a,o[1]],d,f,r)},t.prototype.adjustOddEvenCounts=function(e,t){var r=xn.sum(new Int32Array(this.getOddCounts())),n=xn.sum(new Int32Array(this.getEvenCounts())),o=!1,i=!1,a=!1,s=!1;e?(r>12?i=!0:r<4&&(o=!0),n>12?s=!0:n<4&&(a=!0)):(r>11?i=!0:r<5&&(o=!0),n>10?s=!0:n<4&&(a=!0));var l=r+n-t,c=(1&r)===(e?1:0),u=1===(1&n);if(1===l)if(c){if(u)throw new Fr;i=!0}else{if(!u)throw new Fr;s=!0}else if(-1===l)if(c){if(u)throw new Fr;o=!0}else{if(!u)throw new Fr;a=!0}else{if(0!==l)throw new Fr;if(c){if(!u)throw new Fr;r<n?(o=!0,s=!0):(i=!0,a=!0)}else if(u)throw new Fr}if(o){if(i)throw new Fr;jo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&jo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new Fr;jo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&jo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(jo);const Ri=Oi;var Mi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Pi=function(e){function t(t){var r=e.call(this)||this;r.readers=[];var n=t?t.get(Sr.POSSIBLE_FORMATS):null,o=t&&void 0!==t.get(Sr.ASSUME_CODE_39_CHECK_DIGIT),i=t&&void 0!==t.get(Sr.ENABLE_CODE_39_EXTENDED_MODE);return n&&((n.includes(nn.EAN_13)||n.includes(nn.UPC_A)||n.includes(nn.EAN_8)||n.includes(nn.UPC_E))&&r.readers.push(new Io(t)),n.includes(nn.CODE_39)&&r.readers.push(new Hn(o,i)),n.includes(nn.CODE_93)&&r.readers.push(new Yn),n.includes(nn.CODE_128)&&r.readers.push(new Fn),n.includes(nn.ITF)&&r.readers.push(new $n),n.includes(nn.CODABAR)&&r.readers.push(new Oo),n.includes(nn.RSS_14)&&r.readers.push(new Ri),n.includes(nn.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new Ai))),0===r.readers.length&&(r.readers.push(new Io(t)),r.readers.push(new Hn),r.readers.push(new Yn),r.readers.push(new Io(t)),r.readers.push(new Fn),r.readers.push(new $n),r.readers.push(new Ri)),r}return Mi(t,e),t.prototype.decodeRow=function(e,t,r){for(var n=0;n<this.readers.length;n++)try{return this.readers[n].decodeRow(e,t,r)}catch(o){}throw new Fr},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t}(Bn);var ji=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Di=(function(e){function t(t,r){return void 0===t&&(t=500),e.call(this,new Pi(r),t,r)||this}ji(t,e)}(Jr),function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}),Bi=function(){function e(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return e.prototype.getECCodewords=function(){return this.ecCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),Li=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),Fi=function(){function e(e,t,r,n,o,i){var a,s;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=o,this.ecBlocks=i;var l=0,c=i.getECCodewords(),u=i.getECBlocks();try{for(var d=Di(u),f=d.next();!f.done;f=d.next()){var h=f.value;l+=h.getCount()*(h.getDataCodewords()+c)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}this.totalCodewords=l}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},e.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},e.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},e.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e.getVersionForDimensions=function(t,r){var n,o;if(0!==(1&t)||0!==(1&r))throw new Nr;try{for(var i=Di(e.VERSIONS),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.symbolSizeRows===t&&s.symbolSizeColumns===r)return s}}catch(l){n={error:l}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}throw new Nr},e.prototype.toString=function(){return""+this.versionNumber},e.buildVersions=function(){return[new e(1,10,10,8,8,new Bi(5,new Li(1,3))),new e(2,12,12,10,10,new Bi(7,new Li(1,5))),new e(3,14,14,12,12,new Bi(10,new Li(1,8))),new e(4,16,16,14,14,new Bi(12,new Li(1,12))),new e(5,18,18,16,16,new Bi(14,new Li(1,18))),new e(6,20,20,18,18,new Bi(18,new Li(1,22))),new e(7,22,22,20,20,new Bi(20,new Li(1,30))),new e(8,24,24,22,22,new Bi(24,new Li(1,36))),new e(9,26,26,24,24,new Bi(28,new Li(1,44))),new e(10,32,32,14,14,new Bi(36,new Li(1,62))),new e(11,36,36,16,16,new Bi(42,new Li(1,86))),new e(12,40,40,18,18,new Bi(48,new Li(1,114))),new e(13,44,44,20,20,new Bi(56,new Li(1,144))),new e(14,48,48,22,22,new Bi(68,new Li(1,174))),new e(15,52,52,24,24,new Bi(42,new Li(2,102))),new e(16,64,64,14,14,new Bi(56,new Li(2,140))),new e(17,72,72,16,16,new Bi(36,new Li(4,92))),new e(18,80,80,18,18,new Bi(48,new Li(4,114))),new e(19,88,88,20,20,new Bi(56,new Li(4,144))),new e(20,96,96,22,22,new Bi(68,new Li(4,174))),new e(21,104,104,24,24,new Bi(56,new Li(6,136))),new e(22,120,120,18,18,new Bi(68,new Li(6,175))),new e(23,132,132,20,20,new Bi(62,new Li(8,163))),new e(24,144,144,22,22,new Bi(62,new Li(8,156),new Li(2,155))),new e(25,8,18,6,16,new Bi(7,new Li(1,5))),new e(26,8,32,6,14,new Bi(11,new Li(1,10))),new e(27,12,26,10,24,new Bi(14,new Li(1,16))),new e(28,12,36,10,16,new Bi(18,new Li(1,22))),new e(29,16,36,14,16,new Bi(24,new Li(1,32))),new e(30,16,48,14,22,new Bi(28,new Li(1,49)))]},e.VERSIONS=e.buildVersions(),e}();const Ui=Fi;const zi=function(){function e(t){var r=t.getHeight();if(r<8||r>144||0!==(1&r))throw new Nr;this.version=e.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Br(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return e.prototype.getVersion=function(){return this.version},e.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return Ui.getVersionForDimensions(t,r)},e.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,n=0,o=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),a=!1,s=!1,l=!1,c=!1;do{if(r!==o||0!==n||a)if(r!==o-2||0!==n||0===(3&i)||s)if(r!==o+4||2!==n||0!==(7&i)||l)if(r!==o-2||0!==n||4!==(7&i)||c){do{r<o&&n>=0&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,o,i)),r-=2,n+=2}while(r>=0&&n<i);r+=1,n+=3;do{r>=0&&n<i&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,o,i)),r+=2,n-=2}while(r<o&&n>=0);r+=3,n+=1}else e[t++]=255&this.readCorner4(o,i),r-=2,n+=2,c=!0;else e[t++]=255&this.readCorner3(o,i),r-=2,n+=2,l=!0;else e[t++]=255&this.readCorner2(o,i),r-=2,n+=2,s=!0;else e[t++]=255&this.readCorner1(o,i),r-=2,n+=2,a=!0}while(r<o||n<i);if(t!==this.version.getTotalCodewords())throw new Nr;return e},e.prototype.readModule=function(e,t,r,n){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=n,e+=4-(n+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},e.prototype.readUtah=function(e,t,r,n){var o=0;return this.readModule(e-2,t-2,r,n)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,n)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,n)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,n)&&(o|=1),o<<=1,this.readModule(e-1,t,r,n)&&(o|=1),o<<=1,this.readModule(e,t-2,r,n)&&(o|=1),o<<=1,this.readModule(e,t-1,r,n)&&(o|=1),o<<=1,this.readModule(e,t,r,n)&&(o|=1),o},e.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},e.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},e.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},e.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},e.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new lr("Dimension of bitMatrix must match the version size");for(var n=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),i=t/n|0,a=r/o|0,s=new Br(a*o,i*n),l=0;l<i;++l)for(var c=l*n,u=0;u<a;++u)for(var d=u*o,f=0;f<n;++f)for(var h=l*(n+2)+1+f,p=c+f,g=0;g<o;++g){var m=u*(o+2)+1+g;if(e.get(m,h)){var y=d+g;s.set(y,p)}}return s},e}();var Vi=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hi=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,r){var n,o,i,a,s=r.getECBlocks(),l=0,c=s.getECBlocks();try{for(var u=Vi(c),d=u.next();!d.done;d=u.next()){l+=(m=d.value).getCount()}}catch(k){n={error:k}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}var f=new Array(l),h=0;try{for(var p=Vi(c),g=p.next();!g.done;g=p.next())for(var m=g.value,y=0;y<m.getCount();y++){var v=m.getDataCodewords(),w=s.getECCodewords()+v;f[h++]=new e(v,new Uint8Array(w))}}catch(T){i={error:T}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var b=f[0].codewords.length-s.getECCodewords(),x=b-1,C=0;for(y=0;y<x;y++)for(var _=0;_<h;_++)f[_].codewords[y]=t[C++];var E=24===r.getVersionNumber(),S=E?8:h;for(_=0;_<S;_++)f[_].codewords[b-1]=t[C++];var A=f[0].codewords.length;for(y=b;y<A;y++)for(_=0;_<h;_++){var N=E?(_+8)%h:_,I=E&&N>7?y-1:y;f[N].codewords[I]=t[C++]}if(C!==t.length)throw new lr;return f},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}();const Wi=Hi;const Gi=function(){function e(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return e.prototype.getBitOffset=function(){return this.bitOffset},e.prototype.getByteOffset=function(){return this.byteOffset},e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new lr(""+e);var t=0,r=this.bitOffset,n=this.byteOffset,o=this.bytes;if(r>0){var i=8-r,a=e<i?e:i,s=255>>8-a<<(l=i-a);t=(o[n]&s)>>l,e-=a,8===(r+=a)&&(r=0,n++)}if(e>0){for(;e>=8;)t=t<<8|255&o[n],n++,e-=8;if(e>0){var l;s=255>>(l=8-e)<<l;t=t<<e|(o[n]&s)>>l,r+=e}}return this.bitOffset=r,this.byteOffset=n,t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();var Xi;!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(Xi||(Xi={}));const Yi=function(){function e(){}return e.decode=function(e){var t=new Gi(e),r=new Dr,n=new Dr,o=new Array,i=Xi.ASCII_ENCODE;do{if(i===Xi.ASCII_ENCODE)i=this.decodeAsciiSegment(t,r,n);else{switch(i){case Xi.C40_ENCODE:this.decodeC40Segment(t,r);break;case Xi.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Xi.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Xi.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Xi.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new Nr}i=Xi.ASCII_ENCODE}}while(i!==Xi.PAD_ENCODE&&t.available()>0);return n.length()>0&&r.append(n.toString()),new sn(e,r.toString(),0===o.length?null:o,null)},e.decodeAsciiSegment=function(e,t,r){var n=!1;do{var o=e.readBits(8);if(0===o)throw new Nr;if(o<=128)return n&&(o+=128),t.append(String.fromCharCode(o-1)),Xi.ASCII_ENCODE;if(129===o)return Xi.PAD_ENCODE;if(o<=229){var i=o-130;i<10&&t.append("0"),t.append(""+i)}else switch(o){case 230:return Xi.C40_ENCODE;case 231:return Xi.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:n=!0;break;case 236:t.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return Xi.ANSIX12_ENCODE;case 239:return Xi.TEXT_ENCODE;case 240:return Xi.EDIFACT_ENCODE;default:if(254!==o||0!==e.available())throw new Nr}}while(e.available()>0);return Xi.ASCII_ENCODE},e.decodeC40Segment=function(e,t){var r=!1,n=[],o=0;do{if(8===e.available())return;var i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var s=n[a];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.C40_BASIC_SET_CHARS.length))throw new Nr;var l=this.C40_BASIC_SET_CHARS[s];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l)}break;case 1:r?(t.append(String.fromCharCode(s+128)),r=!1):t.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){l=this.C40_SHIFT2_SET_CHARS[s];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new Nr}o=0;break;case 3:r?(t.append(String.fromCharCode(s+224)),r=!1):t.append(String.fromCharCode(s+96)),o=0;break;default:throw new Nr}}}while(e.available()>0)},e.decodeTextSegment=function(e,t){var r=!1,n=[],o=0;do{if(8===e.available())return;var i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var s=n[a];switch(o){case 0:if(s<3)o=s+1;else{if(!(s<this.TEXT_BASIC_SET_CHARS.length))throw new Nr;var l=this.TEXT_BASIC_SET_CHARS[s];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l)}break;case 1:r?(t.append(String.fromCharCode(s+128)),r=!1):t.append(String.fromCharCode(s)),o=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){l=this.TEXT_SHIFT2_SET_CHARS[s];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l)}else switch(s){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new Nr}o=0;break;case 3:if(!(s<this.TEXT_SHIFT3_SET_CHARS.length))throw new Nr;l=this.TEXT_SHIFT3_SET_CHARS[s];r?(t.append(String.fromCharCode(l.charCodeAt(0)+128)),r=!1):t.append(l),o=0;break;default:throw new Nr}}}while(e.available()>0)},e.decodeAnsiX12Segment=function(e,t){var r=[];do{if(8===e.available())return;var n=e.readBits(8);if(254===n)return;this.parseTwoBytes(n,e.readBits(8),r);for(var o=0;o<3;o++){var i=r[o];switch(i){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(i<14)t.append(String.fromCharCode(i+44));else{if(!(i<40))throw new Nr;t.append(String.fromCharCode(i+51))}}}}while(e.available()>0)},e.parseTwoBytes=function(e,t,r){var n=(e<<8)+t-1,o=Math.floor(n/1600);r[0]=o,n-=1600*o,o=Math.floor(n/40),r[1]=o,r[2]=n-40*o},e.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var n=e.readBits(6);if(31===n){var o=8-e.getBitOffset();return void(8!==o&&e.readBits(o))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)},e.decodeBase256Segment=function(e,t,r){var n,o=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),o++);if((n=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),o++))<0)throw new Nr;for(var a=new Uint8Array(n),s=0;s<n;s++){if(e.available()<8)throw new Nr;a[s]=this.unrandomize255State(e.readBits(8),o++)}r.push(a);try{t.append(Pr.decode(a,jr.ISO88591))}catch(l){throw new yn("Platform does not support required encoding: "+l.message)}},e.unrandomize255State=function(e,t){var r=e-(149*t%255+1);return r>=0?r:r+256},e.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],e.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.TEXT_SHIFT2_SET_CHARS=e.C40_SHIFT2_SET_CHARS,e.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],e}();var Ki=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zi=function(){function e(){this.rsDecoder=new vn(hn.DATA_MATRIX_FIELD_256)}return e.prototype.decode=function(e){var t,r,n=new zi(e),o=n.getVersion(),i=n.readCodewords(),a=Wi.getDataBlocks(i,o),s=0;try{for(var l=Ki(a),c=l.next();!c.done;c=l.next()){s+=c.value.getNumDataCodewords()}}catch(y){t={error:y}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}for(var u=new Uint8Array(s),d=a.length,f=0;f<d;f++){var h=a[f],p=h.getCodewords(),g=h.getNumDataCodewords();this.correctErrors(p,g);for(var m=0;m<g;m++)u[m*d+f]=p[m]}return Yi.decode(u)},e.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(o){throw new dr}for(var n=0;n<t;n++)e[n]=r[n]},e}();const qi=Zi;var $i=function(){function e(e){this.image=e,this.rectangleDetector=new Nn(this.image)}return e.prototype.detect=function(){var t=this.rectangleDetector.detect(),r=this.detectSolid1(t);if((r=this.detectSolid2(r))[3]=this.correctTopRight(r),!r[3])throw new Fr;var n=(r=this.shiftToModuleCenter(r))[0],o=r[1],i=r[2],a=r[3],s=this.transitionsBetween(n,a)+1,l=this.transitionsBetween(i,a)+1;1===(1&s)&&(s+=1),1===(1&l)&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var c=e.sampleGrid(this.image,n,o,i,a,s,l);return new En(c,[n,o,i,a])},e.shiftPoint=function(e,t,r){var n=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new _n(e.getX()+n,e.getY()+o)},e.moveAway=function(e,t,r){var n=e.getX(),o=e.getY();return n<t?n-=1:n+=1,o<r?o-=1:o+=1,new _n(n,o)},e.prototype.detectSolid1=function(e){var t=e[0],r=e[1],n=e[3],o=e[2],i=this.transitionsBetween(t,r),a=this.transitionsBetween(r,n),s=this.transitionsBetween(n,o),l=this.transitionsBetween(o,t),c=i,u=[o,t,r,n];return c>a&&(c=a,u[0]=t,u[1]=r,u[2]=n,u[3]=o),c>s&&(c=s,u[0]=r,u[1]=n,u[2]=o,u[3]=t),c>l&&(u[0]=n,u[1]=o,u[2]=t,u[3]=r),u},e.prototype.detectSolid2=function(t){var r=t[0],n=t[1],o=t[2],i=t[3],a=this.transitionsBetween(r,i),s=e.shiftPoint(n,o,4*(a+1)),l=e.shiftPoint(o,n,4*(a+1));return this.transitionsBetween(s,r)<this.transitionsBetween(l,i)?(t[0]=r,t[1]=n,t[2]=o,t[3]=i):(t[0]=n,t[1]=o,t[2]=i,t[3]=r),t},e.prototype.correctTopRight=function(t){var r=t[0],n=t[1],o=t[2],i=t[3],a=this.transitionsBetween(r,i),s=this.transitionsBetween(n,i),l=e.shiftPoint(r,n,4*(s+1)),c=e.shiftPoint(o,n,4*(a+1));a=this.transitionsBetween(l,i),s=this.transitionsBetween(c,i);var u=new _n(i.getX()+(o.getX()-n.getX())/(a+1),i.getY()+(o.getY()-n.getY())/(a+1)),d=new _n(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1));return this.isValid(u)?this.isValid(d)?this.transitionsBetween(l,u)+this.transitionsBetween(c,u)>this.transitionsBetween(l,d)+this.transitionsBetween(c,d)?u:d:u:this.isValid(d)?d:null},e.prototype.shiftToModuleCenter=function(t){var r=t[0],n=t[1],o=t[2],i=t[3],a=this.transitionsBetween(r,i)+1,s=this.transitionsBetween(o,i)+1,l=e.shiftPoint(r,n,4*s),c=e.shiftPoint(o,n,4*a);1===(1&(a=this.transitionsBetween(l,i)+1))&&(a+=1),1===(1&(s=this.transitionsBetween(c,i)+1))&&(s+=1);var u,d,f=(r.getX()+n.getX()+o.getX()+i.getX())/4,h=(r.getY()+n.getY()+o.getY()+i.getY())/4;return r=e.moveAway(r,f,h),n=e.moveAway(n,f,h),o=e.moveAway(o,f,h),i=e.moveAway(i,f,h),l=e.shiftPoint(r,n,4*s),l=e.shiftPoint(l,i,4*a),u=e.shiftPoint(n,r,4*s),u=e.shiftPoint(u,o,4*a),c=e.shiftPoint(o,i,4*s),c=e.shiftPoint(c,n,4*a),d=e.shiftPoint(i,o,4*s),[l,u,c,d=e.shiftPoint(d,r,4*a)]},e.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},e.sampleGrid=function(e,t,r,n,o,i,a){return Rn.getInstance().sampleGrid(e,i,a,.5,.5,i-.5,.5,i-.5,a-.5,.5,a-.5,t.getX(),t.getY(),o.getX(),o.getY(),n.getX(),n.getY(),r.getX(),r.getY())},e.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),n=Math.trunc(e.getY()),o=Math.trunc(t.getX()),i=Math.trunc(t.getY()),a=Math.abs(i-n)>Math.abs(o-r);if(a){var s=r;r=n,n=s,s=o,o=i,i=s}for(var l=Math.abs(o-r),c=Math.abs(i-n),u=-l/2,d=n<i?1:-1,f=r<o?1:-1,h=0,p=this.image.get(a?n:r,a?r:n),g=r,m=n;g!==o;g+=f){var y=this.image.get(a?m:g,a?g:m);if(y!==p&&(h++,p=y),(u+=c)>0){if(m===i)break;m+=d,u-=l}}return h},e}();const Qi=$i;const Ji=function(){function e(){this.decoder=new qi}return e.prototype.decode=function(t,r){var n,o;if(void 0===r&&(r=null),null!=r&&r.has(Sr.PURE_BARCODE)){var i=e.extractPureBits(t.getBlackMatrix());n=this.decoder.decode(i),o=e.NO_POINTS}else{var a=new Qi(t.getBlackMatrix()).detect();n=this.decoder.decode(a.getBits()),o=a.getPoints()}var s=n.getRawBytes(),l=new tn(n.getText(),s,8*s.length,o,nn.DATA_MATRIX,pr.currentTimeMillis()),c=n.getByteSegments();null!=c&&l.putMetadata(an.BYTE_SEGMENTS,c);var u=n.getECLevel();return null!=u&&l.putMetadata(an.ERROR_CORRECTION_LEVEL,u),l},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null==t||null==r)throw new Fr;var n=this.moduleSize(t,e),o=t[1],i=r[1],a=t[0],s=(r[0]-a+1)/n,l=(i-o+1)/n;if(s<=0||l<=0)throw new Fr;var c=n/2;o+=c,a+=c;for(var u=new Br(s,l),d=0;d<l;d++)for(var f=o+d*n,h=0;h<s;h++)e.get(a+h*n,f)&&u.set(h,d);return u},e.moduleSize=function(e,t){for(var r=t.getWidth(),n=e[0],o=e[1];n<r&&t.get(n,o);)n++;if(n===r)throw new Fr;var i=n-e[0];if(0===i)throw new Fr;return i},e.NO_POINTS=[],e}();var ea,ta=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){function t(t){return void 0===t&&(t=500),e.call(this,new Ji,t)||this}ta(t,e)}(Jr);!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(ea||(ea={}));const ra=function(){function e(t,r,n){this.value=t,this.stringValue=r,this.bits=n,e.FOR_BITS.set(n,this),e.FOR_VALUE.set(t,this)}return e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.fromString=function(t){switch(t){case"L":return e.L;case"M":return e.M;case"Q":return e.Q;case"H":return e.H;default:throw new ar(t+"not available")}},e.prototype.toString=function(){return this.stringValue},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.value===r.value},e.forBits=function(t){if(t<0||t>=e.FOR_BITS.size)throw new lr;return e.FOR_BITS.get(t)},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.L=new e(ea.L,"L",1),e.M=new e(ea.M,"M",0),e.Q=new e(ea.Q,"Q",3),e.H=new e(ea.H,"H",2),e}();var na=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},oa=function(){function e(e){this.errorCorrectionLevel=ra.forBits(e>>3&3),this.dataMask=7&e}return e.numBitsDiffering=function(e,t){return Cr.bitCount(e^t)},e.decodeFormatInformation=function(t,r){var n=e.doDecodeFormatInformation(t,r);return null!==n?n:e.doDecodeFormatInformation(t^e.FORMAT_INFO_MASK_QR,r^e.FORMAT_INFO_MASK_QR)},e.doDecodeFormatInformation=function(t,r){var n,o,i=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=na(e.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var c=l.value,u=c[0];if(u===t||u===r)return new e(c[1]);var d=e.numBitsDiffering(t,u);d<i&&(a=c[1],i=d),t!==r&&(d=e.numBitsDiffering(r,u))<i&&(a=c[1],i=d)}}catch(f){n={error:f}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return i<=3?new e(a):null},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getDataMask=function(){return this.dataMask},e.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},e.FORMAT_INFO_MASK_QR=21522,e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],e}();const ia=oa;var aa=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sa=function(){function e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return e.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},e.prototype.getNumBlocks=function(){var e,t,r=0,n=this.ecBlocks;try{for(var o=aa(n),i=o.next();!i.done;i=o.next()){r+=i.value.getCount()}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},e.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},e.prototype.getECBlocks=function(){return this.ecBlocks},e}();const la=sa;var ca=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}();const ua=ca;var da=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fa=function(){function e(e,t){for(var r,n,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var a=0,s=o[0].getECCodewordsPerBlock(),l=o[0].getECBlocks();try{for(var c=da(l),u=c.next();!u.done;u=c.next()){var d=u.value;a+=d.getCount()*(d.getDataCodewords()+s)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}this.totalCodewords=a}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},e.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},e.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Nr;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new Nr}},e.getVersionForNumber=function(t){if(t<1||t>40)throw new lr;return e.VERSIONS[t-1]},e.decodeVersionInformation=function(t){for(var r=Number.MAX_SAFE_INTEGER,n=0,o=0;o<e.VERSION_DECODE_INFO.length;o++){var i=e.VERSION_DECODE_INFO[o];if(i===t)return e.getVersionForNumber(o+7);var a=ia.numBitsDiffering(t,i);a<r&&(n=o+7,r=a)}return r<=3?e.getVersionForNumber(n):null},e.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Br(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,n=0;n<r;n++)for(var o=this.alignmentPatternCenters[n]-2,i=0;i<r;i++)0===n&&(0===i||i===r-1)||n===r-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},e.prototype.toString=function(){return""+this.versionNumber},e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),e.VERSIONS=[new e(1,new Int32Array(0),new la(7,new ua(1,19)),new la(10,new ua(1,16)),new la(13,new ua(1,13)),new la(17,new ua(1,9))),new e(2,Int32Array.from([6,18]),new la(10,new ua(1,34)),new la(16,new ua(1,28)),new la(22,new ua(1,22)),new la(28,new ua(1,16))),new e(3,Int32Array.from([6,22]),new la(15,new ua(1,55)),new la(26,new ua(1,44)),new la(18,new ua(2,17)),new la(22,new ua(2,13))),new e(4,Int32Array.from([6,26]),new la(20,new ua(1,80)),new la(18,new ua(2,32)),new la(26,new ua(2,24)),new la(16,new ua(4,9))),new e(5,Int32Array.from([6,30]),new la(26,new ua(1,108)),new la(24,new ua(2,43)),new la(18,new ua(2,15),new ua(2,16)),new la(22,new ua(2,11),new ua(2,12))),new e(6,Int32Array.from([6,34]),new la(18,new ua(2,68)),new la(16,new ua(4,27)),new la(24,new ua(4,19)),new la(28,new ua(4,15))),new e(7,Int32Array.from([6,22,38]),new la(20,new ua(2,78)),new la(18,new ua(4,31)),new la(18,new ua(2,14),new ua(4,15)),new la(26,new ua(4,13),new ua(1,14))),new e(8,Int32Array.from([6,24,42]),new la(24,new ua(2,97)),new la(22,new ua(2,38),new ua(2,39)),new la(22,new ua(4,18),new ua(2,19)),new la(26,new ua(4,14),new ua(2,15))),new e(9,Int32Array.from([6,26,46]),new la(30,new ua(2,116)),new la(22,new ua(3,36),new ua(2,37)),new la(20,new ua(4,16),new ua(4,17)),new la(24,new ua(4,12),new ua(4,13))),new e(10,Int32Array.from([6,28,50]),new la(18,new ua(2,68),new ua(2,69)),new la(26,new ua(4,43),new ua(1,44)),new la(24,new ua(6,19),new ua(2,20)),new la(28,new ua(6,15),new ua(2,16))),new e(11,Int32Array.from([6,30,54]),new la(20,new ua(4,81)),new la(30,new ua(1,50),new ua(4,51)),new la(28,new ua(4,22),new ua(4,23)),new la(24,new ua(3,12),new ua(8,13))),new e(12,Int32Array.from([6,32,58]),new la(24,new ua(2,92),new ua(2,93)),new la(22,new ua(6,36),new ua(2,37)),new la(26,new ua(4,20),new ua(6,21)),new la(28,new ua(7,14),new ua(4,15))),new e(13,Int32Array.from([6,34,62]),new la(26,new ua(4,107)),new la(22,new ua(8,37),new ua(1,38)),new la(24,new ua(8,20),new ua(4,21)),new la(22,new ua(12,11),new ua(4,12))),new e(14,Int32Array.from([6,26,46,66]),new la(30,new ua(3,115),new ua(1,116)),new la(24,new ua(4,40),new ua(5,41)),new la(20,new ua(11,16),new ua(5,17)),new la(24,new ua(11,12),new ua(5,13))),new e(15,Int32Array.from([6,26,48,70]),new la(22,new ua(5,87),new ua(1,88)),new la(24,new ua(5,41),new ua(5,42)),new la(30,new ua(5,24),new ua(7,25)),new la(24,new ua(11,12),new ua(7,13))),new e(16,Int32Array.from([6,26,50,74]),new la(24,new ua(5,98),new ua(1,99)),new la(28,new ua(7,45),new ua(3,46)),new la(24,new ua(15,19),new ua(2,20)),new la(30,new ua(3,15),new ua(13,16))),new e(17,Int32Array.from([6,30,54,78]),new la(28,new ua(1,107),new ua(5,108)),new la(28,new ua(10,46),new ua(1,47)),new la(28,new ua(1,22),new ua(15,23)),new la(28,new ua(2,14),new ua(17,15))),new e(18,Int32Array.from([6,30,56,82]),new la(30,new ua(5,120),new ua(1,121)),new la(26,new ua(9,43),new ua(4,44)),new la(28,new ua(17,22),new ua(1,23)),new la(28,new ua(2,14),new ua(19,15))),new e(19,Int32Array.from([6,30,58,86]),new la(28,new ua(3,113),new ua(4,114)),new la(26,new ua(3,44),new ua(11,45)),new la(26,new ua(17,21),new ua(4,22)),new la(26,new ua(9,13),new ua(16,14))),new e(20,Int32Array.from([6,34,62,90]),new la(28,new ua(3,107),new ua(5,108)),new la(26,new ua(3,41),new ua(13,42)),new la(30,new ua(15,24),new ua(5,25)),new la(28,new ua(15,15),new ua(10,16))),new e(21,Int32Array.from([6,28,50,72,94]),new la(28,new ua(4,116),new ua(4,117)),new la(26,new ua(17,42)),new la(28,new ua(17,22),new ua(6,23)),new la(30,new ua(19,16),new ua(6,17))),new e(22,Int32Array.from([6,26,50,74,98]),new la(28,new ua(2,111),new ua(7,112)),new la(28,new ua(17,46)),new la(30,new ua(7,24),new ua(16,25)),new la(24,new ua(34,13))),new e(23,Int32Array.from([6,30,54,78,102]),new la(30,new ua(4,121),new ua(5,122)),new la(28,new ua(4,47),new ua(14,48)),new la(30,new ua(11,24),new ua(14,25)),new la(30,new ua(16,15),new ua(14,16))),new e(24,Int32Array.from([6,28,54,80,106]),new la(30,new ua(6,117),new ua(4,118)),new la(28,new ua(6,45),new ua(14,46)),new la(30,new ua(11,24),new ua(16,25)),new la(30,new ua(30,16),new ua(2,17))),new e(25,Int32Array.from([6,32,58,84,110]),new la(26,new ua(8,106),new ua(4,107)),new la(28,new ua(8,47),new ua(13,48)),new la(30,new ua(7,24),new ua(22,25)),new la(30,new ua(22,15),new ua(13,16))),new e(26,Int32Array.from([6,30,58,86,114]),new la(28,new ua(10,114),new ua(2,115)),new la(28,new ua(19,46),new ua(4,47)),new la(28,new ua(28,22),new ua(6,23)),new la(30,new ua(33,16),new ua(4,17))),new e(27,Int32Array.from([6,34,62,90,118]),new la(30,new ua(8,122),new ua(4,123)),new la(28,new ua(22,45),new ua(3,46)),new la(30,new ua(8,23),new ua(26,24)),new la(30,new ua(12,15),new ua(28,16))),new e(28,Int32Array.from([6,26,50,74,98,122]),new la(30,new ua(3,117),new ua(10,118)),new la(28,new ua(3,45),new ua(23,46)),new la(30,new ua(4,24),new ua(31,25)),new la(30,new ua(11,15),new ua(31,16))),new e(29,Int32Array.from([6,30,54,78,102,126]),new la(30,new ua(7,116),new ua(7,117)),new la(28,new ua(21,45),new ua(7,46)),new la(30,new ua(1,23),new ua(37,24)),new la(30,new ua(19,15),new ua(26,16))),new e(30,Int32Array.from([6,26,52,78,104,130]),new la(30,new ua(5,115),new ua(10,116)),new la(28,new ua(19,47),new ua(10,48)),new la(30,new ua(15,24),new ua(25,25)),new la(30,new ua(23,15),new ua(25,16))),new e(31,Int32Array.from([6,30,56,82,108,134]),new la(30,new ua(13,115),new ua(3,116)),new la(28,new ua(2,46),new ua(29,47)),new la(30,new ua(42,24),new ua(1,25)),new la(30,new ua(23,15),new ua(28,16))),new e(32,Int32Array.from([6,34,60,86,112,138]),new la(30,new ua(17,115)),new la(28,new ua(10,46),new ua(23,47)),new la(30,new ua(10,24),new ua(35,25)),new la(30,new ua(19,15),new ua(35,16))),new e(33,Int32Array.from([6,30,58,86,114,142]),new la(30,new ua(17,115),new ua(1,116)),new la(28,new ua(14,46),new ua(21,47)),new la(30,new ua(29,24),new ua(19,25)),new la(30,new ua(11,15),new ua(46,16))),new e(34,Int32Array.from([6,34,62,90,118,146]),new la(30,new ua(13,115),new ua(6,116)),new la(28,new ua(14,46),new ua(23,47)),new la(30,new ua(44,24),new ua(7,25)),new la(30,new ua(59,16),new ua(1,17))),new e(35,Int32Array.from([6,30,54,78,102,126,150]),new la(30,new ua(12,121),new ua(7,122)),new la(28,new ua(12,47),new ua(26,48)),new la(30,new ua(39,24),new ua(14,25)),new la(30,new ua(22,15),new ua(41,16))),new e(36,Int32Array.from([6,24,50,76,102,128,154]),new la(30,new ua(6,121),new ua(14,122)),new la(28,new ua(6,47),new ua(34,48)),new la(30,new ua(46,24),new ua(10,25)),new la(30,new ua(2,15),new ua(64,16))),new e(37,Int32Array.from([6,28,54,80,106,132,158]),new la(30,new ua(17,122),new ua(4,123)),new la(28,new ua(29,46),new ua(14,47)),new la(30,new ua(49,24),new ua(10,25)),new la(30,new ua(24,15),new ua(46,16))),new e(38,Int32Array.from([6,32,58,84,110,136,162]),new la(30,new ua(4,122),new ua(18,123)),new la(28,new ua(13,46),new ua(32,47)),new la(30,new ua(48,24),new ua(14,25)),new la(30,new ua(42,15),new ua(32,16))),new e(39,Int32Array.from([6,26,54,82,110,138,166]),new la(30,new ua(20,117),new ua(4,118)),new la(28,new ua(40,47),new ua(7,48)),new la(30,new ua(43,24),new ua(22,25)),new la(30,new ua(10,15),new ua(67,16))),new e(40,Int32Array.from([6,30,58,86,114,142,170]),new la(30,new ua(19,118),new ua(6,119)),new la(28,new ua(18,47),new ua(31,48)),new la(30,new ua(34,24),new ua(34,25)),new la(30,new ua(20,15),new ua(61,16)))],e}();const ha=fa;var pa;!function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(pa||(pa={}));const ga=function(){function e(e,t){this.value=e,this.isMasked=t}return e.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)},e.values=new Map([[pa.DATA_MASK_000,new e(pa.DATA_MASK_000,function(e,t){return 0===(e+t&1)})],[pa.DATA_MASK_001,new e(pa.DATA_MASK_001,function(e,t){return 0===(1&e)})],[pa.DATA_MASK_010,new e(pa.DATA_MASK_010,function(e,t){return t%3===0})],[pa.DATA_MASK_011,new e(pa.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[pa.DATA_MASK_100,new e(pa.DATA_MASK_100,function(e,t){return 0===(Math.floor(e/2)+Math.floor(t/3)&1)})],[pa.DATA_MASK_101,new e(pa.DATA_MASK_101,function(e,t){return e*t%6===0})],[pa.DATA_MASK_110,new e(pa.DATA_MASK_110,function(e,t){return e*t%6<3})],[pa.DATA_MASK_111,new e(pa.DATA_MASK_111,function(e,t){return 0===(e+t+e*t%3&1)})]]),e}();var ma=function(){function e(e){var t=e.getHeight();if(t<21||1!==(3&t))throw new Nr;this.bitMatrix=e}return e.prototype.readFormatInformation=function(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);var n=this.bitMatrix.getHeight(),o=0,i=n-7;for(r=n-1;r>=i;r--)o=this.copyBit(8,r,o);for(t=n-8;t<n;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=ia.decodeFormatInformation(e,o),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new Nr},e.prototype.readVersion=function(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ha.getVersionForNumber(t);for(var r=0,n=e-11,o=5;o>=0;o--)for(var i=e-9;i>=n;i--)r=this.copyBit(i,o,r);var a=ha.decodeVersionInformation(r);if(null!==a&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(i=5;i>=0;i--)for(o=e-9;o>=n;o--)r=this.copyBit(i,o,r);if(null!==(a=ha.decodeVersionInformation(r))&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new Nr},e.prototype.copyBit=function(e,t,r){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?r<<1|1:r<<1},e.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=ga.values.get(e.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);for(var o=t.buildFunctionPattern(),i=!0,a=new Uint8Array(t.getTotalCodewords()),s=0,l=0,c=0,u=n-1;u>0;u-=2){6===u&&u--;for(var d=0;d<n;d++)for(var f=i?n-1-d:d,h=0;h<2;h++)o.get(u-h,f)||(c++,l<<=1,this.bitMatrix.get(u-h,f)&&(l|=1),8===c&&(a[s++]=l,c=0,l=0));i=!i}if(s!==t.getTotalCodewords())throw new Nr;return a},e.prototype.remask=function(){if(null!==this.parsedFormatInfo){var e=ga.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},e.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},e.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var n=t+1,o=e.getHeight();n<o;n++)e.get(t,n)!==e.get(n,t)&&(e.flip(n,t),e.flip(t,n))},e}();const ya=ma;var va=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wa=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,r,n){var o,i,a,s;if(t.length!==r.getTotalCodewords())throw new lr;var l=r.getECBlocksForLevel(n),c=0,u=l.getECBlocks();try{for(var d=va(u),f=d.next();!f.done;f=d.next()){c+=(y=f.value).getCount()}}catch(I){o={error:I}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}var h=new Array(c),p=0;try{for(var g=va(u),m=g.next();!m.done;m=g.next())for(var y=m.value,v=0;v<y.getCount();v++){var w=y.getDataCodewords(),b=l.getECCodewordsPerBlock()+w;h[p++]=new e(w,new Uint8Array(b))}}catch(k){a={error:k}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}for(var x=h[0].codewords.length,C=h.length-1;C>=0;){if(h[C].codewords.length===x)break;C--}C++;var _=x-l.getECCodewordsPerBlock(),E=0;for(v=0;v<_;v++)for(var S=0;S<p;S++)h[S].codewords[v]=t[E++];for(S=C;S<p;S++)h[S].codewords[_]=t[E++];var A=h[0].codewords.length;for(v=_;v<A;v++)for(S=0;S<p;S++){var N=S<C?v:v+1;h[S].codewords[N]=t[E++]}return h},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}();const ba=wa;var xa;!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(xa||(xa={}));var Ca=function(){function e(t,r,n,o){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=o,e.FOR_BITS.set(o,this),e.FOR_VALUE.set(t,this)}return e.forBits=function(t){var r=e.FOR_BITS.get(t);if(void 0===r)throw new lr;return r},e.prototype.getCharacterCountBits=function(e){var t,r=e.getVersionNumber();return t=r<=9?0:r<=26?1:2,this.characterCountBitsForVersions[t]},e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.value===r.value},e.prototype.toString=function(){return this.stringValue},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.TERMINATOR=new e(xa.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),e.NUMERIC=new e(xa.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),e.ALPHANUMERIC=new e(xa.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),e.STRUCTURED_APPEND=new e(xa.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),e.BYTE=new e(xa.BYTE,"BYTE",Int32Array.from([8,16,16]),4),e.ECI=new e(xa.ECI,"ECI",Int32Array.from([0,0,0]),7),e.KANJI=new e(xa.KANJI,"KANJI",Int32Array.from([8,10,12]),8),e.FNC1_FIRST_POSITION=new e(xa.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),e.FNC1_SECOND_POSITION=new e(xa.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),e.HANZI=new e(xa.HANZI,"HANZI",Int32Array.from([8,10,12]),13),e}();const _a=Ca;var Ea=function(){function e(){}return e.decode=function(t,r,n,o){var i=new Gi(t),a=new Dr,s=new Array,l=-1,c=-1;try{var u=null,d=!1,f=void 0;do{if(i.available()<4)f=_a.TERMINATOR;else{var h=i.readBits(4);f=_a.forBits(h)}switch(f){case _a.TERMINATOR:break;case _a.FNC1_FIRST_POSITION:case _a.FNC1_SECOND_POSITION:d=!0;break;case _a.STRUCTURED_APPEND:if(i.available()<16)throw new Nr;l=i.readBits(8),c=i.readBits(8);break;case _a.ECI:var p=e.parseECIValue(i);if(null===(u=Or.getCharacterSetECIByValue(p)))throw new Nr;break;case _a.HANZI:var g=i.readBits(4),m=i.readBits(f.getCharacterCountBits(r));g===e.GB2312_SUBSET&&e.decodeHanziSegment(i,a,m);break;default:var y=i.readBits(f.getCharacterCountBits(r));switch(f){case _a.NUMERIC:e.decodeNumericSegment(i,a,y);break;case _a.ALPHANUMERIC:e.decodeAlphanumericSegment(i,a,y,d);break;case _a.BYTE:e.decodeByteSegment(i,a,y,u,s,o);break;case _a.KANJI:e.decodeKanjiSegment(i,a,y);break;default:throw new Nr}}}while(f!==_a.TERMINATOR)}catch(v){throw new Nr}return new sn(t,a.toString(),0===s.length?null:s,null===n?null:n.toString(),l,c)},e.decodeHanziSegment=function(e,t,r){if(13*r>e.available())throw new Nr;for(var n=new Uint8Array(2*r),o=0;r>0;){var i=e.readBits(13),a=i/96<<8&4294967295|i%96;a+=a<959?41377:42657,n[o]=a>>8&255,n[o+1]=255&a,o+=2,r--}try{t.append(Pr.decode(n,jr.GB2312))}catch(s){throw new Nr(s)}},e.decodeKanjiSegment=function(e,t,r){if(13*r>e.available())throw new Nr;for(var n=new Uint8Array(2*r),o=0;r>0;){var i=e.readBits(13),a=i/192<<8&4294967295|i%192;a+=a<7936?33088:49472,n[o]=a>>8,n[o+1]=a,o+=2,r--}try{t.append(Pr.decode(n,jr.SHIFT_JIS))}catch(s){throw new Nr(s)}},e.decodeByteSegment=function(e,t,r,n,o,i){if(8*r>e.available())throw new Nr;for(var a,s=new Uint8Array(r),l=0;l<r;l++)s[l]=e.readBits(8);a=null===n?jr.guessEncoding(s,i):n.getName();try{t.append(Pr.decode(s,a))}catch(c){throw new Nr(c)}o.push(s)},e.toAlphaNumericChar=function(t){if(t>=e.ALPHANUMERIC_CHARS.length)throw new Nr;return e.ALPHANUMERIC_CHARS[t]},e.decodeAlphanumericSegment=function(t,r,n,o){for(var i=r.length();n>1;){if(t.available()<11)throw new Nr;var a=t.readBits(11);r.append(e.toAlphaNumericChar(Math.floor(a/45))),r.append(e.toAlphaNumericChar(a%45)),n-=2}if(1===n){if(t.available()<6)throw new Nr;r.append(e.toAlphaNumericChar(t.readBits(6)))}if(o)for(var s=i;s<r.length();s++)"%"===r.charAt(s)&&(s<r.length()-1&&"%"===r.charAt(s+1)?r.deleteCharAt(s+1):r.setCharAt(s,String.fromCharCode(29)))},e.decodeNumericSegment=function(t,r,n){for(;n>=3;){if(t.available()<10)throw new Nr;var o=t.readBits(10);if(o>=1e3)throw new Nr;r.append(e.toAlphaNumericChar(Math.floor(o/100))),r.append(e.toAlphaNumericChar(Math.floor(o/10)%10)),r.append(e.toAlphaNumericChar(o%10)),n-=3}if(2===n){if(t.available()<7)throw new Nr;var i=t.readBits(7);if(i>=100)throw new Nr;r.append(e.toAlphaNumericChar(Math.floor(i/10))),r.append(e.toAlphaNumericChar(i%10))}else if(1===n){if(t.available()<4)throw new Nr;var a=t.readBits(4);if(a>=10)throw new Nr;r.append(e.toAlphaNumericChar(a))}},e.parseECIValue=function(e){var t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new Nr},e.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.GB2312_SUBSET=1,e}();const Sa=Ea;const Aa=function(){function e(e){this.mirrored=e}return e.prototype.isMirrored=function(){return this.mirrored},e.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},e}();var Na=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ia=function(){function e(){this.rsDecoder=new vn(hn.QR_CODE_FIELD_256)}return e.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Br.parseFromBooleanArray(e),t)},e.prototype.decodeBitMatrix=function(e,t){var r=new ya(e),n=null;try{return this.decodeBitMatrixParser(r,t)}catch(Au){n=Au}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new Aa(!0)),o}catch(Au){if(null!==n)throw n;throw Au}},e.prototype.decodeBitMatrixParser=function(e,t){var r,n,o,i,a=e.readVersion(),s=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),c=ba.getDataBlocks(l,a,s),u=0;try{for(var d=Na(c),f=d.next();!f.done;f=d.next()){u+=(y=f.value).getNumDataCodewords()}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}var h=new Uint8Array(u),p=0;try{for(var g=Na(c),m=g.next();!m.done;m=g.next()){var y,v=(y=m.value).getCodewords(),w=y.getNumDataCodewords();this.correctErrors(v,w);for(var b=0;b<w;b++)h[p++]=v[b]}}catch(C){o={error:C}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}return Sa.decode(h,a,s,t)},e.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(o){throw new dr}for(var n=0;n<t;n++)e[n]=r[n]},e}();const ka=Ia;var Ta=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Oa=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o.estimatedModuleSize=n,o}return Ta(t,e),t.prototype.aboutEquals=function(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){var n=Math.abs(e-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,n){return new t((this.getX()+r)/2,(this.getY()+e)/2,(this.estimatedModuleSize+n)/2)},t}(_n);var Ra=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ma=function(){function e(e,t,r,n,o,i,a){this.image=e,this.startX=t,this.startY=r,this.width=n,this.height=o,this.moduleSize=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return e.prototype.find=function(){for(var e=this.startX,t=this.height,r=e+this.width,n=this.startY+t/2,o=new Int32Array(3),i=this.image,a=0;a<t;a++){var s=n+(0===(1&a)?Math.floor((a+1)/2):-Math.floor((a+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var l=e;l<r&&!i.get(l,s);)l++;for(var c=0;l<r;){if(i.get(l,s))if(1===c)o[1]++;else if(2===c){var u;if(this.foundPatternCross(o))if(null!==(u=this.handlePossibleCenter(o,s,l)))return u;o[0]=o[2],o[1]=1,o[2]=0,c=1}else o[++c]++;else 1===c&&c++,o[c]++;l++}if(this.foundPatternCross(o))if(null!==(u=this.handlePossibleCenter(o,s,r)))return u}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new Fr},e.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},e.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,n=0;n<3;n++)if(Math.abs(t-e[n])>=r)return!1;return!0},e.prototype.crossCheckVertical=function(t,r,n,o){var i=this.image,a=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=t;l>=0&&i.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!i.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=t+1;l<a&&i.get(r,l)&&s[1]<=n;)s[1]++,l++;if(l===a||s[1]>n)return NaN;for(;l<a&&!i.get(r,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var c=s[0]+s[1]+s[2];return 5*Math.abs(c-o)>=2*o?NaN:this.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.handlePossibleCenter=function(t,r,n){var o,i,a=t[0]+t[1]+t[2],s=e.centerFromEnd(t,n),l=this.crossCheckVertical(r,s,2*t[1],a);if(!isNaN(l)){var c=(t[0]+t[1]+t[2])/3;try{for(var u=Ra(this.possibleCenters),d=u.next();!d.done;d=u.next()){var f=d.value;if(f.aboutEquals(c,l,s))return f.combineEstimate(l,s,c)}}catch(p){o={error:p}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}var h=new Oa(s,l,c);this.possibleCenters.push(h),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},e}();const Pa=Ma;var ja=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Da=function(e){function t(t,r,n,o){var i=e.call(this,t,r)||this;return i.estimatedModuleSize=n,i.count=o,void 0===o&&(i.count=1),i}return ja(t,e),t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){var n=Math.abs(e-this.estimatedModuleSize);return n<=1||n<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,n){var o=this.count+1;return new t((this.count*this.getX()+r)/o,(this.count*this.getY()+e)/o,(this.count*this.estimatedModuleSize+n)/o,o)},t}(_n);const Ba=Da;const La=function(){function e(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e}();var Fa=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ua=function(){function e(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return e.prototype.getImage=function(){return this.image},e.prototype.getPossibleCenters=function(){return this.possibleCenters},e.prototype.find=function(t){var r=null!==t&&void 0!==t&&void 0!==t.get(Sr.TRY_HARDER),n=null!==t&&void 0!==t&&void 0!==t.get(Sr.PURE_BARCODE),o=this.image,i=o.getHeight(),a=o.getWidth(),s=Math.floor(3*i/(4*e.MAX_MODULES));(s<e.MIN_SKIP||r)&&(s=e.MIN_SKIP);for(var l=!1,c=new Int32Array(5),u=s-1;u<i&&!l;u+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var d=0,f=0;f<a;f++)if(o.get(f,u))1===(1&d)&&d++,c[d]++;else if(0===(1&d))if(4===d)if(e.foundPatternCross(c)){if(!0!==this.handlePossibleCenter(c,u,f,n)){c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,d=3;continue}if(s=2,!0===this.hasSkipped)l=this.haveMultiplyConfirmedCenters();else{var h=this.findRowSkip();h>c[2]&&(u+=h-c[2]-s,f=a-1)}d=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,d=3;else c[++d]++;else c[d]++;if(e.foundPatternCross(c))!0===this.handlePossibleCenter(c,u,a,n)&&(s=c[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}var p=this.selectBestPatterns();return _n.orderBestPatterns(p),new La(p)},e.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},e.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var n=e[r];if(0===n)return!1;t+=n}if(t<7)return!1;var o=t/7,i=o/2;return Math.abs(o-e[0])<i&&Math.abs(o-e[1])<i&&Math.abs(3*o-e[2])<3*i&&Math.abs(o-e[3])<i&&Math.abs(o-e[4])<i},e.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},e.prototype.crossCheckDiagonal=function(t,r,n,o){for(var i=this.getCrossCheckStateCount(),a=0,s=this.image;t>=a&&r>=a&&s.get(r-a,t-a);)i[2]++,a++;if(t<a||r<a)return!1;for(;t>=a&&r>=a&&!s.get(r-a,t-a)&&i[1]<=n;)i[1]++,a++;if(t<a||r<a||i[1]>n)return!1;for(;t>=a&&r>=a&&s.get(r-a,t-a)&&i[0]<=n;)i[0]++,a++;if(i[0]>n)return!1;var l=s.getHeight(),c=s.getWidth();for(a=1;t+a<l&&r+a<c&&s.get(r+a,t+a);)i[2]++,a++;if(t+a>=l||r+a>=c)return!1;for(;t+a<l&&r+a<c&&!s.get(r+a,t+a)&&i[3]<n;)i[3]++,a++;if(t+a>=l||r+a>=c||i[3]>=n)return!1;for(;t+a<l&&r+a<c&&s.get(r+a,t+a)&&i[4]<n;)i[4]++,a++;if(i[4]>=n)return!1;var u=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(u-o)<2*o&&e.foundPatternCross(i)},e.prototype.crossCheckVertical=function(t,r,n,o){for(var i=this.image,a=i.getHeight(),s=this.getCrossCheckStateCount(),l=t;l>=0&&i.get(r,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&i.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=t+1;l<a&&i.get(r,l);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!i.get(r,l)&&s[3]<n;)s[3]++,l++;if(l===a||s[3]>=n)return NaN;for(;l<a&&i.get(r,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-o)>=2*o?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.crossCheckHorizontal=function(t,r,n,o){for(var i=this.image,a=i.getWidth(),s=this.getCrossCheckStateCount(),l=t;l>=0&&i.get(l,r);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(l,r)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&i.get(l,r)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=t+1;l<a&&i.get(l,r);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!i.get(l,r)&&s[3]<n;)s[3]++,l++;if(l===a||s[3]>=n)return NaN;for(;l<a&&i.get(l,r)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-o)>=o?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.handlePossibleCenter=function(t,r,n,o){var i=t[0]+t[1]+t[2]+t[3]+t[4],a=e.centerFromEnd(t,n),s=this.crossCheckVertical(r,Math.floor(a),t[2],i);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),t[2],i),!isNaN(a)&&(!o||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),t[2],i)))){for(var l=i/7,c=!1,u=this.possibleCenters,d=0,f=u.length;d<f;d++){var h=u[d];if(h.aboutEquals(l,s,a)){u[d]=h.combineEstimate(s,a,l),c=!0;break}}if(!c){var p=new Ba(a,s,l);u.push(p),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},e.prototype.findRowSkip=function(){var t,r;if(this.possibleCenters.length<=1)return 0;var n=null;try{for(var o=Fa(this.possibleCenters),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.getCount()>=e.CENTER_QUORUM){if(null!=n)return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-a.getX())-Math.abs(n.getY()-a.getY()))/2);n=a}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return 0},e.prototype.haveMultiplyConfirmedCenters=function(){var t,r,n,o,i=0,a=0,s=this.possibleCenters.length;try{for(var l=Fa(this.possibleCenters),c=l.next();!c.done;c=l.next()){(p=c.value).getCount()>=e.CENTER_QUORUM&&(i++,a+=p.getEstimatedModuleSize())}}catch(g){t={error:g}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}if(i<3)return!1;var u=a/s,d=0;try{for(var f=Fa(this.possibleCenters),h=f.next();!h.done;h=f.next()){var p=h.value;d+=Math.abs(p.getEstimatedModuleSize()-u)}}catch(m){n={error:m}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}return d<=.05*a},e.prototype.selectBestPatterns=function(){var e,t,r,n,o=this.possibleCenters.length;if(o<3)throw new Fr;var i,a=this.possibleCenters;if(o>3){var s=0,l=0;try{for(var c=Fa(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value.getEstimatedModuleSize();s+=d,l+=d*d}}catch(v){e={error:v}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}i=s/o;var f=Math.sqrt(l/o-i*i);a.sort(function(e,t){var r=Math.abs(t.getEstimatedModuleSize()-i),n=Math.abs(e.getEstimatedModuleSize()-i);return r<n?-1:r>n?1:0});for(var h=Math.max(.2*i,f),p=0;p<a.length&&a.length>3;p++){var g=a[p];Math.abs(g.getEstimatedModuleSize()-i)>h&&(a.splice(p,1),p--)}}if(a.length>3){s=0;try{for(var m=Fa(a),y=m.next();!y.done;y=m.next()){s+=y.value.getEstimatedModuleSize()}}catch(w){r={error:w}}finally{try{y&&!y.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}i=s/a.length,a.sort(function(e,t){if(t.getCount()===e.getCount()){var r=Math.abs(t.getEstimatedModuleSize()-i),n=Math.abs(e.getEstimatedModuleSize()-i);return r<n?1:r>n?-1:0}return t.getCount()-e.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},e.CENTER_QUORUM=2,e.MIN_SKIP=3,e.MAX_MODULES=57,e}();const za=Ua;var Va=function(){function e(e){this.image=e}return e.prototype.getImage=function(){return this.image},e.prototype.getResultPointCallback=function(){return this.resultPointCallback},e.prototype.detect=function(e){this.resultPointCallback=null===e||void 0===e?null:e.get(Sr.NEED_RESULT_POINT_CALLBACK);var t=new za(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)},e.prototype.processFinderPatternInfo=function(t){var r=t.getTopLeft(),n=t.getTopRight(),o=t.getBottomLeft(),i=this.calculateModuleSize(r,n,o);if(i<1)throw new Fr("No pattern found in proccess finder.");var a=e.computeDimension(r,n,o,i),s=ha.getProvisionalVersionForDimension(a),l=s.getDimensionForVersion()-7,c=null;if(s.getAlignmentPatternCenters().length>0)for(var u=n.getX()-r.getX()+o.getX(),d=n.getY()-r.getY()+o.getY(),f=1-3/l,h=Math.floor(r.getX()+f*(u-r.getX())),p=Math.floor(r.getY()+f*(d-r.getY())),g=4;g<=16;g<<=1)try{c=this.findAlignmentInRegion(i,h,p,g);break}catch(v){if(!(v instanceof Fr))throw v}var m=e.createTransform(r,n,o,c,a),y=e.sampleGrid(this.image,m,a);return new En(y,null===c?[o,r,n]:[o,r,n,c])},e.createTransform=function(e,t,r,n,o){var i,a,s,l,c=o-3.5;return null!==n?(i=n.getX(),a=n.getY(),l=s=c-3):(i=t.getX()-e.getX()+r.getX(),a=t.getY()-e.getY()+r.getY(),s=c,l=c),kn.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,s,l,3.5,c,e.getX(),e.getY(),t.getX(),t.getY(),i,a,r.getX(),r.getY())},e.sampleGrid=function(e,t,r){return Rn.getInstance().sampleGridWithTransform(e,r,r,t)},e.computeDimension=function(e,t,r,n){var o=xn.round(_n.distance(e,t)/n),i=xn.round(_n.distance(e,r)/n),a=Math.floor((o+i)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new Fr("Dimensions could be not found.")}return a},e.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},e.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14},e.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,n){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,n),i=1,a=e-(r-e);a<0?(i=e/(e-a),a=0):a>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var s=Math.floor(t-(n-t)*i);return i=1,s<0?(i=t/(t-s),s=0):s>=this.image.getHeight()&&(i=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),a=Math.floor(e+(a-e)*i),(o+=this.sizeOfBlackWhiteBlackRun(e,t,a,s))-1},e.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,n){var o=Math.abs(n-t)>Math.abs(r-e);if(o){var i=e;e=t,t=i,i=r,r=n,n=i}for(var a=Math.abs(r-e),s=Math.abs(n-t),l=-a/2,c=e<r?1:-1,u=t<n?1:-1,d=0,f=r+c,h=e,p=t;h!==f;h+=c){var g=o?p:h,m=o?h:p;if(1===d===this.image.get(g,m)){if(2===d)return xn.distance(h,p,e,t);d++}if((l+=s)>0){if(p===n)break;p+=u,l-=a}}return 2===d?xn.distance(r+c,n,e,t):NaN},e.prototype.findAlignmentInRegion=function(e,t,r,n){var o=Math.floor(n*e),i=Math.max(0,t-o),a=Math.min(this.image.getWidth()-1,t+o);if(a-i<3*e)throw new Fr("Alignment top exceeds estimated module size.");var s=Math.max(0,r-o),l=Math.min(this.image.getHeight()-1,r+o);if(l-s<3*e)throw new Fr("Alignment bottom exceeds estimated module size.");return new Pa(this.image,i,s,a-i,l-s,e,this.resultPointCallback).find()},e}();const Ha=Va;const Wa=function(){function e(){this.decoder=new ka}return e.prototype.getDecoder=function(){return this.decoder},e.prototype.decode=function(t,r){var n,o;if(void 0!==r&&null!==r&&void 0!==r.get(Sr.PURE_BARCODE)){var i=e.extractPureBits(t.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,r),o=e.NO_POINTS}else{var a=new Ha(t.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(a.getBits(),r),o=a.getPoints()}n.getOther()instanceof Aa&&n.getOther().applyMirroredCorrection(o);var s=new tn(n.getText(),n.getRawBytes(),void 0,o,nn.QR_CODE,void 0),l=n.getByteSegments();null!==l&&s.putMetadata(an.BYTE_SEGMENTS,l);var c=n.getECLevel();return null!==c&&s.putMetadata(an.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(s.putMetadata(an.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(an.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null===t||null===r)throw new Fr;var n=this.moduleSize(t,e),o=t[1],i=r[1],a=t[0],s=r[0];if(a>=s||o>=i)throw new Fr;if(i-o!==s-a&&(s=a+(i-o))>=e.getWidth())throw new Fr;var l=Math.round((s-a+1)/n),c=Math.round((i-o+1)/n);if(l<=0||c<=0)throw new Fr;if(c!==l)throw new Fr;var u=Math.floor(n/2);o+=u;var d=(a+=u)+Math.floor((l-1)*n)-s;if(d>0){if(d>u)throw new Fr;a-=d}var f=o+Math.floor((c-1)*n)-i;if(f>0){if(f>u)throw new Fr;o-=f}for(var h=new Br(l,c),p=0;p<c;p++)for(var g=o+Math.floor(p*n),m=0;m<l;m++)e.get(a+Math.floor(m*n),g)&&h.set(m,p);return h},e.moduleSize=function(e,t){for(var r=t.getHeight(),n=t.getWidth(),o=e[0],i=e[1],a=!0,s=0;o<n&&i<r;){if(a!==t.get(o,i)){if(5===++s)break;a=!a}o++,i++}if(o===n||i===r)throw new Fr;return(o-e[0])/7},e.NO_POINTS=new Array,e}();var Ga=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xa=function(){function e(){}return e.prototype.PDF417Common=function(){},e.getBitCountSum=function(e){return xn.sum(e)},e.toIntArray=function(t){var r,n;if(null==t||!t.length)return e.EMPTY_INT_ARRAY;var o=new Int32Array(t.length),i=0;try{for(var a=Ga(t),s=a.next();!s.done;s=a.next()){var l=s.value;o[i++]=l}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},e.getCodeword=function(t){var r=xr.binarySearch(e.SYMBOL_TABLE,262143&t);return r<0?-1:(e.CODEWORD_TABLE[r]-1)%e.NUMBER_OF_CODEWORDS},e.NUMBER_OF_CODEWORDS=929,e.MAX_CODEWORDS_IN_BARCODE=e.NUMBER_OF_CODEWORDS-1,e.MIN_ROWS_IN_BARCODE=3,e.MAX_ROWS_IN_BARCODE=90,e.MODULES_IN_CODEWORD=17,e.MODULES_IN_STOP_PATTERN=18,e.BARS_IN_MODULE=8,e.EMPTY_INT_ARRAY=new Int32Array([]),e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),e}();const Ya=Xa;const Ka=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}();var Za=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qa=function(){function e(){}return e.detectMultiple=function(t,r,n){var o=t.getBlackMatrix(),i=e.detect(n,o);return i.length||((o=o.clone()).rotate180(),i=e.detect(n,o)),new Ka(o,i)},e.detect=function(t,r){for(var n,o,i=new Array,a=0,s=0,l=!1;a<r.getHeight();){var c=e.findVertices(r,a,s);if(null!=c[0]||null!=c[3]){if(l=!0,i.push(c),!t)break;null!=c[2]?(s=Math.trunc(c[2].getX()),a=Math.trunc(c[2].getY())):(s=Math.trunc(c[4].getX()),a=Math.trunc(c[4].getY()))}else{if(!l)break;l=!1,s=0;try{for(var u=(n=void 0,Za(i)),d=u.next();!d.done;d=u.next()){var f=d.value;null!=f[1]&&(a=Math.trunc(Math.max(a,f[1].getY()))),null!=f[3]&&(a=Math.max(a,Math.trunc(f[3].getY())))}}catch(h){n={error:h}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}a+=e.ROW_STEP}}return i},e.findVertices=function(t,r,n){var o=t.getHeight(),i=t.getWidth(),a=new Array(8);return e.copyToResult(a,e.findRowsWithPattern(t,o,i,r,n,e.START_PATTERN),e.INDEXES_START_PATTERN),null!=a[4]&&(n=Math.trunc(a[4].getX()),r=Math.trunc(a[4].getY())),e.copyToResult(a,e.findRowsWithPattern(t,o,i,r,n,e.STOP_PATTERN),e.INDEXES_STOP_PATTERN),a},e.copyToResult=function(e,t,r){for(var n=0;n<r.length;n++)e[r[n]]=t[n]},e.findRowsWithPattern=function(t,r,n,o,i,a){for(var s=new Array(4),l=!1,c=new Int32Array(a.length);o<r;o+=e.ROW_STEP){if(null!=(h=e.findGuardPattern(t,i,o,n,!1,a,c))){for(;o>0;){if(null==(f=e.findGuardPattern(t,i,--o,n,!1,a,c))){o++;break}h=f}s[0]=new _n(h[0],o),s[1]=new _n(h[1],o),l=!0;break}}var u=o+1;if(l){for(var d=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);u<r;u++){var h;if(null!=(h=e.findGuardPattern(t,f[0],u,n,!1,a,c))&&Math.abs(f[0]-h[0])<e.MAX_PATTERN_DRIFT&&Math.abs(f[1]-h[1])<e.MAX_PATTERN_DRIFT)f=h,d=0;else{if(d>e.SKIPPED_ROW_COUNT_MAX)break;d++}}u-=d+1,s[2]=new _n(f[0],u),s[3]=new _n(f[1],u)}return u-o<e.BARCODE_MIN_HEIGHT&&xr.fill(s,null),s},e.findGuardPattern=function(t,r,n,o,i,a,s){xr.fillWithin(s,0,s.length,0);for(var l=r,c=0;t.get(l,n)&&l>0&&c++<e.MAX_PIXEL_DRIFT;)l--;for(var u=l,d=0,f=a.length,h=i;u<o;u++){if(t.get(u,n)!==h)s[d]++;else{if(d===f-1){if(e.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return new Int32Array([l,u]);l+=s[0]+s[1],pr.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,h=!h}}return d===f-1&&e.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE?new Int32Array([l,u-1]):null},e.patternMatchVariance=function(e,t,r){for(var n=e.length,o=0,i=0,a=0;a<n;a++)o+=e[a],i+=t[a];if(o<i)return 1/0;var s=o/i;r*=s;for(var l=0,c=0;c<n;c++){var u=e[c],d=t[c]*s,f=u>d?u-d:d-u;if(f>r)return 1/0;l+=f}return l/o},e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),e.MAX_AVG_VARIANCE=.42,e.MAX_INDIVIDUAL_VARIANCE=.8,e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),e.MAX_PIXEL_DRIFT=3,e.MAX_PATTERN_DRIFT=5,e.SKIPPED_ROW_COUNT_MAX=25,e.ROW_STEP=5,e.BARCODE_MIN_HEIGHT=10,e}();const $a=qa;var Qa=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ja=function(){function e(e,t){if(0===t.length)throw new lr;this.field=e;var r=t.length;if(r>1&&0===t[0]){for(var n=1;n<r&&0===t[n];)n++;n===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-n),pr.arraycopy(t,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){var t,r;if(0===e)return this.getCoefficient(0);if(1===e){var n=0;try{for(var o=Qa(this.coefficients),i=o.next();!i.done;i=o.next()){var a=i.value;n=this.field.add(n,a)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n}for(var s=this.coefficients[0],l=this.coefficients.length,c=1;c<l;c++)s=this.field.add(this.field.multiply(e,s),this.coefficients[c]);return s},e.prototype.add=function(t){if(!this.field.equals(t.field))throw new lr("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var r=this.coefficients,n=t.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var i=new Int32Array(n.length),a=n.length-r.length;pr.arraycopy(n,0,i,0,a);for(var s=a;s<n.length;s++)i[s]=this.field.add(r[s-a],n[s]);return new e(this.field,i)},e.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new lr("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},e.prototype.multiply=function(t){return t instanceof e?this.multiplyOther(t):this.multiplyScalar(t)},e.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new lr("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new e(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,o=t.coefficients,i=o.length,a=new Int32Array(n+i-1),s=0;s<n;s++)for(var l=r[s],c=0;c<i;c++)a[s+c]=this.field.add(a[s+c],this.field.multiply(l,o[c]));return new e(this.field,a)},e.prototype.negative=function(){for(var t=this.coefficients.length,r=new Int32Array(t),n=0;n<t;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new e(this.field,r)},e.prototype.multiplyScalar=function(t){if(0===t)return new e(this.field,new Int32Array([0]));if(1===t)return this;for(var r=this.coefficients.length,n=new Int32Array(r),o=0;o<r;o++)n[o]=this.field.multiply(this.coefficients[o],t);return new e(this.field,n)},e.prototype.multiplyByMonomial=function(t,r){if(t<0)throw new lr;if(0===r)return new e(this.field,new Int32Array([0]));for(var n=this.coefficients.length,o=new Int32Array(n+t),i=0;i<n;i++)o[i]=this.field.multiply(this.coefficients[i],r);return new e(this.field,o)},e.prototype.toString=function(){for(var e=new Dr,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);0!==r&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),0!==t&&1===r||e.append(r),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},e}();const es=Ja;const ts=function(){function e(){}return e.prototype.add=function(e,t){return(e+t)%this.modulus},e.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new lr;return this.logTable[e]},e.prototype.inverse=function(e){if(0===e)throw new dn;return this.expTable[this.modulus-this.logTable[e]-1]},e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},e.prototype.getSize=function(){return this.modulus},e.prototype.equals=function(e){return e===this},e}();var rs=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const ns=function(e){function t(t,r){var n=e.call(this)||this;n.modulus=t,n.expTable=new Int32Array(t),n.logTable=new Int32Array(t);for(var o=1,i=0;i<t;i++)n.expTable[i]=o,o=o*r%t;for(i=0;i<t-1;i++)n.logTable[n.expTable[i]]=i;return n.zero=new es(n,new Int32Array([0])),n.one=new es(n,new Int32Array([1])),n}return rs(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new lr;if(0===t)return this.zero;var r=new Int32Array(e+1);return r[0]=t,new es(this,r)},t.PDF417_GF=new t(Ya.NUMBER_OF_CODEWORDS,3),t}(ts);var os=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},is=function(){function e(){this.field=ns.PDF417_GF}return e.prototype.decode=function(e,t,r){for(var n,o,i=new es(this.field,e),a=new Int32Array(t),s=!1,l=t;l>0;l--){var c=i.evaluateAt(this.field.exp(l));a[t-l]=c,0!==c&&(s=!0)}if(!s)return 0;var u=this.field.getOne();if(null!=r)try{for(var d=os(r),f=d.next();!f.done;f=d.next()){var h=f.value,p=this.field.exp(e.length-1-h),g=new es(this.field,new Int32Array([this.field.subtract(0,p),1]));u=u.multiply(g)}}catch(_){n={error:_}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}var m=new es(this.field,a),y=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),m,t),v=y[0],w=y[1],b=this.findErrorLocations(v),x=this.findErrorMagnitudes(w,v,b);for(l=0;l<b.length;l++){var C=e.length-1-this.field.log(b[l]);if(C<0)throw dr.getChecksumInstance();e[C]=this.field.subtract(e[C],x[l])}return b.length},e.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var n=e;e=t,t=n}for(var o=e,i=t,a=this.field.getZero(),s=this.field.getOne();i.getDegree()>=Math.round(r/2);){var l=o,c=a;if(a=s,(o=i).isZero())throw dr.getChecksumInstance();i=l;for(var u=this.field.getZero(),d=o.getCoefficient(o.getDegree()),f=this.field.inverse(d);i.getDegree()>=o.getDegree()&&!i.isZero();){var h=i.getDegree()-o.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),f);u=u.add(this.field.buildMonomial(h,p)),i=i.subtract(o.multiplyByMonomial(h,p))}s=u.multiply(a).subtract(c).negative()}var g=s.getCoefficient(0);if(0===g)throw dr.getChecksumInstance();var m=this.field.inverse(g);return[s.multiply(m),i.multiply(m)]},e.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),n=0,o=1;o<this.field.getSize()&&n<t;o++)0===e.evaluateAt(o)&&(r[n]=this.field.inverse(o),n++);if(n!==t)throw dr.getChecksumInstance();return r},e.prototype.findErrorMagnitudes=function(e,t,r){for(var n=t.getDegree(),o=new Int32Array(n),i=1;i<=n;i++)o[n-i]=this.field.multiply(i,t.getCoefficient(i));var a=new es(this.field,o),s=r.length,l=new Int32Array(s);for(i=0;i<s;i++){var c=this.field.inverse(r[i]),u=this.field.subtract(0,e.evaluateAt(c)),d=this.field.inverse(a.evaluateAt(c));l[i]=this.field.multiply(u,d)}return l},e}();const as=is;const ss=function(){function e(t,r,n,o,i){t instanceof e?this.constructor_2(t):this.constructor_1(t,r,n,o,i)}return e.prototype.constructor_1=function(e,t,r,n,o){var i=null==t||null==r,a=null==n||null==o;if(i&&a)throw new Fr;i?(t=new _n(0,n.getY()),r=new _n(0,o.getY())):a&&(n=new _n(e.getWidth()-1,t.getY()),o=new _n(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=n,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},e.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},e.merge=function(t,r){return null==t?r:null==r?t:new e(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)},e.prototype.addMissingRows=function(t,r,n){var o=this.topLeft,i=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(t>0){var l=n?this.topLeft:this.topRight,c=Math.trunc(l.getY()-t);c<0&&(c=0);var u=new _n(l.getX(),c);n?o=u:a=u}if(r>0){var d=n?this.bottomLeft:this.bottomRight,f=Math.trunc(d.getY()+r);f>=this.image.getHeight()&&(f=this.image.getHeight()-1);var h=new _n(d.getX(),f);n?i=h:s=h}return new e(this.image,o,i,a,s)},e.prototype.getMinX=function(){return this.minX},e.prototype.getMaxX=function(){return this.maxX},e.prototype.getMinY=function(){return this.minY},e.prototype.getMaxY=function(){return this.maxY},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getBottomRight=function(){return this.bottomRight},e}();const ls=function(){function e(e,t,r,n){this.columnCount=e,this.errorCorrectionLevel=n,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return e.prototype.getColumnCount=function(){return this.columnCount},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getRowCount=function(){return this.rowCount},e.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},e.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},e}();const cs=function(){function e(){this.buffer=""}return e.form=function(e,t){var r=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,n,o,i,a,s){if("%%"===e)return"%";if(void 0!==t[++r]){e=i?parseInt(i.substr(1)):void 0;var l,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=t[r];break;case"c":l=t[r][0];break;case"f":l=parseFloat(t[r]).toFixed(e);break;case"p":l=parseFloat(t[r]).toPrecision(e);break;case"e":l=parseFloat(t[r]).toExponential(e);break;case"x":l=parseInt(t[r]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[r],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);for(var u=parseInt(o),d=o&&o[0]+""==="0"?"0":" ";l.length<u;)l=void 0!==n?l+d:d+l;return l}})},e.prototype.format=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=e.form(t,r)},e.prototype.toString=function(){return this.buffer},e}();var us=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ds=function(){function e(e){this.boundingBox=new ss(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return e.prototype.getCodewordNearby=function(t){var r=this.getCodeword(t);if(null!=r)return r;for(var n=1;n<e.MAX_NEARBY_DISTANCE;n++){var o=this.imageRowToCodewordIndex(t)-n;if(o>=0&&null!=(r=this.codewords[o]))return r;if((o=this.imageRowToCodewordIndex(t)+n)<this.codewords.length&&null!=(r=this.codewords[o]))return r}return null},e.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},e.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},e.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.getCodewords=function(){return this.codewords},e.prototype.toString=function(){var e,t,r=new cs,n=0;try{for(var o=us(this.codewords),i=o.next();!i.done;i=o.next()){var a=i.value;null!=a?r.format("%3d: %3d|%3d%n",n++,a.getRowNumber(),a.getValue()):r.format("%3d:    |   %n",n++)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},e.MAX_NEARBY_DISTANCE=5,e}();const fs=ds;var hs=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ps=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},gs=function(){function e(){this.values=new Map}return e.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)},e.prototype.getValue=function(){var e,t,r=-1,n=new Array,o=function(e,t){var o=function(){return e},i=function(){return t};i()>r?(r=i(),(n=[]).push(o())):i()===r&&n.push(o())};try{for(var i=hs(this.values.entries()),a=i.next();!a.done;a=i.next()){var s=ps(a.value,2);o(s[0],s[1])}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return Ya.toIntArray(n)},e.prototype.getConfidence=function(e){return this.values.get(e)},e}();const ms=gs;var ys=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vs=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ws=function(e){function t(t,r){var n=e.call(this,t)||this;return n._isLeft=r,n}return ys(t,e),t.prototype.setRowNumbers=function(){var e,t;try{for(var r=vs(this.getCodewords()),n=r.next();!n.done;n=r.next()){var o=n.value;null!=o&&o.setRowNumberAsRowIndicatorColumn()}}catch(i){e={error:i}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);for(var r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),s=-1,l=1,c=0,u=i;u<a;u++)if(null!=t[u]){var d=t[u],f=d.getRowNumber()-s;if(0===f)c++;else if(1===f)l=Math.max(l,c),c=1,s=d.getRowNumber();else if(f<0||d.getRowNumber()>=e.getRowCount()||f>u)t[u]=null;else{for(var h=void 0,p=(h=l>2?(l-2)*f:f)>=u,g=1;g<=h&&!p;g++)p=null!=t[u-g];p?t[u]=null:(s=d.getRowNumber(),c=1)}}},t.prototype.getRowHeights=function(){var e,t,r=this.getBarcodeMetadata();if(null==r)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);var n=new Int32Array(r.getRowCount());try{for(var o=vs(this.getCodewords()),i=o.next();!i.done;i=o.next()){var a=i.value;if(null!=a){var s=a.getRowNumber();if(s>=n.length)continue;n[s]++}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var t=this.getBoundingBox(),r=this._isLeft?t.getTopLeft():t.getTopRight(),n=this._isLeft?t.getBottomLeft():t.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.getCodewords(),s=-1,l=1,c=0,u=o;u<i;u++)if(null!=a[u]){var d=a[u];d.setRowNumberAsRowIndicatorColumn();var f=d.getRowNumber()-s;0===f?c++:1===f?(l=Math.max(l,c),c=1,s=d.getRowNumber()):d.getRowNumber()>=e.getRowCount()?a[u]=null:(s=d.getRowNumber(),c=1)}},t.prototype.getBarcodeMetadata=function(){var e,t,r=this.getCodewords(),n=new ms,o=new ms,i=new ms,a=new ms;try{for(var s=vs(r),l=s.next();!l.done;l=s.next()){var c=l.value;if(null!=c){c.setRowNumberAsRowIndicatorColumn();var u=c.getValue()%30,d=c.getRowNumber();switch(this._isLeft||(d+=2),d%3){case 0:o.setValue(3*u+1);break;case 1:a.setValue(u/3),i.setValue(u%3);break;case 2:n.setValue(u+1)}}}}catch(h){e={error:h}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}if(0===n.getValue().length||0===o.getValue().length||0===i.getValue().length||0===a.getValue().length||n.getValue()[0]<1||o.getValue()[0]+i.getValue()[0]<Ya.MIN_ROWS_IN_BARCODE||o.getValue()[0]+i.getValue()[0]>Ya.MAX_ROWS_IN_BARCODE)return null;var f=new ls(n.getValue()[0],o.getValue()[0],i.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(r,f),f},t.prototype.removeIncorrectCodewords=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(null!=e[r]){var o=n.getValue()%30,i=n.getRowNumber();if(i>t.getRowCount())e[r]=null;else switch(this._isLeft||(i+=2),i%3){case 0:3*o+1!==t.getRowCountUpperPart()&&(e[r]=null);break;case 1:Math.trunc(o/3)===t.getErrorCorrectionLevel()&&o%3===t.getRowCountLowerPart()||(e[r]=null);break;case 2:o+1!==t.getColumnCount()&&(e[r]=null)}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+e.prototype.toString.call(this)},t}(fs);const bs=ws;var xs=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Cs=function(){function e(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return e.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e,t=Ya.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns},e.prototype.adjustIndicatorColumnRowNumbers=function(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},e.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),n=0;n<r.length;n++)null!=r[n]&&(r[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,r));return e},e.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},e.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(null!=e[r]&&null!=t[r]&&e[r].getRowNumber()===t[r].getRowNumber())for(var n=1;n<=this.barcodeColumnCount;n++){var o=this.detectionResultColumns[n].getCodewords()[r];null!=o&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[n].getCodewords()[r]=null))}},e.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(null!=r[n])for(var o=r[n].getRowNumber(),i=0,a=this.barcodeColumnCount+1;a>0&&i<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[n];null!=s&&(i=e.adjustRowNumberIfValid(o,i,s),s.hasValidRowNumber()||t++)}return t},e.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var t=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(null!=r[n])for(var o=r[n].getRowNumber(),i=0,a=1;a<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[n];null!=s&&(i=e.adjustRowNumberIfValid(o,i,s),s.hasValidRowNumber()||t++)}return t},e.adjustRowNumberIfValid=function(e,t,r){return null==r||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},e.prototype.adjustRowNumbers=function(t,r,n){var o,i;if(null!=this.detectionResultColumns[t-1]){var a=n[r],s=this.detectionResultColumns[t-1].getCodewords(),l=s;null!=this.detectionResultColumns[t+1]&&(l=this.detectionResultColumns[t+1].getCodewords());var c=new Array(14);c[2]=s[r],c[3]=l[r],r>0&&(c[0]=n[r-1],c[4]=s[r-1],c[5]=l[r-1]),r>1&&(c[8]=n[r-2],c[10]=s[r-2],c[11]=l[r-2]),r<n.length-1&&(c[1]=n[r+1],c[6]=s[r+1],c[7]=l[r+1]),r<n.length-2&&(c[9]=n[r+2],c[12]=s[r+2],c[13]=l[r+2]);try{for(var u=xs(c),d=u.next();!d.done;d=u.next()){var f=d.value;if(e.adjustRowNumber(a,f))return}}catch(h){o={error:h}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}},e.adjustRowNumber=function(e,t){return null!=t&&(!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0))},e.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},e.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},e.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},e.prototype.setBoundingBox=function(e){this.boundingBox=e},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},e.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},e.prototype.toString=function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new cs,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var n=0;n<this.barcodeColumnCount+2;n++)if(null!=this.detectionResultColumns[n]){var o=this.detectionResultColumns[n].getCodewords()[r];null!=o?t.format(" %3d|%3d",o.getRowNumber(),o.getValue()):t.format("    |   ")}else t.format("    |   ");t.format("%n")}return t.toString()},e}();const _s=Cs;const Es=function(){function e(t,r,n,o){this.rowNumber=e.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(o)}return e.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},e.prototype.isValidRowNumber=function(t){return t!==e.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},e.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},e.prototype.getWidth=function(){return this.endX-this.startX},e.prototype.getStartX=function(){return this.startX},e.prototype.getEndX=function(){return this.endX},e.prototype.getBucket=function(){return this.bucket},e.prototype.getValue=function(){return this.value},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.setRowNumber=function(e){this.rowNumber=e},e.prototype.toString=function(){return this.rowNumber+"|"+this.value},e.BARCODE_ROW_UNKNOWN=-1,e}();const Ss=function(){function e(){}return e.initialize=function(){for(var t=0;t<Ya.SYMBOL_TABLE.length;t++)for(var r=Ya.SYMBOL_TABLE[t],n=1&r,o=0;o<Ya.BARS_IN_MODULE;o++){for(var i=0;(1&r)===n;)i+=1,r>>=1;n=1&r,e.RATIOS_TABLE[t]||(e.RATIOS_TABLE[t]=new Array(Ya.BARS_IN_MODULE)),e.RATIOS_TABLE[t][Ya.BARS_IN_MODULE-o-1]=Math.fround(i/Ya.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},e.getDecodedValue=function(t){var r=e.getDecodedCodewordValue(e.sampleBitCounts(t));return-1!==r?r:e.getClosestDecodedValue(t)},e.sampleBitCounts=function(e){for(var t=xn.sum(e),r=new Int32Array(Ya.BARS_IN_MODULE),n=0,o=0,i=0;i<Ya.MODULES_IN_CODEWORD;i++){var a=t/(2*Ya.MODULES_IN_CODEWORD)+i*t/Ya.MODULES_IN_CODEWORD;o+e[n]<=a&&(o+=e[n],n++),r[n]++}return r},e.getDecodedCodewordValue=function(t){var r=e.getBitValue(t);return-1===Ya.getCodeword(r)?-1:r},e.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var n=0;n<e[r];n++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},e.getClosestDecodedValue=function(t){var r=xn.sum(t),n=new Array(Ya.BARS_IN_MODULE);if(r>1)for(var o=0;o<n.length;o++)n[o]=Math.fround(t[o]/r);var i=Cn.MAX_VALUE,a=-1;this.bSymbolTableReady||e.initialize();for(var s=0;s<e.RATIOS_TABLE.length;s++){for(var l=0,c=e.RATIOS_TABLE[s],u=0;u<Ya.BARS_IN_MODULE;u++){var d=Math.fround(c[u]-n[u]);if((l+=Math.fround(d*d))>=i)break}l<i&&(i=l,a=Ya.SYMBOL_TABLE[s])}return a},e.bSymbolTableReady=!1,e.RATIOS_TABLE=new Array(Ya.SYMBOL_TABLE.length).map(function(e){return new Array(Ya.BARS_IN_MODULE)}),e}();const As=function(){function e(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return e.prototype.getSegmentIndex=function(){return this.segmentIndex},e.prototype.setSegmentIndex=function(e){this.segmentIndex=e},e.prototype.getFileId=function(){return this.fileId},e.prototype.setFileId=function(e){this.fileId=e},e.prototype.getOptionalData=function(){return this.optionalData},e.prototype.setOptionalData=function(e){this.optionalData=e},e.prototype.isLastSegment=function(){return this.lastSegment},e.prototype.setLastSegment=function(e){this.lastSegment=e},e.prototype.getSegmentCount=function(){return this.segmentCount},e.prototype.setSegmentCount=function(e){this.segmentCount=e},e.prototype.getSender=function(){return this.sender||null},e.prototype.setSender=function(e){this.sender=e},e.prototype.getAddressee=function(){return this.addressee||null},e.prototype.setAddressee=function(e){this.addressee=e},e.prototype.getFileName=function(){return this.fileName},e.prototype.setFileName=function(e){this.fileName=e},e.prototype.getFileSize=function(){return this.fileSize},e.prototype.setFileSize=function(e){this.fileSize=e},e.prototype.getChecksum=function(){return this.checksum},e.prototype.setChecksum=function(e){this.checksum=e},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.setTimestamp=function(e){this.timestamp=e},e}();const Ns=function(){function e(){}return e.parseLong=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e}();var Is=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const ks=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Is(t,e),t.kind="NullPointerException",t}(or);const Ts=function(){function e(){}return e.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},e.prototype.writeBytesOffset=function(e,t,r){if(null==e)throw new ks;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new mr;if(0!==r)for(var n=0;n<r;n++)this.write(e[t+n])},e.prototype.flush=function(){},e.prototype.close=function(){},e}();var Os=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Rs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Os(t,e),t}(or);var Ms=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Ps=function(e){function t(t){void 0===t&&(t=32);var r=e.call(this)||this;if(r.count=0,t<0)throw new lr("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return Ms(t,e),t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new Rs;t=Cr.MAX_VALUE}this.buf=xr.copyOfUint8Array(this.buf,t)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,t,r){if(t<0||t>e.length||r<0||t+r-e.length>0)throw new mr;this.ensureCapacity(this.count+r),pr.arraycopy(e,t,this.buf,this.count,r),this.count+=r},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return xr.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(Ts);var js,Ds;function Bs(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof r.g)return r.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function Ls(e){if("undefined"===typeof Ds&&(Ds=Bs()),null===Ds)throw new Error("BigInt is not supported!");return Ds(e)}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(js||(js={}));var Fs=function(){function e(){}return e.decode=function(t,r){var n=new Dr(""),o=Or.ISO8859_1;n.enableDecoding(o);for(var i=1,a=t[i++],s=new As;i<t[0];){switch(a){case e.TEXT_COMPACTION_MODE_LATCH:i=e.textCompaction(t,i,n);break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:i=e.byteCompaction(a,t,o,i,n);break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[i++]);break;case e.NUMERIC_COMPACTION_MODE_LATCH:i=e.numericCompaction(t,i,n);break;case e.ECI_CHARSET:Or.getCharacterSetECIByValue(t[i++]);break;case e.ECI_GENERAL_PURPOSE:i+=2;break;case e.ECI_USER_DEFINED:i++;break;case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=e.decodeMacroBlock(t,i,s);break;case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:throw new Nr;default:i--,i=e.textCompaction(t,i,n)}if(!(i<t.length))throw Nr.getFormatInstance();a=t[i++]}if(0===n.length())throw Nr.getFormatInstance();var l=new sn(null,n.toString(),null,r);return l.setOther(s),l},e.decodeMacroBlock=function(t,r,n){if(r+e.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw Nr.getFormatInstance();for(var o=new Int32Array(e.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<e.NUMBER_OF_SEQUENCE_CODEWORDS;i++,r++)o[i]=t[r];n.setSegmentIndex(Cr.parseInt(e.decodeBase900toBase10(o,e.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new Dr;r=e.textCompaction(t,r,a),n.setFileId(a.toString());var s=-1;for(t[r]===e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<t[0];)switch(t[r]){case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++r]){case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new Dr;r=e.textCompaction(t,r+1,l),n.setFileName(l.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new Dr;r=e.textCompaction(t,r+1,c),n.setSender(c.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new Dr;r=e.textCompaction(t,r+1,u),n.setAddressee(u.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var d=new Dr;r=e.numericCompaction(t,r+1,d),n.setSegmentCount(Cr.parseInt(d.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var f=new Dr;r=e.numericCompaction(t,r+1,f),n.setTimestamp(Ns.parseLong(f.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new Dr;r=e.numericCompaction(t,r+1,h),n.setChecksum(Cr.parseInt(h.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new Dr;r=e.numericCompaction(t,r+1,p),n.setFileSize(Ns.parseLong(p.toString()));break;default:throw Nr.getFormatInstance()}break;case e.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw Nr.getFormatInstance()}if(-1!==s){var g=r-s;n.isLastSegment()&&g--,n.setOptionalData(xr.copyOfRange(t,s,s+g))}return r},e.textCompaction=function(t,r,n){for(var o=new Int32Array(2*(t[0]-r)),i=new Int32Array(2*(t[0]-r)),a=0,s=!1;r<t[0]&&!s;){var l=t[r++];if(l<e.TEXT_COMPACTION_MODE_LATCH)o[a]=l/30,o[a+1]=l%30,a+=2;else switch(l){case e.TEXT_COMPACTION_MODE_LATCH:o[a++]=e.TEXT_COMPACTION_MODE_LATCH;break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[a]=e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=t[r++],i[a]=l,a++}}return e.decodeTextCompaction(o,i,a,n),r},e.decodeTextCompaction=function(t,r,n,o){for(var i=js.ALPHA,a=js.ALPHA,s=0;s<n;){var l=t[s],c="";switch(i){case js.ALPHA:if(l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case e.LL:i=js.LOWER;break;case e.ML:i=js.MIXED;break;case e.PS:a=i,i=js.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=js.ALPHA}break;case js.LOWER:if(l<26)c=String.fromCharCode(97+l);else switch(l){case 26:c=" ";break;case e.AS:a=i,i=js.ALPHA_SHIFT;break;case e.ML:i=js.MIXED;break;case e.PS:a=i,i=js.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=js.ALPHA}break;case js.MIXED:if(l<e.PL)c=e.MIXED_CHARS[l];else switch(l){case e.PL:i=js.PUNCT;break;case 26:c=" ";break;case e.LL:i=js.LOWER;break;case e.AL:i=js.ALPHA;break;case e.PS:a=i,i=js.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=js.ALPHA}break;case js.PUNCT:if(l<e.PAL)c=e.PUNCT_CHARS[l];else switch(l){case e.PAL:i=js.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=js.ALPHA}break;case js.ALPHA_SHIFT:if(i=a,l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case e.TEXT_COMPACTION_MODE_LATCH:i=js.ALPHA}break;case js.PUNCT_SHIFT:if(i=a,l<e.PAL)c=e.PUNCT_CHARS[l];else switch(l){case e.PAL:i=js.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=js.ALPHA}}""!==c&&o.append(c),s++}},e.byteCompaction=function(t,r,n,o,i){var a=new Ps,s=0,l=0,c=!1;switch(t){case e.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),d=r[o++];o<r[0]&&!c;)switch(u[s++]=d,l=900*l+d,d=r[o++]){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,c=!0;break;default:if(s%5===0&&s>0){for(var f=0;f<6;++f)a.write(Number(Ls(l)>>Ls(8*(5-f))));l=0,s=0}}o===r[0]&&d<e.TEXT_COMPACTION_MODE_LATCH&&(u[s++]=d);for(var h=0;h<s;h++)a.write(u[h]);break;case e.BYTE_COMPACTION_MODE_LATCH_6:for(;o<r[0]&&!c;){var p=r[o++];if(p<e.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+p;else switch(p){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,c=!0}if(s%5===0&&s>0){for(f=0;f<6;++f)a.write(Number(Ls(l)>>Ls(8*(5-f))));l=0,s=0}}}return i.append(Pr.decode(a.toByteArray(),n)),o},e.numericCompaction=function(t,r,n){for(var o=0,i=!1,a=new Int32Array(e.MAX_NUMERIC_CODEWORDS);r<t[0]&&!i;){var s=t[r++];if(r===t[0]&&(i=!0),s<e.TEXT_COMPACTION_MODE_LATCH)a[o]=s,o++;else switch(s){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:r--,i=!0}(o%e.MAX_NUMERIC_CODEWORDS===0||s===e.NUMERIC_COMPACTION_MODE_LATCH||i)&&o>0&&(n.append(e.decodeBase900toBase10(a,o)),o=0)}return r},e.decodeBase900toBase10=function(t,r){for(var n=Ls(0),o=0;o<r;o++)n+=e.EXP900[r-o-1]*Ls(t[o]);var i=n.toString();if("1"!==i.charAt(0))throw new Nr;return i.substring(1)},e.TEXT_COMPACTION_MODE_LATCH=900,e.BYTE_COMPACTION_MODE_LATCH=901,e.NUMERIC_COMPACTION_MODE_LATCH=902,e.BYTE_COMPACTION_MODE_LATCH_6=924,e.ECI_USER_DEFINED=925,e.ECI_GENERAL_PURPOSE=926,e.ECI_CHARSET=927,e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,e.MACRO_PDF417_TERMINATOR=922,e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,e.MAX_NUMERIC_CODEWORDS=15,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,e.PL=25,e.LL=27,e.AS=27,e.ML=28,e.AL=28,e.PS=29,e.PAL=29,e.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",e.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",e.EXP900=Bs()?function(){var e=[];e[0]=Ls(1);var t=Ls(900);e[1]=t;for(var r=2;r<16;r++)e[r]=e[r-1]*t;return e}():[],e.NUMBER_OF_SEQUENCE_CODEWORDS=2,e}();const Us=Fs;var zs=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Vs=function(){function e(){}return e.decode=function(t,r,n,o,i,a,s){for(var l,c=new ss(t,r,n,o,i),u=null,d=null,f=!0;;f=!1){if(null!=r&&(u=e.getRowIndicatorColumn(t,c,r,!0,a,s)),null!=o&&(d=e.getRowIndicatorColumn(t,c,o,!1,a,s)),null==(l=e.merge(u,d)))throw Fr.getNotFoundInstance();var h=l.getBoundingBox();if(!f||null==h||!(h.getMinY()<c.getMinY()||h.getMaxY()>c.getMaxY()))break;c=h}l.setBoundingBox(c);var p=l.getBarcodeColumnCount()+1;l.setDetectionResultColumn(0,u),l.setDetectionResultColumn(p,d);for(var g=null!=u,m=1;m<=p;m++){var y=g?m:p-m;if(void 0===l.getDetectionResultColumn(y)){var v=void 0;v=0===y||y===p?new bs(c,0===y):new fs(c),l.setDetectionResultColumn(y,v);for(var w=-1,b=w,x=c.getMinY();x<=c.getMaxY();x++){if((w=e.getStartColumn(l,y,x,g))<0||w>c.getMaxX()){if(-1===b)continue;w=b}var C=e.detectCodeword(t,c.getMinX(),c.getMaxX(),g,w,x,a,s);null!=C&&(v.setCodeword(x,C),b=w,a=Math.min(a,C.getWidth()),s=Math.max(s,C.getWidth()))}}}return e.createDecoderResult(l)},e.merge=function(t,r){if(null==t&&null==r)return null;var n=e.getBarcodeMetadata(t,r);if(null==n)return null;var o=ss.merge(e.adjustBoundingBox(t),e.adjustBoundingBox(r));return new _s(n,o)},e.adjustBoundingBox=function(t){var r,n;if(null==t)return null;var o=t.getRowHeights();if(null==o)return null;var i=e.getMax(o),a=0;try{for(var s=zs(o),l=s.next();!l.done;l=s.next()){var c=l.value;if(a+=i-c,c>0)break}}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var u=t.getCodewords(),d=0;a>0&&null==u[d];d++)a--;var f=0;for(d=o.length-1;d>=0&&(f+=i-o[d],!(o[d]>0));d--);for(d=u.length-1;f>0&&null==u[d];d--)f--;return t.getBoundingBox().addMissingRows(a,f,t.isLeft())},e.getMax=function(e){var t,r,n=-1;try{for(var o=zs(e),i=o.next();!i.done;i=o.next()){var a=i.value;n=Math.max(n,a)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},e.getBarcodeMetadata=function(e,t){var r,n;return null==e||null==(r=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(n=t.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r},e.getRowIndicatorColumn=function(t,r,n,o,i,a){for(var s=new bs(r,o),l=0;l<2;l++)for(var c=0===l?1:-1,u=Math.trunc(Math.trunc(n.getX())),d=Math.trunc(Math.trunc(n.getY()));d<=r.getMaxY()&&d>=r.getMinY();d+=c){var f=e.detectCodeword(t,0,t.getWidth(),o,u,d,i,a);null!=f&&(s.setCodeword(d,f),u=o?f.getStartX():f.getEndX())}return s},e.adjustCodewordCount=function(t,r){var n=r[0][1],o=n.getValue(),i=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-e.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===o.length){if(i<1||i>Ya.MAX_CODEWORDS_IN_BARCODE)throw Fr.getNotFoundInstance();n.setValue(i)}else o[0]!==i&&n.setValue(i)},e.createDecoderResult=function(t){var r=e.createBarcodeMatrix(t);e.adjustCodewordCount(t,r);for(var n=new Array,o=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),i=[],a=new Array,s=0;s<t.getBarcodeRowCount();s++)for(var l=0;l<t.getBarcodeColumnCount();l++){var c=r[s][l+1].getValue(),u=s*t.getBarcodeColumnCount()+l;0===c.length?n.push(u):1===c.length?o[u]=c[0]:(a.push(u),i.push(c))}for(var d=new Array(i.length),f=0;f<d.length;f++)d[f]=i[f];return e.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),o,Ya.toIntArray(n),Ya.toIntArray(a),d)},e.createDecoderResultFromAmbiguousValues=function(t,r,n,o,i){for(var a=new Int32Array(o.length),s=100;s-- >0;){for(var l=0;l<a.length;l++)r[o[l]]=i[l][a[l]];try{return e.decodeCodewords(r,t,n)}catch(c){if(!(c instanceof dr))throw c}if(0===a.length)throw dr.getChecksumInstance();for(l=0;l<a.length;l++){if(a[l]<i[l].length-1){a[l]++;break}if(a[l]=0,l===a.length-1)throw dr.getChecksumInstance()}}throw dr.getChecksumInstance()},e.createBarcodeMatrix=function(e){for(var t,r,n,o,i=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<i.length;a++)for(var s=0;s<i[a].length;s++)i[a][s]=new ms;var l=0;try{for(var c=zs(e.getDetectionResultColumns()),u=c.next();!u.done;u=c.next()){var d=u.value;if(null!=d)try{for(var f=(n=void 0,zs(d.getCodewords())),h=f.next();!h.done;h=f.next()){var p=h.value;if(null!=p){var g=p.getRowNumber();if(g>=0){if(g>=i.length)continue;i[g][l].setValue(p.getValue())}}}}catch(m){n={error:m}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}l++}}catch(y){t={error:y}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return i},e.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},e.getStartColumn=function(t,r,n,o){var i,a,s=o?1:-1,l=null;if(e.isValidBarcodeColumn(t,r-s)&&(l=t.getDetectionResultColumn(r-s).getCodeword(n)),null!=l)return o?l.getEndX():l.getStartX();if(null!=(l=t.getDetectionResultColumn(r).getCodewordNearby(n)))return o?l.getStartX():l.getEndX();if(e.isValidBarcodeColumn(t,r-s)&&(l=t.getDetectionResultColumn(r-s).getCodewordNearby(n)),null!=l)return o?l.getEndX():l.getStartX();for(var c=0;e.isValidBarcodeColumn(t,r-s);){r-=s;try{for(var u=(i=void 0,zs(t.getDetectionResultColumn(r).getCodewords())),d=u.next();!d.done;d=u.next()){var f=d.value;if(null!=f)return(o?f.getEndX():f.getStartX())+s*c*(f.getEndX()-f.getStartX())}}catch(h){i={error:h}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}c++}return o?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},e.detectCodeword=function(t,r,n,o,i,a,s,l){i=e.adjustCodewordStartColumn(t,r,n,o,i,a);var c,u=e.getModuleBitCount(t,r,n,o,i,a);if(null==u)return null;var d=xn.sum(u);if(o)c=i+d;else{for(var f=0;f<u.length/2;f++){var h=u[f];u[f]=u[u.length-1-f],u[u.length-1-f]=h}i=(c=i)-d}if(!e.checkCodewordSkew(d,s,l))return null;var p=Ss.getDecodedValue(u),g=Ya.getCodeword(p);return-1===g?null:new Es(i,c,e.getCodewordBucketNumber(p),g)},e.getModuleBitCount=function(e,t,r,n,o,i){for(var a=o,s=new Int32Array(8),l=0,c=n?1:-1,u=n;(n?a<r:a>=t)&&l<s.length;)e.get(a,i)===u?(s[l]++,a+=c):(l++,u=!u);return l===s.length||a===(n?r:t)&&l===s.length-1?s:null},e.getNumberOfECCodeWords=function(e){return 2<<e},e.adjustCodewordStartColumn=function(t,r,n,o,i,a){for(var s=i,l=o?-1:1,c=0;c<2;c++){for(;(o?s>=r:s<n)&&o===t.get(s,a);){if(Math.abs(i-s)>e.CODEWORD_SKEW_SIZE)return i;s+=l}l=-l,o=!o}return s},e.checkCodewordSkew=function(t,r,n){return r-e.CODEWORD_SKEW_SIZE<=t&&t<=n+e.CODEWORD_SKEW_SIZE},e.decodeCodewords=function(t,r,n){if(0===t.length)throw Nr.getFormatInstance();var o=1<<r+1,i=e.correctErrors(t,n,o);e.verifyCodewordCount(t,o);var a=Us.decode(t,""+r);return a.setErrorsCorrected(i),a.setErasures(n.length),a},e.correctErrors=function(t,r,n){if(null!=r&&r.length>n/2+e.MAX_ERRORS||n<0||n>e.MAX_EC_CODEWORDS)throw dr.getChecksumInstance();return e.errorCorrection.decode(t,n,r)},e.verifyCodewordCount=function(e,t){if(e.length<4)throw Nr.getFormatInstance();var r=e[0];if(r>e.length)throw Nr.getFormatInstance();if(0===r){if(!(t<e.length))throw Nr.getFormatInstance();e[0]=e.length-t}},e.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,n=t.length-1;!((1&e)!==r&&(r=1&e,--n<0));)t[n]++,e>>=1;return t},e.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},e.getCodewordBucketNumber_number=function(t){return e.getCodewordBucketNumber(e.getBitCountForCodeword(t))},e.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},e.toString=function(e){for(var t=new cs,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var n=0;n<e[r].length;n++){var o=e[r][n];0===o.getValue().length?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},e.CODEWORD_SKEW_SIZE=2,e.MAX_ERRORS=3,e.MAX_EC_CODEWORDS=512,e.errorCorrection=new as,e}();const Hs=Vs;var Ws=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gs=function(){function e(){}return e.prototype.decode=function(t,r){void 0===r&&(r=null);var n=e.decode(t,r,!1);if(null==n||0===n.length||null==n[0])throw Fr.getNotFoundInstance();return n[0]},e.prototype.decodeMultiple=function(t,r){void 0===r&&(r=null);try{return e.decode(t,r,!0)}catch(n){if(n instanceof Nr||n instanceof dr)throw Fr.getNotFoundInstance();throw n}},e.decode=function(t,r,n){var o,i,a=new Array,s=$a.detectMultiple(t,r,n);try{for(var l=Ws(s.getPoints()),c=l.next();!c.done;c=l.next()){var u=c.value,d=Hs.decode(s.getBits(),u[4],u[5],u[6],u[7],e.getMinCodewordWidth(u),e.getMaxCodewordWidth(u)),f=new tn(d.getText(),d.getRawBytes(),void 0,u,nn.PDF_417);f.putMetadata(an.ERROR_CORRECTION_LEVEL,d.getECLevel());var h=d.getOther();null!=h&&f.putMetadata(an.PDF417_EXTRA_METADATA,h),a.push(f)}}catch(p){o={error:p}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}return a.map(function(e){return e})},e.getMaxWidth=function(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMinWidth=function(e,t){return null==e||null==t?Cr.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(e.getMaxWidth(t[0],t[4]),e.getMaxWidth(t[6],t[2])*Ya.MODULES_IN_CODEWORD/Ya.MODULES_IN_STOP_PATTERN),Math.max(e.getMaxWidth(t[1],t[5]),e.getMaxWidth(t[7],t[3])*Ya.MODULES_IN_CODEWORD/Ya.MODULES_IN_STOP_PATTERN)))},e.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(e.getMinWidth(t[0],t[4]),e.getMinWidth(t[6],t[2])*Ya.MODULES_IN_CODEWORD/Ya.MODULES_IN_STOP_PATTERN),Math.min(e.getMinWidth(t[1],t[5]),e.getMinWidth(t[7],t[3])*Ya.MODULES_IN_CODEWORD/Ya.MODULES_IN_STOP_PATTERN)))},e.prototype.reset=function(){},e}();const Xs=Gs;var Ys=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const Ks=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ys(t,e),t.kind="ReaderException",t}(or);var Zs=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qs=function(){function e(){}return e.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},e.prototype.decodeWithState=function(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)},e.prototype.setHints=function(e){this.hints=e;var t=null!==e&&void 0!==e&&void 0!==e.get(Sr.TRY_HARDER),r=null===e||void 0===e?null:e.get(Sr.POSSIBLE_FORMATS),n=new Array;if(null!==r&&void 0!==r){var o=r.some(function(e){return e===nn.UPC_A||e===nn.UPC_E||e===nn.EAN_13||e===nn.EAN_8||e===nn.CODABAR||e===nn.CODE_39||e===nn.CODE_93||e===nn.CODE_128||e===nn.ITF||e===nn.RSS_14||e===nn.RSS_EXPANDED});o&&!t&&n.push(new Pi(e)),r.includes(nn.QR_CODE)&&n.push(new Wa),r.includes(nn.DATA_MATRIX)&&n.push(new Ji),r.includes(nn.AZTEC)&&n.push(new jn),r.includes(nn.PDF_417)&&n.push(new Xs),o&&t&&n.push(new Pi(e))}0===n.length&&(t||n.push(new Pi(e)),n.push(new Wa),n.push(new Ji),n.push(new jn),n.push(new Xs),t&&n.push(new Pi(e))),this.readers=n},e.prototype.reset=function(){var e,t;if(null!==this.readers)try{for(var r=Zs(this.readers),n=r.next();!n.done;n=r.next()){n.value.reset()}}catch(o){e={error:o}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype.decodeInternal=function(e){var t,r;if(null===this.readers)throw new Ks("No readers where selected, nothing can be read.");try{for(var n=Zs(this.readers),o=n.next();!o.done;o=n.next()){var i=o.value;try{return i.decode(e,this.hints)}catch(a){if(a instanceof Ks)continue}}}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}throw new Fr("No MultiFormat Readers were able to detect the code.")},e}();const $s=qs;var Qs,Js=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),el=(function(e){function t(t,r){void 0===t&&(t=null),void 0===r&&(r=500);var n=new $s;return n.setHints(t),e.call(this,n,r)||this}Js(t,e),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)}}(Jr),function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),tl=(function(e){function t(t){return void 0===t&&(t=500),e.call(this,new Xs,t)||this}el(t,e)}(Jr),function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}());!function(e){function t(t){return void 0===t&&(t=500),e.call(this,new Wa,t)||this}tl(t,e)}(Jr);!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",e[e.MIN_SIZE=4]="MIN_SIZE",e[e.MAX_SIZE=5]="MAX_SIZE",e[e.MARGIN=6]="MARGIN",e[e.PDF417_COMPACT=7]="PDF417_COMPACT",e[e.PDF417_COMPACTION=8]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=10]="AZTEC_LAYERS",e[e.QR_VERSION=11]="QR_VERSION",e[e.GS1_FORMAT=12]="GS1_FORMAT",e[e.FORCE_C40=13]="FORCE_C40"}(Qs||(Qs={}));const rl=Qs;const nl=function(){function e(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new cn(e,Int32Array.from([1])))}return e.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],n=this.field,o=t.length;o<=e;o++){var i=r.multiply(new cn(n,Int32Array.from([1,n.exp(o-1+n.getGeneratorBase())])));t.push(i),r=i}return t[e]},e.prototype.encode=function(e,t){if(0===t)throw new lr("No error correction bytes");var r=e.length-t;if(r<=0)throw new lr("No data bytes provided");var n=this.buildGenerator(t),o=new Int32Array(r);pr.arraycopy(e,0,o,0,r);for(var i=new cn(this.field,o),a=(i=i.multiplyByMonomial(t,1)).divide(n)[1].getCoefficients(),s=t-a.length,l=0;l<s;l++)e[r+l]=0;pr.arraycopy(a,0,e,r+s,a.length)},e}();const ol=function(){function e(){}return e.applyMaskPenaltyRule1=function(t){return e.applyMaskPenaltyRule1Internal(t,!0)+e.applyMaskPenaltyRule1Internal(t,!1)},e.applyMaskPenaltyRule2=function(t){for(var r=0,n=t.getArray(),o=t.getWidth(),i=t.getHeight(),a=0;a<i-1;a++)for(var s=n[a],l=0;l<o-1;l++){var c=s[l];c===s[l+1]&&c===n[a+1][l]&&c===n[a+1][l+1]&&r++}return e.N2*r},e.applyMaskPenaltyRule3=function(t){for(var r=0,n=t.getArray(),o=t.getWidth(),i=t.getHeight(),a=0;a<i;a++)for(var s=0;s<o;s++){var l=n[a];s+6<o&&1===l[s]&&0===l[s+1]&&1===l[s+2]&&1===l[s+3]&&1===l[s+4]&&0===l[s+5]&&1===l[s+6]&&(e.isWhiteHorizontal(l,s-4,s)||e.isWhiteHorizontal(l,s+7,s+11))&&r++,a+6<i&&1===n[a][s]&&0===n[a+1][s]&&1===n[a+2][s]&&1===n[a+3][s]&&1===n[a+4][s]&&0===n[a+5][s]&&1===n[a+6][s]&&(e.isWhiteVertical(n,s,a-4,a)||e.isWhiteVertical(n,s,a+7,a+11))&&r++}return r*e.N3},e.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var n=t;n<r;n++)if(1===e[n])return!1;return!0},e.isWhiteVertical=function(e,t,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var o=r;o<n;o++)if(1===e[o][t])return!1;return!0},e.applyMaskPenaltyRule4=function(t){for(var r=0,n=t.getArray(),o=t.getWidth(),i=t.getHeight(),a=0;a<i;a++)for(var s=n[a],l=0;l<o;l++)1===s[l]&&r++;var c=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*r-c)/c)*e.N4},e.getDataMaskBit=function(e,t,r){var n,o;switch(e){case 0:n=r+t&1;break;case 1:n=1&r;break;case 2:n=t%3;break;case 3:n=(r+t)%3;break;case 4:n=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:n=(1&(o=r*t))+o%3;break;case 6:n=(1&(o=r*t))+o%3&1;break;case 7:n=(o=r*t)%3+(r+t&1)&1;break;default:throw new lr("Invalid mask pattern: "+e)}return 0===n},e.applyMaskPenaltyRule1Internal=function(t,r){for(var n=0,o=r?t.getHeight():t.getWidth(),i=r?t.getWidth():t.getHeight(),a=t.getArray(),s=0;s<o;s++){for(var l=0,c=-1,u=0;u<i;u++){var d=r?a[s][u]:a[u][s];d===c?l++:(l>=5&&(n+=e.N1+(l-5)),l=1,c=d)}l>=5&&(n+=e.N1+(l-5))}return n},e.N1=3,e.N2=3,e.N3=40,e.N4=10,e}();var il=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},al=function(){function e(e,t){this.width=e,this.height=t;for(var r=new Array(t),n=0;n!==t;n++)r[n]=new Uint8Array(e);this.bytes=r}return e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.get=function(e,t){return this.bytes[t][e]},e.prototype.getArray=function(){return this.bytes},e.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},e.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},e.prototype.clear=function(e){var t,r;try{for(var n=il(this.bytes),o=n.next();!o.done;o=n.next()){var i=o.value;xr.fill(i,e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;if(this.width!==r.width)return!1;if(this.height!==r.height)return!1;for(var n=0,o=this.height;n<o;++n)for(var i=this.bytes[n],a=r.bytes[n],s=0,l=this.width;s<l;++s)if(i[s]!==a[s])return!1;return!0},e.prototype.toString=function(){for(var e=new Dr,t=0,r=this.height;t<r;++t){for(var n=this.bytes[t],o=0,i=this.width;o<i;++o)switch(n[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()},e}();const sl=al;const ll=function(){function e(){this.maskPattern=-1}return e.prototype.getMode=function(){return this.mode},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getVersion=function(){return this.version},e.prototype.getMaskPattern=function(){return this.maskPattern},e.prototype.getMatrix=function(){return this.matrix},e.prototype.toString=function(){var e=new Dr;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},e.prototype.setMode=function(e){this.mode=e},e.prototype.setECLevel=function(e){this.ecLevel=e},e.prototype.setVersion=function(e){this.version=e},e.prototype.setMaskPattern=function(e){this.maskPattern=e},e.prototype.setMatrix=function(e){this.matrix=e},e.isValidMaskPattern=function(t){return t>=0&&t<e.NUM_MASK_PATTERNS},e.NUM_MASK_PATTERNS=8,e}();var cl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const ul=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return cl(t,e),t.kind="WriterException",t}(or);const dl=function(){function e(){}return e.clearMatrix=function(e){e.clear(255)},e.buildMatrix=function(t,r,n,o,i){e.clearMatrix(i),e.embedBasicPatterns(n,i),e.embedTypeInfo(r,o,i),e.maybeEmbedVersionInfo(n,i),e.embedDataBits(t,o,i)},e.embedBasicPatterns=function(t,r){e.embedPositionDetectionPatternsAndSeparators(r),e.embedDarkDotAtLeftBottomCorner(r),e.maybeEmbedPositionAdjustmentPatterns(t,r),e.embedTimingPatterns(r)},e.embedTypeInfo=function(t,r,n){var o=new _r;e.makeTypeInfoBits(t,r,o);for(var i=0,a=o.getSize();i<a;++i){var s=o.get(o.getSize()-1-i),l=e.TYPE_INFO_COORDINATES[i],c=l[0],u=l[1];if(n.setBoolean(c,u,s),i<8){var d=n.getWidth()-i-1,f=8;n.setBoolean(d,f,s)}else{d=8,f=n.getHeight()-7+(i-8);n.setBoolean(d,f,s)}}},e.maybeEmbedVersionInfo=function(t,r){if(!(t.getVersionNumber()<7)){var n=new _r;e.makeVersionInfoBits(t,n);for(var o=17,i=0;i<6;++i)for(var a=0;a<3;++a){var s=n.get(o);o--,r.setBoolean(i,r.getHeight()-11+a,s),r.setBoolean(r.getHeight()-11+a,i,s)}}},e.embedDataBits=function(t,r,n){for(var o=0,i=-1,a=n.getWidth()-1,s=n.getHeight()-1;a>0;){for(6===a&&(a-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var c=a-l;if(e.isEmpty(n.get(c,s))){var u=void 0;o<t.getSize()?(u=t.get(o),++o):u=!1,255!==r&&ol.getDataMaskBit(r,c,s)&&(u=!u),n.setBoolean(c,s,u)}}s+=i}s+=i=-i,a-=2}if(o!==t.getSize())throw new ul("Not all bits consumed: "+o+"/"+t.getSize())},e.findMSBSet=function(e){return 32-Cr.numberOfLeadingZeros(e)},e.calculateBCHCode=function(t,r){if(0===r)throw new lr("0 polynomial");var n=e.findMSBSet(r);for(t<<=n-1;e.findMSBSet(t)>=n;)t^=r<<e.findMSBSet(t)-n;return t},e.makeTypeInfoBits=function(t,r,n){if(!ll.isValidMaskPattern(r))throw new ul("Invalid mask pattern");var o=t.getBits()<<3|r;n.appendBits(o,5);var i=e.calculateBCHCode(o,e.TYPE_INFO_POLY);n.appendBits(i,10);var a=new _r;if(a.appendBits(e.TYPE_INFO_MASK_PATTERN,15),n.xor(a),15!==n.getSize())throw new ul("should not happen but we got: "+n.getSize())},e.makeVersionInfoBits=function(t,r){r.appendBits(t.getVersionNumber(),6);var n=e.calculateBCHCode(t.getVersionNumber(),e.VERSION_INFO_POLY);if(r.appendBits(n,12),18!==r.getSize())throw new ul("should not happen but we got: "+r.getSize())},e.isEmpty=function(e){return 255===e},e.embedTimingPatterns=function(t){for(var r=8;r<t.getWidth()-8;++r){var n=(r+1)%2;e.isEmpty(t.get(r,6))&&t.setNumber(r,6,n),e.isEmpty(t.get(6,r))&&t.setNumber(6,r,n)}},e.embedDarkDotAtLeftBottomCorner=function(e){if(0===e.get(8,e.getHeight()-8))throw new ul;e.setNumber(8,e.getHeight()-8,1)},e.embedHorizontalSeparationPattern=function(t,r,n){for(var o=0;o<8;++o){if(!e.isEmpty(n.get(t+o,r)))throw new ul;n.setNumber(t+o,r,0)}},e.embedVerticalSeparationPattern=function(t,r,n){for(var o=0;o<7;++o){if(!e.isEmpty(n.get(t,r+o)))throw new ul;n.setNumber(t,r+o,0)}},e.embedPositionAdjustmentPattern=function(t,r,n){for(var o=0;o<5;++o)for(var i=e.POSITION_ADJUSTMENT_PATTERN[o],a=0;a<5;++a)n.setNumber(t+a,r+o,i[a])},e.embedPositionDetectionPattern=function(t,r,n){for(var o=0;o<7;++o)for(var i=e.POSITION_DETECTION_PATTERN[o],a=0;a<7;++a)n.setNumber(t+a,r+o,i[a])},e.embedPositionDetectionPatternsAndSeparators=function(t){var r=e.POSITION_DETECTION_PATTERN[0].length;e.embedPositionDetectionPattern(0,0,t),e.embedPositionDetectionPattern(t.getWidth()-r,0,t),e.embedPositionDetectionPattern(0,t.getWidth()-r,t);e.embedHorizontalSeparationPattern(0,7,t),e.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),e.embedHorizontalSeparationPattern(0,t.getWidth()-8,t);e.embedVerticalSeparationPattern(7,0,t),e.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),e.embedVerticalSeparationPattern(7,t.getHeight()-7,t)},e.maybeEmbedPositionAdjustmentPatterns=function(t,r){if(!(t.getVersionNumber()<2))for(var n=t.getVersionNumber()-1,o=e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,a=o.length;i!==a;i++){var s=o[i];if(s>=0)for(var l=0;l!==a;l++){var c=o[l];c>=0&&e.isEmpty(r.get(c,s))&&e.embedPositionAdjustmentPattern(c-2,s-2,r)}}},e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),e.VERSION_INFO_POLY=7973,e.TYPE_INFO_POLY=1335,e.TYPE_INFO_MASK_PATTERN=21522,e}();const fl=function(){function e(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return e.prototype.getDataBytes=function(){return this.dataBytes},e.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},e}();var hl=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pl=function(){function e(){}return e.calculateMaskPenalty=function(e){return ol.applyMaskPenaltyRule1(e)+ol.applyMaskPenaltyRule2(e)+ol.applyMaskPenaltyRule3(e)+ol.applyMaskPenaltyRule4(e)},e.encode=function(t,r,n){void 0===n&&(n=null);var o=e.DEFAULT_BYTE_MODE_ENCODING,i=null!==n&&void 0!==n.get(rl.CHARACTER_SET);i&&(o=n.get(rl.CHARACTER_SET).toString());var a=this.chooseMode(t,o),s=new _r;if(a===_a.BYTE&&(i||e.DEFAULT_BYTE_MODE_ENCODING!==o)){var l=Or.getCharacterSetECIByName(o);void 0!==l&&this.appendECI(l,s)}this.appendModeInfo(a,s);var c,u=new _r;if(this.appendBytes(t,a,u,o),null!==n&&void 0!==n.get(rl.QR_VERSION)){var d=Number.parseInt(n.get(rl.QR_VERSION).toString(),10);c=ha.getVersionForNumber(d);var f=this.calculateBitsNeeded(a,s,u,c);if(!this.willFit(f,c,r))throw new ul("Data too big for requested version")}else c=this.recommendVersion(r,a,s,u);var h=new _r;h.appendBitArray(s);var p=a===_a.BYTE?u.getSizeInBytes():t.length;this.appendLengthInfo(p,c,a,h),h.appendBitArray(u);var g=c.getECBlocksForLevel(r),m=c.getTotalCodewords()-g.getTotalECCodewords();this.terminateBits(m,h);var y=this.interleaveWithECBytes(h,c.getTotalCodewords(),m,g.getNumBlocks()),v=new ll;v.setECLevel(r),v.setMode(a),v.setVersion(c);var w=c.getDimensionForVersion(),b=new sl(w,w),x=this.chooseMaskPattern(y,r,c,b);return v.setMaskPattern(x),dl.buildMatrix(y,r,c,x,b),v.setMatrix(b),v},e.recommendVersion=function(e,t,r,n){var o=this.calculateBitsNeeded(t,r,n,ha.getVersionForNumber(1)),i=this.chooseVersion(o,e),a=this.calculateBitsNeeded(t,r,n,i);return this.chooseVersion(a,e)},e.calculateBitsNeeded=function(e,t,r,n){return t.getSize()+e.getCharacterCountBits(n)+r.getSize()},e.getAlphanumericCode=function(t){return t<e.ALPHANUMERIC_TABLE.length?e.ALPHANUMERIC_TABLE[t]:-1},e.chooseMode=function(t,r){if(void 0===r&&(r=null),Or.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return _a.KANJI;for(var n=!1,o=!1,i=0,a=t.length;i<a;++i){var s=t.charAt(i);if(e.isDigit(s))n=!0;else{if(-1===this.getAlphanumericCode(s.charCodeAt(0)))return _a.BYTE;o=!0}}return o?_a.ALPHANUMERIC:n?_a.NUMERIC:_a.BYTE},e.isOnlyDoubleByteKanji=function(e){var t;try{t=Pr.encode(e,Or.SJIS)}catch(i){return!1}var r=t.length;if(r%2!==0)return!1;for(var n=0;n<r;n+=2){var o=255&t[n];if((o<129||o>159)&&(o<224||o>235))return!1}return!0},e.chooseMaskPattern=function(e,t,r,n){for(var o=Number.MAX_SAFE_INTEGER,i=-1,a=0;a<ll.NUM_MASK_PATTERNS;a++){dl.buildMatrix(e,t,r,a,n);var s=this.calculateMaskPenalty(n);s<o&&(o=s,i=a)}return i},e.chooseVersion=function(t,r){for(var n=1;n<=40;n++){var o=ha.getVersionForNumber(n);if(e.willFit(t,o,r))return o}throw new ul("Data too big")},e.willFit=function(e,t,r){return t.getTotalCodewords()-t.getECBlocksForLevel(r).getTotalECCodewords()>=(e+7)/8},e.terminateBits=function(e,t){var r=8*e;if(t.getSize()>r)throw new ul("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var n=0;n<4&&t.getSize()<r;++n)t.appendBit(!1);var o=7&t.getSize();if(o>0)for(n=o;n<8;n++)t.appendBit(!1);var i=e-t.getSizeInBytes();for(n=0;n<i;++n)t.appendBits(0===(1&n)?236:17,8);if(t.getSize()!==r)throw new ul("Bits size does not equal capacity")},e.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,n,o,i){if(n>=r)throw new ul("Block ID too large");var a=e%r,s=r-a,l=Math.floor(e/r),c=l+1,u=Math.floor(t/r),d=u+1,f=l-u,h=c-d;if(f!==h)throw new ul("EC bytes mismatch");if(r!==s+a)throw new ul("RS blocks mismatch");if(e!==(u+f)*s+(d+h)*a)throw new ul("Total bytes mismatch");n<s?(o[0]=u,i[0]=f):(o[0]=d,i[0]=h)},e.interleaveWithECBytes=function(t,r,n,o){var i,a,s,l;if(t.getSizeInBytes()!==n)throw new ul("Number of bits and data bytes does not match");for(var c=0,u=0,d=0,f=new Array,h=0;h<o;++h){var p=new Int32Array(1),g=new Int32Array(1);e.getNumDataBytesAndNumECBytesForBlockID(r,n,o,h,p,g);var m=p[0],y=new Uint8Array(m);t.toBytes(8*c,y,0,m);var v=e.generateECBytes(y,g[0]);f.push(new fl(y,v)),u=Math.max(u,m),d=Math.max(d,v.length),c+=p[0]}if(n!==c)throw new ul("Data bytes does not match offset");var w=new _r;for(h=0;h<u;++h)try{for(var b=(i=void 0,hl(f)),x=b.next();!x.done;x=b.next()){h<(y=x.value.getDataBytes()).length&&w.appendBits(y[h],8)}}catch(E){i={error:E}}finally{try{x&&!x.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}for(h=0;h<d;++h)try{for(var C=(s=void 0,hl(f)),_=C.next();!_.done;_=C.next()){h<(v=_.value.getErrorCorrectionBytes()).length&&w.appendBits(v[h],8)}}catch(S){s={error:S}}finally{try{_&&!_.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}if(r!==w.getSizeInBytes())throw new ul("Interleaving error: "+r+" and "+w.getSizeInBytes()+" differ.");return w},e.generateECBytes=function(e,t){for(var r=e.length,n=new Int32Array(r+t),o=0;o<r;o++)n[o]=255&e[o];new nl(hn.QR_CODE_FIELD_256).encode(n,t);var i=new Uint8Array(t);for(o=0;o<t;o++)i[o]=n[r+o];return i},e.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},e.appendLengthInfo=function(e,t,r,n){var o=r.getCharacterCountBits(t);if(e>=1<<o)throw new ul(e+" is bigger than "+((1<<o)-1));n.appendBits(e,o)},e.appendBytes=function(t,r,n,o){switch(r){case _a.NUMERIC:e.appendNumericBytes(t,n);break;case _a.ALPHANUMERIC:e.appendAlphanumericBytes(t,n);break;case _a.BYTE:e.append8BitBytes(t,n,o);break;case _a.KANJI:e.appendKanjiBytes(t,n);break;default:throw new ul("Invalid mode: "+r)}},e.getDigit=function(e){return e.charCodeAt(0)-48},e.isDigit=function(t){var r=e.getDigit(t);return r>=0&&r<=9},e.appendNumericBytes=function(t,r){for(var n=t.length,o=0;o<n;){var i=e.getDigit(t.charAt(o));if(o+2<n){var a=e.getDigit(t.charAt(o+1)),s=e.getDigit(t.charAt(o+2));r.appendBits(100*i+10*a+s,10),o+=3}else if(o+1<n){a=e.getDigit(t.charAt(o+1));r.appendBits(10*i+a,7),o+=2}else r.appendBits(i,4),o++}},e.appendAlphanumericBytes=function(t,r){for(var n=t.length,o=0;o<n;){var i=e.getAlphanumericCode(t.charCodeAt(o));if(-1===i)throw new ul;if(o+1<n){var a=e.getAlphanumericCode(t.charCodeAt(o+1));if(-1===a)throw new ul;r.appendBits(45*i+a,11),o+=2}else r.appendBits(i,6),o++}},e.append8BitBytes=function(e,t,r){var n;try{n=Pr.encode(e,r)}catch(s){throw new ul(s)}for(var o=0,i=n.length;o!==i;o++){var a=n[o];t.appendBits(a,8)}},e.appendKanjiBytes=function(e,t){var r;try{r=Pr.encode(e,Or.SJIS)}catch(l){throw new ul(l)}for(var n=r.length,o=0;o<n;o+=2){var i=(255&r[o])<<8&4294967295|255&r[o+1],a=-1;if(i>=33088&&i<=40956?a=i-33088:i>=57408&&i<=60351&&(a=i-49472),-1===a)throw new ul("Invalid byte sequence");var s=192*(a>>8)+(255&a);t.appendBits(s,13)}},e.appendECI=function(e,t){t.appendBits(_a.ECI.getBits(),4),t.appendBits(e.getValue(),8)},e.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),e.DEFAULT_BYTE_MODE_ENCODING=Or.UTF8.getName(),e}();const gl=pl;!function(){function e(){}e.prototype.write=function(t,r,n,o){if(void 0===o&&(o=null),0===t.length)throw new lr("Found empty contents");if(r<0||n<0)throw new lr("Requested dimensions are too small: "+r+"x"+n);var i=ra.L,a=e.QUIET_ZONE_SIZE;null!==o&&(void 0!==o.get(rl.ERROR_CORRECTION)&&(i=ra.fromString(o.get(rl.ERROR_CORRECTION).toString())),void 0!==o.get(rl.MARGIN)&&(a=Number.parseInt(o.get(rl.MARGIN).toString(),10)));var s=gl.encode(t,i,o);return this.renderResult(s,r,n,a)},e.prototype.writeToDom=function(e,t,r,n,o){void 0===o&&(o=null),"string"===typeof e&&(e=document.querySelector(e));var i=this.write(t,r,n,o);e&&e.appendChild(i)},e.prototype.renderResult=function(e,t,r,n){var o=e.getMatrix();if(null===o)throw new yn;for(var i=o.getWidth(),a=o.getHeight(),s=i+2*n,l=a+2*n,c=Math.max(t,s),u=Math.max(r,l),d=Math.min(Math.floor(c/s),Math.floor(u/l)),f=Math.floor((c-i*d)/2),h=Math.floor((u-a*d)/2),p=this.createSVGElement(c,u),g=0,m=h;g<a;g++,m+=d)for(var y=0,v=f;y<i;y++,v+=d)if(1===o.get(y,g)){var w=this.createSvgRectElement(v,m,d,d);p.appendChild(w)}return p},e.prototype.createSVGElement=function(t,r){var n=document.createElementNS(e.SVG_NS,"svg");return n.setAttributeNS(null,"height",t.toString()),n.setAttributeNS(null,"width",r.toString()),n},e.prototype.createSvgRectElement=function(t,r,n,o){var i=document.createElementNS(e.SVG_NS,"rect");return i.setAttributeNS(null,"x",t.toString()),i.setAttributeNS(null,"y",r.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",o.toString()),i.setAttributeNS(null,"fill","#000000"),i},e.QUIET_ZONE_SIZE=4,e.SVG_NS="http://www.w3.org/2000/svg"}();var ml=function(){function e(){}return e.prototype.encode=function(t,r,n,o,i){if(0===t.length)throw new lr("Found empty contents");if(r!==nn.QR_CODE)throw new lr("Can only encode QR_CODE, but got "+r);if(n<0||o<0)throw new lr("Requested dimensions are too small: "+n+"x"+o);var a=ra.L,s=e.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(rl.ERROR_CORRECTION)&&(a=ra.fromString(i.get(rl.ERROR_CORRECTION).toString())),void 0!==i.get(rl.MARGIN)&&(s=Number.parseInt(i.get(rl.MARGIN).toString(),10)));var l=gl.encode(t,a,i);return e.renderResult(l,n,o,s)},e.renderResult=function(e,t,r,n){var o=e.getMatrix();if(null===o)throw new yn;for(var i=o.getWidth(),a=o.getHeight(),s=i+2*n,l=a+2*n,c=Math.max(t,s),u=Math.max(r,l),d=Math.min(Math.floor(c/s),Math.floor(u/l)),f=Math.floor((c-i*d)/2),h=Math.floor((u-a*d)/2),p=new Br(c,u),g=0,m=h;g<a;g++,m+=d)for(var y=0,v=f;y<i;y++,v+=d)1===o.get(y,g)&&p.setRegion(v,m,d,d);return p},e.QUIET_ZONE_SIZE=4,e}();const yl=ml;!function(){function e(){}e.prototype.encode=function(e,t,r,n,o){if(t!==nn.QR_CODE)throw new lr("No encoder available for format "+t);return(new yl).encode(e,t,r,n,o)}}();var vl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){function t(t,r,n,o,i,a,s,l){var c=e.call(this,a,s)||this;if(c.yuvData=t,c.dataWidth=r,c.dataHeight=n,c.left=o,c.top=i,o+a>r||i+s>n)throw new lr("Crop rectangle does not fit within image data.");return l&&c.reverseHorizontal(a,s),c}vl(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new lr("Requested row is outside the image: "+e);var r=this.getWidth();(null===t||void 0===t||t.length<r)&&(t=new Uint8ClampedArray(r));var n=(e+this.top)*this.dataWidth+this.left;return pr.arraycopy(this.yuvData,n,t,0,r),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;var r=e*t,n=new Uint8ClampedArray(r),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return pr.arraycopy(this.yuvData,o,n,0,r),n;for(var i=0;i<t;i++){var a=i*e;pr.arraycopy(this.yuvData,o,n,a,e),o+=this.dataWidth}return n},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,n,o){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,n,o,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*r),o=this.yuvData,i=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var s=a*e,l=0;l<e;l++){var c=255&o[i+l*t.THUMBNAIL_SCALE_FACTOR];n[s+l]=4278190080|65793*c}i+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return n},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,t){for(var r=this.yuvData,n=0,o=this.top*this.dataWidth+this.left;n<t;n++,o+=this.dataWidth)for(var i=o+e/2,a=o,s=o+e-1;a<i;a++,s--){var l=r[a];r[a]=r[s],r[s]=l}},t.prototype.invert=function(){return new Xr(this)},t.THUMBNAIL_SCALE_FACTOR=2}(Wr);var wl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){function t(t,r,n,o,i,a,s){var l=e.call(this,r,n)||this;if(l.dataWidth=o,l.dataHeight=i,l.left=a,l.top=s,4===t.BYTES_PER_ELEMENT){for(var c=r*n,u=new Uint8ClampedArray(c),d=0;d<c;d++){var f=t[d],h=f>>16&255,p=f>>7&510,g=255&f;u[d]=(h+p+g)/4&255}l.luminances=u}else l.luminances=t;if(void 0===o&&(l.dataWidth=r),void 0===i&&(l.dataHeight=n),void 0===a&&(l.left=0),void 0===s&&(l.top=0),l.left+r>l.dataWidth||l.top+n>l.dataHeight)throw new lr("Crop rectangle does not fit within image data.");return l}wl(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new lr("Requested row is outside the image: "+e);var r=this.getWidth();(null===t||void 0===t||t.length<r)&&(t=new Uint8ClampedArray(r));var n=(e+this.top)*this.dataWidth+this.left;return pr.arraycopy(this.luminances,n,t,0,r),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;var r=e*t,n=new Uint8ClampedArray(r),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return pr.arraycopy(this.luminances,o,n,0,r),n;for(var i=0;i<t;i++){var a=i*e;pr.arraycopy(this.luminances,o,n,a,e),o+=this.dataWidth}return n},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,n,o){return new t(this.luminances,n,o,this.dataWidth,this.dataHeight,this.left+e,this.top+r)},t.prototype.invert=function(){return new Xr(this)}}(Wr);var bl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const xl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return bl(t,e),t.forName=function(e){return this.getCharacterSetECIByName(e)},t}(Or);const Cl=function(){function e(){}return e.ISO_8859_1=Or.ISO8859_1,e}();const _l=function(){function e(e,t,r){this.codewords=e,this.numcols=t,this.numrows=r,this.bits=new Uint8Array(t*r),xr.fill(this.bits,2)}return e.prototype.getNumrows=function(){return this.numrows},e.prototype.getNumcols=function(){return this.numcols},e.prototype.getBits=function(){return this.bits},e.prototype.getBit=function(e,t){return 1===this.bits[t*this.numcols+e]},e.prototype.setBit=function(e,t,r){this.bits[t*this.numcols+e]=r?1:0},e.prototype.noBit=function(e,t){return 2===this.bits[t*this.numcols+e]},e.prototype.place=function(){var e=0,t=4,r=0;do{t===this.numrows&&0===r&&this.corner1(e++),t===this.numrows-2&&0===r&&this.numcols%4!==0&&this.corner2(e++),t===this.numrows-2&&0===r&&this.numcols%8===4&&this.corner3(e++),t===this.numrows+4&&2===r&&this.numcols%8===0&&this.corner4(e++);do{t<this.numrows&&r>=0&&this.noBit(r,t)&&this.utah(t,r,e++),t-=2,r+=2}while(t>=0&&r<this.numcols);t++,r+=3;do{t>=0&&r<this.numcols&&this.noBit(r,t)&&this.utah(t,r,e++),t+=2,r-=2}while(t<this.numrows&&r>=0);t+=3,r++}while(t<this.numrows||r<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},e.prototype.module=function(e,t,r,n){e<0&&(e+=this.numrows,t+=4-(this.numrows+4)%8),t<0&&(t+=this.numcols,e+=4-(this.numcols+4)%8);var o=this.codewords.charCodeAt(r);o&=1<<8-n,this.setBit(t,e,0!==o)},e.prototype.utah=function(e,t,r){this.module(e-2,t-2,r,1),this.module(e-2,t-1,r,2),this.module(e-1,t-2,r,3),this.module(e-1,t-1,r,4),this.module(e-1,t,r,5),this.module(e,t-2,r,6),this.module(e,t-1,r,7),this.module(e,t,r,8)},e.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},e.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},e.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},e.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},e}();var El,Sl,Al=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],Nl=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],Il=(El=function(e,t){for(var r=1,n=0;n<255;n++)t[n]=r,e[r]=n,(r*=2)>=256&&(r^=301);return{LOG:e,ALOG:t}}([],[]),El.LOG),kl=El.ALOG;!function(e){e[e.FORCE_NONE=0]="FORCE_NONE",e[e.FORCE_SQUARE=1]="FORCE_SQUARE",e[e.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"}(Sl||(Sl={}));var Tl="[)>\x1e05\x1d",Ol="[)>\x1e06\x1d",Rl="\x1e\x04",Ml=function(){function e(){}return e.encodeECC200=function(e,t){if(e.length!==t.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var r=new Dr;r.append(e);var n=t.getInterleavedBlockCount();if(1===n){var o=this.createECCBlock(e,t.getErrorCodewords());r.append(o)}else{for(var i=[],a=[],s=0;s<n;s++)i[s]=t.getDataLengthForInterleavedBlock(s+1),a[s]=t.getErrorLengthForInterleavedBlock(s+1);for(var l=0;l<n;l++){for(var c=new Dr,u=l;u<t.getDataCapacity();u+=n)c.append(e.charAt(u));o=this.createECCBlock(c.toString(),a[l]);for(var d=0,f=l;f<a[l]*n;f+=n)r.setCharAt(t.getDataCapacity()+f,o.charAt(d++))}}return r.toString()},e.createECCBlock=function(e,t){for(var r=-1,n=0;n<Al.length;n++)if(Al[n]===t){r=n;break}if(r<0)throw new Error("Illegal number of error correction codewords specified: "+t);var o=Nl[r],i=[];for(n=0;n<t;n++)i[n]=0;for(n=0;n<e.length;n++){for(var a=i[t-1]^e.charAt(n).charCodeAt(0),s=t-1;s>0;s--)0!==a&&0!==o[s]?i[s]=i[s-1]^kl[(Il[a]+Il[o[s]])%255]:i[s]=i[s-1];0!==a&&0!==o[0]?i[0]=kl[(Il[a]+Il[o[0]])%255]:i[0]=0}var l=[];for(n=0;n<t;n++)l[n]=i[t-n-1];return l.map(function(e){return String.fromCharCode(e)}).join("")},e}();const Pl=Ml;var jl=function(){function e(){}return e.prototype.getEncodingMode=function(){return 0},e.prototype.encode=function(e){if(ql.determineConsecutiveDigitCount(e.getMessage(),e.pos)>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var t=e.getCurrentChar(),r=ql.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(r!==this.getEncodingMode())switch(r){case 5:return e.writeCodeword(231),void e.signalEncoderChange(5);case 1:return e.writeCodeword(230),void e.signalEncoderChange(1);case 3:e.writeCodeword(238),e.signalEncoderChange(3);break;case 2:e.writeCodeword(239),e.signalEncoderChange(2);break;case 4:e.writeCodeword(240),e.signalEncoderChange(4);break;default:throw new Error("Illegal mode: "+r)}else ql.isExtendedASCII(t)?(e.writeCodeword(235),e.writeCodeword(t-128+1),e.pos++):(e.writeCodeword(t+1),e.pos++)}},e.prototype.encodeASCIIDigits=function(e,t){if(ql.isDigit(e)&&ql.isDigit(t))return 10*(e-48)+(t-48)+130;throw new Error("not digits: "+e+t)},e}(),Dl=function(){function e(){}return e.prototype.getEncodingMode=function(){return 5},e.prototype.encode=function(e){var t=new Dr;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();if(t.append(r),e.pos++,ql.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}var n=t.length()-1,o=e.getCodewordCount()+n+1;e.updateSymbolInfo(o);var i=e.getSymbolInfo().getDataCapacity()-o>0;if(e.hasMoreCharacters()||i)if(n<=249)t.setCharAt(0,jr.getCharAt(n));else{if(!(n<=1555))throw new Error("Message length not in valid ranges: "+n);t.setCharAt(0,jr.getCharAt(Math.floor(n/250)+249)),t.insert(1,jr.getCharAt(n%250))}var a=0;for(r=t.length();a<r;a++)e.writeCodeword(this.randomize255State(t.charAt(a).charCodeAt(0),e.getCodewordCount()+1))},e.prototype.randomize255State=function(e,t){var r=e+(149*t%255+1);return r<=255?r:r-256},e}(),Bl=function(){function e(){}return e.prototype.getEncodingMode=function(){return 1},e.prototype.encodeMaximal=function(e){for(var t=new Dr,r=0,n=e.pos,o=0;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,r=this.encodeChar(i,t),t.length()%3===0&&(n=e.pos,o=t.length())}if(o!==t.length()){var a=Math.floor(t.length()/3*2),s=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s,c=Math.floor(t.length()%3);(2===c&&2!==l||1===c&&(r>3||1!==l))&&(e.pos=n)}t.length()>0&&e.writeCodeword(230),this.handleEOD(e,t)},e.prototype.encode=function(e){for(var t=new Dr;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var n=this.encodeChar(r,t),o=2*Math.floor(t.length()/3),i=e.getCodewordCount()+o;e.updateSymbolInfo(i);var a=e.getSymbolInfo().getDataCapacity()-i;if(!e.hasMoreCharacters()){var s=new Dr;for(t.length()%3===2&&2!==a&&(n=this.backtrackOneCharacter(e,t,s,n));t.length()%3===1&&(n>3||1!==a);)n=this.backtrackOneCharacter(e,t,s,n);break}if(t.length()%3===0)if(ql.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}this.handleEOD(e,t)},e.prototype.backtrackOneCharacter=function(e,t,r,n){var o=t.length(),i=t.toString().substring(0,o-n);t.setLengthToZero(),t.append(i),e.pos--;var a=e.getCurrentChar();return n=this.encodeChar(a,r),e.resetSymbolInfo(),n},e.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},e.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),n=t.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var i=e.getSymbolInfo().getDataCapacity()-o;if(2===n){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(254)}else if(1===i&&1===n){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(254),e.pos--}else{if(0!==n)throw new Error("Unexpected case. Please report!");for(;t.length()>=3;)this.writeNextTriplet(e,t);(i>0||e.hasMoreCharacters())&&e.writeCodeword(254)}e.signalEncoderChange(0)},e.prototype.encodeChar=function(e,t){if(e===" ".charCodeAt(0))return t.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return t.append(e-48+4),1;if(e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0))return t.append(e-65+14),1;if(e<" ".charCodeAt(0))return t.append(0),t.append(e),2;if(e<="/".charCodeAt(0))return t.append(1),t.append(e-33),2;if(e<="@".charCodeAt(0))return t.append(1),t.append(e-58+15),2;if(e<="_".charCodeAt(0))return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1\x1e");var r=2;return r+=this.encodeChar(e-128,t)},e.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,n=t%256,o=new Dr;return o.append(r),o.append(n),o.toString()},e}(),Ll=function(){function e(){}return e.prototype.getEncodingMode=function(){return 4},e.prototype.encode=function(e){for(var t=new Dr;e.hasMoreCharacters();){var r=e.getCurrentChar();if(this.encodeChar(r,t),e.pos++,t.length()>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(4);if(t.setLengthToZero(),t.append(n),ql.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}}t.append(jr.getCharAt(31)),this.handleEOD(e,t)},e.prototype.handleEOD=function(e,t){try{var r=t.length();if(0===r)return;if(1===r){e.updateSymbolInfo();var n=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>n&&(e.updateSymbolInfo(e.getCodewordCount()+1),n=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=n&&n<=2)return}if(r>4)throw new Error("Count must not exceed 4");var i=r-1,a=this.encodeToCodewords(t.toString()),s=!e.hasMoreCharacters()&&i<=2;if(i<=2)e.updateSymbolInfo(e.getCodewordCount()+i),(n=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount())>=3&&(s=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length));s?(e.resetSymbolInfo(),e.pos-=i):e.writeCodewords(a)}finally{e.signalEncoderChange(0)}},e.prototype.encodeChar=function(e,t){e>=" ".charCodeAt(0)&&e<="?".charCodeAt(0)?t.append(e):e>="@".charCodeAt(0)&&e<="^".charCodeAt(0)?t.append(jr.getCharAt(e-64)):ql.illegalCharacter(jr.getCharAt(e))},e.prototype.encodeToCodewords=function(e){var t=e.length;if(0===t)throw new Error("StringBuilder must not be empty");var r=(e.charAt(0).charCodeAt(0)<<18)+((t>=2?e.charAt(1).charCodeAt(0):0)<<12)+((t>=3?e.charAt(2).charCodeAt(0):0)<<6)+(t>=4?e.charAt(3).charCodeAt(0):0),n=r>>16&255,o=r>>8&255,i=255&r,a=new Dr;return a.append(n),t>=2&&a.append(o),t>=3&&a.append(i),a.toString()},e}(),Fl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ul=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zl=function(){function e(e,t,r,n,o,i,a,s){void 0===a&&(a=0),void 0===s&&(s=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=n,this.matrixHeight=o,this.dataRegions=i,this.rsBlockData=a,this.rsBlockError=s}return e.lookup=function(e,t,r,n,o){var i,a;void 0===t&&(t=0),void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=!0);try{for(var s=Ul(Wl),l=s.next();!l.done;l=s.next()){var c=l.value;if((1!==t||!c.rectangular)&&((2!==t||c.rectangular)&&(null==r||!(c.getSymbolWidth()<r.getWidth()||c.getSymbolHeight()<r.getHeight()))&&(null==n||!(c.getSymbolWidth()>n.getWidth()||c.getSymbolHeight()>n.getHeight()))&&e<=c.dataCapacity))return c}}catch(u){i={error:u}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},e.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},e.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},e.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},e.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},e.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},e.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},e.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},e.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},e.prototype.getDataCapacity=function(){return this.dataCapacity},e.prototype.getErrorCodewords=function(){return this.errorCodewords},e.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},e.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},e}();const Vl=zl;var Hl=function(e){function t(){return e.call(this,!1,1558,620,22,22,36,-1,62)||this}return Fl(t,e),t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t}(zl),Wl=[new zl(!1,3,5,8,8,1),new zl(!1,5,7,10,10,1),new zl(!0,5,7,16,6,1),new zl(!1,8,10,12,12,1),new zl(!0,10,11,14,6,2),new zl(!1,12,12,14,14,1),new zl(!0,16,14,24,10,1),new zl(!1,18,14,16,16,1),new zl(!1,22,18,18,18,1),new zl(!0,22,18,16,10,2),new zl(!1,30,20,20,20,1),new zl(!0,32,24,16,14,2),new zl(!1,36,24,22,22,1),new zl(!1,44,28,24,24,1),new zl(!0,49,28,22,14,2),new zl(!1,62,36,14,14,4),new zl(!1,86,42,16,16,4),new zl(!1,114,48,18,18,4),new zl(!1,144,56,20,20,4),new zl(!1,174,68,22,22,4),new zl(!1,204,84,24,24,4,102,42),new zl(!1,280,112,14,14,16,140,56),new zl(!1,368,144,16,16,16,92,36),new zl(!1,456,192,18,18,16,114,48),new zl(!1,576,224,20,20,16,144,56),new zl(!1,696,272,22,22,16,174,68),new zl(!1,816,336,24,24,16,136,56),new zl(!1,1050,408,18,18,36,175,68),new zl(!1,1304,496,20,20,36,163,62),new Hl],Gl=function(){function e(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(e){return e.charCodeAt(0)}),r=new Dr,n=0,o=t.length;n<o;n++){var i=String.fromCharCode(255&t[n]);if("?"===i&&"?"!==e.charAt(n))throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(i)}this.msg=r.toString(),this.shape=0,this.codewords=new Dr,this.newEncoding=-1}return e.prototype.setSymbolShape=function(e){this.shape=e},e.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},e.prototype.getMessage=function(){return this.msg},e.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},e.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},e.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},e.prototype.getCodewords=function(){return this.codewords},e.prototype.writeCodewords=function(e){this.codewords.append(e)},e.prototype.writeCodeword=function(e){this.codewords.append(e)},e.prototype.getCodewordCount=function(){return this.codewords.length()},e.prototype.getNewEncoding=function(){return this.newEncoding},e.prototype.signalEncoderChange=function(e){this.newEncoding=e},e.prototype.resetEncoderSignal=function(){this.newEncoding=-1},e.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},e.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},e.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},e.prototype.getSymbolInfo=function(){return this.symbolInfo},e.prototype.updateSymbolInfo=function(e){void 0===e&&(e=this.getCodewordCount()),(null==this.symbolInfo||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Vl.lookup(e,this.shape,this.minSize,this.maxSize,!0))},e.prototype.resetSymbolInfo=function(){this.symbolInfo=null},e}(),Xl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xl(t,e),t.prototype.getEncodingMode=function(){return 3},t.prototype.encode=function(e){for(var t=new Dr;e.hasMoreCharacters();){var r=e.getCurrentChar();if(e.pos++,this.encodeChar(r,t),t.length()%3===0)if(this.writeNextTriplet(e,t),ql.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode())!==this.getEncodingMode()){e.signalEncoderChange(0);break}}this.handleEOD(e,t)},t.prototype.encodeChar=function(e,t){switch(e){case 13:t.append(0);break;case"*".charCodeAt(0):t.append(1);break;case">".charCodeAt(0):t.append(2);break;case" ".charCodeAt(0):t.append(3);break;default:e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)?t.append(e-48+4):e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)?t.append(e-65+14):ql.illegalCharacter(jr.getCharAt(e))}return 1},t.prototype.handleEOD=function(e,t){e.updateSymbolInfo();var r=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),n=t.length();e.pos-=n,(e.getRemainingCharacters()>1||r>1||e.getRemainingCharacters()!==r)&&e.writeCodeword(254),e.getNewEncoding()<0&&e.signalEncoderChange(0)},t}(Bl),Kl=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kl(t,e),t.prototype.getEncodingMode=function(){return 2},t.prototype.encodeChar=function(e,t){if(e===" ".charCodeAt(0))return t.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return t.append(e-48+4),1;if(e>="a".charCodeAt(0)&&e<="z".charCodeAt(0))return t.append(e-97+14),1;if(e<" ".charCodeAt(0))return t.append(0),t.append(e),2;if(e<="/".charCodeAt(0))return t.append(1),t.append(e-33),2;if(e<="@".charCodeAt(0))return t.append(1),t.append(e-58+15),2;if(e>="[".charCodeAt(0)&&e<="_".charCodeAt(0))return t.append(1),t.append(e-91+22),2;if(e==="`".charCodeAt(0))return t.append(2),t.append(0),2;if(e<="Z".charCodeAt(0))return t.append(2),t.append(e-65+1),2;if(e<=127)return t.append(2),t.append(e-123+27),2;t.append("1\x1e");var r=2;return r+=this.encodeChar(e-128,t)},t}(Bl);const ql=function(){function e(){}return e.randomize253State=function(e){var t=129+(149*e%253+1);return t<=254?t:t-254},e.encodeHighLevel=function(e,t,r,n,o){void 0===t&&(t=0),void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o=!1);var i=new Bl,a=[new jl,i,new Zl,new Yl,new Ll,new Dl],s=new Gl(e);s.setSymbolShape(t),s.setSizeConstraints(r,n),e.startsWith(Tl)&&e.endsWith(Rl)?(s.writeCodeword(236),s.setSkipAtEnd(2),s.pos+=7):e.startsWith(Ol)&&e.endsWith(Rl)&&(s.writeCodeword(237),s.setSkipAtEnd(2),s.pos+=7);var l=0;for(o&&(i.encodeMaximal(s),l=s.getNewEncoding(),s.resetEncoderSignal());s.hasMoreCharacters();)a[l].encode(s),s.getNewEncoding()>=0&&(l=s.getNewEncoding(),s.resetEncoderSignal());var c=s.getCodewordCount();s.updateSymbolInfo();var u=s.getSymbolInfo().getDataCapacity();c<u&&0!==l&&5!==l&&4!==l&&s.writeCodeword("\xfe");var d=s.getCodewords();for(d.length()<u&&d.append(129);d.length()<u;)d.append(this.randomize253State(d.length()+1));return s.getCodewords().toString()},e.lookAheadTest=function(e,t,r){var n=this.lookAheadTestIntern(e,t,r);if(3===r&&3===n){for(var o=Math.min(t+3,e.length),i=t;i<o;i++)if(!this.isNativeX12(e.charCodeAt(i)))return 0}else if(4===r&&4===n)for(o=Math.min(t+4,e.length),i=t;i<o;i++)if(!this.isNativeEDIFACT(e.charCodeAt(i)))return 0;return n},e.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var n;0===r?n=[0,1,1,1,1,1.25]:(n=[1,2,2,2,2,2.25])[r]=0;for(var o=0,i=new Uint8Array(6),a=[];;){if(t+o===e.length){xr.fill(i,0),xr.fill(a,0);var s=this.findMinimums(n,a,Cr.MAX_VALUE,i),l=this.getMinimumCount(i);if(a[0]===s)return 0;if(1===l){if(i[5]>0)return 5;if(i[4]>0)return 4;if(i[2]>0)return 2;if(i[3]>0)return 3}return 1}var c=e.charCodeAt(t+o);if(o++,this.isDigit(c)?n[0]+=.5:this.isExtendedASCII(c)?(n[0]=Math.ceil(n[0]),n[0]+=2):(n[0]=Math.ceil(n[0]),n[0]++),this.isNativeC40(c)?n[1]+=2/3:this.isExtendedASCII(c)?n[1]+=8/3:n[1]+=4/3,this.isNativeText(c)?n[2]+=2/3:this.isExtendedASCII(c)?n[2]+=8/3:n[2]+=4/3,this.isNativeX12(c)?n[3]+=2/3:this.isExtendedASCII(c)?n[3]+=13/3:n[3]+=10/3,this.isNativeEDIFACT(c)?n[4]+=3/4:this.isExtendedASCII(c)?n[4]+=4.25:n[4]+=3.25,this.isSpecialB256(c)?n[5]+=4:n[5]++,o>=4){if(xr.fill(i,0),xr.fill(a,0),this.findMinimums(n,a,Cr.MAX_VALUE,i),a[0]<this.min(a[5],a[1],a[2],a[3],a[4]))return 0;if(a[5]<a[0]||a[5]+1<this.min(a[1],a[2],a[3],a[4]))return 5;if(a[4]+1<this.min(a[5],a[1],a[2],a[3],a[0]))return 4;if(a[2]+1<this.min(a[5],a[1],a[4],a[3],a[0]))return 2;if(a[3]+1<this.min(a[5],a[1],a[4],a[2],a[0]))return 3;if(a[1]+1<this.min(a[0],a[5],a[4],a[2])){if(a[1]<a[3])return 1;if(a[1]===a[3]){for(var u=t+o+1;u<e.length;){var d=e.charCodeAt(u);if(this.isX12TermSep(d))return 3;if(!this.isNativeX12(d))break;u++}return 1}}}}},e.min=function(e,t,r,n,o){var i=Math.min(e,Math.min(t,Math.min(r,n)));return void 0===o?i:Math.min(i,o)},e.findMinimums=function(e,t,r,n){for(var o=0;o<6;o++){var i=t[o]=Math.ceil(e[o]);r>i&&(r=i,xr.fill(n,0)),r===i&&(n[o]=n[o]+1)}return r},e.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},e.isDigit=function(e){return e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)},e.isExtendedASCII=function(e){return e>=128&&e<=255},e.isNativeC40=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},e.isNativeText=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)},e.isNativeX12=function(e){return this.isX12TermSep(e)||e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},e.isX12TermSep=function(e){return 13===e||e==="*".charCodeAt(0)||e===">".charCodeAt(0)},e.isNativeEDIFACT=function(e){return e>=" ".charCodeAt(0)&&e<="^".charCodeAt(0)},e.isSpecialB256=function(e){return!1},e.determineConsecutiveDigitCount=function(e,t){void 0===t&&(t=0);for(var r=e.length,n=t;n<r&&this.isDigit(e.charCodeAt(n));)n++;return n-t},e.illegalCharacter=function(e){var t=Cr.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},e}();var $l,Ql=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jl=function(){function e(e){this.charset=e,this.name=e.name}return e.prototype.canEncode=function(e){try{return null!=Pr.encode(e,this.charset)}catch(t){return!1}},e}(),ec=function(){function e(e,t,r){var n,o,i,a,s,l;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(e){return new Jl(xl.forName(e))}),this.encoders=[];var c=[];c.push(new Jl(Cl.ISO_8859_1));for(var u=null!=t&&t.name.startsWith("UTF"),d=0;d<e.length;d++){var f=!1;try{for(var h=(n=void 0,Ql(c)),p=h.next();!p.done;p=h.next()){var g=p.value,m=e.charAt(d);if(m.charCodeAt(0)===r||g.canEncode(m)){f=!0;break}}}catch(_){n={error:_}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}if(!f)try{for(var y=(i=void 0,Ql(this.ENCODERS)),v=y.next();!v.done;v=y.next()){if((g=v.value).canEncode(e.charAt(d))){c.push(g),f=!0;break}}}catch(E){i={error:E}}finally{try{v&&!v.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}f||(u=!0)}if(1!==c.length||u){this.encoders=[];var w=0;try{for(var b=Ql(c),x=b.next();!x.done;x=b.next()){g=x.value;this.encoders[w++]=g}}catch(S){s={error:S}}finally{try{x&&!x.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}}else this.encoders=[c[0]];var C=-1;if(null!=t)for(d=0;d<this.encoders.length;d++)if(null!=this.encoders[d]&&t.name===this.encoders[d].name){C=d;break}this.priorityEncoderIndex=C}return e.prototype.length=function(){return this.encoders.length},e.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},e.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},e.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},e.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},e.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},e.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Pr.encode(jr.getCharAt(e),this.encoders[t].name)},e}(),tc=function(){function e(e,t,r){this.fnc1=r;var n=new ec(e,t,r);if(1===n.length())for(var o=0;o<this.bytes.length;o++){var i=e.charAt(o).charCodeAt(0);this.bytes[o]=i===r?1e3:i}else this.bytes=this.encodeMinimally(e,n,r)}return e.prototype.getFNC1Character=function(){return this.fnc1},e.prototype.length=function(){return this.bytes.length},e.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},e.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},e.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Dr,n=e;n<t;n++){if(this.isECI(n))throw new Error("value at "+n+" is not a character but an ECI");r.append(this.charAt(n))}return r.toString()},e.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},e.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return 1e3===this.bytes[e]},e.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},e.prototype.addEdge=function(e,t,r){(null==e[t][r.encoderIndex]||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},e.prototype.addEdges=function(e,t,r,n,o,i){var a=e.charAt(n).charCodeAt(0),s=0,l=t.length();t.getPriorityEncoderIndex()>=0&&(a===i||t.canEncode(a,t.getPriorityEncoderIndex()))&&(l=(s=t.getPriorityEncoderIndex())+1);for(var c=s;c<l;c++)(a===i||t.canEncode(a,c))&&this.addEdge(r,n+1,new rc(a,t,c,o,i))},e.prototype.encodeMinimally=function(e,t,r){var n=e.length,o=new(rc[n+1][t.length()]);this.addEdges(e,t,o,0,null,r);for(var i=1;i<=n;i++){for(var a=0;a<t.length();a++)null!=o[i][a]&&i<n&&this.addEdges(e,t,o,i,o[i][a],r);for(a=0;a<t.length();a++)o[i-1][a]=null}var s=-1,l=Cr.MAX_VALUE;for(a=0;a<t.length();a++)if(null!=o[n][a]){var c=o[n][a];c.cachedTotalSize<l&&(l=c.cachedTotalSize,s=a)}if(s<0)throw new Error('Failed to encode "'+e+'"');for(var u=[],d=o[n][s];null!=d;){if(d.isFNC1())u.unshift(1e3);else{var f=t.encode(d.c,d.encoderIndex);for(i=f.length-1;i>=0;i--)u.unshift(255&f[i])}(null===d.previous?0:d.previous.encoderIndex)!==d.encoderIndex&&u.unshift(256+t.getECIValue(d.encoderIndex)),d=d.previous}var h=[];for(i=0;i<h.length;i++)h[i]=u[i];return h},e}(),rc=function(){function e(e,t,r,n,o){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=n,this.fnc1=o,this.c=e===o?1e3:e;var i=this.isFNC1()?1:t.encode(e,r).length;(null===n?0:n.encoderIndex)!==r&&(i+=3),null!=n&&(i+=n.cachedTotalSize),this.cachedTotalSize=i}return e.prototype.isFNC1=function(){return 1e3===this.c},e}(),nc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oc=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ic=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ac=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ic(arguments[t]));return e};!function(e){e[e.ASCII=0]="ASCII",e[e.C40=1]="C40",e[e.TEXT=2]="TEXT",e[e.X12=3]="X12",e[e.EDF=4]="EDF",e[e.B256=5]="B256"}($l||($l={}));var sc=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],lc=function(){function e(){}return e.isExtendedASCII=function(e,t){return e!==t&&e>=128&&e<=255},e.isInC40Shift1Set=function(e){return e<=31},e.isInC40Shift2Set=function(e,t){var r,n;try{for(var o=oc(sc),i=o.next();!i.done;i=o.next()){if(i.value.charCodeAt(0)===e)return!0}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e===t},e.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},e.isInTextShift2Set=function(e,t){return this.isInC40Shift2Set(e,t)},e.encodeHighLevel=function(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=-1),void 0===n&&(n=0);var o=0;return e.startsWith(Tl)&&e.endsWith(Rl)?(o=5,e=e.substring(7,e.length-2)):e.startsWith(Ol)&&e.endsWith(Rl)&&(o=6,e=e.substring(7,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,ac(this.encode(e,t,r,n,o)))))},e.encode=function(e,t,r,n,o){return this.encodeMinimally(new dc(e,t,r,n,o)).getBytes()},e.addEdge=function(e,t){var r=t.fromPosition+t.characterLength;(null===e[r][t.getEndMode()]||e[r][t.getEndMode()].cachedTotalSize>t.cachedTotalSize)&&(e[r][t.getEndMode()]=t)},e.getNumberOfC40Words=function(t,r,n,o){for(var i=0,a=r;a<t.length();a++){if(t.isECI(a))return o[0]=0,0;var s=t.charAt(a);if(n&&ql.isNativeC40(s)||!n&&ql.isNativeText(s))i++;else if(e.isExtendedASCII(s,t.getFNC1Character())){var l=255&s;l>=128&&(n&&ql.isNativeC40(l-128)||!n&&ql.isNativeText(l-128))?i+=3:i+=4}else i+=2;if(i%3===0||(i-2)%3===0&&a+1===t.length())return o[0]=a-r+1,Math.ceil(i/3)}return o[0]=0,0},e.addEdges=function(t,r,n,o){var i,a;if(t.isECI(n))this.addEdge(r,new uc(t,$l.ASCII,n,1,o));else{var s,l=t.charAt(n);if(null===o||o.getEndMode()!==$l.EDF){ql.isDigit(l)&&t.haveNCharacters(n,2)&&ql.isDigit(t.charAt(n+1))?this.addEdge(r,new uc(t,$l.ASCII,n,2,o)):this.addEdge(r,new uc(t,$l.ASCII,n,1,o));var c=[$l.C40,$l.TEXT];try{for(var u=oc(c),d=u.next();!d.done;d=u.next()){var f=d.value,h=[];e.getNumberOfC40Words(t,n,f===$l.C40,h)>0&&this.addEdge(r,new uc(t,f,n,h[0],o))}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}t.haveNCharacters(n,3)&&ql.isNativeX12(t.charAt(n))&&ql.isNativeX12(t.charAt(n+1))&&ql.isNativeX12(t.charAt(n+2))&&this.addEdge(r,new uc(t,$l.X12,n,3,o)),this.addEdge(r,new uc(t,$l.B256,n,1,o))}for(s=0;s<3;s++){var p=n+s;if(!t.haveNCharacters(p,1)||!ql.isNativeEDIFACT(t.charAt(p)))break;this.addEdge(r,new uc(t,$l.EDF,n,s+1,o))}3===s&&t.haveNCharacters(n,4)&&ql.isNativeEDIFACT(t.charAt(n+3))&&this.addEdge(r,new uc(t,$l.EDF,n,4,o))}},e.encodeMinimally=function(e){var t=e.length(),r=Array(t+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,r,0,null);for(var n=1;n<=t;n++){for(var o=0;o<6;o++)null!==r[n][o]&&n<t&&this.addEdges(e,r,n,r[n][o]);for(o=0;o<6;o++)r[n-1][o]=null}var i=-1,a=Cr.MAX_VALUE;for(o=0;o<6;o++)if(null!==r[t][o]){var s=r[t][o],l=o>=1&&o<=3?s.cachedTotalSize+1:s.cachedTotalSize;l<a&&(a=l,i=o)}if(i<0)throw new Error('Failed to encode "'+e+'"');return new cc(r[t][i])},e}(),cc=function(){function e(e){var t=e.input,r=0,n=[],o=[],i=[];e.mode!==$l.C40&&e.mode!==$l.TEXT&&e.mode!==$l.X12||e.getEndMode()===$l.ASCII||(r+=this.prepend(uc.getBytes(254),n));for(var a=e;null!==a;)r+=this.prepend(a.getDataBytes(),n),null!==a.previous&&a.getPreviousStartMode()===a.getMode()||(a.getMode()===$l.B256&&(r<=249?(n.unshift(r),r++):(n.unshift(r%250),n.unshift(r/250+249),r+=2),o.push(n.length),i.push(r)),this.prepend(a.getLatchBytes(),n),r=0),a=a.previous;5===t.getMacroId()?r+=this.prepend(uc.getBytes(236),n):6===t.getMacroId()&&(r+=this.prepend(uc.getBytes(237),n)),t.getFNC1Character()>0&&(r+=this.prepend(uc.getBytes(232),n));for(var s=0;s<o.length;s++)this.applyRandomPattern(n,n.length-o[s],i[s]);var l=e.getMinSymbolSize(n.length);for(n.length<l&&n.push(129);n.length<l;)n.push(this.randomize253State(n.length+1));this.bytes=new Uint8Array(n.length);for(s=0;s<this.bytes.length;s++)this.bytes[s]=n[s]}return e.prototype.prepend=function(e,t){for(var r=e.length-1;r>=0;r--)t.unshift(e[r]);return e.length},e.prototype.randomize253State=function(e){var t=129+(149*e%253+1);return t<=254?t:t-254},e.prototype.applyRandomPattern=function(e,t,r){for(var n=0;n<r;n++){var o=t+n,i=(255&e[o])+(149*(o+1)%255+1);e[o]=i<=255?i:i-256}},e.prototype.getBytes=function(){return this.bytes},e}(),uc=function(){function e(e,t,r,n,o){if(this.input=e,this.mode=t,this.fromPosition=r,this.characterLength=n,this.previous=o,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(r+n<=e.length()))throw new Error("Invalid edge");var i=null!==o?o.cachedTotalSize:0,a=this.getPreviousMode();switch(t){case $l.ASCII:i++,(e.isECI(r)||lc.isExtendedASCII(e.charAt(r),e.getFNC1Character()))&&i++,a!==$l.C40&&a!==$l.TEXT&&a!==$l.X12||i++;break;case $l.B256:i++,(a!==$l.B256||250===this.getB256Size())&&i++,a===$l.ASCII?i++:a!==$l.C40&&a!==$l.TEXT&&a!==$l.X12||(i+=2);break;case $l.C40:case $l.TEXT:case $l.X12:if(t===$l.X12)i+=2;else{i+=2*lc.getNumberOfC40Words(e,r,t===$l.C40,[])}a===$l.ASCII||a===$l.B256?i++:a===t||a!==$l.C40&&a!==$l.TEXT&&a!==$l.X12||(i+=2);break;case $l.EDF:i+=3,a===$l.ASCII||a===$l.B256?i++:a!==$l.C40&&a!==$l.TEXT&&a!==$l.X12||(i+=2)}this.cachedTotalSize=i}return e.prototype.getB256Size=function(){for(var e=0,t=this;null!==t&&t.mode===$l.B256&&e<=250;)e++,t=t.previous;return e},e.prototype.getPreviousStartMode=function(){return null===this.previous?$l.ASCII:this.previous.mode},e.prototype.getPreviousMode=function(){return null===this.previous?$l.ASCII:this.previous.getEndMode()},e.prototype.getEndMode=function(){if(this.mode===$l.EDF){if(this.characterLength<4)return $l.ASCII;if((e=this.getLastASCII())>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return $l.ASCII}if(this.mode===$l.C40||this.mode===$l.TEXT||this.mode===$l.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&0===this.getCodewordsRemaining(this.cachedTotalSize))return $l.ASCII;var e;if(1===(e=this.getLastASCII())&&0===this.getCodewordsRemaining(this.cachedTotalSize+1))return $l.ASCII}return this.mode},e.prototype.getMode=function(){return this.mode},e.prototype.getLastASCII=function(){var e=this.input.length(),t=this.fromPosition+this.characterLength;return e-t>4||t>=e?0:e-t===1?lc.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?0:1:e-t===2?lc.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())||lc.isExtendedASCII(this.input.charAt(t+1),this.input.getFNC1Character())?0:ql.isDigit(this.input.charAt(t))&&ql.isDigit(this.input.charAt(t+1))?1:2:e-t===3?ql.isDigit(this.input.charAt(t))&&ql.isDigit(this.input.charAt(t+1))&&!lc.isExtendedASCII(this.input.charAt(t+2),this.input.getFNC1Character())||ql.isDigit(this.input.charAt(t+1))&&ql.isDigit(this.input.charAt(t+2))&&!lc.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?2:0:ql.isDigit(this.input.charAt(t))&&ql.isDigit(this.input.charAt(t+1))&&ql.isDigit(this.input.charAt(t+2))&&ql.isDigit(this.input.charAt(t+3))?2:0},e.prototype.getMinSymbolSize=function(e){var t,r,n,o,i,a;switch(this.input.getShapeHint()){case 1:try{for(var s=oc(this.squareCodewordCapacities),l=s.next();!l.done;l=s.next()){if((h=l.value)>=e)return h}}catch(p){t={error:p}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}break;case 2:try{for(var c=oc(this.rectangularCodewordCapacities),u=c.next();!u.done;u=c.next()){if((h=u.value)>=e)return h}}catch(g){n={error:g}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}}try{for(var d=oc(this.allCodewordCapacities),f=d.next();!f.done;f=d.next()){var h;if((h=f.value)>=e)return h}}catch(m){i={error:m}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},e.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},e.getBytes=function(e,t){var r=new Uint8Array(t?2:1);return r[0]=e,t&&(r[1]=t),r},e.prototype.setC40Word=function(e,t,r,n,o){var i=1600*(255&r)+40*(255&n)+(255&o)+1;e[t]=i/256,e[t+1]=i%256},e.prototype.getX12Value=function(e){return 13===e?0:42===e?1:62===e?2:32===e?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},e.prototype.getX12Words=function(){if(this.characterLength%3!==0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),t=0;t<e.length;t+=2)this.setC40Word(e,t,this.getX12Value(this.input.charAt(this.fromPosition+t/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+2)));return e},e.prototype.getShiftValue=function(e,t,r){return t&&lc.isInC40Shift1Set(e)||!t&&lc.isInTextShift1Set(e)?0:t&&lc.isInC40Shift2Set(e,r)||!t&&lc.isInTextShift2Set(e,r)?1:2},e.prototype.getC40Value=function(e,t,r,n){if(r===n){if(2!==t)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?r<=31?r:32===r?3:r<=47?r-33:r<=57?r-44:r<=64?r-43:r<=90?r-51:r<=95?r-69:r<=127?r-96:r:0===r?0:0===t&&r<=3?r-1:1===t&&r<=31?r:32===r?3:r>=33&&r<=47?r-33:r>=48&&r<=57?r-44:r>=58&&r<=64?r-43:r>=65&&r<=90?r-64:r>=91&&r<=95?r-69:96===r?0:r>=97&&r<=122?r-83:r>=123&&r<=127?r-96:r},e.prototype.getC40Words=function(e,t){for(var r=[],n=0;n<this.characterLength;n++){var o=this.input.charAt(this.fromPosition+n);if(e&&ql.isNativeC40(o)||!e&&ql.isNativeText(o))r.push(this.getC40Value(e,0,o,t));else if(lc.isExtendedASCII(o,t)){var i=(255&o)-128;if(e&&ql.isNativeC40(i)||!e&&ql.isNativeText(i))r.push(1),r.push(30),r.push(this.getC40Value(e,0,i,t));else{r.push(1),r.push(30);a=this.getShiftValue(i,e,t);r.push(a),r.push(this.getC40Value(e,a,i,t))}}else{var a=this.getShiftValue(o,e,t);r.push(a),r.push(this.getC40Value(e,a,o,t))}}if(r.length%3!==0){if((r.length-2)%3!==0||this.fromPosition+this.characterLength!==this.input.length())throw new Error("C40 words must be a multiple of 3");r.push(0)}var s=new Uint8Array(r.length/3*2),l=0;for(n=0;n<r.length;n+=3)this.setC40Word(s,l,255&r[n],255&r[n+1],255&r[n+2]),l+=2;return s},e.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),t=new Uint8Array(3*e),r=this.fromPosition,n=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),o=0;o<e;o+=3){for(var i=[],a=0;a<4;a++)i[a]=r<=n?63&this.input.charAt(r++):r===n+1?31:0;var s=i[0]<<18;s|=i[1]<<12,s|=i[2]<<6,s|=i[3],t[o]=s>>16&255,t[o+1]=s>>8&255,t[o+2]=255&s}return t},e.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case $l.ASCII:case $l.B256:switch(this.mode){case $l.B256:return e.getBytes(231);case $l.C40:return e.getBytes(230);case $l.TEXT:return e.getBytes(239);case $l.X12:return e.getBytes(238);case $l.EDF:return e.getBytes(240)}break;case $l.C40:case $l.TEXT:case $l.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case $l.ASCII:return e.getBytes(254);case $l.B256:return e.getBytes(254,231);case $l.C40:return e.getBytes(254,230);case $l.TEXT:return e.getBytes(254,239);case $l.X12:return e.getBytes(254,238);case $l.EDF:return e.getBytes(254,240)}break;case $l.EDF:if(this.mode!==$l.EDF)throw new Error("Cannot switch from EDF to "+this.mode)}return new Uint8Array(0)},e.prototype.getDataBytes=function(){switch(this.mode){case $l.ASCII:return this.input.isECI(this.fromPosition)?e.getBytes(241,this.input.getECIValue(this.fromPosition)+1):lc.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?e.getBytes(235,this.input.charAt(this.fromPosition)-127):2===this.characterLength?e.getBytes(10*this.input.charAt(this.fromPosition)+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?e.getBytes(232):e.getBytes(this.input.charAt(this.fromPosition)+1);case $l.B256:return e.getBytes(this.input.charAt(this.fromPosition));case $l.C40:return this.getC40Words(!0,this.input.getFNC1Character());case $l.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case $l.X12:return this.getX12Words();case $l.EDF:return this.getEDFBytes()}},e}(),dc=function(e){function t(t,r,n,o,i){var a=e.call(this,t,r,n)||this;return a.shape=o,a.macroId=i,a}return nc(t,e),t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t}(tc);!function(){function e(){}e.prototype.encode=function(e,t,r,n,o){if(void 0===o&&(o=null),""===e.trim())throw new Error("Found empty contents");if(t!==nn.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+t);if(r<0||n<0)throw new Error("Requested dimensions can't be negative: "+r+"x"+n);var i,a=0,s=null,l=null;if(null!=o){var c=o.get(rl.DATA_MATRIX_SHAPE);null!=c&&(a=c);var u=o.get(rl.MIN_SIZE);null!=u&&(s=u);var d=o.get(rl.MAX_SIZE);null!=d&&(l=d)}if(null!=o&&o.has(rl.DATA_MATRIX_COMPACT)&&Boolean(o.get(rl.DATA_MATRIX_COMPACT).toString())){var f=o.has(rl.GS1_FORMAT)&&Boolean(o.get(rl.GS1_FORMAT).toString()),h=null;o.has(rl.CHARACTER_SET)&&(h=xl.forName(o.get(rl.CHARACTER_SET).toString())),i=lc.encodeHighLevel(e,h,f?29:-1,a)}else{var p=null!=o&&o.has(rl.FORCE_C40)&&Boolean(o.get(rl.FORCE_C40).toString());i=ql.encodeHighLevel(e,a,s,l,p)}var g=Vl.lookup(i.length,a,s,l,!0),m=Pl.encodeECC200(i,g),y=new _l(m,g.getSymbolDataWidth(),g.getSymbolDataHeight());return y.place(),this.encodeLowLevel(y,g,r,n)},e.prototype.encodeLowLevel=function(e,t,r,n){for(var o=t.getSymbolDataWidth(),i=t.getSymbolDataHeight(),a=new sl(t.getSymbolWidth(),t.getSymbolHeight()),s=0,l=0;l<i;l++){var c=void 0;if(l%t.matrixHeight===0){c=0;for(var u=0;u<t.getSymbolWidth();u++)a.setBoolean(c,s,u%2===0),c++;s++}c=0;for(u=0;u<o;u++)u%t.matrixWidth===0&&(a.setBoolean(c,s,!0),c++),a.setBoolean(c,s,e.getBit(u,l)),c++,u%t.matrixWidth===t.matrixWidth-1&&(a.setBoolean(c,s,l%2===0),c++);if(s++,l%t.matrixHeight===t.matrixHeight-1){c=0;for(u=0;u<t.getSymbolWidth();u++)a.setBoolean(c,s,!0),c++;s++}}return this.convertByteMatrixToBitMatrix(a,r,n)},e.prototype.convertByteMatrixToBitMatrix=function(e,t,r){var n,o=e.getWidth(),i=e.getHeight(),a=Math.max(t,o),s=Math.max(r,i),l=Math.min(a/o,s/i),c=(a-o*l)/2,u=(s-i*l)/2;r<i||t<o?(c=0,u=0,n=new Br(o,i)):n=new Br(t,r),n.clear();for(var d=0,f=u;d<i;d++,f+=l)for(var h=0,p=c;h<o;h++,p+=l)1===e.get(h,d)&&n.setRegion(p,f,l,l);return n}}();const fc=function(){function e(){}return e.prototype.isCompact=function(){return this.compact},e.prototype.setCompact=function(e){this.compact=e},e.prototype.getSize=function(){return this.size},e.prototype.setSize=function(e){this.size=e},e.prototype.getLayers=function(){return this.layers},e.prototype.setLayers=function(e){this.layers=e},e.prototype.getCodeWords=function(){return this.codeWords},e.prototype.setCodeWords=function(e){this.codeWords=e},e.prototype.getMatrix=function(){return this.matrix},e.prototype.setMatrix=function(e){this.matrix=e},e}();const hc=function(){function e(){}return e.singletonList=function(e){return[e]},e.min=function(e,t){return e.sort(t)[0]},e}();const pc=function(){function e(e){this.previous=e}return e.prototype.getPrevious=function(){return this.previous},e}();var gc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const mc=function(e){function t(t,r,n){var o=e.call(this,t)||this;return o.value=r,o.bitCount=n,o}return gc(t,e),t.prototype.appendTo=function(e,t){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,r){return new t(this,e,r)},t.prototype.addBinaryShift=function(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,r)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+Cr.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(pc);var yc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const vc=function(e){function t(t,r,n){var o=e.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=n,o}return yc(t,e),t.prototype.appendTo=function(e,t){for(var r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===r?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+r],8)},t.prototype.addBinaryShift=function(e,r){return new t(this,e,r)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(mc);function wc(e,t,r){return new mc(e,t,r)}var bc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],xc=new mc(null,0,0),Cc=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],_c=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var Ec=function(e){var t,r;try{for(var n=_c(e),o=n.next();!o.done;o=n.next()){var i=o.value;xr.fill(i,-1)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return e[0][4]=0,e[1][4]=0,e[1][0]=28,e[3][4]=0,e[2][4]=0,e[2][0]=15,e}(xr.createInt32Array(6,6)),Sc=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ac=function(){function e(e,t,r,n){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=n}return e.prototype.getMode=function(){return this.mode},e.prototype.getToken=function(){return this.token},e.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},e.prototype.getBitCount=function(){return this.bitCount},e.prototype.latchAndAppend=function(t,r){var n=this.bitCount,o=this.token;if(t!==this.mode){var i=Cc[this.mode][t];o=wc(o,65535&i,i>>16),n+=i>>16}var a=2===t?4:5;return new e(o=wc(o,r,a),t,0,n+a)},e.prototype.shiftAndAppend=function(t,r){var n=this.token,o=2===this.mode?4:5;return n=wc(n,Ec[this.mode][t],o),new e(n=wc(n,r,5),this.mode,0,this.bitCount+o+5)},e.prototype.addBinaryShiftChar=function(t){var r=this.token,n=this.mode,o=this.bitCount;if(4===this.mode||2===this.mode){var i=Cc[n][0];r=wc(r,65535&i,i>>16),o+=i>>16,n=0}var a=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new e(r,n,this.binaryShiftByteCount+1,o+a);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(t+1)),s},e.prototype.endBinaryShift=function(t){if(0===this.binaryShiftByteCount)return this;var r=this.token;return new e(r=function(e,t,r){return new vc(e,t,r)}(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)},e.prototype.isBetterThanOrEqualTo=function(t){var r=this.bitCount+(Cc[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=e.calculateBinaryShiftCost(t)-e.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount},e.prototype.toBitArray=function(e){for(var t,r,n=[],o=this.endBinaryShift(e.length).token;null!==o;o=o.getPrevious())n.unshift(o);var i=new _r;try{for(var a=Sc(n),s=a.next();!s.done;s=a.next()){s.value.appendTo(i,e)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},e.prototype.toString=function(){return jr.format("%s bits=%d bytes=%d",bc[this.mode],this.bitCount,this.binaryShiftByteCount)},e.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},e.INITIAL_STATE=new e(xc,0,0,0),e}();const Nc=Ac;var Ic=function(e){var t=jr.getCharCode(" "),r=jr.getCharCode("."),n=jr.getCharCode(",");e[0][t]=1;for(var o=jr.getCharCode("Z"),i=jr.getCharCode("A"),a=i;a<=o;a++)e[0][a]=a-i+2;e[1][t]=1;var s=jr.getCharCode("z"),l=jr.getCharCode("a");for(a=l;a<=s;a++)e[1][a]=a-l+2;e[2][t]=1;var c=jr.getCharCode("9"),u=jr.getCharCode("0");for(a=u;a<=c;a++)e[2][a]=a-u+2;e[2][n]=12,e[2][r]=13;for(var d=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],f=0;f<d.length;f++)e[3][jr.getCharCode(d[f])]=f;var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(f=0;f<h.length;f++)jr.getCharCode(h[f])>0&&(e[4][jr.getCharCode(h[f])]=f);return e}(xr.createInt32Array(5,256)),kc=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tc=function(){function e(e){this.text=e}return e.prototype.encode=function(){for(var t=jr.getCharCode(" "),r=jr.getCharCode("\n"),n=hc.singletonList(Nc.INITIAL_STATE),o=0;o<this.text.length;o++){var i=void 0,a=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case jr.getCharCode("\r"):i=a===r?2:0;break;case jr.getCharCode("."):i=a===t?3:0;break;case jr.getCharCode(","):i=a===t?4:0;break;case jr.getCharCode(":"):i=a===t?5:0;break;default:i=0}i>0?(n=e.updateStateListForPair(n,o,i),o++):n=this.updateStateListForChar(n,o)}return hc.min(n,function(e,t){return e.getBitCount()-t.getBitCount()}).toBitArray(this.text)},e.prototype.updateStateListForChar=function(t,r){var n,o,i=[];try{for(var a=kc(t),s=a.next();!s.done;s=a.next()){var l=s.value;this.updateStateForChar(l,r,i)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return e.simplifyStates(i)},e.prototype.updateStateForChar=function(e,t,r){for(var n=255&this.text[t],o=Ic[e.getMode()][n]>0,i=null,a=0;a<=4;a++){var s=Ic[a][n];if(s>0){if(null==i&&(i=e.endBinaryShift(t)),!o||a===e.getMode()||2===a){var l=i.latchAndAppend(a,s);r.push(l)}if(!o&&Ec[e.getMode()][a]>=0){var c=i.shiftAndAppend(a,s);r.push(c)}}}if(e.getBinaryShiftByteCount()>0||0===Ic[e.getMode()][n]){var u=e.addBinaryShiftChar(t);r.push(u)}},e.updateStateListForPair=function(e,t,r){var n,o,i=[];try{for(var a=kc(e),s=a.next();!s.done;s=a.next()){var l=s.value;this.updateStateForPair(l,t,r,i)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return this.simplifyStates(i)},e.updateStateForPair=function(e,t,r,n){var o=e.endBinaryShift(t);if(n.push(o.latchAndAppend(4,r)),4!==e.getMode()&&n.push(o.shiftAndAppend(4,r)),3===r||4===r){var i=o.latchAndAppend(2,16-r).latchAndAppend(2,1);n.push(i)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);n.push(a)}},e.simplifyStates=function(e){var t,r,n,o,i=[];try{for(var a=kc(e),s=a.next();!s.done;s=a.next()){var l=s.value,c=!0,u=function(e){if(e.isBetterThanOrEqualTo(l))return c=!1,"break";l.isBetterThanOrEqualTo(e)&&(i=i.filter(function(t){return t!==e}))};try{for(var d=(n=void 0,kc(i)),f=d.next();!f.done;f=d.next()){if("break"===u(f.value))break}}catch(h){n={error:h}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}c&&i.push(l)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},e}();const Oc=Tc;var Rc=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Mc=function(){function e(){}return e.encodeBytes=function(t){return e.encode(t,e.DEFAULT_EC_PERCENT,e.DEFAULT_AZTEC_LAYERS)},e.encode=function(t,r,n){var o,i,a,s,l,c=new Oc(t).encode(),u=Cr.truncDivision(c.getSize()*r,100)+11,d=c.getSize()+u;if(n!==e.DEFAULT_AZTEC_LAYERS){if(o=n<0,(i=Math.abs(n))>(o?e.MAX_NB_BITS_COMPACT:e.MAX_NB_BITS))throw new lr(jr.format("Illegal value %s for layers",n));var f=(a=e.totalBitsInLayer(i,o))-a%(s=e.WORD_SIZE[i]);if((l=e.stuffBits(c,s)).getSize()+u>f)throw new lr("Data to large for user specified layer");if(o&&l.getSize()>64*s)throw new lr("Data to large for user specified layer")}else{s=0,l=null;for(var h=0;;h++){if(h>e.MAX_NB_BITS)throw new lr("Data too large for an Aztec code");if(i=(o=h<=3)?h+1:h,!(d>(a=e.totalBitsInLayer(i,o)))){null!=l&&s===e.WORD_SIZE[i]||(s=e.WORD_SIZE[i],l=e.stuffBits(c,s));f=a-a%s;if(!(o&&l.getSize()>64*s)&&l.getSize()+u<=f)break}}}var p,g=e.generateCheckWords(l,a,s),m=l.getSize()/s,y=e.generateModeMessage(o,i,m),v=(o?11:14)+4*i,w=new Int32Array(v);if(o){p=v;for(h=0;h<w.length;h++)w[h]=h}else{p=v+1+2*Cr.truncDivision(Cr.truncDivision(v,2)-1,15);var b=Cr.truncDivision(v,2),x=Cr.truncDivision(p,2);for(h=0;h<b;h++){var C=h+Cr.truncDivision(h,15);w[b-h-1]=x-C-1,w[b+h]=x+C+1}}for(var _=new Br(p),E=(h=0,0);h<i;h++){for(var S=4*(i-h)+(o?9:12),A=0;A<S;A++)for(var N=2*A,I=0;I<2;I++)g.get(E+N+I)&&_.set(w[2*h+I],w[2*h+A]),g.get(E+2*S+N+I)&&_.set(w[2*h+A],w[v-1-2*h-I]),g.get(E+4*S+N+I)&&_.set(w[v-1-2*h-I],w[v-1-2*h-A]),g.get(E+6*S+N+I)&&_.set(w[v-1-2*h-A],w[2*h+I]);E+=8*S}if(e.drawModeMessage(_,o,p,y),o)e.drawBullsEye(_,Cr.truncDivision(p,2),5);else{e.drawBullsEye(_,Cr.truncDivision(p,2),7);for(h=0,A=0;h<Cr.truncDivision(v,2)-1;h+=15,A+=16)for(I=1&Cr.truncDivision(p,2);I<p;I+=2)_.set(Cr.truncDivision(p,2)-A,I),_.set(Cr.truncDivision(p,2)+A,I),_.set(I,Cr.truncDivision(p,2)-A),_.set(I,Cr.truncDivision(p,2)+A)}var k=new fc;return k.setCompact(o),k.setSize(p),k.setLayers(i),k.setCodeWords(m),k.setMatrix(_),k},e.drawBullsEye=function(e,t,r){for(var n=0;n<r;n+=2)for(var o=t-n;o<=t+n;o++)e.set(o,t-n),e.set(o,t+n),e.set(t-n,o),e.set(t+n,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},e.generateModeMessage=function(t,r,n){var o=new _r;return t?(o.appendBits(r-1,2),o.appendBits(n-1,6),o=e.generateCheckWords(o,28,4)):(o.appendBits(r-1,5),o.appendBits(n-1,11),o=e.generateCheckWords(o,40,4)),o},e.drawModeMessage=function(e,t,r,n){var o=Cr.truncDivision(r,2);if(t)for(var i=0;i<7;i++){var a=o-3+i;n.get(i)&&e.set(a,o-5),n.get(i+7)&&e.set(o+5,a),n.get(20-i)&&e.set(a,o+5),n.get(27-i)&&e.set(o-5,a)}else for(i=0;i<10;i++){a=o-5+i+Cr.truncDivision(i,5);n.get(i)&&e.set(a,o-7),n.get(i+10)&&e.set(o+7,a),n.get(29-i)&&e.set(a,o+7),n.get(39-i)&&e.set(o-7,a)}},e.generateCheckWords=function(t,r,n){var o,i,a=t.getSize()/n,s=new nl(e.getGF(n)),l=Cr.truncDivision(r,n),c=e.bitsToWords(t,n,l);s.encode(c,l-a);var u=r%n,d=new _r;d.appendBits(0,u);try{for(var f=Rc(Array.from(c)),h=f.next();!h.done;h=f.next()){var p=h.value;d.appendBits(p,n)}}catch(g){o={error:g}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}return d},e.bitsToWords=function(e,t,r){var n,o,i=new Int32Array(r);for(n=0,o=e.getSize()/t;n<o;n++){for(var a=0,s=0;s<t;s++)a|=e.get(n*t+s)?1<<t-s-1:0;i[n]=a}return i},e.getGF=function(e){switch(e){case 4:return hn.AZTEC_PARAM;case 6:return hn.AZTEC_DATA_6;case 8:return hn.AZTEC_DATA_8;case 10:return hn.AZTEC_DATA_10;case 12:return hn.AZTEC_DATA_12;default:throw new lr("Unsupported word size "+e)}},e.stuffBits=function(e,t){for(var r=new _r,n=e.getSize(),o=(1<<t)-2,i=0;i<n;i+=t){for(var a=0,s=0;s<t;s++)(i+s>=n||e.get(i+s))&&(a|=1<<t-1-s);(a&o)===o?(r.appendBits(a&o,t),i--):0===(a&o)?(r.appendBits(1|a,t),i--):r.appendBits(a,t)}return r},e.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.DEFAULT_EC_PERCENT=33,e.DEFAULT_AZTEC_LAYERS=0,e.MAX_NB_BITS=32,e.MAX_NB_BITS_COMPACT=4,e.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),e}();const Pc=Mc;!function(){function e(){}e.prototype.encode=function(e,t,r,n){return this.encodeWithHints(e,t,r,n,null)},e.prototype.encodeWithHints=function(t,r,n,o,i){var a=Cl.ISO_8859_1,s=Pc.DEFAULT_EC_PERCENT,l=Pc.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(rl.CHARACTER_SET)&&(a=xl.forName(i.get(rl.CHARACTER_SET).toString())),i.has(rl.ERROR_CORRECTION)&&(s=Cr.parseInt(i.get(rl.ERROR_CORRECTION).toString())),i.has(rl.AZTEC_LAYERS)&&(l=Cr.parseInt(i.get(rl.AZTEC_LAYERS).toString()))),e.encodeLayers(t,r,n,o,a,s,l)},e.encodeLayers=function(t,r,n,o,i,a,s){if(r!==nn.AZTEC)throw new lr("Can only encode AZTEC, but got "+r);var l=Pc.encode(jr.getBytes(t,i),a,s);return e.renderResult(l,n,o)},e.renderResult=function(e,t,r){var n=e.getMatrix();if(null==n)throw new yn;for(var o=n.getWidth(),i=n.getHeight(),a=Math.max(t,o),s=Math.max(r,i),l=Math.min(a/o,s/i),c=(a-o*l)/2,u=(s-i*l)/2,d=new Br(a,s),f=0,h=u;f<i;f++,h+=l)for(var p=0,g=c;p<o;p++,g+=l)n.get(p,f)&&d.setRegion(g,h,l,l);return d}}();var jc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dc=function(e){function t(r){var n=e.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=t.makeBufferFromCanvasImageData(r),n}return jc(t,e),t.makeBufferFromCanvasImageData=function(e){var r;try{r=e.getContext("2d",{willReadFrequently:!0})}catch(Au){r=e.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var n=r.getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(n.data,e.width,e.height)},t.toGrayscaleBuffer=function(e,t,r){for(var n=new Uint8ClampedArray(t*r),o=0,i=0,a=e.length;o<a;o+=4,i++){var s=void 0;if(0===e[o+3])s=255;else s=306*e[o]+601*e[o+1]+117*e[o+2]+512>>10;n[i]=s}return n},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new lr("Requested row is outside the image: "+e);var r=this.getWidth(),n=e*r;return null===t?t=this.buffer.slice(n,n+r):(t.length<r&&(t=new Uint8ClampedArray(r)),t.set(this.buffer.slice(n,n+r))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,r,n,o){return e.prototype.crop.call(this,t,r,n,o),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.invert=function(){return new Xr(this)},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var n=e*t.DEGREE_TO_RADIANS,o=this.canvas.width,i=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(n))*o+Math.abs(Math.sin(n))*i),s=Math.ceil(Math.abs(Math.sin(n))*o+Math.abs(Math.cos(n))*i);r.width=a,r.height=s;var l=r.getContext("2d");if(!l)throw new Error("Could not create a Canvas Context element.");return l.translate(a/2,s/2),l.rotate(n),l.drawImage(this.canvas,o/-2,i/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.DEGREE_TO_RADIANS=Math.PI/180,t}(Wr);function Bc(){return"undefined"!==typeof navigator}function Lc(){return!!(Bc()&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}var Fc=function(){return Fc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Fc.apply(this,arguments)},Uc=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(Au){i(Au)}}function s(e){try{l(n.throw(e))}catch(Au){i(Au)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},zc=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(Au){i=[6,Au],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Vc=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hc={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Wc=function(){function e(e,t,r){void 0===t&&(t=new Map),void 0===r&&(r={}),this.reader=e,this.hints=t,this.options=Fc(Fc({},Hc),r)}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(e){this.hints.set(Sr.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),e.addVideoSource=function(e,t){try{e.srcObject=t}catch(r){console.error("got interrupted by new loading request")}},e.mediaStreamSetTorch=function(e,t){return Uc(this,void 0,void 0,function(){return zc(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},e.mediaStreamIsTorchCompatible=function(t){var r,n,o=t.getVideoTracks();try{for(var i=Vc(o),a=i.next();!a.done;a=i.next()){var s=a.value;if(e.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1},e.mediaStreamIsTorchCompatibleTrack=function(e){try{return"torch"in e.getCapabilities()}catch(t){return console.error(t),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},e.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},e.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new ar("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new ar("element with id '".concat(e,"' must be an ").concat(t," element"));return r},e.createVideoElement=function(t){if(t instanceof HTMLVideoElement)return t;if("string"===typeof t)return e.getMediaElement(t,"video");if(!t&&"undefined"!==typeof document){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},e.prepareImageElement=function(t){if(t instanceof HTMLImageElement)return t;if("string"===typeof t)return e.getMediaElement(t,"img");if("undefined"===typeof t){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},e.prepareVideoElement=function(t){var r=e.createVideoElement(t);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},e.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.createBinaryBitmapFromCanvas=function(e){var t=new Dc(e),r=new Hr(t);return new cr(r)},e.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},e.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},e.createCaptureCanvas=function(t){if(!t)throw new ar("Cannot create a capture canvas without a media element.");if("undefined"===typeof document)throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var r=document.createElement("canvas"),n=e.getMediaElementDimensions(t),o=n.width,i=n.height;return r.style.width=o+"px",r.style.height=i+"px",r.width=o,r.height=i,r},e.tryPlayVideo=function(t){return Uc(this,void 0,void 0,function(){var r;return zc(this,function(n){switch(n.label){case 0:if(null===t||void 0===t?void 0:t.ended)return console.error("Trying to play video that has ended."),[2,!1];if(e.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},e.createCanvasFromMediaElement=function(t){var r=e.createCaptureCanvas(t),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return e.drawImageOnCanvas(n,t),r},e.createBinaryBitmapFromMediaElem=function(t){var r=e.createCanvasFromMediaElement(t);return e.createBinaryBitmapFromCanvas(r)},e.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},e.listVideoInputDevices=function(){return Uc(this,void 0,void 0,function(){var e,t,r,n,o,i,a,s,l,c,u,d;return zc(this,function(f){switch(f.label){case 0:if(!Bc())throw new Error("Can't enumerate devices, navigator is not present.");if(!Lc())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=f.sent(),t=[];try{for(r=Vc(e),n=r.next();!n.done;n=r.next())o=n.value,"videoinput"===(i="video"===o.kind?"videoinput":o.kind)&&(a=o.deviceId||o.id,s=o.label||"Video device ".concat(t.length+1),l=o.groupId,c={deviceId:a,label:s,kind:i,groupId:l},t.push(c))}catch(h){u={error:h}}finally{try{n&&!n.done&&(d=r.return)&&d.call(r)}finally{if(u)throw u.error}}return[2,t]}})})},e.findDeviceById=function(t){return Uc(this,void 0,void 0,function(){var r;return zc(this,function(n){switch(n.label){case 0:return[4,e.listVideoInputDevices()];case 1:return(r=n.sent())?[2,r.find(function(e){return e.deviceId===t})]:[2]}})})},e.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch(t){e.src=""}e&&e.removeAttribute("src")}},e.releaseAllStreams=function(){0!==e.streamTracker.length&&e.streamTracker.forEach(function(e){e.getTracks().forEach(function(e){return e.stop()})}),e.streamTracker=[]},e.playVideoOnLoadAsync=function(t,r){return Uc(this,void 0,void 0,function(){return zc(this,function(n){switch(n.label){case 0:return[4,e.tryPlayVideo(t)];case 1:return n.sent()?[2,!0]:[2,new Promise(function(n,o){var i=setTimeout(function(){e.isVideoPlaying(t)||(o(!1),t.removeEventListener("canplay",a))},r),a=function(){e.tryPlayVideo(t).then(function(e){clearTimeout(i),t.removeEventListener("canplay",a),n(e)})};t.addEventListener("canplay",a)})]}})})},e.attachStreamToVideo=function(t,r,n){return void 0===n&&(n=5e3),Uc(this,void 0,void 0,function(){var o;return zc(this,function(i){switch(i.label){case 0:return o=e.prepareVideoElement(r),e.addVideoSource(o,t),[4,e.playVideoOnLoadAsync(o,n)];case 1:return i.sent(),[2,o]}})})},e._waitImageLoad=function(t){return new Promise(function(r,n){var o=setTimeout(function(){e.isImageLoaded(t)||(t.removeEventListener("load",i),n())},1e4),i=function(){clearTimeout(o),t.removeEventListener("load",i),r()};t.addEventListener("load",i)})},e.checkCallbackFnOrThrow=function(e){if(!e)throw new ar("`callbackFn` is a required parameter, you cannot capture results without it.")},e.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(e){return e.stop()}),e=void 0},e.prototype.decode=function(t){var r=e.createCanvasFromMediaElement(t);return this.decodeFromCanvas(r)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},e.prototype.decodeFromCanvas=function(t){var r=e.createBinaryBitmapFromCanvas(t);return this.decodeBitmap(r)},e.prototype.decodeFromImageElement=function(t){return Uc(this,void 0,void 0,function(){var r;return zc(this,function(n){switch(n.label){case 0:if(!t)throw new ar("An image element must be provided.");return r=e.prepareImageElement(t),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},e.prototype.decodeFromImageUrl=function(t){return Uc(this,void 0,void 0,function(){var r;return zc(this,function(n){switch(n.label){case 0:if(!t)throw new ar("An URL must be provided.");(r=e.prepareImageElement()).src=t,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return e.destroyImageElement(r),[7];case 4:return[2]}})})},e.prototype.decodeFromConstraints=function(t,r,n){return Uc(this,void 0,void 0,function(){var o,i;return zc(this,function(a){switch(a.label){case 0:return e.checkCallbackFnOrThrow(n),[4,this.getUserMedia(t)];case 1:o=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.decodeFromStream(o,r,n)];case 3:return[2,a.sent()];case 4:throw i=a.sent(),e.disposeMediaStream(o),i;case 5:return[2]}})})},e.prototype.decodeFromStream=function(t,r,n){return Uc(this,void 0,void 0,function(){var o,i,a,s,l,c,u,d,f=this;return zc(this,function(h){switch(h.label){case 0:return e.checkCallbackFnOrThrow(n),o=this.options.tryPlayVideoTimeout,[4,e.attachStreamToVideo(t,r,o)];case 1:return i=h.sent(),a=function(){e.disposeMediaStream(t),e.cleanVideoSource(i)},s=this.scan(i,n,a),l=t.getVideoTracks(),c=Fc(Fc({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(e,t){return Uc(this,void 0,void 0,function(){var r,n,o,i,a,s;return zc(this,function(c){switch(c.label){case 0:r=t?l.filter(t):l,c.label=1;case 1:c.trys.push([1,6,7,8]),n=Vc(r),o=n.next(),c.label=2;case 2:return o.done?[3,5]:[4,o.value.applyConstraints(e)];case 3:c.sent(),c.label=4;case 4:return o=n.next(),[3,2];case 5:return[3,8];case 6:return i=c.sent(),a={error:i},[3,8];case 7:try{o&&!o.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(e){return l.find(e).getConstraints()},streamVideoSettingsGet:function(e){return l.find(e).getSettings()},streamVideoCapabilitiesGet:function(e){return l.find(e).getCapabilities()}}),e.mediaStreamIsTorchCompatible(t)&&(u=null===l||void 0===l?void 0:l.find(function(t){return e.mediaStreamIsTorchCompatibleTrack(t)}),d=function(t){return Uc(f,void 0,void 0,function(){return zc(this,function(r){switch(r.label){case 0:return[4,e.mediaStreamSetTorch(u,t)];case 1:return r.sent(),[2]}})})},c.switchTorch=d,c.stop=function(){return Uc(f,void 0,void 0,function(){return zc(this,function(e){switch(e.label){case 0:return s.stop(),[4,d(!1)];case 1:return e.sent(),[2]}})})}),[2,c]}})})},e.prototype.decodeFromVideoDevice=function(t,r,n){return Uc(this,void 0,void 0,function(){var o;return zc(this,function(i){switch(i.label){case 0:return e.checkCallbackFnOrThrow(n),o={video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(o,r,n)];case 1:return[2,i.sent()]}})})},e.prototype.decodeFromVideoElement=function(t,r){return Uc(this,void 0,void 0,function(){var n,o;return zc(this,function(i){switch(i.label){case 0:if(e.checkCallbackFnOrThrow(r),!t)throw new ar("A video element must be provided.");return n=e.prepareVideoElement(t),o=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(n,o)];case 1:return i.sent(),[2,this.scan(n,r)]}})})},e.prototype.decodeFromVideoUrl=function(t,r){return Uc(this,void 0,void 0,function(){var n,o,i;return zc(this,function(a){switch(a.label){case 0:if(e.checkCallbackFnOrThrow(r),!t)throw new ar("An URL must be provided.");return(n=e.prepareVideoElement()).src=t,o=function(){e.cleanVideoSource(n)},i=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(n,i)];case 1:return a.sent(),[2,this.scan(n,r,o)]}})})},e.prototype.decodeOnceFromConstraints=function(e,t){return Uc(this,void 0,void 0,function(){var r;return zc(this,function(n){switch(n.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=n.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,n.sent()]}})})},e.prototype.decodeOnceFromStream=function(t,r){return Uc(this,void 0,void 0,function(){var n,o;return zc(this,function(i){switch(i.label){case 0:return n=Boolean(r),[4,e.attachStreamToVideo(t,r)];case 1:o=i.sent(),i.label=2;case 2:return i.trys.push([2,,4,5]),[4,this.scanOneResult(o)];case 3:return[2,i.sent()];case 4:return n||e.cleanVideoSource(o),[7];case 5:return[2]}})})},e.prototype.decodeOnceFromVideoDevice=function(e,t){return Uc(this,void 0,void 0,function(){var r;return zc(this,function(n){switch(n.label){case 0:return r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(r,t)];case 1:return[2,n.sent()]}})})},e.prototype.decodeOnceFromVideoElement=function(t){return Uc(this,void 0,void 0,function(){var r,n;return zc(this,function(o){switch(o.label){case 0:if(!t)throw new ar("A video element must be provided.");return r=e.prepareVideoElement(t),n=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(r,n)];case 1:return o.sent(),[4,this.scanOneResult(r)];case 2:return[2,o.sent()]}})})},e.prototype.decodeOnceFromVideoUrl=function(t){return Uc(this,void 0,void 0,function(){var r,n;return zc(this,function(o){switch(o.label){case 0:if(!t)throw new ar("An URL must be provided.");(r=e.prepareVideoElement()).src=t,n=this.decodeOnceFromVideoElement(r),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,n];case 2:return[2,o.sent()];case 3:return e.cleanVideoSource(r),[7];case 4:return[2]}})})},e.prototype.scanOneResult=function(e,t,r,n){var o=this;return void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===n&&(n=!0),new Promise(function(i,a){o.scan(e,function(e,o,s){if(e)return i(e),void s.stop();if(o){if(o instanceof Fr&&t)return;if(o instanceof dr&&r)return;if(o instanceof Nr&&n)return;s.stop(),a(o)}})})},e.prototype.scan=function(t,r,n){var o=this;e.checkCallbackFnOrThrow(r);var i,a=e.createCaptureCanvas(t);try{i=a.getContext("2d",{willReadFrequently:!0})}catch(Au){i=a.getContext("2d")}if(!i)throw new Error("Couldn't create canvas for visual element scan.");var s,l=function(){i=void 0,a=void 0},c=!1,u={stop:function(){c=!0,clearTimeout(s),l(),n&&n()}},d=function(){if(!c)try{e.drawImageOnCanvas(i,t);var f=o.decodeFromCanvas(a);r(f,void 0,u),s=setTimeout(d,o.options.delayBetweenScanSuccess)}catch(h){if(r(void 0,h,u),h instanceof dr||h instanceof Nr||h instanceof Fr)return void(s=setTimeout(d,o.options.delayBetweenScanAttempts));l(),n&&n(h)}};return d(),u},e.prototype._decodeOnLoadImage=function(t){return Uc(this,void 0,void 0,function(){return zc(this,function(r){switch(r.label){case 0:return e.isImageLoaded(t)?[3,2]:[4,e._waitImageLoad(t)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(t)]}})})},e.prototype.getUserMedia=function(t){return Uc(this,void 0,void 0,function(){var r;return zc(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=n.sent(),e.streamTracker.push(r),[2,r]}})})},e.streamTracker=[],e}(),Gc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xc=(function(e){function t(t,r){return e.call(this,new jn,t,r)||this}Gc(t,e)}(Wc),function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),Yc=(function(e){function t(t,r){return e.call(this,new Pi(t),t,r)||this}Xc(t,e)}(Wc),function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),Kc=(function(e){function t(t,r){return e.call(this,new Ji,t,r)||this}Yc(t,e)}(Wc),function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),Zc=function(e){function t(t,r){var n=this,o=new $s;return o.setHints(t),(n=e.call(this,o,t,r)||this).reader=o,n}return Kc(t,e),Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Sr.POSSIBLE_FORMATS,e),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t.prototype.setHints=function(e){this.hints=e,this.reader.setHints(this.hints)},t}(Wc),qc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$c=(function(e){function t(t,r){return e.call(this,new Xs,t,r)||this}qc(t,e)}(Wc),function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()),Qc=(function(e){function t(t,r){return e.call(this,new Wa,t,r)||this}$c(t,e)}(Wc),"http://www.w3.org/2000/svg"),Jc=(function(){function e(e){if("string"===typeof e){var t=document.getElementById(e);if(!t)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=t}else this.containerElement=e}e.prototype.write=function(t,r,n,o){if(0===t.length)throw new lr("Found empty contents");if(r<0||n<0)throw new lr("Requested dimensions are too small: "+r+"x"+n);var i=o&&void 0!==o.get(rl.MARGIN)?Number.parseInt(o.get(rl.MARGIN).toString(),10):e.QUIET_ZONE_SIZE,a=this.encode(o,t);return this.renderResult(a,r,n,i)},e.prototype.createSVGElement=function(t,r){var n=document.createElementNS(e.SVG_NS,"svg");return n.setAttributeNS(Qc,"width",r.toString()),n.setAttributeNS(Qc,"height",t.toString()),n},e.prototype.createSvgPathPlaceholderElement=function(t,r){var n=document.createElementNS(e.SVG_NS,"path");return n.setAttributeNS(Qc,"d","M0 0h".concat(t,"v").concat(r,"H0z")),n.setAttributeNS(Qc,"fill","none"),n},e.prototype.createSvgRectElement=function(t,r,n,o){var i=document.createElementNS(e.SVG_NS,"rect");return i.setAttributeNS(Qc,"x",t.toString()),i.setAttributeNS(Qc,"y",r.toString()),i.setAttributeNS(Qc,"height",n.toString()),i.setAttributeNS(Qc,"width",o.toString()),i.setAttributeNS(Qc,"fill","#000000"),i},e.prototype.encode=function(e,t){var r=ra.L;if(e&&void 0!==e.get(rl.ERROR_CORRECTION)){var n=e.get(rl.ERROR_CORRECTION).toString();r=ra.fromString(n)}return gl.encode(t,r,e)},e.prototype.renderResult=function(e,t,r,n){var o=e.getMatrix();if(null===o)throw new yn;var i=o.getWidth(),a=o.getHeight(),s=i+2*n,l=a+2*n,c=Math.max(t,s),u=Math.max(r,l),d=Math.min(Math.floor(c/s),Math.floor(u/l)),f=Math.floor((c-i*d)/2),h=Math.floor((u-a*d)/2),p=this.createSVGElement(c,u),g=this.createSvgPathPlaceholderElement(t,r);p.appendChild(g),this.containerElement.appendChild(p);for(var m=0,y=h;m<a;m++,y+=d)for(var v=0,w=f;v<i;v++,w+=d)if(1===o.get(v,m)){var b=this.createSvgRectElement(w,y,d,d);p.appendChild(b)}return p},e.QUIET_ZONE_SIZE=4,e.SVG_NS="http://www.w3.org/2000/svg"}(),"http://www.w3.org/2000/svg");!function(){function e(){}e.prototype.write=function(t,r,n,o){if(0===t.length)throw new lr("Found empty contents");if(r<0||n<0)throw new lr("Requested dimensions are too small: "+r+"x"+n);var i=ra.L,a=e.QUIET_ZONE_SIZE;if(o){if(void 0!==o.get(rl.ERROR_CORRECTION)){var s=o.get(rl.ERROR_CORRECTION).toString();i=ra.fromString(s)}void 0!==o.get(rl.MARGIN)&&(a=Number.parseInt(o.get(rl.MARGIN).toString(),10))}var l=gl.encode(t,i,o);return this.renderResult(l,r,n,a)},e.prototype.writeToDom=function(e,t,r,n,o){if("string"===typeof e){var i=document.querySelector(e);if(!i)throw new Error("Could no find the target HTML element.");e=i}var a=this.write(t,r,n,o);e instanceof HTMLElement&&e.appendChild(a)},e.prototype.renderResult=function(e,t,r,n){var o=e.getMatrix();if(null===o)throw new yn;for(var i=o.getWidth(),a=o.getHeight(),s=i+2*n,l=a+2*n,c=Math.max(t,s),u=Math.max(r,l),d=Math.min(Math.floor(c/s),Math.floor(u/l)),f=Math.floor((c-i*d)/2),h=Math.floor((u-a*d)/2),p=this.createSVGElement(c,u),g=0,m=h;g<a;g++,m+=d)for(var y=0,v=f;y<i;y++,v+=d)if(1===o.get(y,g)){var w=this.createSvgRectElement(v,m,d,d);p.appendChild(w)}return p},e.prototype.createSVGElement=function(e,t){var r=document.createElementNS(Jc,"svg"),n=e.toString(),o=t.toString();return r.setAttribute("height",o),r.setAttribute("width",n),r.setAttribute("viewBox","0 0 "+n+" "+o),r},e.prototype.createSvgRectElement=function(e,t,r,n){var o=document.createElementNS(Jc,"rect");return o.setAttribute("x",e.toString()),o.setAttribute("y",t.toString()),o.setAttribute("height",r.toString()),o.setAttribute("width",n.toString()),o.setAttribute("fill","#000000"),o},e.QUIET_ZONE_SIZE=4}();const eu={formats:[nn.EAN_13,nn.EAN_8,nn.CODE_128,nn.QR_CODE],desiredWidth:1280,desiredHeight:720,decodeFPS:15,roiResizeLongSide:600,consensusFrames:2,maxWorkerQueue:2,tryHarderAfter:3,backendFallbackEnabled:!0,backendFallbackURL:"/api/barcode/decode",backendFallbackAfterFailures:2,backendFallbackTimeout:5e3};const tu=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.video=void 0,this.opts=void 0,this.worker=null,this.pendingWorkerJobs=0,this.lastResults=[],this.roi=null,this.trackingStableCount=0,this._onFound=()=>{},this._onProgress=()=>{},this._onError=()=>{},this._running=!1,this._lastDecodeTime=0,this.stream=null,this.barcodeDetector=null,this.zxingReader=null,this.consecutiveFailures=0,this.backendInFlight=!1,this.backendCircuitOpen=!1,this.lastBackendBitmap=null,this.video=e,this.opts=Ve(Ve({},eu),t),"undefined"!==typeof window&&window.BarcodeDetector)try{const e=this.opts.formats.map(e=>this.formatToNative(e)).filter(Boolean);this.barcodeDetector=new window.BarcodeDetector({formats:e}),console.log("[Scanner] BarcodeDetector API available")}catch(Au){console.warn("[Scanner] BarcodeDetector init failed:",Au)}this.initZXing()}formatToNative(e){return{[nn.EAN_13]:"ean_13",[nn.EAN_8]:"ean_8",[nn.UPC_A]:"upc_a",[nn.UPC_E]:"upc_e",[nn.CODE_128]:"code_128",[nn.CODE_39]:"code_39",[nn.QR_CODE]:"qr_code",[nn.DATA_MATRIX]:"data_matrix"}[e]||null}initZXing(){try{const e=new Map;e.set(Sr.POSSIBLE_FORMATS,this.opts.formats),e.set(Sr.TRY_HARDER,!1),this.zxingReader=new Zc(e),console.log("[Scanner] ZXing reader initialized")}catch(Au){console.error("[Scanner] ZXing init failed:",Au)}}async start(){try{await this.ensureCamera(),this.startWorker(),this._running=!0,this._onProgress({phase:"started"}),this.loop()}catch(e){throw this._onError(e instanceof Error?e:new Error(String(e))),e}}stop(){this._running=!1,this.worker&&(this.worker.terminate(),this.worker=null),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.video.srcObject=null,this._onProgress({phase:"stopped"})}onFound(e){this._onFound=e}onProgress(e){this._onProgress=e}onError(e){this._onError=e}async ensureCamera(){if(this.stream)return;const e={video:{facingMode:"environment",width:{ideal:this.opts.desiredWidth},height:{ideal:this.opts.desiredHeight}}};this.stream=await navigator.mediaDevices.getUserMedia(e),this.video.srcObject=this.stream,await this.video.play(),this._onProgress({phase:"camera-ready"})}startWorker(){if(!this.worker)try{this.worker=new Worker("/workers/zxing-worker.js"),this.worker.onmessage=this.handleWorkerMessage.bind(this),this.worker.onerror=e=>{console.error("[Scanner] Worker error:",e)},this.worker.postMessage({type:"init",formats:this.opts.formats.map(e=>this.formatToNative(e))})}catch(Au){console.warn("[Scanner] Worker creation failed, using main thread only:",Au)}}handleWorkerMessage(e){const t=e.data;"ready"===t.type?this._onProgress({phase:"worker-ready"}):"processed"===t.type?(this.pendingWorkerJobs=Math.max(0,this.pendingWorkerJobs-1),this.decodeFromLuminance(t.luminanceSource,t.width,t.height)):"result"===t.type&&(this.pendingWorkerJobs=Math.max(0,this.pendingWorkerJobs-1),t.result&&this.accumulateResult(t.result))}async decodeFromLuminance(e,t,r){if(this.zxingReader)try{const n=document.createElement("canvas");n.width=t,n.height=r;const o=n.getContext("2d");if(!o)return;const i=o.createImageData(t,r),a=i.data,s=e.luminances;for(let e=0;e<s.length;e++){const t=4*e;a[t]=a[t+1]=a[t+2]=s[e],a[t+3]=255}o.putImageData(i,0,0);const l=await this.zxingReader.decodeFromCanvas(n);l&&this.accumulateResult({text:l.getText(),format:nn[l.getBarcodeFormat()],rawValue:l.getText()})}catch(Au){}}accumulateResult(e){const t=e.rawValue||e.text;if(!t)return;const r=Date.now();this.lastResults.push({payload:t,timestamp:r,result:e});this.lastResults=this.lastResults.filter(e=>r-e.timestamp<1500);const n={};for(const o of this.lastResults)n[o.payload]=(n[o.payload]||0)+1;for(const o in n)if(n[o]>=this.opts.consensusFrames){console.log("[Scanner] Consensus reached:",o,"(".concat(n[o],"/").concat(this.opts.consensusFrames,")")),this._onFound({text:o,format:e.format,rawValue:o}),this.lastResults=[];break}}async loop(){const e=1e3/this.opts.decodeFPS;for(;this._running;){const r=performance.now();if(r-this._lastDecodeTime<e){await this.sleep(5);continue}this._lastDecodeTime=r;let n=null;try{n=await createImageBitmap(this.video)}catch(t){console.warn("[Scanner] Capture failed:",t),await this.sleep(30);continue}let o=!1;if(this.barcodeDetector)try{const e=await this.barcodeDetector.detect(n);if(e&&e.length>0){o=!0,this.consecutiveFailures=0;for(const t of e)this.accumulateResult({text:t.rawValue,format:t.format,rawValue:t.rawValue});n.close();continue}}catch(Au){console.warn("[Scanner] BarcodeDetector error:",Au)}if(this.worker&&this.pendingWorkerJobs<this.opts.maxWorkerQueue){const e=this.computeCrop(n.width,n.height);try{const t=await this.createResizedBitmap(n,e,this.opts.roiResizeLongSide);this.pendingWorkerJobs++,this.worker.postMessage({type:"decode",image:t},[t])}catch(Au){console.warn("[Scanner] Resize failed:",Au)}}else try{if(this.zxingReader){const e=document.createElement("canvas");e.width=n.width,e.height=n.height;const t=e.getContext("2d");if(t){t.drawImage(n,0,0);const r=await this.zxingReader.decodeFromCanvas(e);r&&(o=!0,this.consecutiveFailures=0,this.accumulateResult({text:r.getText(),format:nn[r.getBarcodeFormat()],rawValue:r.getText()}))}}}catch(Au){}o||(this.consecutiveFailures++,this.opts.backendFallbackEnabled&&this.consecutiveFailures>=this.opts.backendFallbackAfterFailures&&!this.backendInFlight&&!this.backendCircuitOpen&&this.tryBackendFallback(n).catch(()=>{})),n.close(),await this.sleep(1)}}computeCrop(e,t){if(this.roi&&this.trackingStableCount>0)return this.roi;const r=Math.floor(.75*Math.min(e,t));return{x:Math.floor((e-r)/2),y:Math.floor((t-r)/2),w:r,h:r}}async createResizedBitmap(e,t,r){const{x:n,y:o,w:i,h:a}=t,s=await createImageBitmap(e,n,o,i,a),l=Math.max(i,a),c=Math.min(1,r/l),u=Math.max(1,Math.round(i*c)),d=Math.max(1,Math.round(a*c));let f;if("undefined"!==typeof OffscreenCanvas){const e=new OffscreenCanvas(u,d),t=e.getContext("2d");t?(t.drawImage(s,0,0,u,d),f=await createImageBitmap(e)):f=s}else{const e=document.createElement("canvas");e.width=u,e.height=d;const t=e.getContext("2d");t?(t.drawImage(s,0,0,u,d),f=await createImageBitmap(e)):f=s}return s.close(),f}sleep(e){return new Promise(t=>setTimeout(t,e))}async tryBackendFallback(e){if(!this.backendInFlight&&!this.backendCircuitOpen&&this.opts.backendFallbackEnabled){this.backendInFlight=!0,this._onProgress({phase:"backend-fallback",data:{failures:this.consecutiveFailures}});try{const t=this.computeCrop(e.width,e.height),r=await createImageBitmap(e,t.x,t.y,t.w,t.h),n=document.createElement("canvas");n.width=r.width,n.height=r.height;const o=n.getContext("2d");if(!o)return void r.close();o.drawImage(r,0,0),r.close();const i=await new Promise(e=>{n.toBlob(e,"image/webp",.75)});if(!i)return void console.warn("[Scanner] Failed to create blob");const a=new FormData;a.append("file",i,"roi.webp");const s=new AbortController,l=setTimeout(()=>s.abort(),this.opts.backendFallbackTimeout),c=await fetch(this.opts.backendFallbackURL,{method:"POST",body:a,signal:s.signal});if(clearTimeout(l),!c.ok)throw new Error("Backend error: ".concat(c.status));const u=await c.json();if(u.ok&&u.results&&u.results.length>0){const e=u.results[0];console.log("[Scanner] Backend found:",e.text,"(".concat(u.latency_ms,"ms, path: ").concat(u.path,")")),this._onProgress({phase:"backend-success",data:{latency:u.latency_ms,cached:u.cached,path:u.path}}),this.accumulateResult({text:e.text,format:e.type,rawValue:e.text}),this.consecutiveFailures=0}else console.log("[Scanner] Backend returned no results"),this._onProgress({phase:"backend-no-result"})}catch(t){console.error("[Scanner] Backend fallback error:",t),this._onProgress({phase:"backend-error",data:{error:String(t)}}),this.backendCircuitOpen=!0,setTimeout(()=>{this.backendCircuitOpen=!1,console.log("[Scanner] Backend circuit breaker reset")},3e4)}finally{this.backendInFlight=!1}}}},ru=()=>{const[e,t]=(0,o.useState)(0);return(0,o.useEffect)(()=>{const e=setInterval(()=>{t(e=>(e+1)%4)},400);return()=>clearInterval(e)},[]),(0,Oe.jsxs)("span",{children:["Scanning",".".repeat(e)]})},nu=e=>{let{isOpen:t,productId:r,productName:n,onClose:i,onSuccess:a}=e;const[s,l]=(0,o.useState)("choose"),[c,u]=(0,o.useState)(""),[d,f]=(0,o.useState)(!1),[h,p]=(0,o.useState)(""),[g,m]=(0,o.useState)(!1),[y,v]=(0,o.useState)(""),[w,b]=(0,o.useState)(null),[x,C]=(0,o.useState)(""),[_,E]=(0,o.useState)(!1),S=(0,o.useRef)(!0),A=(0,o.useRef)(!1),N=(0,o.useRef)(null),I=(0,o.useRef)(null);(0,o.useEffect)(()=>{t?(l("choose"),u(""),p(""),v(""),m(!1),b(null),C(""),E(!1),S.current=!0,A.current=!1):(k(),S.current=!1)},[t]),(0,o.useEffect)(()=>()=>{S.current=!1,k()},[]);const k=()=>{N.current&&(N.current.stop(),N.current=null),console.log("[BarcodeModal] Scanner cleanup")},T=e=>e?/^\d+$/.test(e)?13!==e.length?{valid:!1,message:"Barcode harus 13 digit (EAN-13). Terdeteksi ".concat(e.length," digit.")}:{valid:!0,message:""}:{valid:!1,message:"Barcode harus berupa angka saja"}:{valid:!1,message:"Barcode kosong"},O=(0,o.useCallback)(async e=>{const t=T(e);if(t.valid){f(!0),p("");try{const t=localStorage.getItem("access_token"),n=await fetch("/api/products/".concat(r,"/barcode"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({barcode:e})});if(!n.ok){const e=await n.json();throw new Error(e.detail||"Gagal menyimpan barcode")}a(e)}catch(n){console.error("[BarcodeModal] Submit error:",n),p(n.message||"Gagal menyimpan barcode")}finally{f(!1)}}else p(t.message)},[r,a]),R=(0,o.useCallback)(e=>{if(!S.current||A.current)return;const t=e.text;console.log("[BarcodeModal] Barcode detected:",t,"format:",e.format),A.current=!0,k(),m(!1),navigator.vibrate&&navigator.vibrate(200);const r=T(t);b(t),r.valid?O(t):C(r.message)},[O]),M=(0,o.useCallback)(async()=>{v(""),b(null),C(""),E(!0),A.current=!1,console.log("[BarcodeModal] Initializing scanner...");try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return v("Browser tidak mendukung akses kamera."),void E(!1);if(await new Promise(e=>setTimeout(e,100)),!S.current||!I.current)return;const e=new tu(I.current,{desiredWidth:1280,desiredHeight:720,decodeFPS:12,roiResizeLongSide:800,consensusFrames:2});e.onFound(R),e.onProgress(e=>{console.log("[BarcodeModal] Progress:",e.phase),"camera-ready"===e.phase&&(m(!0),E(!1))}),e.onError(e=>{console.error("[BarcodeModal] Scanner error:",e),e.message.includes("Permission")||"NotAllowedError"===e.name?v("Akses kamera ditolak. Izinkan akses kamera di pengaturan browser."):"NotFoundError"===e.name?v("Kamera tidak ditemukan."):v("Gagal mengakses kamera: ".concat(e.message)),E(!1)}),N.current=e,await e.start()}catch(e){console.error("[BarcodeModal] Scanner init error:",e),v("Gagal memulai scanner."),E(!1)}},[R]),P=async e=>{l(e),p(""),C(""),b(null),"scan"===e&&await M()},j=()=>{k(),m(!1),v(""),l("choose"),u(""),p(""),b(null),C("")},D=async()=>{b(null),C(""),A.current=!1,await M()},B=()=>{l("manual"),b(null),C(""),w&&u(w)};(0,o.useEffect)(()=>{"manual"===s&&13===c.length&&O(c.trim())},[c,s,O]);return t?"scan"===s?(0,Oe.jsxs)("div",{className:"fixed inset-0 z-[200] bg-gray-900 flex flex-col",children:[(0,Oe.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center gap-3",children:[(0,Oe.jsx)("button",{onClick:j,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors active:bg-gray-200",children:(0,Oe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Oe.jsxs)("div",{className:"flex-1",children:[(0,Oe.jsx)("h1",{className:"font-semibold text-lg",children:"Daftarkan Barcode"}),(0,Oe.jsx)("p",{className:"text-sm text-gray-500 truncate",children:n})]}),(0,Oe.jsx)("button",{onClick:i,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Oe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Oe.jsxs)("div",{className:"flex-1 relative bg-black",children:[(0,Oe.jsx)("video",{ref:I,className:"absolute inset-0 w-full h-full object-cover",playsInline:!0,muted:!0,autoPlay:!0}),y&&(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white p-6 z-10 bg-black",children:(0,Oe.jsxs)("div",{className:"text-center max-w-md",children:[(0,Oe.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,Oe.jsx)("p",{className:"mb-4",children:y}),(0,Oe.jsxs)("button",{onClick:M,className:"px-6 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 active:bg-amber-700 transition-colors flex items-center gap-2 mx-auto",children:[(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Coba Lagi"]})]})}),_&&(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white z-10 bg-black",children:(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsxs)("svg",{className:"w-12 h-12 mx-auto mb-3 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Oe.jsx)("p",{children:"Memulai scanner..."})]})}),g&&!w&&(0,Oe.jsx)("div",{className:"absolute inset-0 pointer-events-none z-10",children:(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"relative transition-all duration-200",style:{width:"85vw",height:"60vh",maxWidth:"500px",maxHeight:"400px",boxShadow:"0 0 20px ".concat("rgba(255, 255, 255, 0.3)")},children:[(0,Oe.jsx)("div",{className:"absolute top-0 left-0 w-10 h-10 border-t-4 border-l-4 ".concat("border-white/70"," transition-colors")}),(0,Oe.jsx)("div",{className:"absolute top-0 right-0 w-10 h-10 border-t-4 border-r-4 ".concat("border-white/70"," transition-colors")}),(0,Oe.jsx)("div",{className:"absolute bottom-0 left-0 w-10 h-10 border-b-4 border-l-4 ".concat("border-white/70"," transition-colors")}),(0,Oe.jsx)("div",{className:"absolute bottom-0 right-0 w-10 h-10 border-b-4 border-r-4 ".concat("border-white/70"," transition-colors")}),(0,Oe.jsx)("div",{className:"absolute left-2 right-2 h-0.5 bg-white/80",style:{boxShadow:"0 0 10px rgba(255, 255, 255, 0.6)",animation:"scanLine 1.5s ease-in-out infinite"}})]})})}),w&&x&&(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-30 bg-black/80",children:(0,Oe.jsx)("div",{className:"bg-white rounded-xl p-6 mx-4 max-w-sm w-full shadow-2xl",children:(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("svg",{className:"w-10 h-10 mx-auto mb-3 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,Oe.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Barcode Tidak Valid"}),(0,Oe.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:x}),(0,Oe.jsx)("p",{className:"text-xs text-gray-400 mb-4 font-mono",children:w}),(0,Oe.jsxs)("div",{className:"flex gap-2",children:[(0,Oe.jsx)("button",{onClick:D,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Scan Ulang"}),(0,Oe.jsx)("button",{onClick:B,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Input Manual"})]})]})})}),d&&(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-30 bg-black/80",children:(0,Oe.jsx)("div",{className:"bg-white rounded-xl p-6 mx-4 max-w-sm w-full shadow-2xl",children:(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsxs)("svg",{className:"animate-spin w-8 h-8 mx-auto mb-3 text-gray-600",fill:"none",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Oe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Oe.jsx)("p",{className:"text-sm text-gray-600",children:"Menyimpan barcode..."})]})})}),(0,Oe.jsx)("style",{children:"\n            @keyframes scanLine {\n              0% { top: 10%; }\n              50% { top: 90%; }\n              100% { top: 10%; }\n            }\n          "}),g&&!w&&(0,Oe.jsx)("div",{className:"absolute bottom-32 left-0 right-0 text-center text-white z-20",children:(0,Oe.jsx)("div",{className:"inline-block px-6 py-3 rounded-full backdrop-blur-sm bg-black/60",children:(0,Oe.jsx)("p",{className:"text-sm font-medium",children:(0,Oe.jsx)(ru,{})})})})]})]}):(0,Oe.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&"scan"!==s&&i()},children:(0,Oe.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-md shadow-2xl overflow-hidden",children:[(0,Oe.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Oe.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"choose"===s?"Daftarkan Barcode":"Input Barcode Manual"}),(0,Oe.jsx)("button",{onClick:i,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Oe.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Oe.jsx)("p",{className:"text-sm text-gray-500 mt-1 truncate",children:n})]}),(0,Oe.jsx)("div",{className:"p-4",children:"choose"===s?(0,Oe.jsxs)("div",{className:"space-y-3",children:[(0,Oe.jsxs)("button",{onClick:()=>P("scan"),className:"w-full p-4 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition-colors flex items-center gap-4",children:[(0,Oe.jsx)("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center",children:(0,Oe.jsxs)("svg",{className:"w-6 h-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,Oe.jsxs)("div",{className:"text-left",children:[(0,Oe.jsx)("p",{className:"font-medium text-gray-900",children:"Scan Barcode"}),(0,Oe.jsx)("p",{className:"text-sm text-gray-500",children:"Gunakan kamera untuk scan"})]})]}),(0,Oe.jsxs)("button",{onClick:()=>P("manual"),className:"w-full p-4 border-2 border-gray-200 rounded-xl hover:border-gray-400 hover:bg-gray-50 transition-colors flex items-center gap-4",children:[(0,Oe.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:(0,Oe.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,Oe.jsxs)("div",{className:"text-left",children:[(0,Oe.jsx)("p",{className:"font-medium text-gray-900",children:"Input Manual"}),(0,Oe.jsx)("p",{className:"text-sm text-gray-500",children:"Ketik barcode 13 digit"})]})]})]}):(0,Oe.jsxs)("div",{className:"space-y-4",children:[(0,Oe.jsx)("input",{type:"text",value:c,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,13);u(t),p("")},placeholder:"13 digit code",className:"w-full px-4 py-4 text-xl text-center font-mono border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 tracking-widest placeholder:text-gray-400 placeholder:text-base placeholder:font-sans",inputMode:"numeric",pattern:"[0-9]*",maxLength:13,autoFocus:!0}),h&&(0,Oe.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,Oe.jsx)("p",{className:"text-sm text-red-600",children:h})}),d&&(0,Oe.jsx)("div",{className:"text-center py-2",children:(0,Oe.jsx)("p",{className:"text-sm text-gray-500",children:"Menyimpan..."})}),(0,Oe.jsx)("button",{type:"button",onClick:j,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Kembali"})]})})]})}):null};const ou=new class{constructor(){this.audioContext=null}getAudioContext(){return this.audioContext||(this.audioContext=new AudioContext),"suspended"===this.audioContext.state&&this.audioContext.resume(),this.audioContext}playTone(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{const n=this.getAudioContext(),o=n.createOscillator(),i=n.createGain();o.connect(i),i.connect(n.destination),o.frequency.value=e,o.type="sine";const a=n.currentTime+r/1e3,s=a+t/1e3;i.gain.setValueAtTime(.3,a),i.gain.exponentialRampToValueAtTime(.01,s),o.start(a),o.stop(s)}catch(Au){console.warn("Sound playback failed:",Au)}}scanSuccess(){this.playTone(800,50,0),this.playTone(1200,80,60)}scanError(){this.playTone(400,100,0),this.playTone(300,150,110)}transactionComplete(){this.playTone(1e3,80,0),this.playTone(1200,80,100),this.playTone(1400,120,200)}tap(){this.playTone(600,20,0)}itemAdded(){this.playTone(1e3,40,0)}},iu=e=>{let{isActive:t,onToggle:r,onBarcodeDetected:n}=e;const i=(0,o.useRef)(null),a=(0,o.useRef)(null),[s,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(""),d=(0,o.useRef)(""),f=(0,o.useRef)(0),h=(0,o.useRef)(n);return(0,o.useEffect)(()=>{h.current=n},[n]),(0,o.useEffect)(()=>{if(t&&i.current){l(!0),u("");(async()=>{try{a.current=new tu(i.current,{desiredWidth:1280,desiredHeight:720,decodeFPS:20,roiResizeLongSide:600,consensusFrames:1}),a.current.onFound(e=>{const t=Date.now(),r=e.text;r===d.current&&t-f.current<2e3?console.log("[Scanner] DEBOUNCED - same barcode within 2s:",r):(d.current=r,f.current=t,console.log("[Scanner] NEW SCAN:",r),h.current(r))}),a.current.onProgress(e=>{"camera-ready"===e.phase&&l(!1)}),a.current.onError(e=>{console.error("[ScannerSection] Error:",e),u(e.message||"Gagal mengakses kamera"),l(!1)}),await a.current.start()}catch(e){console.error("[ScannerSection] Init error:",e),u(e.message||"Gagal memulai scanner"),l(!1)}})()}return()=>{a.current&&(a.current.stop(),a.current=null)}},[t]),t?(0,Oe.jsxs)("div",{className:"scanner-active relative bg-black",children:[(0,Oe.jsx)("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-48 object-cover"}),s&&(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:(0,Oe.jsxs)("div",{className:"text-white text-center",children:[(0,Oe.jsxs)("svg",{className:"w-8 h-8 mx-auto mb-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Oe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),(0,Oe.jsx)("span",{className:"text-sm",children:"Memulai kamera..."})]})}),c&&(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80",children:(0,Oe.jsxs)("div",{className:"text-white text-center px-4",children:[(0,Oe.jsx)("div",{className:"text-red-400 mb-2",children:"\u26a0\ufe0f"}),(0,Oe.jsx)("p",{className:"text-sm mb-3",children:c}),(0,Oe.jsx)("button",{onClick:r,className:"bg-gray-700 text-white px-4 py-2 rounded-lg text-sm",children:"Tutup"})]})}),!s&&!c&&(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,Oe.jsxs)("div",{className:"relative w-64 h-24",children:[(0,Oe.jsx)("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-yellow-400"}),(0,Oe.jsx)("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-yellow-400"}),(0,Oe.jsx)("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-yellow-400"}),(0,Oe.jsx)("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-yellow-400"}),(0,Oe.jsx)("div",{className:"absolute -top-7 left-1/2 transform -translate-x-1/2 bg-black/70 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Arahkan barcode ke sini"})]})}),(0,Oe.jsx)("button",{onClick:r,className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white px-3 py-1.5 rounded-full text-sm transition-colors",children:"\u2715 Tutup"}),!s&&!c&&(0,Oe.jsx)("div",{className:"absolute bottom-2 left-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"\u26a1 Mode Cepat"})]}):(0,Oe.jsx)("div",{className:"scanner-trigger p-4 bg-white border-b border-gray-200",children:(0,Oe.jsxs)("button",{onClick:r,className:"w-full bg-green-600 hover:bg-green-700 active:bg-green-800 text-white py-4 rounded-xl flex items-center justify-center gap-2 text-lg font-semibold transition-colors",children:[(0,Oe.jsxs)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Scan Barcode"]})})},au=e=>{let{items:t,total:r,onQtyChange:n,onRemove:i,onCheckout:a}=e;const[s,l]=(0,o.useState)(null),[c,u]=(0,o.useState)(""),d=e=>{const t=parseInt(c)||0;n(e,t),l(null),u("")},f=e=>e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e.toString();return(0,Oe.jsxs)("div",{className:"cart-section flex-1 flex flex-col bg-white relative",children:[(0,Oe.jsxs)("div",{className:"cart-header px-4 py-2 bg-gray-50 border-y border-gray-200 flex justify-between items-center",children:[(0,Oe.jsxs)("span",{className:"font-semibold text-gray-700",children:["\ud83d\uded2 Keranjang (",t.length,")"]}),(0,Oe.jsxs)("span",{className:"font-bold text-green-600",children:["Rp",r.toLocaleString("id-ID")]})]}),(0,Oe.jsx)("div",{className:"cart-items flex-1 overflow-y-auto pb-24",style:{maxHeight:"calc(100vh - 300px)"},children:0===t.length?(0,Oe.jsxs)("div",{className:"text-center text-gray-400 py-8",children:["Keranjang kosong",(0,Oe.jsx)("br",{}),(0,Oe.jsx)("span",{className:"text-sm",children:"Scan barcode untuk mulai"})]}):t.map(e=>(0,Oe.jsxs)("div",{className:"cart-item flex items-center justify-between px-4 py-2 border-b border-gray-100",children:[(0,Oe.jsxs)("div",{className:"flex-1 min-w-0 mr-2",children:[(0,Oe.jsx)("div",{className:"font-medium text-sm truncate",children:e.name}),(0,Oe.jsxs)("div",{className:"text-xs text-gray-500",children:[f(e.price)," \xd7 ",e.qty]})]}),(0,Oe.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Oe.jsx)("button",{onClick:()=>n(e.id,e.qty-1),className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 active:bg-gray-400 rounded-full flex items-center justify-center text-gray-700 font-bold transition-colors",children:"\u2212"}),s===e.id?(0,Oe.jsx)("input",{type:"number",value:c,onChange:e=>u(e.target.value),onBlur:()=>d(e.id),onKeyDown:t=>"Enter"===t.key&&d(e.id),className:"w-12 text-center border border-amber-400 rounded py-1 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500",autoFocus:!0,inputMode:"numeric"}):(0,Oe.jsx)("button",{onClick:()=>(e=>{l(e.id),u(e.qty.toString())})(e),className:"w-10 h-8 bg-gray-100 rounded text-center font-semibold text-sm hover:bg-gray-200 transition-colors",children:e.qty}),(0,Oe.jsx)("button",{onClick:()=>n(e.id,e.qty+1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 active:bg-green-700 rounded-full flex items-center justify-center text-white font-bold transition-colors",children:"+"}),(0,Oe.jsx)("span",{className:"w-16 text-right font-semibold text-sm text-gray-700",children:f(e.price*e.qty)}),(0,Oe.jsx)("button",{onClick:()=>i(e.id),className:"text-red-400 hover:text-red-600 text-lg px-1 transition-colors",children:"\u2715"})]})]},e.id))}),t.length>0&&(0,Oe.jsx)("div",{className:"cart-footer fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-200 shadow-lg",style:{paddingBottom:"max(16px, env(safe-area-inset-bottom))"},children:(0,Oe.jsxs)("button",{onClick:a,className:"w-full bg-green-600 hover:bg-green-700 active:bg-green-800 text-white py-4 rounded-xl font-bold text-lg transition-colors shadow-md",children:["\ud83d\udcb3 Bayar - Rp",r.toLocaleString("id-ID")]})})]})},su=[{label:"+10K",value:1e4},{label:"+20K",value:2e4},{label:"+50K",value:5e4},{label:"+100K",value:1e5}],lu=e=>{let{total:t,paymentAmount:r,kembalian:n,isSubmitting:i,onShortcutTap:a,onUangPas:s,onManualInput:l,onReset:c,onComplete:u,onCancel:d}=e;const[f,h]=(0,o.useState)("TUNAI"),[p,g]=(0,o.useState)(null),m=(0,o.useRef)(null),y="TUNAI"===f?r>=t:null!==p,v=e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){const e=new FileReader;e.onload=e=>{var t;g(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(r)}};return(0,Oe.jsx)("div",{className:"payment-section absolute inset-0 bg-black/50 flex items-end z-40",children:(0,Oe.jsxs)("div",{className:"bg-white w-full rounded-t-2xl shadow-2xl flex flex-col",style:{maxHeight:"65vh"},children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between p-3 border-b flex-shrink-0",children:[(0,Oe.jsx)("span",{className:"text-gray-500 text-sm",children:"Total"}),(0,Oe.jsxs)("span",{className:"text-xl font-bold text-green-600",children:["Rp",t.toLocaleString("id-ID")]}),(0,Oe.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 p-1",children:"\u2715"})]}),(0,Oe.jsx)("div",{className:"flex gap-2 p-3 flex-shrink-0",children:["TUNAI","TRANSFER","QRIS"].map(e=>(0,Oe.jsxs)("button",{onClick:()=>{h(e),g(null)},className:"flex-1 py-2 rounded-lg text-sm font-medium transition-colors ".concat(f===e?"bg-green-500 text-white":"bg-gray-100 text-gray-700"),children:["TUNAI"===e&&"\ud83d\udcb5 ","TRANSFER"===e&&"\ud83c\udfe6 ","QRIS"===e&&"\ud83d\udcf1 ",e]},e))}),(0,Oe.jsxs)("div",{className:"flex-1 px-3 pb-2 overflow-hidden",style:{minHeight:"180px"},children:["TUNAI"===f&&(0,Oe.jsxs)("div",{className:"h-full flex flex-col",children:[(0,Oe.jsx)("div",{className:"flex gap-2 mb-2",children:su.map(e=>(0,Oe.jsx)("button",{onClick:()=>a(e.value),className:"flex-1 py-2 bg-blue-50 hover:bg-blue-100 rounded text-blue-600 text-sm font-medium",children:e.label},e.value))}),(0,Oe.jsx)("button",{onClick:s,className:"w-full py-2 bg-green-50 hover:bg-green-100 text-green-600 rounded mb-2 text-sm font-medium",children:"\ud83d\udcb5 UANG PAS"}),(0,Oe.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Oe.jsx)("span",{className:"text-gray-500 text-sm",children:"Rp"}),(0,Oe.jsx)("input",{type:"text",inputMode:"numeric",value:r||"",onChange:e=>l(parseInt(e.target.value.replace(/\D/g,""))||0),className:"flex-1 py-2 px-3 border rounded text-right font-medium",placeholder:"0"}),(0,Oe.jsx)("button",{onClick:c,className:"text-gray-400 text-sm px-2 py-1 hover:bg-gray-100 rounded",children:"Reset"})]})]}),"TRANSFER"===f&&(0,Oe.jsxs)("div",{className:"h-full flex items-center justify-center",children:[(0,Oe.jsx)("input",{ref:m,type:"file",accept:"image/*",capture:"environment",onChange:v,className:"hidden",id:"transfer-proof"}),p?(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsx)("img",{src:p,alt:"Bukti",className:"max-h-32 rounded-lg"}),(0,Oe.jsx)("button",{onClick:()=>g(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 text-sm",children:"\u2715"}),(0,Oe.jsx)("p",{className:"text-green-600 text-sm mt-2 text-center",children:"\u2705 Foto terupload"})]}):(0,Oe.jsxs)("label",{htmlFor:"transfer-proof",className:"flex flex-col items-center gap-2 p-6 border-2 border-dashed rounded-xl cursor-pointer hover:border-green-500",children:[(0,Oe.jsx)("span",{className:"text-3xl",children:"\ud83d\udcf7"}),(0,Oe.jsx)("span",{className:"text-gray-600 text-sm",children:"Foto Bukti Transfer"})]})]}),"QRIS"===f&&(0,Oe.jsxs)("div",{className:"h-full flex items-center justify-center",children:[(0,Oe.jsx)("input",{type:"file",accept:"image/*",capture:"environment",onChange:v,className:"hidden",id:"qris-proof"}),p?(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsx)("img",{src:p,alt:"Bukti",className:"max-h-32 rounded-lg"}),(0,Oe.jsx)("button",{onClick:()=>g(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 text-sm",children:"\u2715"}),(0,Oe.jsx)("p",{className:"text-green-600 text-sm mt-2 text-center",children:"\u2705 Foto terupload"})]}):(0,Oe.jsxs)("label",{htmlFor:"qris-proof",className:"flex flex-col items-center gap-2 p-6 border-2 border-dashed rounded-xl cursor-pointer hover:border-green-500",children:[(0,Oe.jsx)("span",{className:"text-3xl",children:"\ud83d\udcf1"}),(0,Oe.jsx)("span",{className:"text-gray-600 text-sm",children:"Foto Bukti QRIS"})]})]})]}),"TUNAI"===f&&(0,Oe.jsxs)("div",{className:"px-3 py-2 bg-gray-50 text-sm flex-shrink-0",children:[(0,Oe.jsxs)("div",{className:"flex justify-between",children:[(0,Oe.jsx)("span",{className:"text-gray-500",children:"Dibayar"}),(0,Oe.jsxs)("span",{className:"font-medium",children:["Rp",r.toLocaleString("id-ID")]})]}),(0,Oe.jsxs)("div",{className:"flex justify-between",children:[(0,Oe.jsx)("span",{className:"text-gray-500",children:"Kembalian"}),(0,Oe.jsx)("span",{className:n>=0?"text-green-600 font-bold":"text-red-500 font-bold",children:n>=0?"Rp".concat(n.toLocaleString("id-ID")):"Kurang!"})]})]}),(0,Oe.jsx)("div",{className:"p-3 flex-shrink-0",style:{paddingBottom:"max(12px, env(safe-area-inset-bottom))"},children:(0,Oe.jsx)("button",{onClick:()=>{i||u(f,p||void 0)},disabled:i||!y,className:"w-full py-3 rounded-xl font-bold text-white transition-colors ".concat(i?"bg-gray-400 cursor-wait":y?"bg-green-600 hover:bg-green-700 active:bg-green-800":"bg-gray-300 cursor-not-allowed"),children:i?(0,Oe.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,Oe.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[(0,Oe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Oe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Memproses..."]}):"\u2705 Selesai"})})]})})},cu=e=>{let{products:t,onSelect:r}=e;return 0===t.length?null:(0,Oe.jsxs)("div",{className:"recent-products px-4 py-2 border-b border-gray-100",children:[(0,Oe.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"\u26a1 Produk Terakhir"}),(0,Oe.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 -mx-1 px-1",children:t.map(e=>{return(0,Oe.jsxs)("button",{onClick:()=>r(e),className:"flex-shrink-0 bg-gray-100 rounded-lg px-3 py-2 text-sm active:bg-gray-200 transition-colors",children:[(0,Oe.jsx)("div",{className:"font-medium truncate max-w-24 text-left",children:e.name}),(0,Oe.jsx)("div",{className:"text-green-600 text-xs text-left",children:(t=e.price,t>=1e3?"".concat((t/1e3).toFixed(0),"K"):t.toString())})]},e.id);var t})})]})},uu=e=>{let{tenantId:t,onClose:r,isEmbedded:n=!1}=e;re();const[i,a]=(0,o.useState)([]),[s,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)([]),[d,f]=(0,o.useState)(0),[h,p]=(0,o.useState)(!1),[g,m]=(0,o.useState)(!1),[y,v]=(0,o.useState)(!1),[w,b]=(0,o.useState)(""),[x,C]=(0,o.useState)(""),[_,E]=(0,o.useState)(!1),[S,A]=(0,o.useState)(""),[N,I]=(0,o.useState)(""),[k,T]=(0,o.useState)([]),[O,R]=(0,o.useState)(!1),M=(0,o.useRef)({barcode:"",time:0}),P=(0,o.useRef)(null),j=(0,o.useRef)(null),D=i.reduce((e,t)=>e+t.price*t.qty,0),B=d-D;(0,o.useEffect)(()=>{L()},[t]);const L=async()=>{try{const e=localStorage.getItem("access_token"),r=await fetch("/api/products/recent-sales?limit=5&tenant_id=".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){const e=await r.json();u(e.products||[])}}catch(Au){console.error("Failed to load recent products:",Au)}},F=(0,o.useCallback)(async e=>{const r=Date.now(),n=M.current;if(e===n.barcode&&r-n.time<2e3)return void console.log("[POS] Debounced - same barcode within 2s:",e);M.current={barcode:e,time:r},b("");let o=!1;if(a(t=>t.find(t=>t.barcode===e)?(o=!0,t.map(t=>t.barcode===e?Ve(Ve({},t),{},{qty:t.qty+1}):t)):t),o)ou.scanSuccess();else try{const r=localStorage.getItem("access_token"),n=await fetch("/api/products/barcode/".concat(e,"?tenant_id=").concat(t),{headers:{Authorization:"Bearer ".concat(r)}});if(!n.ok)return ou.scanError(),b("Produk tidak ditemukan"),void setTimeout(()=>b(""),2e3);const o=await n.json(),i={id:"cart_".concat(Date.now()),productId:o.id,name:o.nama_produk||o.name,barcode:e,price:o.harga_jual||o.price||0,qty:1};a(e=>[...e,i]),ou.scanSuccess()}catch(Au){console.error("Product lookup failed:",Au),ou.scanError(),b("Gagal mencari produk"),setTimeout(()=>b(""),2e3)}},[t]),U=e=>{if(i.find(t=>t.productId===e.id))a(t=>t.map(t=>t.productId===e.id?Ve(Ve({},t),{},{qty:t.qty+1}):t));else{const t={id:"cart_".concat(Date.now()),productId:e.id,name:e.name,barcode:e.barcode,price:e.price,qty:1};a(e=>[...e,t])}ou.itemAdded()},z=(0,o.useCallback)(async e=>{if(I(e),e.length<2)T([]);else{R(!0);try{const t=localStorage.getItem("access_token"),r=await fetch("/api/products/search/pos?q=".concat(encodeURIComponent(e),"&limit=5"),{headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){const e=((await r.json()).products||[]).map(e=>({id:e.id,name:e.name,barcode:e.barcode||"",price:e.harga_jual||0}));T(e)}}catch(Au){console.error("Product search failed:",Au)}finally{R(!1)}}},[]);return(0,Oe.jsxs)("div",{className:"sales-transaction bg-gray-100 flex flex-col relative ".concat(n?"h-full w-full":"fixed inset-0 z-50"),children:[(0,Oe.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 flex items-center gap-3 flex-shrink-0",style:{height:"60px"},children:[(0,Oe.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:n?"Tutup POS":"Kembali",children:(0,Oe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n?(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Oe.jsx)("div",{className:"flex-1",children:(0,Oe.jsx)("h1",{className:"font-semibold text-lg",children:"\ud83d\udcb0 Jual Produk"})}),(0,Oe.jsx)("button",{onClick:()=>{E(!0),setTimeout(()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.focus()},100)},className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Input Manual"})]}),w&&(0,Oe.jsx)("div",{className:"absolute top-20 left-4 right-4 z-50 bg-red-500 text-white px-4 py-2 rounded-lg text-center text-sm shadow-lg",children:w}),y&&(0,Oe.jsxs)("div",{className:"absolute inset-0 z-50 bg-gray-50 flex flex-col overflow-auto",children:[(0,Oe.jsxs)("div",{className:"bg-green-500 text-white py-6 text-center flex-shrink-0",children:[(0,Oe.jsx)("div",{className:"text-5xl mb-2",children:"\u2705"}),(0,Oe.jsx)("div",{className:"text-xl font-bold",children:"Transaksi Berhasil!"}),(0,Oe.jsxs)("div",{className:"text-green-100",children:["Kembalian: Rp",B.toLocaleString("id-ID")]})]}),(0,Oe.jsx)("div",{className:"flex-1 p-4 overflow-auto",children:(0,Oe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border max-w-md mx-auto overflow-hidden",children:[x&&(0,Oe.jsx)("div",{className:"receipt-content p-4",dangerouslySetInnerHTML:{__html:x},style:{}}),!x&&i.length>0&&(0,Oe.jsxs)("div",{className:"p-5",children:[(0,Oe.jsxs)("div",{className:"text-center border-b pb-4 mb-4",children:[(0,Oe.jsx)("p",{className:"text-gray-500 text-sm",children:"Penjualan"}),(0,Oe.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:(new Date).toLocaleDateString("id-ID")})]}),(0,Oe.jsx)("div",{className:"space-y-3",children:i.map((e,t)=>(0,Oe.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Oe.jsxs)("div",{className:"flex-1",children:[(0,Oe.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,Oe.jsxs)("div",{className:"text-sm text-gray-500",children:[e.qty," \xd7 Rp",e.price.toLocaleString("id-ID")]})]}),(0,Oe.jsxs)("div",{className:"text-right font-medium text-gray-900",children:["Rp",(e.qty*e.price).toLocaleString("id-ID")]})]},t))}),(0,Oe.jsx)("div",{className:"border-t my-4"}),(0,Oe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Oe.jsx)("span",{className:"font-bold text-gray-900",children:"TOTAL"}),(0,Oe.jsxs)("span",{className:"font-bold text-xl text-green-600",children:["Rp",D.toLocaleString("id-ID")]})]})]}),(0,Oe.jsx)("div",{className:"border-t p-4 text-center bg-gray-50",children:(0,Oe.jsx)("p",{className:"text-gray-500 text-sm italic",children:"Terima kasih! \ud83d\ude4f"})})]})}),(0,Oe.jsxs)("div",{className:"p-4 space-y-2 bg-white border-t flex-shrink-0",children:[(0,Oe.jsx)("button",{onClick:()=>{a([]),f(0),v(!1),C(""),L()},className:"w-full py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-bold transition-colors",children:"\ud83d\udd04 Transaksi Baru"}),(0,Oe.jsx)("button",{onClick:()=>{a([]),f(0),v(!1),C(""),r()},className:"w-full py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition-colors",children:"\u2190 Kembali ke Dashboard"})]})]}),_&&(0,Oe.jsx)("div",{className:"absolute inset-0 z-50 bg-black/50 flex items-start justify-center pt-20",children:(0,Oe.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-[90%] max-w-md overflow-hidden",children:[(0,Oe.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,Oe.jsx)("h3",{className:"font-semibold text-lg",children:"Input Manual"}),(0,Oe.jsx)("button",{onClick:()=>{E(!1),A(""),I(""),T([])},className:"p-1 hover:bg-gray-100 rounded-full",children:(0,Oe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Oe.jsxs)("div",{className:"p-4 space-y-4",children:[(0,Oe.jsxs)("div",{className:"relative",children:[(0,Oe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cari Nama Produk"}),(0,Oe.jsx)("input",{ref:j,type:"text",value:N,onChange:e=>z(e.target.value),placeholder:"Ketik nama produk...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",autoComplete:"off",autoFocus:!0}),O&&(0,Oe.jsx)("div",{className:"text-center py-2 text-gray-500 text-sm",children:"Mencari..."}),k.length>0&&(0,Oe.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg divide-y max-h-48 overflow-y-auto z-10",children:k.map(e=>(0,Oe.jsxs)("button",{onClick:()=>(e=>{U(e),I(""),T([]),E(!1)})(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center justify-between",children:[(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("div",{className:"font-medium",children:e.name}),(0,Oe.jsx)("div",{className:"text-xs text-gray-500",children:e.barcode||"No barcode"})]}),(0,Oe.jsxs)("div",{className:"text-green-600 font-semibold",children:["Rp",e.price.toLocaleString("id-ID")]})]},e.id))}),N.length>=2&&!O&&0===k.length&&(0,Oe.jsx)("div",{className:"text-center py-2 text-gray-500 text-sm",children:"Produk tidak ditemukan"})]}),(0,Oe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Oe.jsx)("div",{className:"flex-1 h-px bg-gray-200"}),(0,Oe.jsx)("span",{className:"text-sm text-gray-400",children:"atau"}),(0,Oe.jsx)("div",{className:"flex-1 h-px bg-gray-200"})]}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scan/Input Barcode"}),(0,Oe.jsx)("input",{ref:P,type:"text",inputMode:"numeric",pattern:"[0-9]*",value:S,onChange:e=>(e=>{const t=e.replace(/\D/g,"");A(t),13===t.length&&(F(t),A(""),E(!1))})(e.target.value),placeholder:"Ketik 13 digit barcode...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-lg text-center tracking-widest focus:ring-2 focus:ring-green-500 focus:border-green-500",maxLength:13,autoComplete:"off"}),(0,Oe.jsxs)("div",{className:"text-xs text-gray-500 mt-1 text-center",children:[S.length,"/13 digit ",13===S.length&&"\u2713"]})]})]})]})}),(0,Oe.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,Oe.jsx)(iu,{isActive:s,onToggle:()=>l(!s),onBarcodeDetected:F}),!s&&(0,Oe.jsx)(cu,{products:c,onSelect:U}),(0,Oe.jsx)(au,{items:i,total:D,onQtyChange:(e,t)=>{a(t<=0?t=>t.filter(t=>t.id!==e):r=>r.map(r=>r.id===e?Ve(Ve({},r),{},{qty:t}):r))},onRemove:e=>{a(t=>t.filter(t=>t.id!==e))},onCheckout:()=>p(!0)})]}),h&&(0,Oe.jsx)(lu,{total:D,paymentAmount:d,kembalian:B,isSubmitting:g,onShortcutTap:e=>{f(t=>t+e),ou.tap()},onUangPas:()=>{f(D),ou.tap()},onManualInput:f,onReset:()=>{f(0)},onComplete:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"TUNAI",t=arguments.length>1?arguments[1]:void 0;if(!g)if("TUNAI"===e&&d<D)ou.scanError();else{m(!0);try{const r=localStorage.getItem("access_token"),n={items:i.map(e=>({productId:e.productId,name:e.name,barcode:e.barcode,qty:e.qty,price:e.price})),totalAmount:D,paymentAmount:"TUNAI"===e?d:D,kembalian:"TUNAI"===e?B:0,paymentMethod:"TUNAI"===e?"CASH":e,proofImage:t};console.log("[POS] Submitting transaction...");const o=await fetch("/api/transactions/sales",{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(n)}),a=await o.json();if(console.log("[POS] Transaction response:",{ok:o.ok,status:o.status,resultStatus:a.status}),o.ok&&"success"===a.status){ou.transactionComplete();const e=a.message||a.receipt_html||"";e&&C(e),p(!1),v(!0)}else console.error("[POS] Transaction failed:",a),ou.scanError(),b(a.message||a.detail||"Transaksi gagal"),setTimeout(()=>b(""),3e3)}catch(Au){console.error("[POS] Transaction error:",Au),ou.scanError(),b("Transaksi gagal"),setTimeout(()=>b(""),3e3)}finally{m(!1)}}},onCancel:()=>p(!1)})]})};function du(e){const[t,r]=(0,o.useState)(()=>"undefined"!==typeof window&&window.matchMedia(e).matches);return(0,o.useEffect)(()=>{if("undefined"===typeof window)return;const t=window.matchMedia(e),n=e=>{r(e.matches)};return r(t.matches),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},[e]),t}const fu=()=>(0,Oe.jsxs)("div",{className:"flex gap-1",children:[(0,Oe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"1.4s"}}),(0,Oe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"200ms",animationDuration:"1.4s"}}),(0,Oe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"400ms",animationDuration:"1.4s"}})]}),hu=e=>{let{activeTenant:t,onBack:r,isMobile:n=!1,onPOSToggle:i,isPOSActive:a}=e;const s=re(),l=ee(),c=du("(min-width: 1024px)"),[u,d]=(0,o.useState)(""),[f,h]=(0,o.useState)([]),[p,g]=(0,o.useState)(!1),[m,y]=(0,o.useState)(!1),[v,w]=(0,o.useState)(!1),[b,x]=(0,o.useState)(!1),[C,_]=(0,o.useState)(!1),[E,S]=(0,o.useState)(""),[A,N]=(0,o.useState)(""),[I,k]=(0,o.useState)(null),[T,O]=(0,o.useState)(!1);(0,o.useEffect)(()=>{const e=new URLSearchParams(l.search);if("openPurchaseForm"===e.get("action")){const t=l.state;console.log("[ChatPanel] openPurchaseForm action, state:",t),"purchase"===(null===t||void 0===t?void 0:t.action)&&null!==t&&void 0!==t&&t.productData&&(console.log("[ChatPanel] Setting scannedProductData:",t.productData),k(t.productData)),x(!0),e.delete("action");const r=e.toString();s(l.pathname+(r?"?"+r:""),{replace:!0,state:{}})}},[l.search,l.pathname,s,l.state]);const[R,M]=(0,o.useState)(!1),[P,j]=(0,o.useState)(!1),[D,B]=(0,o.useState)(!1),[L,F]=(0,o.useState)(!1),[U,z]=(0,o.useState)(""),[V,H]=(0,o.useState)(""),[W,G]=(0,o.useState)(""),X=(0,o.useRef)(""),Y=(0,o.useRef)(null),K=(0,o.useRef)(null),Z=(0,o.useRef)(null);(0,o.useEffect)(()=>{const e=e=>{const t=e.target;if(console.log("[ChatPanel] Click detected on:",t.tagName,t.className),t.classList.contains("barcode-register-btn")){e.preventDefault(),e.stopPropagation();const r=t.getAttribute("data-product-id"),n=t.getAttribute("data-product-name");console.log("[ChatPanel] Barcode button clicked! ProductId:",r,"ProductName:",n),r&&n&&""!==r.trim()&&"None"!==r&&""!==n.trim()?(console.log("[ChatPanel] Opening barcode modal..."),S(r),N(n),_(!0)):(console.error("[ChatPanel] Missing or invalid productId/productName:",{productId:r,productName:n}),alert("\u26a0\ufe0f Product ID tidak tersedia.\n\nFitur registrasi barcode hanya tersedia untuk produk yang sudah terdaftar di sistem.\n\nSaran: Produk ini kemungkinan baru pertama kali dibeli. Lakukan pembelian lagi untuk produk yang sama, maka barcode bisa didaftarkan."))}},t=K.current;return t?(console.log("[ChatPanel] Adding barcode click listener to container"),t.addEventListener("click",e)):console.warn("[ChatPanel] Messages container ref not available"),()=>{t&&(console.log("[ChatPanel] Removing barcode click listener"),t.removeEventListener("click",e))}},[]);const q=["kulakan","kulak","beli","belanja"],$=["karton","dus","box","slop","bal","koli","pack","lusin"],Q=["pcs","unit","buah","biji","butir","lembar","batang","bungkus","sachet","botol"],J=e=>{var t;const r="".concat(u.trim()," ").concat(e," harga ");d(r),G(e),B(!1),X.current=r,null===(t=Z.current)||void 0===t||t.focus()};(0,o.useEffect)(()=>{(async()=>{if(console.log("[ChatPanel] \ud83d\udccb loadChatHistory called, activeTenant:",null===t||void 0===t?void 0:t.id),!t||"milky-assistant"===t.id)return console.log("[ChatPanel] \u23ed\ufe0f Skipping: no tenant or milky-assistant"),void h([]);const e=Ie(),r=ke();if(console.log("[ChatPanel] \ud83d\udd11 Auth check:",{userId:e,isAuth:r,hasToken:!!localStorage.getItem("access_token")}),!e||!r)return console.log("[ChatPanel] \u26a0\ufe0f Not authenticated, skipping history load"),void h([]);y(!0),console.log("[ChatPanel] \ud83d\udd04 Loading history for:",{userId:e,tenantId:t.id});try{var n,o,i,a,s,l;const r=await async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=await Ge("/chat/history?user_id=".concat(e,"&tenant_id=").concat(t,"&limit=").concat(r,"&offset=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok){let e="Failed to fetch chat history: ".concat(o.status);try{const t=await o.text();t&&(e+=" - ".concat(t.substring(0,200)))}catch(Au){}throw new Error(e)}const i=await o.text();let a;console.log("[fetchChatHistory] Raw response text:",i.substring(0,500));try{a=JSON.parse(i)}catch(Au){throw console.error("[fetchChatHistory] Failed to parse JSON:",Au),console.error("[fetchChatHistory] Response text:",i),new Error("Invalid JSON response: ".concat(i.substring(0,200)))}return console.log("[fetchChatHistory] Parsed response:",a),"success"===a.status&&a.data?a.data:a.messages?{messages:a.messages,total_count:a.total_count||a.messages.length,has_more:a.has_more||!1,limit:r,offset:n}:a.messages||a.data?a:(console.warn("[fetchChatHistory] No messages in response:",a),{messages:[],total_count:0,has_more:!1,limit:r,offset:n})}(e,t.id,50,0);console.log("[ChatPanel] \u2705 History response:",{messageCount:(null===r||void 0===r||null===(n=r.messages)||void 0===n?void 0:n.length)||0,totalCount:null===r||void 0===r?void 0:r.total_count,hasMore:null===r||void 0===r?void 0:r.has_more,firstMsgId:null===r||void 0===r||null===(o=r.messages)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.id,lastMsgId:null===r||void 0===r||null===(a=r.messages)||void 0===a||null===(s=a[(null===r||void 0===r||null===(l=r.messages)||void 0===l?void 0:l.length)-1])||void 0===s?void 0:s.id});const c=[];[...r.messages||[]].reverse().forEach(e=>{let t="Now";if(e.created_at)try{const r="number"===typeof e.created_at?e.created_at:parseInt(e.created_at,10);if(!isNaN(r)&&r>0){t=(r<1e10?new Date(1e3*r):new Date(r)).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}}catch(Au){console.warn("[ChatPanel] Failed to parse timestamp:",e.created_at,Au)}c.push({id:"".concat(e.id,"-user"),sender:"user",content:e.message||"",timestamp:t}),e.response&&c.push({id:"".concat(e.id,"-assistant"),sender:"assistant",content:e.response,timestamp:t})}),console.log("[ChatPanel] Transformed messages:",c.length),h(c)}catch(c){console.error("[ChatPanel] \u274c Failed to load chat history:",c),console.error("[ChatPanel] Error details:",c.message,c.stack),console.error("[ChatPanel] Auth state:",{hasToken:!!localStorage.getItem("access_token"),userId:Ie(),isAuth:ke()}),h([])}finally{y(!1)}})()},[null===t||void 0===t?void 0:t.id]);const te=()=>{K.current&&setTimeout(()=>{var e;null===(e=K.current)||void 0===e||e.scrollTo({top:K.current.scrollHeight,behavior:"smooth"})},100)};(0,o.useEffect)(()=>{te()},[f]),(0,o.useEffect)(()=>{if(Z.current){Z.current.style.height="auto";const e=Z.current.scrollHeight,t=120,r=Math.min(e,t);Z.current.style.height="".concat(r,"px"),Z.current.style.overflowY=e>t?"auto":"hidden"}},[u]);const ne=async()=>{if(!u.trim()||!t||p)return;const e=u.trim();d("");const r={id:Date.now().toString(),sender:"user",content:e,timestamp:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};h(e=>[...e,r]),w(!0),g(!0);try{if(ke()){const r=await Ye(t.id,e);w(!1);const n={id:Date.now().toString(),sender:"assistant",content:r.milky_response||r.message||"Maaf, terjadi kesalahan.",timestamp:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};h(e=>[...e,n])}else{w(!1);const e={id:Date.now().toString(),sender:"assistant",content:"Silakan login terlebih dahulu.",timestamp:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};h(t=>[...t,e])}}catch(n){console.error("Error sending message:",n),w(!1),h(e=>[...e,{id:Date.now().toString(),sender:"assistant",content:"Maaf, terjadi kesalahan. Silakan coba lagi.",timestamp:"Now"}])}finally{g(!1)}};return t?(0,Oe.jsxs)("div",{className:"flex flex-col w-full bg-white ".concat(n?"h-screen":"h-full"),style:n?{height:"100dvh",width:"100vw",maxWidth:"100vw",overflow:"hidden",position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#ffffff",isolation:"isolate"}:{backgroundColor:"#ffffff"},children:[(0,Oe.jsx)("div",{className:"flex items-center justify-between px-4 border-b border-gray-200 bg-white ".concat(n?"fixed top-0 left-0 right-0 z-50":""),style:n?{height:"calc(60px + env(safe-area-inset-top))",paddingTop:"env(safe-area-inset-top)",width:"100vw",maxWidth:"100vw",boxSizing:"border-box",position:"fixed",top:0,left:0,right:0,zIndex:50,backgroundColor:"#ffffff"}:{height:"60px",backgroundColor:"#ffffff"},children:(0,Oe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Oe.jsx)("button",{onClick:r,className:"md:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Back to tenant list",children:(0,Oe.jsx)("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("h2",{className:"text-base font-medium text-gray-900",children:t.name}),"online"===t.status&&(0,Oe.jsx)("p",{className:"text-xs text-gray-500",children:"Online"})]})]})}),(0,Oe.jsxs)("div",{ref:K,className:"flex-1 overflow-y-auto space-y-3 bg-white ".concat(n?"":"py-4"),style:n?{position:"absolute",top:"calc(60px + env(safe-area-inset-top))",bottom:"calc(48px + 24px + env(safe-area-inset-bottom))",left:0,right:0,width:"100vw",maxWidth:"100vw",overflowX:"hidden",overflowY:"auto",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"20px",paddingRight:"20px",backgroundColor:"#ffffff",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"}:{paddingTop:"16px",paddingBottom:"16px",paddingLeft:"20px",paddingRight:"20px",backgroundColor:"#ffffff"},children:[m&&(0,Oe.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,Oe.jsxs)("div",{className:"flex gap-3 animate-pulse",children:[(0,Oe.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex-shrink-0"}),(0,Oe.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,Oe.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,Oe.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},e))}),!m&&0===f.length&&t&&"milky-assistant"!==t.id&&(0,Oe.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 py-12",children:[(0,Oe.jsx)("svg",{className:"w-16 h-16 mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,Oe.jsx)("p",{className:"text-sm text-gray-500",children:"Belum ada pesan"}),(0,Oe.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Mulai percakapan dengan mengirim pesan"})]}),!m&&f.map(e=>(0,Oe.jsx)("div",{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"," ").concat("user"===e.sender?"pr-2":"pl-2"),children:(0,Oe.jsxs)("div",{className:"max-w-[80%] px-4 py-2.5 rounded-lg ".concat("user"===e.sender?"bg-yellow-100 text-gray-900 shadow-sm":"bg-white text-gray-900 shadow-sm border border-gray-200"),children:[e.content.includes("<table")||e.content.includes("<div")?(0,Oe.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content},className:"text-sm text-left"}):(0,Oe.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words text-left",children:e.content}),(0,Oe.jsx)("p",{className:"text-xs mt-1 text-left ".concat("user"===e.sender?"text-gray-600":"text-gray-500"),children:e.timestamp})]})},e.id)),v&&(0,Oe.jsx)("div",{className:"flex justify-start pl-2",children:(0,Oe.jsx)("div",{className:"max-w-[80%] px-4 py-3 rounded-lg bg-white shadow-sm border border-gray-200",children:(0,Oe.jsx)(fu,{})})}),(0,Oe.jsx)("div",{ref:Y,style:{height:"1px"}})]}),(0,Oe.jsx)("div",{className:"bg-white border-t border-gray-200 ".concat(n?"fixed bottom-0 left-0 right-0 z-50":""),style:n?{padding:"12px 16px",paddingBottom:"max(12px, env(safe-area-inset-bottom))",width:"100vw",maxWidth:"100vw",boxSizing:"border-box",position:"fixed",bottom:0,left:0,right:0,zIndex:50,backgroundColor:"#ffffff"}:{padding:"12px 16px",paddingBottom:"12px",backgroundColor:"#ffffff"},children:(0,Oe.jsxs)("div",{className:"flex items-end gap-0",children:[(0,Oe.jsxs)("div",{className:"relative flex-1",children:[R&&(0,Oe.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-60 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:(0,Oe.jsx)(Qt,{value:U,onChange:(e,t)=>{t&&(e=>{var t;const r=u.toLowerCase(),n=q.find(e=>r.startsWith(e))||"Kulakan",o="".concat(n.charAt(0).toUpperCase()+n.slice(1)," ").concat(e," sejumlah ");d(o),M(!1),null===(t=Z.current)||void 0===t||t.focus()})(t.name)},placeholder:"",disabled:!1})}),D&&(0,Oe.jsxs)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-48 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-2",children:[(0,Oe.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:"Pilih Satuan:"}),(0,Oe.jsx)("div",{className:"text-xs font-semibold text-gray-600 px-2 py-1",children:"Wholesales:"}),$.map(e=>(0,Oe.jsx)("button",{onClick:()=>J(e),className:"w-full text-left px-3 py-2 hover:bg-purple-50 rounded text-sm",children:e},e)),(0,Oe.jsx)("div",{className:"text-xs font-semibold text-gray-600 px-2 py-1 mt-2",children:"Retail:"}),Q.map(e=>(0,Oe.jsx)("button",{onClick:()=>J(e),className:"w-full text-left px-3 py-2 hover:bg-purple-50 rounded text-sm",children:e},e))]}),L&&(0,Oe.jsxs)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-48 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-2",children:[(0,Oe.jsx)("div",{className:"text-xs text-gray-500 mb-2 px-2",children:"Metode Pembayaran:"}),["tunai","transfer","kredit","debit","qris"].map(e=>(0,Oe.jsx)("button",{onClick:()=>(e=>{var t;const r="".concat(u.trim()," ").concat(e," dari ");d(r),F(!1),null===(t=Z.current)||void 0===t||t.focus()})(e),className:"w-full text-left px-3 py-2 hover:bg-purple-50 rounded text-sm capitalize",children:e},e))]}),P&&(0,Oe.jsx)("div",{className:"absolute bottom-full left-0 right-0 mb-2 max-h-60 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:(0,Oe.jsx)(Jt,{value:V,onChange:e=>{(e=>{var t;const r=u.substring(0,u.toLowerCase().lastIndexOf("dari")+4),n="".concat(r," ").concat(e);d(n),j(!1),null===(t=Z.current)||void 0===t||t.focus()})(e)},placeholder:"",disabled:!1})}),(0,Oe.jsx)("textarea",{ref:Z,value:u,onChange:e=>{d(e.target.value),(e=>{const t=e.toLowerCase(),r=q.some(e=>t.startsWith(e));if(!r)return M(!1),j(!1),B(!1),void F(!1);if(q.find(e=>t==="".concat(e," "))&&e!==X.current)return z(""),M(!0),j(!1),B(!1),F(!1),void(X.current=e);if(r&&!t.includes("sejumlah")){const r=q.find(e=>t.startsWith(e));if(r){const t=e.substring(r.length).trim();if(t.length>=2)return z(t),M(!0),j(!1),B(!1),void F(!1)}}if(t.match(/sejumlah\s+(\d+)\s+$/)&&e!==X.current)return B(!0),M(!1),j(!1),F(!1),void(X.current=e);const n=e.match(/sejumlah\s+\d+\s+(\w+)\s+$/i);if(n&&!t.includes("harga")&&e!==X.current){const t=n[1].toLowerCase();if([...$,...Q].includes(t)){const r="".concat(e.trim()," harga ");return d(r),G(t),B(!1),void(X.current=r)}}const o=e.match(/harga\s+(\d+(?:\.\d+)?)\s*(r|ri|rb|rib|ribu|k|jt|juta)?\s+$/i);if(o&&e!==X.current){var i;const t=parseFloat(o[1].replace(/\./g,"")),r=(null===(i=o[2])||void 0===i?void 0:i.toLowerCase())||"";let n=t;r.includes("jt")||r.includes("juta")?n=1e6*t:r.match(/^(r|ri|rb|rib|ribu|k)$/)&&(n=1e3*t);const a=new Intl.NumberFormat("id-ID").format(n),s=W||"unit",l=e.substring(0,e.toLowerCase().lastIndexOf("harga")),c="".concat(l,"harga Rp").concat(a," per ").concat(s," isi ");return d(c),X.current=c,B(!1),void M(!1)}if(e.match(/isi\s+(\d+)\s+$/i)&&!t.includes("dari")&&e!==X.current){const t="".concat(e.trim()," per pcs dari ");return d(t),X.current=t,j(!0),M(!1),B(!1),void F(!1)}const a=t.match(/dari\s+(.*)$/);if(a){if(0===a[1].length&&e!==X.current)return H(""),j(!0),M(!1),B(!1),F(!1),void(X.current=e);if(a[1].length>=2)return H(a[1]),j(!0),M(!1),B(!1),void F(!1)}M(!1),j(!1),B(!1),F(!1)})(e.target.value)},onKeyPress:e=>{/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ne())},placeholder:"",rows:1,className:"w-full py-3 bg-gray-100 border border-gray-300 rounded-2xl resize-none focus:outline-none focus:border-gray-400 focus:bg-white text-sm text-gray-900 placeholder-gray-400",style:{minHeight:"48px",maxHeight:"120px",paddingLeft:"56px",paddingRight:"56px",boxSizing:"border-box",overflowX:"hidden",lineHeight:"1.5",wordWrap:"break-word",wordBreak:"break-word",transition:"height 0.2s ease"}}),(0,Oe.jsx)("div",{className:"absolute left-2 bottom-2",style:{position:"absolute",left:"8px",bottom:"8px"},children:(0,Oe.jsx)(qe,{isMobile:n,onMenuItemClick:e=>{console.log("[ChatPanel] Action menu item clicked:",e),"purchase_goods"===e?x(!0):"sales_product"===e&&(c&&i?i(!0):O(!0))}})}),u.trim()&&(0,Oe.jsx)("button",{onClick:ne,disabled:p,className:"absolute bottom-2 right-2 w-10 h-10 flex items-center justify-center bg-amber-500 hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-full transition-all",style:{position:"absolute",bottom:"8px",right:"8px",width:"40px",height:"40px",minWidth:"40px",minHeight:"40px",animation:"fadeInScale 0.15s ease"},"aria-label":"Send message",children:(0,Oe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),!u.trim()&&(0,Oe.jsx)("button",{onClick:()=>{s("/sales/scan",{state:{tenantId:null===t||void 0===t?void 0:t.id},replace:!1})},className:"flex items-center justify-center text-gray-700 hover:text-gray-900 active:text-amber-600 transition-all",style:{width:"48px",height:"48px",minWidth:"48px",minHeight:"48px",marginBottom:"4px",animation:"fadeInScale 0.15s ease"},"aria-label":"Scan product",children:(0,Oe.jsxs)("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,Oe.jsx)("style",{children:"\n            @keyframes fadeInScale {\n              from {\n                opacity: 0;\n                transform: scale(0.8);\n              }\n              to {\n                opacity: 1;\n                transform: scale(1);\n              }\n            }\n          "})]})}),(0,Oe.jsx)(at,{isOpen:b,onClose:()=>{x(!1),k(null)},isMobile:n,onTransactionComplete:e=>{console.log("[ChatPanel] Transaction completed, adding to chat:",e);const t={id:"tx-".concat(Date.now()),sender:"assistant",content:e,timestamp:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})};h(e=>[...e,t]),setTimeout(()=>{te()},100)},scannedProductData:I}),(0,Oe.jsx)(nu,{isOpen:C,productId:E,productName:A,onClose:()=>_(!1),onSuccess:e=>{console.log("[ChatPanel] Barcode registered:",e),h(t=>t.map(t=>{if(t.content.includes('data-product-id="'.concat(E,'"'))){const r=t.content.replace(/<div data-product-id="[^"]*" data-product-name="[^"]*"[^>]*class="barcode-register-btn"[^>]*>\u274e Daftarkan Barcode<\/div>/,'<div style="font-size:12px;color:#10b981;margin-top:4px">\u2705 Barcode: '.concat(e,"</div>"));return Ve(Ve({},t),{},{content:r})}return t})),_(!1)}}),T&&t&&!c&&(0,Oe.jsx)(uu,{tenantId:t.id,onClose:()=>O(!1)})]}):(0,Oe.jsxs)("div",{className:"flex flex-col items-center justify-center h-full bg-white text-gray-400",children:[(0,Oe.jsx)("svg",{className:"w-16 h-16 mb-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,Oe.jsx)("p",{className:"text-sm",children:"Select a tenant to start chatting"})]})},pu=()=>{const e=ee(),t=re(),[r,n]=(0,o.useState)([]),[i,a]=(0,o.useState)(!0),[s,l]=(0,o.useState)(!1),c=window.innerWidth<768,u=window.innerWidth>=1024,[d,f]=(0,o.useState)(()=>{if(!c){const e=localStorage.getItem("activeTenantId");return e?{id:e,name:"Loading..."}:null}const e=new URLSearchParams(window.location.search).get("tenant"),t=localStorage.getItem("mobile_active_tenant");return e?{id:e,name:"Loading..."}:t?{id:t,name:"Loading..."}:null}),[h,p]=(0,o.useState)(()=>{if(!c)return!1;const e=new URLSearchParams(window.location.search),t=e.get("tenant"),r=e.get("action"),n=localStorage.getItem("mobile_chat_state");return!(!t&&!r)||"chat"===n});(0,o.useEffect)(()=>{if(!c)return;const t=new URLSearchParams(e.search),r=t.get("tenant"),n=t.get("action");n&&r&&(console.log("[Dashboard] Detected action parameter, ensuring chat is shown:",n),p(!0),localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",r))},[e.search,c]),(0,o.useEffect)(()=>{(async()=>{try{a(!0);const e=await(async()=>{try{var e;const t=await Ge("/api/user/tenants",{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)return t.status,await Ke();const r=await t.json();console.log("[getUserTenants] API response:",r);const n=(null===(e=r.tenants)||void 0===e?void 0:e.map(e=>{var t,r;return{id:e.tenant_id||e.id,name:e.display_name||e.name||e.tenant_id,avatar:e.avatar,status:e.status||"offline",lastMessage:(null===(t=e.last_message)||void 0===t?void 0:t.content)||"",lastMessageTime:(null===(r=e.last_message)||void 0===r?void 0:r.timestamp)||"Now",role:e.role||"Owner",isPrivate:e.is_private}}))||[];return console.log("[getUserTenants] Mapped tenants:",n),n}catch(t){return await Ke()}})();console.log("[Dashboard] Fetched tenants from API:",e);const t=[{id:"milky-assistant",name:"Milky Assistant",avatar:"\ud83e\udd16",status:"online",lastMessage:"Siap membantu Anda!",lastMessageTime:"Now"},...e];if(console.log("[Dashboard] All tenants (with Milky Assistant):",t.map(e=>({id:e.id,name:e.name}))),n(t),c){const e=new URLSearchParams(window.location.search),r=e.get("tenant"),n=e.get("action"),o=localStorage.getItem("mobile_active_tenant");if(r){const e=t.find(e=>e.id===r);if(e)f(e),p(!0),localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",r),console.log("[Dashboard] Set active tenant from URL:",e.id,"action:",n);else{console.log("[Dashboard] Tenant not in list, creating temp:",r);f({id:r,name:"Loading..."}),p(!0),localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",r)}}else if(o){const e=t.find(e=>e.id===o);if(e){f(e);const t=localStorage.getItem("mobile_chat_state");p("chat"===t)}}}else{const e=localStorage.getItem("activeTenantId");if(e){const r=t.find(t=>t.id===e);f(r||t[0])}else f(t[0])}}catch(e){console.error("Failed to fetch tenants:",e);const t={id:"milky-assistant",name:"Milky Assistant",avatar:"\ud83e\udd16",status:"online"};n([t]),c||f(t)}finally{a(!1)}})()},[]),(0,o.useEffect)(()=>{d&&(c||localStorage.setItem("activeTenantId",d.id))},[d,c]);const g=e=>{const n=r.find(t=>t.id===e);n?(f(n),p(!0),c&&(localStorage.setItem("mobile_chat_state","chat"),localStorage.setItem("mobile_active_tenant",e),t("/app?tenant=".concat(e),{replace:!0}))):console.error("[handleTenantSelect] Tenant not found:",e,"Available:",r.map(e=>e.id))},m=()=>{p(!1),c&&(localStorage.setItem("mobile_chat_state","list"),localStorage.removeItem("mobile_active_tenant"),t("/app",{replace:!0}))};return(0,Oe.jsxs)(Oe.Fragment,{children:[(0,Oe.jsx)("div",{className:"md:hidden h-screen overflow-hidden",children:h?(0,Oe.jsx)(hu,{activeTenant:d,onBack:m,isMobile:!0}):(0,Oe.jsx)(Be,{tenants:r,activeTenant:d,onSelectTenant:g,isLoading:i})}),(0,Oe.jsxs)("div",{className:"hidden md:block",style:{position:"relative",height:"100vh",width:"100vw",overflow:"hidden"},children:[(0,Oe.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"64px",height:"100%",overflow:"hidden"},children:(0,Oe.jsx)(Pe,{})}),!(s&&u)&&(0,Oe.jsx)("div",{style:{position:"absolute",left:"64px",top:0,width:"400px",height:"100%",overflow:"hidden"},children:(0,Oe.jsx)(Be,{tenants:r,activeTenant:d,onSelectTenant:g,isLoading:i})}),s&&u?(0,Oe.jsxs)("div",{style:{position:"absolute",left:"64px",right:0,top:0,height:"100%",overflow:"hidden",display:"flex"},children:[(0,Oe.jsx)("div",{style:{width:"50%",height:"100%",borderRight:"1px solid #e5e7eb"},children:(0,Oe.jsx)(uu,{tenantId:(null===d||void 0===d?void 0:d.id)||"",onClose:()=>l(!1),isEmbedded:!0})}),(0,Oe.jsx)("div",{style:{width:"50%",height:"100%"},children:(0,Oe.jsx)(hu,{activeTenant:d,onBack:m,onPOSToggle:l,isPOSActive:s})})]}):(0,Oe.jsx)("div",{style:{position:"absolute",left:"464px",right:0,top:0,height:"100%",overflow:"hidden"},children:(0,Oe.jsx)(hu,{activeTenant:d,onBack:m,onPOSToggle:l,isPOSActive:s})})]})]})},gu=()=>{const[e,t]=(0,o.useState)(0);return(0,o.useEffect)(()=>{const e=setInterval(()=>{t(e=>(e+1)%4)},400);return()=>clearInterval(e)},[]),(0,Oe.jsxs)("span",{children:["Scanning",".".repeat(e)]})},mu=()=>{const e=re(),t=ee(),r=(0,o.useRef)(!0),n=(0,o.useRef)(!1),i=(0,o.useRef)(null),a=(0,o.useRef)(null),s=t.state,l=new URLSearchParams(t.search),c=(null===s||void 0===s?void 0:s.context)||l.get("context")||"sale",u=(null===s||void 0===s?void 0:s.tenantId)||l.get("tenant"),d=(null===s||void 0===s?void 0:s.returnTo)||"/app?tenant=".concat(u,"&action=openPurchaseForm"),[f,h]=(0,o.useState)(null),[p,g]=(0,o.useState)(""),[m,y]=(0,o.useState)(!0),[v,w]=(0,o.useState)(!1),[b,x]=(0,o.useState)(null),[C,_]=(0,o.useState)(!1),[E,S]=(0,o.useState)(""),[A,N]=(0,o.useState)(!1),[I,k]=(0,o.useState)(!1),[T,O]=(0,o.useState)(""),[R,M]=(0,o.useState)("barcode"),[P,j]=(0,o.useState)(""),D=(0,o.useCallback)(async e=>{if(!r.current||n.current||b)return;const t=e.text;console.log("[Scanner] Barcode detected:",t,"format:",e.format),n.current=!0,x(t),w(!1),i.current&&i.current.stop(),navigator.vibrate&&navigator.vibrate(200),await F(t)},[b]),B=(0,o.useCallback)(async()=>{console.log("[Scanner] Initializing BarcodeScanner..."),y(!0),g("");try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return g("Browser tidak mendukung akses kamera."),h(!1),void y(!1);if(await new Promise(e=>setTimeout(e,100)),!r.current||!a.current)return;const e=new tu(a.current,{desiredWidth:1280,desiredHeight:720,decodeFPS:12,roiResizeLongSide:800,consensusFrames:2});e.onFound(D),e.onProgress(e=>{console.log("[Scanner] Progress:",e.phase),"camera-ready"===e.phase&&(h(!0),w(!0),y(!1))}),e.onError(e=>{console.error("[Scanner] Error:",e),e.message.includes("Permission")||"NotAllowedError"===e.name?g("Akses kamera ditolak. Mohon izinkan akses kamera di pengaturan browser."):"NotFoundError"===e.name?g("Kamera tidak ditemukan. Pastikan perangkat memiliki kamera."):g("Gagal mengakses kamera: ".concat(e.message)),h(!1),y(!1)}),i.current=e,await e.start()}catch(e){if(console.error("[Scanner] Initialization error:",e),!r.current)return;h(!1),y(!1),"NotAllowedError"===e.name?g("Akses kamera ditolak. Mohon izinkan akses kamera di pengaturan browser."):"NotFoundError"===e.name?g("Kamera tidak ditemukan. Pastikan perangkat memiliki kamera."):g("Gagal mengakses kamera: ".concat(e.message||"Unknown error"))}},[D]),L=(0,o.useCallback)(()=>{i.current&&(i.current.stop(),i.current=null),console.log("[Scanner] Cleanup completed")},[]);(0,o.useEffect)(()=>(r.current=!0,n.current=!1,B(),()=>{r.current=!1,L()}),[B,L]);const F=async t=>{_(!0),S("");try{const n=localStorage.getItem("access_token"),o=await fetch("/api/products/barcode/".concat(t,"?tenant_id=").concat(u),{headers:{Authorization:"Bearer ".concat(n)}});if(o.ok){const n=await o.json();if(console.log("[Scanner] Product found:",n),N(!0),_(!1),await new Promise(e=>setTimeout(e,800)),!r.current)return;e(d,{state:{action:"purchase",productData:{name:n.nama_produk||n.name,barcode:t,unit:n.satuan||n.unit,units_per_pack:n.units_per_pack,harga_jual:n.harga_jual,last_price:n.last_price}},replace:!0})}else 404===o.status?(S("Produk tidak ditemukan untuk barcode: ".concat(t)),_(!1)):(S("Gagal mencari produk. Silakan coba lagi."),_(!1))}catch(n){console.error("[Scanner] Product lookup error:",n),S("Gagal mencari produk. Silakan coba lagi."),_(!1)}},U=()=>{k(!0),O("")};(0,o.useEffect)(()=>{13===T.length&&I&&(k(!1),n.current=!0,x(T),w(!1),i.current&&i.current.stop(),F(T))},[T,I]);const z=()=>{"purchase"===c&&u?e("/app?tenant=".concat(u,"&action=openPurchaseForm"),{replace:!0}):u?e("/app?tenant=".concat(u),{replace:!0}):e(-1)};return(0,Oe.jsxs)("div",{className:"fixed inset-0 bg-gray-900 flex flex-col",children:[(0,Oe.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center gap-3 flex-shrink-0",children:[(0,Oe.jsx)("button",{onClick:z,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors active:bg-gray-200",children:(0,Oe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Oe.jsx)("div",{className:"flex-1",children:(0,Oe.jsx)("h1",{className:"font-semibold text-lg",children:"purchase"===c?"Scan Produk Pembelian":"Scan Produk"})}),(0,Oe.jsx)("button",{onClick:U,className:"px-4 py-2.5 bg-gray-800 text-white text-sm font-medium rounded-lg hover:bg-gray-700 active:bg-gray-900 transition-colors",children:"Input Manual"})]}),I&&(0,Oe.jsx)("div",{className:"fixed inset-0 z-[100] bg-black/60 flex items-center justify-center p-4",onClick:()=>k(!1),children:(0,Oe.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-sm shadow-2xl p-4",onClick:e=>e.stopPropagation(),children:[(0,Oe.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,Oe.jsx)("button",{onClick:()=>M("barcode"),className:"flex-1 py-2.5 rounded-lg font-medium text-sm transition-colors ".concat("barcode"===R?"bg-gray-800 text-white":"bg-gray-100 text-gray-600"),children:"\ud83d\udcca Barcode"}),(0,Oe.jsx)("button",{onClick:()=>M("name"),className:"flex-1 py-2.5 rounded-lg font-medium text-sm transition-colors ".concat("name"===R?"bg-gray-800 text-white":"bg-gray-100 text-gray-600"),children:"\ud83d\udcdd Nama Produk"})]}),"barcode"===R&&(0,Oe.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:T,onChange:e=>O(e.target.value.replace(/\D/g,"").slice(0,13)),placeholder:"13 digit code",className:"w-full px-4 py-4 text-xl text-center font-mono border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 tracking-widest placeholder:text-gray-400 placeholder:text-base placeholder:font-sans",autoFocus:!0,maxLength:13}),"name"===R&&(0,Oe.jsxs)("div",{children:[(0,Oe.jsx)("input",{type:"text",value:P,onChange:e=>j(e.target.value),placeholder:"Ketik nama produk...",className:"w-full px-4 py-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 placeholder:text-gray-400",autoFocus:!0}),P.length>=2&&(0,Oe.jsxs)("button",{onClick:()=>{k(!1),e(d,{state:{action:"purchase",productData:{name:P,barcode:"",unit:void 0}},replace:!0})},className:"w-full mt-3 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 active:bg-green-800 transition-colors",children:['Gunakan "',P,'"']})]})]})}),(0,Oe.jsxs)("div",{className:"flex-1 relative bg-black",children:[(0,Oe.jsx)("video",{ref:a,className:"absolute inset-0 w-full h-full object-cover",playsInline:!0,muted:!0,autoPlay:!0}),v&&!b&&(0,Oe.jsx)("div",{className:"absolute inset-0 pointer-events-none z-10",children:(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"relative transition-all duration-200",style:{width:"85vw",height:"60vh",maxWidth:"500px",maxHeight:"400px",boxShadow:"0 0 20px ".concat("rgba(255, 255, 255, 0.3)")},children:[(0,Oe.jsx)("div",{className:"absolute top-0 left-0 w-10 h-10 border-t-4 border-l-4 ".concat("border-white/70"," transition-colors")}),(0,Oe.jsx)("div",{className:"absolute top-0 right-0 w-10 h-10 border-t-4 border-r-4 ".concat("border-white/70"," transition-colors")}),(0,Oe.jsx)("div",{className:"absolute bottom-0 left-0 w-10 h-10 border-b-4 border-l-4 ".concat("border-white/70"," transition-colors")}),(0,Oe.jsx)("div",{className:"absolute bottom-0 right-0 w-10 h-10 border-b-4 border-r-4 ".concat("border-white/70"," transition-colors")}),(0,Oe.jsx)("div",{className:"absolute left-2 right-2 h-0.5 bg-white/80",style:{boxShadow:"0 0 10px rgba(255, 255, 255, 0.6)",animation:"scanLine 1.5s ease-in-out infinite"}})]})})}),m&&(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white z-10 bg-black",children:(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsxs)("svg",{className:"w-12 h-12 mx-auto mb-3 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Oe.jsx)("p",{children:"Memulai scanner..."})]})}),!m&&!1===f&&(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white p-6 z-10 bg-black",children:(0,Oe.jsxs)("div",{className:"text-center max-w-md",children:[(0,Oe.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,Oe.jsx)("p",{className:"mb-4",children:p}),(0,Oe.jsxs)("button",{onClick:B,className:"px-6 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 active:bg-amber-700 transition-colors flex items-center gap-2 mx-auto",children:[(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Coba Lagi"]}),(0,Oe.jsx)("button",{onClick:z,className:"mt-3 px-6 py-2 text-sm text-gray-400 hover:text-white transition-colors block mx-auto",children:"Kembali"})]})}),b&&(0,Oe.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-30 bg-black/80",children:(0,Oe.jsx)("div",{className:"bg-white rounded-xl p-6 mx-4 max-w-sm w-full shadow-2xl",children:C?(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsxs)("svg",{className:"animate-spin w-8 h-8 mx-auto mb-3 text-gray-600",fill:"none",viewBox:"0 0 24 24",children:[(0,Oe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Oe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,Oe.jsx)("p",{className:"text-sm text-gray-600",children:"Mencari produk..."}),(0,Oe.jsx)("p",{className:"text-xs text-gray-400 mt-1 font-mono",children:b})]}):A?(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("svg",{className:"w-10 h-10 mx-auto mb-3 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Oe.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,Oe.jsx)("p",{className:"text-sm text-gray-700 font-medium",children:"Produk ditemukan!"}),(0,Oe.jsx)("p",{className:"text-xs text-gray-400 font-mono",children:b})]}):E?(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("svg",{className:"w-10 h-10 mx-auto mb-3 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,Oe.jsx)("p",{className:"text-sm text-gray-700 mb-1",children:E}),(0,Oe.jsx)("p",{className:"text-xs text-gray-400 mb-4 font-mono",children:b}),(0,Oe.jsxs)("div",{className:"flex gap-2",children:[(0,Oe.jsx)("button",{onClick:async()=>{x(null),S(""),N(!1),n.current=!1,await B()},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Scan Ulang"}),(0,Oe.jsx)("button",{onClick:U,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Input Manual"})]})]}):(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("svg",{className:"w-10 h-10 mx-auto mb-3 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Oe.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,Oe.jsx)("p",{className:"text-sm text-gray-700",children:"Barcode terdeteksi!"}),(0,Oe.jsx)("p",{className:"text-xs text-gray-400 font-mono",children:b})]})})}),(0,Oe.jsx)("style",{children:"\n          @keyframes scanLine {\n            0% { top: 10%; }\n            50% { top: 90%; }\n            100% { top: 10%; }\n          }\n        "}),v&&!b&&(0,Oe.jsx)("div",{className:"absolute bottom-32 left-0 right-0 text-center text-white z-20",children:(0,Oe.jsx)("div",{className:"inline-block px-6 py-3 rounded-full backdrop-blur-sm bg-black/60",children:(0,Oe.jsx)("p",{className:"text-sm font-medium",children:(0,Oe.jsx)(gu,{})})})})]})]})},yu=()=>{var e;const t=re(),r=(null===(e=ee().state)||void 0===e?void 0:e.initialMessage)||"",[n,i]=(0,o.useState)([]),[a,s]=(0,o.useState)(""),[l,c]=(0,o.useState)(!1);(0,o.useEffect)(()=>{r&&u(r)},[]);const u=async e=>{if(!e.trim())return;const t={id:Date.now().toString(),text:e,sender:"user",timestamp:new Date};i(e=>[...e,t]),s(""),c(!0);try{await new Promise(e=>setTimeout(e,1e3));const e={id:(Date.now()+1).toString(),text:"Hai! Saya Milky \ud83d\ude0a Saya sedang dalam tahap development untuk setup mode. Fitur ini akan segera hadir untuk membantu kamu membuat akun dan generate URL unik untuk bisnis kamu!",sender:"milky",timestamp:new Date};i(t=>[...t,e])}catch(r){console.error("Error:",r)}finally{c(!1)}};return(0,Oe.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50",children:[(0,Oe.jsxs)("header",{className:"bg-white shadow-sm border-b px-4 py-3 flex items-center space-x-3",children:[(0,Oe.jsx)("button",{onClick:()=>t("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Oe.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center",children:(0,Oe.jsx)("span",{className:"text-white font-bold",children:"m"})}),(0,Oe.jsxs)("div",{className:"flex-1",children:[(0,Oe.jsx)("h1",{className:"font-semibold text-gray-900",children:"Milky - Setup Assistant"}),(0,Oe.jsx)("p",{className:"text-xs text-gray-500",children:"Bantu kamu setup bisnis"})]})]}),(0,Oe.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",children:[0===n.length&&(0,Oe.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[(0,Oe.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,Oe.jsx)("span",{className:"text-3xl",children:"\ud83d\udc4b"})}),(0,Oe.jsx)("p",{className:"text-sm",children:"Hai! Ada yang bisa Milky bantu?"})]}),n.map(e=>(0,Oe.jsx)("div",{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"),children:(0,Oe.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-3 rounded-2xl ".concat("user"===e.sender?"bg-purple-600 text-white":"bg-white text-gray-800 shadow-sm"),children:[(0,Oe.jsx)("p",{className:"text-sm leading-relaxed",children:e.text}),(0,Oe.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.sender?"text-purple-200":"text-gray-400"),children:e.timestamp.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]})},e.id)),l&&(0,Oe.jsx)("div",{className:"flex justify-start",children:(0,Oe.jsx)("div",{className:"bg-white rounded-2xl px-4 py-3 shadow-sm",children:(0,Oe.jsxs)("div",{className:"flex space-x-2",children:[(0,Oe.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),(0,Oe.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Oe.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),(0,Oe.jsx)("div",{className:"bg-white border-t px-4 py-3",children:(0,Oe.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,Oe.jsx)("div",{className:"flex items-center space-x-3",children:(0,Oe.jsxs)("div",{className:"flex-1 relative",children:[(0,Oe.jsx)("input",{value:a,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u(a))},placeholder:"Ketik pesan...",disabled:l,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:bg-gray-100"}),(0,Oe.jsx)("button",{onClick:()=>u(a),disabled:!a.trim()||l,className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})})})]})},vu=()=>{const e=re(),[t,r]=o.useState(""),n=t=>{t.trim()&&e("/konsultanpsikologi/chat",{state:{initialMessage:t.trim()}})};return(0,Oe.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Oe.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,Oe.jsx)("button",{onClick:()=>e("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Oe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Oe.jsx)("h1",{className:"text-xl font-bold",children:"Konsultan Psikologi"}),(0,Oe.jsx)("div",{className:"w-8 h-8 bg-purple-400 rounded-lg flex items-center justify-center",children:(0,Oe.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Oe.jsx)("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})})})]}),(0,Oe.jsx)("div",{className:"w-6"})]})}),(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6 pb-24",children:[(0,Oe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,Oe.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,Oe.jsx)("div",{className:"w-16 h-16 bg-purple-600 rounded-xl flex items-center justify-center",children:(0,Oe.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:(0,Oe.jsx)("div",{className:"text-purple-600 font-bold text-sm",children:"KP"})})}),(0,Oe.jsx)("div",{children:(0,Oe.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Konsultan Psikologi"})})]}),(0,Oe.jsx)("div",{className:"relative mb-6",children:(0,Oe.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 rounded-lg p-8 text-white",children:(0,Oe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Oe.jsxs)("div",{className:"flex-1",children:[(0,Oe.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Layanan Konseling Profesional"}),(0,Oe.jsx)("p",{className:"text-purple-100",children:"Solusi kesehatan mental terpercaya"})]}),(0,Oe.jsx)("div",{className:"w-32 h-20 bg-white/20 rounded-lg flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("div",{className:"w-16 h-10 bg-white/30 rounded mb-2"}),(0,Oe.jsx)("div",{className:"text-xs",children:"Konseling"})]})})]})})})]}),(0,Oe.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[{title:"Konseling Individu",desc:"Rp 150.000/sesi"},{title:"Konseling Pasangan",desc:"Rp 250.000/sesi"},{title:"Konseling Keluarga",desc:"Rp 300.000/sesi"},{title:"Konseling Online",desc:"Fleksibel"}].map((e,t)=>(0,Oe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,Oe.jsx)("div",{className:"w-full h-24 bg-gradient-to-br from-purple-500 to-purple-700 rounded-lg mb-3 flex items-center justify-center",children:(0,Oe.jsx)("div",{className:"text-white text-sm font-medium text-center",children:e.title})}),(0,Oe.jsx)("p",{className:"text-sm text-gray-600",children:e.desc})]},t))})]}),(0,Oe.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-lg",children:(0,Oe.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Oe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Oe.jsx)("div",{className:"w-10 h-10 bg-purple-400 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Oe.jsx)("span",{className:"text-white font-bold text-sm",children:"m"})}),(0,Oe.jsxs)("div",{className:"flex-1 relative",children:[(0,Oe.jsx)("input",{value:t,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n(t))},placeholder:"Chat dengan konsultan...",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,Oe.jsx)("button",{onClick:()=>n(t),disabled:!t.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})})})]})},wu=()=>{const e=re(),t=ee(),[r,n]=(0,o.useState)([]),[i,a]=(0,o.useState)(""),[s,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1),[d,f]=(0,o.useState)(!0),[h,p]=(0,o.useState)(!1),g=(0,o.useRef)(null);(0,o.useEffect)(()=>{(()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[r]),(0,o.useEffect)(()=>{(async()=>{if(ke())try{const e=await Xe("konsultanpsikologi");u(e)}catch(e){console.error("Access check failed:",e),u(!1)}else u(!1);f(!1)})()},[]),(0,o.useEffect)(()=>{var e;const r=null===(e=t.state)||void 0===e?void 0:e.initialMessage;r&&!d&&m(r)},[t.state,d]);const m=async e=>{if(!e.trim()||s)return;const t={id:Date.now().toString(),text:e,isUser:!0,timestamp:new Date};n(e=>[...e,t]),a(""),l(!0);try{let t;if(c)t=await Ye("konsultanpsikologi",e);else{const r=await fetch("/tenant/konsultanpsikologi/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});t=await r.json()}const r={id:(Date.now()+1).toString(),text:t.milky_response||t.message||"Maaf, terjadi kesalahan.",isUser:!1,timestamp:new Date};n(e=>[...e,r])}catch(r){console.error("Error sending message:",r);const e={id:(Date.now()+1).toString(),text:"Maaf, terjadi kesalahan. Silakan coba lagi.",isUser:!1,timestamp:new Date};n(t=>[...t,e])}finally{l(!1)}};return d?(0,Oe.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),(0,Oe.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):(0,Oe.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50",children:[(0,Oe.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,Oe.jsx)("button",{onClick:()=>e("/konsultanpsikologi"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Oe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Oe.jsx)("h1",{className:"text-xl font-bold",children:"Konsultan Psikologi"}),c&&(0,Oe.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs font-semibold rounded-full",children:"Tenant Mode"})]}),c?(0,Oe.jsx)("button",{onClick:()=>{Te(),window.location.reload()},className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Logout"}):(0,Oe.jsx)("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700",children:"Login"})]})}),c&&(0,Oe.jsx)("div",{className:"bg-purple-50 border-b border-purple-100 px-4 py-3",children:(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center space-x-2 overflow-x-auto",children:[(0,Oe.jsx)("button",{onClick:()=>m("produk apa yang paling laku?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udcca Top Products"}),(0,Oe.jsx)("button",{onClick:()=>m("produk mana yang kurang laku?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\u26a0\ufe0f Low Sellers"}),(0,Oe.jsx)("button",{onClick:()=>m("cek stok ballpoint"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udce6 Check Stock"}),(0,Oe.jsx)("button",{onClick:()=>m("untung bulan ini berapa?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udcb0 Monthly Profit"})]})}),(0,Oe.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto space-y-4",children:[r.map(e=>(0,Oe.jsx)("div",{className:"flex ".concat(e.isUser?"justify-end":"justify-start"),children:(0,Oe.jsxs)("div",{className:"max-w-[80%] rounded-2xl px-4 py-3 ".concat(e.isUser?"bg-purple-600 text-white":"bg-white text-gray-800 shadow-sm"),children:[(0,Oe.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.text}),(0,Oe.jsx)("p",{className:"text-xs mt-1 ".concat(e.isUser?"text-purple-200":"text-gray-400"),children:e.timestamp.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]})},e.id)),s&&(0,Oe.jsx)("div",{className:"flex justify-start",children:(0,Oe.jsx)("div",{className:"bg-white rounded-2xl px-4 py-3 shadow-sm",children:(0,Oe.jsxs)("div",{className:"flex space-x-2",children:[(0,Oe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,Oe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Oe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,Oe.jsx)("div",{ref:g})]})}),(0,Oe.jsx)("div",{className:"bg-white border-t p-4",children:(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto flex items-end space-x-3",children:[(0,Oe.jsx)("div",{className:"flex-1",children:(0,Oe.jsx)("textarea",{value:i,onChange:e=>a(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m(i))},placeholder:"Ketik pesan Anda...",className:"w-full px-4 py-3 border border-gray-300 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:1,disabled:s})}),(0,Oe.jsx)("button",{onClick:()=>m(i),disabled:!i.trim()||s,className:"w-12 h-12 bg-purple-400 text-white rounded-full flex items-center justify-center hover:bg-purple-500 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:(0,Oe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})}),(0,Oe.jsx)(Re,{isOpen:h,onClose:()=>p(!1),onLoginSuccess:async()=>{p(!1),f(!0);try{const e=await Xe("konsultanpsikologi");u(e)}catch(e){console.error("Access check failed:",e),u(!1)}f(!1)}})]})},bu=()=>{const e=re(),{tenantId:t}=ne(),[r,n]=(0,o.useState)(""),[i,a]=(0,o.useState)(null),[s,l]=(0,o.useState)(!0),[c,u]=(0,o.useState)("");(0,o.useEffect)(()=>{console.log("[DEBUG] useEffect triggered, tenantId:",t);(async()=>{if(t){console.log("[DEBUG] Starting fetch for tenant:",t);try{const e=await fetch("".concat("https://dev.milkyhoop.com","/api/tenant/").concat(t,"/info"));if(console.log("[DEBUG] Response status:",e.status,"ok:",e.ok),!e.ok)throw new Error("Tenant not found");const r=await e.json();console.log("[DEBUG] Data received:",r);let n=r.data.menu_items;if("string"===typeof n)try{n=JSON.parse(n)}catch(Au){console.log("[DEBUG] Failed to parse menu_items, using empty array"),n=[]}const o=Ve(Ve({},r.data),{},{menu_items:Array.isArray(n)?n:[]});console.log("[DEBUG] Setting tenant info:",o),a(o)}catch(e){console.error("[DEBUG] Error in fetchTenantInfo:",e),u("Tenant not found")}finally{console.log("[DEBUG] Fetch complete, setting loading to false"),l(!1)}}else console.log("[DEBUG] No tenantId provided")})()},[t]);const d=r=>{r.trim()&&e("/".concat(t,"/chat"),{state:{initialMessage:r.trim()}})};return s?(console.log("[DEBUG] Rendering loading state"),(0,Oe.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("div",{className:"w-16 h-16 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,Oe.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})})):c||!i?(console.log("[DEBUG] Rendering error state. error:",c,"tenantInfo:",i),(0,Oe.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"404"}),(0,Oe.jsx)("p",{className:"text-gray-600 mb-4",children:"Tenant not found"}),(0,Oe.jsx)("button",{onClick:()=>e("/"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Go Home"})]})})):(console.log("[DEBUG] Rendering main content with tenant:",i),(0,Oe.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Oe.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,Oe.jsx)("button",{onClick:()=>e("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Oe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Oe.jsx)("h1",{className:"text-xl font-bold",children:i.display_name}),(0,Oe.jsx)("div",{className:"w-8 h-8 bg-purple-400 rounded-lg flex items-center justify-center",children:(0,Oe.jsx)("span",{className:"text-white font-bold text-sm",children:i.display_name.substring(0,2).toUpperCase()})})]}),(0,Oe.jsx)("div",{className:"w-6"})]})}),(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6 pb-24",children:[(0,Oe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,Oe.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,Oe.jsx)("div",{className:"w-16 h-16 bg-purple-600 rounded-xl flex items-center justify-center",children:(0,Oe.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center",children:(0,Oe.jsx)("div",{className:"text-purple-600 font-bold text-sm",children:i.display_name.substring(0,2).toUpperCase()})})}),(0,Oe.jsx)("div",{children:(0,Oe.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:i.display_name})})]}),(0,Oe.jsx)("div",{className:"relative mb-6",children:(0,Oe.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 rounded-lg p-8 text-white",children:(0,Oe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Oe.jsxs)("div",{className:"flex-1",children:[(0,Oe.jsxs)("h3",{className:"text-xl font-semibold mb-2",children:["Welcome to ",i.display_name]}),(0,Oe.jsx)("p",{className:"text-purple-100",children:"Chat with us to get started"})]}),(0,Oe.jsx)("div",{className:"w-32 h-20 bg-white/20 rounded-lg flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("div",{className:"w-16 h-10 bg-white/30 rounded mb-2"}),(0,Oe.jsx)("div",{className:"text-xs",children:"Chat Now"})]})})]})})})]}),i.menu_items&&i.menu_items.length>0?(0,Oe.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:i.menu_items.map((e,t)=>(0,Oe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,Oe.jsx)("div",{className:"w-full h-24 bg-gradient-to-br from-purple-500 to-purple-700 rounded-lg mb-3 flex items-center justify-center",children:(0,Oe.jsx)("div",{className:"text-white text-sm font-medium text-center",children:e.name||e.service||"Item"})}),(0,Oe.jsx)("p",{className:"text-sm text-gray-600",children:e.price?"Rp ".concat(e.price.toLocaleString()):e.desc||"Available"})]},t))}):(0,Oe.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[{title:"Product 1",desc:"Available"},{title:"Product 2",desc:"Available"},{title:"Product 3",desc:"Available"},{title:"Product 4",desc:"Available"}].map((e,t)=>(0,Oe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,Oe.jsx)("div",{className:"w-full h-24 bg-gradient-to-br from-purple-500 to-purple-700 rounded-lg mb-3 flex items-center justify-center",children:(0,Oe.jsx)("div",{className:"text-white text-sm font-medium text-center",children:e.title})}),(0,Oe.jsx)("p",{className:"text-sm text-gray-600",children:e.desc})]},t))})]}),(0,Oe.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-lg",children:(0,Oe.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Oe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Oe.jsx)("div",{className:"w-10 h-10 bg-purple-400 rounded-full flex items-center justify-center flex-shrink-0",children:(0,Oe.jsx)("span",{className:"text-white font-bold text-sm",children:"m"})}),(0,Oe.jsxs)("div",{className:"flex-1 relative",children:[(0,Oe.jsx)("input",{value:r,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d(r))},placeholder:"Chat dengan ".concat(i.display_name,"..."),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,Oe.jsx)("button",{onClick:()=>d(r),disabled:!r.trim(),className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:(0,Oe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})})})]}))};function xu(e){let{content:t}=e;return(0,Oe.jsx)("p",{className:"text-sm whitespace-pre-wrap",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:t})}function Cu(e){let{content:t}=e;return(0,Oe.jsx)("div",{className:"text-sm text-left whitespace-pre-wrap",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontVariantNumeric:"tabular-nums"},children:t})}function _u(e){let{message:t}=e;const r=t.isFromUser,n="financial_report"===t.type||t.text.includes("\u251c\u2500")||t.text.includes("\u2514\u2500"),o=t.text.includes("<table")||t.text.includes("<div")||t.text.includes("<br");return(0,Oe.jsxs)("div",{className:"flex flex-col mb-4 ".concat(r?"items-end":"items-start"),children:[(0,Oe.jsx)("div",{className:"rounded-2xl px-4 py-2 max-w-[80%] ".concat(r?"bg-purple-600 text-white ml-auto":"bg-gray-100 text-gray-900 mr-auto"),children:o?(0,Oe.jsx)("div",{dangerouslySetInnerHTML:{__html:t.text},className:"text-sm leading-relaxed"}):n?(0,Oe.jsx)(Cu,{content:t.text}):(0,Oe.jsx)(xu,{content:t.text})}),t.timestamp&&(0,Oe.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:t.timestamp})]})}const Eu=()=>{const e=re(),t=ee(),{tenantId:r}=ne(),[n,i]=(0,o.useState)([]),[a,s]=(0,o.useState)(""),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(!1),[f,h]=(0,o.useState)(!0),[p,g]=(0,o.useState)(!1),[m,y]=(0,o.useState)(null),v=(0,o.useRef)(null);(0,o.useEffect)(()=>{(()=>{var e;null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[n]),(0,o.useEffect)(()=>{(async()=>{if(r)try{const e=await fetch("/api/tenant/".concat(r,"/info"));if(e.ok){const t=await e.json();y(t.data)}}catch(e){console.error("Failed to fetch tenant info:",e)}})()},[r]),(0,o.useEffect)(()=>{(async()=>{if(r){if(ke())try{const e=await Xe(r);d(e)}catch(e){console.error("Access check failed:",e),d(!1)}else d(!1);h(!1)}else h(!1)})()},[r]),(0,o.useEffect)(()=>{var e;const r=null===(e=t.state)||void 0===e?void 0:e.initialMessage;r&&!f&&w(r)},[t.state,f]);const w=async e=>{if(!e.trim()||l||!r)return;const t={id:Date.now().toString(),text:e,isUser:!0,timestamp:new Date};i(e=>[...e,t]),s(""),c(!0);try{let t;if(u)t=await Ye(r,e);else{const n=await fetch("/tenant/".concat(r,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})});t=await n.json()}const n={id:(Date.now()+1).toString(),text:t.milky_response||t.message||"Maaf, terjadi kesalahan.",isUser:!1,timestamp:new Date};i(e=>[...e,n])}catch(n){console.error("Error sending message:",n);const e={id:(Date.now()+1).toString(),text:"Maaf, terjadi kesalahan. Silakan coba lagi.",isUser:!1,timestamp:new Date};i(t=>[...t,e])}finally{c(!1)}};return f?(0,Oe.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Oe.jsxs)("div",{className:"text-center",children:[(0,Oe.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),(0,Oe.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):(0,Oe.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50",children:[(0,Oe.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,Oe.jsx)("button",{onClick:()=>e("/".concat(r)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Oe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Oe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Oe.jsx)("h1",{className:"text-xl font-bold",children:(null===m||void 0===m?void 0:m.display_name)||"Chat"}),u&&(0,Oe.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs font-semibold rounded-full",children:"Tenant Mode"})]}),u?(0,Oe.jsx)("button",{onClick:()=>{Te(),window.location.reload()},className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Logout"}):(0,Oe.jsx)("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700",children:"Login"})]})}),u&&(0,Oe.jsx)("div",{className:"bg-purple-50 border-b border-purple-100 px-4 py-3",children:(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center space-x-2 overflow-x-auto",children:[(0,Oe.jsx)("button",{onClick:()=>w("produk apa yang paling laku?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udcca Top Products"}),(0,Oe.jsx)("button",{onClick:()=>w("produk mana yang kurang laku?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\u26a0\ufe0f Low Sellers"}),(0,Oe.jsx)("button",{onClick:()=>w("cek stok ballpoint"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udce6 Check Stock"}),(0,Oe.jsx)("button",{onClick:()=>w("untung bulan ini berapa?"),className:"px-4 py-2 bg-white border border-purple-200 rounded-lg text-sm font-medium text-purple-700 hover:bg-purple-50 whitespace-nowrap",children:"\ud83d\udcb0 Monthly Profit"})]})}),(0,Oe.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto space-y-4",children:[n.map(e=>(0,Oe.jsx)(_u,{message:{text:e.text,isFromUser:e.isUser,timestamp:e.timestamp.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}},e.id)),l&&(0,Oe.jsx)("div",{className:"flex justify-start",children:(0,Oe.jsx)("div",{className:"bg-white rounded-2xl px-4 py-3 shadow-sm",children:(0,Oe.jsxs)("div",{className:"flex space-x-2",children:[(0,Oe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,Oe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Oe.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,Oe.jsx)("div",{ref:v})]})}),(0,Oe.jsx)("div",{className:"bg-white border-t p-4",children:(0,Oe.jsxs)("div",{className:"max-w-4xl mx-auto flex items-end space-x-3",children:[(0,Oe.jsx)("div",{className:"flex-1",children:(0,Oe.jsx)("textarea",{value:a,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),w(a))},placeholder:"Ketik pesan Anda...",className:"w-full px-4 py-3 border border-gray-300 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:1,disabled:l})}),(0,Oe.jsx)("button",{onClick:()=>w(a),disabled:!a.trim()||l,className:"w-12 h-12 bg-purple-400 text-white rounded-full flex items-center justify-center hover:bg-purple-500 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:(0,Oe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Oe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})}),(0,Oe.jsx)(Re,{isOpen:p,onClose:()=>g(!1),onLoginSuccess:async()=>{if(g(!1),h(!0),r)try{const e=await Xe(r);d(e)}catch(e){console.error("Access check failed:",e),d(!1)}h(!1)}})]})};const Su=function(){const e=ke();return(0,Oe.jsx)(Ce,{children:(0,Oe.jsx)("div",{className:"App",children:(0,Oe.jsxs)(we,{children:[(0,Oe.jsx)(ye,{path:"/",element:e?(0,Oe.jsx)(pu,{}):(0,Oe.jsx)(Me,{})}),(0,Oe.jsx)(ye,{path:"/app",element:(0,Oe.jsx)(pu,{})}),(0,Oe.jsx)(ye,{path:"/sales/scan",element:(0,Oe.jsx)(mu,{})}),(0,Oe.jsx)(ye,{path:"/chat",element:(0,Oe.jsx)(yu,{})}),(0,Oe.jsx)(ye,{path:"/konsultanpsikologi",element:(0,Oe.jsx)(vu,{})}),(0,Oe.jsx)(ye,{path:"/konsultanpsikologi/chat",element:(0,Oe.jsx)(wu,{})}),(0,Oe.jsx)(ye,{path:"/:tenantId",element:(0,Oe.jsx)(bu,{})}),(0,Oe.jsx)(ye,{path:"/:tenantId/chat",element:(0,Oe.jsx)(Eu,{})})]})})})};a.createRoot(document.getElementById("root")).render((0,Oe.jsx)(o.StrictMode,{children:(0,Oe.jsx)(Su,{})})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("[PWA] Service Worker registered:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&(console.log("[PWA] New content available, refresh to update"),window.dispatchEvent(new CustomEvent("sw-update-available")))})})}).catch(e=>{console.error("[PWA] Service Worker registration failed:",e)})})})();
//# sourceMappingURL=main.f3f1e4da.js.map