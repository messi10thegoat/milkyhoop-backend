# ===========================================
# MilkyHoop Environment Configuration
# Copy this file to .env and fill in your secrets
# NEVER commit .env to version control!
# ===========================================

# Environment (development | staging | production)
ENVIRONMENT=development
DEBUG=false

# ===========================================
# DATABASE CONFIGURATION (REQUIRED)
# ===========================================
DB_HOST=postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_secure_database_password_here
DB_NAME=milkydb

# Database SSL (RECOMMENDED for production)
DB_SSL_ENABLED=false
DB_SSL_CA_PATH=/etc/ssl/milkyhoop/ca.crt

# Alternative: Full DATABASE_URL (overrides individual settings)
# DATABASE_URL=postgresql://user:password@host:5432/dbname?sslmode=require

# ===========================================
# REDIS CONFIGURATION (REQUIRED)
# ===========================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_secure_redis_password_here

# ===========================================
# JWT CONFIGURATION (REQUIRED)
# ===========================================
# Generate with: openssl rand -hex 64
JWT_SECRET=your_jwt_secret_minimum_64_characters_for_production_security
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=7

# ===========================================
# RATE LIMITING
# ===========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60
RATE_LIMIT_AUTH_REQUESTS=5
RATE_LIMIT_AUTH_WINDOW=60

# ===========================================
# CORS CONFIGURATION
# ===========================================
CORS_ORIGINS=https://milkyhoop.com,https://www.milkyhoop.com,https://dev.milkyhoop.com

# ===========================================
# TLS/SSL CONFIGURATION
# ===========================================
# gRPC TLS (REQUIRED for production)
GRPC_TLS_ENABLED=false
GRPC_TLS_CERT_PATH=/etc/ssl/milkyhoop/grpc.crt
GRPC_TLS_KEY_PATH=/etc/ssl/milkyhoop/grpc.key
GRPC_TLS_CA_PATH=/etc/ssl/milkyhoop/ca.crt

# ===========================================
# EXTERNAL APIS
# ===========================================
# OPENAI_API_KEY=sk-your-openai-api-key
# GOOGLE_CLIENT_ID=your-google-client-id
# GOOGLE_CLIENT_SECRET=your-google-client-secret

# ===========================================
# SECURITY
# ===========================================
# Internal API key for service-to-service communication
# Generate with: openssl rand -hex 32
INTERNAL_API_KEY=your_internal_api_key_here

# ===========================================
# AUDIT LOGGING
# ===========================================
AUDIT_LOG_DIR=/var/log/milkyhoop/audit
LOG_LEVEL=INFO

# ===========================================
# FIELD-LEVEL ENCRYPTION (FLE)
# ===========================================
# Primary Key Encryption Key (KEK) - REQUIRED for FLE
# Generate with: openssl rand -base64 32
FLE_PRIMARY_KEK=your_primary_kek_base64_encoded_here

# Secondary KEK for key rotation (optional)
# FLE_SECONDARY_KEK=your_secondary_kek_base64_encoded_here

# Salt for blind index generation
# Generate with: openssl rand -hex 32
FLE_BLIND_INDEX_SALT=your_blind_index_salt_here

# ===========================================
# HASHICORP VAULT (OPTIONAL - Enterprise KMS)
# ===========================================
# If using Vault for key management:
# VAULT_ADDR=https://vault.milkyhoop.com:8200
# VAULT_TOKEN=your_vault_token
# VAULT_KEY_NAME=milkyhoop-fle
# VAULT_TRANSIT_PATH=transit
# VAULT_SKIP_VERIFY=false

# ===========================================
# QUICK SETUP - Generate all secrets:
# ===========================================
# Run these commands to generate secure secrets:
#
# DB_PASSWORD:        openssl rand -base64 24
# REDIS_PASSWORD:     openssl rand -base64 24
# JWT_SECRET:         openssl rand -hex 64
# INTERNAL_API_KEY:   openssl rand -hex 32
# FLE_PRIMARY_KEK:    openssl rand -base64 32
# FLE_BLIND_INDEX_SALT: openssl rand -hex 32
# ===========================================
